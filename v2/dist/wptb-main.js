var ke=Object.defineProperty;var Se=(T,B,a)=>B in T?ke(T,B,{enumerable:!0,configurable:!0,writable:!0,value:a}):T[B]=a;var It=(T,B,a)=>Se(T,typeof B!="symbol"?B+"":B,a);import{j as e,c as mt,r as X,a as Dt,g as Ce,W as ne,T as Ft,R as Kt,b as je,S as se,E as ie,d as Ee,e as Te,n as ut,C as Ie,M as ae,f as Ht,h as Ae,F as Yt,D as Zt,s as Ne,p as qt,v as ze,i as Ut,k as oe,l as Nt,m as le,u as Jt,t as Oe,o as At,q as Xt,w as Re,x as Be,y as Bt,U as Pe,z as Le,P as ce,A as Fe,L as Et,B as De,G as he,H as Ue,I as We,J as Me,K as Ge,N as St,O as de,Q as zt,V as He,X as Pt,Y as Ze,Z as qe,_ as Wt,$ as Mt,a0 as Ve,a1 as $e,a2 as Ke,a3 as Ye,a4 as Je,a5 as Xe}from"./assets/index-CmJSFkLU.js";const Qe=T=>e.jsxs("svg",{...T,viewBox:"0 0 134 131",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M120.619 0.704712H13.8714C6.502 0.704712 0.527954 6.64798 0.527954 13.9794V117.225C0.527954 124.557 6.502 130.5 13.8714 130.5H120.619C127.988 130.5 133.962 124.557 133.962 117.225V13.9794C133.962 6.64798 127.988 0.704712 120.619 0.704712Z",fill:"url(#wptb_logo_paint0_linear_7_1042)"}),e.jsx("path",{d:"M106.489 28.0007H28.0248C26.8471 28.0007 25.8923 28.9506 25.8923 30.1223V44.4636C25.8923 45.6354 26.8471 46.5852 28.0248 46.5852H106.489C107.667 46.5852 108.621 45.6354 108.621 44.4636V30.1223C108.621 28.9506 107.667 28.0007 106.489 28.0007Z",fill:"white"}),e.jsx("path",{d:"M59.7869 56.3042H28.0249C26.8471 56.3042 25.8923 57.254 25.8923 58.4257V72.7671C25.8923 73.9388 26.8471 74.8887 28.0249 74.8887H59.7869C60.9647 74.8887 61.9195 73.9388 61.9195 72.7671V58.4257C61.9195 57.254 60.9647 56.3042 59.7869 56.3042Z",fill:"white"}),e.jsx("path",{d:"M106.489 56.3042H74.7267C73.549 56.3042 72.5942 57.254 72.5942 58.4257V72.7671C72.5942 73.9388 73.549 74.8887 74.7267 74.8887H106.489C107.667 74.8887 108.621 73.9388 108.621 72.7671V58.4257C108.621 57.254 107.667 56.3042 106.489 56.3042Z",fill:"white"}),e.jsx("path",{d:"M59.7631 84.6194H28.001C26.8233 84.6194 25.8685 85.5693 25.8685 86.741V101.082C25.8685 102.254 26.8233 103.204 28.001 103.204H59.7631C60.9409 103.204 61.8957 102.254 61.8957 101.082V86.741C61.8957 85.5693 60.9409 84.6194 59.7631 84.6194Z",fill:"white"}),e.jsx("path",{d:"M106.465 84.6194H74.7029C73.5251 84.6194 72.5703 85.5693 72.5703 86.741V101.082C72.5703 102.254 73.5251 103.204 74.7029 103.204H106.465C107.643 103.204 108.598 102.254 108.598 101.082V86.741C108.598 85.5693 107.643 84.6194 106.465 84.6194Z",fill:"white"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"wptb_logo_paint0_linear_7_1042",x1:"124.538",y1:"-5.75483",x2:"45.6569",y2:"93.515",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#29ABE2"}),e.jsx("stop",{offset:"1",stopColor:"#0071BC"})]})})]}),tr=wp.i18n,Ct=T=>tr.__(T,"wp-table-builder"),Ot=({setPage:T,page:B})=>e.jsxs("div",{className:"wptb-v2-nav",children:[e.jsx("div",{className:"wptb-v2-logo",children:e.jsx(Qe,{})}),e.jsxs("div",{children:[e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":B==="tables"}),onClick:()=>T("tables"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 4H4a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1M4 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm2 5h2v2H6zm5 0a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2zm-3 4H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1m-2 3H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1",clipRule:"evenodd"})}),e.jsx("span",{children:Ct("Table List")})]}),e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":B==="create"}),onClick:()=>T("create"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M18 14h2v3h3v2h-3v3h-2v-3h-3v-2h3zM4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4z"})}),e.jsx("span",{children:Ct("Add New")})]}),e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":B==="import"}),onClick:()=>T("import"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm14.44 2v2h4v2h-4v2l-3-3z"})}),e.jsx("span",{children:Ct("Import")})]}),e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":B==="export"}),onClick:()=>T("export"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm15.44 8v-2h-4v-2h4v-2l3 3z"})}),e.jsx("span",{children:Ct("Export")})]}),WPTB_CFG.SETTINGS.is_authorized&&e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":B==="settings"}),onClick:()=>T("settings"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"})}),e.jsx("span",{children:Ct("Settings")})]})]})]}),er=({apiData:T,setPage:B})=>{const a=w=>{!T||w<1||w>T.total_pages||w===T.current_page||B(w)};return e.jsx("div",{className:"wptb-v2-pagination",children:e.jsxs("div",{className:"wptb-v2-pagination-group",children:[e.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-disabled":T.current_page===1}),onClick:()=>a(T.current_page-1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m15 6l-6 6l6 6"})})}),T.pages.map(w=>w!==0?e.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-active":w===T.current_page}),onClick:()=>a(w),children:w},w):e.jsx("p",{className:"wptb-page-divider",children:"..."})),e.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-disabled":T.current_page===T.total_pages}),onClick:()=>a(T.current_page+1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m9 6l6 6l-6 6"})})})]})})},ue=(T,B="asc")=>{const[a,w]=X.useState({by:T,order:B});return X.useMemo(()=>[a,h=>{let l="asc";a.by===h&&(l=a.order==="asc"?"desc":"asc"),w({by:h,order:l})}],[a])},rr={loading:!0,posts:[],current_page:1,page_start:"...",page_end:"...",total_count:"...",pages:[],total_pages:1},fe=({page:T,search:B,status:a,skipTables:w,sort:h,abortCtrl:l,refetchOnSkipChange:n})=>{const[i,s]=X.useState(rr),[d,v]=X.useState(!1),p=(c,b)=>{if(b){let o;["id","title","date","modified"].includes(h.by||"id")?o=h.by:o="id",o!=="id"?h.order==="asc"?c.sort((m,u)=>m[o].localeCompare(u[o])):c.sort((m,u)=>u[o].localeCompare(m[o])):h.order==="asc"?c.sort((m,u)=>m[o]-u[o]):c.sort((m,u)=>u[o]-m[o])}s({...i,posts:c})},k=n?w:"";return X.useEffect(()=>{const b=`/v1/tables?${new URLSearchParams({page:T.toString(),search:B||"",status:a||"",except:w||"",...h?{sort_by:h.by,sort_order:h.order}:{}}).toString()}`;s(o=>({...o,current_page:T,loading:!0})),Dt(b,{signal:l==null?void 0:l.signal}).then(o=>{const{posts:m,current_page:u,total_pages:S,total_count:C}=o,z=(u-1)*o.per_page+1,A=z+m.length-1;s({loading:!1,posts:m,current_page:u,page_start:z,page_end:A,pages:Ce(S,2),total_pages:S,total_count:C})}).catch(()=>{s({...i,loading:!1}),WPTB.utils.notify("Something went wrong! Please reload the page!","error",0)})},[T,B,a,h.by,h.order,k,d]),[i,p,()=>v(!d)]},pe={duplicate:{icon:ne,title:"Sure to duplicate?",text:T=>`Table: <b>${T.targetTitle}</b> is set to be duplicated.<br/> Are you sure?`,className:"wptb-modal-warning",url:"duplicate"},trash:{icon:Ft,title:"Sure to trash?",text:T=>`Table: <b>${T.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash"},restore:{icon:Kt,title:"Sure to restore?",text:T=>`Table: <b>${T.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore"},delete:{icon:Ft,title:"Sure to delete?",text:T=>`Table: <b>${T.targetTitle}</b> is set to be deleted. Are you sure?<br/> It will be deleted permanently.`,className:"wptb-modal-danger",url:"delete"},trash_bulk:{icon:Ft,title:"Sure to trash?",text:(T,B)=>`<b>${B}</b> table(s) are set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash_bulk"},restore_bulk:{icon:Kt,title:"Sure to restore?",text:(T,B)=>`<b>${B}</b> table(s) are set to be restored. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore_bulk"}},nr=async({action:T,id:B,ids:a})=>{const w=pe[T].url;if(!w)return{action:T,id:B,ids:a,res:{}};try{const[h,l]=await je("/v1/"+w,{id:B,ids:a,security_code:WPTB_CFG.SECURITY_CODE});if(!l.ok)throw new Error(h.message||`HTTP error! Status: ${l.status}`);return{action:T,id:B,ids:a,res:h}}catch(h){return{action:T,id:B,ids:a,res:{error:h.message}}}},sr=({apiData:T,setPage:B,isTrash:a,setTables:w,sortBy:h,sortOrder:l,setSort:n,search:i,setSearch:s})=>{const d=X.useRef({}),v=X.useRef({}),[p,k]=X.useState(""),[c,b]=X.useState(0),[o,m]=X.useState(null);X.useEffect(()=>{d.current={},b(0)},[T]);const u=N=>{B("builder",{table:N})},S=()=>{c<T.posts.length?(T.posts.forEach(N=>{d.current[N.id]=!0}),b(T.posts.length)):(d.current={},b(0))},C=N=>{d.current[N]?(delete d.current[N],b(c-1)):(d.current[N]=!0,b(c+1))},z=async()=>{var _;if(!o)return;if(o.targetId){if(v.current[o.targetId])return;v.current[o.targetId]=!0}else for(const O in d.current){if(v.current[O])return;v.current[O]=d.current[O]}const N=Object.keys(d.current).map(Number);d.current={},b(0),m(null);const{action:x,id:f,ids:E,res:G}=await nr({action:o.action,id:o.targetId,ids:N});if(E!=null&&E.length?E.forEach(O=>{delete v.current[O]}):delete v.current[f],G.error){ut(G.error,"error",0),w([...T.posts]);return}if(G.message&&ut(G.message,"success"),x==="trash"||x==="restore"||x==="delete")w([...T.posts.filter(O=>O.id!==f)]);else if(x==="trash_bulk"||x==="restore_bulk")w([...T.posts.filter(O=>!(E!=null&&E.includes(O.id)))]);else{const O=[...T.posts];(_=G.posts)==null||_.forEach(r=>{O.push(r)}),w(O,!0)}},A=o&&pe[o.action];h=h||"id";const W=N=>{window.open(`${WPTB_CFG.HOME_URL}/?post_type=wptb-tables&p=${N}&_wpnonce=${WPTB_CFG.NONCE.table}`,"_blank")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"wptb-v2-table-upper-group",children:[e.jsxs("div",{className:"wptb-v2-bulk-actions",children:[e.jsxs("select",{value:p,onChange:N=>k(N.target.value),children:[e.jsx("option",{value:"",children:"Bulk Actions"}),a?e.jsx("option",{value:"restore_bulk",children:"Restore"}):e.jsx("option",{value:"trash_bulk",children:"Delete"})]}),e.jsx("button",{type:"button",onClick:()=>c>0&&m({action:p}),children:"Apply"}),e.jsxs("p",{children:[e.jsx("b",{children:c})," items selected"]})]}),e.jsx(se,{placeholder:"Search table...",onChange:s,value:i})]}),e.jsx("div",{className:"wptb-v2-table-list-wrapper",children:e.jsxs("table",{className:mt({"wptb-v2-table-list":!T.loading,"wptb-v2-table-loading":T.loading}),children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30px"}}),e.jsx("col",{}),e.jsx("col",{}),e.jsx("col",{}),e.jsx("col",{})]}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:c===T.posts.length,onChange:S})}),e.jsxs("th",{children:["Title",e.jsx("button",{type:"button",onClick:()=>n("title"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":h==="title"&&l==="asc","wptb-sort-btn-desc":h==="title"&&l!=="asc"})})]}),e.jsxs("th",{children:["Shortcode",e.jsx("button",{type:"button",onClick:()=>n("id"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":h==="id"&&l==="asc","wptb-sort-btn-desc":h==="id"&&l!=="asc"})})]}),e.jsxs("th",{children:["Created",e.jsx("button",{type:"button",onClick:()=>n("date"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":h==="date"&&l==="asc","wptb-sort-btn-desc":h==="date"&&l!=="asc"})})]}),e.jsxs("th",{children:["Last Modified",e.jsx("button",{type:"button",onClick:()=>n("modified"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":h==="modified"&&l==="asc","wptb-sort-btn-desc":h==="modified"&&l!=="asc"})})]})]})}),e.jsx("tbody",{children:T.loading?Array(10).fill(0).map((N,x)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})})]},x)):T.posts.length?T.posts.map(N=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("input",{type:"checkbox",checked:!!d.current[N.id],onChange:()=>C(N.id)}),v.current[N.id]&&e.jsx("div",{className:"wptb-v2-table-pending",children:ie})]}),e.jsxs("td",{children:[e.jsxs("p",{children:[N.is_template?e.jsx(Ee,{}):"",N.title?e.jsx("span",{dangerouslySetInnerHTML:{__html:N.title}}):e.jsx("span",{className:"wptb-v2-table-title-empty",children:"[ Untitled ]"})]}),a?e.jsxs("div",{className:"wptb-v2-table-actions",children:[e.jsx("button",{className:"wptb-table-action-restore",type:"button",onClick:()=>m({action:"restore",targetId:N.id,targetTitle:N.title}),children:"Restore"}),e.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>m({action:"delete",targetId:N.id,targetTitle:N.title}),children:"Delete"})]}):e.jsxs("div",{className:"wptb-v2-table-actions",children:[e.jsx("button",{className:"wptb-table-action-edit",type:"button",onClick:()=>u(N.id),children:"Edit"}),e.jsx("button",{className:"wptb-table-action-duplicate",type:"button",onClick:()=>m({action:"duplicate",targetId:N.id,targetTitle:N.title}),children:"Duplicate"}),e.jsx("button",{type:"button",className:"wptb-table-action-preview",onClick:()=>W(N.id),children:"Preview"}),e.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>m({action:"trash",targetId:N.id,targetTitle:N.title}),children:"Trash"})]})]}),e.jsx("td",{children:e.jsxs("div",{className:"wptb-v2-shortcode-col",children:["[wptb id=",N.id,"]",e.jsx("button",{type:"button",className:"wptb-v2-copy-btn",onClick:()=>{Te(`[wptb id=${N.id}]`),ut("Copied to clipboard!","success")},children:Ie})]})}),e.jsx("td",{children:N.date}),e.jsx("td",{children:N.modified})]},N.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx("p",{children:"No results found"})})})})]})}),A&&e.jsxs(ae,{onClose:()=>m(null),title:A.title,icon:A.icon,className:A.className,children:[e.jsx("p",{dangerouslySetInnerHTML:{__html:A.text(o,c)}}),e.jsxs("div",{className:"wptb-v2-modal-actions",children:[e.jsx("button",{type:"button",onClick:z,children:"Yes"}),e.jsx("button",{type:"button",onClick:()=>m(null),children:"No"})]})]})]})},ir=({setPage:T,page_num:B,search:a,status:w,sort_by:h,sort_order:l})=>{const n=X.useRef(),i=X.useRef(),[s,d]=X.useState(a),[v,p]=fe({page:B?parseInt(B):1,search:a,status:w,sort:{by:h||"id",order:l||"desc"},abortCtrl:n.current});X.useEffect(()=>{const b=s==null?void 0:s.trim();if(a){if(b&&b.length>0&&b.length<2)return}else if(!b||b.length<2)return;i.current&&clearTimeout(i.current),n.current&&n.current.abort(),n.current=new AbortController,i.current=setTimeout(()=>{T("tables",{search:s,status:w}),n.current=void 0,i.current=void 0},500)},[s]);const k=b=>{T("tables",{page_num:1,search:a,status:w,sort_by:b,sort_order:b===(h||"id")&&l==="asc"?"desc":"asc"})},c=w==="trash";return e.jsxs("div",{className:"wptb-v2-page",children:[e.jsx(Ot,{setPage:T,page:"tables"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h2",{children:"Table List"}),e.jsxs("div",{className:"wptb-v2-table-status-btns",children:[e.jsx("button",{type:"button",className:mt({"wptb-v2-active-section":!c}),onClick:()=>{T("tables",{})},children:"ALL"}),e.jsx("button",{type:"button",className:mt({"wptb-v2-active-section":c}),onClick:()=>{T("tables",{status:"trash"})},children:"TRASH"})]})]}),e.jsxs("div",{className:"wptb-v2-table-list-area",children:[e.jsxs("p",{className:"wptb-v2-pagination-info",children:["Showing ",e.jsx("b",{children:v.page_start})," to ",e.jsx("b",{children:v.page_end})," of"," ",e.jsx("b",{children:v.total_count})," entries"]}),e.jsx(sr,{apiData:v,setPage:T,isTrash:c,setTables:p,setSort:k,sortBy:h,sortOrder:l,search:s,setSearch:d}),e.jsx(er,{apiData:v,setPage:b=>T("tables",{page_num:b,search:a,sort_by:h,sort_order:l})})]})]})]})},ar=({setPage:T})=>{const[B,a]=X.useState(4),[w,h]=X.useState(4),l=()=>{const n=Ae(B,w);T("builder",{table:n})};return e.jsxs("div",{className:"wptb-v2-create-table",children:[e.jsx("table",{children:e.jsx("tbody",{children:B<50&&w<50?Array(B).fill(0).map((n,i)=>e.jsx("tr",{children:Array(w).fill(0).map((s,d)=>e.jsx("td",{},d))},i)):e.jsx("tr",{children:e.jsx("td",{})})})}),e.jsxs("div",{className:"wptb-v2-create-table-form",children:[e.jsx("div",{className:"wptb-v2-create-table-form-input",children:e.jsx(Ht,{label:"Number of rows",min:2,max:20,value:B,onChange:a,allowOutOfRange:!0})}),e.jsx("div",{className:"wptb-v2-create-table-form-input",children:e.jsx(Ht,{label:"Number of columns",min:2,max:20,value:w,onChange:h,allowOutOfRange:!0})}),e.jsx("button",{type:"button",className:"wptb-v2-create-btn",onClick:l,children:"Create New"})]})]})},or=({content:T})=>{const B=X.useRef(null);return X.useLayoutEffect(()=>{if(!B.current)return;const a=B.current,w=a.querySelector("table"),{width:h,height:l}=a.getBoundingClientRect(),n=w.dataset.wptbTableContainerMaxWidth;w.style.width="auto",w.style.minWidth=n?`${n}px`:"700px",w.style.transform="";const i=20,{width:s,height:d}=w.getBoundingClientRect(),v=h/(s+i),p=l/(d+i);w.style.transform=`scale(${Math.min(v,p)})`},[]),e.jsx("div",{ref:B,className:"wptb-v2-table-template-html",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:T}})})},kt=[],lr=({setPage:T,search:B})=>{const[a,w]=X.useState(kt),[h,l]=X.useState(!0),[n,i]=X.useState(),s=X.useRef(null);X.useEffect(()=>{if(kt.length){l(!1),w(kt),s.current=new Yt(kt,{includeScore:!0,threshold:.3,keys:["title"]});return}let p=new AbortController;return Dt("/v1/patterns",{signal:p.signal}).then(k=>{if(l(!1),!kt.length){if(k.error)throw new Error(k.error);w(k.patterns),kt.push(...k.patterns),s.current=new Yt(kt,{includeScore:!0,threshold:.3,keys:["title"]})}}).catch(()=>{}).finally(()=>{p=void 0}),()=>p==null?void 0:p.abort()},[]);const d=X.useCallback(p=>{var k;if(p==="")w(kt);else{const c=(k=s.current)==null?void 0:k.search(p),b=c==null?void 0:c.map(o=>o.item);w(b||[])}},[]);X.useEffect(()=>{const p=B==null?void 0:B.trim();if(!p||p.length<2){w(kt);return}d(p)},[B,d]);const v=async p=>{if(p.is_upsell){Ne("patterns");return}if(n){ut("A request is already in progress","error");return}i(p.name);const k=(m,u)=>{const S=qt(m);S.title="Clone of: "+u;const C=ze();S.id=void 0,S.tags=[],Ut.dispatch(oe({id:C,table:S})),T("builder",{table:C})};if(p.content){k(p.content,p.title);return}const c=`/v1/patterns?name=${p.name}`,b=await Dt(c);if(b.error||!b.pattern){ut(b.error||"Something went wrong","error"),i(void 0);return}const o=b.pattern;k(o.content,o.title)};return e.jsx("div",{className:"wptb-v2-table-templates",children:h?Array.from({length:9},(p,k)=>e.jsxs("div",{className:"wptb-v2-table-template",children:[e.jsx("div",{className:"wptb-v2-table-template-preview",children:e.jsx("div",{className:"wptb-v2-table-template-preview-loading"})}),e.jsx("div",{className:"wptb-v2-table-template-title",children:e.jsx("div",{className:"wptb-v2-table-template-title-loading"})})]},k)):a.map(p=>e.jsxs("button",{className:mt("wptb-v2-table-template",{"wptb-v2-table-template-upsell":p.is_upsell}),onClick:()=>v(p),children:[p.content?e.jsx(or,{content:p.content}):e.jsxs("div",{className:"wptb-v2-table-template-preview",children:[e.jsx("img",{src:WPTB_CFG.PLUGIN_URL+"/v2/assets/patterns/images/"+p.name+".png",alt:p.name}),n===p.name&&e.jsx("div",{className:"wptb-v2-table-template-preview-creating",children:e.jsx(Zt,{})})]}),e.jsx("div",{className:"wptb-v2-table-template-title",children:p.title})]},p.name))})},cr=({setPage:T,search:B})=>{const[a,w]=X.useState(B||""),h=X.useRef();return X.useEffect(()=>{const l=a==null?void 0:a.trim();if(B){if(l&&l.length>0&&l.length<2)return}else if(!l||l.length<2)return;h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{T("create",{search:a}),h.current=void 0},500)},[a]),e.jsxs("div",{className:"wptb-v2-page wptb-v2-create-page",children:[e.jsx(Ot,{setPage:T,page:"create"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h2",{children:Ct("New Table")}),e.jsx(se,{value:a,onChange:w,placeholder:"Search templates..."})]}),e.jsxs("div",{className:"wptb-v2-page-content-main",children:[e.jsx(ar,{setPage:T}),e.jsx("div",{className:"wptb-v2-divider",children:"or"}),e.jsx("h2",{children:"Choose from templates"}),e.jsx(lr,{setPage:T,search:B})]})]})]})};function Lt(T){throw new Error('Could not dynamically require "'+T+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var me={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(T,B){(function(a){T.exports=a()})(function(){return function a(w,h,l){function n(d,v){if(!h[d]){if(!w[d]){var p=typeof Lt=="function"&&Lt;if(!v&&p)return p(d,!0);if(i)return i(d,!0);var k=new Error("Cannot find module '"+d+"'");throw k.code="MODULE_NOT_FOUND",k}var c=h[d]={exports:{}};w[d][0].call(c.exports,function(b){var o=w[d][1][b];return n(o||b)},c,c.exports,a,w,h,l)}return h[d].exports}for(var i=typeof Lt=="function"&&Lt,s=0;s<l.length;s++)n(l[s]);return n}({1:[function(a,w,h){var l=a("./utils"),n=a("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(s){for(var d,v,p,k,c,b,o,m=[],u=0,S=s.length,C=S,z=l.getTypeOf(s)!=="string";u<s.length;)C=S-u,p=z?(d=s[u++],v=u<S?s[u++]:0,u<S?s[u++]:0):(d=s.charCodeAt(u++),v=u<S?s.charCodeAt(u++):0,u<S?s.charCodeAt(u++):0),k=d>>2,c=(3&d)<<4|v>>4,b=1<C?(15&v)<<2|p>>6:64,o=2<C?63&p:64,m.push(i.charAt(k)+i.charAt(c)+i.charAt(b)+i.charAt(o));return m.join("")},h.decode=function(s){var d,v,p,k,c,b,o=0,m=0,u="data:";if(s.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var S,C=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&C--,s.charAt(s.length-2)===i.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=n.uint8array?new Uint8Array(0|C):new Array(0|C);o<s.length;)d=i.indexOf(s.charAt(o++))<<2|(k=i.indexOf(s.charAt(o++)))>>4,v=(15&k)<<4|(c=i.indexOf(s.charAt(o++)))>>2,p=(3&c)<<6|(b=i.indexOf(s.charAt(o++))),S[m++]=d,c!==64&&(S[m++]=v),b!==64&&(S[m++]=p);return S}},{"./support":30,"./utils":32}],2:[function(a,w,h){var l=a("./external"),n=a("./stream/DataWorker"),i=a("./stream/Crc32Probe"),s=a("./stream/DataLengthProbe");function d(v,p,k,c,b){this.compressedSize=v,this.uncompressedSize=p,this.crc32=k,this.compression=c,this.compressedContent=b}d.prototype={getContentWorker:function(){var v=new n(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),p=this;return v.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new n(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(v,p,k){return v.pipe(new i).pipe(new s("uncompressedSize")).pipe(p.compressWorker(k)).pipe(new s("compressedSize")).withStreamInfo("compression",p)},w.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,w,h){var l=a("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},h.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,w,h){var l=a("./utils"),n=function(){for(var i,s=[],d=0;d<256;d++){i=d;for(var v=0;v<8;v++)i=1&i?3988292384^i>>>1:i>>>1;s[d]=i}return s}();w.exports=function(i,s){return i!==void 0&&i.length?l.getTypeOf(i)!=="string"?function(d,v,p,k){var c=n,b=k+p;d^=-1;for(var o=k;o<b;o++)d=d>>>8^c[255&(d^v[o])];return-1^d}(0|s,i,i.length,0):function(d,v,p,k){var c=n,b=k+p;d^=-1;for(var o=k;o<b;o++)d=d>>>8^c[255&(d^v.charCodeAt(o))];return-1^d}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(a,w,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(a,w,h){var l=null;l=typeof Promise<"u"?Promise:a("lie"),w.exports={Promise:l}},{lie:37}],7:[function(a,w,h){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=a("pako"),i=a("./utils"),s=a("./stream/GenericWorker"),d=l?"uint8array":"array";function v(p,k){s.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=k,this.meta={}}h.magic="\b\0",i.inherits(v,s),v.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(d,p.data),!1)},v.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(k){p.push({data:k,meta:p.meta})}},h.compressWorker=function(p){return new v("Deflate",p)},h.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,w,h){function l(c,b){var o,m="";for(o=0;o<b;o++)m+=String.fromCharCode(255&c),c>>>=8;return m}function n(c,b,o,m,u,S){var C,z,A=c.file,W=c.compression,N=S!==d.utf8encode,x=i.transformTo("string",S(A.name)),f=i.transformTo("string",d.utf8encode(A.name)),E=A.comment,G=i.transformTo("string",S(E)),_=i.transformTo("string",d.utf8encode(E)),O=f.length!==A.name.length,r=_.length!==E.length,M="",tt="",F="",et=A.dir,D=A.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};b&&!o||(nt.crc32=c.crc32,nt.compressedSize=c.compressedSize,nt.uncompressedSize=c.uncompressedSize);var L=0;b&&(L|=8),N||!O&&!r||(L|=2048);var j=0,J=0;et&&(j|=16),u==="UNIX"?(J=798,j|=function($,lt){var dt=$;return $||(dt=lt?16893:33204),(65535&dt)<<16}(A.unixPermissions,et)):(J=20,j|=function($){return 63&($||0)}(A.dosPermissions)),C=D.getUTCHours(),C<<=6,C|=D.getUTCMinutes(),C<<=5,C|=D.getUTCSeconds()/2,z=D.getUTCFullYear()-1980,z<<=4,z|=D.getUTCMonth()+1,z<<=5,z|=D.getUTCDate(),O&&(tt=l(1,1)+l(v(x),4)+f,M+="up"+l(tt.length,2)+tt),r&&(F=l(1,1)+l(v(G),4)+_,M+="uc"+l(F.length,2)+F);var K="";return K+=`
\0`,K+=l(L,2),K+=W.magic,K+=l(C,2),K+=l(z,2),K+=l(nt.crc32,4),K+=l(nt.compressedSize,4),K+=l(nt.uncompressedSize,4),K+=l(x.length,2),K+=l(M.length,2),{fileRecord:p.LOCAL_FILE_HEADER+K+x+M,dirRecord:p.CENTRAL_FILE_HEADER+l(J,2)+K+l(G.length,2)+"\0\0\0\0"+l(j,4)+l(m,4)+x+M+G}}var i=a("../utils"),s=a("../stream/GenericWorker"),d=a("../utf8"),v=a("../crc32"),p=a("../signature");function k(c,b,o,m){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=o,this.encodeFileName=m,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(k,s),k.prototype.push=function(c){var b=c.meta.percent||0,o=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,s.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:o?(b+100*(o-m-1))/o:100}}))},k.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var b=this.streamFiles&&!c.file.dir;if(b){var o=n(c,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:o.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(c){this.accumulate=!1;var b=this.streamFiles&&!c.file.dir,o=n(c,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),b)this.push({data:function(m){return p.DATA_DESCRIPTOR+l(m.crc32,4)+l(m.compressedSize,4)+l(m.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var c=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var o=this.bytesWritten-c,m=function(u,S,C,z,A){var W=i.transformTo("string",A(z));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(u,2)+l(u,2)+l(S,4)+l(C,4)+l(W.length,2)+W}(this.dirRecords.length,o,c,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(c){this._sources.push(c);var b=this;return c.on("data",function(o){b.processChunk(o)}),c.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),c.on("error",function(o){b.error(o)}),this},k.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(c){var b=this._sources;if(!s.prototype.error.call(this,c))return!1;for(var o=0;o<b.length;o++)try{b[o].error(c)}catch{}return!0},k.prototype.lock=function(){s.prototype.lock.call(this);for(var c=this._sources,b=0;b<c.length;b++)c[b].lock()},w.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,w,h){var l=a("../compressions"),n=a("./ZipFileWorker");h.generateWorker=function(i,s,d){var v=new n(s.streamFiles,d,s.platform,s.encodeFileName),p=0;try{i.forEach(function(k,c){p++;var b=function(S,C){var z=S||C,A=l[z];if(!A)throw new Error(z+" is not a valid compression method !");return A}(c.options.compression,s.compression),o=c.options.compressionOptions||s.compressionOptions||{},m=c.dir,u=c.date;c._compressWorker(b,o).withStreamInfo("file",{name:k,dir:m,date:u,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(v)}),v.entriesCount=p}catch(k){v.error(k)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,w,h){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new l;for(var i in this)typeof this[i]!="function"&&(n[i]=this[i]);return n}}(l.prototype=a("./object")).loadAsync=a("./load"),l.support=a("./support"),l.defaults=a("./defaults"),l.version="3.10.1",l.loadAsync=function(n,i){return new l().loadAsync(n,i)},l.external=a("./external"),w.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,w,h){var l=a("./utils"),n=a("./external"),i=a("./utf8"),s=a("./zipEntries"),d=a("./stream/Crc32Probe"),v=a("./nodejsUtils");function p(k){return new n.Promise(function(c,b){var o=k.decompressed.getContentWorker().pipe(new d);o.on("error",function(m){b(m)}).on("end",function(){o.streamInfo.crc32!==k.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}w.exports=function(k,c){var b=this;return c=l.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),v.isNode&&v.isStream(k)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",k,!0,c.optimizedBinaryString,c.base64).then(function(o){var m=new s(c);return m.load(o),m}).then(function(o){var m=[n.Promise.resolve(o)],u=o.files;if(c.checkCRC32)for(var S=0;S<u.length;S++)m.push(p(u[S]));return n.Promise.all(m)}).then(function(o){for(var m=o.shift(),u=m.files,S=0;S<u.length;S++){var C=u[S],z=C.fileNameStr,A=l.resolve(C.fileNameStr);b.file(A,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:c.createFolders}),C.dir||(b.file(A).unsafeOriginalName=z)}return m.zipComment.length&&(b.comment=m.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,w,h){var l=a("../utils"),n=a("../stream/GenericWorker");function i(s,d){n.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(d)}l.inherits(i,n),i.prototype._bindStream=function(s){var d=this;(this._stream=s).pause(),s.on("data",function(v){d.push({data:v,meta:{percent:0}})}).on("error",function(v){d.isPaused?this.generatedError=v:d.error(v)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},i.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},w.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,w,h){var l=a("readable-stream").Readable;function n(i,s,d){l.call(this,s),this._helper=i;var v=this;i.on("data",function(p,k){v.push(p)||v._helper.pause(),d&&d(k)}).on("error",function(p){v.emit("error",p)}).on("end",function(){v.push(null)})}a("../utils").inherits(n,l),n.prototype._read=function(){this._helper.resume()},w.exports=n},{"../utils":32,"readable-stream":16}],14:[function(a,w,h){w.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,n);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,n)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var n=new Buffer(l);return n.fill(0),n},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(a,w,h){function l(A,W,N){var x,f=i.getTypeOf(W),E=i.extend(N||{},v);E.date=E.date||new Date,E.compression!==null&&(E.compression=E.compression.toUpperCase()),typeof E.unixPermissions=="string"&&(E.unixPermissions=parseInt(E.unixPermissions,8)),E.unixPermissions&&16384&E.unixPermissions&&(E.dir=!0),E.dosPermissions&&16&E.dosPermissions&&(E.dir=!0),E.dir&&(A=u(A)),E.createFolders&&(x=m(A))&&S.call(this,x,!0);var G=f==="string"&&E.binary===!1&&E.base64===!1;N&&N.binary!==void 0||(E.binary=!G),(W instanceof p&&W.uncompressedSize===0||E.dir||!W||W.length===0)&&(E.base64=!1,E.binary=!0,W="",E.compression="STORE",f="string");var _=null;_=W instanceof p||W instanceof s?W:b.isNode&&b.isStream(W)?new o(A,W):i.prepareContent(A,W,E.binary,E.optimizedBinaryString,E.base64);var O=new k(A,_,E);this.files[A]=O}var n=a("./utf8"),i=a("./utils"),s=a("./stream/GenericWorker"),d=a("./stream/StreamHelper"),v=a("./defaults"),p=a("./compressedObject"),k=a("./zipObject"),c=a("./generate"),b=a("./nodejsUtils"),o=a("./nodejs/NodejsStreamInputAdapter"),m=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var W=A.lastIndexOf("/");return 0<W?A.substring(0,W):""},u=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},S=function(A,W){return W=W!==void 0?W:v.createFolders,A=u(A),this.files[A]||l.call(this,A,null,{dir:!0,createFolders:W}),this.files[A]};function C(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var W,N,x;for(W in this.files)x=this.files[W],(N=W.slice(this.root.length,W.length))&&W.slice(0,this.root.length)===this.root&&A(N,x)},filter:function(A){var W=[];return this.forEach(function(N,x){A(N,x)&&W.push(x)}),W},file:function(A,W,N){if(arguments.length!==1)return A=this.root+A,l.call(this,A,W,N),this;if(C(A)){var x=A;return this.filter(function(E,G){return!G.dir&&x.test(E)})}var f=this.files[this.root+A];return f&&!f.dir?f:null},folder:function(A){if(!A)return this;if(C(A))return this.filter(function(f,E){return E.dir&&A.test(f)});var W=this.root+A,N=S.call(this,W),x=this.clone();return x.root=N.name,x},remove:function(A){A=this.root+A;var W=this.files[A];if(W||(A.slice(-1)!=="/"&&(A+="/"),W=this.files[A]),W&&!W.dir)delete this.files[A];else for(var N=this.filter(function(f,E){return E.name.slice(0,A.length)===A}),x=0;x<N.length;x++)delete this.files[N[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var W,N={};try{if((N=i.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");i.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var x=N.comment||this.comment||"";W=c.generateWorker(this,N,x)}catch(f){(W=new s("error")).error(f)}return new d(W,N.type||"string",N.mimeType)},generateAsync:function(A,W){return this.generateInternalStream(A).accumulate(W)},generateNodeStream:function(A,W){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(W)}};w.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,w,h){w.exports=a("stream")},{stream:void 0}],17:[function(a,w,h){var l=a("./DataReader");function n(i){l.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}a("../utils").inherits(n,l),n.prototype.byteAt=function(i){return this.data[this.zero+i]},n.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),d=i.charCodeAt(1),v=i.charCodeAt(2),p=i.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===s&&this.data[k+1]===d&&this.data[k+2]===v&&this.data[k+3]===p)return k-this.zero;return-1},n.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),d=i.charCodeAt(1),v=i.charCodeAt(2),p=i.charCodeAt(3),k=this.readData(4);return s===k[0]&&d===k[1]&&v===k[2]&&p===k[3]},n.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},w.exports=n},{"../utils":32,"./DataReader":18}],18:[function(a,w,h){var l=a("../utils");function n(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,d=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)d=(d<<8)+this.byteAt(s);return this.index+=i,d},readString:function(i){return l.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},w.exports=n},{"../utils":32}],19:[function(a,w,h){var l=a("./Uint8ArrayReader");function n(i){l.call(this,i)}a("../utils").inherits(n,l),n.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},w.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,w,h){var l=a("./DataReader");function n(i){l.call(this,i)}a("../utils").inherits(n,l),n.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},n.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},n.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},n.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},w.exports=n},{"../utils":32,"./DataReader":18}],21:[function(a,w,h){var l=a("./ArrayReader");function n(i){l.call(this,i)}a("../utils").inherits(n,l),n.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},w.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(a,w,h){var l=a("../utils"),n=a("../support"),i=a("./ArrayReader"),s=a("./StringReader"),d=a("./NodeBufferReader"),v=a("./Uint8ArrayReader");w.exports=function(p){var k=l.getTypeOf(p);return l.checkSupport(k),k!=="string"||n.uint8array?k==="nodebuffer"?new d(p):n.uint8array?new v(l.transformTo("uint8array",p)):new i(l.transformTo("array",p)):new s(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,w,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,w,h){var l=a("./GenericWorker"),n=a("../utils");function i(s){l.call(this,"ConvertWorker to "+s),this.destType=s}n.inherits(i,l),i.prototype.processChunk=function(s){this.push({data:n.transformTo(this.destType,s.data),meta:s.meta})},w.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(a,w,h){var l=a("./GenericWorker"),n=a("../crc32");function i(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(i,l),i.prototype.processChunk=function(s){this.streamInfo.crc32=n(s.data,this.streamInfo.crc32||0),this.push(s)},w.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,w,h){var l=a("../utils"),n=a("./GenericWorker");function i(s){n.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}l.inherits(i,n),i.prototype.processChunk=function(s){if(s){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+s.data.length}n.prototype.processChunk.call(this,s)},w.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(a,w,h){var l=a("../utils"),n=a("./GenericWorker");function i(s){n.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(v){d.dataIsReady=!0,d.data=v,d.max=v&&v.length||0,d.type=l.getTypeOf(v),d.isPaused||d._tickAndRepeat()},function(v){d.error(v)})}l.inherits(i,n),i.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,d);break;case"uint8array":s=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":s=this.data.slice(this.index,d)}return this.index=d,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},w.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(a,w,h){function l(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,i){return this._listeners[n].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,i){if(this._listeners[n])for(var s=0;s<this._listeners[n].length;s++)this._listeners[n][s].call(this,i)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var i=this;return n.on("data",function(s){i.processChunk(s)}),n.on("end",function(){i.end()}),n.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,i){return this.extraStreamInfo[n]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},w.exports=l},{}],29:[function(a,w,h){var l=a("../utils"),n=a("./ConvertWorker"),i=a("./GenericWorker"),s=a("../base64"),d=a("../support"),v=a("../external"),p=null;if(d.nodestream)try{p=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(b,o){return new v.Promise(function(m,u){var S=[],C=b._internalType,z=b._outputType,A=b._mimeType;b.on("data",function(W,N){S.push(W),o&&o(N)}).on("error",function(W){S=[],u(W)}).on("end",function(){try{var W=function(N,x,f){switch(N){case"blob":return l.newBlob(l.transformTo("arraybuffer",x),f);case"base64":return s.encode(x);default:return l.transformTo(N,x)}}(z,function(N,x){var f,E=0,G=null,_=0;for(f=0;f<x.length;f++)_+=x[f].length;switch(N){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(G=new Uint8Array(_),f=0;f<x.length;f++)G.set(x[f],E),E+=x[f].length;return G;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+N+"'")}}(C,S),A);m(W)}catch(N){u(N)}S=[]}).resume()})}function c(b,o,m){var u=o;switch(o){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=o,this._mimeType=m,l.checkSupport(u),this._worker=b.pipe(new n(u)),b.lock()}catch(S){this._worker=new i("error"),this._worker.error(S)}}c.prototype={accumulate:function(b){return k(this,b)},on:function(b,o){var m=this;return b==="data"?this._worker.on(b,function(u){o.call(m,u.data,u.meta)}):this._worker.on(b,function(){l.delay(o,arguments,m)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},b)}},w.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,w,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var l=new ArrayBuffer(0);try{h.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(l),h.blob=n.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!a("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(a,w,h){for(var l=a("./utils"),n=a("./support"),i=a("./nodejsUtils"),s=a("./stream/GenericWorker"),d=new Array(256),v=0;v<256;v++)d[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;d[254]=d[254]=1;function p(){s.call(this,"utf-8 decode"),this.leftOver=null}function k(){s.call(this,"utf-8 encode")}h.utf8encode=function(c){return n.nodebuffer?i.newBufferFrom(c,"utf-8"):function(b){var o,m,u,S,C,z=b.length,A=0;for(S=0;S<z;S++)(64512&(m=b.charCodeAt(S)))==55296&&S+1<z&&(64512&(u=b.charCodeAt(S+1)))==56320&&(m=65536+(m-55296<<10)+(u-56320),S++),A+=m<128?1:m<2048?2:m<65536?3:4;for(o=n.uint8array?new Uint8Array(A):new Array(A),S=C=0;C<A;S++)(64512&(m=b.charCodeAt(S)))==55296&&S+1<z&&(64512&(u=b.charCodeAt(S+1)))==56320&&(m=65536+(m-55296<<10)+(u-56320),S++),m<128?o[C++]=m:(m<2048?o[C++]=192|m>>>6:(m<65536?o[C++]=224|m>>>12:(o[C++]=240|m>>>18,o[C++]=128|m>>>12&63),o[C++]=128|m>>>6&63),o[C++]=128|63&m);return o}(c)},h.utf8decode=function(c){return n.nodebuffer?l.transformTo("nodebuffer",c).toString("utf-8"):function(b){var o,m,u,S,C=b.length,z=new Array(2*C);for(o=m=0;o<C;)if((u=b[o++])<128)z[m++]=u;else if(4<(S=d[u]))z[m++]=65533,o+=S-1;else{for(u&=S===2?31:S===3?15:7;1<S&&o<C;)u=u<<6|63&b[o++],S--;1<S?z[m++]=65533:u<65536?z[m++]=u:(u-=65536,z[m++]=55296|u>>10&1023,z[m++]=56320|1023&u)}return z.length!==m&&(z.subarray?z=z.subarray(0,m):z.length=m),l.applyFromCharCode(z)}(c=l.transformTo(n.uint8array?"uint8array":"array",c))},l.inherits(p,s),p.prototype.processChunk=function(c){var b=l.transformTo(n.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var o=b;(b=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),b.set(o,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var m=function(S,C){var z;for((C=C||S.length)>S.length&&(C=S.length),z=C-1;0<=z&&(192&S[z])==128;)z--;return z<0||z===0?C:z+d[S[z]]>C?z:C}(b),u=b;m!==b.length&&(n.uint8array?(u=b.subarray(0,m),this.leftOver=b.subarray(m,b.length)):(u=b.slice(0,m),this.leftOver=b.slice(m,b.length))),this.push({data:h.utf8decode(u),meta:c.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=p,l.inherits(k,s),k.prototype.processChunk=function(c){this.push({data:h.utf8encode(c.data),meta:c.meta})},h.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,w,h){var l=a("./support"),n=a("./base64"),i=a("./nodejsUtils"),s=a("./external");function d(o){return o}function v(o,m){for(var u=0;u<o.length;++u)m[u]=255&o.charCodeAt(u);return m}a("setimmediate"),h.newBlob=function(o,m){h.checkSupport("blob");try{return new Blob([o],{type:m})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(o),u.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(o,m,u){var S=[],C=0,z=o.length;if(z<=u)return String.fromCharCode.apply(null,o);for(;C<z;)m==="array"||m==="nodebuffer"?S.push(String.fromCharCode.apply(null,o.slice(C,Math.min(C+u,z)))):S.push(String.fromCharCode.apply(null,o.subarray(C,Math.min(C+u,z)))),C+=u;return S.join("")},stringifyByChar:function(o){for(var m="",u=0;u<o.length;u++)m+=String.fromCharCode(o[u]);return m},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function k(o){var m=65536,u=h.getTypeOf(o),S=!0;if(u==="uint8array"?S=p.applyCanBeUsed.uint8array:u==="nodebuffer"&&(S=p.applyCanBeUsed.nodebuffer),S)for(;1<m;)try{return p.stringifyByChunk(o,u,m)}catch{m=Math.floor(m/2)}return p.stringifyByChar(o)}function c(o,m){for(var u=0;u<o.length;u++)m[u]=o[u];return m}h.applyFromCharCode=k;var b={};b.string={string:d,array:function(o){return v(o,new Array(o.length))},arraybuffer:function(o){return b.string.uint8array(o).buffer},uint8array:function(o){return v(o,new Uint8Array(o.length))},nodebuffer:function(o){return v(o,i.allocBuffer(o.length))}},b.array={string:k,array:d,arraybuffer:function(o){return new Uint8Array(o).buffer},uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return i.newBufferFrom(o)}},b.arraybuffer={string:function(o){return k(new Uint8Array(o))},array:function(o){return c(new Uint8Array(o),new Array(o.byteLength))},arraybuffer:d,uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return i.newBufferFrom(new Uint8Array(o))}},b.uint8array={string:k,array:function(o){return c(o,new Array(o.length))},arraybuffer:function(o){return o.buffer},uint8array:d,nodebuffer:function(o){return i.newBufferFrom(o)}},b.nodebuffer={string:k,array:function(o){return c(o,new Array(o.length))},arraybuffer:function(o){return b.nodebuffer.uint8array(o).buffer},uint8array:function(o){return c(o,new Uint8Array(o.length))},nodebuffer:d},h.transformTo=function(o,m){if(m=m||"",!o)return m;h.checkSupport(o);var u=h.getTypeOf(m);return b[u][o](m)},h.resolve=function(o){for(var m=o.split("/"),u=[],S=0;S<m.length;S++){var C=m[S];C==="."||C===""&&S!==0&&S!==m.length-1||(C===".."?u.pop():u.push(C))}return u.join("/")},h.getTypeOf=function(o){return typeof o=="string"?"string":Object.prototype.toString.call(o)==="[object Array]"?"array":l.nodebuffer&&i.isBuffer(o)?"nodebuffer":l.uint8array&&o instanceof Uint8Array?"uint8array":l.arraybuffer&&o instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(o){if(!l[o.toLowerCase()])throw new Error(o+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(o){var m,u,S="";for(u=0;u<(o||"").length;u++)S+="\\x"+((m=o.charCodeAt(u))<16?"0":"")+m.toString(16).toUpperCase();return S},h.delay=function(o,m,u){setImmediate(function(){o.apply(u||null,m||[])})},h.inherits=function(o,m){function u(){}u.prototype=m.prototype,o.prototype=new u},h.extend=function(){var o,m,u={};for(o=0;o<arguments.length;o++)for(m in arguments[o])Object.prototype.hasOwnProperty.call(arguments[o],m)&&u[m]===void 0&&(u[m]=arguments[o][m]);return u},h.prepareContent=function(o,m,u,S,C){return s.Promise.resolve(m).then(function(z){return l.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new s.Promise(function(A,W){var N=new FileReader;N.onload=function(x){A(x.target.result)},N.onerror=function(x){W(x.target.error)},N.readAsArrayBuffer(z)}):z}).then(function(z){var A=h.getTypeOf(z);return A?(A==="arraybuffer"?z=h.transformTo("uint8array",z):A==="string"&&(C?z=n.decode(z):u&&S!==!0&&(z=function(W){return v(W,l.uint8array?new Uint8Array(W.length):new Array(W.length))}(z))),z):s.Promise.reject(new Error("Can't read the data of '"+o+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,w,h){var l=a("./reader/readerFor"),n=a("./utils"),i=a("./signature"),s=a("./zipEntry"),d=a("./support");function v(p){this.files=[],this.loadOptions=p}v.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(k)+", expected "+n.pretty(p)+")")}},isSignature:function(p,k){var c=this.reader.index;this.reader.setIndex(p);var b=this.reader.readString(4)===k;return this.reader.setIndex(c),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),k=d.uint8array?"uint8array":"array",c=n.transformTo(k,p);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,k,c,b=this.zip64EndOfCentralSize-44;0<b;)p=this.reader.readInt(2),k=this.reader.readInt(4),c=this.reader.readData(k),this.zip64ExtensibleData[p]={id:p,length:k,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,k;for(p=0;p<this.files.length;p++)k=this.files[p],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(p=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var k=p;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var b=k-c;if(0<b)this.isSignature(k,i.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(p){this.reader=l(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},w.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,w,h){var l=a("./reader/readerFor"),n=a("./utils"),i=a("./compressedObject"),s=a("./crc32"),d=a("./utf8"),v=a("./compressions"),p=a("./support");function k(c,b){this.options=c,this.loadOptions=b}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var b,o;if(c.skip(22),this.fileNameLength=c.readInt(2),o=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(o),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(m){for(var u in v)if(Object.prototype.hasOwnProperty.call(v,u)&&v[u].magic===m)return v[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,b,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var b=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(b),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=l(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var b,o,m,u=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<u;)b=c.readInt(2),o=c.readInt(2),m=c.readData(o),this.extraFields[b]={id:b,length:o,value:m};c.setIndex(u)},handleUTF8:function(){var c=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var o=n.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(o)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var u=n.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var b=l(c.value);return b.readInt(1)!==1||s(this.fileName)!==b.readInt(4)?null:d.utf8decode(b.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var b=l(c.value);return b.readInt(1)!==1||s(this.fileComment)!==b.readInt(4)?null:d.utf8decode(b.readData(c.length-5))}return null}},w.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,w,h){function l(b,o,m){this.name=b,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=o,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var n=a("./stream/StreamHelper"),i=a("./stream/DataWorker"),s=a("./utf8"),d=a("./compressedObject"),v=a("./stream/GenericWorker");l.prototype={internalStream:function(b){var o=null,m="string";try{if(!b)throw new Error("No output type specified.");var u=(m=b.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),o=this._decompressWorker();var S=!this._dataBinary;S&&!u&&(o=o.pipe(new s.Utf8EncodeWorker)),!S&&u&&(o=o.pipe(new s.Utf8DecodeWorker))}catch(C){(o=new v("error")).error(C)}return new n(o,m,"")},async:function(b,o){return this.internalStream(b).accumulate(o)},nodeStream:function(b,o){return this.internalStream(b||"nodebuffer").toNodejsStream(o)},_compressWorker:function(b,o){if(this._data instanceof d&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new s.Utf8EncodeWorker)),d.createWorkerFrom(m,b,o)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof v?this._data:new i(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<p.length;c++)l.prototype[p[c]]=k;w.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,w,h){(function(l){var n,i,s=l.MutationObserver||l.WebKitMutationObserver;if(s){var d=0,v=new s(b),p=l.document.createTextNode("");v.observe(p,{characterData:!0}),n=function(){p.data=d=++d%2}}else if(l.setImmediate||l.MessageChannel===void 0)n="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var o=l.document.createElement("script");o.onreadystatechange=function(){b(),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},l.document.documentElement.appendChild(o)}:function(){setTimeout(b,0)};else{var k=new l.MessageChannel;k.port1.onmessage=b,n=function(){k.port2.postMessage(0)}}var c=[];function b(){var o,m;i=!0;for(var u=c.length;u;){for(m=c,c=[],o=-1;++o<u;)m[o]();u=c.length}i=!1}w.exports=function(o){c.push(o)!==1||i||n()}}).call(this,typeof Nt<"u"?Nt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,w,h){var l=a("immediate");function n(){}var i={},s=["REJECTED"],d=["FULFILLED"],v=["PENDING"];function p(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,u!==n&&o(this,u)}function k(u,S,C){this.promise=u,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function c(u,S,C){l(function(){var z;try{z=S(C)}catch(A){return i.reject(u,A)}z===u?i.reject(u,new TypeError("Cannot resolve promise with itself")):i.resolve(u,z)})}function b(u){var S=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof S=="function")return function(){S.apply(u,arguments)}}function o(u,S){var C=!1;function z(N){C||(C=!0,i.reject(u,N))}function A(N){C||(C=!0,i.resolve(u,N))}var W=m(function(){S(A,z)});W.status==="error"&&z(W.value)}function m(u,S){var C={};try{C.value=u(S),C.status="success"}catch(z){C.status="error",C.value=z}return C}(w.exports=p).prototype.finally=function(u){if(typeof u!="function")return this;var S=this.constructor;return this.then(function(C){return S.resolve(u()).then(function(){return C})},function(C){return S.resolve(u()).then(function(){throw C})})},p.prototype.catch=function(u){return this.then(null,u)},p.prototype.then=function(u,S){if(typeof u!="function"&&this.state===d||typeof S!="function"&&this.state===s)return this;var C=new this.constructor(n);return this.state!==v?c(C,this.state===d?u:S,this.outcome):this.queue.push(new k(C,u,S)),C},k.prototype.callFulfilled=function(u){i.resolve(this.promise,u)},k.prototype.otherCallFulfilled=function(u){c(this.promise,this.onFulfilled,u)},k.prototype.callRejected=function(u){i.reject(this.promise,u)},k.prototype.otherCallRejected=function(u){c(this.promise,this.onRejected,u)},i.resolve=function(u,S){var C=m(b,S);if(C.status==="error")return i.reject(u,C.value);var z=C.value;if(z)o(u,z);else{u.state=d,u.outcome=S;for(var A=-1,W=u.queue.length;++A<W;)u.queue[A].callFulfilled(S)}return u},i.reject=function(u,S){u.state=s,u.outcome=S;for(var C=-1,z=u.queue.length;++C<z;)u.queue[C].callRejected(S);return u},p.resolve=function(u){return u instanceof this?u:i.resolve(new this(n),u)},p.reject=function(u){var S=new this(n);return i.reject(S,u)},p.all=function(u){var S=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=u.length,z=!1;if(!C)return this.resolve([]);for(var A=new Array(C),W=0,N=-1,x=new this(n);++N<C;)f(u[N],N);return x;function f(E,G){S.resolve(E).then(function(_){A[G]=_,++W!==C||z||(z=!0,i.resolve(x,A))},function(_){z||(z=!0,i.reject(x,_))})}},p.race=function(u){var S=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=u.length,z=!1;if(!C)return this.resolve([]);for(var A=-1,W=new this(n);++A<C;)N=u[A],S.resolve(N).then(function(x){z||(z=!0,i.resolve(W,x))},function(x){z||(z=!0,i.reject(W,x))});var N;return W}},{immediate:36}],38:[function(a,w,h){var l={};(0,a("./lib/utils/common").assign)(l,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),w.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,w,h){var l=a("./zlib/deflate"),n=a("./utils/common"),i=a("./utils/strings"),s=a("./zlib/messages"),d=a("./zlib/zstream"),v=Object.prototype.toString,p=0,k=-1,c=0,b=8;function o(u){if(!(this instanceof o))return new o(u);this.options=n.assign({level:k,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},u||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var C=l.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(C!==p)throw new Error(s[C]);if(S.header&&l.deflateSetHeader(this.strm,S.header),S.dictionary){var z;if(z=typeof S.dictionary=="string"?i.string2buf(S.dictionary):v.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(C=l.deflateSetDictionary(this.strm,z))!==p)throw new Error(s[C]);this._dict_set=!0}}function m(u,S){var C=new o(S);if(C.push(u,!0),C.err)throw C.msg||s[C.err];return C.result}o.prototype.push=function(u,S){var C,z,A=this.strm,W=this.options.chunkSize;if(this.ended)return!1;z=S===~~S?S:S===!0?4:0,typeof u=="string"?A.input=i.string2buf(u):v.call(u)==="[object ArrayBuffer]"?A.input=new Uint8Array(u):A.input=u,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new n.Buf8(W),A.next_out=0,A.avail_out=W),(C=l.deflate(A,z))!==1&&C!==p)return this.onEnd(C),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(n.shrinkBuf(A.output,A.next_out))):this.onData(n.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&C!==1);return z===4?(C=l.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===p):z!==2||(this.onEnd(p),!(A.avail_out=0))},o.prototype.onData=function(u){this.chunks.push(u)},o.prototype.onEnd=function(u){u===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},h.Deflate=o,h.deflate=m,h.deflateRaw=function(u,S){return(S=S||{}).raw=!0,m(u,S)},h.gzip=function(u,S){return(S=S||{}).gzip=!0,m(u,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,w,h){var l=a("./zlib/inflate"),n=a("./utils/common"),i=a("./utils/strings"),s=a("./zlib/constants"),d=a("./zlib/messages"),v=a("./zlib/zstream"),p=a("./zlib/gzheader"),k=Object.prototype.toString;function c(o){if(!(this instanceof c))return new c(o);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},o||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||o&&o.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var u=l.inflateInit2(this.strm,m.windowBits);if(u!==s.Z_OK)throw new Error(d[u]);this.header=new p,l.inflateGetHeader(this.strm,this.header)}function b(o,m){var u=new c(m);if(u.push(o,!0),u.err)throw u.msg||d[u.err];return u.result}c.prototype.push=function(o,m){var u,S,C,z,A,W,N=this.strm,x=this.options.chunkSize,f=this.options.dictionary,E=!1;if(this.ended)return!1;S=m===~~m?m:m===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof o=="string"?N.input=i.binstring2buf(o):k.call(o)==="[object ArrayBuffer]"?N.input=new Uint8Array(o):N.input=o,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new n.Buf8(x),N.next_out=0,N.avail_out=x),(u=l.inflate(N,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(W=typeof f=="string"?i.string2buf(f):k.call(f)==="[object ArrayBuffer]"?new Uint8Array(f):f,u=l.inflateSetDictionary(this.strm,W)),u===s.Z_BUF_ERROR&&E===!0&&(u=s.Z_OK,E=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&u!==s.Z_STREAM_END&&(N.avail_in!==0||S!==s.Z_FINISH&&S!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=i.utf8border(N.output,N.next_out),z=N.next_out-C,A=i.buf2string(N.output,C),N.next_out=z,N.avail_out=x-z,z&&n.arraySet(N.output,N.output,C,z,0),this.onData(A)):this.onData(n.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(E=!0)}while((0<N.avail_in||N.avail_out===0)&&u!==s.Z_STREAM_END);return u===s.Z_STREAM_END&&(S=s.Z_FINISH),S===s.Z_FINISH?(u=l.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):S!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(N.avail_out=0))},c.prototype.onData=function(o){this.chunks.push(o)},c.prototype.onEnd=function(o){o===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},h.Inflate=c,h.inflate=b,h.inflateRaw=function(o,m){return(m=m||{}).raw=!0,b(o,m)},h.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,w,h){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(s){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var v=d.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var p in v)v.hasOwnProperty(p)&&(s[p]=v[p])}}return s},h.shrinkBuf=function(s,d){return s.length===d?s:s.subarray?s.subarray(0,d):(s.length=d,s)};var n={arraySet:function(s,d,v,p,k){if(d.subarray&&s.subarray)s.set(d.subarray(v,v+p),k);else for(var c=0;c<p;c++)s[k+c]=d[v+c]},flattenChunks:function(s){var d,v,p,k,c,b;for(d=p=0,v=s.length;d<v;d++)p+=s[d].length;for(b=new Uint8Array(p),d=k=0,v=s.length;d<v;d++)c=s[d],b.set(c,k),k+=c.length;return b}},i={arraySet:function(s,d,v,p,k){for(var c=0;c<p;c++)s[k+c]=d[v+c]},flattenChunks:function(s){return[].concat.apply([],s)}};h.setTyped=function(s){s?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,n)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,i))},h.setTyped(l)},{}],42:[function(a,w,h){var l=a("./common"),n=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var s=new l.Buf8(256),d=0;d<256;d++)s[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function v(p,k){if(k<65537&&(p.subarray&&i||!p.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(p,k));for(var c="",b=0;b<k;b++)c+=String.fromCharCode(p[b]);return c}s[254]=s[254]=1,h.string2buf=function(p){var k,c,b,o,m,u=p.length,S=0;for(o=0;o<u;o++)(64512&(c=p.charCodeAt(o)))==55296&&o+1<u&&(64512&(b=p.charCodeAt(o+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),o++),S+=c<128?1:c<2048?2:c<65536?3:4;for(k=new l.Buf8(S),o=m=0;m<S;o++)(64512&(c=p.charCodeAt(o)))==55296&&o+1<u&&(64512&(b=p.charCodeAt(o+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),o++),c<128?k[m++]=c:(c<2048?k[m++]=192|c>>>6:(c<65536?k[m++]=224|c>>>12:(k[m++]=240|c>>>18,k[m++]=128|c>>>12&63),k[m++]=128|c>>>6&63),k[m++]=128|63&c);return k},h.buf2binstring=function(p){return v(p,p.length)},h.binstring2buf=function(p){for(var k=new l.Buf8(p.length),c=0,b=k.length;c<b;c++)k[c]=p.charCodeAt(c);return k},h.buf2string=function(p,k){var c,b,o,m,u=k||p.length,S=new Array(2*u);for(c=b=0;c<u;)if((o=p[c++])<128)S[b++]=o;else if(4<(m=s[o]))S[b++]=65533,c+=m-1;else{for(o&=m===2?31:m===3?15:7;1<m&&c<u;)o=o<<6|63&p[c++],m--;1<m?S[b++]=65533:o<65536?S[b++]=o:(o-=65536,S[b++]=55296|o>>10&1023,S[b++]=56320|1023&o)}return v(S,b)},h.utf8border=function(p,k){var c;for((k=k||p.length)>p.length&&(k=p.length),c=k-1;0<=c&&(192&p[c])==128;)c--;return c<0||c===0?k:c+s[p[c]]>k?c:k}},{"./common":41}],43:[function(a,w,h){w.exports=function(l,n,i,s){for(var d=65535&l|0,v=l>>>16&65535|0,p=0;i!==0;){for(i-=p=2e3<i?2e3:i;v=v+(d=d+n[s++]|0)|0,--p;);d%=65521,v%=65521}return d|v<<16|0}},{}],44:[function(a,w,h){w.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,w,h){var l=function(){for(var n,i=[],s=0;s<256;s++){n=s;for(var d=0;d<8;d++)n=1&n?3988292384^n>>>1:n>>>1;i[s]=n}return i}();w.exports=function(n,i,s,d){var v=l,p=d+s;n^=-1;for(var k=d;k<p;k++)n=n>>>8^v[255&(n^i[k])];return-1^n}},{}],46:[function(a,w,h){var l,n=a("../utils/common"),i=a("./trees"),s=a("./adler32"),d=a("./crc32"),v=a("./messages"),p=0,k=4,c=0,b=-2,o=-1,m=4,u=2,S=8,C=9,z=286,A=30,W=19,N=2*z+1,x=15,f=3,E=258,G=E+f+1,_=42,O=113,r=1,M=2,tt=3,F=4;function et(t,U){return t.msg=v[U],U}function D(t){return(t<<1)-(4<t?9:0)}function nt(t){for(var U=t.length;0<=--U;)t[U]=0}function L(t){var U=t.state,P=U.pending;P>t.avail_out&&(P=t.avail_out),P!==0&&(n.arraySet(t.output,U.pending_buf,U.pending_out,P,t.next_out),t.next_out+=P,U.pending_out+=P,t.total_out+=P,t.avail_out-=P,U.pending-=P,U.pending===0&&(U.pending_out=0))}function j(t,U){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,U),t.block_start=t.strstart,L(t.strm)}function J(t,U){t.pending_buf[t.pending++]=U}function K(t,U){t.pending_buf[t.pending++]=U>>>8&255,t.pending_buf[t.pending++]=255&U}function $(t,U){var P,y,g=t.max_chain_length,I=t.strstart,H=t.prev_length,Z=t.nice_match,R=t.strstart>t.w_size-G?t.strstart-(t.w_size-G):0,V=t.window,Q=t.w_mask,q=t.prev,rt=t.strstart+E,ht=V[I+H-1],ot=V[I+H];t.prev_length>=t.good_match&&(g>>=2),Z>t.lookahead&&(Z=t.lookahead);do if(V[(P=U)+H]===ot&&V[P+H-1]===ht&&V[P]===V[I]&&V[++P]===V[I+1]){I+=2,P++;do;while(V[++I]===V[++P]&&V[++I]===V[++P]&&V[++I]===V[++P]&&V[++I]===V[++P]&&V[++I]===V[++P]&&V[++I]===V[++P]&&V[++I]===V[++P]&&V[++I]===V[++P]&&I<rt);if(y=E-(rt-I),I=rt-E,H<y){if(t.match_start=U,Z<=(H=y))break;ht=V[I+H-1],ot=V[I+H]}}while((U=q[U&Q])>R&&--g!=0);return H<=t.lookahead?H:t.lookahead}function lt(t){var U,P,y,g,I,H,Z,R,V,Q,q=t.w_size;do{if(g=t.window_size-t.lookahead-t.strstart,t.strstart>=q+(q-G)){for(n.arraySet(t.window,t.window,q,q,0),t.match_start-=q,t.strstart-=q,t.block_start-=q,U=P=t.hash_size;y=t.head[--U],t.head[U]=q<=y?y-q:0,--P;);for(U=P=q;y=t.prev[--U],t.prev[U]=q<=y?y-q:0,--P;);g+=q}if(t.strm.avail_in===0)break;if(H=t.strm,Z=t.window,R=t.strstart+t.lookahead,V=g,Q=void 0,Q=H.avail_in,V<Q&&(Q=V),P=Q===0?0:(H.avail_in-=Q,n.arraySet(Z,H.input,H.next_in,Q,R),H.state.wrap===1?H.adler=s(H.adler,Z,Q,R):H.state.wrap===2&&(H.adler=d(H.adler,Z,Q,R)),H.next_in+=Q,H.total_in+=Q,Q),t.lookahead+=P,t.lookahead+t.insert>=f)for(I=t.strstart-t.insert,t.ins_h=t.window[I],t.ins_h=(t.ins_h<<t.hash_shift^t.window[I+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[I+f-1])&t.hash_mask,t.prev[I&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=I,I++,t.insert--,!(t.lookahead+t.insert<f)););}while(t.lookahead<G&&t.strm.avail_in!==0)}function dt(t,U){for(var P,y;;){if(t.lookahead<G){if(lt(t),t.lookahead<G&&U===p)return r;if(t.lookahead===0)break}if(P=0,t.lookahead>=f&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+f-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),P!==0&&t.strstart-P<=t.w_size-G&&(t.match_length=$(t,P)),t.match_length>=f)if(y=i._tr_tally(t,t.strstart-t.match_start,t.match_length-f),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=f){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+f-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else y=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(y&&(j(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<f-1?t.strstart:f-1,U===k?(j(t,!0),t.strm.avail_out===0?tt:F):t.last_lit&&(j(t,!1),t.strm.avail_out===0)?r:M}function st(t,U){for(var P,y,g;;){if(t.lookahead<G){if(lt(t),t.lookahead<G&&U===p)return r;if(t.lookahead===0)break}if(P=0,t.lookahead>=f&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+f-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=f-1,P!==0&&t.prev_length<t.max_lazy_match&&t.strstart-P<=t.w_size-G&&(t.match_length=$(t,P),t.match_length<=5&&(t.strategy===1||t.match_length===f&&4096<t.strstart-t.match_start)&&(t.match_length=f-1)),t.prev_length>=f&&t.match_length<=t.prev_length){for(g=t.strstart+t.lookahead-f,y=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-f),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=g&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+f-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=f-1,t.strstart++,y&&(j(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((y=i._tr_tally(t,0,t.window[t.strstart-1]))&&j(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(y=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<f-1?t.strstart:f-1,U===k?(j(t,!0),t.strm.avail_out===0?tt:F):t.last_lit&&(j(t,!1),t.strm.avail_out===0)?r:M}function Y(t,U,P,y,g){this.good_length=t,this.max_lazy=U,this.nice_length=P,this.max_chain=y,this.func=g}function it(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*N),this.dyn_dtree=new n.Buf16(2*(2*A+1)),this.bl_tree=new n.Buf16(2*(2*W+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(x+1),this.heap=new n.Buf16(2*z+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*z+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(t){var U;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=u,(U=t.state).pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?_:O,t.adler=U.wrap===2?0:1,U.last_flush=p,i._tr_init(U),c):et(t,b)}function ft(t){var U=at(t);return U===c&&function(P){P.window_size=2*P.w_size,nt(P.head),P.max_lazy_match=l[P.level].max_lazy,P.good_match=l[P.level].good_length,P.nice_match=l[P.level].nice_length,P.max_chain_length=l[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=f-1,P.match_available=0,P.ins_h=0}(t.state),U}function ct(t,U,P,y,g,I){if(!t)return b;var H=1;if(U===o&&(U=6),y<0?(H=0,y=-y):15<y&&(H=2,y-=16),g<1||C<g||P!==S||y<8||15<y||U<0||9<U||I<0||m<I)return et(t,b);y===8&&(y=9);var Z=new it;return(t.state=Z).strm=t,Z.wrap=H,Z.gzhead=null,Z.w_bits=y,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=g+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+f-1)/f),Z.window=new n.Buf8(2*Z.w_size),Z.head=new n.Buf16(Z.hash_size),Z.prev=new n.Buf16(Z.w_size),Z.lit_bufsize=1<<g+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new n.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=U,Z.strategy=I,Z.method=P,ft(t)}l=[new Y(0,0,0,0,function(t,U){var P=65535;for(P>t.pending_buf_size-5&&(P=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),t.lookahead===0&&U===p)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var y=t.block_start+P;if((t.strstart===0||t.strstart>=y)&&(t.lookahead=t.strstart-y,t.strstart=y,j(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-G&&(j(t,!1),t.strm.avail_out===0))return r}return t.insert=0,U===k?(j(t,!0),t.strm.avail_out===0?tt:F):(t.strstart>t.block_start&&(j(t,!1),t.strm.avail_out),r)}),new Y(4,4,8,4,dt),new Y(4,5,16,8,dt),new Y(4,6,32,32,dt),new Y(4,4,16,16,st),new Y(8,16,32,32,st),new Y(8,16,128,128,st),new Y(8,32,128,256,st),new Y(32,128,258,1024,st),new Y(32,258,258,4096,st)],h.deflateInit=function(t,U){return ct(t,U,S,15,8,0)},h.deflateInit2=ct,h.deflateReset=ft,h.deflateResetKeep=at,h.deflateSetHeader=function(t,U){return t&&t.state?t.state.wrap!==2?b:(t.state.gzhead=U,c):b},h.deflate=function(t,U){var P,y,g,I;if(!t||!t.state||5<U||U<0)return t?et(t,b):b;if(y=t.state,!t.output||!t.input&&t.avail_in!==0||y.status===666&&U!==k)return et(t,t.avail_out===0?-5:b);if(y.strm=t,P=y.last_flush,y.last_flush=U,y.status===_)if(y.wrap===2)t.adler=0,J(y,31),J(y,139),J(y,8),y.gzhead?(J(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),J(y,255&y.gzhead.time),J(y,y.gzhead.time>>8&255),J(y,y.gzhead.time>>16&255),J(y,y.gzhead.time>>24&255),J(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),J(y,255&y.gzhead.os),y.gzhead.extra&&y.gzhead.extra.length&&(J(y,255&y.gzhead.extra.length),J(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(t.adler=d(t.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=69):(J(y,0),J(y,0),J(y,0),J(y,0),J(y,0),J(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),J(y,3),y.status=O);else{var H=S+(y.w_bits-8<<4)<<8;H|=(2<=y.strategy||y.level<2?0:y.level<6?1:y.level===6?2:3)<<6,y.strstart!==0&&(H|=32),H+=31-H%31,y.status=O,K(y,H),y.strstart!==0&&(K(y,t.adler>>>16),K(y,65535&t.adler)),t.adler=1}if(y.status===69)if(y.gzhead.extra){for(g=y.pending;y.gzindex<(65535&y.gzhead.extra.length)&&(y.pending!==y.pending_buf_size||(y.gzhead.hcrc&&y.pending>g&&(t.adler=d(t.adler,y.pending_buf,y.pending-g,g)),L(t),g=y.pending,y.pending!==y.pending_buf_size));)J(y,255&y.gzhead.extra[y.gzindex]),y.gzindex++;y.gzhead.hcrc&&y.pending>g&&(t.adler=d(t.adler,y.pending_buf,y.pending-g,g)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=73)}else y.status=73;if(y.status===73)if(y.gzhead.name){g=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>g&&(t.adler=d(t.adler,y.pending_buf,y.pending-g,g)),L(t),g=y.pending,y.pending===y.pending_buf_size)){I=1;break}I=y.gzindex<y.gzhead.name.length?255&y.gzhead.name.charCodeAt(y.gzindex++):0,J(y,I)}while(I!==0);y.gzhead.hcrc&&y.pending>g&&(t.adler=d(t.adler,y.pending_buf,y.pending-g,g)),I===0&&(y.gzindex=0,y.status=91)}else y.status=91;if(y.status===91)if(y.gzhead.comment){g=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>g&&(t.adler=d(t.adler,y.pending_buf,y.pending-g,g)),L(t),g=y.pending,y.pending===y.pending_buf_size)){I=1;break}I=y.gzindex<y.gzhead.comment.length?255&y.gzhead.comment.charCodeAt(y.gzindex++):0,J(y,I)}while(I!==0);y.gzhead.hcrc&&y.pending>g&&(t.adler=d(t.adler,y.pending_buf,y.pending-g,g)),I===0&&(y.status=103)}else y.status=103;if(y.status===103&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&L(t),y.pending+2<=y.pending_buf_size&&(J(y,255&t.adler),J(y,t.adler>>8&255),t.adler=0,y.status=O)):y.status=O),y.pending!==0){if(L(t),t.avail_out===0)return y.last_flush=-1,c}else if(t.avail_in===0&&D(U)<=D(P)&&U!==k)return et(t,-5);if(y.status===666&&t.avail_in!==0)return et(t,-5);if(t.avail_in!==0||y.lookahead!==0||U!==p&&y.status!==666){var Z=y.strategy===2?function(R,V){for(var Q;;){if(R.lookahead===0&&(lt(R),R.lookahead===0)){if(V===p)return r;break}if(R.match_length=0,Q=i._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,Q&&(j(R,!1),R.strm.avail_out===0))return r}return R.insert=0,V===k?(j(R,!0),R.strm.avail_out===0?tt:F):R.last_lit&&(j(R,!1),R.strm.avail_out===0)?r:M}(y,U):y.strategy===3?function(R,V){for(var Q,q,rt,ht,ot=R.window;;){if(R.lookahead<=E){if(lt(R),R.lookahead<=E&&V===p)return r;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=f&&0<R.strstart&&(q=ot[rt=R.strstart-1])===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]){ht=R.strstart+E;do;while(q===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]&&q===ot[++rt]&&rt<ht);R.match_length=E-(ht-rt),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=f?(Q=i._tr_tally(R,1,R.match_length-f),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(Q=i._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),Q&&(j(R,!1),R.strm.avail_out===0))return r}return R.insert=0,V===k?(j(R,!0),R.strm.avail_out===0?tt:F):R.last_lit&&(j(R,!1),R.strm.avail_out===0)?r:M}(y,U):l[y.level].func(y,U);if(Z!==tt&&Z!==F||(y.status=666),Z===r||Z===tt)return t.avail_out===0&&(y.last_flush=-1),c;if(Z===M&&(U===1?i._tr_align(y):U!==5&&(i._tr_stored_block(y,0,0,!1),U===3&&(nt(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),L(t),t.avail_out===0))return y.last_flush=-1,c}return U!==k?c:y.wrap<=0?1:(y.wrap===2?(J(y,255&t.adler),J(y,t.adler>>8&255),J(y,t.adler>>16&255),J(y,t.adler>>24&255),J(y,255&t.total_in),J(y,t.total_in>>8&255),J(y,t.total_in>>16&255),J(y,t.total_in>>24&255)):(K(y,t.adler>>>16),K(y,65535&t.adler)),L(t),0<y.wrap&&(y.wrap=-y.wrap),y.pending!==0?c:1)},h.deflateEnd=function(t){var U;return t&&t.state?(U=t.state.status)!==_&&U!==69&&U!==73&&U!==91&&U!==103&&U!==O&&U!==666?et(t,b):(t.state=null,U===O?et(t,-3):c):b},h.deflateSetDictionary=function(t,U){var P,y,g,I,H,Z,R,V,Q=U.length;if(!t||!t.state||(I=(P=t.state).wrap)===2||I===1&&P.status!==_||P.lookahead)return b;for(I===1&&(t.adler=s(t.adler,U,Q,0)),P.wrap=0,Q>=P.w_size&&(I===0&&(nt(P.head),P.strstart=0,P.block_start=0,P.insert=0),V=new n.Buf8(P.w_size),n.arraySet(V,U,Q-P.w_size,P.w_size,0),U=V,Q=P.w_size),H=t.avail_in,Z=t.next_in,R=t.input,t.avail_in=Q,t.next_in=0,t.input=U,lt(P);P.lookahead>=f;){for(y=P.strstart,g=P.lookahead-(f-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[y+f-1])&P.hash_mask,P.prev[y&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=y,y++,--g;);P.strstart=y,P.lookahead=f-1,lt(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=f-1,P.match_available=0,t.next_in=Z,t.input=R,t.avail_in=H,P.wrap=I,c},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,w,h){w.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,w,h){w.exports=function(l,n){var i,s,d,v,p,k,c,b,o,m,u,S,C,z,A,W,N,x,f,E,G,_,O,r,M;i=l.state,s=l.next_in,r=l.input,d=s+(l.avail_in-5),v=l.next_out,M=l.output,p=v-(n-l.avail_out),k=v+(l.avail_out-257),c=i.dmax,b=i.wsize,o=i.whave,m=i.wnext,u=i.window,S=i.hold,C=i.bits,z=i.lencode,A=i.distcode,W=(1<<i.lenbits)-1,N=(1<<i.distbits)-1;t:do{C<15&&(S+=r[s++]<<C,C+=8,S+=r[s++]<<C,C+=8),x=z[S&W];e:for(;;){if(S>>>=f=x>>>24,C-=f,(f=x>>>16&255)===0)M[v++]=65535&x;else{if(!(16&f)){if(!(64&f)){x=z[(65535&x)+(S&(1<<f)-1)];continue e}if(32&f){i.mode=12;break t}l.msg="invalid literal/length code",i.mode=30;break t}E=65535&x,(f&=15)&&(C<f&&(S+=r[s++]<<C,C+=8),E+=S&(1<<f)-1,S>>>=f,C-=f),C<15&&(S+=r[s++]<<C,C+=8,S+=r[s++]<<C,C+=8),x=A[S&N];r:for(;;){if(S>>>=f=x>>>24,C-=f,!(16&(f=x>>>16&255))){if(!(64&f)){x=A[(65535&x)+(S&(1<<f)-1)];continue r}l.msg="invalid distance code",i.mode=30;break t}if(G=65535&x,C<(f&=15)&&(S+=r[s++]<<C,(C+=8)<f&&(S+=r[s++]<<C,C+=8)),c<(G+=S&(1<<f)-1)){l.msg="invalid distance too far back",i.mode=30;break t}if(S>>>=f,C-=f,(f=v-p)<G){if(o<(f=G-f)&&i.sane){l.msg="invalid distance too far back",i.mode=30;break t}if(O=u,(_=0)===m){if(_+=b-f,f<E){for(E-=f;M[v++]=u[_++],--f;);_=v-G,O=M}}else if(m<f){if(_+=b+m-f,(f-=m)<E){for(E-=f;M[v++]=u[_++],--f;);if(_=0,m<E){for(E-=f=m;M[v++]=u[_++],--f;);_=v-G,O=M}}}else if(_+=m-f,f<E){for(E-=f;M[v++]=u[_++],--f;);_=v-G,O=M}for(;2<E;)M[v++]=O[_++],M[v++]=O[_++],M[v++]=O[_++],E-=3;E&&(M[v++]=O[_++],1<E&&(M[v++]=O[_++]))}else{for(_=v-G;M[v++]=M[_++],M[v++]=M[_++],M[v++]=M[_++],2<(E-=3););E&&(M[v++]=M[_++],1<E&&(M[v++]=M[_++]))}break}}break}}while(s<d&&v<k);s-=E=C>>3,S&=(1<<(C-=E<<3))-1,l.next_in=s,l.next_out=v,l.avail_in=s<d?d-s+5:5-(s-d),l.avail_out=v<k?k-v+257:257-(v-k),i.hold=S,i.bits=C}},{}],49:[function(a,w,h){var l=a("../utils/common"),n=a("./adler32"),i=a("./crc32"),s=a("./inffast"),d=a("./inftrees"),v=1,p=2,k=0,c=-2,b=1,o=852,m=592;function u(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(_){var O;return _&&_.state?(O=_.state,_.total_in=_.total_out=O.total=0,_.msg="",O.wrap&&(_.adler=1&O.wrap),O.mode=b,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new l.Buf32(o),O.distcode=O.distdyn=new l.Buf32(m),O.sane=1,O.back=-1,k):c}function z(_){var O;return _&&_.state?((O=_.state).wsize=0,O.whave=0,O.wnext=0,C(_)):c}function A(_,O){var r,M;return _&&_.state?(M=_.state,O<0?(r=0,O=-O):(r=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?c:(M.window!==null&&M.wbits!==O&&(M.window=null),M.wrap=r,M.wbits=O,z(_))):c}function W(_,O){var r,M;return _?(M=new S,(_.state=M).window=null,(r=A(_,O))!==k&&(_.state=null),r):c}var N,x,f=!0;function E(_){if(f){var O;for(N=new l.Buf32(512),x=new l.Buf32(32),O=0;O<144;)_.lens[O++]=8;for(;O<256;)_.lens[O++]=9;for(;O<280;)_.lens[O++]=7;for(;O<288;)_.lens[O++]=8;for(d(v,_.lens,0,288,N,0,_.work,{bits:9}),O=0;O<32;)_.lens[O++]=5;d(p,_.lens,0,32,x,0,_.work,{bits:5}),f=!1}_.lencode=N,_.lenbits=9,_.distcode=x,_.distbits=5}function G(_,O,r,M){var tt,F=_.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new l.Buf8(F.wsize)),M>=F.wsize?(l.arraySet(F.window,O,r-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(M<(tt=F.wsize-F.wnext)&&(tt=M),l.arraySet(F.window,O,r-M,tt,F.wnext),(M-=tt)?(l.arraySet(F.window,O,r-M,M,0),F.wnext=M,F.whave=F.wsize):(F.wnext+=tt,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=tt))),0}h.inflateReset=z,h.inflateReset2=A,h.inflateResetKeep=C,h.inflateInit=function(_){return W(_,15)},h.inflateInit2=W,h.inflate=function(_,O){var r,M,tt,F,et,D,nt,L,j,J,K,$,lt,dt,st,Y,it,at,ft,ct,t,U,P,y,g=0,I=new l.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return c;(r=_.state).mode===12&&(r.mode=13),et=_.next_out,tt=_.output,nt=_.avail_out,F=_.next_in,M=_.input,D=_.avail_in,L=r.hold,j=r.bits,J=D,K=nt,U=k;t:for(;;)switch(r.mode){case b:if(r.wrap===0){r.mode=13;break}for(;j<16;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(2&r.wrap&&L===35615){I[r.check=0]=255&L,I[1]=L>>>8&255,r.check=i(r.check,I,2,0),j=L=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&L)<<8)+(L>>8))%31){_.msg="incorrect header check",r.mode=30;break}if((15&L)!=8){_.msg="unknown compression method",r.mode=30;break}if(j-=4,t=8+(15&(L>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){_.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,_.adler=r.check=1,r.mode=512&L?10:12,j=L=0;break;case 2:for(;j<16;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(r.flags=L,(255&r.flags)!=8){_.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){_.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=L>>8&1),512&r.flags&&(I[0]=255&L,I[1]=L>>>8&255,r.check=i(r.check,I,2,0)),j=L=0,r.mode=3;case 3:for(;j<32;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}r.head&&(r.head.time=L),512&r.flags&&(I[0]=255&L,I[1]=L>>>8&255,I[2]=L>>>16&255,I[3]=L>>>24&255,r.check=i(r.check,I,4,0)),j=L=0,r.mode=4;case 4:for(;j<16;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}r.head&&(r.head.xflags=255&L,r.head.os=L>>8),512&r.flags&&(I[0]=255&L,I[1]=L>>>8&255,r.check=i(r.check,I,2,0)),j=L=0,r.mode=5;case 5:if(1024&r.flags){for(;j<16;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}r.length=L,r.head&&(r.head.extra_len=L),512&r.flags&&(I[0]=255&L,I[1]=L>>>8&255,r.check=i(r.check,I,2,0)),j=L=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(D<($=r.length)&&($=D),$&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),l.arraySet(r.head.extra,M,F,$,t)),512&r.flags&&(r.check=i(r.check,M,$,F)),D-=$,F+=$,r.length-=$),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(D===0)break t;for($=0;t=M[F+$++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&$<D;);if(512&r.flags&&(r.check=i(r.check,M,$,F)),D-=$,F+=$,t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(D===0)break t;for($=0;t=M[F+$++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&$<D;);if(512&r.flags&&(r.check=i(r.check,M,$,F)),D-=$,F+=$,t)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;j<16;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(L!==(65535&r.check)){_.msg="header crc mismatch",r.mode=30;break}j=L=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),_.adler=r.check=0,r.mode=12;break;case 10:for(;j<32;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}_.adler=r.check=u(L),j=L=0,r.mode=11;case 11:if(r.havedict===0)return _.next_out=et,_.avail_out=nt,_.next_in=F,_.avail_in=D,r.hold=L,r.bits=j,2;_.adler=r.check=1,r.mode=12;case 12:if(O===5||O===6)break t;case 13:if(r.last){L>>>=7&j,j-=7&j,r.mode=27;break}for(;j<3;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}switch(r.last=1&L,j-=1,3&(L>>>=1)){case 0:r.mode=14;break;case 1:if(E(r),r.mode=20,O!==6)break;L>>>=2,j-=2;break t;case 2:r.mode=17;break;case 3:_.msg="invalid block type",r.mode=30}L>>>=2,j-=2;break;case 14:for(L>>>=7&j,j-=7&j;j<32;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if((65535&L)!=(L>>>16^65535)){_.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&L,j=L=0,r.mode=15,O===6)break t;case 15:r.mode=16;case 16:if($=r.length){if(D<$&&($=D),nt<$&&($=nt),$===0)break t;l.arraySet(tt,M,F,$,et),D-=$,F+=$,nt-=$,et+=$,r.length-=$;break}r.mode=12;break;case 17:for(;j<14;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(r.nlen=257+(31&L),L>>>=5,j-=5,r.ndist=1+(31&L),L>>>=5,j-=5,r.ncode=4+(15&L),L>>>=4,j-=4,286<r.nlen||30<r.ndist){_.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;j<3;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}r.lens[H[r.have++]]=7&L,L>>>=3,j-=3}for(;r.have<19;)r.lens[H[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},U=d(0,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,U){_.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;Y=(g=r.lencode[L&(1<<r.lenbits)-1])>>>16&255,it=65535&g,!((st=g>>>24)<=j);){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(it<16)L>>>=st,j-=st,r.lens[r.have++]=it;else{if(it===16){for(y=st+2;j<y;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(L>>>=st,j-=st,r.have===0){_.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],$=3+(3&L),L>>>=2,j-=2}else if(it===17){for(y=st+3;j<y;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}j-=st,t=0,$=3+(7&(L>>>=st)),L>>>=3,j-=3}else{for(y=st+7;j<y;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}j-=st,t=0,$=11+(127&(L>>>=st)),L>>>=7,j-=7}if(r.have+$>r.nlen+r.ndist){_.msg="invalid bit length repeat",r.mode=30;break}for(;$--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){_.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,P={bits:r.lenbits},U=d(v,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,U){_.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},U=d(p,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,U){_.msg="invalid distances set",r.mode=30;break}if(r.mode=20,O===6)break t;case 20:r.mode=21;case 21:if(6<=D&&258<=nt){_.next_out=et,_.avail_out=nt,_.next_in=F,_.avail_in=D,r.hold=L,r.bits=j,s(_,K),et=_.next_out,tt=_.output,nt=_.avail_out,F=_.next_in,M=_.input,D=_.avail_in,L=r.hold,j=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;Y=(g=r.lencode[L&(1<<r.lenbits)-1])>>>16&255,it=65535&g,!((st=g>>>24)<=j);){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(Y&&!(240&Y)){for(at=st,ft=Y,ct=it;Y=(g=r.lencode[ct+((L&(1<<at+ft)-1)>>at)])>>>16&255,it=65535&g,!(at+(st=g>>>24)<=j);){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}L>>>=at,j-=at,r.back+=at}if(L>>>=st,j-=st,r.back+=st,r.length=it,Y===0){r.mode=26;break}if(32&Y){r.back=-1,r.mode=12;break}if(64&Y){_.msg="invalid literal/length code",r.mode=30;break}r.extra=15&Y,r.mode=22;case 22:if(r.extra){for(y=r.extra;j<y;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}r.length+=L&(1<<r.extra)-1,L>>>=r.extra,j-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;Y=(g=r.distcode[L&(1<<r.distbits)-1])>>>16&255,it=65535&g,!((st=g>>>24)<=j);){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(!(240&Y)){for(at=st,ft=Y,ct=it;Y=(g=r.distcode[ct+((L&(1<<at+ft)-1)>>at)])>>>16&255,it=65535&g,!(at+(st=g>>>24)<=j);){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}L>>>=at,j-=at,r.back+=at}if(L>>>=st,j-=st,r.back+=st,64&Y){_.msg="invalid distance code",r.mode=30;break}r.offset=it,r.extra=15&Y,r.mode=24;case 24:if(r.extra){for(y=r.extra;j<y;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}r.offset+=L&(1<<r.extra)-1,L>>>=r.extra,j-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){_.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(nt===0)break t;if($=K-nt,r.offset>$){if(($=r.offset-$)>r.whave&&r.sane){_.msg="invalid distance too far back",r.mode=30;break}lt=$>r.wnext?($-=r.wnext,r.wsize-$):r.wnext-$,$>r.length&&($=r.length),dt=r.window}else dt=tt,lt=et-r.offset,$=r.length;for(nt<$&&($=nt),nt-=$,r.length-=$;tt[et++]=dt[lt++],--$;);r.length===0&&(r.mode=21);break;case 26:if(nt===0)break t;tt[et++]=r.length,nt--,r.mode=21;break;case 27:if(r.wrap){for(;j<32;){if(D===0)break t;D--,L|=M[F++]<<j,j+=8}if(K-=nt,_.total_out+=K,r.total+=K,K&&(_.adler=r.check=r.flags?i(r.check,tt,K,et-K):n(r.check,tt,K,et-K)),K=nt,(r.flags?L:u(L))!==r.check){_.msg="incorrect data check",r.mode=30;break}j=L=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;j<32;){if(D===0)break t;D--,L+=M[F++]<<j,j+=8}if(L!==(4294967295&r.total)){_.msg="incorrect length check",r.mode=30;break}j=L=0}r.mode=29;case 29:U=1;break t;case 30:U=-3;break t;case 31:return-4;case 32:default:return c}return _.next_out=et,_.avail_out=nt,_.next_in=F,_.avail_in=D,r.hold=L,r.bits=j,(r.wsize||K!==_.avail_out&&r.mode<30&&(r.mode<27||O!==4))&&G(_,_.output,_.next_out,K-_.avail_out)?(r.mode=31,-4):(J-=_.avail_in,K-=_.avail_out,_.total_in+=J,_.total_out+=K,r.total+=K,r.wrap&&K&&(_.adler=r.check=r.flags?i(r.check,tt,K,_.next_out-K):n(r.check,tt,K,_.next_out-K)),_.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(J==0&&K===0||O===4)&&U===k&&(U=-5),U)},h.inflateEnd=function(_){if(!_||!_.state)return c;var O=_.state;return O.window&&(O.window=null),_.state=null,k},h.inflateGetHeader=function(_,O){var r;return _&&_.state&&2&(r=_.state).wrap?((r.head=O).done=!1,k):c},h.inflateSetDictionary=function(_,O){var r,M=O.length;return _&&_.state?(r=_.state).wrap!==0&&r.mode!==11?c:r.mode===11&&n(1,O,M,0)!==r.check?-3:G(_,O,M,M)?(r.mode=31,-4):(r.havedict=1,k):c},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,w,h){var l=a("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=function(v,p,k,c,b,o,m,u){var S,C,z,A,W,N,x,f,E,G=u.bits,_=0,O=0,r=0,M=0,tt=0,F=0,et=0,D=0,nt=0,L=0,j=null,J=0,K=new l.Buf16(16),$=new l.Buf16(16),lt=null,dt=0;for(_=0;_<=15;_++)K[_]=0;for(O=0;O<c;O++)K[p[k+O]]++;for(tt=G,M=15;1<=M&&K[M]===0;M--);if(M<tt&&(tt=M),M===0)return b[o++]=20971520,b[o++]=20971520,u.bits=1,0;for(r=1;r<M&&K[r]===0;r++);for(tt<r&&(tt=r),_=D=1;_<=15;_++)if(D<<=1,(D-=K[_])<0)return-1;if(0<D&&(v===0||M!==1))return-1;for($[1]=0,_=1;_<15;_++)$[_+1]=$[_]+K[_];for(O=0;O<c;O++)p[k+O]!==0&&(m[$[p[k+O]]++]=O);if(N=v===0?(j=lt=m,19):v===1?(j=n,J-=257,lt=i,dt-=257,256):(j=s,lt=d,-1),_=r,W=o,et=O=L=0,z=-1,A=(nt=1<<(F=tt))-1,v===1&&852<nt||v===2&&592<nt)return 1;for(;;){for(x=_-et,E=m[O]<N?(f=0,m[O]):m[O]>N?(f=lt[dt+m[O]],j[J+m[O]]):(f=96,0),S=1<<_-et,r=C=1<<F;b[W+(L>>et)+(C-=S)]=x<<24|f<<16|E|0,C!==0;);for(S=1<<_-1;L&S;)S>>=1;if(S!==0?(L&=S-1,L+=S):L=0,O++,--K[_]==0){if(_===M)break;_=p[k+m[O]]}if(tt<_&&(L&A)!==z){for(et===0&&(et=tt),W+=r,D=1<<(F=_-et);F+et<M&&!((D-=K[F+et])<=0);)F++,D<<=1;if(nt+=1<<F,v===1&&852<nt||v===2&&592<nt)return 1;b[z=L&A]=tt<<24|F<<16|W-o|0}}return L!==0&&(b[W+L]=_-et<<24|64<<16|0),u.bits=tt,0}},{"../utils/common":41}],51:[function(a,w,h){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,w,h){var l=a("../utils/common"),n=0,i=1;function s(g){for(var I=g.length;0<=--I;)g[I]=0}var d=0,v=29,p=256,k=p+1+v,c=30,b=19,o=2*k+1,m=15,u=16,S=7,C=256,z=16,A=17,W=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(k+2));s(G);var _=new Array(2*c);s(_);var O=new Array(512);s(O);var r=new Array(256);s(r);var M=new Array(v);s(M);var tt,F,et,D=new Array(c);function nt(g,I,H,Z,R){this.static_tree=g,this.extra_bits=I,this.extra_base=H,this.elems=Z,this.max_length=R,this.has_stree=g&&g.length}function L(g,I){this.dyn_tree=g,this.max_code=0,this.stat_desc=I}function j(g){return g<256?O[g]:O[256+(g>>>7)]}function J(g,I){g.pending_buf[g.pending++]=255&I,g.pending_buf[g.pending++]=I>>>8&255}function K(g,I,H){g.bi_valid>u-H?(g.bi_buf|=I<<g.bi_valid&65535,J(g,g.bi_buf),g.bi_buf=I>>u-g.bi_valid,g.bi_valid+=H-u):(g.bi_buf|=I<<g.bi_valid&65535,g.bi_valid+=H)}function $(g,I,H){K(g,H[2*I],H[2*I+1])}function lt(g,I){for(var H=0;H|=1&g,g>>>=1,H<<=1,0<--I;);return H>>>1}function dt(g,I,H){var Z,R,V=new Array(m+1),Q=0;for(Z=1;Z<=m;Z++)V[Z]=Q=Q+H[Z-1]<<1;for(R=0;R<=I;R++){var q=g[2*R+1];q!==0&&(g[2*R]=lt(V[q]++,q))}}function st(g){var I;for(I=0;I<k;I++)g.dyn_ltree[2*I]=0;for(I=0;I<c;I++)g.dyn_dtree[2*I]=0;for(I=0;I<b;I++)g.bl_tree[2*I]=0;g.dyn_ltree[2*C]=1,g.opt_len=g.static_len=0,g.last_lit=g.matches=0}function Y(g){8<g.bi_valid?J(g,g.bi_buf):0<g.bi_valid&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0}function it(g,I,H,Z){var R=2*I,V=2*H;return g[R]<g[V]||g[R]===g[V]&&Z[I]<=Z[H]}function at(g,I,H){for(var Z=g.heap[H],R=H<<1;R<=g.heap_len&&(R<g.heap_len&&it(I,g.heap[R+1],g.heap[R],g.depth)&&R++,!it(I,Z,g.heap[R],g.depth));)g.heap[H]=g.heap[R],H=R,R<<=1;g.heap[H]=Z}function ft(g,I,H){var Z,R,V,Q,q=0;if(g.last_lit!==0)for(;Z=g.pending_buf[g.d_buf+2*q]<<8|g.pending_buf[g.d_buf+2*q+1],R=g.pending_buf[g.l_buf+q],q++,Z===0?$(g,R,I):($(g,(V=r[R])+p+1,I),(Q=N[V])!==0&&K(g,R-=M[V],Q),$(g,V=j(--Z),H),(Q=x[V])!==0&&K(g,Z-=D[V],Q)),q<g.last_lit;);$(g,C,I)}function ct(g,I){var H,Z,R,V=I.dyn_tree,Q=I.stat_desc.static_tree,q=I.stat_desc.has_stree,rt=I.stat_desc.elems,ht=-1;for(g.heap_len=0,g.heap_max=o,H=0;H<rt;H++)V[2*H]!==0?(g.heap[++g.heap_len]=ht=H,g.depth[H]=0):V[2*H+1]=0;for(;g.heap_len<2;)V[2*(R=g.heap[++g.heap_len]=ht<2?++ht:0)]=1,g.depth[R]=0,g.opt_len--,q&&(g.static_len-=Q[2*R+1]);for(I.max_code=ht,H=g.heap_len>>1;1<=H;H--)at(g,V,H);for(R=rt;H=g.heap[1],g.heap[1]=g.heap[g.heap_len--],at(g,V,1),Z=g.heap[1],g.heap[--g.heap_max]=H,g.heap[--g.heap_max]=Z,V[2*R]=V[2*H]+V[2*Z],g.depth[R]=(g.depth[H]>=g.depth[Z]?g.depth[H]:g.depth[Z])+1,V[2*H+1]=V[2*Z+1]=R,g.heap[1]=R++,at(g,V,1),2<=g.heap_len;);g.heap[--g.heap_max]=g.heap[1],function(ot,gt){var wt,bt,vt,pt,_t,jt,yt=gt.dyn_tree,Vt=gt.max_code,we=gt.stat_desc.static_tree,ye=gt.stat_desc.has_stree,xe=gt.stat_desc.extra_bits,$t=gt.stat_desc.extra_base,Tt=gt.stat_desc.max_length,Rt=0;for(pt=0;pt<=m;pt++)ot.bl_count[pt]=0;for(yt[2*ot.heap[ot.heap_max]+1]=0,wt=ot.heap_max+1;wt<o;wt++)Tt<(pt=yt[2*yt[2*(bt=ot.heap[wt])+1]+1]+1)&&(pt=Tt,Rt++),yt[2*bt+1]=pt,Vt<bt||(ot.bl_count[pt]++,_t=0,$t<=bt&&(_t=xe[bt-$t]),jt=yt[2*bt],ot.opt_len+=jt*(pt+_t),ye&&(ot.static_len+=jt*(we[2*bt+1]+_t)));if(Rt!==0){do{for(pt=Tt-1;ot.bl_count[pt]===0;)pt--;ot.bl_count[pt]--,ot.bl_count[pt+1]+=2,ot.bl_count[Tt]--,Rt-=2}while(0<Rt);for(pt=Tt;pt!==0;pt--)for(bt=ot.bl_count[pt];bt!==0;)Vt<(vt=ot.heap[--wt])||(yt[2*vt+1]!==pt&&(ot.opt_len+=(pt-yt[2*vt+1])*yt[2*vt],yt[2*vt+1]=pt),bt--)}}(g,I),dt(V,ht,g.bl_count)}function t(g,I,H){var Z,R,V=-1,Q=I[1],q=0,rt=7,ht=4;for(Q===0&&(rt=138,ht=3),I[2*(H+1)+1]=65535,Z=0;Z<=H;Z++)R=Q,Q=I[2*(Z+1)+1],++q<rt&&R===Q||(q<ht?g.bl_tree[2*R]+=q:R!==0?(R!==V&&g.bl_tree[2*R]++,g.bl_tree[2*z]++):q<=10?g.bl_tree[2*A]++:g.bl_tree[2*W]++,V=R,ht=(q=0)===Q?(rt=138,3):R===Q?(rt=6,3):(rt=7,4))}function U(g,I,H){var Z,R,V=-1,Q=I[1],q=0,rt=7,ht=4;for(Q===0&&(rt=138,ht=3),Z=0;Z<=H;Z++)if(R=Q,Q=I[2*(Z+1)+1],!(++q<rt&&R===Q)){if(q<ht)for(;$(g,R,g.bl_tree),--q!=0;);else R!==0?(R!==V&&($(g,R,g.bl_tree),q--),$(g,z,g.bl_tree),K(g,q-3,2)):q<=10?($(g,A,g.bl_tree),K(g,q-3,3)):($(g,W,g.bl_tree),K(g,q-11,7));V=R,ht=(q=0)===Q?(rt=138,3):R===Q?(rt=6,3):(rt=7,4)}}s(D);var P=!1;function y(g,I,H,Z){K(g,(d<<1)+(Z?1:0),3),function(R,V,Q,q){Y(R),J(R,Q),J(R,~Q),l.arraySet(R.pending_buf,R.window,V,Q,R.pending),R.pending+=Q}(g,I,H)}h._tr_init=function(g){P||(function(){var I,H,Z,R,V,Q=new Array(m+1);for(R=Z=0;R<v-1;R++)for(M[R]=Z,I=0;I<1<<N[R];I++)r[Z++]=R;for(r[Z-1]=R,R=V=0;R<16;R++)for(D[R]=V,I=0;I<1<<x[R];I++)O[V++]=R;for(V>>=7;R<c;R++)for(D[R]=V<<7,I=0;I<1<<x[R]-7;I++)O[256+V++]=R;for(H=0;H<=m;H++)Q[H]=0;for(I=0;I<=143;)G[2*I+1]=8,I++,Q[8]++;for(;I<=255;)G[2*I+1]=9,I++,Q[9]++;for(;I<=279;)G[2*I+1]=7,I++,Q[7]++;for(;I<=287;)G[2*I+1]=8,I++,Q[8]++;for(dt(G,k+1,Q),I=0;I<c;I++)_[2*I+1]=5,_[2*I]=lt(I,5);tt=new nt(G,N,p+1,k,m),F=new nt(_,x,0,c,m),et=new nt(new Array(0),f,0,b,S)}(),P=!0),g.l_desc=new L(g.dyn_ltree,tt),g.d_desc=new L(g.dyn_dtree,F),g.bl_desc=new L(g.bl_tree,et),g.bi_buf=0,g.bi_valid=0,st(g)},h._tr_stored_block=y,h._tr_flush_block=function(g,I,H,Z){var R,V,Q=0;0<g.level?(g.strm.data_type===2&&(g.strm.data_type=function(q){var rt,ht=4093624447;for(rt=0;rt<=31;rt++,ht>>>=1)if(1&ht&&q.dyn_ltree[2*rt]!==0)return n;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return i;for(rt=32;rt<p;rt++)if(q.dyn_ltree[2*rt]!==0)return i;return n}(g)),ct(g,g.l_desc),ct(g,g.d_desc),Q=function(q){var rt;for(t(q,q.dyn_ltree,q.l_desc.max_code),t(q,q.dyn_dtree,q.d_desc.max_code),ct(q,q.bl_desc),rt=b-1;3<=rt&&q.bl_tree[2*E[rt]+1]===0;rt--);return q.opt_len+=3*(rt+1)+5+5+4,rt}(g),R=g.opt_len+3+7>>>3,(V=g.static_len+3+7>>>3)<=R&&(R=V)):R=V=H+5,H+4<=R&&I!==-1?y(g,I,H,Z):g.strategy===4||V===R?(K(g,2+(Z?1:0),3),ft(g,G,_)):(K(g,4+(Z?1:0),3),function(q,rt,ht,ot){var gt;for(K(q,rt-257,5),K(q,ht-1,5),K(q,ot-4,4),gt=0;gt<ot;gt++)K(q,q.bl_tree[2*E[gt]+1],3);U(q,q.dyn_ltree,rt-1),U(q,q.dyn_dtree,ht-1)}(g,g.l_desc.max_code+1,g.d_desc.max_code+1,Q+1),ft(g,g.dyn_ltree,g.dyn_dtree)),st(g),Z&&Y(g)},h._tr_tally=function(g,I,H){return g.pending_buf[g.d_buf+2*g.last_lit]=I>>>8&255,g.pending_buf[g.d_buf+2*g.last_lit+1]=255&I,g.pending_buf[g.l_buf+g.last_lit]=255&H,g.last_lit++,I===0?g.dyn_ltree[2*H]++:(g.matches++,I--,g.dyn_ltree[2*(r[H]+p+1)]++,g.dyn_dtree[2*j(I)]++),g.last_lit===g.lit_bufsize-1},h._tr_align=function(g){K(g,2,3),$(g,C,G),function(I){I.bi_valid===16?(J(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(g)}},{"../utils/common":41}],53:[function(a,w,h){w.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,w,h){(function(l){(function(n,i){if(!n.setImmediate){var s,d,v,p,k=1,c={},b=!1,o=n.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(n);m=m&&m.setTimeout?m:n,s={}.toString.call(n.process)==="[object process]"?function(z){process.nextTick(function(){S(z)})}:function(){if(n.postMessage&&!n.importScripts){var z=!0,A=n.onmessage;return n.onmessage=function(){z=!1},n.postMessage("","*"),n.onmessage=A,z}}()?(p="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",C,!1):n.attachEvent("onmessage",C),function(z){n.postMessage(p+z,"*")}):n.MessageChannel?((v=new MessageChannel).port1.onmessage=function(z){S(z.data)},function(z){v.port2.postMessage(z)}):o&&"onreadystatechange"in o.createElement("script")?(d=o.documentElement,function(z){var A=o.createElement("script");A.onreadystatechange=function(){S(z),A.onreadystatechange=null,d.removeChild(A),A=null},d.appendChild(A)}):function(z){setTimeout(S,0,z)},m.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var A=new Array(arguments.length-1),W=0;W<A.length;W++)A[W]=arguments[W+1];var N={callback:z,args:A};return c[k]=N,s(k),k++},m.clearImmediate=u}function u(z){delete c[z]}function S(z){if(b)setTimeout(S,0,z);else{var A=c[z];if(A){b=!0;try{(function(W){var N=W.callback,x=W.args;switch(x.length){case 0:N();break;case 1:N(x[0]);break;case 2:N(x[0],x[1]);break;case 3:N(x[0],x[1],x[2]);break;default:N.apply(i,x)}})(A)}finally{u(z),b=!1}}}}function C(z){z.source===n&&typeof z.data=="string"&&z.data.indexOf(p)===0&&S(+z.data.slice(p.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof Nt<"u"?Nt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(me);var hr=me.exports;const dr=le(hr);var ge={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(T,B){(function(a,w){T.exports=w()})(Nt,function a(){var w=typeof self<"u"?self:typeof window<"u"?window:w!==void 0?w:{},h=!w.document&&!!w.postMessage,l=w.IS_PAPA_WORKER||!1,n={},i=0,s={parse:function(x,f){var E=(f=f||{}).dynamicTyping||!1;if(N(E)&&(f.dynamicTypingFunction=E,E={}),f.dynamicTyping=E,f.transform=!!N(f.transform)&&f.transform,f.worker&&s.WORKERS_SUPPORTED){var G=function(){if(!s.WORKERS_SUPPORTED)return!1;var O=(M=w.URL||w.webkitURL||null,tt=a.toString(),s.BLOB_URL||(s.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",tt,")();"],{type:"text/javascript"})))),r=new w.Worker(O),M,tt;return r.onmessage=S,r.id=i++,n[r.id]=r}();return G.userStep=f.step,G.userChunk=f.chunk,G.userComplete=f.complete,G.userError=f.error,f.step=N(f.step),f.chunk=N(f.chunk),f.complete=N(f.complete),f.error=N(f.error),delete f.worker,void G.postMessage({input:x,config:f,workerId:G.id})}var _=null;return s.NODE_STREAM_INPUT,typeof x=="string"?(x=function(O){return O.charCodeAt(0)===65279?O.slice(1):O}(x),_=f.download?new p(f):new c(f)):x.readable===!0&&N(x.read)&&N(x.on)?_=new b(f):(w.File&&x instanceof File||x instanceof Object)&&(_=new k(f)),_.stream(x)},unparse:function(x,f){var E=!1,G=!0,_=",",O=`\r
`,r='"',M=r+r,tt=!1,F=null,et=!1;(function(){if(typeof f=="object"){if(typeof f.delimiter!="string"||s.BAD_DELIMITERS.filter(function(j){return f.delimiter.indexOf(j)!==-1}).length||(_=f.delimiter),(typeof f.quotes=="boolean"||typeof f.quotes=="function"||Array.isArray(f.quotes))&&(E=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(tt=f.skipEmptyLines),typeof f.newline=="string"&&(O=f.newline),typeof f.quoteChar=="string"&&(r=f.quoteChar),typeof f.header=="boolean"&&(G=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");F=f.columns}f.escapeChar!==void 0&&(M=f.escapeChar+r),(typeof f.escapeFormulae=="boolean"||f.escapeFormulae instanceof RegExp)&&(et=f.escapeFormulae instanceof RegExp?f.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var D=new RegExp(m(r),"g");if(typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(x)){if(!x.length||Array.isArray(x[0]))return nt(null,x,tt);if(typeof x[0]=="object")return nt(F||Object.keys(x[0]),x,tt)}else if(typeof x=="object")return typeof x.data=="string"&&(x.data=JSON.parse(x.data)),Array.isArray(x.data)&&(x.fields||(x.fields=x.meta&&x.meta.fields||F),x.fields||(x.fields=Array.isArray(x.data[0])?x.fields:typeof x.data[0]=="object"?Object.keys(x.data[0]):[]),Array.isArray(x.data[0])||typeof x.data[0]=="object"||(x.data=[x.data])),nt(x.fields||[],x.data||[],tt);throw new Error("Unable to serialize unrecognized input");function nt(j,J,K){var $="";typeof j=="string"&&(j=JSON.parse(j)),typeof J=="string"&&(J=JSON.parse(J));var lt=Array.isArray(j)&&0<j.length,dt=!Array.isArray(J[0]);if(lt&&G){for(var st=0;st<j.length;st++)0<st&&($+=_),$+=L(j[st],st);0<J.length&&($+=O)}for(var Y=0;Y<J.length;Y++){var it=lt?j.length:J[Y].length,at=!1,ft=lt?Object.keys(J[Y]).length===0:J[Y].length===0;if(K&&!lt&&(at=K==="greedy"?J[Y].join("").trim()==="":J[Y].length===1&&J[Y][0].length===0),K==="greedy"&&lt){for(var ct=[],t=0;t<it;t++){var U=dt?j[t]:t;ct.push(J[Y][U])}at=ct.join("").trim()===""}if(!at){for(var P=0;P<it;P++){0<P&&!ft&&($+=_);var y=lt&&dt?j[P]:P;$+=L(J[Y][y],P)}Y<J.length-1&&(!K||0<it&&!ft)&&($+=O)}}return $}function L(j,J){if(j==null)return"";if(j.constructor===Date)return JSON.stringify(j).slice(1,25);var K=!1;et&&typeof j=="string"&&et.test(j)&&(j="'"+j,K=!0);var $=j.toString().replace(D,M);return(K=K||E===!0||typeof E=="function"&&E(j,J)||Array.isArray(E)&&E[J]||function(lt,dt){for(var st=0;st<dt.length;st++)if(-1<lt.indexOf(dt[st]))return!0;return!1}($,s.BAD_DELIMITERS)||-1<$.indexOf(_)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?r+$+r:$}}};if(s.RECORD_SEP="",s.UNIT_SEP="",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!h&&!!w.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=u,s.ParserHandle=o,s.NetworkStreamer=p,s.FileStreamer=k,s.StringStreamer=c,s.ReadableStreamStreamer=b,w.jQuery){var d=w.jQuery;d.fn.parse=function(x){var f=x.config||{},E=[];return this.each(function(O){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&w.FileReader)||!this.files||this.files.length===0)return!0;for(var r=0;r<this.files.length;r++)E.push({file:this.files[r],inputElem:this,instanceConfig:d.extend({},f)})}),G(),this;function G(){if(E.length!==0){var O,r,M,tt,F=E[0];if(N(x.before)){var et=x.before(F.file,F.inputElem);if(typeof et=="object"){if(et.action==="abort")return O="AbortError",r=F.file,M=F.inputElem,tt=et.reason,void(N(x.error)&&x.error({name:O},r,M,tt));if(et.action==="skip")return void _();typeof et.config=="object"&&(F.instanceConfig=d.extend(F.instanceConfig,et.config))}else if(et==="skip")return void _()}var D=F.instanceConfig.complete;F.instanceConfig.complete=function(nt){N(D)&&D(nt,F.file,F.inputElem),_()},s.parse(F.file,F.instanceConfig)}else N(x.complete)&&x.complete()}function _(){E.splice(0,1),G()}}}function v(x){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(f){var E=A(f);E.chunkSize=parseInt(E.chunkSize),f.step||f.chunk||(E.chunkSize=null),this._handle=new o(E),(this._handle.streamer=this)._config=E}).call(this,x),this.parseChunk=function(f,E){if(this.isFirstChunk&&N(this._config.beforeFirstChunk)){var G=this._config.beforeFirstChunk(f);G!==void 0&&(f=G)}this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+f;this._partialLine="";var O=this._handle.parse(_,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var r=O.meta.cursor;this._finished||(this._partialLine=_.substring(r-this._baseIndex),this._baseIndex=r),O&&O.data&&(this._rowCount+=O.data.length);var M=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)w.postMessage({results:O,workerId:s.WORKER_ID,finished:M});else if(N(this._config.chunk)&&!E){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);O=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!M||!N(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(f){N(this._config.error)?this._config.error(f):l&&this._config.error&&w.postMessage({workerId:s.WORKER_ID,error:f,finished:!1})}}function p(x){var f;(x=x||{}).chunkSize||(x.chunkSize=s.RemoteChunkSize),v.call(this,x),this._nextChunk=h?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),h||(f.onload=W(this._chunkLoaded,this),f.onerror=W(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!h),this._config.downloadRequestHeaders){var E=this._config.downloadRequestHeaders;for(var G in E)f.setRequestHeader(G,E[G])}if(this._config.chunkSize){var _=this._start+this._config.chunkSize-1;f.setRequestHeader("Range","bytes="+this._start+"-"+_)}try{f.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}h&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:f.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(E){var G=E.getResponseHeader("Content-Range");return G===null?-1:parseInt(G.substring(G.lastIndexOf("/")+1))}(f),this.parseChunk(f.responseText)))},this._chunkError=function(E){var G=f.statusText||E;this._sendError(new Error(G))}}function k(x){var f,E;(x=x||{}).chunkSize||(x.chunkSize=s.LocalChunkSize),v.call(this,x);var G=typeof FileReader<"u";this.stream=function(_){this._input=_,E=_.slice||_.webkitSlice||_.mozSlice,G?((f=new FileReader).onload=W(this._chunkLoaded,this),f.onerror=W(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input;if(this._config.chunkSize){var O=Math.min(this._start+this._config.chunkSize,this._input.size);_=E.call(_,this._start,O)}var r=f.readAsText(_,this._config.encoding);G||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(f.error)}}function c(x){var f;v.call(this,x=x||{}),this.stream=function(E){return f=E,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var E,G=this._config.chunkSize;return G?(E=f.substring(0,G),f=f.substring(G)):(E=f,f=""),this._finished=!f,this.parseChunk(E)}}}function b(x){v.call(this,x=x||{});var f=[],E=!0,G=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){G&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):E=!0},this._streamData=W(function(_){try{f.push(typeof _=="string"?_:_.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(O){this._streamError(O)}},this),this._streamError=W(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=W(function(){this._streamCleanUp(),G=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function o(x){var f,E,G,_=Math.pow(2,53),O=-_,r=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,tt=this,F=0,et=0,D=!1,nt=!1,L=[],j={data:[],errors:[],meta:{}};if(N(x.step)){var J=x.step;x.step=function(Y){if(j=Y,lt())$();else{if($(),j.data.length===0)return;F+=Y.data.length,x.preview&&F>x.preview?E.abort():(j.data=j.data[0],J(j,tt))}}}function K(Y){return x.skipEmptyLines==="greedy"?Y.join("").trim()==="":Y.length===1&&Y[0].length===0}function $(){return j&&G&&(st("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),G=!1),x.skipEmptyLines&&(j.data=j.data.filter(function(Y){return!K(Y)})),lt()&&function(){if(!j)return;function Y(at,ft){N(x.transformHeader)&&(at=x.transformHeader(at,ft)),L.push(at)}if(Array.isArray(j.data[0])){for(var it=0;lt()&&it<j.data.length;it++)j.data[it].forEach(Y);j.data.splice(0,1)}else j.data.forEach(Y)}(),function(){if(!j||!x.header&&!x.dynamicTyping&&!x.transform)return j;function Y(at,ft){var ct,t=x.header?{}:[];for(ct=0;ct<at.length;ct++){var U=ct,P=at[ct];x.header&&(U=ct>=L.length?"__parsed_extra":L[ct]),x.transform&&(P=x.transform(P,U)),P=dt(U,P),U==="__parsed_extra"?(t[U]=t[U]||[],t[U].push(P)):t[U]=P}return x.header&&(ct>L.length?st("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+ct,et+ft):ct<L.length&&st("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+ct,et+ft)),t}var it=1;return!j.data.length||Array.isArray(j.data[0])?(j.data=j.data.map(Y),it=j.data.length):j.data=Y(j.data,0),x.header&&j.meta&&(j.meta.fields=L),et+=it,j}()}function lt(){return x.header&&L.length===0}function dt(Y,it){return at=Y,x.dynamicTypingFunction&&x.dynamicTyping[at]===void 0&&(x.dynamicTyping[at]=x.dynamicTypingFunction(at)),(x.dynamicTyping[at]||x.dynamicTyping)===!0?it==="true"||it==="TRUE"||it!=="false"&&it!=="FALSE"&&(function(ft){if(r.test(ft)){var ct=parseFloat(ft);if(O<ct&&ct<_)return!0}return!1}(it)?parseFloat(it):M.test(it)?new Date(it):it===""?null:it):it;var at}function st(Y,it,at,ft){var ct={type:Y,code:it,message:at};ft!==void 0&&(ct.row=ft),j.errors.push(ct)}this.parse=function(Y,it,at){var ft=x.quoteChar||'"';if(x.newline||(x.newline=function(U,P){U=U.substring(0,1048576);var y=new RegExp(m(P)+"([^]*?)"+m(P),"gm"),g=(U=U.replace(y,"")).split("\r"),I=U.split(`
`),H=1<I.length&&I[0].length<g[0].length;if(g.length===1||H)return`
`;for(var Z=0,R=0;R<g.length;R++)g[R][0]===`
`&&Z++;return Z>=g.length/2?`\r
`:"\r"}(Y,ft)),G=!1,x.delimiter)N(x.delimiter)&&(x.delimiter=x.delimiter(Y),j.meta.delimiter=x.delimiter);else{var ct=function(U,P,y,g,I){var H,Z,R,V;I=I||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var Q=0;Q<I.length;Q++){var q=I[Q],rt=0,ht=0,ot=0;R=void 0;for(var gt=new u({comments:g,delimiter:q,newline:P,preview:10}).parse(U),wt=0;wt<gt.data.length;wt++)if(y&&K(gt.data[wt]))ot++;else{var bt=gt.data[wt].length;ht+=bt,R!==void 0?0<bt&&(rt+=Math.abs(bt-R),R=bt):R=bt}0<gt.data.length&&(ht/=gt.data.length-ot),(Z===void 0||rt<=Z)&&(V===void 0||V<ht)&&1.99<ht&&(Z=rt,H=q,V=ht)}return{successful:!!(x.delimiter=H),bestDelimiter:H}}(Y,x.newline,x.skipEmptyLines,x.comments,x.delimitersToGuess);ct.successful?x.delimiter=ct.bestDelimiter:(G=!0,x.delimiter=s.DefaultDelimiter),j.meta.delimiter=x.delimiter}var t=A(x);return x.preview&&x.header&&t.preview++,f=Y,E=new u(t),j=E.parse(f,it,at),$(),D?{meta:{paused:!0}}:j||{meta:{paused:!1}}},this.paused=function(){return D},this.pause=function(){D=!0,E.abort(),f=N(x.chunk)?"":f.substring(E.getCharIndex())},this.resume=function(){tt.streamer._halted?(D=!1,tt.streamer.parseChunk(f,!0)):setTimeout(tt.resume,3)},this.aborted=function(){return nt},this.abort=function(){nt=!0,E.abort(),j.meta.aborted=!0,N(x.complete)&&x.complete(j),f=""}}function m(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(x){var f,E=(x=x||{}).delimiter,G=x.newline,_=x.comments,O=x.step,r=x.preview,M=x.fastMode,tt=f=x.quoteChar===void 0||x.quoteChar===null?'"':x.quoteChar;if(x.escapeChar!==void 0&&(tt=x.escapeChar),(typeof E!="string"||-1<s.BAD_DELIMITERS.indexOf(E))&&(E=","),_===E)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<s.BAD_DELIMITERS.indexOf(_))&&(_=!1),G!==`
`&&G!=="\r"&&G!==`\r
`&&(G=`
`);var F=0,et=!1;this.parse=function(D,nt,L){if(typeof D!="string")throw new Error("Input must be a string");var j=D.length,J=E.length,K=G.length,$=_.length,lt=N(O),dt=[],st=[],Y=[],it=F=0;if(!D)return vt();if(x.header&&!nt){var at=D.split(G)[0].split(E),ft=[],ct={},t=!1;for(var U in at){var P=at[U];N(x.transformHeader)&&(P=x.transformHeader(P,U));var y=P,g=ct[P]||0;for(0<g&&(t=!0,y=P+"_"+g),ct[P]=g+1;ft.includes(y);)y=y+"_"+g;ft.push(y)}if(t){var I=D.split(G);I[0]=ft.join(E),D=I.join(G)}}if(M||M!==!1&&D.indexOf(f)===-1){for(var H=D.split(G),Z=0;Z<H.length;Z++){if(Y=H[Z],F+=Y.length,Z!==H.length-1)F+=G.length;else if(L)return vt();if(!_||Y.substring(0,$)!==_){if(lt){if(dt=[],ot(Y.split(E)),pt(),et)return vt()}else ot(Y.split(E));if(r&&r<=Z)return dt=dt.slice(0,r),vt(!0)}}return vt()}for(var R=D.indexOf(E,F),V=D.indexOf(G,F),Q=new RegExp(m(tt)+m(f),"g"),q=D.indexOf(f,F);;)if(D[F]!==f)if(_&&Y.length===0&&D.substring(F,F+$)===_){if(V===-1)return vt();F=V+K,V=D.indexOf(G,F),R=D.indexOf(E,F)}else if(R!==-1&&(R<V||V===-1))Y.push(D.substring(F,R)),F=R+J,R=D.indexOf(E,F);else{if(V===-1)break;if(Y.push(D.substring(F,V)),bt(V+K),lt&&(pt(),et))return vt();if(r&&dt.length>=r)return vt(!0)}else for(q=F,F++;;){if((q=D.indexOf(f,q+1))===-1)return L||st.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:dt.length,index:F}),wt();if(q===j-1)return wt(D.substring(F,q).replace(Q,f));if(f!==tt||D[q+1]!==tt){if(f===tt||q===0||D[q-1]!==tt){R!==-1&&R<q+1&&(R=D.indexOf(E,q+1)),V!==-1&&V<q+1&&(V=D.indexOf(G,q+1));var rt=gt(V===-1?R:Math.min(R,V));if(D.substr(q+1+rt,J)===E){Y.push(D.substring(F,q).replace(Q,f)),D[F=q+1+rt+J]!==f&&(q=D.indexOf(f,F)),R=D.indexOf(E,F),V=D.indexOf(G,F);break}var ht=gt(V);if(D.substring(q+1+ht,q+1+ht+K)===G){if(Y.push(D.substring(F,q).replace(Q,f)),bt(q+1+ht+K),R=D.indexOf(E,F),q=D.indexOf(f,F),lt&&(pt(),et))return vt();if(r&&dt.length>=r)return vt(!0);break}st.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:dt.length,index:F}),q++}}else q++}return wt();function ot(_t){dt.push(_t),it=F}function gt(_t){var jt=0;if(_t!==-1){var yt=D.substring(q+1,_t);yt&&yt.trim()===""&&(jt=yt.length)}return jt}function wt(_t){return L||(_t===void 0&&(_t=D.substring(F)),Y.push(_t),F=j,ot(Y),lt&&pt()),vt()}function bt(_t){F=_t,ot(Y),Y=[],V=D.indexOf(G,F)}function vt(_t){return{data:dt,errors:st,meta:{delimiter:E,linebreak:G,aborted:et,truncated:!!_t,cursor:it+(nt||0)}}}function pt(){O(vt()),dt=[],st=[]}},this.abort=function(){et=!0},this.getCharIndex=function(){return F}}function S(x){var f=x.data,E=n[f.workerId],G=!1;if(f.error)E.userError(f.error,f.file);else if(f.results&&f.results.data){var _={abort:function(){G=!0,C(f.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:z,resume:z};if(N(E.userStep)){for(var O=0;O<f.results.data.length&&(E.userStep({data:f.results.data[O],errors:f.results.errors,meta:f.results.meta},_),!G);O++);delete f.results}else N(E.userChunk)&&(E.userChunk(f.results,_,f.file),delete f.results)}f.finished&&!G&&C(f.workerId,f.results)}function C(x,f){var E=n[x];N(E.userComplete)&&E.userComplete(f),E.terminate(),delete n[x]}function z(){throw new Error("Not implemented.")}function A(x){if(typeof x!="object"||x===null)return x;var f=Array.isArray(x)?[]:{};for(var E in x)f[E]=A(x[E]);return f}function W(x,f){return function(){x.apply(f,arguments)}}function N(x){return typeof x=="function"}return l&&(w.onmessage=function(x){var f=x.data;if(s.WORKER_ID===void 0&&f&&(s.WORKER_ID=f.workerId),typeof f.input=="string")w.postMessage({workerId:s.WORKER_ID,results:s.parse(f.input,f.config),finished:!0});else if(w.File&&f.input instanceof File||f.input instanceof Object){var E=s.parse(f.input,f.config);E&&w.postMessage({workerId:s.WORKER_ID,results:E,finished:!0})}}),(p.prototype=Object.create(v.prototype)).constructor=p,(k.prototype=Object.create(v.prototype)).constructor=k,(c.prototype=Object.create(c.prototype)).constructor=c,(b.prototype=Object.create(v.prototype)).constructor=b,s})})(ge);var ur=ge.exports;const be=le(ur),fr=T=>new Promise(B=>{const a=new FileReader;a.onload=function(w){var h;(h=w.target)!=null&&h.result&&dr.loadAsync(w.target.result).then(function(l){B(l)})},a.readAsArrayBuffer(T)}),Qt=async T=>{const B=[],a=[];for(let w=0;w<T.length;w++){const h=T[w];if(h.type==="application/x-zip-compressed"||h.type==="application/zip"){const l=await fr(h),n=[];l.forEach(function(i,s){(s.name.endsWith(".csv")||s.name.endsWith(".xml"))&&n.push({object:s})}),B.push({name:h.name,files:n})}else h.type==="text/csv"||h.type==="text/xml"?a.push(h):ut("Unsupported file: "+h.name,"error")}return[B,a]},pr=T=>{const B=[];return T.forEach((a,w)=>{a.files.forEach((h,l)=>{B.push({file:l,zip:w})})}),B},ve=T=>{const B=qt(T);if(B)return Oe(B==null?void 0:B.blocksProps,B==null?void 0:B.desktop,B==null?void 0:B.innerBlocks)},_e=T=>{var h;((h=T.at(-1))==null?void 0:h.length)===1&&T.pop();const B=T.reduce((l,n)=>Math.max(l,n.length),0),a={alignment:At.alignment,enableMaxWidth:!1,cellMinWidth:120,sortHorizontal:!1,sortVertical:!1,borderCollapse:"collapse !important",tableSpacingX:3,tableSpacingY:3,cols:B,cellsWidthAutoCount:B,tdSumMaxWidth:120*B+20*B,fontColor:"#000000",linkColor:"#000000",fontSize:15,tableBorder:Xt(At.tableBorder),innerBorder:Xt(At.innerBorder),headerInnerBorder:!0,scrollX:!1,disableThemeStyles:!1,extraStyles:btoa(""),stickyFirstColumn:!1,stickyTopRow:!1,paginationEnable:!1,paginationTopRowAsHeader:"false",rowsPerPage:"10",rowsChangeable:!1,searchEnable:!1,searchKeepHeader:"true",searchPosition:"left",role:"table",directives:Re(At),responsiveDirectives:Be(At.responsive)},w=[];return T.forEach((l,n)=>{const i=[];l.forEach((s,d)=>{i.push({props:{autoWidth:"true",autoHeight:"true",padding:"10px",vAlign:"center",xIndex:d,yIndex:n,colspan:1,rowspan:1,hideOnMobile:!1},blocks:[{type:"text",props:{text:`<p>${s}</p>`,color:"#000000",fontSize:"15px"}}]})}),w.push({props:{},cells:i})}),JSON.stringify({props:a,rows:w})},mr=T=>new Promise((B,a)=>{if(T.type==="text/csv")be.parse(T,{complete(w){if(w.errors.length>0&&!(w.errors.length===1&&w.errors[0].code==="UndetectableDelimiter")){a("Failed to parse the file: "+T.name);return}const h=w.data;B(_e(h))}});else if(T.type==="text/xml"){const w=new FileReader;w.onload=function(h){var n;if(!((n=h.target)!=null&&n.result)){a("No content found!");return}const l=ve(h.target.result);B(JSON.stringify(l))},w.readAsText(T)}else a("Unsupported file: "+T.name)}),gr=T=>new Promise((B,a)=>{T.async("text").then(w=>{if(T.name.endsWith(".csv"))be.parse(w,{complete(h){if(h.errors.length>0&&!(h.errors.length===1&&h.errors[0].code==="UndetectableDelimiter")){a("Failed to parse the file: "+T.name);return}const l=h.data;B(_e(l))}});else if(T.name.endsWith(".xml")){const h=ve(w);B(JSON.stringify(h))}else a("Unsupported file: "+T.name),B(null)})}),br=async({setLoadings:T,zips:B,rawFiles:a,keepTitles:w})=>{T.current({});const h=pr(B),l=h.length+a.length,n=ut(`[0/${l}] Importing tables...`,"progress");let i=1,s=0;for(;s<l;){const d=[];for(let v=0;v<5;v++){let p="";try{let k=s+v,c=null,b,o;if(k<a.length)o=a[k],p=k,c=await mr(o),b=o.name.replace(/\.([a-z]+)$/,"");else if(k<l){k=k-a.length;const m=h[k];o=B[m.zip].files[m.file],p=m.zip+"_"+m.file,c=await gr(o.object),b=o.object.name.replace(/\.([a-z]+)$/,"")}if(!c){i++;continue}T.current(m=>({...m,[p]:1})),d.push(new Promise(m=>{fetch(WPTB_CFG.ADMIN_URL+"?action=save_table",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:w?b:void 0,content:c,security_code:WPTB_CFG.SECURITY_CODE})}).then(u=>{if(u.ok)T.current(S=>({...S,[p]:2}));else throw new Error(u.statusText)}).catch(u=>{T.current(S=>({...S,[p]:u.message||"Something went wrong..."}))}).finally(()=>{i++,m(!0)})}))}catch(k){i++,T.current(c=>({...c,[p]:typeof k=="string"?k:k.message||"Something went wrong..."}))}finally{Jt(n,{progress:i/l*100,message:`[${i}/${l}] Importing tables...`})}}await Promise.all(d),s+=5}Jt(n,{type:"success",message:`[${l}] Tables imported successfully!`,spawned_at:Date.now(),duration:5e3})},te=T=>T?T===1?ie:T===2?Le:e.jsx(ce,{content:T,children:Fe}):"",vr=({setActiveTab:T})=>{const[B,a]=X.useState(!1),[w,h]=X.useState(!0),[l,n]=X.useState([]),[i,s]=X.useState([]),[d,v]=X.useState({}),[p,k]=X.useState(!1),c=X.useRef(v);X.useEffect(()=>{c.current=v},[v]);const b=async C=>{if(C.preventDefault(),C.stopPropagation(),a(!1),p){ut("Please wait for the previous import to finish.","error");return}const[z,A]=await Qt(C.dataTransfer.files);n([...l,...z]),s([...i,...A])},o=async C=>{if(p){C.target.value="",ut("Please wait for the previous import to finish.","error");return}const[z,A]=await Qt(Array.from(C.target.files));n([...l,...z]),s([...i,...A]),C.target.value=""},m=(C,z)=>{n(A=>{const W=[...A];return z!==void 0?W[C].files.splice(z,1):W.splice(C,1),W})},u=C=>{s(z=>{if(C===void 0)return[];const A=[...z];return A.splice(C,1),A})},S=async()=>{if(p){ut("Please wait for the previous import to finish.","error");return}k(!0),await br({setLoadings:c,zips:l,rawFiles:i,keepTitles:w}),k(!1)};return e.jsxs("div",{className:mt("wptb-v2-page-content-main wptb-v2-import-page",{"wptb-v2-import-page-has-files":l.length>0||i.length>0}),children:[e.jsxs("div",{className:"wptb-v2-import-page-main-area",children:[e.jsxs("div",{className:"wptb-v2-import-page-file-area",children:[e.jsxs("div",{className:"wptb-v2-import-page-nav",children:[e.jsx("h3",{children:"Pick files"}),e.jsx("button",{type:"button",className:"",onClick:()=>T("plugin"),children:"Import from plugin"})]}),e.jsxs("div",{className:mt("wptb-v2-import-page-dropzone",{"wptb-v2-import-page-dropzone-dragover":B}),onDragOver:C=>{a(!0),C.preventDefault(),C.stopPropagation()},onDragLeave:()=>a(!1),onDrop:b,children:[e.jsx("p",{className:"wptb-v2-import-page-dropzone-text",children:"Drag and drop your files here"}),e.jsx("p",{className:"wptb-v2-import-page-dropzone-types",children:"(csv, xml, zip)"}),e.jsx("div",{className:"wptb-v2-divider",children:"or"}),e.jsxs("label",{children:["Browse files",e.jsx("input",{type:"file",accept:".csv, .xml, .zip",onChange:o,multiple:!0})]})]})]}),(l.length>0||i.length>0)&&e.jsxs("div",{className:"wptb-v2-import-page-preview",children:[e.jsxs("h3",{children:["To be imported",e.jsx("button",{type:"button",title:"Clear Files",onClick:()=>{n([]),s([])},children:Ft})]}),i.length>0&&e.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[e.jsxs("p",{children:["Single tables",!p&&e.jsx("button",{type:"button",onClick:()=>u(),children:Bt})]}),e.jsx("ul",{children:i.map((C,z)=>e.jsxs("li",{children:[C.name,e.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[te(d[z]),!p&&e.jsx("button",{type:"button",onClick:()=>u(z),children:Bt})]})]},`${C.name}_${z}`))})]}),l.map((C,z)=>e.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[e.jsxs("p",{children:[C.name,!p&&e.jsx("button",{type:"button",onClick:()=>m(z),children:Bt})]}),e.jsx("ul",{children:C.files.map((A,W)=>e.jsxs("li",{children:[A.object.name,e.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[te(d[`${z}_${W}`]),!p&&e.jsx("button",{type:"button",onClick:()=>m(z,W),children:Bt})]})]},`${A.object.name}_${W}`))})]},C.name))]})]}),e.jsxs("div",{className:"wptb-v2-import-page-form",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:w,onChange:()=>h(!w)}),e.jsx("p",{children:"Preserve table titles"})]}),e.jsxs("button",{type:"button",onClick:S,disabled:p,children:[p?e.jsx(Pe,{}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:e.jsx("path",{fill:"currentColor",d:"M9 6c0-1.6.8-3 2-4h-1c-3.9 0-7 .9-7 2c0 1 2.6 1.8 6 2m3.8 4.8c-.9.1-1.9.2-2.8.2c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-2c-.9.7-1.9 1-3 1c-.4 0-.8-.1-1.2-.2M10 15c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-3c0 1.1-3.1 2-7 2m0-5h1c-1-.7-1.7-1.8-1.9-3C5.7 6.9 3 6 3 5v3c0 1.1 3.1 2 7 2m4 0c2.2 0 4-1.8 4-4s-1.8-4-4-4s-4 1.8-4 4s1.8 4 4 4m-1-4V3h2v3h2l-3 3l-3-3z"})}),"Import"]})]})]})};class _r{constructor(B){It(this,"iframe");It(this,"tablesToImport",[]);It(this,"totalTables",0);It(this,"importedShortcodes",[]);const a=document.getElementById(B);if(!a)throw new Error("Iframe container not found");a.innerHTML="",this.iframe=document.createElement("iframe"),a.appendChild(this.iframe)}async start(){const B=await this.postJSON(WPTB_CFG.ADMIN_URL,{action:"import_tables",import_plugin_name:"table-press",security_code:WPTB_CFG.SECURITY_CODE});if(Array.isArray(B)&&B[0]==="success"&&Array.isArray(B[1]))this.tablesToImport=B[1],this.totalTables=this.tablesToImport.length,await this.importNext();else{const a=Array.isArray(B)?B[1]:"Unknown error";ut(a,"error")}}async importNext(){if(!this.tablesToImport.length)return;const[B,a]=this.tablesToImport.shift();this.importedShortcodes.push([B]);const w=`${WPTB_CFG.IMPORT_IFRAME_URL}&_wpnonce=${WPTB_CFG.SECURITY_CODE}&shortcode=${B}`;this.iframe.src=w,await this.waitForIframeLoad(),await this.adjustPageSize(),await this.saveTable(a,B);const h=(this.totalTables-this.tablesToImport.length)/this.totalTables*100;this.updateProgress(h),h===100?ut("Import completed successfully","success"):await this.importNext()}async saveTable(B,a){const w=this.iframe.contentDocument,h=w.querySelector(".tablepress-table-name"),l=(h==null?void 0:h.textContent)??"",i=w.querySelector("table.tablepress").outerHTML,s={action:"save_table",title:l,content:i,security_code:WPTB_CFG.SECURITY_CODE},d=await this.postJSON(WPTB_CFG.ADMIN_URL,s);if(d[0]==="saved"&&d[1])return this.saveTable(B,a);d[0]==="edited"&&d[1]&&this.importedShortcodes[this.importedShortcodes.length-1].push(`[wptb id=${d[1]}]`)}async adjustPageSize(){const a=this.iframe.contentDocument.querySelector(".dataTables_length select");if(!a)return;const w=Array.from(a.options).reduce((h,l)=>Number(h.value)>Number(l.value)?h:l);a.value=w.value,a.dispatchEvent(new Event("change"))}updateProgress(B){const a=document.querySelector(".import-progress");a&&(a.style.width=`${B}%`)}waitForIframeLoad(){return new Promise(B=>{this.iframe.onload=()=>B()})}async postJSON(B,a){const w=await fetch(`${B}?action=${a.action}`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)});if(!w.ok)throw new Error(`Request failed ${w.status}`);return w.json()}}const wr=({setActiveTab:T})=>{const[B,a]=X.useState(!1),w=async()=>{a(!0),await new _r("wptb-v2-import-plugin-iframe").start(),a(!1)};return e.jsxs("div",{className:"wptb-v2-import-page wptb-v2-import-page-plugin",children:[e.jsx("div",{id:"wptb-v2-import-plugin-iframe"}),e.jsxs("div",{className:"wptb-v2-import-page-nav",children:[e.jsx("h3",{children:"Select a plugin"}),e.jsx("button",{type:"button",className:"",onClick:()=>T("file"),children:"Import from file"})]}),e.jsx("div",{className:"wptb-v2-import-page-plugin-main",children:e.jsxs("button",{type:"button",onClick:w,children:[B?Et:null,"Import from Tablepress"]})})]})},yr=({setPage:T})=>{const[B,a]=X.useState("file");return e.jsxs("div",{className:"wptb-v2-page",children:[e.jsx(Ot,{setPage:T,page:"import"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h3",{children:"Import Table"}),e.jsxs("div",{className:"wptb-v2-page-content-top-tabs",children:[e.jsx("button",{className:mt("wptb-v2-page-content-top-tabs-button",{"wptb-v2-page-content-top-tabs-button-active":B==="file"}),onClick:()=>a("file"),children:"File"}),e.jsx("button",{className:mt("wptb-v2-page-content-top-tabs-button",{"wptb-v2-page-content-top-tabs-button-active":B==="plugin"}),onClick:()=>a("plugin"),children:"Plugin"})]})]}),B==="file"&&e.jsx(vr,{setActiveTab:a}),B==="plugin"&&e.jsx(wr,{setActiveTab:a})]})]})},xr=({onSelect:T,onAllSelect:B,apiData:a,searchTxt:w,setSearch:h,items:l,sorting:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"wptb-v2-export-page-header",children:[e.jsx("h2",{children:"All Tables"}),e.jsxs("div",{className:"wptb-v2-export-page-search",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),e.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),e.jsx("input",{type:"search",placeholder:"Search...",value:w,onChange:i=>h(i.target.value)})]})]}),e.jsxs("p",{className:"wptb-pagination-info",children:["Showing ",e.jsx("b",{children:a.page_start})," to ",e.jsx("b",{children:a.page_end})," of"," ",e.jsx("b",{children:a.total_count})," entries"]}),e.jsx(he,{onSelect:T,onAllCheck:B,sorting:n,isLoading:a.loading,items:l,columns:["title","modified","id"],checkbox:!0})]}),kr=({onUnSelect:T,onAllUnSelect:B,items:a})=>{const w=ue("modified","desc"),[h,l]=X.useState(""),[n,i]=X.useState(a);X.useEffect(()=>{i(a)},[a]),X.useEffect(()=>{if(h==="")return i(a);const d=a.filter(v=>v.title.toLowerCase().includes(h.toLowerCase()));i(d)},[h,a]);const s=w[0];return X.useEffect(()=>i(d=>(s.order==="asc"?d.sort((v,p)=>v[s.by].toString().localeCompare(p[s.by].toString())):d.sort((v,p)=>p[s.by].toString().localeCompare(v[s.by].toString())),[...d])),[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"wptb-v2-export-page-header",children:[e.jsx("h2",{children:"To Export"}),e.jsxs("div",{className:"wptb-v2-export-page-search",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),e.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),e.jsx("input",{type:"search",placeholder:"Search...",value:h,onChange:d=>l(d.target.value)})]})]}),e.jsx(he,{onSelect:T,onAllCheck:B,sorting:w,items:n,columns:["title","modified","id"],checkbox:!0,checked:!0,noItemsMessage:"No tables selected"})]})},Gt=document.createElement("a"),Sr=async(T,B)=>{new FormData().append("ids",T);try{const w=new FormData;w.append("nonce",WPTB_CFG.EXPORT_KEY),w.append("action","wptb_table_export_main_export"),w.append("ids",JSON.stringify(T.split(","))),w.append("export_type",B.toLocaleUpperCase());const h=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:w});let l,n="";if(h.headers.get("content-type")==="application/octet-stream"){const d=h.headers.get("content-disposition"),p=new RegExp(/filename="(.+\..+)"/,"g").exec(d||"");if(p===null)throw new Error("Invalid file name header!");n=p[1],l=await h.blob()}else l=await h.json();const s=window.URL.createObjectURL(l);Gt.href=s,Gt.download=n,Gt.click(),window.URL.revokeObjectURL(s),ut('File downloaded as "'+n+'"',"success")}catch(w){ut(w.message||"Something went wrong","error")}},Cr={xml:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"XML:"})," an exact copy of your tables will be exported, ideal for backing up and sharing your tables with your other WordPress sites that uses WP Table Builder."]}),csv:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"CSV:"})," only text content of your tables will be exported, ideal for usage within other apps/plugins."]})},jr=({setPage:T})=>{const B=X.useRef(),[a,w]=X.useState(1),h=ue("modified","desc"),[l,n]=X.useState(""),[i,s]=X.useState([]),[d,v]=X.useState(""),[p,k]=X.useState("xml"),[c,b]=X.useState(!1),[o,m,u]=fe({page:a,search:l,sort:h[0],abortCtrl:B.current,skipTables:d});X.useEffect(()=>{s(o.posts)},[o.posts]);const[S,C]=X.useState([]),z=f=>{const E=d+","+f.id;v(E.replace(/^,/,"")),C([...S,f]),s(i.filter(G=>G.id!==f.id)),i.length<=1&&u()},A=f=>{C(S.filter(G=>G.id!==f.id)),s([...i,f]);let E=d.replace(f.id.toString(),"");E=E.replace(/,,/,","),E=E.replace(/(^,)|(,$)/,""),v(E)},W=()=>{if(!i.length)return;const f=[...S];let E=d;i.forEach(G=>{f.push(G),E=E+","+G.id}),E=E.replace(/^,/,""),C(f),v(E),u()},N=()=>{S.length&&(C([]),v(""),s([...i,...S]))},x=()=>{if(!c){if(!d){ut("No tables selected","error");return}b(!0),Sr(d,p).then(()=>{b(!1),N()})}};return e.jsxs("div",{className:"wptb-v2-page",children:[e.jsx(Ot,{setPage:T,page:"export"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsx("div",{className:"wptb-v2-page-content-top",children:e.jsx("h3",{children:"Export Table"})}),e.jsxs("div",{className:"wptb-v2-export-page",children:[e.jsxs("div",{className:"wptb-v2-export-page-unselected",children:[e.jsx(xr,{onSelect:z,onAllSelect:W,apiData:o,setSearch:n,searchTxt:l,items:i,sorting:h}),e.jsx(De,{apiData:o,setPage:w})]}),e.jsxs("div",{className:"wptb-v2-export-page-exchange",children:[e.jsx("button",{type:"button",onClick:W,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),e.jsx("path",{fill:"currentColor",d:"m15.06 5.283l5.657 5.657a1.5 1.5 0 0 1 0 2.12l-5.656 5.658a1.5 1.5 0 0 1-2.122-2.122l3.096-3.096H4.5a1.5 1.5 0 0 1 0-3h11.535L12.94 7.404a1.5 1.5 0 0 1 2.122-2.121Z"})]})})}),e.jsx("button",{type:"button",onClick:N,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),e.jsx("path",{fill:"currentColor",d:"M3.283 10.94a1.5 1.5 0 0 0 0 2.12l5.656 5.658a1.5 1.5 0 1 0 2.122-2.122L7.965 13.5H19.5a1.5 1.5 0 0 0 0-3H7.965l3.096-3.096a1.5 1.5 0 1 0-2.122-2.121z"})]})})})]}),e.jsxs("div",{className:"wptb-v2-export-page-selected",children:[e.jsx(kr,{onUnSelect:A,onAllUnSelect:N,items:S}),e.jsxs("div",{className:"wptb-v2-export-page-form",children:[e.jsx("p",{children:"Format:"}),e.jsxs("select",{value:p,onChange:f=>k(f.target.value),children:[e.jsx("option",{value:"xml",children:"XML"}),e.jsx("option",{value:"csv",children:"CSV"})]}),e.jsx(ce,{content:Cr[p],className:"wptb-v2-export-page-form-info",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m-1-7v2h2v-2zm2-1.645A3.502 3.502 0 0 0 12 6.5a3.5 3.5 0 0 0-3.433 2.813l1.962.393A1.5 1.5 0 1 1 12 11.5a1 1 0 0 0-1 1V14h2z"})})}),e.jsxs("button",{type:"button",disabled:c,onClick:x,children:[c?e.jsx(Zt,{}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:e.jsx("path",{fill:"currentColor",d:"M74.34 85.66a8 8 0 0 1 11.32-11.32L120 108.69V24a8 8 0 0 1 16 0v84.69l34.34-34.35a8 8 0 0 1 11.32 11.32l-48 48a8 8 0 0 1-11.32 0ZM240 136v64a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h52.4a4 4 0 0 1 2.83 1.17L111 145a24 24 0 0 0 34 0l23.8-23.8a4 4 0 0 1 2.8-1.2H224a16 16 0 0 1 16 16m-40 32a12 12 0 1 0-12 12a12 12 0 0 0 12-12"})}),"Export"]})]})]})]})]})]})},Er=T=>typeof T=="number"||parseInt(T).toString()===T,Tr=({table:T,setPage:B})=>{const a=Ue(),[w,h]=X.useState(!1),[l,n]=X.useState(T);X.useEffect(()=>{if(n(T),a(We({isSaving:!1,activeBlock:void 0,timeTravel:{lastSaved:/[^0-9]/.test(T)?void 0:0,cursor:0,total:0}})),!Er(T)){if(!Ut.getState().table[T]){history.replaceState(null,"","?page=wptb"),B("tables");return}h(!0);return}h(!1);const d=new AbortController;return Dt(`/v1/table?id=${T}`,{signal:d.signal}).then(v=>{if(!v.table){ut("Table not found","error",5e3),history.replaceState(null,"","?page=wptb"),B("tables");return}const p=qt(v.table);p.title=v.name,p.id=T,p.tags=v.tags,p.is_template=v.is_template,Ut.dispatch(oe({id:T,table:p})),h(!0)}).catch(v=>null),()=>d.abort()},[T,B,a]);const i=([d,v])=>{d==="saved"&&(n(v.toString()),a(Ge({oldId:T,newId:v.toString()})),history.replaceState(null,"","?page=wptb-builder&table="+v))},s=()=>{if(history.length>2){history.back();return}B("tables")};return e.jsx(Me,{id:l,isLoaded:w,onSave:i,onClose:s})},Ir=()=>{const[T,B]=X.useState(!1),[a,w]=X.useState(WPTB_CFG.SETTINGS.general||{}),h=s=>{var d;if((d=a.allowed_roles)!=null&&d.includes(s)){const v=a.allowed_roles.filter(p=>p!==s);w({...a,allowed_roles:v})}else{const v=[...a.allowed_roles||[],s];w({...a,allowed_roles:v})}},l=async()=>{if(!T){B(!0);try{const s=new FormData;s.append("nonce",WPTB_CFG.SETTINGS.nonce.general),s.append("action","wp_table_builder_settings"),s.append("options",JSON.stringify(a));const d=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:s}),v=await d.json();if(!d.ok){ut(v.message||"Something went wrong","error");return}if(v.error){ut(v.error,"error");return}ut(v.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.general=a}catch(s){console.log(s)}finally{B(!1)}}},n=()=>{w(WPTB_CFG.SETTINGS.general||{})},i=WPTB_CFG.SETTINGS.all_roles||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"wptb-v2-general-settings wptb-v2-settings-area",children:[e.jsxs("div",{className:"wptb-v2-setting-group",children:[e.jsx("h3",{children:"Allowed User Roles"}),e.jsx("div",{className:"wptb-v2-setting-group-items",children:Object.keys(i).map(s=>{var d;return e.jsx(St,{label:i[s].name,checked:(d=a.allowed_roles)==null?void 0:d.includes(s),onChange:()=>h(s)},s)})})]}),e.jsxs("div",{className:"wptb-v2-setting-group",children:[e.jsx("h3",{children:"Table Settings"}),e.jsxs("div",{className:"wptb-v2-setting-group-items",children:[e.jsx(St,{label:"Show edit link in frontend",checked:!!a.allow_edit_link_frontend,onChange:()=>w({...a,allow_edit_link_frontend:!a.allow_edit_link_frontend})}),e.jsx(St,{label:"Give credits to WP Table Builder",checked:!!a.give_credits_to_wp_table_builder,onChange:()=>w({...a,give_credits_to_wp_table_builder:!a.give_credits_to_wp_table_builder})}),e.jsx(St,{label:"Restrict users access to own tables",checked:!!a.restrict_users_to_their_tables,onChange:()=>w({...a,restrict_users_to_their_tables:!a.restrict_users_to_their_tables})}),e.jsx(St,{label:"Disable Emoji to Image conversion",checked:!!a.emoji_image_conversion_disabled_status,onChange:()=>w({...a,emoji_image_conversion_disabled_status:!a.emoji_image_conversion_disabled_status})}),e.jsx(St,{label:"Disable theme styles",checked:!!a.disable_theme_styles_for_all,onChange:()=>w({...a,disable_theme_styles_for_all:!a.disable_theme_styles_for_all})})]})]}),e.jsxs("div",{className:"wptb-v2-setting-group",children:[e.jsx("h3",{children:"Plugin Options"}),e.jsxs("div",{className:"wptb-v2-setting-group-items",children:[e.jsx(de,{rtl:!0,label:"Take over the entire screen in builder",checked:!!a.take_over_entire_screen,onChange:s=>w({...a,take_over_entire_screen:s})}),e.jsx(zt,{label:"Sidebar Location",value:a.panel_location||"left",onChange:s=>w({...a,panel_location:s}),options:[{value:"left",label:"Left"},{value:"right",label:"Right"}]}),e.jsx(St,{label:"Enable Version Sync",checked:!!a.enable_version_sync,onChange:()=>w({...a,enable_version_sync:!a.enable_version_sync})})]})]})]}),e.jsxs("div",{className:"wptb-v2-setting-btns",children:[e.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:n,disabled:T,children:"Revert"}),e.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:l,disabled:T,children:[T&&Et," Save"]})]})]})},Ar=()=>{var n;const[T,B]=X.useState(((n=WPTB_CFG.SETTINGS)==null?void 0:n.table_style)||""),[a,w]=X.useState(!1),h=async()=>{if(!a){w(!0);try{const i=new FormData;i.append("nonce",WPTB_CFG.SETTINGS.nonce.styles),i.append("action","wptb-general-styles"),i.append("styles",T);const s=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:i}),d=await s.json();if(!s.ok){ut(d.message||"Something went wrong","error");return}if(d.error){ut(d.error,"error");return}ut(d.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.table_style=T}catch(i){console.log(i)}finally{w(!1)}}},l=()=>{B(WPTB_CFG.SETTINGS.table_style||"")};return e.jsxs("div",{children:[e.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-table-settings",children:[e.jsx("p",{children:"These styles will be applied to all tables."}),e.jsx(He,{label:"Custom CSS",rows:10,value:T,onChange:B})]}),e.jsxs("div",{className:"wptb-v2-setting-btns",children:[e.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:l,disabled:a,children:"Revert"}),e.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:h,disabled:a,children:[a&&Et," Save"]})]})]})},Nr=()=>{var v,p;const[T,B]=X.useState(!1),[a,w]=X.useState(!1),[h,l]=X.useState(((v=WPTB_CFG.SETTINGS)==null?void 0:v.lazy_load)||{enabled:!1}),[n,i]=X.useState(WPTB_CFG.SETTINGS.lazy_load_pro),s=async()=>{if(!T){B(!0);try{const k=new FormData;k.append("nonce",WPTB_CFG.SETTINGS.nonce.lazy_load),k.append("action","wptb_lazy_load");const c={...h,...n,visibilityPercentage:parseInt(n.visibilityPercentage).toString(),iconSize:parseInt(n.iconSize).toString(),imageLoadAnimationSpeed:parseInt(n.imageLoadAnimationSpeed).toString(),imageLoadAnimationPerspective:parseInt(n.imageLoadAnimationPerspective).toString(),iconAnimationOptions:{none:"none",heartBeat:"heartbeat",rotate:"rotate",flip:"flip",jump:"jump"},imageLoadAnimationOptions:{none:"none",slideIn:"slide in",growSling:"grow sling",flash:"flash",flip:"flip"}};k.append("settings",JSON.stringify(c));const b=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:k}),o=await b.json();if(!b.ok){ut(o.message||"Something went wrong","error");return}if(o.error){ut(o.error,"error");return}ut(o.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.lazy_load=h,WPTB_CFG.SETTINGS.lazy_load_pro=n}catch(k){console.log(k)}finally{B(!1)}}},d=()=>{l(WPTB_CFG.SETTINGS.lazy_load),i(WPTB_CFG.SETTINGS.lazy_load_pro)};return e.jsxs("div",{children:[e.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-lazy-load-settings",children:[e.jsxs("div",{children:[e.jsx(Pt,{title:"Enable Lazy Load",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:e.jsx(de,{label:"Enable Lazy Loading Images",checked:!!h.enabled,onChange:k=>l({enabled:k})})}),e.jsxs("div",{className:"wptb-v2-lazy-load-preview",children:[e.jsx("h4",{children:"Preview"}),e.jsxs("div",{className:"wptb-v2-lazy-load-preview-image",children:[e.jsx("img",{src:WPTB_CFG.PLUGIN_URL+"/v2/assets/images/wptb-logo.png",className:`${n.imageLoadAnimation} to-${n.imageLoadAnimationDirection}`,style:{"--transition-speed":1/Number(n.imageLoadAnimationSpeed)+"s"},"data-visible":a}),(n==null?void 0:n.imageLoadAnimation)==="flash"&&e.jsx("div",{style:{background:n.flashColor}})]}),e.jsxs("div",{className:"wptb-v2-lazy-load-preview-btns",children:[e.jsx("button",{type:"button",className:"wptb-v2-lazy-load-preview-reset",disabled:!a,onClick:()=>w(!1),children:"Reset"}),e.jsx("button",{type:"button",className:"wptb-v2-lazy-load-preview-reload",disabled:a,onClick:()=>w(!0),children:"Load Image"})]}),e.jsxs("div",{className:"wptb-v2-lazy-load-notice",children:[e.jsx("h5",{children:"important:"}),e.jsx("p",{children:"After enable, if you are getting any conflicts with your third party lazy load plugin, please whitelist table image elements with wptb-image-element-target class name from plugin settings."})]})]})]}),e.jsxs("div",{className:"wptb-v2-lazy-load-pro",children:[e.jsx(Ze,{name:"global.lazy_load",props:n,setProps:i}),e.jsxs(qe,{name:"global.lazy_load",children:[e.jsxs(Pt,{title:"General Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[e.jsx(Wt,{label:"Visibility Percentage",value:n==null?void 0:n.visibilityPercentage,allowedUnits:{"%":{}}}),e.jsx(Mt,{label:"Background Color",value:n==null?void 0:n.backgroundColor})]}),e.jsxs(Pt,{title:"Icon Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[e.jsx(Ve,{label:"Icon",value:(p=n==null?void 0:n.iconName)==null?void 0:p.name}),e.jsx(Mt,{label:"Icon Color",value:n==null?void 0:n.iconColor}),e.jsx(Wt,{label:"Icon Size",value:n==null?void 0:n.iconSize}),e.jsx(zt,{label:"Icon Animation",value:n==null?void 0:n.iconAnimation,options:[{value:"none",label:"None"},{value:"heartbeat",label:"Heartbeat"},{value:"rotate",label:"Rotate"},{value:"flip",label:"Flip"},{value:"jump",label:"Jump"}]})]}),e.jsxs(Pt,{title:"Image Load Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[e.jsx(zt,{label:"Animation",value:n==null?void 0:n.imageLoadAnimation,options:[{value:"none",label:"None"},{value:"slide-in",label:"Slide In"},{value:"grow-sling",label:"Grow Sling"},{value:"flash",label:"Flash"},{value:"flip",label:"Flip"}]}),(n==null?void 0:n.imageLoadAnimation)==="slide-in"&&e.jsx(zt,{label:"Direction",value:n==null?void 0:n.imageLoadAnimationDirection,options:[{value:"left",label:"To Left"},{value:"right",label:"To Right"},{value:"top",label:"To Top"},{value:"bottom",label:"To Bottom"}]}),(n==null?void 0:n.imageLoadAnimation)==="flash"&&e.jsx(Mt,{label:"Flash Color",value:n==null?void 0:n.flashColor}),(n==null?void 0:n.imageLoadAnimation)==="flip"&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{label:"Direction",value:n==null?void 0:n.imageLoadAnimationDirection,options:[{value:"left",label:"To Left"},{value:"right",label:"To Right"}]}),e.jsx(Wt,{label:"Perspective",value:n==null?void 0:n.imageLoadAnimationPerspective})]}),e.jsx(Ht,{label:"Speed",value:Number(n==null?void 0:n.imageLoadAnimationSpeed)||5,max:10})]})]})]})]}),e.jsxs("div",{className:"wptb-v2-setting-btns",children:[e.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:d,disabled:T,children:"Revert"}),e.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:s,disabled:T,children:[T&&Et," Save"]})]})]})};let xt=null;const zr=T=>{const B={},a=document.createElement("div");return a.innerHTML=T,a.querySelectorAll("h4").forEach(h=>{var n,i;const l=(n=h.textContent)==null?void 0:n.trim();l&&(B[l]=((i=h.nextElementSibling)==null?void 0:i.outerHTML)||"")}),B},Or=()=>{const[T,B]=X.useState(xt===null),[a,w]=X.useState(!1),[h,l]=X.useState(xt),[n,i]=X.useState((xt==null?void 0:xt.version)||"");X.useEffect(()=>{if(xt!==null){B(!1),l(xt),i(xt.version);return}fetch("https://api.wordpress.org/plugins/info/1.0/wp-table-builder.json").then(d=>d.json()).then(d=>{if(xt)return;const v={};Object.keys(d.versions).reverse().slice(1,6).forEach(k=>{v[k]=d.versions[k]}),xt={version:d.version,versions:v,changelog:zr(d.sections.changelog),latest:Object.keys(d.versions).at(-2)},l(xt),i(xt.version)}).finally(()=>{B(!1)})},[]);const s=async()=>{if(a)return;w(!0);const d=new FormData;d.append("action","version_control_manager"),d.append("nonce",WPTB_CFG.SETTINGS.nonce.version),d.append("version",n);try{const v=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:d}),p=await v.json();if(!v.ok){ut(p.message||"Something went wrong","error");return}if(p.error){ut(p.error,"error");return}ut(p.message||"Settings saved successfully","success"),window.location.reload()}catch{ut("Something went wrong","error")}w(!1)};return e.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-version-settings",children:[T||!h?e.jsx("div",{className:"wptb-v2-loading",children:e.jsx(Zt,{})}):e.jsxs("div",{className:"wptb-v2-version-settings-content",children:[e.jsxs("div",{className:"wptb-v2-version-settings-control",children:[e.jsx("p",{className:"wptb-v2-version-settings-encourage",children:"If you are having issues with the current version of the plugin, you can rollback to a previous version."}),e.jsxs("div",{className:"wptb-v2-version-settings-info",children:[e.jsx("div",{children:"Current Version"}),e.jsxs("div",{children:[e.jsx("div",{className:mt({"wptb-v2-version-settings-info-success":h.latest===WPTB_CFG.SETTINGS.version,"wptb-v2-version-settings-info-warning":h.latest!==WPTB_CFG.SETTINGS.version})}),e.jsx("span",{children:WPTB_CFG.SETTINGS.version})]}),e.jsx("div",{children:"Latest Version"}),e.jsxs("div",{children:[e.jsx("div",{className:mt({"wptb-v2-version-settings-info-success":h.latest===WPTB_CFG.SETTINGS.version,"wptb-v2-version-settings-info-warning":h.latest!==WPTB_CFG.SETTINGS.version})}),e.jsx("span",{children:h.latest})]}),e.jsx("div",{children:"Install"}),e.jsx("div",{children:e.jsx("select",{value:n,onChange:d=>i(d.target.value),children:Object.keys(h.versions).map(d=>e.jsx("option",{value:d,children:d},d))})})]}),e.jsxs("div",{className:"wptb-v2-version-settings-warning",children:[e.jsx("h5",{children:"warning:"}),e.jsx("p",{children:"Previous versions may be unstable and unsecure, continue with your own risk and take a backup."})]})]}),e.jsxs("div",{className:"wptb-v2-version-settings-log",children:[e.jsx("h4",{children:n}),e.jsx("div",{dangerouslySetInnerHTML:{__html:h.changelog[n]||""}})]})]}),e.jsx("div",{className:"wptb-v2-setting-btns",children:e.jsxs("button",{type:"button",className:"wptb-btn-save",disabled:a,onClick:s,children:[a&&Et," Install ",n]})})]})},ee={general:Ir,tableStyles:Ar,lazyLoad:Nr,version:Or},Rr=({setPage:T})=>{const[B,a]=X.useState("general"),[w,h]=X.useState(!1),[l,n]=X.useState(!1),i=async()=>{if(n(!1),!w){h(!0);try{const s=new FormData;s.append("nonce",WPTB_CFG.SETTINGS.nonce.general),s.append("action","wptb_toggle_legacy_builder");const d=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:s}),v=await d.json();if(!d.ok){ut(v.message||"Something went wrong","error");return}if(v.error){ut(v.error,"error");return}ut(v.message||"Settings saved successfully","success"),window.location.replace(window.location.href.replace("wptb-settings","wp-table-builder-settings"))}catch(s){console.log(s)}finally{h(!1)}}};return e.jsxs("div",{className:"wptb-v2-page wptb-v2-settings-page",children:[e.jsx(Ot,{setPage:T,page:"settings"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h2",{children:Ct("WP Table Builder")}),e.jsxs("button",{type:"button",className:"wptb-v2-switch-builder",disabled:w,onClick:()=>n(!0),children:[w&&Et," Switch to Legacy Builder"]})]}),e.jsxs("div",{className:"wptb-v2-page-content-main",children:[e.jsxs("div",{className:"wptb-v2-settings-tabs",children:[e.jsx("button",{className:B==="general"?"wptb-v2-active":"",onClick:()=>a("general"),children:"General"}),e.jsx("button",{className:B==="tableStyles"?"wptb-v2-active":"",onClick:()=>a("tableStyles"),children:"Table Styles"}),e.jsx("button",{className:B==="lazyLoad"?"wptb-v2-active":"",onClick:()=>a("lazyLoad"),children:"Lazy Load"}),e.jsx("button",{className:B==="version"?"wptb-v2-active":"",onClick:()=>a("version"),children:"Version Control"})]}),e.jsx("div",{children:ee[B]&&X.createElement(ee[B])})]})]}),l&&e.jsxs(ae,{onClose:()=>n(!1),title:"Are you sure to switch?",icon:ne,children:[e.jsx("p",{children:"Are you sure you want to miss out on the new features and next generation experience? You can always switch back to the legacy builder."}),e.jsxs("div",{className:"wptb-v2-modal-actions",children:[e.jsx("button",{type:"button",onClick:i,children:"Yes"}),e.jsx("button",{type:"button",onClick:()=>n(!1),children:"No"})]})]})]})},Br={tables:ir,builder:Tr,create:cr,import:yr,export:jr,settings:Rr},re=()=>{var a,w;const T=new URLSearchParams(window.location.search),B={};for(const[h,l]of T)B[h]=l;return B.page=((w=(a=B.page)==null?void 0:a.replace("wptb",""))==null?void 0:w.substring(1))||"tables",B};function Pr(){const[T,B]=X.useState({}),a=(w,h)=>{h=h||{};const n={page:w==="tables"?"wptb":`wptb-${w}`};for(const s in h){const d=h[s];d&&(n[s]=d)}const i=new URLSearchParams(n).toString();window.history.pushState(null,"","?"+i),h.page=w,B(h)};return X.useEffect(()=>{const w=()=>{const h=re();B(h)};return B(re()),window.addEventListener("popstate",w),()=>{window.removeEventListener("popstate",w)}},[]),[T,a]}const Lr=()=>{const[T,B]=Pr(),a=Br[T.page];if(a)return e.jsx(a,{...T,setPage:B})};document.addEventListener("DOMContentLoaded",()=>{const T=document.querySelector("#wptb-app-root");!T||typeof WPTB>"u"||$e(T).render(e.jsx(Ke.StrictMode,{children:e.jsxs(Ye,{store:Ut,children:[e.jsx(Lr,{}),e.jsx(Je,{}),e.jsx(Xe,{})]})}))});
