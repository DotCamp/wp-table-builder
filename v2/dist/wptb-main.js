import{j as d,c as mt,r as nt,W as ce,T as Tt,R as Dt,E as Gt,n as vt,C as he,M as ue,a as Lt,b as de,F as Ut,D as Kt,s as fe,p as Bt,v as pe,d as Rt,e as Vt,f as jt,g as $t,u as Mt,t as me,h as St,i as Wt,k as ge,l as be,m as zt,U as _e,o as ve,P as Yt,q as we,w as ye,x as Xt,y as xe,z as ke,B as Ce,A as Se,G as je,H as Ee,I as Ae,N as ze,J as Ie}from"./assets/index-C1RBpECS.js";const Te=wp.i18n,Et=O=>Te.__(O,"wp-table-builder"),Ot=({setPage:O,page:H})=>d.jsxs("div",{className:"wptb-v2-nav",children:[d.jsxs("h2",{className:"wptb-v2-logo",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"0.97em",height:"1em",viewBox:"0 0 32 33",children:[d.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 15H5v-1h4zm8-7h-4V7h4zm3 7h-9v-1h9zm8-7h-9V7h9z",clipRule:"evenodd"}),d.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 9V3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1h-7v4h-1v-7H3v9h9v1H3a1 1 0 0 1-1-1v-9a1 1 0 0 1 1-1zm1-6h18v9h-7v-2a1 1 0 0 0-1-1H11z",clipRule:"evenodd"}),d.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.714 26.286L20.571 28h.858v-.888c0-.34.296-.976.602-1.54c.14-.259.281-.502.398-.696c.154-.257.264-.427.264-.427c.246-.408.45-1.117.45-1.588v-4.046c0-.796-.605-1.445-1.364-1.48l-.065-.002a.73.73 0 0 0-.714.741v.296q0-.152-.029-.296a1.52 1.52 0 0 0-.669-.986a1.46 1.46 0 0 0-.73-.23a.78.78 0 0 0-.715.772v.296q0-.152-.028-.296a1.48 1.48 0 0 0-.676-.981a1.4 1.4 0 0 0-.724-.205a.73.73 0 0 0-.715.741v.296q0-.152-.028-.296a1.48 1.48 0 0 0-.674-.98a1.4 1.4 0 0 0-.726-.205a.73.73 0 0 0-.715.74v4.149h-.857v-2.667a1.67 1.67 0 0 0-1 .334A1.8 1.8 0 0 0 12 20v3.089c0 .478.307 1.084.686 1.365c0 0 2.743 1.956 2.743 2.658V28h3.428zm-.857-5.143v3.428h.857v-3.428zm-.857 0h-.857v3.428H18zm2.572 0v3.428h.857v-3.428zm-8.467 4.126l-.008-.006l-.008-.006a2.74 2.74 0 0 1-.781-.962A2.74 2.74 0 0 1 11 23.089V20c0-1.453 1.109-2.698 2.571-2.774v-.485c0-.927.734-1.741 1.715-1.741c.59 0 1.12.21 1.533.556q.283-.11.61-.112c.584 0 1.11.207 1.522.547q.256-.106.54-.13l.06-.006l.06.003c.572.023 1.091.24 1.499.585c.186-.07.39-.11.604-.11c1.376 0 2.429 1.146 2.429 2.482v4.046c0 .358-.074.75-.17 1.091a4.3 4.3 0 0 1-.425 1.015l-.007.012m-.008.012l-.002.003l-.01.015l-.036.058a18 18 0 0 0-.547.93a9 9 0 0 0-.39.79c-.076.18-.104.282-.114.32q-.006.029-.005.005V29h-2.476l-.239-.478l-.239.478H14.43v-1.724a2 2 0 0 0-.168-.202a9 9 0 0 0-.847-.789a23 23 0 0 0-1.283-.997l-.02-.015l-.006-.004m2.372 2.082l-.008-.014z",clipRule:"evenodd"})]}),d.jsx("span",{children:"WP Table Builder"})]}),d.jsxs("div",{children:[d.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":H==="tables"}),onClick:()=>O("tables"),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 4H4a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1M4 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm2 5h2v2H6zm5 0a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2zm-3 4H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1m-2 3H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1",clipRule:"evenodd"})}),d.jsx("span",{children:Et("Table List")})]}),d.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":H==="create"}),onClick:()=>O("create"),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"currentColor",d:"M18 14h2v3h3v2h-3v3h-2v-3h-3v-2h3zM4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4z"})}),d.jsx("span",{children:Et("Add New")})]}),d.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":H==="import"}),onClick:()=>O("import"),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm14.44 2v2h4v2h-4v2l-3-3z"})}),d.jsx("span",{children:Et("Import")})]}),d.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":H==="export"}),onClick:()=>O("export"),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm15.44 8v-2h-4v-2h4v-2l3 3z"})}),d.jsx("span",{children:Et("Export")})]})]})]}),Re=({apiData:O,setPage:H})=>{const u=S=>{!O||S<1||S>O.total_pages||S===O.current_page||H(S)};return d.jsx("div",{className:"wptb-v2-pagination",children:d.jsxs("div",{className:"wptb-v2-pagination-group",children:[d.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-disabled":O.current_page===1}),onClick:()=>u(O.current_page-1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m15 6l-6 6l6 6"})})}),O.pages.map(S=>S!==0?d.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-active":S===O.current_page}),onClick:()=>u(S),children:S},S):d.jsx("p",{className:"wptb-page-divider",children:"..."})),d.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-disabled":O.current_page===O.total_pages}),onClick:()=>u(O.current_page+1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m9 6l6 6l-6 6"})})})]})})},Oe=(O,H=2)=>{const u=[];if(O<=H*3+2){for(let l=1;l<=O;l++)u.push(l);return u}for(let l=1;l<=H;l++)u.push(l);const S=Math.ceil(O/2-H/2);u.at(-1)<S-1&&u.push(0);for(let l=0;l<H;l++)u.push(S+l);u.push(0);for(let l=1;l<=H;l++)u.push(O-H+l);return u},Ne=O=>{if(navigator.clipboard){navigator.clipboard.writeText(O);return}const H=document.createElement("textarea");H.value=O,document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H)},Jt=(O,H="asc")=>{const[u,S]=nt.useState({by:O,order:H});return nt.useMemo(()=>[u,l=>{let s="asc";u.by===l&&(s=u.order==="asc"?"desc":"asc"),S({by:l,order:s})}],[u])},Be={loading:!0,posts:[],current_page:1,page_start:"...",page_end:"...",total_count:"...",pages:[],total_pages:1},Qt=({page:O,search:H,status:u,skipTables:S,sort:l,abortCtrl:s,refetchOnSkipChange:o})=>{const[r,n]=nt.useState(Be),[w,k]=nt.useState(!1),f=(a,g)=>{if(g){let i;["id","title","date","modified"].includes(l.by||"id")?i=l.by:i="id",i!=="id"?l.order==="asc"?a.sort((p,h)=>p[i].localeCompare(h[i])):a.sort((p,h)=>h[i].localeCompare(p[i])):l.order==="asc"?a.sort((p,h)=>p[i]-h[i]):a.sort((p,h)=>h[i]-p[i])}n({...r,posts:a})},y=o?S:"";return nt.useEffect(()=>{const a=new URLSearchParams({page:O.toString(),search:H||"",status:u||"",except:S||"",...l?{sort_by:l.by,sort_order:l.order}:{}}),g=WPTB_CFG.API_BASE+"/v1/tables?"+a.toString();n(i=>({...i,current_page:O,loading:!0})),fetch(g,{signal:s==null?void 0:s.signal}).then(i=>i.json()).then(i=>{const{posts:p,current_page:h,total_pages:x,total_count:C}=i,j=(h-1)*i.per_page+1,z=j+p.length-1;n({loading:!1,posts:p,current_page:h,page_start:j,page_end:z,pages:Oe(x,2),total_pages:x,total_count:C})})},[O,H,u,l.by,l.order,y,w]),[r,f,()=>k(!w)]},te={duplicate:{icon:ce,title:"Sure to duplicate?",text:O=>`Table: <b>${O.targetTitle}</b> is set to be duplicated.<br/> Are you sure?`,className:"wptb-modal-warning",url:"duplicate"},trash:{icon:Tt,title:"Sure to trash?",text:O=>`Table: <b>${O.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash"},restore:{icon:Dt,title:"Sure to restore?",text:O=>`Table: <b>${O.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore"},delete:{icon:Tt,title:"Sure to delete?",text:O=>`Table: <b>${O.targetTitle}</b> is set to be deleted. Are you sure?<br/> It will be deleted permanently.`,className:"wptb-modal-danger",url:"delete"},trash_bulk:{icon:Tt,title:"Sure to trash?",text:(O,H)=>`<b>${H}</b> table(s) are set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash_bulk"},restore_bulk:{icon:Dt,title:"Sure to restore?",text:(O,H)=>`<b>${H}</b> table(s) are set to be restored. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore_bulk"}},Fe=async({action:O,id:H,ids:u})=>{const S=te[O].url;if(!S)return{action:O,id:H,ids:u,res:{}};try{const l=await fetch(WPTB_CFG.API_BASE+"/v1/"+S,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:H,ids:u,security_code:WPTB_CFG.SECURITY_CODE})}),s=await l.json();if(!l.ok)throw new Error(s.message||`HTTP error! Status: ${l.status}`);return{action:O,id:H,ids:u,res:s}}catch(l){return{action:O,id:H,ids:u,res:{error:l.message}}}},Pe=({apiData:O,setPage:H,isTrash:u,setTables:S,sortBy:l,sortOrder:s,setSort:o})=>{const r=nt.useRef({}),n=nt.useRef({}),[w,k]=nt.useState(""),[f,y]=nt.useState(0),[a,g]=nt.useState(null);nt.useEffect(()=>{r.current={},y(0)},[O]);const i=j=>{H("builder",{table:j})},p=()=>{f<O.posts.length?(O.posts.forEach(j=>{r.current[j.id]=!0}),y(O.posts.length)):(r.current={},y(0))},h=j=>{r.current[j]?(delete r.current[j],y(f-1)):(r.current[j]=!0,y(f+1))},x=async()=>{var c;if(!a)return;if(a.targetId){if(n.current[a.targetId])return;n.current[a.targetId]=!0}else for(const A in r.current){if(n.current[A])return;n.current[A]=r.current[A]}const j=Object.keys(r.current).map(Number);r.current={},y(0),g(null);const{action:z,id:U,ids:B,res:v}=await Fe({action:a.action,id:a.targetId,ids:j});if(B!=null&&B.length?B.forEach(A=>{delete n.current[A]}):delete n.current[U],v.error){vt(v.error,"error",0),S([...O.posts]);return}if(v.message&&vt(v.message,"success"),z==="trash"||z==="restore"||z==="delete")S([...O.posts.filter(A=>A.id!==U)]);else if(z==="trash_bulk"||z==="restore_bulk")S([...O.posts.filter(A=>!(B!=null&&B.includes(A.id)))]);else{const A=[...O.posts];(c=v.posts)==null||c.forEach(W=>{A.push(W)}),S(A,!0)}},C=a&&te[a.action];return l=l||"id",d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"wptb-v2-bulk-actions",children:[d.jsxs("select",{value:w,onChange:j=>k(j.target.value),children:[d.jsx("option",{value:"",children:"Bulk Actions"}),u?d.jsx("option",{value:"restore_bulk",children:"Restore"}):d.jsx("option",{value:"trash_bulk",children:"Delete"})]}),d.jsx("button",{type:"button",onClick:()=>f>0&&g({action:w}),children:"Apply"}),d.jsxs("p",{children:[d.jsx("b",{children:f})," items selected"]})]}),d.jsxs("table",{className:mt({"wptb-v2-table-list":!O.loading,"wptb-v2-table-loading":O.loading}),children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"30px"}}),d.jsx("col",{}),d.jsx("col",{}),d.jsx("col",{}),d.jsx("col",{})]}),d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:d.jsx("input",{type:"checkbox",checked:f===O.posts.length,onChange:p})}),d.jsxs("th",{children:["Title",d.jsx("button",{type:"button",onClick:()=>o("title"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="title"&&s==="asc","wptb-sort-btn-desc":l==="title"&&s!=="asc"})})]}),d.jsxs("th",{children:["Shortcode",d.jsx("button",{type:"button",onClick:()=>o("id"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="id"&&s==="asc","wptb-sort-btn-desc":l==="id"&&s!=="asc"})})]}),d.jsxs("th",{children:["Created",d.jsx("button",{type:"button",onClick:()=>o("date"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="date"&&s==="asc","wptb-sort-btn-desc":l==="date"&&s!=="asc"})})]}),d.jsxs("th",{children:["Last Modified",d.jsx("button",{type:"button",onClick:()=>o("modified"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="modified"&&s==="asc","wptb-sort-btn-desc":l==="modified"&&s!=="asc"})})]})]})}),d.jsx("tbody",{children:O.loading?Array(5).fill(0).map((j,z)=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("div",{})}),d.jsx("td",{children:d.jsx("div",{})}),d.jsx("td",{children:d.jsx("div",{})}),d.jsx("td",{children:d.jsx("div",{})}),d.jsx("td",{children:d.jsx("div",{})})]},z)):O.posts.length?O.posts.map(j=>d.jsxs("tr",{children:[d.jsxs("td",{children:[d.jsx("input",{type:"checkbox",checked:r.current[j.id],onChange:()=>h(j.id)}),n.current[j.id]&&d.jsx("div",{className:"wptb-v2-table-pending",children:Gt})]}),d.jsxs("td",{children:[d.jsx("p",{children:j.title||"[Untitled]"}),u?d.jsxs("div",{className:"wptb-v2-table-actions",children:[d.jsx("button",{className:"wptb-table-action-restore",type:"button",onClick:()=>g({action:"restore",targetId:j.id,targetTitle:j.title}),children:"Restore"}),d.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>g({action:"delete",targetId:j.id,targetTitle:j.title}),children:"Delete"})]}):d.jsxs("div",{className:"wptb-v2-table-actions",children:[d.jsx("button",{className:"wptb-table-action-edit",type:"button",onClick:()=>i(j.id),children:"Edit"}),d.jsx("button",{className:"wptb-table-action-duplicate",type:"button",onClick:()=>g({action:"duplicate",targetId:j.id,targetTitle:j.title}),children:"Duplicate"}),d.jsx("button",{type:"button",className:"wptb-table-action-preview",children:"Preview"}),d.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>g({action:"trash",targetId:j.id,targetTitle:j.title}),children:"Trash"})]})]}),d.jsx("td",{children:d.jsxs("div",{className:"wptb-v2-shortcode-col",children:["[wptb id=",j.id,"]",d.jsx("button",{type:"button",className:"wptb-v2-copy-btn",onClick:()=>{Ne(`[wptb id=${j.id}]`),vt("Copied to clipboard!","success")},children:he})]})}),d.jsx("td",{children:j.date}),d.jsx("td",{children:j.modified})]},j.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:5,children:d.jsx("p",{children:"No results found"})})})}),d.jsx("tfoot",{children:d.jsxs("tr",{children:[d.jsx("th",{children:d.jsx("input",{type:"checkbox",checked:f===O.posts.length,onChange:p})}),d.jsxs("th",{children:["Title",d.jsx("button",{type:"button",onClick:()=>o("title"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="title"&&s==="asc","wptb-sort-btn-desc":l==="title"&&s!=="asc"})})]}),d.jsxs("th",{children:["Shortcode",d.jsx("button",{type:"button",onClick:()=>o("id"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="id"&&s==="asc","wptb-sort-btn-desc":l==="id"&&s!=="asc"})})]}),d.jsxs("th",{children:["Created",d.jsx("button",{type:"button",onClick:()=>o("date"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="date"&&s==="asc","wptb-sort-btn-desc":l==="date"&&s!=="asc"})})]}),d.jsxs("th",{children:["Last Modified",d.jsx("button",{type:"button",onClick:()=>o("modified"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":l==="modified"&&s==="asc","wptb-sort-btn-desc":l==="modified"&&s!=="asc"})})]})]})})]}),d.jsxs("div",{className:"wptb-v2-bulk-actions",children:[d.jsxs("select",{value:w,onChange:j=>k(j.target.value),children:[d.jsx("option",{value:"",children:"Bulk Actions"}),u?d.jsx("option",{value:"restore_bulk",children:"Restore"}):d.jsx("option",{value:"trash_bulk",children:"Delete"})]}),d.jsx("button",{type:"button",onClick:()=>f>0&&g({action:w}),children:"Apply"}),d.jsxs("p",{children:[d.jsx("b",{children:f})," items selected"]})]}),C&&d.jsxs(ue,{onClose:()=>g(null),title:C.title,icon:C.icon,className:C.className,children:[d.jsx("p",{dangerouslySetInnerHTML:{__html:C.text(a,f)}}),d.jsxs("div",{className:"wptb-v2-modal-actions",children:[d.jsx("button",{type:"button",onClick:x,children:"Yes"}),d.jsx("button",{type:"button",onClick:()=>g(null),children:"No"})]})]})]})},De=({setPage:O,page_num:H,search:u,status:S,sort_by:l,sort_order:s})=>{const o=nt.useRef(),r=nt.useRef(),[n,w]=nt.useState(u),[k,f]=Qt({page:H?parseInt(H):1,search:u,status:S,sort:{by:l||"id",order:s||"desc"},abortCtrl:o.current});nt.useEffect(()=>{const g=n==null?void 0:n.trim();if(u){if(g&&g.length>0&&g.length<2)return}else if(!g||g.length<2)return;r.current&&clearTimeout(r.current),o.current&&o.current.abort(),o.current=new AbortController,r.current=setTimeout(()=>{O("tables",{search:n,status:S}),o.current=void 0,r.current=void 0},500)},[n]);const y=g=>{O("tables",{page_num:1,search:u,status:S,sort_by:g,sort_order:g===(l||"id")&&s==="asc"?"desc":"asc"})},a=S==="trash";return d.jsxs("div",{className:"wptb-v2-page",children:[d.jsx(Ot,{setPage:O,page:"tables"}),d.jsxs("div",{className:"wptb-v2-page-content",children:[d.jsxs("div",{className:"wptb-v2-page-content-top",children:[d.jsx("h3",{children:"Table List"}),d.jsxs("div",{className:"wptb-v2-search-group",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:d.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[d.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),d.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),d.jsx("input",{type:"search",placeholder:"Search...",value:n,onChange:g=>w(g.target.value)})]})]}),d.jsxs("div",{className:"wptb-v2-page-content-main",children:[d.jsxs("div",{className:"wptb-v2-table-status-btns",children:[d.jsx("button",{type:"button",className:mt({"wptb-v2-active-section":!a}),onClick:()=>{O("tables",{})},children:"ALL"}),d.jsx("button",{type:"button",className:mt({"wptb-v2-active-section":a}),onClick:()=>{O("tables",{status:"trash"})},children:"TRASH"})]}),d.jsxs("p",{className:"wptb-v2-pagination-info",children:["Showing ",d.jsx("b",{children:k.page_start})," to ",d.jsx("b",{children:k.page_end})," of"," ",d.jsx("b",{children:k.total_count})," entries"]}),d.jsx(Pe,{apiData:k,setPage:O,isTrash:a,setTables:f,setSort:y,sortBy:l,sortOrder:s}),d.jsx(Re,{apiData:k,setPage:g=>O("tables",{page_num:g,search:u,sort_by:l,sort_order:s})})]})]})]})},Le=({setPage:O})=>{const[H,u]=nt.useState(4),[S,l]=nt.useState(4),s=()=>{const o=de(H,S);O("builder",{table:o})};return d.jsxs("div",{className:"wptb-v2-create-table",children:[d.jsx("h2",{children:"Create New Table"}),d.jsxs("div",{children:[d.jsx("table",{children:d.jsx("tbody",{children:Array.from({length:H},(o,r)=>d.jsx("tr",{children:Array.from({length:S},(n,w)=>d.jsx("td",{},w))},r))})}),d.jsxs("div",{children:[d.jsx(Lt,{label:"Number of rows",min:2,max:20,value:H,onChange:u,allowOutOfRange:!0}),d.jsx(Lt,{label:"Number of columns",min:2,max:20,value:S,onChange:l,allowOutOfRange:!0}),d.jsx("button",{type:"button",className:"wptb-v2-create-btn",onClick:s,children:"Create"})]})]})]})},xt=[],Ue=({setPage:O,search:H})=>{const[u,S]=nt.useState(xt),[l,s]=nt.useState(!0),[o,r]=nt.useState(),n=nt.useRef(null);nt.useEffect(()=>{if(xt.length){s(!1),S(xt),n.current=new Ut(xt,{includeScore:!0,threshold:.3,keys:["title"]});return}let f=new AbortController;return fetch(WPTB_CFG.API_BASE+"/v1/patterns",{signal:f.signal}).then(y=>y.json()).then(y=>{if(s(!1),!xt.length){if(y.error)throw new Error(y.error);S(y.patterns),xt.push(...y.patterns),n.current=new Ut(xt,{includeScore:!0,threshold:.3,keys:["title"]})}}).catch(()=>{}).finally(()=>{f=void 0}),()=>f==null?void 0:f.abort()},[]);const w=nt.useCallback(f=>{var y;if(f==="")S(xt);else{const a=(y=n.current)==null?void 0:y.search(f),g=a==null?void 0:a.map(i=>i.item);S(g||[])}},[]);nt.useEffect(()=>{const f=H==null?void 0:H.trim();if(!f||f.length<2){S(xt);return}w(f)},[H,w]);const k=async f=>{if(f.is_upsell){fe("patterns");return}if(o){vt("A request is already in progress","error");return}r(f.name);const y=await fetch(WPTB_CFG.API_BASE+"/v1/patterns?name="+f.name,{headers:{"Content-Type":"application/json"}});if(!y.ok){vt("Something went wrong","error"),r(void 0);return}const a=await y.json();if(a.error){vt(a.error,"error"),r(void 0);return}const g=a.pattern,i=Bt(g.content);i.title="Clone of: "+f.title;const p=pe();i.id=p,Rt.dispatch(Vt({id:p,table:i})),O("builder",{table:p})};return d.jsx("div",{className:"wptb-v2-table-templates",children:l?Array.from({length:9},(f,y)=>d.jsxs("div",{className:"wptb-v2-table-template",children:[d.jsx("div",{className:"wptb-v2-table-template-preview",children:d.jsx("div",{className:"wptb-v2-table-template-preview-loading"})}),d.jsx("div",{className:"wptb-v2-table-template-title",children:d.jsx("div",{className:"wptb-v2-table-template-title-loading"})})]},y)):u.map(f=>d.jsxs("button",{className:mt("wptb-v2-table-template",{"wptb-v2-table-template-upsell":f.is_upsell}),onClick:()=>k(f),children:[d.jsxs("div",{className:"wptb-v2-table-template-preview",children:[d.jsx("img",{src:WPTB_CFG.PLUGIN_URL+"/v2/assets/patterns/images/"+f.name+".png",alt:f.name}),o===f.name&&d.jsx("div",{className:"wptb-v2-table-template-preview-creating",children:d.jsx(Kt,{})})]}),d.jsx("div",{className:"wptb-v2-table-template-title",children:f.title})]},f.name))})},Me=({setPage:O,search:H})=>{const[u,S]=nt.useState(H||""),l=nt.useRef();return nt.useEffect(()=>{const s=u==null?void 0:u.trim();if(H){if(s&&s.length>0&&s.length<2)return}else if(!s||s.length<2)return;l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{O("create",{search:u}),l.current=void 0},500)},[u]),d.jsxs("div",{className:"wptb-v2-page wptb-v2-create-page",children:[d.jsx(Ot,{setPage:O,page:"create"}),d.jsxs("div",{className:"wptb-v2-page-content",children:[d.jsxs("div",{className:"wptb-v2-page-content-top",children:[d.jsx("h3",{children:Et("Create Table")}),d.jsxs("div",{className:"wptb-v2-search-group",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:d.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[d.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),d.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),d.jsx("input",{type:"search",placeholder:"Search templates...",value:u,onChange:s=>S(s.target.value)})]})]}),d.jsxs("div",{className:"wptb-v2-page-content-main",children:[d.jsx(Le,{setPage:O}),d.jsx("div",{className:"wptb-v2-divider",children:"or"}),d.jsx("h2",{children:"Choose from templates"}),d.jsx(Ue,{setPage:O,search:H})]})]})]})};function It(O){throw new Error('Could not dynamically require "'+O+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ee={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(O,H){(function(u){O.exports=u()})(function(){return function u(S,l,s){function o(w,k){if(!l[w]){if(!S[w]){var f=typeof It=="function"&&It;if(!k&&f)return f(w,!0);if(r)return r(w,!0);var y=new Error("Cannot find module '"+w+"'");throw y.code="MODULE_NOT_FOUND",y}var a=l[w]={exports:{}};S[w][0].call(a.exports,function(g){var i=S[w][1][g];return o(i||g)},a,a.exports,u,S,l,s)}return l[w].exports}for(var r=typeof It=="function"&&It,n=0;n<s.length;n++)o(s[n]);return o}({1:[function(u,S,l){var s=u("./utils"),o=u("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(n){for(var w,k,f,y,a,g,i,p=[],h=0,x=n.length,C=x,j=s.getTypeOf(n)!=="string";h<n.length;)C=x-h,f=j?(w=n[h++],k=h<x?n[h++]:0,h<x?n[h++]:0):(w=n.charCodeAt(h++),k=h<x?n.charCodeAt(h++):0,h<x?n.charCodeAt(h++):0),y=w>>2,a=(3&w)<<4|k>>4,g=1<C?(15&k)<<2|f>>6:64,i=2<C?63&f:64,p.push(r.charAt(y)+r.charAt(a)+r.charAt(g)+r.charAt(i));return p.join("")},l.decode=function(n){var w,k,f,y,a,g,i=0,p=0,h="data:";if(n.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var x,C=3*(n=n.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(n.charAt(n.length-1)===r.charAt(64)&&C--,n.charAt(n.length-2)===r.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|C):new Array(0|C);i<n.length;)w=r.indexOf(n.charAt(i++))<<2|(y=r.indexOf(n.charAt(i++)))>>4,k=(15&y)<<4|(a=r.indexOf(n.charAt(i++)))>>2,f=(3&a)<<6|(g=r.indexOf(n.charAt(i++))),x[p++]=w,a!==64&&(x[p++]=k),g!==64&&(x[p++]=f);return x}},{"./support":30,"./utils":32}],2:[function(u,S,l){var s=u("./external"),o=u("./stream/DataWorker"),r=u("./stream/Crc32Probe"),n=u("./stream/DataLengthProbe");function w(k,f,y,a,g){this.compressedSize=k,this.uncompressedSize=f,this.crc32=y,this.compression=a,this.compressedContent=g}w.prototype={getContentWorker:function(){var k=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new n("data_length")),f=this;return k.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},w.createWorkerFrom=function(k,f,y){return k.pipe(new r).pipe(new n("uncompressedSize")).pipe(f.compressWorker(y)).pipe(new n("compressedSize")).withStreamInfo("compression",f)},S.exports=w},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,S,l){var s=u("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},l.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,S,l){var s=u("./utils"),o=function(){for(var r,n=[],w=0;w<256;w++){r=w;for(var k=0;k<8;k++)r=1&r?3988292384^r>>>1:r>>>1;n[w]=r}return n}();S.exports=function(r,n){return r!==void 0&&r.length?s.getTypeOf(r)!=="string"?function(w,k,f,y){var a=o,g=y+f;w^=-1;for(var i=y;i<g;i++)w=w>>>8^a[255&(w^k[i])];return-1^w}(0|n,r,r.length,0):function(w,k,f,y){var a=o,g=y+f;w^=-1;for(var i=y;i<g;i++)w=w>>>8^a[255&(w^k.charCodeAt(i))];return-1^w}(0|n,r,r.length,0):0}},{"./utils":32}],5:[function(u,S,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(u,S,l){var s=null;s=typeof Promise<"u"?Promise:u("lie"),S.exports={Promise:s}},{lie:37}],7:[function(u,S,l){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=u("pako"),r=u("./utils"),n=u("./stream/GenericWorker"),w=s?"uint8array":"array";function k(f,y){n.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=y,this.meta={}}l.magic="\b\0",r.inherits(k,n),k.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(w,f.data),!1)},k.prototype.flush=function(){n.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(y){f.push({data:y,meta:f.meta})}},l.compressWorker=function(f){return new k("Deflate",f)},l.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,S,l){function s(a,g){var i,p="";for(i=0;i<g;i++)p+=String.fromCharCode(255&a),a>>>=8;return p}function o(a,g,i,p,h,x){var C,j,z=a.file,U=a.compression,B=x!==w.utf8encode,v=r.transformTo("string",x(z.name)),c=r.transformTo("string",w.utf8encode(z.name)),A=z.comment,W=r.transformTo("string",x(A)),b=r.transformTo("string",w.utf8encode(A)),R=c.length!==z.name.length,e=b.length!==A.length,M="",Q="",P="",tt=z.dir,D=z.date,rt={crc32:0,compressedSize:0,uncompressedSize:0};g&&!i||(rt.crc32=a.crc32,rt.compressedSize=a.compressedSize,rt.uncompressedSize=a.uncompressedSize);var F=0;g&&(F|=8),B||!R&&!e||(F|=2048);var E=0,X=0;tt&&(E|=16),h==="UNIX"?(X=798,E|=function(V,lt){var ut=V;return V||(ut=lt?16893:33204),(65535&ut)<<16}(z.unixPermissions,tt)):(X=20,E|=function(V){return 63&(V||0)}(z.dosPermissions)),C=D.getUTCHours(),C<<=6,C|=D.getUTCMinutes(),C<<=5,C|=D.getUTCSeconds()/2,j=D.getUTCFullYear()-1980,j<<=4,j|=D.getUTCMonth()+1,j<<=5,j|=D.getUTCDate(),R&&(Q=s(1,1)+s(k(v),4)+c,M+="up"+s(Q.length,2)+Q),e&&(P=s(1,1)+s(k(W),4)+b,M+="uc"+s(P.length,2)+P);var $="";return $+=`
\0`,$+=s(F,2),$+=U.magic,$+=s(C,2),$+=s(j,2),$+=s(rt.crc32,4),$+=s(rt.compressedSize,4),$+=s(rt.uncompressedSize,4),$+=s(v.length,2),$+=s(M.length,2),{fileRecord:f.LOCAL_FILE_HEADER+$+v+M,dirRecord:f.CENTRAL_FILE_HEADER+s(X,2)+$+s(W.length,2)+"\0\0\0\0"+s(E,4)+s(p,4)+v+M+W}}var r=u("../utils"),n=u("../stream/GenericWorker"),w=u("../utf8"),k=u("../crc32"),f=u("../signature");function y(a,g,i,p){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=i,this.encodeFileName=p,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(y,n),y.prototype.push=function(a){var g=a.meta.percent||0,i=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,n.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:i?(g+100*(i-p-1))/i:100}}))},y.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var g=this.streamFiles&&!a.file.dir;if(g){var i=o(a,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(a){this.accumulate=!1;var g=this.streamFiles&&!a.file.dir,i=o(a,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),g)this.push({data:function(p){return f.DATA_DESCRIPTOR+s(p.crc32,4)+s(p.compressedSize,4)+s(p.uncompressedSize,4)}(a),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var a=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var i=this.bytesWritten-a,p=function(h,x,C,j,z){var U=r.transformTo("string",z(j));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(h,2)+s(h,2)+s(x,4)+s(C,4)+s(U.length,2)+U}(this.dirRecords.length,i,a,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(a){this._sources.push(a);var g=this;return a.on("data",function(i){g.processChunk(i)}),a.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),a.on("error",function(i){g.error(i)}),this},y.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(a){var g=this._sources;if(!n.prototype.error.call(this,a))return!1;for(var i=0;i<g.length;i++)try{g[i].error(a)}catch{}return!0},y.prototype.lock=function(){n.prototype.lock.call(this);for(var a=this._sources,g=0;g<a.length;g++)a[g].lock()},S.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,S,l){var s=u("../compressions"),o=u("./ZipFileWorker");l.generateWorker=function(r,n,w){var k=new o(n.streamFiles,w,n.platform,n.encodeFileName),f=0;try{r.forEach(function(y,a){f++;var g=function(x,C){var j=x||C,z=s[j];if(!z)throw new Error(j+" is not a valid compression method !");return z}(a.options.compression,n.compression),i=a.options.compressionOptions||n.compressionOptions||{},p=a.dir,h=a.date;a._compressWorker(g,i).withStreamInfo("file",{name:y,dir:p,date:h,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(k)}),k.entriesCount=f}catch(y){k.error(y)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,S,l){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var r in this)typeof this[r]!="function"&&(o[r]=this[r]);return o}}(s.prototype=u("./object")).loadAsync=u("./load"),s.support=u("./support"),s.defaults=u("./defaults"),s.version="3.10.1",s.loadAsync=function(o,r){return new s().loadAsync(o,r)},s.external=u("./external"),S.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,S,l){var s=u("./utils"),o=u("./external"),r=u("./utf8"),n=u("./zipEntries"),w=u("./stream/Crc32Probe"),k=u("./nodejsUtils");function f(y){return new o.Promise(function(a,g){var i=y.decompressed.getContentWorker().pipe(new w);i.on("error",function(p){g(p)}).on("end",function(){i.streamInfo.crc32!==y.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}S.exports=function(y,a){var g=this;return a=s.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),k.isNode&&k.isStream(y)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",y,!0,a.optimizedBinaryString,a.base64).then(function(i){var p=new n(a);return p.load(i),p}).then(function(i){var p=[o.Promise.resolve(i)],h=i.files;if(a.checkCRC32)for(var x=0;x<h.length;x++)p.push(f(h[x]));return o.Promise.all(p)}).then(function(i){for(var p=i.shift(),h=p.files,x=0;x<h.length;x++){var C=h[x],j=C.fileNameStr,z=s.resolve(C.fileNameStr);g.file(z,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:a.createFolders}),C.dir||(g.file(z).unsafeOriginalName=j)}return p.zipComment.length&&(g.comment=p.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,S,l){var s=u("../utils"),o=u("../stream/GenericWorker");function r(n,w){o.call(this,"Nodejs stream input adapter for "+n),this._upstreamEnded=!1,this._bindStream(w)}s.inherits(r,o),r.prototype._bindStream=function(n){var w=this;(this._stream=n).pause(),n.on("data",function(k){w.push({data:k,meta:{percent:0}})}).on("error",function(k){w.isPaused?this.generatedError=k:w.error(k)}).on("end",function(){w.isPaused?w._upstreamEnded=!0:w.end()})},r.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,S,l){var s=u("readable-stream").Readable;function o(r,n,w){s.call(this,n),this._helper=r;var k=this;r.on("data",function(f,y){k.push(f)||k._helper.pause(),w&&w(y)}).on("error",function(f){k.emit("error",f)}).on("end",function(){k.push(null)})}u("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},S.exports=o},{"../utils":32,"readable-stream":16}],14:[function(u,S,l){S.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(u,S,l){function s(z,U,B){var v,c=r.getTypeOf(U),A=r.extend(B||{},k);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(z=h(z)),A.createFolders&&(v=p(z))&&x.call(this,v,!0);var W=c==="string"&&A.binary===!1&&A.base64===!1;B&&B.binary!==void 0||(A.binary=!W),(U instanceof f&&U.uncompressedSize===0||A.dir||!U||U.length===0)&&(A.base64=!1,A.binary=!0,U="",A.compression="STORE",c="string");var b=null;b=U instanceof f||U instanceof n?U:g.isNode&&g.isStream(U)?new i(z,U):r.prepareContent(z,U,A.binary,A.optimizedBinaryString,A.base64);var R=new y(z,b,A);this.files[z]=R}var o=u("./utf8"),r=u("./utils"),n=u("./stream/GenericWorker"),w=u("./stream/StreamHelper"),k=u("./defaults"),f=u("./compressedObject"),y=u("./zipObject"),a=u("./generate"),g=u("./nodejsUtils"),i=u("./nodejs/NodejsStreamInputAdapter"),p=function(z){z.slice(-1)==="/"&&(z=z.substring(0,z.length-1));var U=z.lastIndexOf("/");return 0<U?z.substring(0,U):""},h=function(z){return z.slice(-1)!=="/"&&(z+="/"),z},x=function(z,U){return U=U!==void 0?U:k.createFolders,z=h(z),this.files[z]||s.call(this,z,null,{dir:!0,createFolders:U}),this.files[z]};function C(z){return Object.prototype.toString.call(z)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(z){var U,B,v;for(U in this.files)v=this.files[U],(B=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&z(B,v)},filter:function(z){var U=[];return this.forEach(function(B,v){z(B,v)&&U.push(v)}),U},file:function(z,U,B){if(arguments.length!==1)return z=this.root+z,s.call(this,z,U,B),this;if(C(z)){var v=z;return this.filter(function(A,W){return!W.dir&&v.test(A)})}var c=this.files[this.root+z];return c&&!c.dir?c:null},folder:function(z){if(!z)return this;if(C(z))return this.filter(function(c,A){return A.dir&&z.test(c)});var U=this.root+z,B=x.call(this,U),v=this.clone();return v.root=B.name,v},remove:function(z){z=this.root+z;var U=this.files[z];if(U||(z.slice(-1)!=="/"&&(z+="/"),U=this.files[z]),U&&!U.dir)delete this.files[z];else for(var B=this.filter(function(c,A){return A.name.slice(0,z.length)===z}),v=0;v<B.length;v++)delete this.files[B[v].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(z){var U,B={};try{if((B=r.extend(z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");r.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var v=B.comment||this.comment||"";U=a.generateWorker(this,B,v)}catch(c){(U=new n("error")).error(c)}return new w(U,B.type||"string",B.mimeType)},generateAsync:function(z,U){return this.generateInternalStream(z).accumulate(U)},generateNodeStream:function(z,U){return(z=z||{}).type||(z.type="nodebuffer"),this.generateInternalStream(z).toNodejsStream(U)}};S.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,S,l){S.exports=u("stream")},{stream:void 0}],17:[function(u,S,l){var s=u("./DataReader");function o(r){s.call(this,r);for(var n=0;n<this.data.length;n++)r[n]=255&r[n]}u("../utils").inherits(o,s),o.prototype.byteAt=function(r){return this.data[this.zero+r]},o.prototype.lastIndexOfSignature=function(r){for(var n=r.charCodeAt(0),w=r.charCodeAt(1),k=r.charCodeAt(2),f=r.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===n&&this.data[y+1]===w&&this.data[y+2]===k&&this.data[y+3]===f)return y-this.zero;return-1},o.prototype.readAndCheckSignature=function(r){var n=r.charCodeAt(0),w=r.charCodeAt(1),k=r.charCodeAt(2),f=r.charCodeAt(3),y=this.readData(4);return n===y[0]&&w===y[1]&&k===y[2]&&f===y[3]},o.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},S.exports=o},{"../utils":32,"./DataReader":18}],18:[function(u,S,l){var s=u("../utils");function o(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var n,w=0;for(this.checkOffset(r),n=this.index+r-1;n>=this.index;n--)w=(w<<8)+this.byteAt(n);return this.index+=r,w},readString:function(r){return s.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},S.exports=o},{"../utils":32}],19:[function(u,S,l){var s=u("./Uint8ArrayReader");function o(r){s.call(this,r)}u("../utils").inherits(o,s),o.prototype.readData=function(r){this.checkOffset(r);var n=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},S.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,S,l){var s=u("./DataReader");function o(r){s.call(this,r)}u("../utils").inherits(o,s),o.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},o.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},o.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},o.prototype.readData=function(r){this.checkOffset(r);var n=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},S.exports=o},{"../utils":32,"./DataReader":18}],21:[function(u,S,l){var s=u("./ArrayReader");function o(r){s.call(this,r)}u("../utils").inherits(o,s),o.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},S.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(u,S,l){var s=u("../utils"),o=u("../support"),r=u("./ArrayReader"),n=u("./StringReader"),w=u("./NodeBufferReader"),k=u("./Uint8ArrayReader");S.exports=function(f){var y=s.getTypeOf(f);return s.checkSupport(y),y!=="string"||o.uint8array?y==="nodebuffer"?new w(f):o.uint8array?new k(s.transformTo("uint8array",f)):new r(s.transformTo("array",f)):new n(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,S,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,S,l){var s=u("./GenericWorker"),o=u("../utils");function r(n){s.call(this,"ConvertWorker to "+n),this.destType=n}o.inherits(r,s),r.prototype.processChunk=function(n){this.push({data:o.transformTo(this.destType,n.data),meta:n.meta})},S.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(u,S,l){var s=u("./GenericWorker"),o=u("../crc32");function r(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(r,s),r.prototype.processChunk=function(n){this.streamInfo.crc32=o(n.data,this.streamInfo.crc32||0),this.push(n)},S.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,S,l){var s=u("../utils"),o=u("./GenericWorker");function r(n){o.call(this,"DataLengthProbe for "+n),this.propName=n,this.withStreamInfo(n,0)}s.inherits(r,o),r.prototype.processChunk=function(n){if(n){var w=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=w+n.data.length}o.prototype.processChunk.call(this,n)},S.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(u,S,l){var s=u("../utils"),o=u("./GenericWorker");function r(n){o.call(this,"DataWorker");var w=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,n.then(function(k){w.dataIsReady=!0,w.data=k,w.max=k&&k.length||0,w.type=s.getTypeOf(k),w.isPaused||w._tickAndRepeat()},function(k){w.error(k)})}s.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var n=null,w=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":n=this.data.substring(this.index,w);break;case"uint8array":n=this.data.subarray(this.index,w);break;case"array":case"nodebuffer":n=this.data.slice(this.index,w)}return this.index=w,this.push({data:n,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(u,S,l){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,r){return this._listeners[o].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,r){if(this._listeners[o])for(var n=0;n<this._listeners[o].length;n++)this._listeners[o][n].call(this,r)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var r=this;return o.on("data",function(n){r.processChunk(n)}),o.on("end",function(){r.end()}),o.on("error",function(n){r.error(n)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,r){return this.extraStreamInfo[o]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},S.exports=s},{}],29:[function(u,S,l){var s=u("../utils"),o=u("./ConvertWorker"),r=u("./GenericWorker"),n=u("../base64"),w=u("../support"),k=u("../external"),f=null;if(w.nodestream)try{f=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(g,i){return new k.Promise(function(p,h){var x=[],C=g._internalType,j=g._outputType,z=g._mimeType;g.on("data",function(U,B){x.push(U),i&&i(B)}).on("error",function(U){x=[],h(U)}).on("end",function(){try{var U=function(B,v,c){switch(B){case"blob":return s.newBlob(s.transformTo("arraybuffer",v),c);case"base64":return n.encode(v);default:return s.transformTo(B,v)}}(j,function(B,v){var c,A=0,W=null,b=0;for(c=0;c<v.length;c++)b+=v[c].length;switch(B){case"string":return v.join("");case"array":return Array.prototype.concat.apply([],v);case"uint8array":for(W=new Uint8Array(b),c=0;c<v.length;c++)W.set(v[c],A),A+=v[c].length;return W;case"nodebuffer":return Buffer.concat(v);default:throw new Error("concat : unsupported type '"+B+"'")}}(C,x),z);p(U)}catch(B){h(B)}x=[]}).resume()})}function a(g,i,p){var h=i;switch(i){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=i,this._mimeType=p,s.checkSupport(h),this._worker=g.pipe(new o(h)),g.lock()}catch(x){this._worker=new r("error"),this._worker.error(x)}}a.prototype={accumulate:function(g){return y(this,g)},on:function(g,i){var p=this;return g==="data"?this._worker.on(g,function(h){i.call(p,h.data,h.meta)}):this._worker.on(g,function(){s.delay(i,arguments,p)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},S.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,S,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var s=new ArrayBuffer(0);try{l.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),l.blob=o.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!u("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(u,S,l){for(var s=u("./utils"),o=u("./support"),r=u("./nodejsUtils"),n=u("./stream/GenericWorker"),w=new Array(256),k=0;k<256;k++)w[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;w[254]=w[254]=1;function f(){n.call(this,"utf-8 decode"),this.leftOver=null}function y(){n.call(this,"utf-8 encode")}l.utf8encode=function(a){return o.nodebuffer?r.newBufferFrom(a,"utf-8"):function(g){var i,p,h,x,C,j=g.length,z=0;for(x=0;x<j;x++)(64512&(p=g.charCodeAt(x)))==55296&&x+1<j&&(64512&(h=g.charCodeAt(x+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),x++),z+=p<128?1:p<2048?2:p<65536?3:4;for(i=o.uint8array?new Uint8Array(z):new Array(z),x=C=0;C<z;x++)(64512&(p=g.charCodeAt(x)))==55296&&x+1<j&&(64512&(h=g.charCodeAt(x+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),x++),p<128?i[C++]=p:(p<2048?i[C++]=192|p>>>6:(p<65536?i[C++]=224|p>>>12:(i[C++]=240|p>>>18,i[C++]=128|p>>>12&63),i[C++]=128|p>>>6&63),i[C++]=128|63&p);return i}(a)},l.utf8decode=function(a){return o.nodebuffer?s.transformTo("nodebuffer",a).toString("utf-8"):function(g){var i,p,h,x,C=g.length,j=new Array(2*C);for(i=p=0;i<C;)if((h=g[i++])<128)j[p++]=h;else if(4<(x=w[h]))j[p++]=65533,i+=x-1;else{for(h&=x===2?31:x===3?15:7;1<x&&i<C;)h=h<<6|63&g[i++],x--;1<x?j[p++]=65533:h<65536?j[p++]=h:(h-=65536,j[p++]=55296|h>>10&1023,j[p++]=56320|1023&h)}return j.length!==p&&(j.subarray?j=j.subarray(0,p):j.length=p),s.applyFromCharCode(j)}(a=s.transformTo(o.uint8array?"uint8array":"array",a))},s.inherits(f,n),f.prototype.processChunk=function(a){var g=s.transformTo(o.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=g;(g=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),g.set(i,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var p=function(x,C){var j;for((C=C||x.length)>x.length&&(C=x.length),j=C-1;0<=j&&(192&x[j])==128;)j--;return j<0||j===0?C:j+w[x[j]]>C?j:C}(g),h=g;p!==g.length&&(o.uint8array?(h=g.subarray(0,p),this.leftOver=g.subarray(p,g.length)):(h=g.slice(0,p),this.leftOver=g.slice(p,g.length))),this.push({data:l.utf8decode(h),meta:a.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=f,s.inherits(y,n),y.prototype.processChunk=function(a){this.push({data:l.utf8encode(a.data),meta:a.meta})},l.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,S,l){var s=u("./support"),o=u("./base64"),r=u("./nodejsUtils"),n=u("./external");function w(i){return i}function k(i,p){for(var h=0;h<i.length;++h)p[h]=255&i.charCodeAt(h);return p}u("setimmediate"),l.newBlob=function(i,p){l.checkSupport("blob");try{return new Blob([i],{type:p})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(i),h.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(i,p,h){var x=[],C=0,j=i.length;if(j<=h)return String.fromCharCode.apply(null,i);for(;C<j;)p==="array"||p==="nodebuffer"?x.push(String.fromCharCode.apply(null,i.slice(C,Math.min(C+h,j)))):x.push(String.fromCharCode.apply(null,i.subarray(C,Math.min(C+h,j)))),C+=h;return x.join("")},stringifyByChar:function(i){for(var p="",h=0;h<i.length;h++)p+=String.fromCharCode(i[h]);return p},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function y(i){var p=65536,h=l.getTypeOf(i),x=!0;if(h==="uint8array"?x=f.applyCanBeUsed.uint8array:h==="nodebuffer"&&(x=f.applyCanBeUsed.nodebuffer),x)for(;1<p;)try{return f.stringifyByChunk(i,h,p)}catch{p=Math.floor(p/2)}return f.stringifyByChar(i)}function a(i,p){for(var h=0;h<i.length;h++)p[h]=i[h];return p}l.applyFromCharCode=y;var g={};g.string={string:w,array:function(i){return k(i,new Array(i.length))},arraybuffer:function(i){return g.string.uint8array(i).buffer},uint8array:function(i){return k(i,new Uint8Array(i.length))},nodebuffer:function(i){return k(i,r.allocBuffer(i.length))}},g.array={string:y,array:w,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(i)}},g.arraybuffer={string:function(i){return y(new Uint8Array(i))},array:function(i){return a(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:w,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(new Uint8Array(i))}},g.uint8array={string:y,array:function(i){return a(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:w,nodebuffer:function(i){return r.newBufferFrom(i)}},g.nodebuffer={string:y,array:function(i){return a(i,new Array(i.length))},arraybuffer:function(i){return g.nodebuffer.uint8array(i).buffer},uint8array:function(i){return a(i,new Uint8Array(i.length))},nodebuffer:w},l.transformTo=function(i,p){if(p=p||"",!i)return p;l.checkSupport(i);var h=l.getTypeOf(p);return g[h][i](p)},l.resolve=function(i){for(var p=i.split("/"),h=[],x=0;x<p.length;x++){var C=p[x];C==="."||C===""&&x!==0&&x!==p.length-1||(C===".."?h.pop():h.push(C))}return h.join("/")},l.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":s.nodebuffer&&r.isBuffer(i)?"nodebuffer":s.uint8array&&i instanceof Uint8Array?"uint8array":s.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(i){if(!s[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(i){var p,h,x="";for(h=0;h<(i||"").length;h++)x+="\\x"+((p=i.charCodeAt(h))<16?"0":"")+p.toString(16).toUpperCase();return x},l.delay=function(i,p,h){setImmediate(function(){i.apply(h||null,p||[])})},l.inherits=function(i,p){function h(){}h.prototype=p.prototype,i.prototype=new h},l.extend=function(){var i,p,h={};for(i=0;i<arguments.length;i++)for(p in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],p)&&h[p]===void 0&&(h[p]=arguments[i][p]);return h},l.prepareContent=function(i,p,h,x,C){return n.Promise.resolve(p).then(function(j){return s.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new n.Promise(function(z,U){var B=new FileReader;B.onload=function(v){z(v.target.result)},B.onerror=function(v){U(v.target.error)},B.readAsArrayBuffer(j)}):j}).then(function(j){var z=l.getTypeOf(j);return z?(z==="arraybuffer"?j=l.transformTo("uint8array",j):z==="string"&&(C?j=o.decode(j):h&&x!==!0&&(j=function(U){return k(U,s.uint8array?new Uint8Array(U.length):new Array(U.length))}(j))),j):n.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(u,S,l){var s=u("./reader/readerFor"),o=u("./utils"),r=u("./signature"),n=u("./zipEntry"),w=u("./support");function k(f){this.files=[],this.loadOptions=f}k.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(y)+", expected "+o.pretty(f)+")")}},isSignature:function(f,y){var a=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===y;return this.reader.setIndex(a),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),y=w.uint8array?"uint8array":"array",a=o.transformTo(y,f);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,y,a,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),y=this.reader.readInt(4),a=this.reader.readData(y),this.zip64ExtensibleData[f]={id:f,length:y,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,y;for(f=0;f<this.files.length;f++)y=this.files[f],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(f=new n({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var y=f;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var g=y-a;if(0<g)this.isSignature(y,r.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(u,S,l){var s=u("./reader/readerFor"),o=u("./utils"),r=u("./compressedObject"),n=u("./crc32"),w=u("./utf8"),k=u("./compressions"),f=u("./support");function y(a,g){this.options=a,this.loadOptions=g}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var g,i;if(a.skip(22),this.fileNameLength=a.readInt(2),i=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(p){for(var h in k)if(Object.prototype.hasOwnProperty.call(k,h)&&k[h].magic===p)return k[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,g,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var g=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(g),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var g,i,p,h=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<h;)g=a.readInt(2),i=a.readInt(2),p=a.readData(i),this.extraFields[g]={id:g,length:i,value:p};a.setIndex(h)},handleUTF8:function(){var a=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=w.utf8decode(this.fileName),this.fileCommentStr=w.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var i=o.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var h=o.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var g=s(a.value);return g.readInt(1)!==1||n(this.fileName)!==g.readInt(4)?null:w.utf8decode(g.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var g=s(a.value);return g.readInt(1)!==1||n(this.fileComment)!==g.readInt(4)?null:w.utf8decode(g.readData(a.length-5))}return null}},S.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,S,l){function s(g,i,p){this.name=g,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=i,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var o=u("./stream/StreamHelper"),r=u("./stream/DataWorker"),n=u("./utf8"),w=u("./compressedObject"),k=u("./stream/GenericWorker");s.prototype={internalStream:function(g){var i=null,p="string";try{if(!g)throw new Error("No output type specified.");var h=(p=g.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),i=this._decompressWorker();var x=!this._dataBinary;x&&!h&&(i=i.pipe(new n.Utf8EncodeWorker)),!x&&h&&(i=i.pipe(new n.Utf8DecodeWorker))}catch(C){(i=new k("error")).error(C)}return new o(i,p,"")},async:function(g,i){return this.internalStream(g).accumulate(i)},nodeStream:function(g,i){return this.internalStream(g||"nodebuffer").toNodejsStream(i)},_compressWorker:function(g,i){if(this._data instanceof w&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new n.Utf8EncodeWorker)),w.createWorkerFrom(p,g,i)},_decompressWorker:function(){return this._data instanceof w?this._data.getContentWorker():this._data instanceof k?this._data:new r(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<f.length;a++)s.prototype[f[a]]=y;S.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,S,l){(function(s){var o,r,n=s.MutationObserver||s.WebKitMutationObserver;if(n){var w=0,k=new n(g),f=s.document.createTextNode("");k.observe(f,{characterData:!0}),o=function(){f.data=w=++w%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var i=s.document.createElement("script");i.onreadystatechange=function(){g(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},s.document.documentElement.appendChild(i)}:function(){setTimeout(g,0)};else{var y=new s.MessageChannel;y.port1.onmessage=g,o=function(){y.port2.postMessage(0)}}var a=[];function g(){var i,p;r=!0;for(var h=a.length;h;){for(p=a,a=[],i=-1;++i<h;)p[i]();h=a.length}r=!1}S.exports=function(i){a.push(i)!==1||r||o()}}).call(this,typeof jt<"u"?jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,S,l){var s=u("immediate");function o(){}var r={},n=["REJECTED"],w=["FULFILLED"],k=["PENDING"];function f(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,h!==o&&i(this,h)}function y(h,x,C){this.promise=h,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function a(h,x,C){s(function(){var j;try{j=x(C)}catch(z){return r.reject(h,z)}j===h?r.reject(h,new TypeError("Cannot resolve promise with itself")):r.resolve(h,j)})}function g(h){var x=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof x=="function")return function(){x.apply(h,arguments)}}function i(h,x){var C=!1;function j(B){C||(C=!0,r.reject(h,B))}function z(B){C||(C=!0,r.resolve(h,B))}var U=p(function(){x(z,j)});U.status==="error"&&j(U.value)}function p(h,x){var C={};try{C.value=h(x),C.status="success"}catch(j){C.status="error",C.value=j}return C}(S.exports=f).prototype.finally=function(h){if(typeof h!="function")return this;var x=this.constructor;return this.then(function(C){return x.resolve(h()).then(function(){return C})},function(C){return x.resolve(h()).then(function(){throw C})})},f.prototype.catch=function(h){return this.then(null,h)},f.prototype.then=function(h,x){if(typeof h!="function"&&this.state===w||typeof x!="function"&&this.state===n)return this;var C=new this.constructor(o);return this.state!==k?a(C,this.state===w?h:x,this.outcome):this.queue.push(new y(C,h,x)),C},y.prototype.callFulfilled=function(h){r.resolve(this.promise,h)},y.prototype.otherCallFulfilled=function(h){a(this.promise,this.onFulfilled,h)},y.prototype.callRejected=function(h){r.reject(this.promise,h)},y.prototype.otherCallRejected=function(h){a(this.promise,this.onRejected,h)},r.resolve=function(h,x){var C=p(g,x);if(C.status==="error")return r.reject(h,C.value);var j=C.value;if(j)i(h,j);else{h.state=w,h.outcome=x;for(var z=-1,U=h.queue.length;++z<U;)h.queue[z].callFulfilled(x)}return h},r.reject=function(h,x){h.state=n,h.outcome=x;for(var C=-1,j=h.queue.length;++C<j;)h.queue[C].callRejected(x);return h},f.resolve=function(h){return h instanceof this?h:r.resolve(new this(o),h)},f.reject=function(h){var x=new this(o);return r.reject(x,h)},f.all=function(h){var x=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=h.length,j=!1;if(!C)return this.resolve([]);for(var z=new Array(C),U=0,B=-1,v=new this(o);++B<C;)c(h[B],B);return v;function c(A,W){x.resolve(A).then(function(b){z[W]=b,++U!==C||j||(j=!0,r.resolve(v,z))},function(b){j||(j=!0,r.reject(v,b))})}},f.race=function(h){var x=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=h.length,j=!1;if(!C)return this.resolve([]);for(var z=-1,U=new this(o);++z<C;)B=h[z],x.resolve(B).then(function(v){j||(j=!0,r.resolve(U,v))},function(v){j||(j=!0,r.reject(U,v))});var B;return U}},{immediate:36}],38:[function(u,S,l){var s={};(0,u("./lib/utils/common").assign)(s,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),S.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,S,l){var s=u("./zlib/deflate"),o=u("./utils/common"),r=u("./utils/strings"),n=u("./zlib/messages"),w=u("./zlib/zstream"),k=Object.prototype.toString,f=0,y=-1,a=0,g=8;function i(h){if(!(this instanceof i))return new i(h);this.options=o.assign({level:y,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},h||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(C!==f)throw new Error(n[C]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var j;if(j=typeof x.dictionary=="string"?r.string2buf(x.dictionary):k.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(C=s.deflateSetDictionary(this.strm,j))!==f)throw new Error(n[C]);this._dict_set=!0}}function p(h,x){var C=new i(x);if(C.push(h,!0),C.err)throw C.msg||n[C.err];return C.result}i.prototype.push=function(h,x){var C,j,z=this.strm,U=this.options.chunkSize;if(this.ended)return!1;j=x===~~x?x:x===!0?4:0,typeof h=="string"?z.input=r.string2buf(h):k.call(h)==="[object ArrayBuffer]"?z.input=new Uint8Array(h):z.input=h,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(U),z.next_out=0,z.avail_out=U),(C=s.deflate(z,j))!==1&&C!==f)return this.onEnd(C),!(this.ended=!0);z.avail_out!==0&&(z.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(o.shrinkBuf(z.output,z.next_out))):this.onData(o.shrinkBuf(z.output,z.next_out)))}while((0<z.avail_in||z.avail_out===0)&&C!==1);return j===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===f):j!==2||(this.onEnd(f),!(z.avail_out=0))},i.prototype.onData=function(h){this.chunks.push(h)},i.prototype.onEnd=function(h){h===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},l.Deflate=i,l.deflate=p,l.deflateRaw=function(h,x){return(x=x||{}).raw=!0,p(h,x)},l.gzip=function(h,x){return(x=x||{}).gzip=!0,p(h,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,S,l){var s=u("./zlib/inflate"),o=u("./utils/common"),r=u("./utils/strings"),n=u("./zlib/constants"),w=u("./zlib/messages"),k=u("./zlib/zstream"),f=u("./zlib/gzheader"),y=Object.prototype.toString;function a(i){if(!(this instanceof a))return new a(i);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},i||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||i&&i.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var h=s.inflateInit2(this.strm,p.windowBits);if(h!==n.Z_OK)throw new Error(w[h]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function g(i,p){var h=new a(p);if(h.push(i,!0),h.err)throw h.msg||w[h.err];return h.result}a.prototype.push=function(i,p){var h,x,C,j,z,U,B=this.strm,v=this.options.chunkSize,c=this.options.dictionary,A=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof i=="string"?B.input=r.binstring2buf(i):y.call(i)==="[object ArrayBuffer]"?B.input=new Uint8Array(i):B.input=i,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(v),B.next_out=0,B.avail_out=v),(h=s.inflate(B,n.Z_NO_FLUSH))===n.Z_NEED_DICT&&c&&(U=typeof c=="string"?r.string2buf(c):y.call(c)==="[object ArrayBuffer]"?new Uint8Array(c):c,h=s.inflateSetDictionary(this.strm,U)),h===n.Z_BUF_ERROR&&A===!0&&(h=n.Z_OK,A=!1),h!==n.Z_STREAM_END&&h!==n.Z_OK)return this.onEnd(h),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&h!==n.Z_STREAM_END&&(B.avail_in!==0||x!==n.Z_FINISH&&x!==n.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=r.utf8border(B.output,B.next_out),j=B.next_out-C,z=r.buf2string(B.output,C),B.next_out=j,B.avail_out=v-j,j&&o.arraySet(B.output,B.output,C,j,0),this.onData(z)):this.onData(o.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(A=!0)}while((0<B.avail_in||B.avail_out===0)&&h!==n.Z_STREAM_END);return h===n.Z_STREAM_END&&(x=n.Z_FINISH),x===n.Z_FINISH?(h=s.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===n.Z_OK):x!==n.Z_SYNC_FLUSH||(this.onEnd(n.Z_OK),!(B.avail_out=0))},a.prototype.onData=function(i){this.chunks.push(i)},a.prototype.onEnd=function(i){i===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},l.Inflate=a,l.inflate=g,l.inflateRaw=function(i,p){return(p=p||{}).raw=!0,g(i,p)},l.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,S,l){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(n){for(var w=Array.prototype.slice.call(arguments,1);w.length;){var k=w.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var f in k)k.hasOwnProperty(f)&&(n[f]=k[f])}}return n},l.shrinkBuf=function(n,w){return n.length===w?n:n.subarray?n.subarray(0,w):(n.length=w,n)};var o={arraySet:function(n,w,k,f,y){if(w.subarray&&n.subarray)n.set(w.subarray(k,k+f),y);else for(var a=0;a<f;a++)n[y+a]=w[k+a]},flattenChunks:function(n){var w,k,f,y,a,g;for(w=f=0,k=n.length;w<k;w++)f+=n[w].length;for(g=new Uint8Array(f),w=y=0,k=n.length;w<k;w++)a=n[w],g.set(a,y),y+=a.length;return g}},r={arraySet:function(n,w,k,f,y){for(var a=0;a<f;a++)n[y+a]=w[k+a]},flattenChunks:function(n){return[].concat.apply([],n)}};l.setTyped=function(n){n?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,o)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,r))},l.setTyped(s)},{}],42:[function(u,S,l){var s=u("./common"),o=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var n=new s.Buf8(256),w=0;w<256;w++)n[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;function k(f,y){if(y<65537&&(f.subarray&&r||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,y));for(var a="",g=0;g<y;g++)a+=String.fromCharCode(f[g]);return a}n[254]=n[254]=1,l.string2buf=function(f){var y,a,g,i,p,h=f.length,x=0;for(i=0;i<h;i++)(64512&(a=f.charCodeAt(i)))==55296&&i+1<h&&(64512&(g=f.charCodeAt(i+1)))==56320&&(a=65536+(a-55296<<10)+(g-56320),i++),x+=a<128?1:a<2048?2:a<65536?3:4;for(y=new s.Buf8(x),i=p=0;p<x;i++)(64512&(a=f.charCodeAt(i)))==55296&&i+1<h&&(64512&(g=f.charCodeAt(i+1)))==56320&&(a=65536+(a-55296<<10)+(g-56320),i++),a<128?y[p++]=a:(a<2048?y[p++]=192|a>>>6:(a<65536?y[p++]=224|a>>>12:(y[p++]=240|a>>>18,y[p++]=128|a>>>12&63),y[p++]=128|a>>>6&63),y[p++]=128|63&a);return y},l.buf2binstring=function(f){return k(f,f.length)},l.binstring2buf=function(f){for(var y=new s.Buf8(f.length),a=0,g=y.length;a<g;a++)y[a]=f.charCodeAt(a);return y},l.buf2string=function(f,y){var a,g,i,p,h=y||f.length,x=new Array(2*h);for(a=g=0;a<h;)if((i=f[a++])<128)x[g++]=i;else if(4<(p=n[i]))x[g++]=65533,a+=p-1;else{for(i&=p===2?31:p===3?15:7;1<p&&a<h;)i=i<<6|63&f[a++],p--;1<p?x[g++]=65533:i<65536?x[g++]=i:(i-=65536,x[g++]=55296|i>>10&1023,x[g++]=56320|1023&i)}return k(x,g)},l.utf8border=function(f,y){var a;for((y=y||f.length)>f.length&&(y=f.length),a=y-1;0<=a&&(192&f[a])==128;)a--;return a<0||a===0?y:a+n[f[a]]>y?a:y}},{"./common":41}],43:[function(u,S,l){S.exports=function(s,o,r,n){for(var w=65535&s|0,k=s>>>16&65535|0,f=0;r!==0;){for(r-=f=2e3<r?2e3:r;k=k+(w=w+o[n++]|0)|0,--f;);w%=65521,k%=65521}return w|k<<16|0}},{}],44:[function(u,S,l){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,S,l){var s=function(){for(var o,r=[],n=0;n<256;n++){o=n;for(var w=0;w<8;w++)o=1&o?3988292384^o>>>1:o>>>1;r[n]=o}return r}();S.exports=function(o,r,n,w){var k=s,f=w+n;o^=-1;for(var y=w;y<f;y++)o=o>>>8^k[255&(o^r[y])];return-1^o}},{}],46:[function(u,S,l){var s,o=u("../utils/common"),r=u("./trees"),n=u("./adler32"),w=u("./crc32"),k=u("./messages"),f=0,y=4,a=0,g=-2,i=-1,p=4,h=2,x=8,C=9,j=286,z=30,U=19,B=2*j+1,v=15,c=3,A=258,W=A+c+1,b=42,R=113,e=1,M=2,Q=3,P=4;function tt(t,L){return t.msg=k[L],L}function D(t){return(t<<1)-(4<t?9:0)}function rt(t){for(var L=t.length;0<=--L;)t[L]=0}function F(t){var L=t.state,N=L.pending;N>t.avail_out&&(N=t.avail_out),N!==0&&(o.arraySet(t.output,L.pending_buf,L.pending_out,N,t.next_out),t.next_out+=N,L.pending_out+=N,t.total_out+=N,t.avail_out-=N,L.pending-=N,L.pending===0&&(L.pending_out=0))}function E(t,L){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,L),t.block_start=t.strstart,F(t.strm)}function X(t,L){t.pending_buf[t.pending++]=L}function $(t,L){t.pending_buf[t.pending++]=L>>>8&255,t.pending_buf[t.pending++]=255&L}function V(t,L){var N,_,m=t.max_chain_length,I=t.strstart,Z=t.prev_length,q=t.nice_match,T=t.strstart>t.w_size-W?t.strstart-(t.w_size-W):0,K=t.window,J=t.w_mask,G=t.prev,et=t.strstart+A,ht=K[I+Z-1],ot=K[I+Z];t.prev_length>=t.good_match&&(m>>=2),q>t.lookahead&&(q=t.lookahead);do if(K[(N=L)+Z]===ot&&K[N+Z-1]===ht&&K[N]===K[I]&&K[++N]===K[I+1]){I+=2,N++;do;while(K[++I]===K[++N]&&K[++I]===K[++N]&&K[++I]===K[++N]&&K[++I]===K[++N]&&K[++I]===K[++N]&&K[++I]===K[++N]&&K[++I]===K[++N]&&K[++I]===K[++N]&&I<et);if(_=A-(et-I),I=et-A,Z<_){if(t.match_start=L,q<=(Z=_))break;ht=K[I+Z-1],ot=K[I+Z]}}while((L=G[L&J])>T&&--m!=0);return Z<=t.lookahead?Z:t.lookahead}function lt(t){var L,N,_,m,I,Z,q,T,K,J,G=t.w_size;do{if(m=t.window_size-t.lookahead-t.strstart,t.strstart>=G+(G-W)){for(o.arraySet(t.window,t.window,G,G,0),t.match_start-=G,t.strstart-=G,t.block_start-=G,L=N=t.hash_size;_=t.head[--L],t.head[L]=G<=_?_-G:0,--N;);for(L=N=G;_=t.prev[--L],t.prev[L]=G<=_?_-G:0,--N;);m+=G}if(t.strm.avail_in===0)break;if(Z=t.strm,q=t.window,T=t.strstart+t.lookahead,K=m,J=void 0,J=Z.avail_in,K<J&&(J=K),N=J===0?0:(Z.avail_in-=J,o.arraySet(q,Z.input,Z.next_in,J,T),Z.state.wrap===1?Z.adler=n(Z.adler,q,J,T):Z.state.wrap===2&&(Z.adler=w(Z.adler,q,J,T)),Z.next_in+=J,Z.total_in+=J,J),t.lookahead+=N,t.lookahead+t.insert>=c)for(I=t.strstart-t.insert,t.ins_h=t.window[I],t.ins_h=(t.ins_h<<t.hash_shift^t.window[I+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[I+c-1])&t.hash_mask,t.prev[I&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=I,I++,t.insert--,!(t.lookahead+t.insert<c)););}while(t.lookahead<W&&t.strm.avail_in!==0)}function ut(t,L){for(var N,_;;){if(t.lookahead<W){if(lt(t),t.lookahead<W&&L===f)return e;if(t.lookahead===0)break}if(N=0,t.lookahead>=c&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+c-1])&t.hash_mask,N=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),N!==0&&t.strstart-N<=t.w_size-W&&(t.match_length=V(t,N)),t.match_length>=c)if(_=r._tr_tally(t,t.strstart-t.match_start,t.match_length-c),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=c){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+c-1])&t.hash_mask,N=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else _=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(_&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<c-1?t.strstart:c-1,L===y?(E(t,!0),t.strm.avail_out===0?Q:P):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:M}function it(t,L){for(var N,_,m;;){if(t.lookahead<W){if(lt(t),t.lookahead<W&&L===f)return e;if(t.lookahead===0)break}if(N=0,t.lookahead>=c&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+c-1])&t.hash_mask,N=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=c-1,N!==0&&t.prev_length<t.max_lazy_match&&t.strstart-N<=t.w_size-W&&(t.match_length=V(t,N),t.match_length<=5&&(t.strategy===1||t.match_length===c&&4096<t.strstart-t.match_start)&&(t.match_length=c-1)),t.prev_length>=c&&t.match_length<=t.prev_length){for(m=t.strstart+t.lookahead-c,_=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-c),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=m&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+c-1])&t.hash_mask,N=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=c-1,t.strstart++,_&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((_=r._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(_=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<c-1?t.strstart:c-1,L===y?(E(t,!0),t.strm.avail_out===0?Q:P):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:M}function Y(t,L,N,_,m){this.good_length=t,this.max_lazy=L,this.nice_length=N,this.max_chain=_,this.func=m}function st(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*B),this.dyn_dtree=new o.Buf16(2*(2*z+1)),this.bl_tree=new o.Buf16(2*(2*U+1)),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(v+1),this.heap=new o.Buf16(2*j+1),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*j+1),rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(t){var L;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=h,(L=t.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?b:R,t.adler=L.wrap===2?0:1,L.last_flush=f,r._tr_init(L),a):tt(t,g)}function dt(t){var L=at(t);return L===a&&function(N){N.window_size=2*N.w_size,rt(N.head),N.max_lazy_match=s[N.level].max_lazy,N.good_match=s[N.level].good_length,N.nice_match=s[N.level].nice_length,N.max_chain_length=s[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=c-1,N.match_available=0,N.ins_h=0}(t.state),L}function ct(t,L,N,_,m,I){if(!t)return g;var Z=1;if(L===i&&(L=6),_<0?(Z=0,_=-_):15<_&&(Z=2,_-=16),m<1||C<m||N!==x||_<8||15<_||L<0||9<L||I<0||p<I)return tt(t,g);_===8&&(_=9);var q=new st;return(t.state=q).strm=t,q.wrap=Z,q.gzhead=null,q.w_bits=_,q.w_size=1<<q.w_bits,q.w_mask=q.w_size-1,q.hash_bits=m+7,q.hash_size=1<<q.hash_bits,q.hash_mask=q.hash_size-1,q.hash_shift=~~((q.hash_bits+c-1)/c),q.window=new o.Buf8(2*q.w_size),q.head=new o.Buf16(q.hash_size),q.prev=new o.Buf16(q.w_size),q.lit_bufsize=1<<m+6,q.pending_buf_size=4*q.lit_bufsize,q.pending_buf=new o.Buf8(q.pending_buf_size),q.d_buf=1*q.lit_bufsize,q.l_buf=3*q.lit_bufsize,q.level=L,q.strategy=I,q.method=N,dt(t)}s=[new Y(0,0,0,0,function(t,L){var N=65535;for(N>t.pending_buf_size-5&&(N=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),t.lookahead===0&&L===f)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var _=t.block_start+N;if((t.strstart===0||t.strstart>=_)&&(t.lookahead=t.strstart-_,t.strstart=_,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-W&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,L===y?(E(t,!0),t.strm.avail_out===0?Q:P):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new Y(4,4,8,4,ut),new Y(4,5,16,8,ut),new Y(4,6,32,32,ut),new Y(4,4,16,16,it),new Y(8,16,32,32,it),new Y(8,16,128,128,it),new Y(8,32,128,256,it),new Y(32,128,258,1024,it),new Y(32,258,258,4096,it)],l.deflateInit=function(t,L){return ct(t,L,x,15,8,0)},l.deflateInit2=ct,l.deflateReset=dt,l.deflateResetKeep=at,l.deflateSetHeader=function(t,L){return t&&t.state?t.state.wrap!==2?g:(t.state.gzhead=L,a):g},l.deflate=function(t,L){var N,_,m,I;if(!t||!t.state||5<L||L<0)return t?tt(t,g):g;if(_=t.state,!t.output||!t.input&&t.avail_in!==0||_.status===666&&L!==y)return tt(t,t.avail_out===0?-5:g);if(_.strm=t,N=_.last_flush,_.last_flush=L,_.status===b)if(_.wrap===2)t.adler=0,X(_,31),X(_,139),X(_,8),_.gzhead?(X(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),X(_,255&_.gzhead.time),X(_,_.gzhead.time>>8&255),X(_,_.gzhead.time>>16&255),X(_,_.gzhead.time>>24&255),X(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),X(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(X(_,255&_.gzhead.extra.length),X(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(t.adler=w(t.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(X(_,0),X(_,0),X(_,0),X(_,0),X(_,0),X(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),X(_,3),_.status=R);else{var Z=x+(_.w_bits-8<<4)<<8;Z|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(Z|=32),Z+=31-Z%31,_.status=R,$(_,Z),_.strstart!==0&&($(_,t.adler>>>16),$(_,65535&t.adler)),t.adler=1}if(_.status===69)if(_.gzhead.extra){for(m=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>m&&(t.adler=w(t.adler,_.pending_buf,_.pending-m,m)),F(t),m=_.pending,_.pending!==_.pending_buf_size));)X(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>m&&(t.adler=w(t.adler,_.pending_buf,_.pending-m,m)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){m=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>m&&(t.adler=w(t.adler,_.pending_buf,_.pending-m,m)),F(t),m=_.pending,_.pending===_.pending_buf_size)){I=1;break}I=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,X(_,I)}while(I!==0);_.gzhead.hcrc&&_.pending>m&&(t.adler=w(t.adler,_.pending_buf,_.pending-m,m)),I===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){m=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>m&&(t.adler=w(t.adler,_.pending_buf,_.pending-m,m)),F(t),m=_.pending,_.pending===_.pending_buf_size)){I=1;break}I=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,X(_,I)}while(I!==0);_.gzhead.hcrc&&_.pending>m&&(t.adler=w(t.adler,_.pending_buf,_.pending-m,m)),I===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&F(t),_.pending+2<=_.pending_buf_size&&(X(_,255&t.adler),X(_,t.adler>>8&255),t.adler=0,_.status=R)):_.status=R),_.pending!==0){if(F(t),t.avail_out===0)return _.last_flush=-1,a}else if(t.avail_in===0&&D(L)<=D(N)&&L!==y)return tt(t,-5);if(_.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||_.lookahead!==0||L!==f&&_.status!==666){var q=_.strategy===2?function(T,K){for(var J;;){if(T.lookahead===0&&(lt(T),T.lookahead===0)){if(K===f)return e;break}if(T.match_length=0,J=r._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,J&&(E(T,!1),T.strm.avail_out===0))return e}return T.insert=0,K===y?(E(T,!0),T.strm.avail_out===0?Q:P):T.last_lit&&(E(T,!1),T.strm.avail_out===0)?e:M}(_,L):_.strategy===3?function(T,K){for(var J,G,et,ht,ot=T.window;;){if(T.lookahead<=A){if(lt(T),T.lookahead<=A&&K===f)return e;if(T.lookahead===0)break}if(T.match_length=0,T.lookahead>=c&&0<T.strstart&&(G=ot[et=T.strstart-1])===ot[++et]&&G===ot[++et]&&G===ot[++et]){ht=T.strstart+A;do;while(G===ot[++et]&&G===ot[++et]&&G===ot[++et]&&G===ot[++et]&&G===ot[++et]&&G===ot[++et]&&G===ot[++et]&&G===ot[++et]&&et<ht);T.match_length=A-(ht-et),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=c?(J=r._tr_tally(T,1,T.match_length-c),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):(J=r._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),J&&(E(T,!1),T.strm.avail_out===0))return e}return T.insert=0,K===y?(E(T,!0),T.strm.avail_out===0?Q:P):T.last_lit&&(E(T,!1),T.strm.avail_out===0)?e:M}(_,L):s[_.level].func(_,L);if(q!==Q&&q!==P||(_.status=666),q===e||q===Q)return t.avail_out===0&&(_.last_flush=-1),a;if(q===M&&(L===1?r._tr_align(_):L!==5&&(r._tr_stored_block(_,0,0,!1),L===3&&(rt(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),F(t),t.avail_out===0))return _.last_flush=-1,a}return L!==y?a:_.wrap<=0?1:(_.wrap===2?(X(_,255&t.adler),X(_,t.adler>>8&255),X(_,t.adler>>16&255),X(_,t.adler>>24&255),X(_,255&t.total_in),X(_,t.total_in>>8&255),X(_,t.total_in>>16&255),X(_,t.total_in>>24&255)):($(_,t.adler>>>16),$(_,65535&t.adler)),F(t),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?a:1)},l.deflateEnd=function(t){var L;return t&&t.state?(L=t.state.status)!==b&&L!==69&&L!==73&&L!==91&&L!==103&&L!==R&&L!==666?tt(t,g):(t.state=null,L===R?tt(t,-3):a):g},l.deflateSetDictionary=function(t,L){var N,_,m,I,Z,q,T,K,J=L.length;if(!t||!t.state||(I=(N=t.state).wrap)===2||I===1&&N.status!==b||N.lookahead)return g;for(I===1&&(t.adler=n(t.adler,L,J,0)),N.wrap=0,J>=N.w_size&&(I===0&&(rt(N.head),N.strstart=0,N.block_start=0,N.insert=0),K=new o.Buf8(N.w_size),o.arraySet(K,L,J-N.w_size,N.w_size,0),L=K,J=N.w_size),Z=t.avail_in,q=t.next_in,T=t.input,t.avail_in=J,t.next_in=0,t.input=L,lt(N);N.lookahead>=c;){for(_=N.strstart,m=N.lookahead-(c-1);N.ins_h=(N.ins_h<<N.hash_shift^N.window[_+c-1])&N.hash_mask,N.prev[_&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=_,_++,--m;);N.strstart=_,N.lookahead=c-1,lt(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=c-1,N.match_available=0,t.next_in=q,t.input=T,t.avail_in=Z,N.wrap=I,a},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,S,l){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,S,l){S.exports=function(s,o){var r,n,w,k,f,y,a,g,i,p,h,x,C,j,z,U,B,v,c,A,W,b,R,e,M;r=s.state,n=s.next_in,e=s.input,w=n+(s.avail_in-5),k=s.next_out,M=s.output,f=k-(o-s.avail_out),y=k+(s.avail_out-257),a=r.dmax,g=r.wsize,i=r.whave,p=r.wnext,h=r.window,x=r.hold,C=r.bits,j=r.lencode,z=r.distcode,U=(1<<r.lenbits)-1,B=(1<<r.distbits)-1;t:do{C<15&&(x+=e[n++]<<C,C+=8,x+=e[n++]<<C,C+=8),v=j[x&U];e:for(;;){if(x>>>=c=v>>>24,C-=c,(c=v>>>16&255)===0)M[k++]=65535&v;else{if(!(16&c)){if(!(64&c)){v=j[(65535&v)+(x&(1<<c)-1)];continue e}if(32&c){r.mode=12;break t}s.msg="invalid literal/length code",r.mode=30;break t}A=65535&v,(c&=15)&&(C<c&&(x+=e[n++]<<C,C+=8),A+=x&(1<<c)-1,x>>>=c,C-=c),C<15&&(x+=e[n++]<<C,C+=8,x+=e[n++]<<C,C+=8),v=z[x&B];r:for(;;){if(x>>>=c=v>>>24,C-=c,!(16&(c=v>>>16&255))){if(!(64&c)){v=z[(65535&v)+(x&(1<<c)-1)];continue r}s.msg="invalid distance code",r.mode=30;break t}if(W=65535&v,C<(c&=15)&&(x+=e[n++]<<C,(C+=8)<c&&(x+=e[n++]<<C,C+=8)),a<(W+=x&(1<<c)-1)){s.msg="invalid distance too far back",r.mode=30;break t}if(x>>>=c,C-=c,(c=k-f)<W){if(i<(c=W-c)&&r.sane){s.msg="invalid distance too far back",r.mode=30;break t}if(R=h,(b=0)===p){if(b+=g-c,c<A){for(A-=c;M[k++]=h[b++],--c;);b=k-W,R=M}}else if(p<c){if(b+=g+p-c,(c-=p)<A){for(A-=c;M[k++]=h[b++],--c;);if(b=0,p<A){for(A-=c=p;M[k++]=h[b++],--c;);b=k-W,R=M}}}else if(b+=p-c,c<A){for(A-=c;M[k++]=h[b++],--c;);b=k-W,R=M}for(;2<A;)M[k++]=R[b++],M[k++]=R[b++],M[k++]=R[b++],A-=3;A&&(M[k++]=R[b++],1<A&&(M[k++]=R[b++]))}else{for(b=k-W;M[k++]=M[b++],M[k++]=M[b++],M[k++]=M[b++],2<(A-=3););A&&(M[k++]=M[b++],1<A&&(M[k++]=M[b++]))}break}}break}}while(n<w&&k<y);n-=A=C>>3,x&=(1<<(C-=A<<3))-1,s.next_in=n,s.next_out=k,s.avail_in=n<w?w-n+5:5-(n-w),s.avail_out=k<y?y-k+257:257-(k-y),r.hold=x,r.bits=C}},{}],49:[function(u,S,l){var s=u("../utils/common"),o=u("./adler32"),r=u("./crc32"),n=u("./inffast"),w=u("./inftrees"),k=1,f=2,y=0,a=-2,g=1,i=852,p=592;function h(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(b){var R;return b&&b.state?(R=b.state,b.total_in=b.total_out=R.total=0,b.msg="",R.wrap&&(b.adler=1&R.wrap),R.mode=g,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new s.Buf32(i),R.distcode=R.distdyn=new s.Buf32(p),R.sane=1,R.back=-1,y):a}function j(b){var R;return b&&b.state?((R=b.state).wsize=0,R.whave=0,R.wnext=0,C(b)):a}function z(b,R){var e,M;return b&&b.state?(M=b.state,R<0?(e=0,R=-R):(e=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?a:(M.window!==null&&M.wbits!==R&&(M.window=null),M.wrap=e,M.wbits=R,j(b))):a}function U(b,R){var e,M;return b?(M=new x,(b.state=M).window=null,(e=z(b,R))!==y&&(b.state=null),e):a}var B,v,c=!0;function A(b){if(c){var R;for(B=new s.Buf32(512),v=new s.Buf32(32),R=0;R<144;)b.lens[R++]=8;for(;R<256;)b.lens[R++]=9;for(;R<280;)b.lens[R++]=7;for(;R<288;)b.lens[R++]=8;for(w(k,b.lens,0,288,B,0,b.work,{bits:9}),R=0;R<32;)b.lens[R++]=5;w(f,b.lens,0,32,v,0,b.work,{bits:5}),c=!1}b.lencode=B,b.lenbits=9,b.distcode=v,b.distbits=5}function W(b,R,e,M){var Q,P=b.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new s.Buf8(P.wsize)),M>=P.wsize?(s.arraySet(P.window,R,e-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(M<(Q=P.wsize-P.wnext)&&(Q=M),s.arraySet(P.window,R,e-M,Q,P.wnext),(M-=Q)?(s.arraySet(P.window,R,e-M,M,0),P.wnext=M,P.whave=P.wsize):(P.wnext+=Q,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=Q))),0}l.inflateReset=j,l.inflateReset2=z,l.inflateResetKeep=C,l.inflateInit=function(b){return U(b,15)},l.inflateInit2=U,l.inflate=function(b,R){var e,M,Q,P,tt,D,rt,F,E,X,$,V,lt,ut,it,Y,st,at,dt,ct,t,L,N,_,m=0,I=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return a;(e=b.state).mode===12&&(e.mode=13),tt=b.next_out,Q=b.output,rt=b.avail_out,P=b.next_in,M=b.input,D=b.avail_in,F=e.hold,E=e.bits,X=D,$=rt,L=y;t:for(;;)switch(e.mode){case g:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(2&e.wrap&&F===35615){I[e.check=0]=255&F,I[1]=F>>>8&255,e.check=r(e.check,I,2,0),E=F=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&F)<<8)+(F>>8))%31){b.msg="incorrect header check",e.mode=30;break}if((15&F)!=8){b.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(F>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){b.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,b.adler=e.check=1,e.mode=512&F?10:12,E=F=0;break;case 2:for(;E<16;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(e.flags=F,(255&e.flags)!=8){b.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){b.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=F>>8&1),512&e.flags&&(I[0]=255&F,I[1]=F>>>8&255,e.check=r(e.check,I,2,0)),E=F=0,e.mode=3;case 3:for(;E<32;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}e.head&&(e.head.time=F),512&e.flags&&(I[0]=255&F,I[1]=F>>>8&255,I[2]=F>>>16&255,I[3]=F>>>24&255,e.check=r(e.check,I,4,0)),E=F=0,e.mode=4;case 4:for(;E<16;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}e.head&&(e.head.xflags=255&F,e.head.os=F>>8),512&e.flags&&(I[0]=255&F,I[1]=F>>>8&255,e.check=r(e.check,I,2,0)),E=F=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}e.length=F,e.head&&(e.head.extra_len=F),512&e.flags&&(I[0]=255&F,I[1]=F>>>8&255,e.check=r(e.check,I,2,0)),E=F=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(D<(V=e.length)&&(V=D),V&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),s.arraySet(e.head.extra,M,P,V,t)),512&e.flags&&(e.check=r(e.check,M,V,P)),D-=V,P+=V,e.length-=V),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(D===0)break t;for(V=0;t=M[P+V++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&V<D;);if(512&e.flags&&(e.check=r(e.check,M,V,P)),D-=V,P+=V,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(D===0)break t;for(V=0;t=M[P+V++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&V<D;);if(512&e.flags&&(e.check=r(e.check,M,V,P)),D-=V,P+=V,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(F!==(65535&e.check)){b.msg="header crc mismatch",e.mode=30;break}E=F=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),b.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}b.adler=e.check=h(F),E=F=0,e.mode=11;case 11:if(e.havedict===0)return b.next_out=tt,b.avail_out=rt,b.next_in=P,b.avail_in=D,e.hold=F,e.bits=E,2;b.adler=e.check=1,e.mode=12;case 12:if(R===5||R===6)break t;case 13:if(e.last){F>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}switch(e.last=1&F,E-=1,3&(F>>>=1)){case 0:e.mode=14;break;case 1:if(A(e),e.mode=20,R!==6)break;F>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:b.msg="invalid block type",e.mode=30}F>>>=2,E-=2;break;case 14:for(F>>>=7&E,E-=7&E;E<32;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if((65535&F)!=(F>>>16^65535)){b.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&F,E=F=0,e.mode=15,R===6)break t;case 15:e.mode=16;case 16:if(V=e.length){if(D<V&&(V=D),rt<V&&(V=rt),V===0)break t;s.arraySet(Q,M,P,V,tt),D-=V,P+=V,rt-=V,tt+=V,e.length-=V;break}e.mode=12;break;case 17:for(;E<14;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(e.nlen=257+(31&F),F>>>=5,E-=5,e.ndist=1+(31&F),F>>>=5,E-=5,e.ncode=4+(15&F),F>>>=4,E-=4,286<e.nlen||30<e.ndist){b.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}e.lens[Z[e.have++]]=7&F,F>>>=3,E-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,N={bits:e.lenbits},L=w(0,e.lens,0,19,e.lencode,0,e.work,N),e.lenbits=N.bits,L){b.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;Y=(m=e.lencode[F&(1<<e.lenbits)-1])>>>16&255,st=65535&m,!((it=m>>>24)<=E);){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(st<16)F>>>=it,E-=it,e.lens[e.have++]=st;else{if(st===16){for(_=it+2;E<_;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(F>>>=it,E-=it,e.have===0){b.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],V=3+(3&F),F>>>=2,E-=2}else if(st===17){for(_=it+3;E<_;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}E-=it,t=0,V=3+(7&(F>>>=it)),F>>>=3,E-=3}else{for(_=it+7;E<_;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}E-=it,t=0,V=11+(127&(F>>>=it)),F>>>=7,E-=7}if(e.have+V>e.nlen+e.ndist){b.msg="invalid bit length repeat",e.mode=30;break}for(;V--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){b.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,N={bits:e.lenbits},L=w(k,e.lens,0,e.nlen,e.lencode,0,e.work,N),e.lenbits=N.bits,L){b.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,N={bits:e.distbits},L=w(f,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,N),e.distbits=N.bits,L){b.msg="invalid distances set",e.mode=30;break}if(e.mode=20,R===6)break t;case 20:e.mode=21;case 21:if(6<=D&&258<=rt){b.next_out=tt,b.avail_out=rt,b.next_in=P,b.avail_in=D,e.hold=F,e.bits=E,n(b,$),tt=b.next_out,Q=b.output,rt=b.avail_out,P=b.next_in,M=b.input,D=b.avail_in,F=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;Y=(m=e.lencode[F&(1<<e.lenbits)-1])>>>16&255,st=65535&m,!((it=m>>>24)<=E);){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(Y&&!(240&Y)){for(at=it,dt=Y,ct=st;Y=(m=e.lencode[ct+((F&(1<<at+dt)-1)>>at)])>>>16&255,st=65535&m,!(at+(it=m>>>24)<=E);){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}F>>>=at,E-=at,e.back+=at}if(F>>>=it,E-=it,e.back+=it,e.length=st,Y===0){e.mode=26;break}if(32&Y){e.back=-1,e.mode=12;break}if(64&Y){b.msg="invalid literal/length code",e.mode=30;break}e.extra=15&Y,e.mode=22;case 22:if(e.extra){for(_=e.extra;E<_;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}e.length+=F&(1<<e.extra)-1,F>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;Y=(m=e.distcode[F&(1<<e.distbits)-1])>>>16&255,st=65535&m,!((it=m>>>24)<=E);){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(!(240&Y)){for(at=it,dt=Y,ct=st;Y=(m=e.distcode[ct+((F&(1<<at+dt)-1)>>at)])>>>16&255,st=65535&m,!(at+(it=m>>>24)<=E);){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}F>>>=at,E-=at,e.back+=at}if(F>>>=it,E-=it,e.back+=it,64&Y){b.msg="invalid distance code",e.mode=30;break}e.offset=st,e.extra=15&Y,e.mode=24;case 24:if(e.extra){for(_=e.extra;E<_;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}e.offset+=F&(1<<e.extra)-1,F>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){b.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(rt===0)break t;if(V=$-rt,e.offset>V){if((V=e.offset-V)>e.whave&&e.sane){b.msg="invalid distance too far back",e.mode=30;break}lt=V>e.wnext?(V-=e.wnext,e.wsize-V):e.wnext-V,V>e.length&&(V=e.length),ut=e.window}else ut=Q,lt=tt-e.offset,V=e.length;for(rt<V&&(V=rt),rt-=V,e.length-=V;Q[tt++]=ut[lt++],--V;);e.length===0&&(e.mode=21);break;case 26:if(rt===0)break t;Q[tt++]=e.length,rt--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(D===0)break t;D--,F|=M[P++]<<E,E+=8}if($-=rt,b.total_out+=$,e.total+=$,$&&(b.adler=e.check=e.flags?r(e.check,Q,$,tt-$):o(e.check,Q,$,tt-$)),$=rt,(e.flags?F:h(F))!==e.check){b.msg="incorrect data check",e.mode=30;break}E=F=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(D===0)break t;D--,F+=M[P++]<<E,E+=8}if(F!==(4294967295&e.total)){b.msg="incorrect length check",e.mode=30;break}E=F=0}e.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return a}return b.next_out=tt,b.avail_out=rt,b.next_in=P,b.avail_in=D,e.hold=F,e.bits=E,(e.wsize||$!==b.avail_out&&e.mode<30&&(e.mode<27||R!==4))&&W(b,b.output,b.next_out,$-b.avail_out)?(e.mode=31,-4):(X-=b.avail_in,$-=b.avail_out,b.total_in+=X,b.total_out+=$,e.total+=$,e.wrap&&$&&(b.adler=e.check=e.flags?r(e.check,Q,$,b.next_out-$):o(e.check,Q,$,b.next_out-$)),b.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(X==0&&$===0||R===4)&&L===y&&(L=-5),L)},l.inflateEnd=function(b){if(!b||!b.state)return a;var R=b.state;return R.window&&(R.window=null),b.state=null,y},l.inflateGetHeader=function(b,R){var e;return b&&b.state&&2&(e=b.state).wrap?((e.head=R).done=!1,y):a},l.inflateSetDictionary=function(b,R){var e,M=R.length;return b&&b.state?(e=b.state).wrap!==0&&e.mode!==11?a:e.mode===11&&o(1,R,M,0)!==e.check?-3:W(b,R,M,M)?(e.mode=31,-4):(e.havedict=1,y):a},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,S,l){var s=u("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(k,f,y,a,g,i,p,h){var x,C,j,z,U,B,v,c,A,W=h.bits,b=0,R=0,e=0,M=0,Q=0,P=0,tt=0,D=0,rt=0,F=0,E=null,X=0,$=new s.Buf16(16),V=new s.Buf16(16),lt=null,ut=0;for(b=0;b<=15;b++)$[b]=0;for(R=0;R<a;R++)$[f[y+R]]++;for(Q=W,M=15;1<=M&&$[M]===0;M--);if(M<Q&&(Q=M),M===0)return g[i++]=20971520,g[i++]=20971520,h.bits=1,0;for(e=1;e<M&&$[e]===0;e++);for(Q<e&&(Q=e),b=D=1;b<=15;b++)if(D<<=1,(D-=$[b])<0)return-1;if(0<D&&(k===0||M!==1))return-1;for(V[1]=0,b=1;b<15;b++)V[b+1]=V[b]+$[b];for(R=0;R<a;R++)f[y+R]!==0&&(p[V[f[y+R]]++]=R);if(B=k===0?(E=lt=p,19):k===1?(E=o,X-=257,lt=r,ut-=257,256):(E=n,lt=w,-1),b=e,U=i,tt=R=F=0,j=-1,z=(rt=1<<(P=Q))-1,k===1&&852<rt||k===2&&592<rt)return 1;for(;;){for(v=b-tt,A=p[R]<B?(c=0,p[R]):p[R]>B?(c=lt[ut+p[R]],E[X+p[R]]):(c=96,0),x=1<<b-tt,e=C=1<<P;g[U+(F>>tt)+(C-=x)]=v<<24|c<<16|A|0,C!==0;);for(x=1<<b-1;F&x;)x>>=1;if(x!==0?(F&=x-1,F+=x):F=0,R++,--$[b]==0){if(b===M)break;b=f[y+p[R]]}if(Q<b&&(F&z)!==j){for(tt===0&&(tt=Q),U+=e,D=1<<(P=b-tt);P+tt<M&&!((D-=$[P+tt])<=0);)P++,D<<=1;if(rt+=1<<P,k===1&&852<rt||k===2&&592<rt)return 1;g[j=F&z]=Q<<24|P<<16|U-i|0}}return F!==0&&(g[U+F]=b-tt<<24|64<<16|0),h.bits=Q,0}},{"../utils/common":41}],51:[function(u,S,l){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,S,l){var s=u("../utils/common"),o=0,r=1;function n(m){for(var I=m.length;0<=--I;)m[I]=0}var w=0,k=29,f=256,y=f+1+k,a=30,g=19,i=2*y+1,p=15,h=16,x=7,C=256,j=16,z=17,U=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(y+2));n(W);var b=new Array(2*a);n(b);var R=new Array(512);n(R);var e=new Array(256);n(e);var M=new Array(k);n(M);var Q,P,tt,D=new Array(a);function rt(m,I,Z,q,T){this.static_tree=m,this.extra_bits=I,this.extra_base=Z,this.elems=q,this.max_length=T,this.has_stree=m&&m.length}function F(m,I){this.dyn_tree=m,this.max_code=0,this.stat_desc=I}function E(m){return m<256?R[m]:R[256+(m>>>7)]}function X(m,I){m.pending_buf[m.pending++]=255&I,m.pending_buf[m.pending++]=I>>>8&255}function $(m,I,Z){m.bi_valid>h-Z?(m.bi_buf|=I<<m.bi_valid&65535,X(m,m.bi_buf),m.bi_buf=I>>h-m.bi_valid,m.bi_valid+=Z-h):(m.bi_buf|=I<<m.bi_valid&65535,m.bi_valid+=Z)}function V(m,I,Z){$(m,Z[2*I],Z[2*I+1])}function lt(m,I){for(var Z=0;Z|=1&m,m>>>=1,Z<<=1,0<--I;);return Z>>>1}function ut(m,I,Z){var q,T,K=new Array(p+1),J=0;for(q=1;q<=p;q++)K[q]=J=J+Z[q-1]<<1;for(T=0;T<=I;T++){var G=m[2*T+1];G!==0&&(m[2*T]=lt(K[G]++,G))}}function it(m){var I;for(I=0;I<y;I++)m.dyn_ltree[2*I]=0;for(I=0;I<a;I++)m.dyn_dtree[2*I]=0;for(I=0;I<g;I++)m.bl_tree[2*I]=0;m.dyn_ltree[2*C]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function Y(m){8<m.bi_valid?X(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function st(m,I,Z,q){var T=2*I,K=2*Z;return m[T]<m[K]||m[T]===m[K]&&q[I]<=q[Z]}function at(m,I,Z){for(var q=m.heap[Z],T=Z<<1;T<=m.heap_len&&(T<m.heap_len&&st(I,m.heap[T+1],m.heap[T],m.depth)&&T++,!st(I,q,m.heap[T],m.depth));)m.heap[Z]=m.heap[T],Z=T,T<<=1;m.heap[Z]=q}function dt(m,I,Z){var q,T,K,J,G=0;if(m.last_lit!==0)for(;q=m.pending_buf[m.d_buf+2*G]<<8|m.pending_buf[m.d_buf+2*G+1],T=m.pending_buf[m.l_buf+G],G++,q===0?V(m,T,I):(V(m,(K=e[T])+f+1,I),(J=B[K])!==0&&$(m,T-=M[K],J),V(m,K=E(--q),Z),(J=v[K])!==0&&$(m,q-=D[K],J)),G<m.last_lit;);V(m,C,I)}function ct(m,I){var Z,q,T,K=I.dyn_tree,J=I.stat_desc.static_tree,G=I.stat_desc.has_stree,et=I.stat_desc.elems,ht=-1;for(m.heap_len=0,m.heap_max=i,Z=0;Z<et;Z++)K[2*Z]!==0?(m.heap[++m.heap_len]=ht=Z,m.depth[Z]=0):K[2*Z+1]=0;for(;m.heap_len<2;)K[2*(T=m.heap[++m.heap_len]=ht<2?++ht:0)]=1,m.depth[T]=0,m.opt_len--,G&&(m.static_len-=J[2*T+1]);for(I.max_code=ht,Z=m.heap_len>>1;1<=Z;Z--)at(m,K,Z);for(T=et;Z=m.heap[1],m.heap[1]=m.heap[m.heap_len--],at(m,K,1),q=m.heap[1],m.heap[--m.heap_max]=Z,m.heap[--m.heap_max]=q,K[2*T]=K[2*Z]+K[2*q],m.depth[T]=(m.depth[Z]>=m.depth[q]?m.depth[Z]:m.depth[q])+1,K[2*Z+1]=K[2*q+1]=T,m.heap[1]=T++,at(m,K,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(ot,pt){var wt,gt,bt,ft,_t,kt,yt=pt.dyn_tree,Ft=pt.max_code,ae=pt.stat_desc.static_tree,oe=pt.stat_desc.has_stree,le=pt.stat_desc.extra_bits,Pt=pt.stat_desc.extra_base,Ct=pt.stat_desc.max_length,At=0;for(ft=0;ft<=p;ft++)ot.bl_count[ft]=0;for(yt[2*ot.heap[ot.heap_max]+1]=0,wt=ot.heap_max+1;wt<i;wt++)Ct<(ft=yt[2*yt[2*(gt=ot.heap[wt])+1]+1]+1)&&(ft=Ct,At++),yt[2*gt+1]=ft,Ft<gt||(ot.bl_count[ft]++,_t=0,Pt<=gt&&(_t=le[gt-Pt]),kt=yt[2*gt],ot.opt_len+=kt*(ft+_t),oe&&(ot.static_len+=kt*(ae[2*gt+1]+_t)));if(At!==0){do{for(ft=Ct-1;ot.bl_count[ft]===0;)ft--;ot.bl_count[ft]--,ot.bl_count[ft+1]+=2,ot.bl_count[Ct]--,At-=2}while(0<At);for(ft=Ct;ft!==0;ft--)for(gt=ot.bl_count[ft];gt!==0;)Ft<(bt=ot.heap[--wt])||(yt[2*bt+1]!==ft&&(ot.opt_len+=(ft-yt[2*bt+1])*yt[2*bt],yt[2*bt+1]=ft),gt--)}}(m,I),ut(K,ht,m.bl_count)}function t(m,I,Z){var q,T,K=-1,J=I[1],G=0,et=7,ht=4;for(J===0&&(et=138,ht=3),I[2*(Z+1)+1]=65535,q=0;q<=Z;q++)T=J,J=I[2*(q+1)+1],++G<et&&T===J||(G<ht?m.bl_tree[2*T]+=G:T!==0?(T!==K&&m.bl_tree[2*T]++,m.bl_tree[2*j]++):G<=10?m.bl_tree[2*z]++:m.bl_tree[2*U]++,K=T,ht=(G=0)===J?(et=138,3):T===J?(et=6,3):(et=7,4))}function L(m,I,Z){var q,T,K=-1,J=I[1],G=0,et=7,ht=4;for(J===0&&(et=138,ht=3),q=0;q<=Z;q++)if(T=J,J=I[2*(q+1)+1],!(++G<et&&T===J)){if(G<ht)for(;V(m,T,m.bl_tree),--G!=0;);else T!==0?(T!==K&&(V(m,T,m.bl_tree),G--),V(m,j,m.bl_tree),$(m,G-3,2)):G<=10?(V(m,z,m.bl_tree),$(m,G-3,3)):(V(m,U,m.bl_tree),$(m,G-11,7));K=T,ht=(G=0)===J?(et=138,3):T===J?(et=6,3):(et=7,4)}}n(D);var N=!1;function _(m,I,Z,q){$(m,(w<<1)+(q?1:0),3),function(T,K,J,G){Y(T),X(T,J),X(T,~J),s.arraySet(T.pending_buf,T.window,K,J,T.pending),T.pending+=J}(m,I,Z)}l._tr_init=function(m){N||(function(){var I,Z,q,T,K,J=new Array(p+1);for(T=q=0;T<k-1;T++)for(M[T]=q,I=0;I<1<<B[T];I++)e[q++]=T;for(e[q-1]=T,T=K=0;T<16;T++)for(D[T]=K,I=0;I<1<<v[T];I++)R[K++]=T;for(K>>=7;T<a;T++)for(D[T]=K<<7,I=0;I<1<<v[T]-7;I++)R[256+K++]=T;for(Z=0;Z<=p;Z++)J[Z]=0;for(I=0;I<=143;)W[2*I+1]=8,I++,J[8]++;for(;I<=255;)W[2*I+1]=9,I++,J[9]++;for(;I<=279;)W[2*I+1]=7,I++,J[7]++;for(;I<=287;)W[2*I+1]=8,I++,J[8]++;for(ut(W,y+1,J),I=0;I<a;I++)b[2*I+1]=5,b[2*I]=lt(I,5);Q=new rt(W,B,f+1,y,p),P=new rt(b,v,0,a,p),tt=new rt(new Array(0),c,0,g,x)}(),N=!0),m.l_desc=new F(m.dyn_ltree,Q),m.d_desc=new F(m.dyn_dtree,P),m.bl_desc=new F(m.bl_tree,tt),m.bi_buf=0,m.bi_valid=0,it(m)},l._tr_stored_block=_,l._tr_flush_block=function(m,I,Z,q){var T,K,J=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(G){var et,ht=4093624447;for(et=0;et<=31;et++,ht>>>=1)if(1&ht&&G.dyn_ltree[2*et]!==0)return o;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return r;for(et=32;et<f;et++)if(G.dyn_ltree[2*et]!==0)return r;return o}(m)),ct(m,m.l_desc),ct(m,m.d_desc),J=function(G){var et;for(t(G,G.dyn_ltree,G.l_desc.max_code),t(G,G.dyn_dtree,G.d_desc.max_code),ct(G,G.bl_desc),et=g-1;3<=et&&G.bl_tree[2*A[et]+1]===0;et--);return G.opt_len+=3*(et+1)+5+5+4,et}(m),T=m.opt_len+3+7>>>3,(K=m.static_len+3+7>>>3)<=T&&(T=K)):T=K=Z+5,Z+4<=T&&I!==-1?_(m,I,Z,q):m.strategy===4||K===T?($(m,2+(q?1:0),3),dt(m,W,b)):($(m,4+(q?1:0),3),function(G,et,ht,ot){var pt;for($(G,et-257,5),$(G,ht-1,5),$(G,ot-4,4),pt=0;pt<ot;pt++)$(G,G.bl_tree[2*A[pt]+1],3);L(G,G.dyn_ltree,et-1),L(G,G.dyn_dtree,ht-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,J+1),dt(m,m.dyn_ltree,m.dyn_dtree)),it(m),q&&Y(m)},l._tr_tally=function(m,I,Z){return m.pending_buf[m.d_buf+2*m.last_lit]=I>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&I,m.pending_buf[m.l_buf+m.last_lit]=255&Z,m.last_lit++,I===0?m.dyn_ltree[2*Z]++:(m.matches++,I--,m.dyn_ltree[2*(e[Z]+f+1)]++,m.dyn_dtree[2*E(I)]++),m.last_lit===m.lit_bufsize-1},l._tr_align=function(m){$(m,2,3),V(m,C,W),function(I){I.bi_valid===16?(X(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(u,S,l){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,S,l){(function(s){(function(o,r){if(!o.setImmediate){var n,w,k,f,y=1,a={},g=!1,i=o.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(o);p=p&&p.setTimeout?p:o,n={}.toString.call(o.process)==="[object process]"?function(j){process.nextTick(function(){x(j)})}:function(){if(o.postMessage&&!o.importScripts){var j=!0,z=o.onmessage;return o.onmessage=function(){j=!1},o.postMessage("","*"),o.onmessage=z,j}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",C,!1):o.attachEvent("onmessage",C),function(j){o.postMessage(f+j,"*")}):o.MessageChannel?((k=new MessageChannel).port1.onmessage=function(j){x(j.data)},function(j){k.port2.postMessage(j)}):i&&"onreadystatechange"in i.createElement("script")?(w=i.documentElement,function(j){var z=i.createElement("script");z.onreadystatechange=function(){x(j),z.onreadystatechange=null,w.removeChild(z),z=null},w.appendChild(z)}):function(j){setTimeout(x,0,j)},p.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var z=new Array(arguments.length-1),U=0;U<z.length;U++)z[U]=arguments[U+1];var B={callback:j,args:z};return a[y]=B,n(y),y++},p.clearImmediate=h}function h(j){delete a[j]}function x(j){if(g)setTimeout(x,0,j);else{var z=a[j];if(z){g=!0;try{(function(U){var B=U.callback,v=U.args;switch(v.length){case 0:B();break;case 1:B(v[0]);break;case 2:B(v[0],v[1]);break;case 3:B(v[0],v[1],v[2]);break;default:B.apply(r,v)}})(z)}finally{h(j),g=!1}}}}function C(j){j.source===o&&typeof j.data=="string"&&j.data.indexOf(f)===0&&x(+j.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof jt<"u"?jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ee);var We=ee.exports;const Ze=$t(We);var re={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(O,H){(function(u,S){O.exports=S()})(jt,function u(){var S=typeof self<"u"?self:typeof window<"u"?window:S!==void 0?S:{},l=!S.document&&!!S.postMessage,s=S.IS_PAPA_WORKER||!1,o={},r=0,n={parse:function(v,c){var A=(c=c||{}).dynamicTyping||!1;if(B(A)&&(c.dynamicTypingFunction=A,A={}),c.dynamicTyping=A,c.transform=!!B(c.transform)&&c.transform,c.worker&&n.WORKERS_SUPPORTED){var W=function(){if(!n.WORKERS_SUPPORTED)return!1;var R=(M=S.URL||S.webkitURL||null,Q=u.toString(),n.BLOB_URL||(n.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Q,")();"],{type:"text/javascript"})))),e=new S.Worker(R),M,Q;return e.onmessage=x,e.id=r++,o[e.id]=e}();return W.userStep=c.step,W.userChunk=c.chunk,W.userComplete=c.complete,W.userError=c.error,c.step=B(c.step),c.chunk=B(c.chunk),c.complete=B(c.complete),c.error=B(c.error),delete c.worker,void W.postMessage({input:v,config:c,workerId:W.id})}var b=null;return n.NODE_STREAM_INPUT,typeof v=="string"?(v=function(R){return R.charCodeAt(0)===65279?R.slice(1):R}(v),b=c.download?new f(c):new a(c)):v.readable===!0&&B(v.read)&&B(v.on)?b=new g(c):(S.File&&v instanceof File||v instanceof Object)&&(b=new y(c)),b.stream(v)},unparse:function(v,c){var A=!1,W=!0,b=",",R=`\r
`,e='"',M=e+e,Q=!1,P=null,tt=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||n.BAD_DELIMITERS.filter(function(E){return c.delimiter.indexOf(E)!==-1}).length||(b=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(A=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(Q=c.skipEmptyLines),typeof c.newline=="string"&&(R=c.newline),typeof c.quoteChar=="string"&&(e=c.quoteChar),typeof c.header=="boolean"&&(W=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");P=c.columns}c.escapeChar!==void 0&&(M=c.escapeChar+e),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(tt=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var D=new RegExp(p(e),"g");if(typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(v)){if(!v.length||Array.isArray(v[0]))return rt(null,v,Q);if(typeof v[0]=="object")return rt(P||Object.keys(v[0]),v,Q)}else if(typeof v=="object")return typeof v.data=="string"&&(v.data=JSON.parse(v.data)),Array.isArray(v.data)&&(v.fields||(v.fields=v.meta&&v.meta.fields||P),v.fields||(v.fields=Array.isArray(v.data[0])?v.fields:typeof v.data[0]=="object"?Object.keys(v.data[0]):[]),Array.isArray(v.data[0])||typeof v.data[0]=="object"||(v.data=[v.data])),rt(v.fields||[],v.data||[],Q);throw new Error("Unable to serialize unrecognized input");function rt(E,X,$){var V="";typeof E=="string"&&(E=JSON.parse(E)),typeof X=="string"&&(X=JSON.parse(X));var lt=Array.isArray(E)&&0<E.length,ut=!Array.isArray(X[0]);if(lt&&W){for(var it=0;it<E.length;it++)0<it&&(V+=b),V+=F(E[it],it);0<X.length&&(V+=R)}for(var Y=0;Y<X.length;Y++){var st=lt?E.length:X[Y].length,at=!1,dt=lt?Object.keys(X[Y]).length===0:X[Y].length===0;if($&&!lt&&(at=$==="greedy"?X[Y].join("").trim()==="":X[Y].length===1&&X[Y][0].length===0),$==="greedy"&&lt){for(var ct=[],t=0;t<st;t++){var L=ut?E[t]:t;ct.push(X[Y][L])}at=ct.join("").trim()===""}if(!at){for(var N=0;N<st;N++){0<N&&!dt&&(V+=b);var _=lt&&ut?E[N]:N;V+=F(X[Y][_],N)}Y<X.length-1&&(!$||0<st&&!dt)&&(V+=R)}}return V}function F(E,X){if(E==null)return"";if(E.constructor===Date)return JSON.stringify(E).slice(1,25);var $=!1;tt&&typeof E=="string"&&tt.test(E)&&(E="'"+E,$=!0);var V=E.toString().replace(D,M);return($=$||A===!0||typeof A=="function"&&A(E,X)||Array.isArray(A)&&A[X]||function(lt,ut){for(var it=0;it<ut.length;it++)if(-1<lt.indexOf(ut[it]))return!0;return!1}(V,n.BAD_DELIMITERS)||-1<V.indexOf(b)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?e+V+e:V}}};if(n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!l&&!!S.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=h,n.ParserHandle=i,n.NetworkStreamer=f,n.FileStreamer=y,n.StringStreamer=a,n.ReadableStreamStreamer=g,S.jQuery){var w=S.jQuery;w.fn.parse=function(v){var c=v.config||{},A=[];return this.each(function(R){if(!(w(this).prop("tagName").toUpperCase()==="INPUT"&&w(this).attr("type").toLowerCase()==="file"&&S.FileReader)||!this.files||this.files.length===0)return!0;for(var e=0;e<this.files.length;e++)A.push({file:this.files[e],inputElem:this,instanceConfig:w.extend({},c)})}),W(),this;function W(){if(A.length!==0){var R,e,M,Q,P=A[0];if(B(v.before)){var tt=v.before(P.file,P.inputElem);if(typeof tt=="object"){if(tt.action==="abort")return R="AbortError",e=P.file,M=P.inputElem,Q=tt.reason,void(B(v.error)&&v.error({name:R},e,M,Q));if(tt.action==="skip")return void b();typeof tt.config=="object"&&(P.instanceConfig=w.extend(P.instanceConfig,tt.config))}else if(tt==="skip")return void b()}var D=P.instanceConfig.complete;P.instanceConfig.complete=function(rt){B(D)&&D(rt,P.file,P.inputElem),b()},n.parse(P.file,P.instanceConfig)}else B(v.complete)&&v.complete()}function b(){A.splice(0,1),W()}}}function k(v){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var A=z(c);A.chunkSize=parseInt(A.chunkSize),c.step||c.chunk||(A.chunkSize=null),this._handle=new i(A),(this._handle.streamer=this)._config=A}).call(this,v),this.parseChunk=function(c,A){if(this.isFirstChunk&&B(this._config.beforeFirstChunk)){var W=this._config.beforeFirstChunk(c);W!==void 0&&(c=W)}this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+c;this._partialLine="";var R=this._handle.parse(b,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var e=R.meta.cursor;this._finished||(this._partialLine=b.substring(e-this._baseIndex),this._baseIndex=e),R&&R.data&&(this._rowCount+=R.data.length);var M=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)S.postMessage({results:R,workerId:n.WORKER_ID,finished:M});else if(B(this._config.chunk)&&!A){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);R=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!M||!B(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(c){B(this._config.error)?this._config.error(c):s&&this._config.error&&S.postMessage({workerId:n.WORKER_ID,error:c,finished:!1})}}function f(v){var c;(v=v||{}).chunkSize||(v.chunkSize=n.RemoteChunkSize),k.call(this,v),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),l||(c.onload=U(this._chunkLoaded,this),c.onerror=U(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var A=this._config.downloadRequestHeaders;for(var W in A)c.setRequestHeader(W,A[W])}if(this._config.chunkSize){var b=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+b)}try{c.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}l&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(A){var W=A.getResponseHeader("Content-Range");return W===null?-1:parseInt(W.substring(W.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(A){var W=c.statusText||A;this._sendError(new Error(W))}}function y(v){var c,A;(v=v||{}).chunkSize||(v.chunkSize=n.LocalChunkSize),k.call(this,v);var W=typeof FileReader<"u";this.stream=function(b){this._input=b,A=b.slice||b.webkitSlice||b.mozSlice,W?((c=new FileReader).onload=U(this._chunkLoaded,this),c.onerror=U(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var b=this._input;if(this._config.chunkSize){var R=Math.min(this._start+this._config.chunkSize,this._input.size);b=A.call(b,this._start,R)}var e=c.readAsText(b,this._config.encoding);W||this._chunkLoaded({target:{result:e}})},this._chunkLoaded=function(b){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(b.target.result)},this._chunkError=function(){this._sendError(c.error)}}function a(v){var c;k.call(this,v=v||{}),this.stream=function(A){return c=A,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var A,W=this._config.chunkSize;return W?(A=c.substring(0,W),c=c.substring(W)):(A=c,c=""),this._finished=!c,this.parseChunk(A)}}}function g(v){k.call(this,v=v||{});var c=[],A=!0,W=!1;this.pause=function(){k.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){k.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(b){this._input=b,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){W&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):A=!0},this._streamData=U(function(b){try{c.push(typeof b=="string"?b:b.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(R){this._streamError(R)}},this),this._streamError=U(function(b){this._streamCleanUp(),this._sendError(b)},this),this._streamEnd=U(function(){this._streamCleanUp(),W=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(v){var c,A,W,b=Math.pow(2,53),R=-b,e=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Q=this,P=0,tt=0,D=!1,rt=!1,F=[],E={data:[],errors:[],meta:{}};if(B(v.step)){var X=v.step;v.step=function(Y){if(E=Y,lt())V();else{if(V(),E.data.length===0)return;P+=Y.data.length,v.preview&&P>v.preview?A.abort():(E.data=E.data[0],X(E,Q))}}}function $(Y){return v.skipEmptyLines==="greedy"?Y.join("").trim()==="":Y.length===1&&Y[0].length===0}function V(){return E&&W&&(it("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),W=!1),v.skipEmptyLines&&(E.data=E.data.filter(function(Y){return!$(Y)})),lt()&&function(){if(!E)return;function Y(at,dt){B(v.transformHeader)&&(at=v.transformHeader(at,dt)),F.push(at)}if(Array.isArray(E.data[0])){for(var st=0;lt()&&st<E.data.length;st++)E.data[st].forEach(Y);E.data.splice(0,1)}else E.data.forEach(Y)}(),function(){if(!E||!v.header&&!v.dynamicTyping&&!v.transform)return E;function Y(at,dt){var ct,t=v.header?{}:[];for(ct=0;ct<at.length;ct++){var L=ct,N=at[ct];v.header&&(L=ct>=F.length?"__parsed_extra":F[ct]),v.transform&&(N=v.transform(N,L)),N=ut(L,N),L==="__parsed_extra"?(t[L]=t[L]||[],t[L].push(N)):t[L]=N}return v.header&&(ct>F.length?it("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+ct,tt+dt):ct<F.length&&it("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+ct,tt+dt)),t}var st=1;return!E.data.length||Array.isArray(E.data[0])?(E.data=E.data.map(Y),st=E.data.length):E.data=Y(E.data,0),v.header&&E.meta&&(E.meta.fields=F),tt+=st,E}()}function lt(){return v.header&&F.length===0}function ut(Y,st){return at=Y,v.dynamicTypingFunction&&v.dynamicTyping[at]===void 0&&(v.dynamicTyping[at]=v.dynamicTypingFunction(at)),(v.dynamicTyping[at]||v.dynamicTyping)===!0?st==="true"||st==="TRUE"||st!=="false"&&st!=="FALSE"&&(function(dt){if(e.test(dt)){var ct=parseFloat(dt);if(R<ct&&ct<b)return!0}return!1}(st)?parseFloat(st):M.test(st)?new Date(st):st===""?null:st):st;var at}function it(Y,st,at,dt){var ct={type:Y,code:st,message:at};dt!==void 0&&(ct.row=dt),E.errors.push(ct)}this.parse=function(Y,st,at){var dt=v.quoteChar||'"';if(v.newline||(v.newline=function(L,N){L=L.substring(0,1048576);var _=new RegExp(p(N)+"([^]*?)"+p(N),"gm"),m=(L=L.replace(_,"")).split("\r"),I=L.split(`
`),Z=1<I.length&&I[0].length<m[0].length;if(m.length===1||Z)return`
`;for(var q=0,T=0;T<m.length;T++)m[T][0]===`
`&&q++;return q>=m.length/2?`\r
`:"\r"}(Y,dt)),W=!1,v.delimiter)B(v.delimiter)&&(v.delimiter=v.delimiter(Y),E.meta.delimiter=v.delimiter);else{var ct=function(L,N,_,m,I){var Z,q,T,K;I=I||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var J=0;J<I.length;J++){var G=I[J],et=0,ht=0,ot=0;T=void 0;for(var pt=new h({comments:m,delimiter:G,newline:N,preview:10}).parse(L),wt=0;wt<pt.data.length;wt++)if(_&&$(pt.data[wt]))ot++;else{var gt=pt.data[wt].length;ht+=gt,T!==void 0?0<gt&&(et+=Math.abs(gt-T),T=gt):T=gt}0<pt.data.length&&(ht/=pt.data.length-ot),(q===void 0||et<=q)&&(K===void 0||K<ht)&&1.99<ht&&(q=et,Z=G,K=ht)}return{successful:!!(v.delimiter=Z),bestDelimiter:Z}}(Y,v.newline,v.skipEmptyLines,v.comments,v.delimitersToGuess);ct.successful?v.delimiter=ct.bestDelimiter:(W=!0,v.delimiter=n.DefaultDelimiter),E.meta.delimiter=v.delimiter}var t=z(v);return v.preview&&v.header&&t.preview++,c=Y,A=new h(t),E=A.parse(c,st,at),V(),D?{meta:{paused:!0}}:E||{meta:{paused:!1}}},this.paused=function(){return D},this.pause=function(){D=!0,A.abort(),c=B(v.chunk)?"":c.substring(A.getCharIndex())},this.resume=function(){Q.streamer._halted?(D=!1,Q.streamer.parseChunk(c,!0)):setTimeout(Q.resume,3)},this.aborted=function(){return rt},this.abort=function(){rt=!0,A.abort(),E.meta.aborted=!0,B(v.complete)&&v.complete(E),c=""}}function p(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(v){var c,A=(v=v||{}).delimiter,W=v.newline,b=v.comments,R=v.step,e=v.preview,M=v.fastMode,Q=c=v.quoteChar===void 0||v.quoteChar===null?'"':v.quoteChar;if(v.escapeChar!==void 0&&(Q=v.escapeChar),(typeof A!="string"||-1<n.BAD_DELIMITERS.indexOf(A))&&(A=","),b===A)throw new Error("Comment character same as delimiter");b===!0?b="#":(typeof b!="string"||-1<n.BAD_DELIMITERS.indexOf(b))&&(b=!1),W!==`
`&&W!=="\r"&&W!==`\r
`&&(W=`
`);var P=0,tt=!1;this.parse=function(D,rt,F){if(typeof D!="string")throw new Error("Input must be a string");var E=D.length,X=A.length,$=W.length,V=b.length,lt=B(R),ut=[],it=[],Y=[],st=P=0;if(!D)return bt();if(v.header&&!rt){var at=D.split(W)[0].split(A),dt=[],ct={},t=!1;for(var L in at){var N=at[L];B(v.transformHeader)&&(N=v.transformHeader(N,L));var _=N,m=ct[N]||0;for(0<m&&(t=!0,_=N+"_"+m),ct[N]=m+1;dt.includes(_);)_=_+"_"+m;dt.push(_)}if(t){var I=D.split(W);I[0]=dt.join(A),D=I.join(W)}}if(M||M!==!1&&D.indexOf(c)===-1){for(var Z=D.split(W),q=0;q<Z.length;q++){if(Y=Z[q],P+=Y.length,q!==Z.length-1)P+=W.length;else if(F)return bt();if(!b||Y.substring(0,V)!==b){if(lt){if(ut=[],ot(Y.split(A)),ft(),tt)return bt()}else ot(Y.split(A));if(e&&e<=q)return ut=ut.slice(0,e),bt(!0)}}return bt()}for(var T=D.indexOf(A,P),K=D.indexOf(W,P),J=new RegExp(p(Q)+p(c),"g"),G=D.indexOf(c,P);;)if(D[P]!==c)if(b&&Y.length===0&&D.substring(P,P+V)===b){if(K===-1)return bt();P=K+$,K=D.indexOf(W,P),T=D.indexOf(A,P)}else if(T!==-1&&(T<K||K===-1))Y.push(D.substring(P,T)),P=T+X,T=D.indexOf(A,P);else{if(K===-1)break;if(Y.push(D.substring(P,K)),gt(K+$),lt&&(ft(),tt))return bt();if(e&&ut.length>=e)return bt(!0)}else for(G=P,P++;;){if((G=D.indexOf(c,G+1))===-1)return F||it.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ut.length,index:P}),wt();if(G===E-1)return wt(D.substring(P,G).replace(J,c));if(c!==Q||D[G+1]!==Q){if(c===Q||G===0||D[G-1]!==Q){T!==-1&&T<G+1&&(T=D.indexOf(A,G+1)),K!==-1&&K<G+1&&(K=D.indexOf(W,G+1));var et=pt(K===-1?T:Math.min(T,K));if(D.substr(G+1+et,X)===A){Y.push(D.substring(P,G).replace(J,c)),D[P=G+1+et+X]!==c&&(G=D.indexOf(c,P)),T=D.indexOf(A,P),K=D.indexOf(W,P);break}var ht=pt(K);if(D.substring(G+1+ht,G+1+ht+$)===W){if(Y.push(D.substring(P,G).replace(J,c)),gt(G+1+ht+$),T=D.indexOf(A,P),G=D.indexOf(c,P),lt&&(ft(),tt))return bt();if(e&&ut.length>=e)return bt(!0);break}it.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ut.length,index:P}),G++}}else G++}return wt();function ot(_t){ut.push(_t),st=P}function pt(_t){var kt=0;if(_t!==-1){var yt=D.substring(G+1,_t);yt&&yt.trim()===""&&(kt=yt.length)}return kt}function wt(_t){return F||(_t===void 0&&(_t=D.substring(P)),Y.push(_t),P=E,ot(Y),lt&&ft()),bt()}function gt(_t){P=_t,ot(Y),Y=[],K=D.indexOf(W,P)}function bt(_t){return{data:ut,errors:it,meta:{delimiter:A,linebreak:W,aborted:tt,truncated:!!_t,cursor:st+(rt||0)}}}function ft(){R(bt()),ut=[],it=[]}},this.abort=function(){tt=!0},this.getCharIndex=function(){return P}}function x(v){var c=v.data,A=o[c.workerId],W=!1;if(c.error)A.userError(c.error,c.file);else if(c.results&&c.results.data){var b={abort:function(){W=!0,C(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(B(A.userStep)){for(var R=0;R<c.results.data.length&&(A.userStep({data:c.results.data[R],errors:c.results.errors,meta:c.results.meta},b),!W);R++);delete c.results}else B(A.userChunk)&&(A.userChunk(c.results,b,c.file),delete c.results)}c.finished&&!W&&C(c.workerId,c.results)}function C(v,c){var A=o[v];B(A.userComplete)&&A.userComplete(c),A.terminate(),delete o[v]}function j(){throw new Error("Not implemented.")}function z(v){if(typeof v!="object"||v===null)return v;var c=Array.isArray(v)?[]:{};for(var A in v)c[A]=z(v[A]);return c}function U(v,c){return function(){v.apply(c,arguments)}}function B(v){return typeof v=="function"}return s&&(S.onmessage=function(v){var c=v.data;if(n.WORKER_ID===void 0&&c&&(n.WORKER_ID=c.workerId),typeof c.input=="string")S.postMessage({workerId:n.WORKER_ID,results:n.parse(c.input,c.config),finished:!0});else if(S.File&&c.input instanceof File||c.input instanceof Object){var A=n.parse(c.input,c.config);A&&S.postMessage({workerId:n.WORKER_ID,results:A,finished:!0})}}),(f.prototype=Object.create(k.prototype)).constructor=f,(y.prototype=Object.create(k.prototype)).constructor=y,(a.prototype=Object.create(a.prototype)).constructor=a,(g.prototype=Object.create(k.prototype)).constructor=g,n})})(re);var He=re.exports;const ne=$t(He),qe=O=>new Promise(H=>{const u=new FileReader;u.onload=function(S){var l;(l=S.target)!=null&&l.result&&Ze.loadAsync(S.target.result).then(function(s){H(s)})},u.readAsArrayBuffer(O)}),Zt=async O=>{const H=[],u=[];for(let S=0;S<O.length;S++){const l=O[S];if(l.type==="application/x-zip-compressed"){const s=await qe(l),o=[];s.forEach(function(r,n){(n.name.endsWith(".csv")||n.name.endsWith(".xml"))&&o.push({object:n})}),H.push({name:l.name,files:o})}else l.type==="text/csv"||l.type==="text/xml"?u.push(l):vt("Unsupported file: "+l.name,"error")}return[H,u]},Ge=O=>{const H=[];return O.forEach((u,S)=>{u.files.forEach((l,s)=>{H.push({file:s,zip:S})})}),H},ie=O=>{const H=Bt(O);if(H)return me(H==null?void 0:H.blocksProps,H==null?void 0:H.desktop,H==null?void 0:H.innerBlocks)},se=O=>{var l;((l=O.at(-1))==null?void 0:l.length)===1&&O.pop();const H=O.reduce((s,o)=>Math.max(s,o.length),0),u={alignment:St.alignment,enableMaxWidth:!1,cellMinWidth:120,sortHorizontal:!1,sortVertical:!1,borderCollapse:"collapse !important",tableSpacingX:3,tableSpacingY:3,cols:H,cellsWidthAutoCount:H,tdSumMaxWidth:120*H+20*H,fontColor:"#000000",linkColor:"#000000",fontSize:15,tableBorder:Wt(St.tableBorder),innerBorder:Wt(St.innerBorder),headerInnerBorder:!0,scrollX:!1,disableThemeStyles:!1,extraStyles:btoa(""),stickyFirstColumn:!1,stickyTopRow:!1,paginationEnable:!1,paginationTopRowAsHeader:"false",rowsPerPage:"10",rowsChangeable:!1,searchEnable:!1,searchKeepHeader:"true",searchPosition:"left",role:"table",directives:ge(St),responsiveDirectives:be(St.responsive)},S=[];return O.forEach((s,o)=>{const r=[];s.forEach((n,w)=>{r.push({props:{autoWidth:"true",autoHeight:"true",padding:"10px",vAlign:"center",xIndex:w,yIndex:o,colspan:1,rowspan:1,hideOnMobile:!1},blocks:[{type:"text",props:{text:n,color:"#000000",fontSize:"15px"}}]})}),S.push({props:{},cells:r})}),JSON.stringify({props:u,rows:S})},Ke=O=>new Promise((H,u)=>{if(O.type==="text/csv")ne.parse(O,{complete(S){if(S.errors.length>0){u("Failed to parse the file: "+O.name);return}const l=S.data;H(se(l))}});else if(O.type==="text/xml"){const S=new FileReader;S.onload=function(l){var o;if(!((o=l.target)!=null&&o.result)){u("No content found!");return}const s=ie(l.target.result);H(JSON.stringify(s))},S.readAsText(O)}else u("Unsupported file: "+O.name)}),Ve=O=>new Promise((H,u)=>{O.async("text").then(S=>{if(O.name.endsWith(".csv"))ne.parse(S,{complete(l){if(l.errors.length>0){u("Failed to parse the file: "+O.name);return}const s=l.data;H(se(s))}});else if(O.name.endsWith(".xml")){const l=ie(S);H(JSON.stringify(l))}else u("Unsupported file: "+O.name),H(null)})}),$e=async({setLoadings:O,zips:H,rawFiles:u,keepTitles:S})=>{O.current({});const l=Ge(H),s=l.length+u.length,o=vt(`[0/${s}] Importing tables...`,"progress");let r=1,n=0;for(;n<s;){const w=[];for(let k=0;k<5;k++){let f="";try{let y=n+k,a=null,g,i;if(y<u.length)i=u[y],f=y,a=await Ke(i),g=i.name.replace(/\.([a-z]+)$/,"");else if(y<s){y=y-u.length;const p=l[y];i=H[p.zip].files[p.file],f=p.zip+"_"+p.file,a=await Ve(i.object),g=i.object.name.replace(/\.([a-z]+)$/,"")}if(!a){r++;continue}O.current(p=>({...p,[f]:1})),w.push(new Promise(p=>{fetch(WPTB_CFG.ADMIN_URL+"?action=save_table",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:S?g:void 0,content:a,security_code:WPTB_CFG.SECURITY_CODE})}).then(h=>{if(h.ok)O.current(x=>({...x,[f]:2}));else throw new Error(h.statusText)}).catch(h=>{O.current(x=>({...x,[f]:h.message||"Something went wrong..."}))}).finally(()=>{r++,p(!0)})}))}catch(y){r++,O.current(a=>({...a,[f]:typeof y=="string"?y:y.message||"Something went wrong..."}))}finally{Mt(o,{progress:r/s*100,message:`[${r}/${s}] Importing tables...`})}}await Promise.all(w),n+=5}Mt(o,{type:"success",message:`[${s}] Tables imported successfully!`,spawned_at:Date.now(),duration:5e3})},Ht=O=>O?O===1?Gt:O===2?ve:d.jsx(Yt,{content:O,children:we}):"",Ye=({setPage:O})=>{const[H,u]=nt.useState(!1),[S,l]=nt.useState(!0),[s,o]=nt.useState([]),[r,n]=nt.useState([]),[w,k]=nt.useState({}),[f,y]=nt.useState(!1),a=nt.useRef(k);nt.useEffect(()=>{a.current=k},[k]);const g=async C=>{if(C.preventDefault(),C.stopPropagation(),u(!1),f){vt("Please wait for the previous import to finish.","error");return}const[j,z]=await Zt(C.dataTransfer.files);o([...s,...j]),n([...r,...z])},i=async C=>{if(f){C.target.value="",vt("Please wait for the previous import to finish.","error");return}const[j,z]=await Zt(Array.from(C.target.files));o([...s,...j]),n([...r,...z]),C.target.value=""},p=(C,j)=>{o(z=>{const U=[...z];return j!==void 0?U[C].files.splice(j,1):U.splice(C,1),U})},h=C=>{n(j=>{if(C===void 0)return[];const z=[...j];return z.splice(C,1),z})},x=async()=>{if(f){vt("Please wait for the previous import to finish.","error");return}y(!0),await $e({setLoadings:a,zips:s,rawFiles:r,keepTitles:S}),y(!1)};return d.jsxs("div",{className:"wptb-v2-page",children:[d.jsx(Ot,{setPage:O,page:"import"}),d.jsxs("div",{className:"wptb-v2-page-content",children:[d.jsx("div",{className:"wptb-v2-page-content-top",children:d.jsx("h3",{children:"Import Table"})}),d.jsxs("div",{className:mt("wptb-v2-page-content-main wptb-v2-import-page",{"wptb-v2-import-page-has-files":s.length>0||r.length>0}),children:[d.jsxs("div",{className:"wptb-v2-import-page-main-area",children:[d.jsxs("div",{className:"wptb-v2-import-page-file-area",children:[d.jsx("h3",{children:"Pick files"}),d.jsxs("div",{className:mt("wptb-v2-import-page-dropzone",{"wptb-v2-import-page-dropzone-dragover":H}),onDragOver:C=>{u(!0),C.preventDefault(),C.stopPropagation()},onDragLeave:()=>u(!1),onDrop:g,children:[d.jsx("p",{className:"wptb-v2-import-page-dropzone-text",children:"Drag and drop your files here"}),d.jsx("p",{className:"wptb-v2-import-page-dropzone-types",children:"(csv, xml, zip)"}),d.jsx("div",{className:"wptb-v2-divider",children:"or"}),d.jsxs("label",{children:["Browse files",d.jsx("input",{type:"file",accept:".csv, .xml, .zip",onChange:i,multiple:!0})]})]})]}),(s.length>0||r.length>0)&&d.jsxs("div",{className:"wptb-v2-import-page-preview",children:[d.jsxs("h3",{children:["To be imported",d.jsx("button",{type:"button",title:"Clear Files",onClick:()=>{o([]),n([])},children:Tt})]}),r.length>0&&d.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[d.jsxs("p",{children:["Single tables",!f&&d.jsx("button",{type:"button",onClick:()=>h(),children:zt})]}),d.jsx("ul",{children:r.map((C,j)=>d.jsxs("li",{children:[C.name,d.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[Ht(w[j]),!f&&d.jsx("button",{type:"button",onClick:()=>h(j),children:zt})]})]},`${C.name}_${j}`))})]}),s.map((C,j)=>d.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[d.jsxs("p",{children:[C.name,!f&&d.jsx("button",{type:"button",onClick:()=>p(j),children:zt})]}),d.jsx("ul",{children:C.files.map((z,U)=>d.jsxs("li",{children:[z.object.name,d.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[Ht(w[`${j}_${U}`]),!f&&d.jsx("button",{type:"button",onClick:()=>p(j,U),children:zt})]})]},`${z.object.name}_${U}`))})]},C.name))]})]}),d.jsxs("div",{className:"wptb-v2-import-page-form",children:[d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:S,onChange:()=>l(!S)}),d.jsx("p",{children:"Preserve table titles"})]}),d.jsxs("button",{type:"button",onClick:x,disabled:f,children:[f?d.jsx(_e,{}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:d.jsx("path",{fill:"currentColor",d:"M9 6c0-1.6.8-3 2-4h-1c-3.9 0-7 .9-7 2c0 1 2.6 1.8 6 2m3.8 4.8c-.9.1-1.9.2-2.8.2c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-2c-.9.7-1.9 1-3 1c-.4 0-.8-.1-1.2-.2M10 15c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-3c0 1.1-3.1 2-7 2m0-5h1c-1-.7-1.7-1.8-1.9-3C5.7 6.9 3 6 3 5v3c0 1.1 3.1 2 7 2m4 0c2.2 0 4-1.8 4-4s-1.8-4-4-4s-4 1.8-4 4s1.8 4 4 4m-1-4V3h2v3h2l-3 3l-3-3z"})}),"Import"]})]})]})]})]})},Xe=({onSelect:O,onAllSelect:H,apiData:u,searchTxt:S,setSearch:l,items:s,sorting:o})=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"wptb-v2-export-page-header",children:[d.jsx("h2",{children:"All Tables"}),d.jsxs("div",{className:"wptb-v2-export-page-search",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:d.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[d.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),d.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),d.jsx("input",{type:"search",placeholder:"Search...",value:S,onChange:r=>l(r.target.value)})]})]}),d.jsxs("p",{className:"wptb-pagination-info",children:["Showing ",d.jsx("b",{children:u.page_start})," to ",d.jsx("b",{children:u.page_end})," of"," ",d.jsx("b",{children:u.total_count})," entries"]}),d.jsx(Xt,{onSelect:O,onAllCheck:H,sorting:o,isLoading:u.loading,items:s,columns:["title","modified","id"],checkbox:!0})]}),Je=({onUnSelect:O,onAllUnSelect:H,items:u})=>{const S=Jt("modified","desc"),[l,s]=nt.useState(""),[o,r]=nt.useState(u);nt.useEffect(()=>{r(u)},[u]),nt.useEffect(()=>{if(l==="")return r(u);const w=u.filter(k=>k.title.toLowerCase().includes(l.toLowerCase()));r(w)},[l,u]);const n=S[0];return nt.useEffect(()=>r(w=>(n.order==="asc"?w.sort((k,f)=>k[n.by].toString().localeCompare(f[n.by].toString())):w.sort((k,f)=>f[n.by].toString().localeCompare(k[n.by].toString())),[...w])),[n]),d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"wptb-v2-export-page-header",children:[d.jsx("h2",{children:"To Export"}),d.jsxs("div",{className:"wptb-v2-export-page-search",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:d.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[d.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),d.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),d.jsx("input",{type:"search",placeholder:"Search...",value:l,onChange:w=>s(w.target.value)})]})]}),d.jsx(Xt,{onSelect:O,onAllCheck:H,sorting:S,items:o,columns:["title","modified","id"],checkbox:!0,checked:!0,noItemsMessage:"No tables selected"})]})},Nt=document.createElement("a"),Qe=async(O,H)=>{new FormData().append("ids",O);try{const S=new FormData;S.append("nonce",WPTB_CFG.EXPORT_KEY),S.append("action","wptb_table_export_main_export"),S.append("ids",JSON.stringify(O.split(","))),S.append("export_type",H.toLocaleUpperCase());const l=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:S});let s,o="";if(l.headers.get("content-type")==="application/octet-stream"){const w=l.headers.get("content-disposition"),f=new RegExp(/filename="(.+\..+)"/,"g").exec(w||"");if(f===null)throw new Error("Invalid file name header!");o=f[1],s=await l.blob()}else s=await l.json();const n=window.URL.createObjectURL(s);Nt.href=n,Nt.download=o,Nt.click(),window.URL.revokeObjectURL(n),vt('File downloaded as "'+o+'"',"success")}catch(S){vt(S.message||"Something went wrong","error")}},tr={xml:d.jsxs(d.Fragment,{children:[d.jsx("b",{children:"XML:"})," an exact copy of your tables will be exported, ideal for backing up and sharing your tables with your other WordPress sites that uses WP Table Builder."]}),csv:d.jsxs(d.Fragment,{children:[d.jsx("b",{children:"CSV:"})," only text content of your tables will be exported, ideal for usage within other apps/plugins."]})},er=({setPage:O})=>{const H=nt.useRef(),[u,S]=nt.useState(1),l=Jt("modified","desc"),[s,o]=nt.useState(""),[r,n]=nt.useState([]),[w,k]=nt.useState(""),[f,y]=nt.useState("xml"),[a,g]=nt.useState(!1),[i,p,h]=Qt({page:u,search:s,sort:l[0],abortCtrl:H.current,skipTables:w});nt.useEffect(()=>{n(i.posts)},[i.posts]);const[x,C]=nt.useState([]),j=c=>{const A=w+","+c.id;k(A.replace(/^,/,"")),C([...x,c]),n(r.filter(W=>W.id!==c.id)),r.length<=1&&h()},z=c=>{C(x.filter(W=>W.id!==c.id)),n([...r,c]);let A=w.replace(c.id.toString(),"");A=A.replace(/,,/,","),A=A.replace(/(^,)|(,$)/,""),k(A)},U=()=>{if(!r.length)return;const c=[...x];let A=w;r.forEach(W=>{c.push(W),A=A+","+W.id}),A=A.replace(/^,/,""),C(c),k(A),h()},B=()=>{x.length&&(C([]),k(""),n([...r,...x]))},v=()=>{if(!a){if(!w){vt("No tables selected","error");return}g(!0),Qe(w,f).then(()=>{g(!1),B()})}};return d.jsxs("div",{className:"wptb-v2-page",children:[d.jsx(Ot,{setPage:O,page:"export"}),d.jsxs("div",{className:"wptb-v2-page-content",children:[d.jsx("div",{className:"wptb-v2-page-content-top",children:d.jsx("h3",{children:"Export Table"})}),d.jsxs("div",{className:"wptb-v2-export-page",children:[d.jsxs("div",{className:"wptb-v2-export-page-unselected",children:[d.jsx(Xe,{onSelect:j,onAllSelect:U,apiData:i,setSearch:o,searchTxt:s,items:r,sorting:l}),d.jsx(ye,{apiData:i,setPage:S})]}),d.jsxs("div",{className:"wptb-v2-export-page-exchange",children:[d.jsx("button",{type:"button",onClick:U,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsxs("g",{fill:"none",children:[d.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),d.jsx("path",{fill:"currentColor",d:"m15.06 5.283l5.657 5.657a1.5 1.5 0 0 1 0 2.12l-5.656 5.658a1.5 1.5 0 0 1-2.122-2.122l3.096-3.096H4.5a1.5 1.5 0 0 1 0-3h11.535L12.94 7.404a1.5 1.5 0 0 1 2.122-2.121Z"})]})})}),d.jsx("button",{type:"button",onClick:B,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsxs("g",{fill:"none",children:[d.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),d.jsx("path",{fill:"currentColor",d:"M3.283 10.94a1.5 1.5 0 0 0 0 2.12l5.656 5.658a1.5 1.5 0 1 0 2.122-2.122L7.965 13.5H19.5a1.5 1.5 0 0 0 0-3H7.965l3.096-3.096a1.5 1.5 0 1 0-2.122-2.121z"})]})})})]}),d.jsxs("div",{className:"wptb-v2-export-page-selected",children:[d.jsx(Je,{onUnSelect:z,onAllUnSelect:B,items:x}),d.jsxs("div",{className:"wptb-v2-export-page-form",children:[d.jsx("p",{children:"Format:"}),d.jsxs("select",{value:f,onChange:c=>y(c.target.value),children:[d.jsx("option",{value:"xml",children:"XML"}),d.jsx("option",{value:"csv",children:"CSV"})]}),d.jsx(Yt,{content:tr[f],className:"wptb-v2-export-page-form-info",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m-1-7v2h2v-2zm2-1.645A3.502 3.502 0 0 0 12 6.5a3.5 3.5 0 0 0-3.433 2.813l1.962.393A1.5 1.5 0 1 1 12 11.5a1 1 0 0 0-1 1V14h2z"})})}),d.jsxs("button",{type:"button",disabled:a,onClick:v,children:[a?d.jsx(Kt,{}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:d.jsx("path",{fill:"currentColor",d:"M74.34 85.66a8 8 0 0 1 11.32-11.32L120 108.69V24a8 8 0 0 1 16 0v84.69l34.34-34.35a8 8 0 0 1 11.32 11.32l-48 48a8 8 0 0 1-11.32 0ZM240 136v64a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h52.4a4 4 0 0 1 2.83 1.17L111 145a24 24 0 0 0 34 0l23.8-23.8a4 4 0 0 1 2.8-1.2H224a16 16 0 0 1 16 16m-40 32a12 12 0 1 0-12 12a12 12 0 0 0 12-12"})}),"Export"]})]})]})]})]})]})},rr=O=>typeof O=="number"||parseInt(O).toString()===O,nr=({table:O,setPage:H})=>{const u=xe(),[S,l]=nt.useState(!1),[s,o]=nt.useState(O);nt.useEffect(()=>{if(o(O),u(ke({isSaving:!1,activeBlock:void 0,timeTravel:{lastSaved:/[^0-9]/.test(O)?void 0:0,cursor:0,total:0}})),!rr(O)){if(!Rt.getState().table[O]){history.replaceState(null,"","?page=wptb-alt"),H("tables");return}l(!0);return}l(!1);const w=new AbortController,k=WPTB_CFG.API_BASE+"/v1/table?id="+O;return fetch(k,{signal:w.signal}).then(f=>f.json()).then(f=>{if(!f.table){vt("Table not found","error",5e3),history.replaceState(null,"","?page=wptb-alt"),H("tables");return}const y=Bt(f.table);y.title=f.name,y.id=O,Rt.dispatch(Vt({id:O,table:y})),l(!0)}).catch(f=>null),()=>w.abort()},[O,H,u]);const r=([w,k])=>{w==="saved"&&(o(k.toString()),u(Se({oldId:O,newId:k.toString()})),history.replaceState(null,"","?page=wptb-alt-builder&table="+k))},n=()=>{if(history.length>2){history.back();return}H("tables")};return d.jsx(Ce,{id:s,isLoaded:S,onSave:r,onClose:n})},ir={tables:De,builder:nr,create:Me,import:Ye,export:er},qt=()=>{var u,S;const O=new URLSearchParams(window.location.search),H={};for(const[l,s]of O)H[l]=s;return H.page=((S=(u=H.page)==null?void 0:u.replace("wptb-alt",""))==null?void 0:S.substring(1))||"tables",H};function sr(){const[O,H]=nt.useState({}),u=(S,l)=>{l=l||{};const o={page:S==="tables"?"wptb-alt":`wptb-alt-${S}`};for(const n in l){const w=l[n];w&&(o[n]=w)}const r=new URLSearchParams(o).toString();window.history.pushState(null,"","?"+r),l.page=S,H(l)};return nt.useEffect(()=>{const S=()=>{const l=qt();H(l)};return H(qt()),window.addEventListener("popstate",S),()=>{window.removeEventListener("popstate",S)}},[]),[O,u]}const ar=()=>{const[O,H]=sr(),u=ir[O.page];if(u)return d.jsx(u,{...O,setPage:H})};document.addEventListener("DOMContentLoaded",()=>{const O=document.querySelector("#wptb-app-root");!O||typeof WPTB>"u"||je(O).render(d.jsx(Ee.StrictMode,{children:d.jsxs(Ae,{store:Rt,children:[d.jsx(ar,{}),d.jsx(ze,{}),d.jsx(Ie,{})]})}))});
//# sourceMappingURL=wptb-main.js.map
