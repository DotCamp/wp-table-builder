import{j as r,c as gt,r as Q,W as ee,T as Ft,R as qt,S as re,E as ne,n as ut,C as ye,M as se,a as Mt,b as xe,F as Kt,D as Gt,s as ke,p as Zt,v as Ce,d as Lt,e as ie,f as At,g as ae,u as Yt,t as Se,h as Tt,i as $t,k as je,l as Ee,m as Rt,U as Te,o as Ae,P as oe,q as ze,w as Ie,x as le,y as Ne,z as Oe,B as Re,A as Be,G as xt,H as ce,I as zt,L as It,J as Pe,K as Bt,N as Fe,O as Le,Q as Dt,V as Ut,X as De,Y as Ue,Z as We,_ as Me,$ as Ge,a0 as Ze}from"./assets/index-COLUoSPm.js";const He=z=>r.jsxs("svg",{...z,viewBox:"0 0 134 131",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M120.619 0.704712H13.8714C6.502 0.704712 0.527954 6.64798 0.527954 13.9794V117.225C0.527954 124.557 6.502 130.5 13.8714 130.5H120.619C127.988 130.5 133.962 124.557 133.962 117.225V13.9794C133.962 6.64798 127.988 0.704712 120.619 0.704712Z",fill:"url(#wptb_logo_paint0_linear_7_1042)"}),r.jsx("path",{d:"M106.489 28.0007H28.0248C26.8471 28.0007 25.8923 28.9506 25.8923 30.1223V44.4636C25.8923 45.6354 26.8471 46.5852 28.0248 46.5852H106.489C107.667 46.5852 108.621 45.6354 108.621 44.4636V30.1223C108.621 28.9506 107.667 28.0007 106.489 28.0007Z",fill:"white"}),r.jsx("path",{d:"M59.7869 56.3042H28.0249C26.8471 56.3042 25.8923 57.254 25.8923 58.4257V72.7671C25.8923 73.9388 26.8471 74.8887 28.0249 74.8887H59.7869C60.9647 74.8887 61.9195 73.9388 61.9195 72.7671V58.4257C61.9195 57.254 60.9647 56.3042 59.7869 56.3042Z",fill:"white"}),r.jsx("path",{d:"M106.489 56.3042H74.7267C73.549 56.3042 72.5942 57.254 72.5942 58.4257V72.7671C72.5942 73.9388 73.549 74.8887 74.7267 74.8887H106.489C107.667 74.8887 108.621 73.9388 108.621 72.7671V58.4257C108.621 57.254 107.667 56.3042 106.489 56.3042Z",fill:"white"}),r.jsx("path",{d:"M59.7631 84.6194H28.001C26.8233 84.6194 25.8685 85.5693 25.8685 86.741V101.082C25.8685 102.254 26.8233 103.204 28.001 103.204H59.7631C60.9409 103.204 61.8957 102.254 61.8957 101.082V86.741C61.8957 85.5693 60.9409 84.6194 59.7631 84.6194Z",fill:"white"}),r.jsx("path",{d:"M106.465 84.6194H74.7029C73.5251 84.6194 72.5703 85.5693 72.5703 86.741V101.082C72.5703 102.254 73.5251 103.204 74.7029 103.204H106.465C107.643 103.204 108.598 102.254 108.598 101.082V86.741C108.598 85.5693 107.643 84.6194 106.465 84.6194Z",fill:"white"}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"wptb_logo_paint0_linear_7_1042",x1:"124.538",y1:"-5.75483",x2:"45.6569",y2:"93.515",gradientUnits:"userSpaceOnUse",children:[r.jsx("stop",{stopColor:"#29ABE2"}),r.jsx("stop",{offset:"1",stopColor:"#0071BC"})]})})]}),Ve=wp.i18n,St=z=>Ve.__(z,"wp-table-builder"),Nt=({setPage:z,page:D})=>r.jsxs("div",{className:"wptb-v2-nav",children:[r.jsx("div",{className:"wptb-v2-logo",children:r.jsx(He,{})}),r.jsxs("div",{children:[r.jsxs("button",{className:gt("wptb-v2-link-btn",{"wptb-active-nav":D==="tables"}),onClick:()=>z("tables"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 4H4a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1M4 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm2 5h2v2H6zm5 0a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2zm-3 4H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1m-2 3H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1",clipRule:"evenodd"})}),r.jsx("span",{children:St("Table List")})]}),r.jsxs("button",{className:gt("wptb-v2-link-btn",{"wptb-active-nav":D==="create"}),onClick:()=>z("create"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M18 14h2v3h3v2h-3v3h-2v-3h-3v-2h3zM4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4z"})}),r.jsx("span",{children:St("Add New")})]}),r.jsxs("button",{className:gt("wptb-v2-link-btn",{"wptb-active-nav":D==="import"}),onClick:()=>z("import"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm14.44 2v2h4v2h-4v2l-3-3z"})}),r.jsx("span",{children:St("Import")})]}),r.jsxs("button",{className:gt("wptb-v2-link-btn",{"wptb-active-nav":D==="export"}),onClick:()=>z("export"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm15.44 8v-2h-4v-2h4v-2l3 3z"})}),r.jsx("span",{children:St("Export")})]}),r.jsxs("button",{className:gt("wptb-v2-link-btn",{"wptb-active-nav":D==="settings"}),onClick:()=>z("settings"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"})}),r.jsx("span",{children:St("Settings")})]})]})]}),qe=({apiData:z,setPage:D})=>{const o=C=>{!z||C<1||C>z.total_pages||C===z.current_page||D(C)};return r.jsx("div",{className:"wptb-v2-pagination",children:r.jsxs("div",{className:"wptb-v2-pagination-group",children:[r.jsx("button",{type:"button",className:gt({"wptb-v2-pagination-disabled":z.current_page===1}),onClick:()=>o(z.current_page-1),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m15 6l-6 6l6 6"})})}),z.pages.map(C=>C!==0?r.jsx("button",{type:"button",className:gt({"wptb-v2-pagination-active":C===z.current_page}),onClick:()=>o(C),children:C},C):r.jsx("p",{className:"wptb-page-divider",children:"..."})),r.jsx("button",{type:"button",className:gt({"wptb-v2-pagination-disabled":z.current_page===z.total_pages}),onClick:()=>o(z.current_page+1),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m9 6l6 6l-6 6"})})})]})})},Ke=(z,D=2)=>{const o=[];if(z<=D*3+2){for(let n=1;n<=z;n++)o.push(n);return o}for(let n=1;n<=D;n++)o.push(n);const C=Math.ceil(z/2-D/2);o.at(-1)<C-1&&o.push(0);for(let n=0;n<D;n++)o.push(C+n);o.push(0);for(let n=1;n<=D;n++)o.push(z-D+n);return o},Ye=z=>{if(navigator.clipboard){navigator.clipboard.writeText(z);return}const D=document.createElement("textarea");D.value=z,document.body.appendChild(D),D.select(),document.execCommand("copy"),document.body.removeChild(D)},he=(z,D="asc")=>{const[o,C]=Q.useState({by:z,order:D});return Q.useMemo(()=>[o,n=>{let c="asc";o.by===n&&(c=o.order==="asc"?"desc":"asc"),C({by:n,order:c})}],[o])},$e={loading:!0,posts:[],current_page:1,page_start:"...",page_end:"...",total_count:"...",pages:[],total_pages:1},de=({page:z,search:D,status:o,skipTables:C,sort:n,abortCtrl:c,refetchOnSkipChange:h})=>{const[s,a]=Q.useState($e),[f,w]=Q.useState(!1),m=(l,v)=>{if(v){let i;["id","title","date","modified"].includes(n.by||"id")?i=n.by:i="id",i!=="id"?n.order==="asc"?l.sort((p,u)=>p[i].localeCompare(u[i])):l.sort((p,u)=>u[i].localeCompare(p[i])):n.order==="asc"?l.sort((p,u)=>p[i]-u[i]):l.sort((p,u)=>u[i]-p[i])}a({...s,posts:l})},y=h?C:"";return Q.useEffect(()=>{const l=new URLSearchParams({page:z.toString(),search:D||"",status:o||"",except:C||"",...n?{sort_by:n.by,sort_order:n.order}:{}}),v=WPTB_CFG.API_BASE+"/v1/tables?"+l.toString();a(i=>({...i,current_page:z,loading:!0})),fetch(v,{signal:c==null?void 0:c.signal}).then(i=>i.json()).then(i=>{const{posts:p,current_page:u,total_pages:k,total_count:S}=i,I=(u-1)*i.per_page+1,A=I+p.length-1;a({loading:!1,posts:p,current_page:u,page_start:I,page_end:A,pages:Ke(k,2),total_pages:k,total_count:S})})},[z,D,o,n.by,n.order,y,f]),[s,m,()=>w(!f)]},ue={duplicate:{icon:ee,title:"Sure to duplicate?",text:z=>`Table: <b>${z.targetTitle}</b> is set to be duplicated.<br/> Are you sure?`,className:"wptb-modal-warning",url:"duplicate"},trash:{icon:Ft,title:"Sure to trash?",text:z=>`Table: <b>${z.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash"},restore:{icon:qt,title:"Sure to restore?",text:z=>`Table: <b>${z.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore"},delete:{icon:Ft,title:"Sure to delete?",text:z=>`Table: <b>${z.targetTitle}</b> is set to be deleted. Are you sure?<br/> It will be deleted permanently.`,className:"wptb-modal-danger",url:"delete"},trash_bulk:{icon:Ft,title:"Sure to trash?",text:(z,D)=>`<b>${D}</b> table(s) are set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash_bulk"},restore_bulk:{icon:qt,title:"Sure to restore?",text:(z,D)=>`<b>${D}</b> table(s) are set to be restored. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore_bulk"}},Je=async({action:z,id:D,ids:o})=>{const C=ue[z].url;if(!C)return{action:z,id:D,ids:o,res:{}};try{const n=await fetch(WPTB_CFG.API_BASE+"/v1/"+C,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:D,ids:o,security_code:WPTB_CFG.SECURITY_CODE})}),c=await n.json();if(!n.ok)throw new Error(c.message||`HTTP error! Status: ${n.status}`);return{action:z,id:D,ids:o,res:c}}catch(n){return{action:z,id:D,ids:o,res:{error:n.message}}}},Xe=({apiData:z,setPage:D,isTrash:o,setTables:C,sortBy:n,sortOrder:c,setSort:h,search:s,setSearch:a})=>{const f=Q.useRef({}),w=Q.useRef({}),[m,y]=Q.useState(""),[l,v]=Q.useState(0),[i,p]=Q.useState(null);Q.useEffect(()=>{f.current={},v(0)},[z]);const u=B=>{D("builder",{table:B})},k=()=>{l<z.posts.length?(z.posts.forEach(B=>{f.current[B.id]=!0}),v(z.posts.length)):(f.current={},v(0))},S=B=>{f.current[B]?(delete f.current[B],v(l-1)):(f.current[B]=!0,v(l+1))},I=async()=>{var G;if(!i)return;if(i.targetId){if(w.current[i.targetId])return;w.current[i.targetId]=!0}else for(const b in f.current){if(w.current[b])return;w.current[b]=f.current[b]}const B=Object.keys(f.current).map(Number);f.current={},v(0),p(null);const{action:P,id:x,ids:d,res:E}=await Je({action:i.action,id:i.targetId,ids:B});if(d!=null&&d.length?d.forEach(b=>{delete w.current[b]}):delete w.current[x],E.error){ut(E.error,"error",0),C([...z.posts]);return}if(E.message&&ut(E.message,"success"),P==="trash"||P==="restore"||P==="delete")C([...z.posts.filter(b=>b.id!==x)]);else if(P==="trash_bulk"||P==="restore_bulk")C([...z.posts.filter(b=>!(d!=null&&d.includes(b.id)))]);else{const b=[...z.posts];(G=E.posts)==null||G.forEach(O=>{b.push(O)}),C(b,!0)}},A=i&&ue[i.action];return n=n||"id",r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"wptb-v2-table-upper-group",children:[r.jsxs("div",{className:"wptb-v2-bulk-actions",children:[r.jsxs("select",{value:m,onChange:B=>y(B.target.value),children:[r.jsx("option",{value:"",children:"Bulk Actions"}),o?r.jsx("option",{value:"restore_bulk",children:"Restore"}):r.jsx("option",{value:"trash_bulk",children:"Delete"})]}),r.jsx("button",{type:"button",onClick:()=>l>0&&p({action:m}),children:"Apply"}),r.jsxs("p",{children:[r.jsx("b",{children:l})," items selected"]})]}),r.jsx(re,{placeholder:"Search table...",onChange:a,value:s})]}),r.jsx("div",{className:"wptb-v2-table-list-wrapper",children:r.jsxs("table",{className:gt({"wptb-v2-table-list":!z.loading,"wptb-v2-table-loading":z.loading}),children:[r.jsxs("colgroup",{children:[r.jsx("col",{style:{width:"30px"}}),r.jsx("col",{}),r.jsx("col",{}),r.jsx("col",{}),r.jsx("col",{})]}),r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx("input",{type:"checkbox",checked:l===z.posts.length,onChange:k})}),r.jsxs("th",{children:["Title",r.jsx("button",{type:"button",onClick:()=>h("title"),className:gt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":n==="title"&&c==="asc","wptb-sort-btn-desc":n==="title"&&c!=="asc"})})]}),r.jsxs("th",{children:["Shortcode",r.jsx("button",{type:"button",onClick:()=>h("id"),className:gt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":n==="id"&&c==="asc","wptb-sort-btn-desc":n==="id"&&c!=="asc"})})]}),r.jsxs("th",{children:["Created",r.jsx("button",{type:"button",onClick:()=>h("date"),className:gt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":n==="date"&&c==="asc","wptb-sort-btn-desc":n==="date"&&c!=="asc"})})]}),r.jsxs("th",{children:["Last Modified",r.jsx("button",{type:"button",onClick:()=>h("modified"),className:gt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":n==="modified"&&c==="asc","wptb-sort-btn-desc":n==="modified"&&c!=="asc"})})]})]})}),r.jsx("tbody",{children:z.loading?Array(10).fill(0).map((B,P)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("div",{})}),r.jsx("td",{children:r.jsx("div",{})}),r.jsx("td",{children:r.jsx("div",{})}),r.jsx("td",{children:r.jsx("div",{})}),r.jsx("td",{children:r.jsx("div",{})})]},P)):z.posts.length?z.posts.map(B=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("input",{type:"checkbox",checked:f.current[B.id],onChange:()=>S(B.id)}),w.current[B.id]&&r.jsx("div",{className:"wptb-v2-table-pending",children:ne})]}),r.jsxs("td",{children:[r.jsx("p",{children:B.title||"[Untitled]"}),o?r.jsxs("div",{className:"wptb-v2-table-actions",children:[r.jsx("button",{className:"wptb-table-action-restore",type:"button",onClick:()=>p({action:"restore",targetId:B.id,targetTitle:B.title}),children:"Restore"}),r.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>p({action:"delete",targetId:B.id,targetTitle:B.title}),children:"Delete"})]}):r.jsxs("div",{className:"wptb-v2-table-actions",children:[r.jsx("button",{className:"wptb-table-action-edit",type:"button",onClick:()=>u(B.id),children:"Edit"}),r.jsx("button",{className:"wptb-table-action-duplicate",type:"button",onClick:()=>p({action:"duplicate",targetId:B.id,targetTitle:B.title}),children:"Duplicate"}),r.jsx("button",{type:"button",className:"wptb-table-action-preview",children:"Preview"}),r.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>p({action:"trash",targetId:B.id,targetTitle:B.title}),children:"Trash"})]})]}),r.jsx("td",{children:r.jsxs("div",{className:"wptb-v2-shortcode-col",children:["[wptb id=",B.id,"]",r.jsx("button",{type:"button",className:"wptb-v2-copy-btn",onClick:()=>{Ye(`[wptb id=${B.id}]`),ut("Copied to clipboard!","success")},children:ye})]})}),r.jsx("td",{children:B.date}),r.jsx("td",{children:B.modified})]},B.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,children:r.jsx("p",{children:"No results found"})})})})]})}),A&&r.jsxs(se,{onClose:()=>p(null),title:A.title,icon:A.icon,className:A.className,children:[r.jsx("p",{dangerouslySetInnerHTML:{__html:A.text(i,l)}}),r.jsxs("div",{className:"wptb-v2-modal-actions",children:[r.jsx("button",{type:"button",onClick:I,children:"Yes"}),r.jsx("button",{type:"button",onClick:()=>p(null),children:"No"})]})]})]})},Qe=({setPage:z,page_num:D,search:o,status:C,sort_by:n,sort_order:c})=>{const h=Q.useRef(),s=Q.useRef(),[a,f]=Q.useState(o),[w,m]=de({page:D?parseInt(D):1,search:o,status:C,sort:{by:n||"id",order:c||"desc"},abortCtrl:h.current});Q.useEffect(()=>{const v=a==null?void 0:a.trim();if(o){if(v&&v.length>0&&v.length<2)return}else if(!v||v.length<2)return;s.current&&clearTimeout(s.current),h.current&&h.current.abort(),h.current=new AbortController,s.current=setTimeout(()=>{z("tables",{search:a,status:C}),h.current=void 0,s.current=void 0},500)},[a]);const y=v=>{z("tables",{page_num:1,search:o,status:C,sort_by:v,sort_order:v===(n||"id")&&c==="asc"?"desc":"asc"})},l=C==="trash";return r.jsxs("div",{className:"wptb-v2-page",children:[r.jsx(Nt,{setPage:z,page:"tables"}),r.jsxs("div",{className:"wptb-v2-page-content",children:[r.jsxs("div",{className:"wptb-v2-page-content-top",children:[r.jsx("h2",{children:"Table List"}),r.jsxs("div",{className:"wptb-v2-table-status-btns",children:[r.jsx("button",{type:"button",className:gt({"wptb-v2-active-section":!l}),onClick:()=>{z("tables",{})},children:"ALL"}),r.jsx("button",{type:"button",className:gt({"wptb-v2-active-section":l}),onClick:()=>{z("tables",{status:"trash"})},children:"TRASH"})]})]}),r.jsxs("div",{className:"wptb-v2-table-list-area",children:[r.jsxs("p",{className:"wptb-v2-pagination-info",children:["Showing ",r.jsx("b",{children:w.page_start})," to ",r.jsx("b",{children:w.page_end})," of"," ",r.jsx("b",{children:w.total_count})," entries"]}),r.jsx(Xe,{apiData:w,setPage:z,isTrash:l,setTables:m,setSort:y,sortBy:n,sortOrder:c,search:a,setSearch:f}),r.jsx(qe,{apiData:w,setPage:v=>z("tables",{page_num:v,search:o,sort_by:n,sort_order:c})})]})]})]})},tr=({setPage:z})=>{const[D,o]=Q.useState(4),[C,n]=Q.useState(4),c=()=>{const h=xe(D,C);z("builder",{table:h})};return r.jsxs("div",{className:"wptb-v2-create-table",children:[r.jsx("table",{children:r.jsx("tbody",{children:Array(D).fill(0).map((h,s)=>r.jsx("tr",{children:Array(C).fill(0).map((a,f)=>r.jsx("td",{},f))},s))})}),r.jsxs("div",{className:"wptb-v2-create-table-form",children:[r.jsx("div",{className:"wptb-v2-create-table-form-input",children:r.jsx(Mt,{label:"Number of rows",min:2,max:20,value:D,onChange:o,allowOutOfRange:!0})}),r.jsx("div",{className:"wptb-v2-create-table-form-input",children:r.jsx(Mt,{label:"Number of columns",min:2,max:20,value:C,onChange:n,allowOutOfRange:!0})}),r.jsx("button",{type:"button",className:"wptb-v2-create-btn",onClick:c,children:"Create New"})]})]})},Ct=[],er=({setPage:z,search:D})=>{const[o,C]=Q.useState(Ct),[n,c]=Q.useState(!0),[h,s]=Q.useState(),a=Q.useRef(null);Q.useEffect(()=>{if(Ct.length){c(!1),C(Ct),a.current=new Kt(Ct,{includeScore:!0,threshold:.3,keys:["title"]});return}let m=new AbortController;return fetch(WPTB_CFG.API_BASE+"/v1/patterns",{signal:m.signal}).then(y=>y.json()).then(y=>{if(c(!1),!Ct.length){if(y.error)throw new Error(y.error);C(y.patterns),Ct.push(...y.patterns),a.current=new Kt(Ct,{includeScore:!0,threshold:.3,keys:["title"]})}}).catch(()=>{}).finally(()=>{m=void 0}),()=>m==null?void 0:m.abort()},[]);const f=Q.useCallback(m=>{var y;if(m==="")C(Ct);else{const l=(y=a.current)==null?void 0:y.search(m),v=l==null?void 0:l.map(i=>i.item);C(v||[])}},[]);Q.useEffect(()=>{const m=D==null?void 0:D.trim();if(!m||m.length<2){C(Ct);return}f(m)},[D,f]);const w=async m=>{if(m.is_upsell){ke("patterns");return}if(h){ut("A request is already in progress","error");return}s(m.name);const y=await fetch(WPTB_CFG.API_BASE+"/v1/patterns?name="+m.name,{headers:{"Content-Type":"application/json"}});if(!y.ok){ut("Something went wrong","error"),s(void 0);return}const l=await y.json();if(l.error){ut(l.error,"error"),s(void 0);return}const v=l.pattern,i=Zt(v.content);i.title="Clone of: "+m.title;const p=Ce();i.id=p,Lt.dispatch(ie({id:p,table:i})),z("builder",{table:p})};return r.jsx("div",{className:"wptb-v2-table-templates",children:n?Array.from({length:9},(m,y)=>r.jsxs("div",{className:"wptb-v2-table-template",children:[r.jsx("div",{className:"wptb-v2-table-template-preview",children:r.jsx("div",{className:"wptb-v2-table-template-preview-loading"})}),r.jsx("div",{className:"wptb-v2-table-template-title",children:r.jsx("div",{className:"wptb-v2-table-template-title-loading"})})]},y)):o.map(m=>r.jsxs("button",{className:gt("wptb-v2-table-template",{"wptb-v2-table-template-upsell":m.is_upsell}),onClick:()=>w(m),children:[r.jsxs("div",{className:"wptb-v2-table-template-preview",children:[r.jsx("img",{src:WPTB_CFG.PLUGIN_URL+"/v2/assets/patterns/images/"+m.name+".png",alt:m.name}),h===m.name&&r.jsx("div",{className:"wptb-v2-table-template-preview-creating",children:r.jsx(Gt,{})})]}),r.jsx("div",{className:"wptb-v2-table-template-title",children:m.title})]},m.name))})},rr=({setPage:z,search:D})=>{const[o,C]=Q.useState(D||""),n=Q.useRef();return Q.useEffect(()=>{const c=o==null?void 0:o.trim();if(D){if(c&&c.length>0&&c.length<2)return}else if(!c||c.length<2)return;n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{z("create",{search:o}),n.current=void 0},500)},[o]),r.jsxs("div",{className:"wptb-v2-page wptb-v2-create-page",children:[r.jsx(Nt,{setPage:z,page:"create"}),r.jsxs("div",{className:"wptb-v2-page-content",children:[r.jsxs("div",{className:"wptb-v2-page-content-top",children:[r.jsx("h2",{children:St("New Table")}),r.jsx(re,{value:o,onChange:C,placeholder:"Search templates..."})]}),r.jsxs("div",{className:"wptb-v2-page-content-main",children:[r.jsx(tr,{setPage:z}),r.jsx("div",{className:"wptb-v2-divider",children:"or"}),r.jsx("h2",{children:"Choose from templates"}),r.jsx(er,{setPage:z,search:D})]})]})]})};function Pt(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(z,D){(function(o){z.exports=o()})(function(){return function o(C,n,c){function h(f,w){if(!n[f]){if(!C[f]){var m=typeof Pt=="function"&&Pt;if(!w&&m)return m(f,!0);if(s)return s(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var l=n[f]={exports:{}};C[f][0].call(l.exports,function(v){var i=C[f][1][v];return h(i||v)},l,l.exports,o,C,n,c)}return n[f].exports}for(var s=typeof Pt=="function"&&Pt,a=0;a<c.length;a++)h(c[a]);return h}({1:[function(o,C,n){var c=o("./utils"),h=o("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(a){for(var f,w,m,y,l,v,i,p=[],u=0,k=a.length,S=k,I=c.getTypeOf(a)!=="string";u<a.length;)S=k-u,m=I?(f=a[u++],w=u<k?a[u++]:0,u<k?a[u++]:0):(f=a.charCodeAt(u++),w=u<k?a.charCodeAt(u++):0,u<k?a.charCodeAt(u++):0),y=f>>2,l=(3&f)<<4|w>>4,v=1<S?(15&w)<<2|m>>6:64,i=2<S?63&m:64,p.push(s.charAt(y)+s.charAt(l)+s.charAt(v)+s.charAt(i));return p.join("")},n.decode=function(a){var f,w,m,y,l,v,i=0,p=0,u="data:";if(a.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var k,S=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===s.charAt(64)&&S--,a.charAt(a.length-2)===s.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=h.uint8array?new Uint8Array(0|S):new Array(0|S);i<a.length;)f=s.indexOf(a.charAt(i++))<<2|(y=s.indexOf(a.charAt(i++)))>>4,w=(15&y)<<4|(l=s.indexOf(a.charAt(i++)))>>2,m=(3&l)<<6|(v=s.indexOf(a.charAt(i++))),k[p++]=f,l!==64&&(k[p++]=w),v!==64&&(k[p++]=m);return k}},{"./support":30,"./utils":32}],2:[function(o,C,n){var c=o("./external"),h=o("./stream/DataWorker"),s=o("./stream/Crc32Probe"),a=o("./stream/DataLengthProbe");function f(w,m,y,l,v){this.compressedSize=w,this.uncompressedSize=m,this.crc32=y,this.compression=l,this.compressedContent=v}f.prototype={getContentWorker:function(){var w=new h(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),m=this;return w.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new h(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(w,m,y){return w.pipe(new s).pipe(new a("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new a("compressedSize")).withStreamInfo("compression",m)},C.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,C,n){var c=o("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},n.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,C,n){var c=o("./utils"),h=function(){for(var s,a=[],f=0;f<256;f++){s=f;for(var w=0;w<8;w++)s=1&s?3988292384^s>>>1:s>>>1;a[f]=s}return a}();C.exports=function(s,a){return s!==void 0&&s.length?c.getTypeOf(s)!=="string"?function(f,w,m,y){var l=h,v=y+m;f^=-1;for(var i=y;i<v;i++)f=f>>>8^l[255&(f^w[i])];return-1^f}(0|a,s,s.length,0):function(f,w,m,y){var l=h,v=y+m;f^=-1;for(var i=y;i<v;i++)f=f>>>8^l[255&(f^w.charCodeAt(i))];return-1^f}(0|a,s,s.length,0):0}},{"./utils":32}],5:[function(o,C,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(o,C,n){var c=null;c=typeof Promise<"u"?Promise:o("lie"),C.exports={Promise:c}},{lie:37}],7:[function(o,C,n){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",h=o("pako"),s=o("./utils"),a=o("./stream/GenericWorker"),f=c?"uint8array":"array";function w(m,y){a.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}n.magic="\b\0",s.inherits(w,a),w.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(f,m.data),!1)},w.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new h[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},n.compressWorker=function(m){return new w("Deflate",m)},n.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,C,n){function c(l,v){var i,p="";for(i=0;i<v;i++)p+=String.fromCharCode(255&l),l>>>=8;return p}function h(l,v,i,p,u,k){var S,I,A=l.file,B=l.compression,P=k!==f.utf8encode,x=s.transformTo("string",k(A.name)),d=s.transformTo("string",f.utf8encode(A.name)),E=A.comment,G=s.transformTo("string",k(E)),b=s.transformTo("string",f.utf8encode(E)),O=d.length!==A.name.length,e=b.length!==E.length,M="",tt="",L="",et=A.dir,U=A.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};v&&!i||(nt.crc32=l.crc32,nt.compressedSize=l.compressedSize,nt.uncompressedSize=l.uncompressedSize);var F=0;v&&(F|=8),P||!O&&!e||(F|=2048);var j=0,J=0;et&&(j|=16),u==="UNIX"?(J=798,j|=function(K,lt){var dt=K;return K||(dt=lt?16893:33204),(65535&dt)<<16}(A.unixPermissions,et)):(J=20,j|=function(K){return 63&(K||0)}(A.dosPermissions)),S=U.getUTCHours(),S<<=6,S|=U.getUTCMinutes(),S<<=5,S|=U.getUTCSeconds()/2,I=U.getUTCFullYear()-1980,I<<=4,I|=U.getUTCMonth()+1,I<<=5,I|=U.getUTCDate(),O&&(tt=c(1,1)+c(w(x),4)+d,M+="up"+c(tt.length,2)+tt),e&&(L=c(1,1)+c(w(G),4)+b,M+="uc"+c(L.length,2)+L);var Y="";return Y+=`
\0`,Y+=c(F,2),Y+=B.magic,Y+=c(S,2),Y+=c(I,2),Y+=c(nt.crc32,4),Y+=c(nt.compressedSize,4),Y+=c(nt.uncompressedSize,4),Y+=c(x.length,2),Y+=c(M.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Y+x+M,dirRecord:m.CENTRAL_FILE_HEADER+c(J,2)+Y+c(G.length,2)+"\0\0\0\0"+c(j,4)+c(p,4)+x+M+G}}var s=o("../utils"),a=o("../stream/GenericWorker"),f=o("../utf8"),w=o("../crc32"),m=o("../signature");function y(l,v,i,p){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=i,this.encodeFileName=p,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(y,a),y.prototype.push=function(l){var v=l.meta.percent||0,i=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,a.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:i?(v+100*(i-p-1))/i:100}}))},y.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var v=this.streamFiles&&!l.file.dir;if(v){var i=h(l,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(l){this.accumulate=!1;var v=this.streamFiles&&!l.file.dir,i=h(l,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),v)this.push({data:function(p){return m.DATA_DESCRIPTOR+c(p.crc32,4)+c(p.compressedSize,4)+c(p.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var l=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var i=this.bytesWritten-l,p=function(u,k,S,I,A){var B=s.transformTo("string",A(I));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(u,2)+c(u,2)+c(k,4)+c(S,4)+c(B.length,2)+B}(this.dirRecords.length,i,l,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(l){this._sources.push(l);var v=this;return l.on("data",function(i){v.processChunk(i)}),l.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),l.on("error",function(i){v.error(i)}),this},y.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(l){var v=this._sources;if(!a.prototype.error.call(this,l))return!1;for(var i=0;i<v.length;i++)try{v[i].error(l)}catch{}return!0},y.prototype.lock=function(){a.prototype.lock.call(this);for(var l=this._sources,v=0;v<l.length;v++)l[v].lock()},C.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,C,n){var c=o("../compressions"),h=o("./ZipFileWorker");n.generateWorker=function(s,a,f){var w=new h(a.streamFiles,f,a.platform,a.encodeFileName),m=0;try{s.forEach(function(y,l){m++;var v=function(k,S){var I=k||S,A=c[I];if(!A)throw new Error(I+" is not a valid compression method !");return A}(l.options.compression,a.compression),i=l.options.compressionOptions||a.compressionOptions||{},p=l.dir,u=l.date;l._compressWorker(v,i).withStreamInfo("file",{name:y,dir:p,date:u,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(w)}),w.entriesCount=m}catch(y){w.error(y)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,C,n){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var h=new c;for(var s in this)typeof this[s]!="function"&&(h[s]=this[s]);return h}}(c.prototype=o("./object")).loadAsync=o("./load"),c.support=o("./support"),c.defaults=o("./defaults"),c.version="3.10.1",c.loadAsync=function(h,s){return new c().loadAsync(h,s)},c.external=o("./external"),C.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,C,n){var c=o("./utils"),h=o("./external"),s=o("./utf8"),a=o("./zipEntries"),f=o("./stream/Crc32Probe"),w=o("./nodejsUtils");function m(y){return new h.Promise(function(l,v){var i=y.decompressed.getContentWorker().pipe(new f);i.on("error",function(p){v(p)}).on("end",function(){i.streamInfo.crc32!==y.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}C.exports=function(y,l){var v=this;return l=c.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),w.isNode&&w.isStream(y)?h.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",y,!0,l.optimizedBinaryString,l.base64).then(function(i){var p=new a(l);return p.load(i),p}).then(function(i){var p=[h.Promise.resolve(i)],u=i.files;if(l.checkCRC32)for(var k=0;k<u.length;k++)p.push(m(u[k]));return h.Promise.all(p)}).then(function(i){for(var p=i.shift(),u=p.files,k=0;k<u.length;k++){var S=u[k],I=S.fileNameStr,A=c.resolve(S.fileNameStr);v.file(A,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:l.createFolders}),S.dir||(v.file(A).unsafeOriginalName=I)}return p.zipComment.length&&(v.comment=p.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,C,n){var c=o("../utils"),h=o("../stream/GenericWorker");function s(a,f){h.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(f)}c.inherits(s,h),s.prototype._bindStream=function(a){var f=this;(this._stream=a).pause(),a.on("data",function(w){f.push({data:w,meta:{percent:0}})}).on("error",function(w){f.isPaused?this.generatedError=w:f.error(w)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},s.prototype.pause=function(){return!!h.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},C.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,C,n){var c=o("readable-stream").Readable;function h(s,a,f){c.call(this,a),this._helper=s;var w=this;s.on("data",function(m,y){w.push(m)||w._helper.pause(),f&&f(y)}).on("error",function(m){w.emit("error",m)}).on("end",function(){w.push(null)})}o("../utils").inherits(h,c),h.prototype._read=function(){this._helper.resume()},C.exports=h},{"../utils":32,"readable-stream":16}],14:[function(o,C,n){C.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,h){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,h);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,h)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var h=new Buffer(c);return h.fill(0),h},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(o,C,n){function c(A,B,P){var x,d=s.getTypeOf(B),E=s.extend(P||{},w);E.date=E.date||new Date,E.compression!==null&&(E.compression=E.compression.toUpperCase()),typeof E.unixPermissions=="string"&&(E.unixPermissions=parseInt(E.unixPermissions,8)),E.unixPermissions&&16384&E.unixPermissions&&(E.dir=!0),E.dosPermissions&&16&E.dosPermissions&&(E.dir=!0),E.dir&&(A=u(A)),E.createFolders&&(x=p(A))&&k.call(this,x,!0);var G=d==="string"&&E.binary===!1&&E.base64===!1;P&&P.binary!==void 0||(E.binary=!G),(B instanceof m&&B.uncompressedSize===0||E.dir||!B||B.length===0)&&(E.base64=!1,E.binary=!0,B="",E.compression="STORE",d="string");var b=null;b=B instanceof m||B instanceof a?B:v.isNode&&v.isStream(B)?new i(A,B):s.prepareContent(A,B,E.binary,E.optimizedBinaryString,E.base64);var O=new y(A,b,E);this.files[A]=O}var h=o("./utf8"),s=o("./utils"),a=o("./stream/GenericWorker"),f=o("./stream/StreamHelper"),w=o("./defaults"),m=o("./compressedObject"),y=o("./zipObject"),l=o("./generate"),v=o("./nodejsUtils"),i=o("./nodejs/NodejsStreamInputAdapter"),p=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var B=A.lastIndexOf("/");return 0<B?A.substring(0,B):""},u=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},k=function(A,B){return B=B!==void 0?B:w.createFolders,A=u(A),this.files[A]||c.call(this,A,null,{dir:!0,createFolders:B}),this.files[A]};function S(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var B,P,x;for(B in this.files)x=this.files[B],(P=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&A(P,x)},filter:function(A){var B=[];return this.forEach(function(P,x){A(P,x)&&B.push(x)}),B},file:function(A,B,P){if(arguments.length!==1)return A=this.root+A,c.call(this,A,B,P),this;if(S(A)){var x=A;return this.filter(function(E,G){return!G.dir&&x.test(E)})}var d=this.files[this.root+A];return d&&!d.dir?d:null},folder:function(A){if(!A)return this;if(S(A))return this.filter(function(d,E){return E.dir&&A.test(d)});var B=this.root+A,P=k.call(this,B),x=this.clone();return x.root=P.name,x},remove:function(A){A=this.root+A;var B=this.files[A];if(B||(A.slice(-1)!=="/"&&(A+="/"),B=this.files[A]),B&&!B.dir)delete this.files[A];else for(var P=this.filter(function(d,E){return E.name.slice(0,A.length)===A}),x=0;x<P.length;x++)delete this.files[P[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var B,P={};try{if((P=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");s.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var x=P.comment||this.comment||"";B=l.generateWorker(this,P,x)}catch(d){(B=new a("error")).error(d)}return new f(B,P.type||"string",P.mimeType)},generateAsync:function(A,B){return this.generateInternalStream(A).accumulate(B)},generateNodeStream:function(A,B){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(B)}};C.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,C,n){C.exports=o("stream")},{stream:void 0}],17:[function(o,C,n){var c=o("./DataReader");function h(s){c.call(this,s);for(var a=0;a<this.data.length;a++)s[a]=255&s[a]}o("../utils").inherits(h,c),h.prototype.byteAt=function(s){return this.data[this.zero+s]},h.prototype.lastIndexOfSignature=function(s){for(var a=s.charCodeAt(0),f=s.charCodeAt(1),w=s.charCodeAt(2),m=s.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===a&&this.data[y+1]===f&&this.data[y+2]===w&&this.data[y+3]===m)return y-this.zero;return-1},h.prototype.readAndCheckSignature=function(s){var a=s.charCodeAt(0),f=s.charCodeAt(1),w=s.charCodeAt(2),m=s.charCodeAt(3),y=this.readData(4);return a===y[0]&&f===y[1]&&w===y[2]&&m===y[3]},h.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},C.exports=h},{"../utils":32,"./DataReader":18}],18:[function(o,C,n){var c=o("../utils");function h(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}h.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var a,f=0;for(this.checkOffset(s),a=this.index+s-1;a>=this.index;a--)f=(f<<8)+this.byteAt(a);return this.index+=s,f},readString:function(s){return c.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},C.exports=h},{"../utils":32}],19:[function(o,C,n){var c=o("./Uint8ArrayReader");function h(s){c.call(this,s)}o("../utils").inherits(h,c),h.prototype.readData=function(s){this.checkOffset(s);var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},C.exports=h},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,C,n){var c=o("./DataReader");function h(s){c.call(this,s)}o("../utils").inherits(h,c),h.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},h.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},h.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},h.prototype.readData=function(s){this.checkOffset(s);var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},C.exports=h},{"../utils":32,"./DataReader":18}],21:[function(o,C,n){var c=o("./ArrayReader");function h(s){c.call(this,s)}o("../utils").inherits(h,c),h.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},C.exports=h},{"../utils":32,"./ArrayReader":17}],22:[function(o,C,n){var c=o("../utils"),h=o("../support"),s=o("./ArrayReader"),a=o("./StringReader"),f=o("./NodeBufferReader"),w=o("./Uint8ArrayReader");C.exports=function(m){var y=c.getTypeOf(m);return c.checkSupport(y),y!=="string"||h.uint8array?y==="nodebuffer"?new f(m):h.uint8array?new w(c.transformTo("uint8array",m)):new s(c.transformTo("array",m)):new a(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,C,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,C,n){var c=o("./GenericWorker"),h=o("../utils");function s(a){c.call(this,"ConvertWorker to "+a),this.destType=a}h.inherits(s,c),s.prototype.processChunk=function(a){this.push({data:h.transformTo(this.destType,a.data),meta:a.meta})},C.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(o,C,n){var c=o("./GenericWorker"),h=o("../crc32");function s(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(s,c),s.prototype.processChunk=function(a){this.streamInfo.crc32=h(a.data,this.streamInfo.crc32||0),this.push(a)},C.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,C,n){var c=o("../utils"),h=o("./GenericWorker");function s(a){h.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}c.inherits(s,h),s.prototype.processChunk=function(a){if(a){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+a.data.length}h.prototype.processChunk.call(this,a)},C.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(o,C,n){var c=o("../utils"),h=o("./GenericWorker");function s(a){h.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(w){f.dataIsReady=!0,f.data=w,f.max=w&&w.length||0,f.type=c.getTypeOf(w),f.isPaused||f._tickAndRepeat()},function(w){f.error(w)})}c.inherits(s,h),s.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,f);break;case"uint8array":a=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":a=this.data.slice(this.index,f)}return this.index=f,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},C.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(o,C,n){function c(h){this.name=h||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(h){this.emit("data",h)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(h){this.emit("error",h)}return!0},error:function(h){return!this.isFinished&&(this.isPaused?this.generatedError=h:(this.isFinished=!0,this.emit("error",h),this.previous&&this.previous.error(h),this.cleanUp()),!0)},on:function(h,s){return this._listeners[h].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(h,s){if(this._listeners[h])for(var a=0;a<this._listeners[h].length;a++)this._listeners[h][a].call(this,s)},pipe:function(h){return h.registerPrevious(this)},registerPrevious:function(h){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=h.streamInfo,this.mergeStreamInfo(),this.previous=h;var s=this;return h.on("data",function(a){s.processChunk(a)}),h.on("end",function(){s.end()}),h.on("error",function(a){s.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var h=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),h=!0),this.previous&&this.previous.resume(),!h},flush:function(){},processChunk:function(h){this.push(h)},withStreamInfo:function(h,s){return this.extraStreamInfo[h]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var h in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,h)&&(this.streamInfo[h]=this.extraStreamInfo[h])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var h="Worker "+this.name;return this.previous?this.previous+" -> "+h:h}},C.exports=c},{}],29:[function(o,C,n){var c=o("../utils"),h=o("./ConvertWorker"),s=o("./GenericWorker"),a=o("../base64"),f=o("../support"),w=o("../external"),m=null;if(f.nodestream)try{m=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(v,i){return new w.Promise(function(p,u){var k=[],S=v._internalType,I=v._outputType,A=v._mimeType;v.on("data",function(B,P){k.push(B),i&&i(P)}).on("error",function(B){k=[],u(B)}).on("end",function(){try{var B=function(P,x,d){switch(P){case"blob":return c.newBlob(c.transformTo("arraybuffer",x),d);case"base64":return a.encode(x);default:return c.transformTo(P,x)}}(I,function(P,x){var d,E=0,G=null,b=0;for(d=0;d<x.length;d++)b+=x[d].length;switch(P){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(G=new Uint8Array(b),d=0;d<x.length;d++)G.set(x[d],E),E+=x[d].length;return G;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+P+"'")}}(S,k),A);p(B)}catch(P){u(P)}k=[]}).resume()})}function l(v,i,p){var u=i;switch(i){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=i,this._mimeType=p,c.checkSupport(u),this._worker=v.pipe(new h(u)),v.lock()}catch(k){this._worker=new s("error"),this._worker.error(k)}}l.prototype={accumulate:function(v){return y(this,v)},on:function(v,i){var p=this;return v==="data"?this._worker.on(v,function(u){i.call(p,u.data,u.meta)}):this._worker.on(v,function(){c.delay(i,arguments,p)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},v)}},C.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,C,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var c=new ArrayBuffer(0);try{n.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);h.append(c),n.blob=h.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!o("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(o,C,n){for(var c=o("./utils"),h=o("./support"),s=o("./nodejsUtils"),a=o("./stream/GenericWorker"),f=new Array(256),w=0;w<256;w++)f[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;f[254]=f[254]=1;function m(){a.call(this,"utf-8 decode"),this.leftOver=null}function y(){a.call(this,"utf-8 encode")}n.utf8encode=function(l){return h.nodebuffer?s.newBufferFrom(l,"utf-8"):function(v){var i,p,u,k,S,I=v.length,A=0;for(k=0;k<I;k++)(64512&(p=v.charCodeAt(k)))==55296&&k+1<I&&(64512&(u=v.charCodeAt(k+1)))==56320&&(p=65536+(p-55296<<10)+(u-56320),k++),A+=p<128?1:p<2048?2:p<65536?3:4;for(i=h.uint8array?new Uint8Array(A):new Array(A),k=S=0;S<A;k++)(64512&(p=v.charCodeAt(k)))==55296&&k+1<I&&(64512&(u=v.charCodeAt(k+1)))==56320&&(p=65536+(p-55296<<10)+(u-56320),k++),p<128?i[S++]=p:(p<2048?i[S++]=192|p>>>6:(p<65536?i[S++]=224|p>>>12:(i[S++]=240|p>>>18,i[S++]=128|p>>>12&63),i[S++]=128|p>>>6&63),i[S++]=128|63&p);return i}(l)},n.utf8decode=function(l){return h.nodebuffer?c.transformTo("nodebuffer",l).toString("utf-8"):function(v){var i,p,u,k,S=v.length,I=new Array(2*S);for(i=p=0;i<S;)if((u=v[i++])<128)I[p++]=u;else if(4<(k=f[u]))I[p++]=65533,i+=k-1;else{for(u&=k===2?31:k===3?15:7;1<k&&i<S;)u=u<<6|63&v[i++],k--;1<k?I[p++]=65533:u<65536?I[p++]=u:(u-=65536,I[p++]=55296|u>>10&1023,I[p++]=56320|1023&u)}return I.length!==p&&(I.subarray?I=I.subarray(0,p):I.length=p),c.applyFromCharCode(I)}(l=c.transformTo(h.uint8array?"uint8array":"array",l))},c.inherits(m,a),m.prototype.processChunk=function(l){var v=c.transformTo(h.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var i=v;(v=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),v.set(i,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var p=function(k,S){var I;for((S=S||k.length)>k.length&&(S=k.length),I=S-1;0<=I&&(192&k[I])==128;)I--;return I<0||I===0?S:I+f[k[I]]>S?I:S}(v),u=v;p!==v.length&&(h.uint8array?(u=v.subarray(0,p),this.leftOver=v.subarray(p,v.length)):(u=v.slice(0,p),this.leftOver=v.slice(p,v.length))),this.push({data:n.utf8decode(u),meta:l.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=m,c.inherits(y,a),y.prototype.processChunk=function(l){this.push({data:n.utf8encode(l.data),meta:l.meta})},n.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,C,n){var c=o("./support"),h=o("./base64"),s=o("./nodejsUtils"),a=o("./external");function f(i){return i}function w(i,p){for(var u=0;u<i.length;++u)p[u]=255&i.charCodeAt(u);return p}o("setimmediate"),n.newBlob=function(i,p){n.checkSupport("blob");try{return new Blob([i],{type:p})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(i),u.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(i,p,u){var k=[],S=0,I=i.length;if(I<=u)return String.fromCharCode.apply(null,i);for(;S<I;)p==="array"||p==="nodebuffer"?k.push(String.fromCharCode.apply(null,i.slice(S,Math.min(S+u,I)))):k.push(String.fromCharCode.apply(null,i.subarray(S,Math.min(S+u,I)))),S+=u;return k.join("")},stringifyByChar:function(i){for(var p="",u=0;u<i.length;u++)p+=String.fromCharCode(i[u]);return p},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function y(i){var p=65536,u=n.getTypeOf(i),k=!0;if(u==="uint8array"?k=m.applyCanBeUsed.uint8array:u==="nodebuffer"&&(k=m.applyCanBeUsed.nodebuffer),k)for(;1<p;)try{return m.stringifyByChunk(i,u,p)}catch{p=Math.floor(p/2)}return m.stringifyByChar(i)}function l(i,p){for(var u=0;u<i.length;u++)p[u]=i[u];return p}n.applyFromCharCode=y;var v={};v.string={string:f,array:function(i){return w(i,new Array(i.length))},arraybuffer:function(i){return v.string.uint8array(i).buffer},uint8array:function(i){return w(i,new Uint8Array(i.length))},nodebuffer:function(i){return w(i,s.allocBuffer(i.length))}},v.array={string:y,array:f,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return s.newBufferFrom(i)}},v.arraybuffer={string:function(i){return y(new Uint8Array(i))},array:function(i){return l(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:f,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return s.newBufferFrom(new Uint8Array(i))}},v.uint8array={string:y,array:function(i){return l(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:f,nodebuffer:function(i){return s.newBufferFrom(i)}},v.nodebuffer={string:y,array:function(i){return l(i,new Array(i.length))},arraybuffer:function(i){return v.nodebuffer.uint8array(i).buffer},uint8array:function(i){return l(i,new Uint8Array(i.length))},nodebuffer:f},n.transformTo=function(i,p){if(p=p||"",!i)return p;n.checkSupport(i);var u=n.getTypeOf(p);return v[u][i](p)},n.resolve=function(i){for(var p=i.split("/"),u=[],k=0;k<p.length;k++){var S=p[k];S==="."||S===""&&k!==0&&k!==p.length-1||(S===".."?u.pop():u.push(S))}return u.join("/")},n.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":c.nodebuffer&&s.isBuffer(i)?"nodebuffer":c.uint8array&&i instanceof Uint8Array?"uint8array":c.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(i){if(!c[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(i){var p,u,k="";for(u=0;u<(i||"").length;u++)k+="\\x"+((p=i.charCodeAt(u))<16?"0":"")+p.toString(16).toUpperCase();return k},n.delay=function(i,p,u){setImmediate(function(){i.apply(u||null,p||[])})},n.inherits=function(i,p){function u(){}u.prototype=p.prototype,i.prototype=new u},n.extend=function(){var i,p,u={};for(i=0;i<arguments.length;i++)for(p in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],p)&&u[p]===void 0&&(u[p]=arguments[i][p]);return u},n.prepareContent=function(i,p,u,k,S){return a.Promise.resolve(p).then(function(I){return c.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new a.Promise(function(A,B){var P=new FileReader;P.onload=function(x){A(x.target.result)},P.onerror=function(x){B(x.target.error)},P.readAsArrayBuffer(I)}):I}).then(function(I){var A=n.getTypeOf(I);return A?(A==="arraybuffer"?I=n.transformTo("uint8array",I):A==="string"&&(S?I=h.decode(I):u&&k!==!0&&(I=function(B){return w(B,c.uint8array?new Uint8Array(B.length):new Array(B.length))}(I))),I):a.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,C,n){var c=o("./reader/readerFor"),h=o("./utils"),s=o("./signature"),a=o("./zipEntry"),f=o("./support");function w(m){this.files=[],this.loadOptions=m}w.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+h.pretty(y)+", expected "+h.pretty(m)+")")}},isSignature:function(m,y){var l=this.reader.index;this.reader.setIndex(m);var v=this.reader.readString(4)===y;return this.reader.setIndex(l),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=f.uint8array?"uint8array":"array",l=h.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,l,v=this.zip64EndOfCentralSize-44;0<v;)m=this.reader.readInt(2),y=this.reader.readInt(4),l=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(m=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var v=y-l;if(0<v)this.isSignature(y,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(m){this.reader=c(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},C.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,C,n){var c=o("./reader/readerFor"),h=o("./utils"),s=o("./compressedObject"),a=o("./crc32"),f=o("./utf8"),w=o("./compressions"),m=o("./support");function y(l,v){this.options=l,this.loadOptions=v}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var v,i;if(l.skip(22),this.fileNameLength=l.readInt(2),i=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(p){for(var u in w)if(Object.prototype.hasOwnProperty.call(w,u)&&w[u].magic===p)return w[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+h.pretty(this.compressionMethod)+" unknown (inner file : "+h.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var v=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(v),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=c(this.extraFields[1].value);this.uncompressedSize===h.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===h.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===h.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===h.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var v,i,p,u=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<u;)v=l.readInt(2),i=l.readInt(2),p=l.readData(i),this.extraFields[v]={id:v,length:i,value:p};l.setIndex(u)},handleUTF8:function(){var l=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var i=h.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var u=h.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var v=c(l.value);return v.readInt(1)!==1||a(this.fileName)!==v.readInt(4)?null:f.utf8decode(v.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var v=c(l.value);return v.readInt(1)!==1||a(this.fileComment)!==v.readInt(4)?null:f.utf8decode(v.readData(l.length-5))}return null}},C.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,C,n){function c(v,i,p){this.name=v,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=i,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var h=o("./stream/StreamHelper"),s=o("./stream/DataWorker"),a=o("./utf8"),f=o("./compressedObject"),w=o("./stream/GenericWorker");c.prototype={internalStream:function(v){var i=null,p="string";try{if(!v)throw new Error("No output type specified.");var u=(p=v.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),i=this._decompressWorker();var k=!this._dataBinary;k&&!u&&(i=i.pipe(new a.Utf8EncodeWorker)),!k&&u&&(i=i.pipe(new a.Utf8DecodeWorker))}catch(S){(i=new w("error")).error(S)}return new h(i,p,"")},async:function(v,i){return this.internalStream(v).accumulate(i)},nodeStream:function(v,i){return this.internalStream(v||"nodebuffer").toNodejsStream(i)},_compressWorker:function(v,i){if(this._data instanceof f&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new a.Utf8EncodeWorker)),f.createWorkerFrom(p,v,i)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof w?this._data:new s(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<m.length;l++)c.prototype[m[l]]=y;C.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,C,n){(function(c){var h,s,a=c.MutationObserver||c.WebKitMutationObserver;if(a){var f=0,w=new a(v),m=c.document.createTextNode("");w.observe(m,{characterData:!0}),h=function(){m.data=f=++f%2}}else if(c.setImmediate||c.MessageChannel===void 0)h="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var i=c.document.createElement("script");i.onreadystatechange=function(){v(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},c.document.documentElement.appendChild(i)}:function(){setTimeout(v,0)};else{var y=new c.MessageChannel;y.port1.onmessage=v,h=function(){y.port2.postMessage(0)}}var l=[];function v(){var i,p;s=!0;for(var u=l.length;u;){for(p=l,l=[],i=-1;++i<u;)p[i]();u=l.length}s=!1}C.exports=function(i){l.push(i)!==1||s||h()}}).call(this,typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,C,n){var c=o("immediate");function h(){}var s={},a=["REJECTED"],f=["FULFILLED"],w=["PENDING"];function m(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,u!==h&&i(this,u)}function y(u,k,S){this.promise=u,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function l(u,k,S){c(function(){var I;try{I=k(S)}catch(A){return s.reject(u,A)}I===u?s.reject(u,new TypeError("Cannot resolve promise with itself")):s.resolve(u,I)})}function v(u){var k=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof k=="function")return function(){k.apply(u,arguments)}}function i(u,k){var S=!1;function I(P){S||(S=!0,s.reject(u,P))}function A(P){S||(S=!0,s.resolve(u,P))}var B=p(function(){k(A,I)});B.status==="error"&&I(B.value)}function p(u,k){var S={};try{S.value=u(k),S.status="success"}catch(I){S.status="error",S.value=I}return S}(C.exports=m).prototype.finally=function(u){if(typeof u!="function")return this;var k=this.constructor;return this.then(function(S){return k.resolve(u()).then(function(){return S})},function(S){return k.resolve(u()).then(function(){throw S})})},m.prototype.catch=function(u){return this.then(null,u)},m.prototype.then=function(u,k){if(typeof u!="function"&&this.state===f||typeof k!="function"&&this.state===a)return this;var S=new this.constructor(h);return this.state!==w?l(S,this.state===f?u:k,this.outcome):this.queue.push(new y(S,u,k)),S},y.prototype.callFulfilled=function(u){s.resolve(this.promise,u)},y.prototype.otherCallFulfilled=function(u){l(this.promise,this.onFulfilled,u)},y.prototype.callRejected=function(u){s.reject(this.promise,u)},y.prototype.otherCallRejected=function(u){l(this.promise,this.onRejected,u)},s.resolve=function(u,k){var S=p(v,k);if(S.status==="error")return s.reject(u,S.value);var I=S.value;if(I)i(u,I);else{u.state=f,u.outcome=k;for(var A=-1,B=u.queue.length;++A<B;)u.queue[A].callFulfilled(k)}return u},s.reject=function(u,k){u.state=a,u.outcome=k;for(var S=-1,I=u.queue.length;++S<I;)u.queue[S].callRejected(k);return u},m.resolve=function(u){return u instanceof this?u:s.resolve(new this(h),u)},m.reject=function(u){var k=new this(h);return s.reject(k,u)},m.all=function(u){var k=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=u.length,I=!1;if(!S)return this.resolve([]);for(var A=new Array(S),B=0,P=-1,x=new this(h);++P<S;)d(u[P],P);return x;function d(E,G){k.resolve(E).then(function(b){A[G]=b,++B!==S||I||(I=!0,s.resolve(x,A))},function(b){I||(I=!0,s.reject(x,b))})}},m.race=function(u){var k=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=u.length,I=!1;if(!S)return this.resolve([]);for(var A=-1,B=new this(h);++A<S;)P=u[A],k.resolve(P).then(function(x){I||(I=!0,s.resolve(B,x))},function(x){I||(I=!0,s.reject(B,x))});var P;return B}},{immediate:36}],38:[function(o,C,n){var c={};(0,o("./lib/utils/common").assign)(c,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),C.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,C,n){var c=o("./zlib/deflate"),h=o("./utils/common"),s=o("./utils/strings"),a=o("./zlib/messages"),f=o("./zlib/zstream"),w=Object.prototype.toString,m=0,y=-1,l=0,v=8;function i(u){if(!(this instanceof i))return new i(u);this.options=h.assign({level:y,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},u||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var S=c.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(S!==m)throw new Error(a[S]);if(k.header&&c.deflateSetHeader(this.strm,k.header),k.dictionary){var I;if(I=typeof k.dictionary=="string"?s.string2buf(k.dictionary):w.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(S=c.deflateSetDictionary(this.strm,I))!==m)throw new Error(a[S]);this._dict_set=!0}}function p(u,k){var S=new i(k);if(S.push(u,!0),S.err)throw S.msg||a[S.err];return S.result}i.prototype.push=function(u,k){var S,I,A=this.strm,B=this.options.chunkSize;if(this.ended)return!1;I=k===~~k?k:k===!0?4:0,typeof u=="string"?A.input=s.string2buf(u):w.call(u)==="[object ArrayBuffer]"?A.input=new Uint8Array(u):A.input=u,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new h.Buf8(B),A.next_out=0,A.avail_out=B),(S=c.deflate(A,I))!==1&&S!==m)return this.onEnd(S),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(h.shrinkBuf(A.output,A.next_out))):this.onData(h.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&S!==1);return I===4?(S=c.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===m):I!==2||(this.onEnd(m),!(A.avail_out=0))},i.prototype.onData=function(u){this.chunks.push(u)},i.prototype.onEnd=function(u){u===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},n.Deflate=i,n.deflate=p,n.deflateRaw=function(u,k){return(k=k||{}).raw=!0,p(u,k)},n.gzip=function(u,k){return(k=k||{}).gzip=!0,p(u,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,C,n){var c=o("./zlib/inflate"),h=o("./utils/common"),s=o("./utils/strings"),a=o("./zlib/constants"),f=o("./zlib/messages"),w=o("./zlib/zstream"),m=o("./zlib/gzheader"),y=Object.prototype.toString;function l(i){if(!(this instanceof l))return new l(i);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},i||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||i&&i.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var u=c.inflateInit2(this.strm,p.windowBits);if(u!==a.Z_OK)throw new Error(f[u]);this.header=new m,c.inflateGetHeader(this.strm,this.header)}function v(i,p){var u=new l(p);if(u.push(i,!0),u.err)throw u.msg||f[u.err];return u.result}l.prototype.push=function(i,p){var u,k,S,I,A,B,P=this.strm,x=this.options.chunkSize,d=this.options.dictionary,E=!1;if(this.ended)return!1;k=p===~~p?p:p===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof i=="string"?P.input=s.binstring2buf(i):y.call(i)==="[object ArrayBuffer]"?P.input=new Uint8Array(i):P.input=i,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new h.Buf8(x),P.next_out=0,P.avail_out=x),(u=c.inflate(P,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(B=typeof d=="string"?s.string2buf(d):y.call(d)==="[object ArrayBuffer]"?new Uint8Array(d):d,u=c.inflateSetDictionary(this.strm,B)),u===a.Z_BUF_ERROR&&E===!0&&(u=a.Z_OK,E=!1),u!==a.Z_STREAM_END&&u!==a.Z_OK)return this.onEnd(u),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&u!==a.Z_STREAM_END&&(P.avail_in!==0||k!==a.Z_FINISH&&k!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=s.utf8border(P.output,P.next_out),I=P.next_out-S,A=s.buf2string(P.output,S),P.next_out=I,P.avail_out=x-I,I&&h.arraySet(P.output,P.output,S,I,0),this.onData(A)):this.onData(h.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(E=!0)}while((0<P.avail_in||P.avail_out===0)&&u!==a.Z_STREAM_END);return u===a.Z_STREAM_END&&(k=a.Z_FINISH),k===a.Z_FINISH?(u=c.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===a.Z_OK):k!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(P.avail_out=0))},l.prototype.onData=function(i){this.chunks.push(i)},l.prototype.onEnd=function(i){i===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},n.Inflate=l,n.inflate=v,n.inflateRaw=function(i,p){return(p=p||{}).raw=!0,v(i,p)},n.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,C,n){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(a){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var w=f.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var m in w)w.hasOwnProperty(m)&&(a[m]=w[m])}}return a},n.shrinkBuf=function(a,f){return a.length===f?a:a.subarray?a.subarray(0,f):(a.length=f,a)};var h={arraySet:function(a,f,w,m,y){if(f.subarray&&a.subarray)a.set(f.subarray(w,w+m),y);else for(var l=0;l<m;l++)a[y+l]=f[w+l]},flattenChunks:function(a){var f,w,m,y,l,v;for(f=m=0,w=a.length;f<w;f++)m+=a[f].length;for(v=new Uint8Array(m),f=y=0,w=a.length;f<w;f++)l=a[f],v.set(l,y),y+=l.length;return v}},s={arraySet:function(a,f,w,m,y){for(var l=0;l<m;l++)a[y+l]=f[w+l]},flattenChunks:function(a){return[].concat.apply([],a)}};n.setTyped=function(a){a?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,h)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(c)},{}],42:[function(o,C,n){var c=o("./common"),h=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var a=new c.Buf8(256),f=0;f<256;f++)a[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function w(m,y){if(y<65537&&(m.subarray&&s||!m.subarray&&h))return String.fromCharCode.apply(null,c.shrinkBuf(m,y));for(var l="",v=0;v<y;v++)l+=String.fromCharCode(m[v]);return l}a[254]=a[254]=1,n.string2buf=function(m){var y,l,v,i,p,u=m.length,k=0;for(i=0;i<u;i++)(64512&(l=m.charCodeAt(i)))==55296&&i+1<u&&(64512&(v=m.charCodeAt(i+1)))==56320&&(l=65536+(l-55296<<10)+(v-56320),i++),k+=l<128?1:l<2048?2:l<65536?3:4;for(y=new c.Buf8(k),i=p=0;p<k;i++)(64512&(l=m.charCodeAt(i)))==55296&&i+1<u&&(64512&(v=m.charCodeAt(i+1)))==56320&&(l=65536+(l-55296<<10)+(v-56320),i++),l<128?y[p++]=l:(l<2048?y[p++]=192|l>>>6:(l<65536?y[p++]=224|l>>>12:(y[p++]=240|l>>>18,y[p++]=128|l>>>12&63),y[p++]=128|l>>>6&63),y[p++]=128|63&l);return y},n.buf2binstring=function(m){return w(m,m.length)},n.binstring2buf=function(m){for(var y=new c.Buf8(m.length),l=0,v=y.length;l<v;l++)y[l]=m.charCodeAt(l);return y},n.buf2string=function(m,y){var l,v,i,p,u=y||m.length,k=new Array(2*u);for(l=v=0;l<u;)if((i=m[l++])<128)k[v++]=i;else if(4<(p=a[i]))k[v++]=65533,l+=p-1;else{for(i&=p===2?31:p===3?15:7;1<p&&l<u;)i=i<<6|63&m[l++],p--;1<p?k[v++]=65533:i<65536?k[v++]=i:(i-=65536,k[v++]=55296|i>>10&1023,k[v++]=56320|1023&i)}return w(k,v)},n.utf8border=function(m,y){var l;for((y=y||m.length)>m.length&&(y=m.length),l=y-1;0<=l&&(192&m[l])==128;)l--;return l<0||l===0?y:l+a[m[l]]>y?l:y}},{"./common":41}],43:[function(o,C,n){C.exports=function(c,h,s,a){for(var f=65535&c|0,w=c>>>16&65535|0,m=0;s!==0;){for(s-=m=2e3<s?2e3:s;w=w+(f=f+h[a++]|0)|0,--m;);f%=65521,w%=65521}return f|w<<16|0}},{}],44:[function(o,C,n){C.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,C,n){var c=function(){for(var h,s=[],a=0;a<256;a++){h=a;for(var f=0;f<8;f++)h=1&h?3988292384^h>>>1:h>>>1;s[a]=h}return s}();C.exports=function(h,s,a,f){var w=c,m=f+a;h^=-1;for(var y=f;y<m;y++)h=h>>>8^w[255&(h^s[y])];return-1^h}},{}],46:[function(o,C,n){var c,h=o("../utils/common"),s=o("./trees"),a=o("./adler32"),f=o("./crc32"),w=o("./messages"),m=0,y=4,l=0,v=-2,i=-1,p=4,u=2,k=8,S=9,I=286,A=30,B=19,P=2*I+1,x=15,d=3,E=258,G=E+d+1,b=42,O=113,e=1,M=2,tt=3,L=4;function et(t,W){return t.msg=w[W],W}function U(t){return(t<<1)-(4<t?9:0)}function nt(t){for(var W=t.length;0<=--W;)t[W]=0}function F(t){var W=t.state,R=W.pending;R>t.avail_out&&(R=t.avail_out),R!==0&&(h.arraySet(t.output,W.pending_buf,W.pending_out,R,t.next_out),t.next_out+=R,W.pending_out+=R,t.total_out+=R,t.avail_out-=R,W.pending-=R,W.pending===0&&(W.pending_out=0))}function j(t,W){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,W),t.block_start=t.strstart,F(t.strm)}function J(t,W){t.pending_buf[t.pending++]=W}function Y(t,W){t.pending_buf[t.pending++]=W>>>8&255,t.pending_buf[t.pending++]=255&W}function K(t,W){var R,_,g=t.max_chain_length,T=t.strstart,Z=t.prev_length,H=t.nice_match,N=t.strstart>t.w_size-G?t.strstart-(t.w_size-G):0,q=t.window,X=t.w_mask,V=t.prev,rt=t.strstart+E,ht=q[T+Z-1],ot=q[T+Z];t.prev_length>=t.good_match&&(g>>=2),H>t.lookahead&&(H=t.lookahead);do if(q[(R=W)+Z]===ot&&q[R+Z-1]===ht&&q[R]===q[T]&&q[++R]===q[T+1]){T+=2,R++;do;while(q[++T]===q[++R]&&q[++T]===q[++R]&&q[++T]===q[++R]&&q[++T]===q[++R]&&q[++T]===q[++R]&&q[++T]===q[++R]&&q[++T]===q[++R]&&q[++T]===q[++R]&&T<rt);if(_=E-(rt-T),T=rt-E,Z<_){if(t.match_start=W,H<=(Z=_))break;ht=q[T+Z-1],ot=q[T+Z]}}while((W=V[W&X])>N&&--g!=0);return Z<=t.lookahead?Z:t.lookahead}function lt(t){var W,R,_,g,T,Z,H,N,q,X,V=t.w_size;do{if(g=t.window_size-t.lookahead-t.strstart,t.strstart>=V+(V-G)){for(h.arraySet(t.window,t.window,V,V,0),t.match_start-=V,t.strstart-=V,t.block_start-=V,W=R=t.hash_size;_=t.head[--W],t.head[W]=V<=_?_-V:0,--R;);for(W=R=V;_=t.prev[--W],t.prev[W]=V<=_?_-V:0,--R;);g+=V}if(t.strm.avail_in===0)break;if(Z=t.strm,H=t.window,N=t.strstart+t.lookahead,q=g,X=void 0,X=Z.avail_in,q<X&&(X=q),R=X===0?0:(Z.avail_in-=X,h.arraySet(H,Z.input,Z.next_in,X,N),Z.state.wrap===1?Z.adler=a(Z.adler,H,X,N):Z.state.wrap===2&&(Z.adler=f(Z.adler,H,X,N)),Z.next_in+=X,Z.total_in+=X,X),t.lookahead+=R,t.lookahead+t.insert>=d)for(T=t.strstart-t.insert,t.ins_h=t.window[T],t.ins_h=(t.ins_h<<t.hash_shift^t.window[T+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[T+d-1])&t.hash_mask,t.prev[T&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=T,T++,t.insert--,!(t.lookahead+t.insert<d)););}while(t.lookahead<G&&t.strm.avail_in!==0)}function dt(t,W){for(var R,_;;){if(t.lookahead<G){if(lt(t),t.lookahead<G&&W===m)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+d-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),R!==0&&t.strstart-R<=t.w_size-G&&(t.match_length=K(t,R)),t.match_length>=d)if(_=s._tr_tally(t,t.strstart-t.match_start,t.match_length-d),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=d){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+d-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else _=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(_&&(j(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<d-1?t.strstart:d-1,W===y?(j(t,!0),t.strm.avail_out===0?tt:L):t.last_lit&&(j(t,!1),t.strm.avail_out===0)?e:M}function st(t,W){for(var R,_,g;;){if(t.lookahead<G){if(lt(t),t.lookahead<G&&W===m)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+d-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=d-1,R!==0&&t.prev_length<t.max_lazy_match&&t.strstart-R<=t.w_size-G&&(t.match_length=K(t,R),t.match_length<=5&&(t.strategy===1||t.match_length===d&&4096<t.strstart-t.match_start)&&(t.match_length=d-1)),t.prev_length>=d&&t.match_length<=t.prev_length){for(g=t.strstart+t.lookahead-d,_=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-d),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=g&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+d-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=d-1,t.strstart++,_&&(j(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((_=s._tr_tally(t,0,t.window[t.strstart-1]))&&j(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(_=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<d-1?t.strstart:d-1,W===y?(j(t,!0),t.strm.avail_out===0?tt:L):t.last_lit&&(j(t,!1),t.strm.avail_out===0)?e:M}function $(t,W,R,_,g){this.good_length=t,this.max_lazy=W,this.nice_length=R,this.max_chain=_,this.func=g}function it(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*P),this.dyn_dtree=new h.Buf16(2*(2*A+1)),this.bl_tree=new h.Buf16(2*(2*B+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(x+1),this.heap=new h.Buf16(2*I+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*I+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(t){var W;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=u,(W=t.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?b:O,t.adler=W.wrap===2?0:1,W.last_flush=m,s._tr_init(W),l):et(t,v)}function ft(t){var W=at(t);return W===l&&function(R){R.window_size=2*R.w_size,nt(R.head),R.max_lazy_match=c[R.level].max_lazy,R.good_match=c[R.level].good_length,R.nice_match=c[R.level].nice_length,R.max_chain_length=c[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=d-1,R.match_available=0,R.ins_h=0}(t.state),W}function ct(t,W,R,_,g,T){if(!t)return v;var Z=1;if(W===i&&(W=6),_<0?(Z=0,_=-_):15<_&&(Z=2,_-=16),g<1||S<g||R!==k||_<8||15<_||W<0||9<W||T<0||p<T)return et(t,v);_===8&&(_=9);var H=new it;return(t.state=H).strm=t,H.wrap=Z,H.gzhead=null,H.w_bits=_,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=g+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+d-1)/d),H.window=new h.Buf8(2*H.w_size),H.head=new h.Buf16(H.hash_size),H.prev=new h.Buf16(H.w_size),H.lit_bufsize=1<<g+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new h.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=W,H.strategy=T,H.method=R,ft(t)}c=[new $(0,0,0,0,function(t,W){var R=65535;for(R>t.pending_buf_size-5&&(R=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),t.lookahead===0&&W===m)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var _=t.block_start+R;if((t.strstart===0||t.strstart>=_)&&(t.lookahead=t.strstart-_,t.strstart=_,j(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-G&&(j(t,!1),t.strm.avail_out===0))return e}return t.insert=0,W===y?(j(t,!0),t.strm.avail_out===0?tt:L):(t.strstart>t.block_start&&(j(t,!1),t.strm.avail_out),e)}),new $(4,4,8,4,dt),new $(4,5,16,8,dt),new $(4,6,32,32,dt),new $(4,4,16,16,st),new $(8,16,32,32,st),new $(8,16,128,128,st),new $(8,32,128,256,st),new $(32,128,258,1024,st),new $(32,258,258,4096,st)],n.deflateInit=function(t,W){return ct(t,W,k,15,8,0)},n.deflateInit2=ct,n.deflateReset=ft,n.deflateResetKeep=at,n.deflateSetHeader=function(t,W){return t&&t.state?t.state.wrap!==2?v:(t.state.gzhead=W,l):v},n.deflate=function(t,W){var R,_,g,T;if(!t||!t.state||5<W||W<0)return t?et(t,v):v;if(_=t.state,!t.output||!t.input&&t.avail_in!==0||_.status===666&&W!==y)return et(t,t.avail_out===0?-5:v);if(_.strm=t,R=_.last_flush,_.last_flush=W,_.status===b)if(_.wrap===2)t.adler=0,J(_,31),J(_,139),J(_,8),_.gzhead?(J(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),J(_,255&_.gzhead.time),J(_,_.gzhead.time>>8&255),J(_,_.gzhead.time>>16&255),J(_,_.gzhead.time>>24&255),J(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),J(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(J(_,255&_.gzhead.extra.length),J(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(t.adler=f(t.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(J(_,0),J(_,0),J(_,0),J(_,0),J(_,0),J(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),J(_,3),_.status=O);else{var Z=k+(_.w_bits-8<<4)<<8;Z|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(Z|=32),Z+=31-Z%31,_.status=O,Y(_,Z),_.strstart!==0&&(Y(_,t.adler>>>16),Y(_,65535&t.adler)),t.adler=1}if(_.status===69)if(_.gzhead.extra){for(g=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>g&&(t.adler=f(t.adler,_.pending_buf,_.pending-g,g)),F(t),g=_.pending,_.pending!==_.pending_buf_size));)J(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>g&&(t.adler=f(t.adler,_.pending_buf,_.pending-g,g)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){g=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>g&&(t.adler=f(t.adler,_.pending_buf,_.pending-g,g)),F(t),g=_.pending,_.pending===_.pending_buf_size)){T=1;break}T=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,J(_,T)}while(T!==0);_.gzhead.hcrc&&_.pending>g&&(t.adler=f(t.adler,_.pending_buf,_.pending-g,g)),T===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){g=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>g&&(t.adler=f(t.adler,_.pending_buf,_.pending-g,g)),F(t),g=_.pending,_.pending===_.pending_buf_size)){T=1;break}T=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,J(_,T)}while(T!==0);_.gzhead.hcrc&&_.pending>g&&(t.adler=f(t.adler,_.pending_buf,_.pending-g,g)),T===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&F(t),_.pending+2<=_.pending_buf_size&&(J(_,255&t.adler),J(_,t.adler>>8&255),t.adler=0,_.status=O)):_.status=O),_.pending!==0){if(F(t),t.avail_out===0)return _.last_flush=-1,l}else if(t.avail_in===0&&U(W)<=U(R)&&W!==y)return et(t,-5);if(_.status===666&&t.avail_in!==0)return et(t,-5);if(t.avail_in!==0||_.lookahead!==0||W!==m&&_.status!==666){var H=_.strategy===2?function(N,q){for(var X;;){if(N.lookahead===0&&(lt(N),N.lookahead===0)){if(q===m)return e;break}if(N.match_length=0,X=s._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,X&&(j(N,!1),N.strm.avail_out===0))return e}return N.insert=0,q===y?(j(N,!0),N.strm.avail_out===0?tt:L):N.last_lit&&(j(N,!1),N.strm.avail_out===0)?e:M}(_,W):_.strategy===3?function(N,q){for(var X,V,rt,ht,ot=N.window;;){if(N.lookahead<=E){if(lt(N),N.lookahead<=E&&q===m)return e;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=d&&0<N.strstart&&(V=ot[rt=N.strstart-1])===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]){ht=N.strstart+E;do;while(V===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]&&V===ot[++rt]&&rt<ht);N.match_length=E-(ht-rt),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=d?(X=s._tr_tally(N,1,N.match_length-d),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(X=s._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),X&&(j(N,!1),N.strm.avail_out===0))return e}return N.insert=0,q===y?(j(N,!0),N.strm.avail_out===0?tt:L):N.last_lit&&(j(N,!1),N.strm.avail_out===0)?e:M}(_,W):c[_.level].func(_,W);if(H!==tt&&H!==L||(_.status=666),H===e||H===tt)return t.avail_out===0&&(_.last_flush=-1),l;if(H===M&&(W===1?s._tr_align(_):W!==5&&(s._tr_stored_block(_,0,0,!1),W===3&&(nt(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),F(t),t.avail_out===0))return _.last_flush=-1,l}return W!==y?l:_.wrap<=0?1:(_.wrap===2?(J(_,255&t.adler),J(_,t.adler>>8&255),J(_,t.adler>>16&255),J(_,t.adler>>24&255),J(_,255&t.total_in),J(_,t.total_in>>8&255),J(_,t.total_in>>16&255),J(_,t.total_in>>24&255)):(Y(_,t.adler>>>16),Y(_,65535&t.adler)),F(t),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?l:1)},n.deflateEnd=function(t){var W;return t&&t.state?(W=t.state.status)!==b&&W!==69&&W!==73&&W!==91&&W!==103&&W!==O&&W!==666?et(t,v):(t.state=null,W===O?et(t,-3):l):v},n.deflateSetDictionary=function(t,W){var R,_,g,T,Z,H,N,q,X=W.length;if(!t||!t.state||(T=(R=t.state).wrap)===2||T===1&&R.status!==b||R.lookahead)return v;for(T===1&&(t.adler=a(t.adler,W,X,0)),R.wrap=0,X>=R.w_size&&(T===0&&(nt(R.head),R.strstart=0,R.block_start=0,R.insert=0),q=new h.Buf8(R.w_size),h.arraySet(q,W,X-R.w_size,R.w_size,0),W=q,X=R.w_size),Z=t.avail_in,H=t.next_in,N=t.input,t.avail_in=X,t.next_in=0,t.input=W,lt(R);R.lookahead>=d;){for(_=R.strstart,g=R.lookahead-(d-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[_+d-1])&R.hash_mask,R.prev[_&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=_,_++,--g;);R.strstart=_,R.lookahead=d-1,lt(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=d-1,R.match_available=0,t.next_in=H,t.input=N,t.avail_in=Z,R.wrap=T,l},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,C,n){C.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,C,n){C.exports=function(c,h){var s,a,f,w,m,y,l,v,i,p,u,k,S,I,A,B,P,x,d,E,G,b,O,e,M;s=c.state,a=c.next_in,e=c.input,f=a+(c.avail_in-5),w=c.next_out,M=c.output,m=w-(h-c.avail_out),y=w+(c.avail_out-257),l=s.dmax,v=s.wsize,i=s.whave,p=s.wnext,u=s.window,k=s.hold,S=s.bits,I=s.lencode,A=s.distcode,B=(1<<s.lenbits)-1,P=(1<<s.distbits)-1;t:do{S<15&&(k+=e[a++]<<S,S+=8,k+=e[a++]<<S,S+=8),x=I[k&B];e:for(;;){if(k>>>=d=x>>>24,S-=d,(d=x>>>16&255)===0)M[w++]=65535&x;else{if(!(16&d)){if(!(64&d)){x=I[(65535&x)+(k&(1<<d)-1)];continue e}if(32&d){s.mode=12;break t}c.msg="invalid literal/length code",s.mode=30;break t}E=65535&x,(d&=15)&&(S<d&&(k+=e[a++]<<S,S+=8),E+=k&(1<<d)-1,k>>>=d,S-=d),S<15&&(k+=e[a++]<<S,S+=8,k+=e[a++]<<S,S+=8),x=A[k&P];r:for(;;){if(k>>>=d=x>>>24,S-=d,!(16&(d=x>>>16&255))){if(!(64&d)){x=A[(65535&x)+(k&(1<<d)-1)];continue r}c.msg="invalid distance code",s.mode=30;break t}if(G=65535&x,S<(d&=15)&&(k+=e[a++]<<S,(S+=8)<d&&(k+=e[a++]<<S,S+=8)),l<(G+=k&(1<<d)-1)){c.msg="invalid distance too far back",s.mode=30;break t}if(k>>>=d,S-=d,(d=w-m)<G){if(i<(d=G-d)&&s.sane){c.msg="invalid distance too far back",s.mode=30;break t}if(O=u,(b=0)===p){if(b+=v-d,d<E){for(E-=d;M[w++]=u[b++],--d;);b=w-G,O=M}}else if(p<d){if(b+=v+p-d,(d-=p)<E){for(E-=d;M[w++]=u[b++],--d;);if(b=0,p<E){for(E-=d=p;M[w++]=u[b++],--d;);b=w-G,O=M}}}else if(b+=p-d,d<E){for(E-=d;M[w++]=u[b++],--d;);b=w-G,O=M}for(;2<E;)M[w++]=O[b++],M[w++]=O[b++],M[w++]=O[b++],E-=3;E&&(M[w++]=O[b++],1<E&&(M[w++]=O[b++]))}else{for(b=w-G;M[w++]=M[b++],M[w++]=M[b++],M[w++]=M[b++],2<(E-=3););E&&(M[w++]=M[b++],1<E&&(M[w++]=M[b++]))}break}}break}}while(a<f&&w<y);a-=E=S>>3,k&=(1<<(S-=E<<3))-1,c.next_in=a,c.next_out=w,c.avail_in=a<f?f-a+5:5-(a-f),c.avail_out=w<y?y-w+257:257-(w-y),s.hold=k,s.bits=S}},{}],49:[function(o,C,n){var c=o("../utils/common"),h=o("./adler32"),s=o("./crc32"),a=o("./inffast"),f=o("./inftrees"),w=1,m=2,y=0,l=-2,v=1,i=852,p=592;function u(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(b){var O;return b&&b.state?(O=b.state,b.total_in=b.total_out=O.total=0,b.msg="",O.wrap&&(b.adler=1&O.wrap),O.mode=v,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new c.Buf32(i),O.distcode=O.distdyn=new c.Buf32(p),O.sane=1,O.back=-1,y):l}function I(b){var O;return b&&b.state?((O=b.state).wsize=0,O.whave=0,O.wnext=0,S(b)):l}function A(b,O){var e,M;return b&&b.state?(M=b.state,O<0?(e=0,O=-O):(e=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?l:(M.window!==null&&M.wbits!==O&&(M.window=null),M.wrap=e,M.wbits=O,I(b))):l}function B(b,O){var e,M;return b?(M=new k,(b.state=M).window=null,(e=A(b,O))!==y&&(b.state=null),e):l}var P,x,d=!0;function E(b){if(d){var O;for(P=new c.Buf32(512),x=new c.Buf32(32),O=0;O<144;)b.lens[O++]=8;for(;O<256;)b.lens[O++]=9;for(;O<280;)b.lens[O++]=7;for(;O<288;)b.lens[O++]=8;for(f(w,b.lens,0,288,P,0,b.work,{bits:9}),O=0;O<32;)b.lens[O++]=5;f(m,b.lens,0,32,x,0,b.work,{bits:5}),d=!1}b.lencode=P,b.lenbits=9,b.distcode=x,b.distbits=5}function G(b,O,e,M){var tt,L=b.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new c.Buf8(L.wsize)),M>=L.wsize?(c.arraySet(L.window,O,e-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(M<(tt=L.wsize-L.wnext)&&(tt=M),c.arraySet(L.window,O,e-M,tt,L.wnext),(M-=tt)?(c.arraySet(L.window,O,e-M,M,0),L.wnext=M,L.whave=L.wsize):(L.wnext+=tt,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=tt))),0}n.inflateReset=I,n.inflateReset2=A,n.inflateResetKeep=S,n.inflateInit=function(b){return B(b,15)},n.inflateInit2=B,n.inflate=function(b,O){var e,M,tt,L,et,U,nt,F,j,J,Y,K,lt,dt,st,$,it,at,ft,ct,t,W,R,_,g=0,T=new c.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return l;(e=b.state).mode===12&&(e.mode=13),et=b.next_out,tt=b.output,nt=b.avail_out,L=b.next_in,M=b.input,U=b.avail_in,F=e.hold,j=e.bits,J=U,Y=nt,W=y;t:for(;;)switch(e.mode){case v:if(e.wrap===0){e.mode=13;break}for(;j<16;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(2&e.wrap&&F===35615){T[e.check=0]=255&F,T[1]=F>>>8&255,e.check=s(e.check,T,2,0),j=F=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&F)<<8)+(F>>8))%31){b.msg="incorrect header check",e.mode=30;break}if((15&F)!=8){b.msg="unknown compression method",e.mode=30;break}if(j-=4,t=8+(15&(F>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){b.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,b.adler=e.check=1,e.mode=512&F?10:12,j=F=0;break;case 2:for(;j<16;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(e.flags=F,(255&e.flags)!=8){b.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){b.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=F>>8&1),512&e.flags&&(T[0]=255&F,T[1]=F>>>8&255,e.check=s(e.check,T,2,0)),j=F=0,e.mode=3;case 3:for(;j<32;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}e.head&&(e.head.time=F),512&e.flags&&(T[0]=255&F,T[1]=F>>>8&255,T[2]=F>>>16&255,T[3]=F>>>24&255,e.check=s(e.check,T,4,0)),j=F=0,e.mode=4;case 4:for(;j<16;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}e.head&&(e.head.xflags=255&F,e.head.os=F>>8),512&e.flags&&(T[0]=255&F,T[1]=F>>>8&255,e.check=s(e.check,T,2,0)),j=F=0,e.mode=5;case 5:if(1024&e.flags){for(;j<16;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}e.length=F,e.head&&(e.head.extra_len=F),512&e.flags&&(T[0]=255&F,T[1]=F>>>8&255,e.check=s(e.check,T,2,0)),j=F=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(U<(K=e.length)&&(K=U),K&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),c.arraySet(e.head.extra,M,L,K,t)),512&e.flags&&(e.check=s(e.check,M,K,L)),U-=K,L+=K,e.length-=K),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(U===0)break t;for(K=0;t=M[L+K++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&K<U;);if(512&e.flags&&(e.check=s(e.check,M,K,L)),U-=K,L+=K,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(U===0)break t;for(K=0;t=M[L+K++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&K<U;);if(512&e.flags&&(e.check=s(e.check,M,K,L)),U-=K,L+=K,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;j<16;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(F!==(65535&e.check)){b.msg="header crc mismatch",e.mode=30;break}j=F=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),b.adler=e.check=0,e.mode=12;break;case 10:for(;j<32;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}b.adler=e.check=u(F),j=F=0,e.mode=11;case 11:if(e.havedict===0)return b.next_out=et,b.avail_out=nt,b.next_in=L,b.avail_in=U,e.hold=F,e.bits=j,2;b.adler=e.check=1,e.mode=12;case 12:if(O===5||O===6)break t;case 13:if(e.last){F>>>=7&j,j-=7&j,e.mode=27;break}for(;j<3;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}switch(e.last=1&F,j-=1,3&(F>>>=1)){case 0:e.mode=14;break;case 1:if(E(e),e.mode=20,O!==6)break;F>>>=2,j-=2;break t;case 2:e.mode=17;break;case 3:b.msg="invalid block type",e.mode=30}F>>>=2,j-=2;break;case 14:for(F>>>=7&j,j-=7&j;j<32;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if((65535&F)!=(F>>>16^65535)){b.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&F,j=F=0,e.mode=15,O===6)break t;case 15:e.mode=16;case 16:if(K=e.length){if(U<K&&(K=U),nt<K&&(K=nt),K===0)break t;c.arraySet(tt,M,L,K,et),U-=K,L+=K,nt-=K,et+=K,e.length-=K;break}e.mode=12;break;case 17:for(;j<14;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(e.nlen=257+(31&F),F>>>=5,j-=5,e.ndist=1+(31&F),F>>>=5,j-=5,e.ncode=4+(15&F),F>>>=4,j-=4,286<e.nlen||30<e.ndist){b.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;j<3;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}e.lens[Z[e.have++]]=7&F,F>>>=3,j-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,R={bits:e.lenbits},W=f(0,e.lens,0,19,e.lencode,0,e.work,R),e.lenbits=R.bits,W){b.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;$=(g=e.lencode[F&(1<<e.lenbits)-1])>>>16&255,it=65535&g,!((st=g>>>24)<=j);){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(it<16)F>>>=st,j-=st,e.lens[e.have++]=it;else{if(it===16){for(_=st+2;j<_;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(F>>>=st,j-=st,e.have===0){b.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],K=3+(3&F),F>>>=2,j-=2}else if(it===17){for(_=st+3;j<_;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}j-=st,t=0,K=3+(7&(F>>>=st)),F>>>=3,j-=3}else{for(_=st+7;j<_;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}j-=st,t=0,K=11+(127&(F>>>=st)),F>>>=7,j-=7}if(e.have+K>e.nlen+e.ndist){b.msg="invalid bit length repeat",e.mode=30;break}for(;K--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){b.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,R={bits:e.lenbits},W=f(w,e.lens,0,e.nlen,e.lencode,0,e.work,R),e.lenbits=R.bits,W){b.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,R={bits:e.distbits},W=f(m,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,R),e.distbits=R.bits,W){b.msg="invalid distances set",e.mode=30;break}if(e.mode=20,O===6)break t;case 20:e.mode=21;case 21:if(6<=U&&258<=nt){b.next_out=et,b.avail_out=nt,b.next_in=L,b.avail_in=U,e.hold=F,e.bits=j,a(b,Y),et=b.next_out,tt=b.output,nt=b.avail_out,L=b.next_in,M=b.input,U=b.avail_in,F=e.hold,j=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;$=(g=e.lencode[F&(1<<e.lenbits)-1])>>>16&255,it=65535&g,!((st=g>>>24)<=j);){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if($&&!(240&$)){for(at=st,ft=$,ct=it;$=(g=e.lencode[ct+((F&(1<<at+ft)-1)>>at)])>>>16&255,it=65535&g,!(at+(st=g>>>24)<=j);){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}F>>>=at,j-=at,e.back+=at}if(F>>>=st,j-=st,e.back+=st,e.length=it,$===0){e.mode=26;break}if(32&$){e.back=-1,e.mode=12;break}if(64&$){b.msg="invalid literal/length code",e.mode=30;break}e.extra=15&$,e.mode=22;case 22:if(e.extra){for(_=e.extra;j<_;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}e.length+=F&(1<<e.extra)-1,F>>>=e.extra,j-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;$=(g=e.distcode[F&(1<<e.distbits)-1])>>>16&255,it=65535&g,!((st=g>>>24)<=j);){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(!(240&$)){for(at=st,ft=$,ct=it;$=(g=e.distcode[ct+((F&(1<<at+ft)-1)>>at)])>>>16&255,it=65535&g,!(at+(st=g>>>24)<=j);){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}F>>>=at,j-=at,e.back+=at}if(F>>>=st,j-=st,e.back+=st,64&$){b.msg="invalid distance code",e.mode=30;break}e.offset=it,e.extra=15&$,e.mode=24;case 24:if(e.extra){for(_=e.extra;j<_;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}e.offset+=F&(1<<e.extra)-1,F>>>=e.extra,j-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){b.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(nt===0)break t;if(K=Y-nt,e.offset>K){if((K=e.offset-K)>e.whave&&e.sane){b.msg="invalid distance too far back",e.mode=30;break}lt=K>e.wnext?(K-=e.wnext,e.wsize-K):e.wnext-K,K>e.length&&(K=e.length),dt=e.window}else dt=tt,lt=et-e.offset,K=e.length;for(nt<K&&(K=nt),nt-=K,e.length-=K;tt[et++]=dt[lt++],--K;);e.length===0&&(e.mode=21);break;case 26:if(nt===0)break t;tt[et++]=e.length,nt--,e.mode=21;break;case 27:if(e.wrap){for(;j<32;){if(U===0)break t;U--,F|=M[L++]<<j,j+=8}if(Y-=nt,b.total_out+=Y,e.total+=Y,Y&&(b.adler=e.check=e.flags?s(e.check,tt,Y,et-Y):h(e.check,tt,Y,et-Y)),Y=nt,(e.flags?F:u(F))!==e.check){b.msg="incorrect data check",e.mode=30;break}j=F=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;j<32;){if(U===0)break t;U--,F+=M[L++]<<j,j+=8}if(F!==(4294967295&e.total)){b.msg="incorrect length check",e.mode=30;break}j=F=0}e.mode=29;case 29:W=1;break t;case 30:W=-3;break t;case 31:return-4;case 32:default:return l}return b.next_out=et,b.avail_out=nt,b.next_in=L,b.avail_in=U,e.hold=F,e.bits=j,(e.wsize||Y!==b.avail_out&&e.mode<30&&(e.mode<27||O!==4))&&G(b,b.output,b.next_out,Y-b.avail_out)?(e.mode=31,-4):(J-=b.avail_in,Y-=b.avail_out,b.total_in+=J,b.total_out+=Y,e.total+=Y,e.wrap&&Y&&(b.adler=e.check=e.flags?s(e.check,tt,Y,b.next_out-Y):h(e.check,tt,Y,b.next_out-Y)),b.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(J==0&&Y===0||O===4)&&W===y&&(W=-5),W)},n.inflateEnd=function(b){if(!b||!b.state)return l;var O=b.state;return O.window&&(O.window=null),b.state=null,y},n.inflateGetHeader=function(b,O){var e;return b&&b.state&&2&(e=b.state).wrap?((e.head=O).done=!1,y):l},n.inflateSetDictionary=function(b,O){var e,M=O.length;return b&&b.state?(e=b.state).wrap!==0&&e.mode!==11?l:e.mode===11&&h(1,O,M,0)!==e.check?-3:G(b,O,M,M)?(e.mode=31,-4):(e.havedict=1,y):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,C,n){var c=o("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];C.exports=function(w,m,y,l,v,i,p,u){var k,S,I,A,B,P,x,d,E,G=u.bits,b=0,O=0,e=0,M=0,tt=0,L=0,et=0,U=0,nt=0,F=0,j=null,J=0,Y=new c.Buf16(16),K=new c.Buf16(16),lt=null,dt=0;for(b=0;b<=15;b++)Y[b]=0;for(O=0;O<l;O++)Y[m[y+O]]++;for(tt=G,M=15;1<=M&&Y[M]===0;M--);if(M<tt&&(tt=M),M===0)return v[i++]=20971520,v[i++]=20971520,u.bits=1,0;for(e=1;e<M&&Y[e]===0;e++);for(tt<e&&(tt=e),b=U=1;b<=15;b++)if(U<<=1,(U-=Y[b])<0)return-1;if(0<U&&(w===0||M!==1))return-1;for(K[1]=0,b=1;b<15;b++)K[b+1]=K[b]+Y[b];for(O=0;O<l;O++)m[y+O]!==0&&(p[K[m[y+O]]++]=O);if(P=w===0?(j=lt=p,19):w===1?(j=h,J-=257,lt=s,dt-=257,256):(j=a,lt=f,-1),b=e,B=i,et=O=F=0,I=-1,A=(nt=1<<(L=tt))-1,w===1&&852<nt||w===2&&592<nt)return 1;for(;;){for(x=b-et,E=p[O]<P?(d=0,p[O]):p[O]>P?(d=lt[dt+p[O]],j[J+p[O]]):(d=96,0),k=1<<b-et,e=S=1<<L;v[B+(F>>et)+(S-=k)]=x<<24|d<<16|E|0,S!==0;);for(k=1<<b-1;F&k;)k>>=1;if(k!==0?(F&=k-1,F+=k):F=0,O++,--Y[b]==0){if(b===M)break;b=m[y+p[O]]}if(tt<b&&(F&A)!==I){for(et===0&&(et=tt),B+=e,U=1<<(L=b-et);L+et<M&&!((U-=Y[L+et])<=0);)L++,U<<=1;if(nt+=1<<L,w===1&&852<nt||w===2&&592<nt)return 1;v[I=F&A]=tt<<24|L<<16|B-i|0}}return F!==0&&(v[B+F]=b-et<<24|64<<16|0),u.bits=tt,0}},{"../utils/common":41}],51:[function(o,C,n){C.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,C,n){var c=o("../utils/common"),h=0,s=1;function a(g){for(var T=g.length;0<=--T;)g[T]=0}var f=0,w=29,m=256,y=m+1+w,l=30,v=19,i=2*y+1,p=15,u=16,k=7,S=256,I=16,A=17,B=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(y+2));a(G);var b=new Array(2*l);a(b);var O=new Array(512);a(O);var e=new Array(256);a(e);var M=new Array(w);a(M);var tt,L,et,U=new Array(l);function nt(g,T,Z,H,N){this.static_tree=g,this.extra_bits=T,this.extra_base=Z,this.elems=H,this.max_length=N,this.has_stree=g&&g.length}function F(g,T){this.dyn_tree=g,this.max_code=0,this.stat_desc=T}function j(g){return g<256?O[g]:O[256+(g>>>7)]}function J(g,T){g.pending_buf[g.pending++]=255&T,g.pending_buf[g.pending++]=T>>>8&255}function Y(g,T,Z){g.bi_valid>u-Z?(g.bi_buf|=T<<g.bi_valid&65535,J(g,g.bi_buf),g.bi_buf=T>>u-g.bi_valid,g.bi_valid+=Z-u):(g.bi_buf|=T<<g.bi_valid&65535,g.bi_valid+=Z)}function K(g,T,Z){Y(g,Z[2*T],Z[2*T+1])}function lt(g,T){for(var Z=0;Z|=1&g,g>>>=1,Z<<=1,0<--T;);return Z>>>1}function dt(g,T,Z){var H,N,q=new Array(p+1),X=0;for(H=1;H<=p;H++)q[H]=X=X+Z[H-1]<<1;for(N=0;N<=T;N++){var V=g[2*N+1];V!==0&&(g[2*N]=lt(q[V]++,V))}}function st(g){var T;for(T=0;T<y;T++)g.dyn_ltree[2*T]=0;for(T=0;T<l;T++)g.dyn_dtree[2*T]=0;for(T=0;T<v;T++)g.bl_tree[2*T]=0;g.dyn_ltree[2*S]=1,g.opt_len=g.static_len=0,g.last_lit=g.matches=0}function $(g){8<g.bi_valid?J(g,g.bi_buf):0<g.bi_valid&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0}function it(g,T,Z,H){var N=2*T,q=2*Z;return g[N]<g[q]||g[N]===g[q]&&H[T]<=H[Z]}function at(g,T,Z){for(var H=g.heap[Z],N=Z<<1;N<=g.heap_len&&(N<g.heap_len&&it(T,g.heap[N+1],g.heap[N],g.depth)&&N++,!it(T,H,g.heap[N],g.depth));)g.heap[Z]=g.heap[N],Z=N,N<<=1;g.heap[Z]=H}function ft(g,T,Z){var H,N,q,X,V=0;if(g.last_lit!==0)for(;H=g.pending_buf[g.d_buf+2*V]<<8|g.pending_buf[g.d_buf+2*V+1],N=g.pending_buf[g.l_buf+V],V++,H===0?K(g,N,T):(K(g,(q=e[N])+m+1,T),(X=P[q])!==0&&Y(g,N-=M[q],X),K(g,q=j(--H),Z),(X=x[q])!==0&&Y(g,H-=U[q],X)),V<g.last_lit;);K(g,S,T)}function ct(g,T){var Z,H,N,q=T.dyn_tree,X=T.stat_desc.static_tree,V=T.stat_desc.has_stree,rt=T.stat_desc.elems,ht=-1;for(g.heap_len=0,g.heap_max=i,Z=0;Z<rt;Z++)q[2*Z]!==0?(g.heap[++g.heap_len]=ht=Z,g.depth[Z]=0):q[2*Z+1]=0;for(;g.heap_len<2;)q[2*(N=g.heap[++g.heap_len]=ht<2?++ht:0)]=1,g.depth[N]=0,g.opt_len--,V&&(g.static_len-=X[2*N+1]);for(T.max_code=ht,Z=g.heap_len>>1;1<=Z;Z--)at(g,q,Z);for(N=rt;Z=g.heap[1],g.heap[1]=g.heap[g.heap_len--],at(g,q,1),H=g.heap[1],g.heap[--g.heap_max]=Z,g.heap[--g.heap_max]=H,q[2*N]=q[2*Z]+q[2*H],g.depth[N]=(g.depth[Z]>=g.depth[H]?g.depth[Z]:g.depth[H])+1,q[2*Z+1]=q[2*H+1]=N,g.heap[1]=N++,at(g,q,1),2<=g.heap_len;);g.heap[--g.heap_max]=g.heap[1],function(ot,mt){var wt,bt,vt,pt,_t,jt,yt=mt.dyn_tree,Ht=mt.max_code,ve=mt.stat_desc.static_tree,_e=mt.stat_desc.has_stree,we=mt.stat_desc.extra_bits,Vt=mt.stat_desc.extra_base,Et=mt.stat_desc.max_length,Ot=0;for(pt=0;pt<=p;pt++)ot.bl_count[pt]=0;for(yt[2*ot.heap[ot.heap_max]+1]=0,wt=ot.heap_max+1;wt<i;wt++)Et<(pt=yt[2*yt[2*(bt=ot.heap[wt])+1]+1]+1)&&(pt=Et,Ot++),yt[2*bt+1]=pt,Ht<bt||(ot.bl_count[pt]++,_t=0,Vt<=bt&&(_t=we[bt-Vt]),jt=yt[2*bt],ot.opt_len+=jt*(pt+_t),_e&&(ot.static_len+=jt*(ve[2*bt+1]+_t)));if(Ot!==0){do{for(pt=Et-1;ot.bl_count[pt]===0;)pt--;ot.bl_count[pt]--,ot.bl_count[pt+1]+=2,ot.bl_count[Et]--,Ot-=2}while(0<Ot);for(pt=Et;pt!==0;pt--)for(bt=ot.bl_count[pt];bt!==0;)Ht<(vt=ot.heap[--wt])||(yt[2*vt+1]!==pt&&(ot.opt_len+=(pt-yt[2*vt+1])*yt[2*vt],yt[2*vt+1]=pt),bt--)}}(g,T),dt(q,ht,g.bl_count)}function t(g,T,Z){var H,N,q=-1,X=T[1],V=0,rt=7,ht=4;for(X===0&&(rt=138,ht=3),T[2*(Z+1)+1]=65535,H=0;H<=Z;H++)N=X,X=T[2*(H+1)+1],++V<rt&&N===X||(V<ht?g.bl_tree[2*N]+=V:N!==0?(N!==q&&g.bl_tree[2*N]++,g.bl_tree[2*I]++):V<=10?g.bl_tree[2*A]++:g.bl_tree[2*B]++,q=N,ht=(V=0)===X?(rt=138,3):N===X?(rt=6,3):(rt=7,4))}function W(g,T,Z){var H,N,q=-1,X=T[1],V=0,rt=7,ht=4;for(X===0&&(rt=138,ht=3),H=0;H<=Z;H++)if(N=X,X=T[2*(H+1)+1],!(++V<rt&&N===X)){if(V<ht)for(;K(g,N,g.bl_tree),--V!=0;);else N!==0?(N!==q&&(K(g,N,g.bl_tree),V--),K(g,I,g.bl_tree),Y(g,V-3,2)):V<=10?(K(g,A,g.bl_tree),Y(g,V-3,3)):(K(g,B,g.bl_tree),Y(g,V-11,7));q=N,ht=(V=0)===X?(rt=138,3):N===X?(rt=6,3):(rt=7,4)}}a(U);var R=!1;function _(g,T,Z,H){Y(g,(f<<1)+(H?1:0),3),function(N,q,X,V){$(N),J(N,X),J(N,~X),c.arraySet(N.pending_buf,N.window,q,X,N.pending),N.pending+=X}(g,T,Z)}n._tr_init=function(g){R||(function(){var T,Z,H,N,q,X=new Array(p+1);for(N=H=0;N<w-1;N++)for(M[N]=H,T=0;T<1<<P[N];T++)e[H++]=N;for(e[H-1]=N,N=q=0;N<16;N++)for(U[N]=q,T=0;T<1<<x[N];T++)O[q++]=N;for(q>>=7;N<l;N++)for(U[N]=q<<7,T=0;T<1<<x[N]-7;T++)O[256+q++]=N;for(Z=0;Z<=p;Z++)X[Z]=0;for(T=0;T<=143;)G[2*T+1]=8,T++,X[8]++;for(;T<=255;)G[2*T+1]=9,T++,X[9]++;for(;T<=279;)G[2*T+1]=7,T++,X[7]++;for(;T<=287;)G[2*T+1]=8,T++,X[8]++;for(dt(G,y+1,X),T=0;T<l;T++)b[2*T+1]=5,b[2*T]=lt(T,5);tt=new nt(G,P,m+1,y,p),L=new nt(b,x,0,l,p),et=new nt(new Array(0),d,0,v,k)}(),R=!0),g.l_desc=new F(g.dyn_ltree,tt),g.d_desc=new F(g.dyn_dtree,L),g.bl_desc=new F(g.bl_tree,et),g.bi_buf=0,g.bi_valid=0,st(g)},n._tr_stored_block=_,n._tr_flush_block=function(g,T,Z,H){var N,q,X=0;0<g.level?(g.strm.data_type===2&&(g.strm.data_type=function(V){var rt,ht=4093624447;for(rt=0;rt<=31;rt++,ht>>>=1)if(1&ht&&V.dyn_ltree[2*rt]!==0)return h;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return s;for(rt=32;rt<m;rt++)if(V.dyn_ltree[2*rt]!==0)return s;return h}(g)),ct(g,g.l_desc),ct(g,g.d_desc),X=function(V){var rt;for(t(V,V.dyn_ltree,V.l_desc.max_code),t(V,V.dyn_dtree,V.d_desc.max_code),ct(V,V.bl_desc),rt=v-1;3<=rt&&V.bl_tree[2*E[rt]+1]===0;rt--);return V.opt_len+=3*(rt+1)+5+5+4,rt}(g),N=g.opt_len+3+7>>>3,(q=g.static_len+3+7>>>3)<=N&&(N=q)):N=q=Z+5,Z+4<=N&&T!==-1?_(g,T,Z,H):g.strategy===4||q===N?(Y(g,2+(H?1:0),3),ft(g,G,b)):(Y(g,4+(H?1:0),3),function(V,rt,ht,ot){var mt;for(Y(V,rt-257,5),Y(V,ht-1,5),Y(V,ot-4,4),mt=0;mt<ot;mt++)Y(V,V.bl_tree[2*E[mt]+1],3);W(V,V.dyn_ltree,rt-1),W(V,V.dyn_dtree,ht-1)}(g,g.l_desc.max_code+1,g.d_desc.max_code+1,X+1),ft(g,g.dyn_ltree,g.dyn_dtree)),st(g),H&&$(g)},n._tr_tally=function(g,T,Z){return g.pending_buf[g.d_buf+2*g.last_lit]=T>>>8&255,g.pending_buf[g.d_buf+2*g.last_lit+1]=255&T,g.pending_buf[g.l_buf+g.last_lit]=255&Z,g.last_lit++,T===0?g.dyn_ltree[2*Z]++:(g.matches++,T--,g.dyn_ltree[2*(e[Z]+m+1)]++,g.dyn_dtree[2*j(T)]++),g.last_lit===g.lit_bufsize-1},n._tr_align=function(g){Y(g,2,3),K(g,S,G),function(T){T.bi_valid===16?(J(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)}(g)}},{"../utils/common":41}],53:[function(o,C,n){C.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,C,n){(function(c){(function(h,s){if(!h.setImmediate){var a,f,w,m,y=1,l={},v=!1,i=h.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(h);p=p&&p.setTimeout?p:h,a={}.toString.call(h.process)==="[object process]"?function(I){process.nextTick(function(){k(I)})}:function(){if(h.postMessage&&!h.importScripts){var I=!0,A=h.onmessage;return h.onmessage=function(){I=!1},h.postMessage("","*"),h.onmessage=A,I}}()?(m="setImmediate$"+Math.random()+"$",h.addEventListener?h.addEventListener("message",S,!1):h.attachEvent("onmessage",S),function(I){h.postMessage(m+I,"*")}):h.MessageChannel?((w=new MessageChannel).port1.onmessage=function(I){k(I.data)},function(I){w.port2.postMessage(I)}):i&&"onreadystatechange"in i.createElement("script")?(f=i.documentElement,function(I){var A=i.createElement("script");A.onreadystatechange=function(){k(I),A.onreadystatechange=null,f.removeChild(A),A=null},f.appendChild(A)}):function(I){setTimeout(k,0,I)},p.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var A=new Array(arguments.length-1),B=0;B<A.length;B++)A[B]=arguments[B+1];var P={callback:I,args:A};return l[y]=P,a(y),y++},p.clearImmediate=u}function u(I){delete l[I]}function k(I){if(v)setTimeout(k,0,I);else{var A=l[I];if(A){v=!0;try{(function(B){var P=B.callback,x=B.args;switch(x.length){case 0:P();break;case 1:P(x[0]);break;case 2:P(x[0],x[1]);break;case 3:P(x[0],x[1],x[2]);break;default:P.apply(s,x)}})(A)}finally{u(I),v=!1}}}}function S(I){I.source===h&&typeof I.data=="string"&&I.data.indexOf(m)===0&&k(+I.data.slice(m.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(fe);var nr=fe.exports;const sr=ae(nr);var pe={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(z,D){(function(o,C){z.exports=C()})(At,function o(){var C=typeof self<"u"?self:typeof window<"u"?window:C!==void 0?C:{},n=!C.document&&!!C.postMessage,c=C.IS_PAPA_WORKER||!1,h={},s=0,a={parse:function(x,d){var E=(d=d||{}).dynamicTyping||!1;if(P(E)&&(d.dynamicTypingFunction=E,E={}),d.dynamicTyping=E,d.transform=!!P(d.transform)&&d.transform,d.worker&&a.WORKERS_SUPPORTED){var G=function(){if(!a.WORKERS_SUPPORTED)return!1;var O=(M=C.URL||C.webkitURL||null,tt=o.toString(),a.BLOB_URL||(a.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",tt,")();"],{type:"text/javascript"})))),e=new C.Worker(O),M,tt;return e.onmessage=k,e.id=s++,h[e.id]=e}();return G.userStep=d.step,G.userChunk=d.chunk,G.userComplete=d.complete,G.userError=d.error,d.step=P(d.step),d.chunk=P(d.chunk),d.complete=P(d.complete),d.error=P(d.error),delete d.worker,void G.postMessage({input:x,config:d,workerId:G.id})}var b=null;return a.NODE_STREAM_INPUT,typeof x=="string"?(x=function(O){return O.charCodeAt(0)===65279?O.slice(1):O}(x),b=d.download?new m(d):new l(d)):x.readable===!0&&P(x.read)&&P(x.on)?b=new v(d):(C.File&&x instanceof File||x instanceof Object)&&(b=new y(d)),b.stream(x)},unparse:function(x,d){var E=!1,G=!0,b=",",O=`\r
`,e='"',M=e+e,tt=!1,L=null,et=!1;(function(){if(typeof d=="object"){if(typeof d.delimiter!="string"||a.BAD_DELIMITERS.filter(function(j){return d.delimiter.indexOf(j)!==-1}).length||(b=d.delimiter),(typeof d.quotes=="boolean"||typeof d.quotes=="function"||Array.isArray(d.quotes))&&(E=d.quotes),typeof d.skipEmptyLines!="boolean"&&typeof d.skipEmptyLines!="string"||(tt=d.skipEmptyLines),typeof d.newline=="string"&&(O=d.newline),typeof d.quoteChar=="string"&&(e=d.quoteChar),typeof d.header=="boolean"&&(G=d.header),Array.isArray(d.columns)){if(d.columns.length===0)throw new Error("Option columns is empty");L=d.columns}d.escapeChar!==void 0&&(M=d.escapeChar+e),(typeof d.escapeFormulae=="boolean"||d.escapeFormulae instanceof RegExp)&&(et=d.escapeFormulae instanceof RegExp?d.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var U=new RegExp(p(e),"g");if(typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(x)){if(!x.length||Array.isArray(x[0]))return nt(null,x,tt);if(typeof x[0]=="object")return nt(L||Object.keys(x[0]),x,tt)}else if(typeof x=="object")return typeof x.data=="string"&&(x.data=JSON.parse(x.data)),Array.isArray(x.data)&&(x.fields||(x.fields=x.meta&&x.meta.fields||L),x.fields||(x.fields=Array.isArray(x.data[0])?x.fields:typeof x.data[0]=="object"?Object.keys(x.data[0]):[]),Array.isArray(x.data[0])||typeof x.data[0]=="object"||(x.data=[x.data])),nt(x.fields||[],x.data||[],tt);throw new Error("Unable to serialize unrecognized input");function nt(j,J,Y){var K="";typeof j=="string"&&(j=JSON.parse(j)),typeof J=="string"&&(J=JSON.parse(J));var lt=Array.isArray(j)&&0<j.length,dt=!Array.isArray(J[0]);if(lt&&G){for(var st=0;st<j.length;st++)0<st&&(K+=b),K+=F(j[st],st);0<J.length&&(K+=O)}for(var $=0;$<J.length;$++){var it=lt?j.length:J[$].length,at=!1,ft=lt?Object.keys(J[$]).length===0:J[$].length===0;if(Y&&!lt&&(at=Y==="greedy"?J[$].join("").trim()==="":J[$].length===1&&J[$][0].length===0),Y==="greedy"&&lt){for(var ct=[],t=0;t<it;t++){var W=dt?j[t]:t;ct.push(J[$][W])}at=ct.join("").trim()===""}if(!at){for(var R=0;R<it;R++){0<R&&!ft&&(K+=b);var _=lt&&dt?j[R]:R;K+=F(J[$][_],R)}$<J.length-1&&(!Y||0<it&&!ft)&&(K+=O)}}return K}function F(j,J){if(j==null)return"";if(j.constructor===Date)return JSON.stringify(j).slice(1,25);var Y=!1;et&&typeof j=="string"&&et.test(j)&&(j="'"+j,Y=!0);var K=j.toString().replace(U,M);return(Y=Y||E===!0||typeof E=="function"&&E(j,J)||Array.isArray(E)&&E[J]||function(lt,dt){for(var st=0;st<dt.length;st++)if(-1<lt.indexOf(dt[st]))return!0;return!1}(K,a.BAD_DELIMITERS)||-1<K.indexOf(b)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?e+K+e:K}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!C.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=u,a.ParserHandle=i,a.NetworkStreamer=m,a.FileStreamer=y,a.StringStreamer=l,a.ReadableStreamStreamer=v,C.jQuery){var f=C.jQuery;f.fn.parse=function(x){var d=x.config||{},E=[];return this.each(function(O){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&C.FileReader)||!this.files||this.files.length===0)return!0;for(var e=0;e<this.files.length;e++)E.push({file:this.files[e],inputElem:this,instanceConfig:f.extend({},d)})}),G(),this;function G(){if(E.length!==0){var O,e,M,tt,L=E[0];if(P(x.before)){var et=x.before(L.file,L.inputElem);if(typeof et=="object"){if(et.action==="abort")return O="AbortError",e=L.file,M=L.inputElem,tt=et.reason,void(P(x.error)&&x.error({name:O},e,M,tt));if(et.action==="skip")return void b();typeof et.config=="object"&&(L.instanceConfig=f.extend(L.instanceConfig,et.config))}else if(et==="skip")return void b()}var U=L.instanceConfig.complete;L.instanceConfig.complete=function(nt){P(U)&&U(nt,L.file,L.inputElem),b()},a.parse(L.file,L.instanceConfig)}else P(x.complete)&&x.complete()}function b(){E.splice(0,1),G()}}}function w(x){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(d){var E=A(d);E.chunkSize=parseInt(E.chunkSize),d.step||d.chunk||(E.chunkSize=null),this._handle=new i(E),(this._handle.streamer=this)._config=E}).call(this,x),this.parseChunk=function(d,E){if(this.isFirstChunk&&P(this._config.beforeFirstChunk)){var G=this._config.beforeFirstChunk(d);G!==void 0&&(d=G)}this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+d;this._partialLine="";var O=this._handle.parse(b,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var e=O.meta.cursor;this._finished||(this._partialLine=b.substring(e-this._baseIndex),this._baseIndex=e),O&&O.data&&(this._rowCount+=O.data.length);var M=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(c)C.postMessage({results:O,workerId:a.WORKER_ID,finished:M});else if(P(this._config.chunk)&&!E){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);O=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!M||!P(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(d){P(this._config.error)?this._config.error(d):c&&this._config.error&&C.postMessage({workerId:a.WORKER_ID,error:d,finished:!1})}}function m(x){var d;(x=x||{}).chunkSize||(x.chunkSize=a.RemoteChunkSize),w.call(this,x),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),n||(d.onload=B(this._chunkLoaded,this),d.onerror=B(this._chunkError,this)),d.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var E=this._config.downloadRequestHeaders;for(var G in E)d.setRequestHeader(G,E[G])}if(this._config.chunkSize){var b=this._start+this._config.chunkSize-1;d.setRequestHeader("Range","bytes="+this._start+"-"+b)}try{d.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}n&&d.status===0&&this._chunkError()}},this._chunkLoaded=function(){d.readyState===4&&(d.status<200||400<=d.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:d.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(E){var G=E.getResponseHeader("Content-Range");return G===null?-1:parseInt(G.substring(G.lastIndexOf("/")+1))}(d),this.parseChunk(d.responseText)))},this._chunkError=function(E){var G=d.statusText||E;this._sendError(new Error(G))}}function y(x){var d,E;(x=x||{}).chunkSize||(x.chunkSize=a.LocalChunkSize),w.call(this,x);var G=typeof FileReader<"u";this.stream=function(b){this._input=b,E=b.slice||b.webkitSlice||b.mozSlice,G?((d=new FileReader).onload=B(this._chunkLoaded,this),d.onerror=B(this._chunkError,this)):d=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var b=this._input;if(this._config.chunkSize){var O=Math.min(this._start+this._config.chunkSize,this._input.size);b=E.call(b,this._start,O)}var e=d.readAsText(b,this._config.encoding);G||this._chunkLoaded({target:{result:e}})},this._chunkLoaded=function(b){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(b.target.result)},this._chunkError=function(){this._sendError(d.error)}}function l(x){var d;w.call(this,x=x||{}),this.stream=function(E){return d=E,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var E,G=this._config.chunkSize;return G?(E=d.substring(0,G),d=d.substring(G)):(E=d,d=""),this._finished=!d,this.parseChunk(E)}}}function v(x){w.call(this,x=x||{});var d=[],E=!0,G=!1;this.pause=function(){w.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){w.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(b){this._input=b,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){G&&d.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),d.length?this.parseChunk(d.shift()):E=!0},this._streamData=B(function(b){try{d.push(typeof b=="string"?b:b.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(d.shift()))}catch(O){this._streamError(O)}},this),this._streamError=B(function(b){this._streamCleanUp(),this._sendError(b)},this),this._streamEnd=B(function(){this._streamCleanUp(),G=!0,this._streamData("")},this),this._streamCleanUp=B(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(x){var d,E,G,b=Math.pow(2,53),O=-b,e=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,tt=this,L=0,et=0,U=!1,nt=!1,F=[],j={data:[],errors:[],meta:{}};if(P(x.step)){var J=x.step;x.step=function($){if(j=$,lt())K();else{if(K(),j.data.length===0)return;L+=$.data.length,x.preview&&L>x.preview?E.abort():(j.data=j.data[0],J(j,tt))}}}function Y($){return x.skipEmptyLines==="greedy"?$.join("").trim()==="":$.length===1&&$[0].length===0}function K(){return j&&G&&(st("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),G=!1),x.skipEmptyLines&&(j.data=j.data.filter(function($){return!Y($)})),lt()&&function(){if(!j)return;function $(at,ft){P(x.transformHeader)&&(at=x.transformHeader(at,ft)),F.push(at)}if(Array.isArray(j.data[0])){for(var it=0;lt()&&it<j.data.length;it++)j.data[it].forEach($);j.data.splice(0,1)}else j.data.forEach($)}(),function(){if(!j||!x.header&&!x.dynamicTyping&&!x.transform)return j;function $(at,ft){var ct,t=x.header?{}:[];for(ct=0;ct<at.length;ct++){var W=ct,R=at[ct];x.header&&(W=ct>=F.length?"__parsed_extra":F[ct]),x.transform&&(R=x.transform(R,W)),R=dt(W,R),W==="__parsed_extra"?(t[W]=t[W]||[],t[W].push(R)):t[W]=R}return x.header&&(ct>F.length?st("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+ct,et+ft):ct<F.length&&st("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+ct,et+ft)),t}var it=1;return!j.data.length||Array.isArray(j.data[0])?(j.data=j.data.map($),it=j.data.length):j.data=$(j.data,0),x.header&&j.meta&&(j.meta.fields=F),et+=it,j}()}function lt(){return x.header&&F.length===0}function dt($,it){return at=$,x.dynamicTypingFunction&&x.dynamicTyping[at]===void 0&&(x.dynamicTyping[at]=x.dynamicTypingFunction(at)),(x.dynamicTyping[at]||x.dynamicTyping)===!0?it==="true"||it==="TRUE"||it!=="false"&&it!=="FALSE"&&(function(ft){if(e.test(ft)){var ct=parseFloat(ft);if(O<ct&&ct<b)return!0}return!1}(it)?parseFloat(it):M.test(it)?new Date(it):it===""?null:it):it;var at}function st($,it,at,ft){var ct={type:$,code:it,message:at};ft!==void 0&&(ct.row=ft),j.errors.push(ct)}this.parse=function($,it,at){var ft=x.quoteChar||'"';if(x.newline||(x.newline=function(W,R){W=W.substring(0,1048576);var _=new RegExp(p(R)+"([^]*?)"+p(R),"gm"),g=(W=W.replace(_,"")).split("\r"),T=W.split(`
`),Z=1<T.length&&T[0].length<g[0].length;if(g.length===1||Z)return`
`;for(var H=0,N=0;N<g.length;N++)g[N][0]===`
`&&H++;return H>=g.length/2?`\r
`:"\r"}($,ft)),G=!1,x.delimiter)P(x.delimiter)&&(x.delimiter=x.delimiter($),j.meta.delimiter=x.delimiter);else{var ct=function(W,R,_,g,T){var Z,H,N,q;T=T||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var X=0;X<T.length;X++){var V=T[X],rt=0,ht=0,ot=0;N=void 0;for(var mt=new u({comments:g,delimiter:V,newline:R,preview:10}).parse(W),wt=0;wt<mt.data.length;wt++)if(_&&Y(mt.data[wt]))ot++;else{var bt=mt.data[wt].length;ht+=bt,N!==void 0?0<bt&&(rt+=Math.abs(bt-N),N=bt):N=bt}0<mt.data.length&&(ht/=mt.data.length-ot),(H===void 0||rt<=H)&&(q===void 0||q<ht)&&1.99<ht&&(H=rt,Z=V,q=ht)}return{successful:!!(x.delimiter=Z),bestDelimiter:Z}}($,x.newline,x.skipEmptyLines,x.comments,x.delimitersToGuess);ct.successful?x.delimiter=ct.bestDelimiter:(G=!0,x.delimiter=a.DefaultDelimiter),j.meta.delimiter=x.delimiter}var t=A(x);return x.preview&&x.header&&t.preview++,d=$,E=new u(t),j=E.parse(d,it,at),K(),U?{meta:{paused:!0}}:j||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,E.abort(),d=P(x.chunk)?"":d.substring(E.getCharIndex())},this.resume=function(){tt.streamer._halted?(U=!1,tt.streamer.parseChunk(d,!0)):setTimeout(tt.resume,3)},this.aborted=function(){return nt},this.abort=function(){nt=!0,E.abort(),j.meta.aborted=!0,P(x.complete)&&x.complete(j),d=""}}function p(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(x){var d,E=(x=x||{}).delimiter,G=x.newline,b=x.comments,O=x.step,e=x.preview,M=x.fastMode,tt=d=x.quoteChar===void 0||x.quoteChar===null?'"':x.quoteChar;if(x.escapeChar!==void 0&&(tt=x.escapeChar),(typeof E!="string"||-1<a.BAD_DELIMITERS.indexOf(E))&&(E=","),b===E)throw new Error("Comment character same as delimiter");b===!0?b="#":(typeof b!="string"||-1<a.BAD_DELIMITERS.indexOf(b))&&(b=!1),G!==`
`&&G!=="\r"&&G!==`\r
`&&(G=`
`);var L=0,et=!1;this.parse=function(U,nt,F){if(typeof U!="string")throw new Error("Input must be a string");var j=U.length,J=E.length,Y=G.length,K=b.length,lt=P(O),dt=[],st=[],$=[],it=L=0;if(!U)return vt();if(x.header&&!nt){var at=U.split(G)[0].split(E),ft=[],ct={},t=!1;for(var W in at){var R=at[W];P(x.transformHeader)&&(R=x.transformHeader(R,W));var _=R,g=ct[R]||0;for(0<g&&(t=!0,_=R+"_"+g),ct[R]=g+1;ft.includes(_);)_=_+"_"+g;ft.push(_)}if(t){var T=U.split(G);T[0]=ft.join(E),U=T.join(G)}}if(M||M!==!1&&U.indexOf(d)===-1){for(var Z=U.split(G),H=0;H<Z.length;H++){if($=Z[H],L+=$.length,H!==Z.length-1)L+=G.length;else if(F)return vt();if(!b||$.substring(0,K)!==b){if(lt){if(dt=[],ot($.split(E)),pt(),et)return vt()}else ot($.split(E));if(e&&e<=H)return dt=dt.slice(0,e),vt(!0)}}return vt()}for(var N=U.indexOf(E,L),q=U.indexOf(G,L),X=new RegExp(p(tt)+p(d),"g"),V=U.indexOf(d,L);;)if(U[L]!==d)if(b&&$.length===0&&U.substring(L,L+K)===b){if(q===-1)return vt();L=q+Y,q=U.indexOf(G,L),N=U.indexOf(E,L)}else if(N!==-1&&(N<q||q===-1))$.push(U.substring(L,N)),L=N+J,N=U.indexOf(E,L);else{if(q===-1)break;if($.push(U.substring(L,q)),bt(q+Y),lt&&(pt(),et))return vt();if(e&&dt.length>=e)return vt(!0)}else for(V=L,L++;;){if((V=U.indexOf(d,V+1))===-1)return F||st.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:dt.length,index:L}),wt();if(V===j-1)return wt(U.substring(L,V).replace(X,d));if(d!==tt||U[V+1]!==tt){if(d===tt||V===0||U[V-1]!==tt){N!==-1&&N<V+1&&(N=U.indexOf(E,V+1)),q!==-1&&q<V+1&&(q=U.indexOf(G,V+1));var rt=mt(q===-1?N:Math.min(N,q));if(U.substr(V+1+rt,J)===E){$.push(U.substring(L,V).replace(X,d)),U[L=V+1+rt+J]!==d&&(V=U.indexOf(d,L)),N=U.indexOf(E,L),q=U.indexOf(G,L);break}var ht=mt(q);if(U.substring(V+1+ht,V+1+ht+Y)===G){if($.push(U.substring(L,V).replace(X,d)),bt(V+1+ht+Y),N=U.indexOf(E,L),V=U.indexOf(d,L),lt&&(pt(),et))return vt();if(e&&dt.length>=e)return vt(!0);break}st.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:dt.length,index:L}),V++}}else V++}return wt();function ot(_t){dt.push(_t),it=L}function mt(_t){var jt=0;if(_t!==-1){var yt=U.substring(V+1,_t);yt&&yt.trim()===""&&(jt=yt.length)}return jt}function wt(_t){return F||(_t===void 0&&(_t=U.substring(L)),$.push(_t),L=j,ot($),lt&&pt()),vt()}function bt(_t){L=_t,ot($),$=[],q=U.indexOf(G,L)}function vt(_t){return{data:dt,errors:st,meta:{delimiter:E,linebreak:G,aborted:et,truncated:!!_t,cursor:it+(nt||0)}}}function pt(){O(vt()),dt=[],st=[]}},this.abort=function(){et=!0},this.getCharIndex=function(){return L}}function k(x){var d=x.data,E=h[d.workerId],G=!1;if(d.error)E.userError(d.error,d.file);else if(d.results&&d.results.data){var b={abort:function(){G=!0,S(d.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(P(E.userStep)){for(var O=0;O<d.results.data.length&&(E.userStep({data:d.results.data[O],errors:d.results.errors,meta:d.results.meta},b),!G);O++);delete d.results}else P(E.userChunk)&&(E.userChunk(d.results,b,d.file),delete d.results)}d.finished&&!G&&S(d.workerId,d.results)}function S(x,d){var E=h[x];P(E.userComplete)&&E.userComplete(d),E.terminate(),delete h[x]}function I(){throw new Error("Not implemented.")}function A(x){if(typeof x!="object"||x===null)return x;var d=Array.isArray(x)?[]:{};for(var E in x)d[E]=A(x[E]);return d}function B(x,d){return function(){x.apply(d,arguments)}}function P(x){return typeof x=="function"}return c&&(C.onmessage=function(x){var d=x.data;if(a.WORKER_ID===void 0&&d&&(a.WORKER_ID=d.workerId),typeof d.input=="string")C.postMessage({workerId:a.WORKER_ID,results:a.parse(d.input,d.config),finished:!0});else if(C.File&&d.input instanceof File||d.input instanceof Object){var E=a.parse(d.input,d.config);E&&C.postMessage({workerId:a.WORKER_ID,results:E,finished:!0})}}),(m.prototype=Object.create(w.prototype)).constructor=m,(y.prototype=Object.create(w.prototype)).constructor=y,(l.prototype=Object.create(l.prototype)).constructor=l,(v.prototype=Object.create(w.prototype)).constructor=v,a})})(pe);var ir=pe.exports;const me=ae(ir),ar=z=>new Promise(D=>{const o=new FileReader;o.onload=function(C){var n;(n=C.target)!=null&&n.result&&sr.loadAsync(C.target.result).then(function(c){D(c)})},o.readAsArrayBuffer(z)}),Jt=async z=>{const D=[],o=[];for(let C=0;C<z.length;C++){const n=z[C];if(n.type==="application/x-zip-compressed"){const c=await ar(n),h=[];c.forEach(function(s,a){(a.name.endsWith(".csv")||a.name.endsWith(".xml"))&&h.push({object:a})}),D.push({name:n.name,files:h})}else n.type==="text/csv"||n.type==="text/xml"?o.push(n):ut("Unsupported file: "+n.name,"error")}return[D,o]},or=z=>{const D=[];return z.forEach((o,C)=>{o.files.forEach((n,c)=>{D.push({file:c,zip:C})})}),D},ge=z=>{const D=Zt(z);if(D)return Se(D==null?void 0:D.blocksProps,D==null?void 0:D.desktop,D==null?void 0:D.innerBlocks)},be=z=>{var n;((n=z.at(-1))==null?void 0:n.length)===1&&z.pop();const D=z.reduce((c,h)=>Math.max(c,h.length),0),o={alignment:Tt.alignment,enableMaxWidth:!1,cellMinWidth:120,sortHorizontal:!1,sortVertical:!1,borderCollapse:"collapse !important",tableSpacingX:3,tableSpacingY:3,cols:D,cellsWidthAutoCount:D,tdSumMaxWidth:120*D+20*D,fontColor:"#000000",linkColor:"#000000",fontSize:15,tableBorder:$t(Tt.tableBorder),innerBorder:$t(Tt.innerBorder),headerInnerBorder:!0,scrollX:!1,disableThemeStyles:!1,extraStyles:btoa(""),stickyFirstColumn:!1,stickyTopRow:!1,paginationEnable:!1,paginationTopRowAsHeader:"false",rowsPerPage:"10",rowsChangeable:!1,searchEnable:!1,searchKeepHeader:"true",searchPosition:"left",role:"table",directives:je(Tt),responsiveDirectives:Ee(Tt.responsive)},C=[];return z.forEach((c,h)=>{const s=[];c.forEach((a,f)=>{s.push({props:{autoWidth:"true",autoHeight:"true",padding:"10px",vAlign:"center",xIndex:f,yIndex:h,colspan:1,rowspan:1,hideOnMobile:!1},blocks:[{type:"text",props:{text:a,color:"#000000",fontSize:"15px"}}]})}),C.push({props:{},cells:s})}),JSON.stringify({props:o,rows:C})},lr=z=>new Promise((D,o)=>{if(z.type==="text/csv")me.parse(z,{complete(C){if(C.errors.length>0){o("Failed to parse the file: "+z.name);return}const n=C.data;D(be(n))}});else if(z.type==="text/xml"){const C=new FileReader;C.onload=function(n){var h;if(!((h=n.target)!=null&&h.result)){o("No content found!");return}const c=ge(n.target.result);D(JSON.stringify(c))},C.readAsText(z)}else o("Unsupported file: "+z.name)}),cr=z=>new Promise((D,o)=>{z.async("text").then(C=>{if(z.name.endsWith(".csv"))me.parse(C,{complete(n){if(n.errors.length>0){o("Failed to parse the file: "+z.name);return}const c=n.data;D(be(c))}});else if(z.name.endsWith(".xml")){const n=ge(C);D(JSON.stringify(n))}else o("Unsupported file: "+z.name),D(null)})}),hr=async({setLoadings:z,zips:D,rawFiles:o,keepTitles:C})=>{z.current({});const n=or(D),c=n.length+o.length,h=ut(`[0/${c}] Importing tables...`,"progress");let s=1,a=0;for(;a<c;){const f=[];for(let w=0;w<5;w++){let m="";try{let y=a+w,l=null,v,i;if(y<o.length)i=o[y],m=y,l=await lr(i),v=i.name.replace(/\.([a-z]+)$/,"");else if(y<c){y=y-o.length;const p=n[y];i=D[p.zip].files[p.file],m=p.zip+"_"+p.file,l=await cr(i.object),v=i.object.name.replace(/\.([a-z]+)$/,"")}if(!l){s++;continue}z.current(p=>({...p,[m]:1})),f.push(new Promise(p=>{fetch(WPTB_CFG.ADMIN_URL+"?action=save_table",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:C?v:void 0,content:l,security_code:WPTB_CFG.SECURITY_CODE})}).then(u=>{if(u.ok)z.current(k=>({...k,[m]:2}));else throw new Error(u.statusText)}).catch(u=>{z.current(k=>({...k,[m]:u.message||"Something went wrong..."}))}).finally(()=>{s++,p(!0)})}))}catch(y){s++,z.current(l=>({...l,[m]:typeof y=="string"?y:y.message||"Something went wrong..."}))}finally{Yt(h,{progress:s/c*100,message:`[${s}/${c}] Importing tables...`})}}await Promise.all(f),a+=5}Yt(h,{type:"success",message:`[${c}] Tables imported successfully!`,spawned_at:Date.now(),duration:5e3})},Xt=z=>z?z===1?ne:z===2?Ae:r.jsx(oe,{content:z,children:ze}):"",dr=({setPage:z})=>{const[D,o]=Q.useState(!1),[C,n]=Q.useState(!0),[c,h]=Q.useState([]),[s,a]=Q.useState([]),[f,w]=Q.useState({}),[m,y]=Q.useState(!1),l=Q.useRef(w);Q.useEffect(()=>{l.current=w},[w]);const v=async S=>{if(S.preventDefault(),S.stopPropagation(),o(!1),m){ut("Please wait for the previous import to finish.","error");return}const[I,A]=await Jt(S.dataTransfer.files);h([...c,...I]),a([...s,...A])},i=async S=>{if(m){S.target.value="",ut("Please wait for the previous import to finish.","error");return}const[I,A]=await Jt(Array.from(S.target.files));h([...c,...I]),a([...s,...A]),S.target.value=""},p=(S,I)=>{h(A=>{const B=[...A];return I!==void 0?B[S].files.splice(I,1):B.splice(S,1),B})},u=S=>{a(I=>{if(S===void 0)return[];const A=[...I];return A.splice(S,1),A})},k=async()=>{if(m){ut("Please wait for the previous import to finish.","error");return}y(!0),await hr({setLoadings:l,zips:c,rawFiles:s,keepTitles:C}),y(!1)};return r.jsxs("div",{className:"wptb-v2-page",children:[r.jsx(Nt,{setPage:z,page:"import"}),r.jsxs("div",{className:"wptb-v2-page-content",children:[r.jsx("div",{className:"wptb-v2-page-content-top",children:r.jsx("h3",{children:"Import Table"})}),r.jsxs("div",{className:gt("wptb-v2-page-content-main wptb-v2-import-page",{"wptb-v2-import-page-has-files":c.length>0||s.length>0}),children:[r.jsxs("div",{className:"wptb-v2-import-page-main-area",children:[r.jsxs("div",{className:"wptb-v2-import-page-file-area",children:[r.jsx("h3",{children:"Pick files"}),r.jsxs("div",{className:gt("wptb-v2-import-page-dropzone",{"wptb-v2-import-page-dropzone-dragover":D}),onDragOver:S=>{o(!0),S.preventDefault(),S.stopPropagation()},onDragLeave:()=>o(!1),onDrop:v,children:[r.jsx("p",{className:"wptb-v2-import-page-dropzone-text",children:"Drag and drop your files here"}),r.jsx("p",{className:"wptb-v2-import-page-dropzone-types",children:"(csv, xml, zip)"}),r.jsx("div",{className:"wptb-v2-divider",children:"or"}),r.jsxs("label",{children:["Browse files",r.jsx("input",{type:"file",accept:".csv, .xml, .zip",onChange:i,multiple:!0})]})]})]}),(c.length>0||s.length>0)&&r.jsxs("div",{className:"wptb-v2-import-page-preview",children:[r.jsxs("h3",{children:["To be imported",r.jsx("button",{type:"button",title:"Clear Files",onClick:()=>{h([]),a([])},children:Ft})]}),s.length>0&&r.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[r.jsxs("p",{children:["Single tables",!m&&r.jsx("button",{type:"button",onClick:()=>u(),children:Rt})]}),r.jsx("ul",{children:s.map((S,I)=>r.jsxs("li",{children:[S.name,r.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[Xt(f[I]),!m&&r.jsx("button",{type:"button",onClick:()=>u(I),children:Rt})]})]},`${S.name}_${I}`))})]}),c.map((S,I)=>r.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[r.jsxs("p",{children:[S.name,!m&&r.jsx("button",{type:"button",onClick:()=>p(I),children:Rt})]}),r.jsx("ul",{children:S.files.map((A,B)=>r.jsxs("li",{children:[A.object.name,r.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[Xt(f[`${I}_${B}`]),!m&&r.jsx("button",{type:"button",onClick:()=>p(I,B),children:Rt})]})]},`${A.object.name}_${B}`))})]},S.name))]})]}),r.jsxs("div",{className:"wptb-v2-import-page-form",children:[r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",checked:C,onChange:()=>n(!C)}),r.jsx("p",{children:"Preserve table titles"})]}),r.jsxs("button",{type:"button",onClick:k,disabled:m,children:[m?r.jsx(Te,{}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:r.jsx("path",{fill:"currentColor",d:"M9 6c0-1.6.8-3 2-4h-1c-3.9 0-7 .9-7 2c0 1 2.6 1.8 6 2m3.8 4.8c-.9.1-1.9.2-2.8.2c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-2c-.9.7-1.9 1-3 1c-.4 0-.8-.1-1.2-.2M10 15c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-3c0 1.1-3.1 2-7 2m0-5h1c-1-.7-1.7-1.8-1.9-3C5.7 6.9 3 6 3 5v3c0 1.1 3.1 2 7 2m4 0c2.2 0 4-1.8 4-4s-1.8-4-4-4s-4 1.8-4 4s1.8 4 4 4m-1-4V3h2v3h2l-3 3l-3-3z"})}),"Import"]})]})]})]})]})},ur=({onSelect:z,onAllSelect:D,apiData:o,searchTxt:C,setSearch:n,items:c,sorting:h})=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"wptb-v2-export-page-header",children:[r.jsx("h2",{children:"All Tables"}),r.jsxs("div",{className:"wptb-v2-export-page-search",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:r.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[r.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),r.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),r.jsx("input",{type:"search",placeholder:"Search...",value:C,onChange:s=>n(s.target.value)})]})]}),r.jsxs("p",{className:"wptb-pagination-info",children:["Showing ",r.jsx("b",{children:o.page_start})," to ",r.jsx("b",{children:o.page_end})," of"," ",r.jsx("b",{children:o.total_count})," entries"]}),r.jsx(le,{onSelect:z,onAllCheck:D,sorting:h,isLoading:o.loading,items:c,columns:["title","modified","id"],checkbox:!0})]}),fr=({onUnSelect:z,onAllUnSelect:D,items:o})=>{const C=he("modified","desc"),[n,c]=Q.useState(""),[h,s]=Q.useState(o);Q.useEffect(()=>{s(o)},[o]),Q.useEffect(()=>{if(n==="")return s(o);const f=o.filter(w=>w.title.toLowerCase().includes(n.toLowerCase()));s(f)},[n,o]);const a=C[0];return Q.useEffect(()=>s(f=>(a.order==="asc"?f.sort((w,m)=>w[a.by].toString().localeCompare(m[a.by].toString())):f.sort((w,m)=>m[a.by].toString().localeCompare(w[a.by].toString())),[...f])),[a]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"wptb-v2-export-page-header",children:[r.jsx("h2",{children:"To Export"}),r.jsxs("div",{className:"wptb-v2-export-page-search",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:r.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[r.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),r.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),r.jsx("input",{type:"search",placeholder:"Search...",value:n,onChange:f=>c(f.target.value)})]})]}),r.jsx(le,{onSelect:z,onAllCheck:D,sorting:C,items:h,columns:["title","modified","id"],checkbox:!0,checked:!0,noItemsMessage:"No tables selected"})]})},Wt=document.createElement("a"),pr=async(z,D)=>{new FormData().append("ids",z);try{const C=new FormData;C.append("nonce",WPTB_CFG.EXPORT_KEY),C.append("action","wptb_table_export_main_export"),C.append("ids",JSON.stringify(z.split(","))),C.append("export_type",D.toLocaleUpperCase());const n=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:C});let c,h="";if(n.headers.get("content-type")==="application/octet-stream"){const f=n.headers.get("content-disposition"),m=new RegExp(/filename="(.+\..+)"/,"g").exec(f||"");if(m===null)throw new Error("Invalid file name header!");h=m[1],c=await n.blob()}else c=await n.json();const a=window.URL.createObjectURL(c);Wt.href=a,Wt.download=h,Wt.click(),window.URL.revokeObjectURL(a),ut('File downloaded as "'+h+'"',"success")}catch(C){ut(C.message||"Something went wrong","error")}},mr={xml:r.jsxs(r.Fragment,{children:[r.jsx("b",{children:"XML:"})," an exact copy of your tables will be exported, ideal for backing up and sharing your tables with your other WordPress sites that uses WP Table Builder."]}),csv:r.jsxs(r.Fragment,{children:[r.jsx("b",{children:"CSV:"})," only text content of your tables will be exported, ideal for usage within other apps/plugins."]})},gr=({setPage:z})=>{const D=Q.useRef(),[o,C]=Q.useState(1),n=he("modified","desc"),[c,h]=Q.useState(""),[s,a]=Q.useState([]),[f,w]=Q.useState(""),[m,y]=Q.useState("xml"),[l,v]=Q.useState(!1),[i,p,u]=de({page:o,search:c,sort:n[0],abortCtrl:D.current,skipTables:f});Q.useEffect(()=>{a(i.posts)},[i.posts]);const[k,S]=Q.useState([]),I=d=>{const E=f+","+d.id;w(E.replace(/^,/,"")),S([...k,d]),a(s.filter(G=>G.id!==d.id)),s.length<=1&&u()},A=d=>{S(k.filter(G=>G.id!==d.id)),a([...s,d]);let E=f.replace(d.id.toString(),"");E=E.replace(/,,/,","),E=E.replace(/(^,)|(,$)/,""),w(E)},B=()=>{if(!s.length)return;const d=[...k];let E=f;s.forEach(G=>{d.push(G),E=E+","+G.id}),E=E.replace(/^,/,""),S(d),w(E),u()},P=()=>{k.length&&(S([]),w(""),a([...s,...k]))},x=()=>{if(!l){if(!f){ut("No tables selected","error");return}v(!0),pr(f,m).then(()=>{v(!1),P()})}};return r.jsxs("div",{className:"wptb-v2-page",children:[r.jsx(Nt,{setPage:z,page:"export"}),r.jsxs("div",{className:"wptb-v2-page-content",children:[r.jsx("div",{className:"wptb-v2-page-content-top",children:r.jsx("h3",{children:"Export Table"})}),r.jsxs("div",{className:"wptb-v2-export-page",children:[r.jsxs("div",{className:"wptb-v2-export-page-unselected",children:[r.jsx(ur,{onSelect:I,onAllSelect:B,apiData:i,setSearch:h,searchTxt:c,items:s,sorting:n}),r.jsx(Ie,{apiData:i,setPage:C})]}),r.jsxs("div",{className:"wptb-v2-export-page-exchange",children:[r.jsx("button",{type:"button",onClick:B,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsxs("g",{fill:"none",children:[r.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),r.jsx("path",{fill:"currentColor",d:"m15.06 5.283l5.657 5.657a1.5 1.5 0 0 1 0 2.12l-5.656 5.658a1.5 1.5 0 0 1-2.122-2.122l3.096-3.096H4.5a1.5 1.5 0 0 1 0-3h11.535L12.94 7.404a1.5 1.5 0 0 1 2.122-2.121Z"})]})})}),r.jsx("button",{type:"button",onClick:P,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsxs("g",{fill:"none",children:[r.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),r.jsx("path",{fill:"currentColor",d:"M3.283 10.94a1.5 1.5 0 0 0 0 2.12l5.656 5.658a1.5 1.5 0 1 0 2.122-2.122L7.965 13.5H19.5a1.5 1.5 0 0 0 0-3H7.965l3.096-3.096a1.5 1.5 0 1 0-2.122-2.121z"})]})})})]}),r.jsxs("div",{className:"wptb-v2-export-page-selected",children:[r.jsx(fr,{onUnSelect:A,onAllUnSelect:P,items:k}),r.jsxs("div",{className:"wptb-v2-export-page-form",children:[r.jsx("p",{children:"Format:"}),r.jsxs("select",{value:m,onChange:d=>y(d.target.value),children:[r.jsx("option",{value:"xml",children:"XML"}),r.jsx("option",{value:"csv",children:"CSV"})]}),r.jsx(oe,{content:mr[m],className:"wptb-v2-export-page-form-info",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m-1-7v2h2v-2zm2-1.645A3.502 3.502 0 0 0 12 6.5a3.5 3.5 0 0 0-3.433 2.813l1.962.393A1.5 1.5 0 1 1 12 11.5a1 1 0 0 0-1 1V14h2z"})})}),r.jsxs("button",{type:"button",disabled:l,onClick:x,children:[l?r.jsx(Gt,{}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:r.jsx("path",{fill:"currentColor",d:"M74.34 85.66a8 8 0 0 1 11.32-11.32L120 108.69V24a8 8 0 0 1 16 0v84.69l34.34-34.35a8 8 0 0 1 11.32 11.32l-48 48a8 8 0 0 1-11.32 0ZM240 136v64a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h52.4a4 4 0 0 1 2.83 1.17L111 145a24 24 0 0 0 34 0l23.8-23.8a4 4 0 0 1 2.8-1.2H224a16 16 0 0 1 16 16m-40 32a12 12 0 1 0-12 12a12 12 0 0 0 12-12"})}),"Export"]})]})]})]})]})]})},br=z=>typeof z=="number"||parseInt(z).toString()===z,vr=({table:z,setPage:D})=>{const o=Ne(),[C,n]=Q.useState(!1),[c,h]=Q.useState(z);Q.useEffect(()=>{if(h(z),o(Oe({isSaving:!1,activeBlock:void 0,timeTravel:{lastSaved:/[^0-9]/.test(z)?void 0:0,cursor:0,total:0}})),!br(z)){if(!Lt.getState().table[z]){history.replaceState(null,"","?page=wptb-alt"),D("tables");return}n(!0);return}n(!1);const f=new AbortController,w=WPTB_CFG.API_BASE+"/v1/table?id="+z;return fetch(w,{signal:f.signal}).then(m=>m.json()).then(m=>{if(!m.table){ut("Table not found","error",5e3),history.replaceState(null,"","?page=wptb-alt"),D("tables");return}const y=Zt(m.table);y.title=m.name,y.id=z,Lt.dispatch(ie({id:z,table:y})),n(!0)}).catch(m=>null),()=>f.abort()},[z,D,o]);const s=([f,w])=>{f==="saved"&&(h(w.toString()),o(Be({oldId:z,newId:w.toString()})),history.replaceState(null,"","?page=wptb-alt-builder&table="+w))},a=()=>{if(history.length>2){history.back();return}D("tables")};return r.jsx(Re,{id:c,isLoaded:C,onSave:s,onClose:a})},_r=()=>{var s,a,f,w,m,y;const[z,D]=Q.useState(!1),[o,C]=Q.useState(WPTB_CFG.SETTINGS.general||{}),n=l=>{var v;if((v=o.allowed_roles)!=null&&v.includes(l)){const i=o.allowed_roles.filter(p=>p!==l);C({...o,allowed_roles:i})}else{const i=[...o.allowed_roles||[],l];C({...o,allowed_roles:i})}},c=async()=>{if(!z){D(!0);try{const l=new FormData;l.append("nonce",WPTB_CFG.SETTINGS.nonce.general),l.append("action","wp_table_builder_settings"),l.append("options",JSON.stringify(o));const v=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:l}),i=await v.json();if(!v.ok){ut(i.message||"Something went wrong","error");return}if(i.error){ut(i.error,"error");return}ut(i.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.general=o}catch(l){console.log(l)}finally{D(!1)}}},h=()=>{C(WPTB_CFG.SETTINGS.general||{})};return r.jsxs("div",{children:[r.jsxs("div",{className:"wptb-v2-general-settings wptb-v2-settings-area",children:[r.jsxs("div",{className:"wptb-v2-setting-group",children:[r.jsx("h3",{children:"Allowed User Roles"}),r.jsxs("div",{className:"wptb-v2-setting-group-items",children:[r.jsx(xt,{label:"Administrator",checked:(s=o.allowed_roles)==null?void 0:s.includes("administrator"),onChange:()=>n("administrator")}),r.jsx(xt,{label:"Editor",checked:(a=o.allowed_roles)==null?void 0:a.includes("editor"),onChange:()=>n("editor")}),r.jsx(xt,{label:"Author",checked:(f=o.allowed_roles)==null?void 0:f.includes("author"),onChange:()=>n("author")}),r.jsx(xt,{label:"Contributor",checked:(w=o.allowed_roles)==null?void 0:w.includes("contributor"),onChange:()=>n("contributor")}),r.jsx(xt,{label:"Subscriber",checked:(m=o.allowed_roles)==null?void 0:m.includes("subscriber"),onChange:()=>n("subscriber")}),r.jsx(xt,{label:"Translator",checked:(y=o.allowed_roles)==null?void 0:y.includes("translator"),onChange:()=>n("translator")})]})]}),r.jsxs("div",{className:"wptb-v2-setting-group",children:[r.jsx("h3",{children:"Table Settings"}),r.jsxs("div",{className:"wptb-v2-setting-group-items",children:[r.jsx(xt,{label:"Show edit link in frontend",checked:!!o.allow_edit_link_frontend,onChange:()=>C({...o,allow_edit_link_frontend:!o.allow_edit_link_frontend})}),r.jsx(xt,{label:"Give credits to WP Table Builder",checked:!!o.give_credits_to_wp_table_builder,onChange:()=>C({...o,give_credits_to_wp_table_builder:!o.give_credits_to_wp_table_builder})}),r.jsx(xt,{label:"Restrict users access to own tables",checked:!!o.restrict_users_to_their_tables,onChange:()=>C({...o,restrict_users_to_their_tables:!o.restrict_users_to_their_tables})}),r.jsx(xt,{label:"Disable Emoji to Image conversion",checked:!!o.emoji_image_conversion_disabled_status,onChange:()=>C({...o,emoji_image_conversion_disabled_status:!o.emoji_image_conversion_disabled_status})}),r.jsx(xt,{label:"Disable theme styles",checked:!!o.disable_theme_styles_for_all,onChange:()=>C({...o,disable_theme_styles_for_all:!o.disable_theme_styles_for_all})})]})]}),r.jsxs("div",{className:"wptb-v2-setting-group",children:[r.jsx("h3",{children:"Plugin Options"}),r.jsxs("div",{className:"wptb-v2-setting-group-items",children:[r.jsx(ce,{rtl:!0,label:"Take over the entire screen in builder",checked:!!o.take_over_entire_screen,onChange:l=>C({...o,take_over_entire_screen:l})}),r.jsx(zt,{label:"Sidebar Location",value:o.panel_location||"left",onChange:l=>C({...o,panel_location:l}),options:[{value:"left",label:"Left"},{value:"right",label:"Right"}]}),r.jsx(xt,{label:"Enable Version Sync",checked:!!o.enable_version_sync,onChange:()=>C({...o,enable_version_sync:!o.enable_version_sync})})]})]})]}),r.jsxs("div",{className:"wptb-v2-setting-btns",children:[r.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:h,disabled:z,children:"Revert"}),r.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:c,disabled:z,children:[z&&It," Save"]})]})]})},wr=()=>{var h;const[z,D]=Q.useState(((h=WPTB_CFG.SETTINGS)==null?void 0:h.table_style)||""),[o,C]=Q.useState(!1),n=async()=>{if(!o){C(!0);try{const s=new FormData;s.append("nonce",WPTB_CFG.SETTINGS.nonce.styles),s.append("action","wptb-general-styles"),s.append("styles",z);const a=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:s}),f=await a.json();if(!a.ok){ut(f.message||"Something went wrong","error");return}if(f.error){ut(f.error,"error");return}ut(f.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.table_style=z}catch(s){console.log(s)}finally{C(!1)}}},c=()=>{D(WPTB_CFG.SETTINGS.table_style||"")};return r.jsxs("div",{children:[r.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-table-settings",children:[r.jsx("p",{children:"These styles will be applied to all tables."}),r.jsx(Pe,{label:"Custom CSS",rows:10,value:z,onChange:D})]}),r.jsxs("div",{className:"wptb-v2-setting-btns",children:[r.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:c,disabled:o,children:"Revert"}),r.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:n,disabled:o,children:[o&&It," Save"]})]})]})},yr=()=>{var a;const[z,D]=Q.useState(!1),[o,C]=Q.useState(((a=WPTB_CFG.SETTINGS)==null?void 0:a.lazy_load)||{enabled:!1}),[n,c]=Q.useState(WPTB_CFG.SETTINGS.lazy_load_pro),h=async()=>{if(!z){D(!0);try{const f=new FormData;f.append("nonce",WPTB_CFG.SETTINGS.nonce.lazy_load),f.append("action","wptb_lazy_load");const w={...o,...n,visibilityPercentage:parseInt(n.visibilityPercentage).toString(),iconSize:parseInt(n.iconSize).toString(),imageLoadAnimationSpeed:parseInt(n.imageLoadAnimationSpeed).toString(),imageLoadAnimationPerspective:parseInt(n.imageLoadAnimationPerspective).toString(),iconAnimationOptions:{none:"none",heartBeat:"heartbeat",rotate:"rotate",flip:"flip",jump:"jump"},imageLoadAnimationOptions:{none:"none",slideIn:"slide in",growSling:"grow sling",flash:"flash",flip:"flip"}};f.append("settings",JSON.stringify(w));const m=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:f}),y=await m.json();if(!m.ok){ut(y.message||"Something went wrong","error");return}if(y.error){ut(y.error,"error");return}ut(y.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.lazy_load=o,WPTB_CFG.SETTINGS.lazy_load_pro=n}catch(f){console.log(f)}finally{D(!1)}}},s=()=>{C(WPTB_CFG.SETTINGS.lazy_load),c(WPTB_CFG.SETTINGS.lazy_load_pro)};return r.jsxs("div",{children:[r.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-lazy-load-settings",children:[r.jsxs("div",{children:[r.jsx(Bt,{title:"Enable Lazy Load",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:r.jsx(ce,{label:"Enable Lazy Loading Images",checked:!!o.enabled,onChange:f=>C({enabled:f})})}),r.jsxs("div",{className:"wptb-v2-lazy-load-preview",children:[r.jsx("h4",{children:"Preview"}),r.jsx("div",{className:"wptb-v2-lazy-load-preview-image"}),r.jsxs("div",{className:"wptb-v2-lazy-load-preview-btns",children:[r.jsx("button",{type:"button",className:"wptb-v2-lazy-load-preview-reset",children:"Reset"}),r.jsx("button",{type:"button",className:"wptb-v2-lazy-load-preview-reload",children:"Load Image"})]}),r.jsxs("div",{className:"wptb-v2-lazy-load-notice",children:[r.jsx("h5",{children:"important:"}),r.jsx("p",{children:"After enable, if you are getting any conflicts with your third party lazy load plugin, please whitelist table image elements with wptb-image-element-target class name from plugin settings."})]})]})]}),r.jsxs("div",{className:"wptb-v2-lazy-load-pro",children:[r.jsx(Fe,{name:"global.lazy_load",props:n,setProps:c}),r.jsxs(Le,{name:"global.lazy_load",children:[r.jsxs(Bt,{title:"General Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[r.jsx(Dt,{label:"Visibility Percentage",value:n==null?void 0:n.visibilityPercentage,allowedUnits:{"%":{}}}),r.jsx(Ut,{label:"Background Color",value:n==null?void 0:n.backgroundColor})]}),r.jsxs(Bt,{title:"Icon Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[r.jsx(De,{label:"Icon",value:n==null?void 0:n.iconName.name}),r.jsx(Ut,{label:"Icon Color",value:n==null?void 0:n.iconColor}),r.jsx(Dt,{label:"Icon Size",value:n==null?void 0:n.iconSize}),r.jsx(zt,{label:"Icon Animation",value:n==null?void 0:n.iconAnimation,options:[{value:"none",label:"None"},{value:"heartbeat",label:"Heartbeat"},{value:"rotate",label:"Rotate"},{value:"flip",label:"Flip"},{value:"jump",label:"Jump"}]})]}),r.jsxs(Bt,{title:"Image Load Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[r.jsx(zt,{label:"Animation",value:n==null?void 0:n.imageLoadAnimation,options:[{value:"none",label:"None"},{value:"slide-in",label:"Slide In"},{value:"grow-sling",label:"Grow Sling"},{value:"flash",label:"Flash"},{value:"flip",label:"Flip"}]}),(n==null?void 0:n.imageLoadAnimation)==="slide-in"&&r.jsx(zt,{label:"Direction",value:n==null?void 0:n.imageLoadAnimationDirection,options:[{value:"left",label:"To Left"},{value:"right",label:"To Right"},{value:"top",label:"To Top"},{value:"bottom",label:"To Bottom"}]}),(n==null?void 0:n.imageLoadAnimation)==="flash"&&r.jsx(Ut,{label:"Flash Color",value:n==null?void 0:n.flashColor}),(n==null?void 0:n.imageLoadAnimation)==="flip"&&r.jsxs(r.Fragment,{children:[r.jsx(zt,{label:"Direction",value:n==null?void 0:n.imageLoadAnimationDirection,options:[{value:"left",label:"To Left"},{value:"right",label:"To Right"}]}),r.jsx(Dt,{label:"Perspective",value:n==null?void 0:n.imageLoadAnimationPerspective})]}),r.jsx(Mt,{label:"Speed",value:n==null?void 0:n.imageLoadAnimationSpeed})]})]})]})]}),r.jsxs("div",{className:"wptb-v2-setting-btns",children:[r.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:s,disabled:z,children:"Revert"}),r.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:h,disabled:z,children:[z&&It," Save"]})]})]})};let kt=null;const xr=z=>{const D={},o=document.createElement("div");return o.innerHTML=z,o.querySelectorAll("h4").forEach(n=>{var h,s;const c=(h=n.textContent)==null?void 0:h.trim();c&&(D[c]=((s=n.nextElementSibling)==null?void 0:s.outerHTML)||"")}),D},kr=()=>{const[z,D]=Q.useState(kt===null),[o,C]=Q.useState(!1),[n,c]=Q.useState(kt),[h,s]=Q.useState((kt==null?void 0:kt.version)||"");Q.useEffect(()=>{if(kt!==null){D(!1),c(kt),s(kt.version);return}fetch("https://api.wordpress.org/plugins/info/1.0/wp-table-builder.json").then(f=>f.json()).then(f=>{if(kt)return;const w={};Object.keys(f.versions).reverse().slice(1,6).forEach(y=>{w[y]=f.versions[y]}),kt={version:f.version,versions:w,changelog:xr(f.sections.changelog),latest:Object.keys(f.versions).at(-2)},c(kt),s(kt.version)}).finally(()=>{D(!1)})},[]);const a=async()=>{if(o)return;C(!0);const f=new FormData;f.append("action","version_control_manager"),f.append("nonce",WPTB_CFG.SETTINGS.nonce.version),f.append("version",h);try{const w=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:f}),m=await w.json();if(!w.ok){ut(m.message||"Something went wrong","error");return}if(m.error){ut(m.error,"error");return}ut(m.message||"Settings saved successfully","success"),window.location.reload()}catch{ut("Something went wrong","error")}C(!1)};return r.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-version-settings",children:[z||!n?r.jsx("div",{className:"wptb-v2-loading",children:r.jsx(Gt,{})}):r.jsxs("div",{className:"wptb-v2-version-settings-content",children:[r.jsxs("div",{className:"wptb-v2-version-settings-control",children:[r.jsx("p",{className:"wptb-v2-version-settings-encourage",children:"If you are having issues with the current version of the plugin, you can rollback to a previous version."}),r.jsxs("div",{className:"wptb-v2-version-settings-info",children:[r.jsx("div",{children:"Current Version"}),r.jsxs("div",{children:[r.jsx("div",{className:gt({"wptb-v2-version-settings-info-success":n.latest===WPTB_CFG.SETTINGS.version,"wptb-v2-version-settings-info-warning":n.latest!==WPTB_CFG.SETTINGS.version})}),r.jsx("span",{children:WPTB_CFG.SETTINGS.version})]}),r.jsx("div",{children:"Latest Version"}),r.jsxs("div",{children:[r.jsx("div",{className:gt({"wptb-v2-version-settings-info-success":n.latest===WPTB_CFG.SETTINGS.version,"wptb-v2-version-settings-info-warning":n.latest!==WPTB_CFG.SETTINGS.version})}),r.jsx("span",{children:n.latest})]}),r.jsx("div",{children:"Install"}),r.jsx("div",{children:r.jsx("select",{value:h,onChange:f=>s(f.target.value),children:Object.keys(n.versions).map(f=>r.jsx("option",{value:f,children:f},f))})})]}),r.jsxs("div",{className:"wptb-v2-version-settings-warning",children:[r.jsx("h5",{children:"warning:"}),r.jsx("p",{children:"Previous versions may be unstable and unsecure, continue with your own risk and take a backup."})]})]}),r.jsxs("div",{className:"wptb-v2-version-settings-log",children:[r.jsx("h4",{children:h}),r.jsx("div",{dangerouslySetInnerHTML:{__html:n.changelog[h]||""}})]})]}),r.jsx("div",{className:"wptb-v2-setting-btns",children:r.jsxs("button",{type:"button",className:"wptb-btn-save",disabled:o,onClick:a,children:[o&&It," Install ",h]})})]})},Qt={general:_r,tableStyles:wr,lazyLoad:yr,version:kr},Cr=({setPage:z})=>{const[D,o]=Q.useState("general"),[C,n]=Q.useState(!1),[c,h]=Q.useState(!1),s=async()=>{if(h(!1),!C){n(!0);try{const a=new FormData;a.append("nonce",WPTB_CFG.SETTINGS.nonce.general),a.append("action","wptb_toggle_legacy_builder");const f=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:a}),w=await f.json();if(!f.ok){ut(w.message||"Something went wrong","error");return}if(w.error){ut(w.error,"error");return}ut(w.message||"Settings saved successfully","success"),window.location.replace(window.location.href.replace("wptb-settings","wp-table-builder-settings"))}catch(a){console.log(a)}finally{n(!1)}}};return r.jsxs("div",{className:"wptb-v2-page wptb-v2-settings-page",children:[r.jsx(Nt,{setPage:z,page:"settings"}),r.jsxs("div",{className:"wptb-v2-page-content",children:[r.jsxs("div",{className:"wptb-v2-page-content-top",children:[r.jsx("h2",{children:St("WP Table Builder")}),r.jsxs("button",{type:"button",className:"wptb-v2-switch-builder",disabled:C,onClick:()=>h(!0),children:[C&&It," Switch to Legacy Builder"]})]}),r.jsxs("div",{className:"wptb-v2-page-content-main",children:[r.jsxs("div",{className:"wptb-v2-settings-tabs",children:[r.jsx("button",{className:D==="general"?"wptb-v2-active":"",onClick:()=>o("general"),children:"General"}),r.jsx("button",{className:D==="tableStyles"?"wptb-v2-active":"",onClick:()=>o("tableStyles"),children:"Table Styles"}),r.jsx("button",{className:D==="lazyLoad"?"wptb-v2-active":"",onClick:()=>o("lazyLoad"),children:"Lazy Load"}),r.jsx("button",{className:D==="version"?"wptb-v2-active":"",onClick:()=>o("version"),children:"Version Control"})]}),r.jsx("div",{children:Qt[D]&&Q.createElement(Qt[D])})]})]}),c&&r.jsxs(se,{onClose:()=>h(!1),title:"Are you sure to switch?",icon:ee,children:[r.jsx("p",{children:"Are you sure you want to miss out on the new features and next generation experience? You can always switch back to the legacy builder."}),r.jsxs("div",{className:"wptb-v2-modal-actions",children:[r.jsx("button",{type:"button",onClick:s,children:"Yes"}),r.jsx("button",{type:"button",onClick:()=>h(!1),children:"No"})]})]})]})},Sr={tables:Qe,builder:vr,create:rr,import:dr,export:gr,settings:Cr},te=()=>{var o,C;const z=new URLSearchParams(window.location.search),D={};for(const[n,c]of z)D[n]=c;return D.page=((C=(o=D.page)==null?void 0:o.replace("wptb",""))==null?void 0:C.substring(1))||"tables",D};function jr(){const[z,D]=Q.useState({}),o=(C,n)=>{n=n||{};const h={page:C==="tables"?"wptb":`wptb-${C}`};for(const a in n){const f=n[a];f&&(h[a]=f)}const s=new URLSearchParams(h).toString();window.history.pushState(null,"","?"+s),n.page=C,D(n)};return Q.useEffect(()=>{const C=()=>{const n=te();D(n)};return D(te()),window.addEventListener("popstate",C),()=>{window.removeEventListener("popstate",C)}},[]),[z,o]}const Er=()=>{const[z,D]=jr(),o=Sr[z.page];if(o)return r.jsx(o,{...z,setPage:D})};document.addEventListener("DOMContentLoaded",()=>{const z=document.querySelector("#wptb-app-root");!z||typeof WPTB>"u"||Ue(z).render(r.jsx(We.StrictMode,{children:r.jsxs(Me,{store:Lt,children:[r.jsx(Er,{}),r.jsx(Ge,{}),r.jsx(Ze,{})]})}))});
//# sourceMappingURL=wptb-main.js.map
