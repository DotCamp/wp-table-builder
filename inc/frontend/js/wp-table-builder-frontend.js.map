{"version":3,"sources":["WPTB_FrontendBase.js","WPTB_ExtraStyles.js","WPTB_Logger.js","WPTB_CutGlueTable.js","WPTB_GetDirectionAfterReconstruction.js","WPTB_SortableTable.js","WPTB_RecalculateIndexes.js","WPTB_ResponsiveFrontend.js","WPTB_StylePass.js","WPTB_LazyLoad.js","WPTB_ScrollManager.js","wp-table-builder-frontend.js"],"names":["document","addEventListener","factory","WptbTableObject","containerElement","_this2","this","parseId","parentContainer","matrixContainer","mainTable","id","tableElement","tableId","getAttribute","_tableId$match","match","_wrapRegExp","groups","parseInt","classList","contains","Error","querySelector","frontendBaseSingletonInstance","tableObjects","getTableObjects","init","Array","from","querySelectorAll","map","container","push","self","global","key","context","module","exports","_typeof","applyExtraStyle","head","styleElement","uniqueClass","extraStylesRaw","dataset","wptbExtraStyles","extraStyles","atob","styleId","_slicedToArray","_this","baseDocument","concat","createElement","type","disableThemeStyles","currentMode","modes","frontEnd","block","insertAdjacentElement","generalStyles","applyGeneralStyles","appendChild","prefixedStyles","prefixStyleRules","innerHTML","createTextNode","_tableQueries","tableQueries","builder","_defineProperty","formatStyles","styles","replaceAll","prefix","splitStyles","split","prefixedStylesArray","matches","RegExp","exec","replace","join","baseElement","arguments","length","undefined","generalStylesheet","prefixedStyleRules","parentPrefix","applyStyles","mode","allTables","bgColors","normal","prepareMessage","message","prepareMessageStyle","messageType","keyName","log","console","WPTB_CutGlueTable","cutTableHorizontally","rowBefore","table","rows","i","tableRowsIChildren","children","j","rowSpan","newTdRowspan","td","sameCellBeforeDivision","hasOwnProperty","wptbCell","mark","getDOMElement","tdTopStyle","dataXIndex","setAttribute","colSpan","xIndex","dataXIndexNext","beforeTd","maxCols","insertBefore","WPTB_RecalculateIndexes","glueTableHorizontally","tds","_toConsumableArray","getElementsByTagName","hasAttribute","dataSameCellBeforeDivision","tdsSameBeforeDivision","parentNode","yIndex","tdsSameBeforeDivisionJPlusChildren","k","removeChild","cutTableVertically","col","rowSpanNewTd","colSpanNewTd","rowChildren","rowChildrenLength","afterTd","colSpanOld","tdLeftStyle","tdAnalogThisX","tdAnalogThisY","style","width","height","glueTableVertically","jFirstTdGlue","WPTB_GetDirectionAfterReconstruction","typeFirst","typeSecond","verticalProp","responsiveFront","itemsPerHeader","tableMaxCols","switchMode","getDirective","e","directives","sizeRangeId","detail","responsiveMode","modeOptions","topRowAsHeader","cellStackDirection","cellsPerRow","newTable","thisObject","sortingCellMouseMov","element","x","y","xMatch","target","tagName","offsetX","layerX","offsetY","layerY","clientWidth","clientHeight","add","remove","sortingCellMouseMoveVertical","sortingCellMouseMoveHorizontal","tdMouseLeave","sortableTable","currentTarget","tableWasSorted","tableRowsBefore","tableRowsAfter","tableRowsArr","tableLastCont","rowspan","rowNum","rowsTdFirst","rowsValuesArr","tdYCoordsRowSpanPrevious","tableRowsPushed","tdsChanged","changeSortingTdsCollection","tdRowspan","textElementsValues","textElementsValuesGet","rowsTd","value","orderBy","setSortedAscDataAttr","sort","prev","next","sortOrder","unshift","indexOf","trRef","tBody","rowsValObj","row","tr","colspan","colNum","columnsTdFirst","columnsValuesArr","tdXCoordsColSpanPrevious","tdColspan","columnsTd","tdsColumn","difference","columnsValObj","removeCellsAttrAfterDivision","tdsAll","removeAttribute","tableSM","tableStateSet","reassignElementsStyles","dataAttr","prevValue","nextValue","cell","textElements","innerText","tdIndexSpanPrev","collectionTdsJSpan","collectionTdsJSpanProperty","indexName","indexNameCamelCase","indexNamePerpendicularCamelCase","tdSpanProperty","tableGroupCount","tdsCollectionChanged","collectionTds","splice","tdSpan","cellsStylesScheme","rowsStylesScheme","sortModeSwitcher","active","removeEventListener","sortableTableVerticalStart","sortingCellMouseMoveSwitcher","wptbSortableTableVertical","createTableElementsStylesScheme","sortableTableHorizontalStart","wptbSortableTableHorizontal","tableObjectChange","start","elemSelector","elements","elem","backgroundColor","window","getComputedStyle","getPropertyValue","objectKey","String","elementsStylesScheme","elemStyles","sortableTableInitialization","sortModeSwitcherRun","tableOld","switchModeObj","call","s","sCMM","dataAttrSortChange","rowsLength","dataYIndexStart","trs","maxColsFull","tdsArr","jMainIter","z","columns","logToConsole","process","env","NODE_ENV","CellObject","cellElement","reference","referenceObject","mergedRenderStatus","mergedCells","column","getMergedRenderStatus","setMergedRenderStatus","status","addToMergedCells","mergeType","cellObj","isReference","cloneNode","modifications","spans","remainingSpans","cacheSpanValues","Object","keys","defaultVal","prototype","getSpan","spanType","spanVal","getElement","getRemainingSpans","setRemainingSpans","createCellElement","attributeKey","attributeValue","append","glue","currentVal","default","setSpan","remainingVal","valueToApply","remainingParentSpans","startIndex","endIndex","mc","resetAttribute","resetAllAttributes","el","TableObject","tableEl","parsedTable","rowCache","originals","rowColors","header","even","odd","addToParsed","r","c","cellObject","parseTable","ri","cells","currentIndex","ci","currentCellObject","spanRow","spanTypes","spanCol","sr","referenceCell","sc","parseRowColors","headerDatasetColor","wptbHeaderBackgroundColor","evenRowDatasetColor","wptbEvenRowBackgroundColor","oddRowDatasetColor","wptbOddRowBackgroundColor","rowsNeeded","rn","tempRow","addRow","fromOriginals","originalIndex","tableBody","isArray","range","createRange","setStart","createContextualFragment","childNodes","clearTable","getRow","maxRows","maxColumns","mergedHeader","reduce","p","getCell","returnObject","getCellsAtRow","rowId","returnObj","tempCell","appendToRow","cellRowId","cellColumnId","cachedRow","appendElementToRow","appendObjectToRow","getParsedTable","responsiveClassDefaultOptions","query","defaultClasses","bindToResize","isBackgroundTransparent","regexp","scrollOperations","revertToOriginal","wptbHorizontalScrollStatus","storedMaxWidth","wptbTableContainerMaxWidth","isMainResponsiveEnabled","directive","responsiveEnabled","isCurrentBreakpointEnabled","size","_this3","calculateRangeId","breakpoints","disabled","calculateInnerSize","innerSize","innerWidth","relativeWidth","options","_objectSpread","elementObjects","tableObject","bindRebuildToResize","rebuildTables","directiveString","wptbResponsiveDirectives","JSON","parse","addDefaultClasses","removeDefaultClasses","autoBuild","sizeRange","autoOption","tableObj","direction","staticTopRow","repeatMergedHeader","buildDefault","autoDirectionBuild","isRowStacked","headerBuild","allCellsByRow","rowStartIndex","baseCells","filter","b","bgColor","rowObj","forEach","cellCount","pR","currentTableColor","allCellsByCol","t","tCell","cR","headerCells","h","stackedAsColumn","rowBorderStyle","headerCount","Math","ceil","currentOriginalRow","addHeaderCells","addBorder","borderTop","cellClone","cc","currentRowSpan","cellAddStatus","currentCell","min","hc","clonedHeaderCell","headerCellObject","rS","colorIndex","cS","val","stops","sortedStops","a","rangeId","rebuildTable","buildCallable","getBoundingClientRect","tabEvent","CustomEvent","dispatchEvent","breakpointId","wptbBreakpoint","o","isResponsiveEnabledForCurrentBreakpoint","tableDirectives","globalKey","stylesheets","insertShadowRoot","shadowRootContainer","tableContainer","mainParent","parentChildren","tableIndex","upSibling","downSibling","prepareAllStylesheets","shadowRoot","borrowFromTheme","fontFamily","tableContainers","setupStylePass","checkTableEligibility","settings","disableThemeStylesForAll","maxWidth","scrollStatus","attachShadow","stylesheetsObj","root","action","prepareStylesheet","copyStylesheet","styleSheet","handler","url","linkElement","LazyLoadAnimation","callHook","hookName","userHook","getHook","_len","args","_key","apply","instanceOptions","name","speed","step","hooks","perspective","flashColor","getOptions","calculateDuration","max","abs","calculateAnimationDirection","names","indexConstant","includes","calculateDirectionConstant","getBufferElement","imgElement","removeBufferElement","bufferElement","addStylesheet","content","contentRoot","lazyloadStyleSheet","styleRules","beforeAnimation","animate","afterAnimation","LazyLoadAnimationFactory","getAnimation","animationName","extraOptions","factoryOptions","none","imageElement","slideIn","overflow","transform","transition","growSling","flash","flashElement","flashStyle","ownerDocument","flip","parentWrapper","animationDirection","_parentWrapper$parent","rotationAmount","propertyName","wptbCardFlip","processImageElements","imgElements","currentYPos","position","firstTimeProcess","forceLoad","wptbLazyLoadStatus","img","svgIcon","bufferElementClass","iconSvg","iconWrapper","iconSize","wptbLazyLoadIconAnimation","iconAnimation","fill","iconColor","bufferElementContainerClass","animation","forceMode","isElementVisible","delay","setTimeout","imageElementLoadCallback","src","wptbLazyLoadTarget","scrollY","cachedScrollData","lastYPosition","windowCurrentYPosition","innerHeight","assignLazyLoadToElements","tables","shadowTables","carry","allImages","images","passive","defaultOptions","animationFactory","_imgElement$parentNod","top","bottom","visibilityPercentage","visibilityVariable","forceLoadImages","initOptions","enabled","imageLoadAnimation","imageLoadAnimationSpeed","imageLoadAnimationDirection","imageLoadAnimationPerspective","scrollOptions","prepareTableForScroll","mainContainer","frontendCalculationStatus","tableElements","getElementsByClassName","wptb_tableReconstraction","createNewTableIndic","previewTable","tableContainerMatrix","display","wptbTableAlignment","offsetWidth","reconstraction","wptbAdaptiveTable","tableContainerWidth","previewTableWidth","tableColumns","previewTableRows","tableReconstructed","wptbPreviewTableMobile","wholeColumnsInContainer","floor","dataWholeColumnInContainer","newTableTbody","infArr","className","tableRows","newTableLastSectionFilledColumns","valuesIsSaved","tableRowsWithoutHeader","newTableColumnsWithoutLeftHeader","countRows","tdStyles","sectionNumber","tdLeftHeader","rowFirstStyles","borderTopColor","borderColor","borderBottomColor","borderTopWidth","rowKStyles","borderWidth","background","newTableColumns","increaseRatioRows","newTableRows","jMax","jStart","rowStyles","newTd","minWidth","bubbles","wptb_tdDefaultWidth","_loop","wptbTableContainer","wptbTableContainers","wptbTableHorizontalScrollStatus","mergingСellsHorizontally","tableWidthLogic","wptbTableContainerWidth","wptbTableTdsSumMaxWidth","wptbCellsWidthAutoCount","tableTdWidthAuto","wptbFixedWidthSize","tdPaddingCommon","tableTdBorderCommonWidth","styleElementCreate","wptbTdWidthAuto","elementVisibilityStatus","parentObserver","tdStyleObj","tdBorderLeftWidth","tdBorderRightWidth","tdPaddingLeftWidth","tdPaddingRightWidth","parseFloat","_getComputedStyle","visibility","culpritParent","findParentWithNoDisplay","currentElement","currentParent","parentDisplayStatus","parentType","nodeName","toLowerCase","MutationObserver","mutationRecord","mutation","currentVisibility","containerWidth","disconnect","observe","attributes","childList","subtree","cssForTdsWidthAutoOld","cssForTdsWidthAuto","wptbElementHoverBgColor","wptbElementHoverTextColor","color","wptbElementHoverScale","wptbElementBgColor","wptbElementColor","wptbSizeNew","wptbButtonWrapper","wptbSize","WPTB_ResponsiveFrontend","wptbResponsiveFrontendInstance","WPTB_SortableTable","responsiveFrontReady","WPTB_ScrollManager","WptbFrontendData","scrollManager","WPTB_ExtraStyles","WPTB_LazyLoad","lazyLoad","WptbFrontendBase","_ref","tiEl","WPTB_StylePass","stylePass"],"mappings":"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","file":"wp-table-builder-frontend.js","sourcesContent":["// eslint-disable-next-line @wordpress/no-global-event-listener\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\t(function assignToContext(key, factory) {\r\n\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\tconst context = self || global;\r\n\r\n\t\tcontext[key] = factory();\r\n\t})('WptbFrontendBase', () => {\r\n\t\t/**\r\n\t\t * Table object.\r\n\t\t *\r\n\t\t * @param {Node} containerElement table top level container element.\r\n\t\t * @class\r\n\t\t */\r\n\t\tfunction WptbTableObject(containerElement) {\r\n\t\t\t/**\r\n\t\t\t * Top level wrapper for table element.\r\n\t\t\t *\r\n\t\t\t * @type {null | Node}\r\n\t\t\t */\r\n\t\t\tthis.parentContainer = null;\r\n\r\n\t\t\t/**\r\n\t\t\t * Container with matrix properties.\r\n\t\t\t *\r\n\t\t\t * @type {null | Node}\r\n\t\t\t */\r\n\t\t\tthis.matrixContainer = null;\r\n\r\n\t\t\t/**\r\n\t\t\t * Main table element.\r\n\t\t\t *\r\n\t\t\t * @type {null | HTMLTableElement}\r\n\t\t\t */\r\n\t\t\tthis.mainTable = null;\r\n\r\n\t\t\t/**\r\n\t\t\t * Table id.\r\n\t\t\t *\r\n\t\t\t * @type {null | number}\r\n\t\t\t */\r\n\t\t\tthis.id = null;\r\n\r\n\t\t\t/**\r\n\t\t\t * Parse table id.\r\n\t\t\t *\r\n\t\t\t * @param {HTMLTableElement} tableElement table element\r\n\t\t\t * @return {null | number} table id\r\n\t\t\t */\r\n\t\t\tconst parseId = (tableElement) => {\r\n\t\t\t\tconst tableId = tableElement.getAttribute('id');\r\n\t\t\t\tif (tableId) {\r\n\t\t\t\t\tconst { id } = tableId.match(/^wptb-table-id-(?<id>\\d+)$/)?.groups;\r\n\t\t\t\t\treturn parseInt(id, 10);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Parse extra info from table.\r\n\t\t\t */\r\n\t\t\tconst parseExtra = () => {\r\n\t\t\t\tif (this.mainTable) {\r\n\t\t\t\t\tthis.id = parseId(this.matrixContainer);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialize frontend base.\r\n\t\t\t */\r\n\t\t\tconst init = () => {\r\n\t\t\t\tif (containerElement.classList.contains('wptb-table-container')) {\r\n\t\t\t\t\tthis.parentContainer = containerElement;\r\n\t\t\t\t\tconst matrixContainer = containerElement.querySelector('.wptb-table-container-matrix');\r\n\r\n\t\t\t\t\tif (matrixContainer) {\r\n\t\t\t\t\t\tthis.matrixContainer = matrixContainer;\r\n\r\n\t\t\t\t\t\tconst mainTable = this.matrixContainer.querySelector('table.wptb-preview-table');\r\n\r\n\t\t\t\t\t\tif (mainTable) {\r\n\t\t\t\t\t\t\tthis.mainTable = mainTable;\r\n\t\t\t\t\t\t\tparseExtra();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrow new Error('invalid table element');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('invalid matrix container');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error('invalid table top level container');\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tinit();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Wptb frontend base operations and helpers.\r\n\t\t *\r\n\t\t * @class\r\n\t\t */\r\n\t\tfunction WptbFrontendBase() {\r\n\t\t\t/**\r\n\t\t\t * Available table objects.\r\n\t\t\t *\r\n\t\t\t * @type {Array}\r\n\t\t\t */\r\n\t\t\tconst tableObjects = [];\r\n\r\n\t\t\t/**\r\n\t\t\t * Find available tables and generate table objects.\r\n\t\t\t */\r\n\t\t\tconst prepareTableObjects = () => {\r\n\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\tArray.from(document.querySelectorAll('.wptb-table-container')).map((container) => {\r\n\t\t\t\t\ttableObjects.push(new WptbTableObject(container));\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Get available table objects.\r\n\t\t\t *\r\n\t\t\t * @return {Array} table objects array\r\n\t\t\t */\r\n\t\t\tthis.getTableObjects = () => {\r\n\t\t\t\treturn tableObjects;\r\n\t\t\t};\r\n\r\n\t\t\tthis.init = () => {\r\n\t\t\t\tprepareTableObjects();\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tconst frontendBaseSingletonInstance = new WptbFrontendBase();\r\n\t\tfrontendBaseSingletonInstance.init();\r\n\r\n\t\treturn frontendBaseSingletonInstance;\r\n\t});\r\n});\r\n","/**\r\n * Extra styles module to add custom css rules defined for individual tables.\r\n */\r\n(function UMD(key, context, factory) {\r\n\tif (typeof module !== 'undefined' && typeof exports === 'object') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// eslint-disable-next-line no-param-reassign\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_ExtraStyles', self || global, () => {\r\n\t/**\r\n\t * Extra styles frontend manager.\r\n\t *\r\n\t * This component will be responsible for adding and maintaining extra styles defined for tables.\r\n\t *\r\n\t * @class\r\n\t */\r\n\t// eslint-disable-next-line camelcase\r\n\tfunction WPTB_ExtraStyles() {\r\n\t\t/**\r\n\t\t * Extra styles operation modes\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tthis.modes = {\r\n\t\t\tbuilder: 'builder',\r\n\t\t\tfrontEnd: 'frontEnd',\r\n\t\t\tblock: 'block',\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Base document for DOM operations.\r\n\t\t *\r\n\t\t * @type {Document}\r\n\t\t */\r\n\t\tthis.baseDocument = document;\r\n\r\n\t\t/**\r\n\t\t * Current mode extra styles are operating on.\r\n\t\t *\r\n\t\t * @type {string}\r\n\t\t */\r\n\t\tthis.currentMode = this.modes.builder;\r\n\r\n\t\t/**\r\n\t\t * General table styles.\r\n\t\t *\r\n\t\t * @type {string}\r\n\t\t */\r\n\t\tthis.generalStyles = '';\r\n\r\n\t\t/**\r\n\t\t * HTML queries for table element in different plugin modes\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tconst tableQueries = {\r\n\t\t\t[this.modes.builder]: '.wptb-table-setup .wptb-preview-table',\r\n\t\t\t[this.modes.block]: '.wptb-block-table-setup .wptb-preview-table',\r\n\t\t\t[this.modes.frontEnd]: '.wptb-table-container .wptb-preview-table',\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Format styles.\r\n\t\t *\r\n\t\t * @param {string} styles styles\r\n\t\t * @return {string} formatted styles\r\n\t\t */\r\n\t\tconst formatStyles = (styles) => {\r\n\t\t\t// remove all newlines, comments and '!important' from style string to make it a one liner\r\n\t\t\tconst cleaned = styles.replaceAll(/(\\r?\\n)|(\\/\\*.+?\\*\\/)|(\\s*!important)/g, '');\r\n\r\n\t\t\t// add '!important' to all rules to override default style rules\r\n\t\t\treturn cleaned.replaceAll(';', ' !important;');\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Reform style rules so they will only affect given table id.\r\n\t\t *\r\n\t\t * @param {number} prefix prefix string that will be added to all rules\r\n\t\t * @param {string} extraStyles extra styles\r\n\t\t * @return {string} new style properties prefixed with table id class\r\n\t\t */\r\n\t\tconst prefixStyleRules = (prefix, extraStyles) => {\r\n\t\t\t// reformat styles into a suitable form for our regexp operations\r\n\t\t\tconst formattedStyles = formatStyles(extraStyles);\r\n\r\n\t\t\tconst splitStyles = formattedStyles.split('}');\r\n\t\t\tconst prefixedStylesArray = [];\r\n\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tsplitStyles.map((split) => {\r\n\t\t\t\tconst regExp = new RegExp(/(.+?)\\{/g);\r\n\t\t\t\tconst matches = regExp.exec(split);\r\n\r\n\t\t\t\tif (matches) {\r\n\t\t\t\t\tprefixedStylesArray.push(split.replace(matches[1], `${prefix} ${matches[1]}`));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn `${prefixedStylesArray.join('}')}}`;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Apply general styles to document.\r\n\t\t *\r\n\t\t * @param {string} generalStyles general style rules\r\n\t\t * @param {Node} baseElement element to use as base\r\n\t\t */\r\n\t\tconst applyGeneralStyles = (generalStyles, baseElement = null) => {\r\n\t\t\tconst generalStylesheet = document.createElement('style');\r\n\t\t\tgeneralStylesheet.type = 'text/css';\r\n\t\t\tgeneralStylesheet.id = 'wptb-general-styles';\r\n\r\n\t\t\tif (!baseElement) {\r\n\t\t\t\tconst head =\r\n\t\t\t\t\tthis.currentMode === this.modes.block ? this.baseDocument : this.baseDocument.querySelector('head');\r\n\r\n\t\t\t\thead.appendChild(generalStylesheet);\r\n\t\t\t} else {\r\n\t\t\t\tbaseElement.insertAdjacentElement('beforebegin', generalStylesheet);\r\n\t\t\t}\r\n\t\t\tconst prefixedStyleRules = prefixStyleRules(generalStyles.parentPrefix, generalStyles.styles);\r\n\t\t\tgeneralStylesheet.appendChild(document.createTextNode(prefixedStyleRules));\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Apply defined extra styles for given table element.\r\n\t\t *\r\n\t\t * @param {Element} tableElement table element\r\n\t\t */\r\n\t\tconst applyExtraStyle = (tableElement) => {\r\n\t\t\tconst extraStylesRaw = tableElement.dataset.wptbExtraStyles;\r\n\t\t\tconst styleIdPrefix = 'wptb-extra-styles-';\r\n\r\n\t\t\tif (extraStylesRaw) {\r\n\t\t\t\tconst extraStyles = atob(extraStylesRaw);\r\n\r\n\t\t\t\tconst [, tableId] = tableElement\r\n\t\t\t\t\t.getAttribute('class')\r\n\t\t\t\t\t.match(/wptb-element-main-table_setting-(?:startedid-)?(\\d+)/);\r\n\r\n\t\t\t\tconst styleId = styleIdPrefix + tableId;\r\n\r\n\t\t\t\tconst head = this.baseDocument.querySelector('head');\r\n\r\n\t\t\t\t// since stylesheets are created for frontend only once at startup, checking document head for any created style object will work even with theme disabled tables which at builder, they are not inside a shadow-root\r\n\t\t\t\tlet styleElement = head?.querySelector(`#${styleId}`);\r\n\r\n\t\t\t\t// if no style element is found, create one\r\n\t\t\t\tif (!styleElement) {\r\n\t\t\t\t\tstyleElement = document.createElement('style');\r\n\t\t\t\t\tstyleElement.type = 'text/css';\r\n\t\t\t\t\tstyleElement.id = styleId;\r\n\r\n\t\t\t\t\tconst isThemeStylesDisabled = tableElement.dataset.disableThemeStyles;\r\n\r\n\t\t\t\t\t// if theme styles are disabled, it means our table is residing inside a shadow-root, place style element inside shadow-root instead of document head\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t(isThemeStylesDisabled && this.currentMode === this.modes.frontEnd) ||\r\n\t\t\t\t\t\tthis.currentMode === this.modes.block\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttableElement.insertAdjacentElement('beforebegin', styleElement);\r\n\t\t\t\t\t\tif (this.currentMode === this.modes.frontEnd && this.generalStyles) {\r\n\t\t\t\t\t\t\tapplyGeneralStyles(this.generalStyles, tableElement);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst uniqueClass = `.wptb-element-main-table_setting-${tableId}`;\r\n\t\t\t\t// reform style rules so they will only affect the table they are assigned to\r\n\t\t\t\tconst prefixedStyles = prefixStyleRules(uniqueClass, extraStyles);\r\n\r\n\t\t\t\t// remove previous styles with updated ones\r\n\t\t\t\tstyleElement.innerHTML = '';\r\n\t\t\t\tstyleElement.appendChild(document.createTextNode(prefixedStyles));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Apply extra styles to all available tables on DOM.\r\n\t\t *\r\n\t\t * @param {string} mode operation mode to apply styles\r\n\t\t * @param {string} generalStyles general style rules\r\n\t\t * @param {Object} baseDocument base document for DOM operations\r\n\t\t */\r\n\t\tthis.applyStyles = (mode = this.modes.frontEnd, generalStyles = null, baseDocument = document) => {\r\n\t\t\tthis.baseDocument = baseDocument;\r\n\t\t\tthis.currentMode = mode;\r\n\t\t\tthis.generalStyles = generalStyles;\r\n\r\n\t\t\tconst allTables = Array.from(this.baseDocument.querySelectorAll(tableQueries[mode]));\r\n\r\n\t\t\tif (allTables) {\r\n\t\t\t\tallTables.map(applyExtraStyle);\r\n\t\t\t}\r\n\r\n\t\t\t// only apply general styles on client frontend if any general styles are defined\r\n\t\t\tif ((mode === this.modes.frontEnd || mode === this.modes.block) && generalStyles) {\r\n\t\t\t\tapplyGeneralStyles(generalStyles);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// send a singleton instance of manager\r\n\treturn new WPTB_ExtraStyles();\r\n});\r\n","(function UMD(key, context, factory) {\r\n\tif (typeof module !== 'undefined' && typeof exports === 'object') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// eslint-disable-next-line no-param-reassign\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_Logger', self || global, () => {\r\n\tconst format = '%c WP Table Builder %c {message} ';\r\n\tconst brandStyle =\r\n\t\t'border-radius:5px 0 0 5px; background-color: #3299D1; padding: 3px; color: #FFF; font-weight: bold;';\r\n\tconst messageStyle = 'background-color: {bgColor} ; padding: 3px; color: #FFF; border-radius: 0 5px 5px 0;';\r\n\r\n\t/**\r\n\t * Background colors for message.\r\n\t *\r\n\t * Add color property keys keeping in mind that internal function to use that colors will select them based on type of message, ie 'normal' color property for normal messages and 'error' color property for error message types.\r\n\t *\r\n\t * @type {Object}\r\n\t */\r\n\tconst bgColors = {\r\n\t\tnormal: '#48BB78',\r\n\t};\r\n\r\n\treturn {\r\n\t\t/**\r\n\t\t * Prepare format for incoming message.\r\n\t\t *\r\n\t\t * @param {string} message message to be used\r\n\t\t * @return {string} prepared message\r\n\t\t */\r\n\t\tprepareMessage(message) {\r\n\t\t\treturn format.replace('{message}', message);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Prepare style of message.\r\n\t\t *\r\n\t\t * @param {string} messageType message type\r\n\t\t * @return {string} prepared style\r\n\t\t */\r\n\t\tprepareMessageStyle(messageType = 'normal') {\r\n\t\t\tlet keyName = 'normal';\r\n\r\n\t\t\tif (bgColors[messageType]) {\r\n\t\t\t\tkeyName = messageType;\r\n\t\t\t}\r\n\r\n\t\t\treturn messageStyle.replace('{bgColor}', bgColors[keyName]);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Normal log function.\r\n\t\t *\r\n\t\t * @param {string} message message string\r\n\t\t */\r\n\t\tlog(message) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.log(this.prepareMessage(message), brandStyle, this.prepareMessageStyle('normal'));\r\n\t\t},\r\n\t};\r\n});\r\n","let WPTB_CutGlueTable = {\r\n    cutTableHorizontally: function (rowBefore, table) {\r\n        if( table && table.rows[rowBefore] ) {\r\n            for( let i = 0; i < rowBefore; i++ ) {\r\n                let tableRowsIChildren = table.rows[i].children;\r\n\r\n                for( let j = 0; j < tableRowsIChildren.length; j++ ) {\r\n                    if ( tableRowsIChildren[j].rowSpan > 1 && tableRowsIChildren[j].rowSpan > rowBefore - i ) {\r\n                        let newTdRowspan = tableRowsIChildren[j].rowSpan - rowBefore + i;\r\n                        tableRowsIChildren[j].rowSpan = rowBefore - i;\r\n                        if( ! tableRowsIChildren[j].dataset.sameCellBeforeDivision ) {\r\n                            tableRowsIChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\r\n                        }\r\n\r\n                        let td;\r\n                        if(table.hasOwnProperty('wptbCell')) {\r\n                            td = new table.wptbCell( table.mark );\r\n                            td = td.getDOMElement();\r\n                        } else {\r\n                            td = document.createElement('td');\r\n                        }\r\n\r\n                        let tdTopStyle = tableRowsIChildren[j].getAttribute( 'style' );\r\n                        td.setAttribute( 'style', tdTopStyle );\r\n                        td.colSpan = tableRowsIChildren[j].colSpan;\r\n                        td.rowSpan = newTdRowspan;\r\n                        td.dataset.sameCellBeforeDivision = tableRowsIChildren[j].dataset.sameCellBeforeDivision;\r\n\r\n                        let dataXIndex = tableRowsIChildren[j].dataset.xIndex;\r\n                        let dataXIndexNext = parseInt( dataXIndex ) + parseInt( tableRowsIChildren[j].colSpan );\r\n                        let beforeTd;\r\n                        while( ! beforeTd && dataXIndexNext < table.maxCols ) {\r\n                            beforeTd = table.rows[rowBefore].querySelector( '[data-x-index=\"' + dataXIndexNext + '\"]' );\r\n                            dataXIndexNext++;\r\n                        }\r\n                        table.rows[rowBefore].insertBefore( td, beforeTd );\r\n\r\n                        WPTB_RecalculateIndexes(table);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    glueTableHorizontally: function (table) {\r\n        if(table) {\r\n            let tds = [...table.getElementsByTagName( 'td' )];\r\n            for( let i = 0; i < tds.length; i++ ) {\r\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\r\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\r\n                    let tdsSameBeforeDivision = table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' );\r\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\r\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] ) {\r\n                            if( tdsSameBeforeDivision[j].parentNode && tdsSameBeforeDivision[j + 1].parentNode &&\r\n                                ! tdsSameBeforeDivision[j].parentNode.classList.contains( 'wptb-row-moving' ) &&\r\n                                ! tdsSameBeforeDivision[j + 1].parentNode.classList.contains( 'wptb-row-moving' ) ) {\r\n                                if( ( tdsSameBeforeDivision[j + 1].dataset.yIndex == parseInt( tdsSameBeforeDivision[j].dataset.yIndex ) +\r\n                                    parseInt( tdsSameBeforeDivision[j].rowSpan ) ) ) {\r\n                                    tdsSameBeforeDivision[j].rowSpan += tdsSameBeforeDivision[j + 1].rowSpan;\r\n\r\n                                    let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\r\n\r\n                                    for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\r\n                                        tdsSameBeforeDivision[j].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\r\n                                    }\r\n\r\n                                    let nextRow = tdsSameBeforeDivision[j + 1].parentNode;\r\n                                    nextRow.removeChild( tdsSameBeforeDivision[j + 1] );\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            WPTB_RecalculateIndexes(table);\r\n        }\r\n    },\r\n    cutTableVertically: function (col, table) {\r\n        for ( let i = 0; i < table.rows.length; i++ ) {\r\n            if( col < table.maxCols ) {\r\n                if( col != 0 && ( ! table.rows[i].querySelector( '[data-x-index=\"' + col + '\"]' ) ) ) {\r\n                    let rowChildren = table.rows[i].children;\r\n\r\n                    let td,\r\n                        rowChildrenLength = rowChildren.length,\r\n                        afterTd,\r\n                        rowSpanNewTd,\r\n                        colSpanOld,\r\n                        colSpanNewTd;\r\n                    for( let j = 0; j < rowChildrenLength; j++ ) {\r\n                        if( rowChildren[j].colSpan > 1 && parseInt( rowChildren[j].dataset.xIndex ) < col &&\r\n                            parseInt( rowChildren[j].dataset.xIndex ) + parseInt( rowChildren[j].colSpan ) > col ) {\r\n                            if(table.hasOwnProperty('wptbCell')) {\r\n                                td = new table.wptbCell( table.mark );\r\n                                td = td.getDOMElement();\r\n                            } else {\r\n                                td = document.createElement('td');\r\n                            }\r\n\r\n                            rowSpanNewTd = rowChildren[j].rowSpan;\r\n                            colSpanOld = rowChildren[j].colSpan;\r\n                            rowChildren[j].colSpan = col - rowChildren[j].dataset.xIndex;\r\n                            colSpanNewTd = colSpanOld - rowChildren[j].colSpan;\r\n\r\n                            if( ! rowChildren[j].dataset.sameCellBeforeDivision ) {\r\n                                rowChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\r\n                            }\r\n\r\n                            let tdLeftStyle = rowChildren[j].getAttribute( 'style' );\r\n                            td.setAttribute( 'style', tdLeftStyle );\r\n\r\n                            let tdAnalogThisX = table.querySelector( '[data-x-index=\"' + col + '\"]' );\r\n                            if( tdAnalogThisX ) {\r\n                                td.style.width = tdAnalogThisX.style.width;\r\n                            }\r\n\r\n                            let tdAnalogThisY = table.querySelector( '[data-y-index=\"' + i + '\"]' );\r\n                            if( tdAnalogThisY ) {\r\n                                td.style.height = tdAnalogThisY.style.height;\r\n                            }\r\n                            if( rowChildren[j + 1] ) {\r\n                                afterTd = rowChildren[j + 1];\r\n                            } else {\r\n                                afterTd = null;\r\n                            }\r\n\r\n                            table.rows[i].insertBefore( td, afterTd );\r\n                            td.colSpan = colSpanNewTd;\r\n                            td.rowSpan = rowSpanNewTd;\r\n                            td.dataset.sameCellBeforeDivision = rowChildren[j].dataset.sameCellBeforeDivision;\r\n                            i += rowSpanNewTd - 1;\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            WPTB_RecalculateIndexes(table);\r\n        }\r\n    },\r\n    glueTableVertically: function (table) {\r\n        if( table ) {\r\n            let tds = [...table.getElementsByTagName( 'td' )];\r\n            for( let i = 0; i < tds.length; i++ ) {\r\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\r\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\r\n                    let tdsSameBeforeDivision = [...table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' )];\r\n\r\n                    let jFirstTdGlue = null;\r\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\r\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] &&\r\n                            ! tdsSameBeforeDivision[j].classList.contains( 'wptb-column-moving' ) &&\r\n                            ! tdsSameBeforeDivision[j + 1].classList.contains( 'wptb-column-moving' ) ) {\r\n                            if( ( tdsSameBeforeDivision[j + 1].dataset.xIndex == parseInt( tdsSameBeforeDivision[j].dataset.xIndex ) +\r\n                                parseInt( tdsSameBeforeDivision[j].colSpan ) ) ) {\r\n                                if( jFirstTdGlue == null ) {\r\n                                    jFirstTdGlue = j;\r\n                                }\r\n                                tdsSameBeforeDivision[jFirstTdGlue].colSpan += tdsSameBeforeDivision[j + 1].colSpan;\r\n\r\n                                let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\r\n\r\n                                for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\r\n                                    tdsSameBeforeDivision[jFirstTdGlue].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\r\n                                }\r\n\r\n                                let thisRow = tdsSameBeforeDivision[j + 1].parentNode;\r\n                                thisRow.removeChild( tdsSameBeforeDivision[j + 1] );\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            WPTB_RecalculateIndexes(table);\r\n        }\r\n    }\r\n}\r\n","/**\r\n *\r\n * @param {HTMLElement} table\r\n * @param {string} typeFirst\r\n * @param {strinig} typeSecond\r\n * @param {func} workFunction\r\n * @param {object} responsiveFront\r\n */\r\nvar WPTB_GetDirectionAfterReconstruction = function (table, typeFirst, typeSecond, verticalProp, responsiveFront) {\r\n\r\n    let itemsPerHeader = 0;\r\n    let tableMaxCols = table.maxCols;\r\n    const switchMode = {};\r\n    let type = [];\r\n    if (responsiveFront && responsiveFront.getDirective(table)) {\r\n        switchMode.switch = function (e) {\r\n            const directives = responsiveFront.getDirective(table)\r\n\r\n            let sizeRangeId = 'desktop';\r\n            if (e && e.detail) {\r\n                sizeRangeId = e.detail.sizeRangeId;\r\n            }\r\n            type = [typeFirst, 1];\r\n            if (sizeRangeId !== 'desktop') {\r\n                if (directives.hasOwnProperty('modeOptions')) {\r\n                    const mode = directives.responsiveMode;\r\n                    const modeOptions = directives.modeOptions[mode];\r\n\r\n                    if (\r\n                        modeOptions.hasOwnProperty('topRowAsHeader') &&\r\n                        modeOptions.topRowAsHeader.hasOwnProperty(sizeRangeId) &&\r\n                        modeOptions.topRowAsHeader[sizeRangeId]\r\n                    ) {\r\n                        if (\r\n                            modeOptions.hasOwnProperty('cellStackDirection') &&\r\n                            modeOptions.cellStackDirection.hasOwnProperty(sizeRangeId)\r\n                        ) {\r\n                            if (modeOptions.cellStackDirection[sizeRangeId] === 'row') {\r\n                                type = [typeSecond, 2];\r\n                                itemsPerHeader = tableMaxCols - 1;\r\n                            } else if (modeOptions.cellStackDirection[sizeRangeId] === 'column') {\r\n                                if (modeOptions.hasOwnProperty('cellsPerRow')) {\r\n                                    itemsPerHeader = modeOptions.cellsPerRow[sizeRangeId];\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        itemsPerHeader = 0;\r\n                    }\r\n                }\r\n            } else {\r\n                itemsPerHeader = 0;\r\n            }\r\n            return { type, itemsPerHeader }\r\n        };\r\n    } else {\r\n        switchMode.switch = function (e) {\r\n            type = [typeFirst, 1];\r\n            if (table.classList.contains('wptb-mobile-view-active')) {\r\n                if (table.classList.contains('wptb-table-preview-head')) {\r\n                    type = [typeSecond, 2];\r\n                    if (type === verticalProp) {\r\n                        itemsPerHeader = tableMaxCols - 1;\r\n                    }\r\n                }\r\n                let newTable = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\r\n                return { type, itemsPerHeader, newTable };\r\n            }\r\n\r\n            return { type, itemsPerHeader }\r\n        };\r\n    }\r\n\r\n    return switchMode;\r\n}\r\n","/**\r\n * Responsive class assignment for frontend operations.\r\n *\r\n * This file can be used as an UMD.\r\n */\r\n(function assignToGlobal(key, context, factory) {\r\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// eslint-disable-next-line no-param-reassign\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_SortableTable', self || global, () => {\r\n\tfunction WPTB_SortTable(options = {}) {\r\n\t\tconst table = (this.table = options.table);\r\n\t\tWPTB_RecalculateIndexes(table);\r\n\t\tconst thisObject = this;\r\n\t\tthis.itemsPerHeader = 0;\r\n\t\tthis.tableMaxCols = table.maxCols;\r\n\t\tthis.cellsStylesScheme = {};\r\n\t\tthis.rowsStylesScheme = {};\r\n\r\n\t\t/**\r\n\t\t * sets the table to sort mode\r\n\t\t *\r\n\t\t * @param {string} type\r\n\t\t * @param {boolean} active\r\n\t\t * @param {number} number\r\n\t\t */\r\n\t\tthis.sortModeSwitcher = function (type, active) {\r\n\t\t\tif(active) {\r\n\t\t\t\tthis.sortModeSwitcher('horizontal', false);\r\n\t\t\t\tthis.sortModeSwitcher('vertical', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (type === 'vertical') {\r\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableVerticalStart, false);\r\n\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', true);\r\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableVerticalStart, false);\r\n\t\t\t\t\tthis.table.dataset.wptbSortableTableVertical = '1';\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', false);\r\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableVertical;\r\n\t\t\t\t}\r\n\t\t\t} else if (type === 'horizontal') {\r\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableHorizontalStart, false);\r\n\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', true);\r\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableHorizontalStart, false);\r\n\t\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal = '1';\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', false);\r\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableHorizontal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * changes table object for old reconstruction table type\r\n\t\t *\r\n\t\t * @param {boolean}start\r\n\t\t * @returns {*}\r\n\t\t */\r\n\t\tthis.tableObjectChange = function (start = true) {\r\n\t\t\tif(this.table.classList.contains('wptb-mobile-view-active') && start) {\r\n\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\r\n\t\t\t} else if(this.table.classList.contains('wptb-preview-table-mobile') && !start) {\r\n\t\t\t\tthis.table = table.parentNode.querySelector('.wptb-preview-table');\r\n\t\t\t}\r\n\t\t\treturn this.table;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * fills the object with data about cell styles for all locations (create scheme)\r\n\t\t *\r\n\t\t * @param elemSelector\r\n\t\t */\r\n\t\tthis.createTableElementsStylesScheme = function (elemSelector) {\r\n\t\t\tthis.tableObjectChange();\r\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\r\n\t\t\tif(elements.length) {\r\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tlet elem = elements[i];\r\n\t\t\t\t\tlet cellFullStyleObj = window.getComputedStyle(elem, null);\r\n\t\t\t\t\tlet backgroundColor = cellFullStyleObj.getPropertyValue( 'background-color' );\r\n\t\t\t\t\tlet objectKey = '';\r\n\t\t\t\t\tif(elemSelector === 'td') {\r\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\r\n\t\t\t\t\t\tthis.cellsStylesScheme[objectKey] = {backgroundColor};\r\n\t\t\t\t\t} else if(elemSelector === 'tr') {\r\n\t\t\t\t\t\tobjectKey = String(i);\r\n\t\t\t\t\t\tthis.rowsStylesScheme[objectKey] = {backgroundColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.tableObjectChange(false);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * applies saved cell styles data to all cells\r\n\t\t *\r\n\t\t * @param elemSelector\r\n\t\t */\r\n\t\tthis.reassignElementsStyles = function (elemSelector) {\r\n\t\t\tthis.tableObjectChange();\r\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\r\n\t\t\tlet elementsStylesScheme;\r\n\t\t\tif(elemSelector === 'td') {\r\n\t\t\t\telementsStylesScheme = this.cellsStylesScheme;\r\n\t\t\t} else if(elemSelector === 'tr') {\r\n\t\t\t\telementsStylesScheme = this.rowsStylesScheme;\r\n\t\t\t}\r\n\t\t\tif(elements.length) {\r\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tlet elem = elements[i];\r\n\t\t\t\t\tlet objectKey = '';\r\n\t\t\t\t\tif(elemSelector === 'td') {\r\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\r\n\t\t\t\t\t} else if(elemSelector === 'tr') {\r\n\t\t\t\t\t\tobjectKey = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(elementsStylesScheme.hasOwnProperty(objectKey)) {\r\n\t\t\t\t\t\tlet elemStyles = elementsStylesScheme[objectKey];\r\n\t\t\t\t\t\tfor(let key in elemStyles) {\r\n\t\t\t\t\t\t\telem.style[key] = elemStyles[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.tableObjectChange(false);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * checks whether the table should be in the sort state\r\n\t\t * and connects the necessary handlers\r\n\t\t *\r\n\t\t * @param {object} responsiveFront\r\n\t\t */\r\n\t\tthis.sortableTableInitialization = function (responsiveFront) {\r\n\t\t\tlet typeFirst;\r\n\t\t\tlet typeSecond;\r\n\t\t\tif (this.table.dataset.wptbSortableTableVertical && this.table.dataset.wptbSortableTableVertical === '1') {\r\n\t\t\t\ttypeFirst = 'vertical';\r\n\t\t\t\ttypeSecond = 'horizontal';\r\n\t\t\t} else if (\r\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal &&\r\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal === '1'\r\n\t\t\t) {\r\n\t\t\t\ttypeFirst = 'horizontal';\r\n\t\t\t\ttypeSecond = 'vertical';\r\n\t\t\t}\r\n\r\n\t\t\tif(!typeFirst || typeof typeFirst !== 'string' || !typeSecond || typeof typeSecond !== 'string') return;\r\n\r\n\t\t\tlet switchMode = WPTB_GetDirectionAfterReconstruction(this.table, typeFirst, typeSecond, 'vertical', responsiveFront);\r\n\r\n\t\t\tif(typeof switchMode === 'object' && switchMode.hasOwnProperty('switch')) {\r\n\t\t\t\tfunction sortModeSwitcherRun (e) {\r\n\t\t\t\t\tlet switchModeObj = switchMode.switch(e);\r\n\t\t\t\t\tif(typeof switchModeObj === 'object') {\r\n\t\t\t\t\t\tthis.itemsPerHeader = switchModeObj.itemsPerHeader;\r\n\t\t\t\t\t\tif(switchModeObj.hasOwnProperty('newTable')) {\r\n\t\t\t\t\t\t\tlet tableOld = this.table;\r\n\t\t\t\t\t\t\tthis.table = switchModeObj.newTable;\r\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\r\n\t\t\t\t\t\t\tthis.table = tableOld;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsortModeSwitcherRun.call(thisObject);\r\n\t\t\t\tthis.table.addEventListener(\r\n\t\t\t\t\t'table:rebuilt',\r\n\t\t\t\t\tfunction (e) {\r\n\t\t\t\t\t\tsortModeSwitcherRun.call(thisObject, e);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * adds and deletes mousemove and mouseleave events handlers when happens switch sorting mode\r\n\t\t * and also can add necessary attributes\r\n\t\t *\r\n\t\t * @param {string} type\r\n\t\t * @param {boolean} active\r\n\t\t */\r\n\t\tthis.sortingCellMouseMoveSwitcher = function (type, active) {\r\n\t\t\t/**\r\n\t\t\t * removes and adds mousemove and mouseleave events handlers\r\n\t\t\t *\r\n\t\t\t * @param {HTMLElement} td\r\n\t\t\t * @param {func} sCMM\r\n\t\t\t * @param {boolean} active\r\n\t\t\t */\r\n\t\t\tfunction s(td, sCMM, active) {\r\n\t\t\t\ttd.removeEventListener('mousemove', sCMM, false);\r\n\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\ttd.addEventListener('mousemove', sCMM, false);\r\n\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * removes and adds data sorted attributes\r\n\t\t\t *\r\n\t\t\t * @param {HTMLElement} td\r\n\t\t\t * @param {string} dataAttr\r\n\t\t\t * @param {boolean} active\r\n\t\t\t */\r\n\t\t\tfunction dataAttrSortChange(td, dataAttr, active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tif (!td.dataset[dataAttr] || td.dataset[dataAttr] !== 'desk-disabled') {\r\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'ask';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'desk';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (td.dataset[dataAttr] === 'ask') {\r\n\t\t\t\t\ttd.dataset[dataAttr] = 'ask-disabled';\r\n\t\t\t\t} else if (td.dataset[dataAttr] === 'desk') {\r\n\t\t\t\t\ttd.dataset[dataAttr] = 'desk-disabled';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// removes all mousemove and mouseleave events handlers\r\n\t\t\t// and also removes all data sorted attributes from all cells\r\n\t\t\tlet tds = this.table.querySelectorAll('td');\r\n\t\t\tif (tds.length) {\r\n\t\t\t\ttds = [...tds];\r\n\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\ts(td, sortingCellMouseMoveVertical, false);\r\n\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', false);\r\n\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, false);\r\n\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// if active === true sets sorted events handlers\r\n\t\t\t// and data sorted attributes for all cells\r\n\t\t\tif (active) {\r\n\t\t\t\tif (type === 'vertical') {\r\n\t\t\t\t\tlet rowsLength = this.table.rows.length;\r\n\t\t\t\t\tlet dataYIndexStart = 0;\r\n\t\t\t\t\twhile (rowsLength > 0) {\r\n\t\t\t\t\t\tlet tds = this.table.querySelectorAll(`[data-y-index=\"${dataYIndexStart}\"]`);\r\n\t\t\t\t\t\ttds = [...tds];\r\n\t\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveVertical, active);\r\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', active);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (this.itemsPerHeader) {\r\n\t\t\t\t\t\t\trowsLength -= this.itemsPerHeader + 1;\r\n\t\t\t\t\t\t\tdataYIndexStart += this.itemsPerHeader + 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trowsLength = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (type === 'horizontal') {\r\n\t\t\t\t\tlet tds = this.table.querySelectorAll('[data-x-index=\"0\"]');\r\n\t\t\t\t\ttds = [...tds];\r\n\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\tlet tdsPerAfter = this.table.querySelectorAll(`[data-y-index=\"${td.dataset.yIndex}\"]`);\r\n\t\t\t\t\t\tif(tdsPerAfter.length > 2) {\r\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, active);\r\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', active);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * adds a sortable-hover class for a cell when the cursor is over the sort icon (arrow)\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {string} type\r\n\t\t * @param {HTMLElement} element td\r\n\t\t */\r\n\t\tfunction sortingCellMouseMov(e, type, element) {\r\n\t\t\tif (e.target.tagName === 'TD') {\r\n\t\t\t\tconst x = e.offsetX == undefined ? e.layerX : e.offsetX;\r\n\t\t\t\tconst y = e.offsetY == undefined ? e.layerY : e.offsetY;\r\n\t\t\t\tlet xMatch = false;\r\n\t\t\t\tif ((type === 'vertical' && e.target.clientWidth - x <= 35) || (type === 'horizontal' && x <= 35)) {\r\n\t\t\t\t\txMatch = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (xMatch && (e.target.clientHeight - 35) / 2 < y && (e.target.clientHeight + 35) / 2 > y) {\r\n\t\t\t\t\telement.classList.add('sortable-hover');\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.classList.remove('sortable-hover');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\telement.classList.remove('sortable-hover');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * calls sortingCellMouseMov with the type parameter set to vertical\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tfunction sortingCellMouseMoveVertical(e) {\r\n\t\t\tsortingCellMouseMov(e, 'vertical', this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * calls sortingCellMouseMov with the type parameter set to horizontal\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tfunction sortingCellMouseMoveHorizontal(e) {\r\n\t\t\tsortingCellMouseMov(e, 'horizontal', this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * remove sortable-hover class from cell when cursor leave cell\r\n\t\t */\r\n\t\tfunction tdMouseLeave() {\r\n\t\t\tthis.classList.remove('sortable-hover');\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * function for sorting the table vertically by the numeric content of cells\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {HTMLElement} table\r\n\t\t * @param {string} type\r\n\t\t */\r\n\t\tfunction sortableTable(e, type) {\r\n\t\t\tif (\r\n\t\t\t\te.target &&\r\n\t\t\t\te.target.tagName === 'TD' &&\r\n\t\t\t\t!table.parentNode.classList.contains('wptb-preview-table-manage-cells')\r\n\t\t\t) {\r\n\t\t\t\tconst table = e.currentTarget;\r\n\t\t\t\tlet tableWasSorted = false;\r\n\t\t\t\tif (type === 'vertical' && e.target.dataset.hasOwnProperty('sortedVertical')) {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * if table have enabled param topRowAsHeader and sellsStackDirection is column\r\n\t\t\t\t\t * the top and bottom rows that will not be sorted are temporarily removed from the table\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst tableRowsBefore = [];\r\n\t\t\t\t\tconst tableRowsAfter = [];\r\n\t\t\t\t\tif (this.itemsPerHeader && this.itemsPerHeader < table.rows.length) {\r\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\t\t\t\t\t\tconst tableRowsArr = [...table.rows];\r\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\r\n\t\t\t\t\t\tfor (let i = 0; i < tableRowsArr.length; i++) {\r\n\t\t\t\t\t\t\tif (i < e.target.dataset.yIndex) {\r\n\t\t\t\t\t\t\t\ttableRowsBefore.push(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t} else if (i > parseInt(e.target.dataset.yIndex, 10) + this.itemsPerHeader) {\r\n\t\t\t\t\t\t\t\ttableRowsAfter.push(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-x-index=\"${e.target.dataset.xIndex}\"]`);\r\n\t\t\t\t\ttds = [...tds];\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * preparing table for sorting\r\n\t\t\t\t\t */\r\n\t\t\t\t\tlet rowspan;\r\n\t\t\t\t\tlet rowNum;\r\n\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\tif (!(rowspan = parseInt(td.rowSpan, 10))) {\r\n\t\t\t\t\t\t\trowspan = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trowNum = td.dataset.yIndex;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\r\n\t\t\t\t\t\trowNum += rowspan;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconst rowsValuesArr = [];\r\n\t\t\t\t\tlet rowsTdFirst;\r\n\t\t\t\t\tlet tdYCoordsRowSpanPrevious = 0;\r\n\t\t\t\t\tconst tableRowsPushed = [];\r\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\r\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\ttable,\r\n\t\t\t\t\t\t\ttds,\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\ttdYCoordsRowSpanPrevious,\r\n\t\t\t\t\t\t\t'vertical'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t\ti = tdsChanged.i;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t} else if (tdsChanged) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst td = tds[i];\r\n\r\n\t\t\t\t\t\tlet tdRowspan = parseInt(td.rowSpan, 10);\r\n\t\t\t\t\t\tif (!tdRowspan) tdRowspan = 1;\r\n\r\n\t\t\t\t\t\ttdYCoordsRowSpanPrevious = parseInt(td.dataset.yIndex, 10) + tdRowspan;\r\n\r\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\r\n\r\n\t\t\t\t\t\tconst rowsTd = [];\r\n\t\t\t\t\t\tfor (let j = 0; j < tdRowspan; j++) {\r\n\t\t\t\t\t\t\trowsTd.push(table.rows[parseInt(td.dataset.yIndex, 10) + j]);\r\n\t\t\t\t\t\t\ttableRowsPushed.push(parseInt(td.dataset.yIndex, 10) + j);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (td.dataset.yIndex > 0) {\r\n\t\t\t\t\t\t\trowsValuesArr.push({\r\n\t\t\t\t\t\t\t\trowsTd,\r\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trowsTdFirst = rowsTd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedVertical');\r\n\t\t\t\t\tif (!orderBy) return;\r\n\r\n\t\t\t\t\tif (rowsValuesArr.length) rowsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\r\n\r\n\t\t\t\t\trowsValuesArr.unshift({ rowsTd: rowsTdFirst });\r\n\r\n\t\t\t\t\tif (rowsValuesArr.length < table.rows.length) {\r\n\t\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\r\n\t\t\t\t\t\t\tif (tableRowsPushed.indexOf(i) > -1) continue;\r\n\t\t\t\t\t\t\tconst rowsTd = [];\r\n\t\t\t\t\t\t\trowsTd.push(table.rows[i]);\r\n\r\n\t\t\t\t\t\t\trowsValuesArr.push({\r\n\t\t\t\t\t\t\t\trowsTd,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst tBody = table.querySelector('tbody');\r\n\t\t\t\t\ttBody.innerHTML = '';\r\n\r\n\t\t\t\t\trowsValuesArr.map((rowsValObj) => {\r\n\t\t\t\t\t\trowsValObj.rowsTd.map((row) => {\r\n\t\t\t\t\t\t\ttBody.appendChild(row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * returning previously deleted rows\r\n\t\t\t\t\t */\r\n\t\t\t\t\tif (tableRowsBefore.length) {\r\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\r\n\t\t\t\t\t\tif (tableLastCont) {\r\n\t\t\t\t\t\t\tconst trRef = tableLastCont.querySelector('tr');\r\n\t\t\t\t\t\t\ttableRowsBefore.map((tr) => {\r\n\t\t\t\t\t\t\t\ttableLastCont.insertBefore(tr, trRef);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (tableRowsAfter.length) {\r\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\r\n\t\t\t\t\t\tif (tBody) {\r\n\t\t\t\t\t\t\ttableRowsAfter.map((tr) => {\r\n\t\t\t\t\t\t\t\ttableLastCont.appendChild(tr);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\r\n\t\t\t\t\tWPTB_CutGlueTable.glueTableHorizontally(table);\r\n\r\n\t\t\t\t\ttableWasSorted = true;\r\n\t\t\t\t} else if (type === 'horizontal' && e.target.dataset.xIndex === '0') {\r\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-y-index=\"${e.target.dataset.yIndex}\"]`);\r\n\t\t\t\t\ttds = [...tds];\r\n\r\n\t\t\t\t\t// preparing table for sorting\r\n\t\t\t\t\tlet colspan;\r\n\t\t\t\t\tlet colNum;\r\n\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\tif (!(colspan = parseInt(td.colSpan, 10))) {\r\n\t\t\t\t\t\t\tcolspan = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolNum = td.dataset.xIndex;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\r\n\t\t\t\t\t\tcolNum += colspan;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconst columnsValuesArr = [];\r\n\t\t\t\t\tlet columnsTdFirst;\r\n\r\n\t\t\t\t\tlet tdXCoordsColSpanPrevious = 0;\r\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\r\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\ttable,\r\n\t\t\t\t\t\t\ttds,\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\ttdXCoordsColSpanPrevious,\r\n\t\t\t\t\t\t\t'horizontal'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t\ti = tdsChanged.i;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t} else if (tdsChanged) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst td = tds[i];\r\n\t\t\t\t\t\tlet tdColspan = parseInt(td.colSpan, 10);\r\n\t\t\t\t\t\tif (!tdColspan) tdColspan = 1;\r\n\r\n\t\t\t\t\t\ttdXCoordsColSpanPrevious = parseInt(td.dataset.xIndex, 10) + tdColspan;\r\n\r\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\r\n\t\t\t\t\t\tconst columnsTd = [];\r\n\t\t\t\t\t\tfor (let j = 0; j < tdColspan; j++) {\r\n\t\t\t\t\t\t\tconst tdsColumn = [\r\n\t\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(td.dataset.xIndex, 10) + j}\"]`),\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tcolumnsTd.push(tdsColumn);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (td.dataset.xIndex > 0) {\r\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\r\n\t\t\t\t\t\t\t\tcolumnsTd,\r\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcolumnsTdFirst = columnsTd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedHorizontal');\r\n\t\t\t\t\tif (!orderBy) return;\r\n\r\n\t\t\t\t\tif (columnsValuesArr.length) columnsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\r\n\r\n\t\t\t\t\tcolumnsValuesArr.unshift({ columnsTd: columnsTdFirst });\r\n\r\n\t\t\t\t\tif (columnsValuesArr.length < table.maxCols) {\r\n\t\t\t\t\t\tconst difference = table.maxCols - columnsValuesArr.length;\r\n\t\t\t\t\t\tfor (let i = 0; i < difference; i++) {\r\n\t\t\t\t\t\t\tconst tdsColumn = [\r\n\t\t\t\t\t\t\t\t...table.querySelectorAll(\r\n\t\t\t\t\t\t\t\t\t`[data-x-index=\"${parseInt(table.maxCols, 10) - parseInt(difference, 10) + i}\"]`\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\r\n\t\t\t\t\t\t\t\tcolumnsTd: [tdsColumn],\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\r\n\t\t\t\t\t\ttable.rows[i].innerHTML = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumnsValuesArr.map((columnsValObj) => {\r\n\t\t\t\t\t\tcolumnsValObj.columnsTd.map((tdsColumn) => {\r\n\t\t\t\t\t\t\ttdsColumn.map((td) => {\r\n\t\t\t\t\t\t\t\ttable.rows[td.dataset.yIndex].appendChild(td);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\r\n\t\t\t\t\tWPTB_CutGlueTable.glueTableVertically(table);\r\n\r\n\t\t\t\t\ttableWasSorted = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (tableWasSorted) {\r\n\t\t\t\t\tremoveCellsAttrAfterDivision(table);\r\n\r\n\t\t\t\t\tif (table.hasOwnProperty('tableSM')) {\r\n\t\t\t\t\t\tconst tableSM = table.tableSM();\r\n\t\t\t\t\t\tnew tableSM().tableStateSet();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.reassignElementsStyles('td');\r\n\t\t\t\t\tthis.reassignElementsStyles('tr');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Function that sets the data-attribute with the number of the row or column\r\n\t\t * that the table was sorted by. Returns the number of a row or column\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {string} dataAttr\r\n\t\t * @returns {null|boolean}\r\n\t\t */\r\n\t\tfunction setSortedAscDataAttr(e, dataAttr) {\r\n\t\t\tif (\r\n\t\t\t\te.currentTarget &&\r\n\t\t\t\t(e.currentTarget.classList.contains('wptb-preview-table') ||\r\n\t\t\t\t\te.currentTarget.classList.contains('wptb-preview-table-mobile'))\r\n\t\t\t) {\r\n\t\t\t\tif (!e.target.dataset[dataAttr] || e.target.dataset[dataAttr] === 'ask') {\r\n\t\t\t\t\te.target.dataset[dataAttr] = 'desk';\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.target.dataset[dataAttr] = 'ask';\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn e.target.dataset[dataAttr];\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * defines the sorting order\r\n\t\t *\r\n\t\t * @param {string} orderBy\r\n\t\t * @param prev\r\n\t\t * @param next\r\n\t\t * @returns {number}\r\n\t\t */\r\n\t\tfunction sortOrder(orderBy = 'ask', prev, next) {\r\n\t\t\tlet prevValue = prev.value;\r\n\t\t\tlet nextValue = next.value;\r\n\t\t\tif (parseInt(prevValue) && parseInt(nextValue)) {\r\n\t\t\t\tprevValue = parseInt(prevValue);\r\n\t\t\t\tnextValue = parseInt(nextValue);\r\n\t\t\t}\r\n\r\n\t\t\tif (orderBy === 'ask') {\r\n\t\t\t\tif (prevValue < nextValue) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (prevValue === nextValue) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif (prevValue < nextValue) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif (prevValue === nextValue) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * return cell text elements values\r\n\t\t *\r\n\t\t * @param cell {HTMLElement}\r\n\t\t * @returns {string}\r\n\t\t */\r\n\t\tfunction textElementsValuesGet(cell) {\r\n\t\t\tlet textElements = cell.querySelectorAll('.wptb-text-container');\r\n\t\t\ttextElements = [...textElements];\r\n\t\t\tlet value = '';\r\n\t\t\tfor (let j = 0; j < textElements.length; j++) {\r\n\t\t\t\tvalue += textElements[j].innerText;\r\n\t\t\t\tif (j !== textElements.length - 1) value += ' ';\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * adds cells to the collection of cells in the row or column that the table is sorted by.\r\n\t\t * These added cells are not originally were added in the collection,\r\n\t\t * because they are combined with cells from higher rows or left-side columns\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {HTMLElement} table\r\n\t\t * @param {array} tds\r\n\t\t * @param {number} i\r\n\t\t * @param {number} tdIndexSpanPrev\r\n\t\t * @param {string} type\r\n\t\t * @returns {{tds: *}|boolean|{tds: *, i: *}}\r\n\t\t */\r\n\t\tfunction changeSortingTdsCollection(e, table, tds, i, tdIndexSpanPrev, type) {\r\n\t\t\tconst td = tds[i];\r\n\t\t\tlet tdsCollectionChanged = false;\r\n\t\t\tlet collectionTds;\r\n\t\t\tlet collectionTdsJSpan;\r\n\t\t\tlet collectionTdsJSpanProperty;\r\n\t\t\tlet indexName;\r\n\t\t\tlet indexNameCamelCase;\r\n\t\t\tlet indexNamePerpendicularCamelCase;\r\n\t\t\tlet tdSpanProperty;\r\n\t\t\t// max rows or columns column\r\n\t\t\tlet tableGroupCount;\r\n\r\n\t\t\tif (type === 'vertical') {\r\n\t\t\t\tcollectionTdsJSpanProperty = 'colSpan';\r\n\t\t\t\tindexName = 'data-y-index';\r\n\t\t\t\tindexNameCamelCase = 'yIndex';\r\n\t\t\t\tindexNamePerpendicularCamelCase = 'xIndex';\r\n\t\t\t\ttdSpanProperty = 'rowSpan';\r\n\t\t\t\ttableGroupCount = table.rows.length;\r\n\t\t\t} else if (type === 'horizontal') {\r\n\t\t\t\tcollectionTdsJSpanProperty = 'rowSpan';\r\n\t\t\t\tindexName = 'data-x-index';\r\n\t\t\t\tindexNameCamelCase = 'xIndex';\r\n\t\t\t\tindexNamePerpendicularCamelCase = 'yIndex';\r\n\t\t\t\ttdSpanProperty = 'colSpan';\r\n\t\t\t\ttableGroupCount = table.maxCols;\r\n\t\t\t}\r\n\r\n\t\t\tif (td.dataset[indexNameCamelCase] - tdIndexSpanPrev > 0) {\r\n\t\t\t\tcollectionTds = table.querySelectorAll(`[${indexName}=\"${tdIndexSpanPrev}\"]`);\r\n\r\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\r\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\r\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\r\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\r\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttds.splice(i, 0, collectionTds[j]);\r\n\t\t\t\t\t\ttdsCollectionChanged = true;\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tdsCollectionChanged) return { tds, i };\r\n\r\n\t\t\tlet tdSpan = parseInt(td[tdSpanProperty], 10);\r\n\t\t\tif (!tdSpan) tdSpan = 1;\r\n\t\t\tif (i == tds.length - 1 && parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan < tableGroupCount) {\r\n\t\t\t\tcollectionTds = table.querySelectorAll(\r\n\t\t\t\t\t`[${indexName}=\"${parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan}\"]`\r\n\t\t\t\t);\r\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\r\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\r\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\r\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\r\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttds.push(collectionTds[j]);\r\n\t\t\t\t\t\ttdsCollectionChanged = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tdsCollectionChanged) return { tds };\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * remove cells attributes which were used for division table\r\n\t\t *\r\n\t\t * @param {HTMLElement} table\r\n\t\t */\r\n\t\tfunction removeCellsAttrAfterDivision(table) {\r\n\t\t\tconst tdsAll = [...table.getElementsByTagName('td')];\r\n\t\t\tfor (let i = 0; i < tdsAll.length; i++) {\r\n\t\t\t\tif (tdsAll[i].hasAttribute('data-same-cell-before-division')) {\r\n\t\t\t\t\ttdsAll[i].removeAttribute('data-same-cell-before-division');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * function for run sorting table vertically\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tthis.sortableTableVerticalStart = function (e) {\r\n\t\t\tsortableTable.call(thisObject, e, 'vertical');\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * function for run sorting table horizontally\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tthis.sortableTableHorizontalStart = function (e) {\r\n\t\t\tsortableTable.call(thisObject, e, 'horizontal');\r\n\t\t};\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\treturn WPTB_SortTable;\r\n});\r\n","const WPTB_RecalculateIndexes = function (table) {\r\n    let trs = table.getElementsByTagName( 'tr' ),\r\n        tds, maxCols = 0, maxColsFull = 0, tdsArr = [];\r\n\r\n    for ( let i = 0; i < trs.length; i++ ) {\r\n        tds = trs[i].getElementsByTagName( 'td' );\r\n\r\n        if ( tdsArr[i] == undefined ) {\r\n            tdsArr[i] = [];\r\n        }\r\n\r\n        let jMainIter = 0;\r\n        for ( let j = 0; j < tds.length; j++ ) {\r\n            if ( tdsArr[i][j] != undefined ) {\r\n                for ( let y = 0; y < 100; y++ ) {\r\n                    if ( tdsArr[i][jMainIter] != undefined ) {\r\n                        jMainIter++;\r\n                        continue;\r\n                    }\r\n                    tdsArr[i][jMainIter] = tds[j];\r\n                    tds[j].dataset.xIndex = jMainIter;\r\n                    break;\r\n                }\r\n            } else {\r\n                tdsArr[i][j] = tds[j];\r\n                tds[j].dataset.xIndex = jMainIter;\r\n            }\r\n            tds[j].dataset.yIndex = i;\r\n\r\n            if ( tds[j].colSpan > 1 ) {\r\n                for ( let k = 1; k < tds[j].colSpan; k++ ) {\r\n                    jMainIter++;\r\n                    tdsArr[i][jMainIter] = 'tdDummy';\r\n                }\r\n            }\r\n\r\n            if ( tds[j].rowSpan > 1 ) {\r\n                for ( let x = 1; x < tds[j].rowSpan; x++ ) {\r\n                    if ( tdsArr[i + x] == undefined ) {\r\n                        tdsArr[i + x] = [];\r\n                    }\r\n                    for ( let z = 0; z < tds[j].colSpan; z++ ) {\r\n                        tdsArr[i + x][jMainIter - tds[j].colSpan + 1 + z ] = 'tdDummy';\r\n                    }\r\n                }\r\n            }\r\n            jMainIter++;\r\n        }\r\n\r\n        if ( tds.length > maxCols ) {\r\n            maxCols = tds.length;\r\n        }\r\n\r\n        if( i == 0 ) {\r\n            maxColsFull = jMainIter;\r\n        }\r\n    }\r\n    table.columns = maxCols;\r\n    table.maxCols = maxColsFull;\r\n}\r\n","/**\r\n * Responsive class assignment for frontend operations.\r\n *\r\n * This file can be used as an UMD.\r\n */\r\n(function assignToGlobal(key, context, factory) {\r\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// eslint-disable-next-line no-param-reassign\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_ResponsiveFrontend', self || global, () => {\r\n\t/**\r\n\t * Log a message to console.\r\n\t *\r\n\t * @param {string} message message to be logged\r\n\t * @param {string} type console log type (e.g info, warn, error)\r\n\t * @throws An error will be given for invalid type value\r\n\t */\r\n\tfunction logToConsole(message, type = 'log') {\r\n\t\tif (typeof process !== 'undefined' && process.env.NODE_ENV === 'development') {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tif (console[type]) {\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tconsole[type](`[WPTB]: ${message}`);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(`no logging type found with given type value of [${type}]`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Object implementation for cell element operations.\r\n\t * If an empty cellElement parameter is given, a fresh cell element will be created.\r\n\t *\r\n\t * @param {HTMLElement | null} cellElement cell element\r\n\t * @param {null | CellObject} reference main cell object if the current cell is a reference to that cell in cases like merged cells\r\n\t * @class\r\n\t */\r\n\tfunction CellObject(cellElement, reference = null) {\r\n\t\t// cell element\r\n\t\tthis.element = cellElement;\r\n\r\n\t\tthis.referenceObject = reference;\r\n\r\n\t\t// variable for deciding part of merged cells to be visible or not\r\n\t\tthis.mergedRenderStatus = true;\r\n\r\n\t\t// connected merged cell references\r\n\t\tthis.mergedCells = {\r\n\t\t\trow: [],\r\n\t\t\tcolumn: [],\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get merged render status.\r\n\t\t *\r\n\t\t * @return {boolean} render status\r\n\t\t */\r\n\t\tthis.getMergedRenderStatus = () => {\r\n\t\t\treturn this.mergedRenderStatus;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Set merged render status.\r\n\t\t *\r\n\t\t * @param {boolean} status render status\r\n\t\t */\r\n\t\tthis.setMergedRenderStatus = (status) => {\r\n\t\t\tthis.mergedRenderStatus = status;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add merged cells.\r\n\t\t *\r\n\t\t * @param {string} mergeType merge type\r\n\t\t * @param {CellObject} cellObj cell object instance\r\n\t\t */\r\n\t\tthis.addToMergedCells = (mergeType, cellObj) => {\r\n\t\t\tthis.mergedCells[mergeType].push(cellObj);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Determine if current cell is a reference to a main cell.\r\n\t\t *\r\n\t\t * @return {boolean} a reference or not\r\n\t\t */\r\n\t\tthis.isReference = () => {\r\n\t\t\treturn this.referenceObject !== null;\r\n\t\t};\r\n\r\n\t\tif (this.isReference()) {\r\n\t\t\tthis.element = cellElement.cloneNode(true);\r\n\t\t}\r\n\r\n\t\t// modifications object\r\n\t\t// this object will keep track of the modifications that has done to the cell to make sure we can roll them back to their original values\r\n\t\tthis.modifications = {};\r\n\r\n\t\t// spans object for cell's original merge values\r\n\t\tthis.spans = {\r\n\t\t\trow: 1,\r\n\t\t\tcol: 1,\r\n\t\t};\r\n\r\n\t\tthis.remainingSpans = {\r\n\t\t\trow: 0,\r\n\t\t\tcol: 0,\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Cache cell element's original span values.\r\n\t\t *\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.cacheSpanValues = () => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tObject.keys(this.spans).map((k) => {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.spans, k)) {\r\n\t\t\t\t\tconst defaultVal = this.spans[k];\r\n\r\n\t\t\t\t\tthis.spans[k] = this.element.getAttribute(`${k}Span`) || defaultVal;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tthis.cacheSpanValues();\r\n\r\n\t\t/**\r\n\t\t * Get original span value of cell object.\r\n\t\t *\r\n\t\t * @param {string} spanType span type, available values are row-column\r\n\t\t * @param {boolean} fromElement instead of original value, get the assigned span value from HTMLElement itself\r\n\t\t * @throws An error will be given for invalid span type\r\n\t\t */\r\n\t\tthis.getSpan = (spanType, fromElement = false) => {\r\n\t\t\tconst spanVal = fromElement ? this.getElement().getAttribute(`${spanType}Span`) : this.spans[spanType];\r\n\t\t\tif (spanVal) {\r\n\t\t\t\treturn spanVal;\r\n\t\t\t}\r\n\t\t\tthrow new Error(`no span value found with the given type of [${spanType}]`);\r\n\t\t};\r\n\r\n\t\tthis.getRemainingSpans = (spanType) => {\r\n\t\t\treturn this.remainingSpans[spanType];\r\n\t\t};\r\n\r\n\t\tthis.setRemainingSpans = (spanType, value) => {\r\n\t\t\tthis.remainingSpans[spanType] = value;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get cell element.\r\n\t\t *\r\n\t\t * @return {HTMLElement} cell element\r\n\t\t */\r\n\t\tthis.getElement = () => {\r\n\t\t\treturn this.element;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Create a cell element.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @return {HTMLTableDataCellElement} created cell element\r\n\t\t */\r\n\t\tthis.createCellElement = () => {\r\n\t\t\treturn document.createElement('td');\r\n\t\t};\r\n\r\n\t\t// create a new cell element if no cellElement argument is given with constructor function\r\n\t\tif (!cellElement) {\r\n\t\t\tthis.element = this.createCellElement();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Add attribute to cell element.\r\n\t\t *\r\n\t\t * This function have the ability to add/remove attributes from cell element.\r\n\t\t * All attributes modified with this function will be cached with their before value for an easy reset on demand.\r\n\t\t *\r\n\t\t * @param {string} attributeKey attribute name in camelCase format, for sub-keys, use dot object notation\r\n\t\t * @param {any} attributeValue attribute value\r\n\t\t * @param {boolean} [append=false] append the value or replace it\r\n\t\t * @param {string} [glue=,] glue to join attribute value if append option is enabled\r\n\t\t */\r\n\t\tthis.setAttribute = (attributeKey, attributeValue, append = false, glue = ',') => {\r\n\t\t\tlet defaultVal = this.getElement()[attributeKey];\r\n\r\n\t\t\t// if attribute value is a function or an object, it means we pulled a whole declaration instead of only inline attribute values, in that case, use getAttribute to get only inline values related to that attribute\r\n\t\t\tif (typeof defaultVal === 'function' || typeof defaultVal === 'object') {\r\n\t\t\t\tdefaultVal = this.getElement().getAttribute(attributeKey);\r\n\t\t\t}\r\n\r\n\t\t\t// if there is already a default value defined, use that instead\r\n\t\t\tif (this.modifications[attributeKey]) {\r\n\t\t\t\tdefaultVal = this.modifications[attributeKey].default;\r\n\t\t\t}\r\n\r\n\t\t\tlet currentVal = defaultVal;\r\n\r\n\t\t\t// join attributes\r\n\t\t\tif (append) {\r\n\t\t\t\tcurrentVal += `${currentVal}${glue}${attributeValue}`;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentVal = attributeValue;\r\n\t\t\t}\r\n\r\n\t\t\tthis.modifications[attributeKey] = { value: currentVal, default: defaultVal };\r\n\r\n\t\t\tthis.getElement()[attributeKey] = currentVal;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Set row/colspan for cell.\r\n\t\t *\r\n\t\t * @param {string} spanType span type\r\n\t\t * @param {number} value value to assign to span\r\n\t\t * @return {boolean} if any space left to render the element\r\n\t\t */\r\n\t\tthis.setSpan = (spanType, value) => {\r\n\t\t\t// working on main cell\r\n\t\t\tif (!this.isReference()) {\r\n\t\t\t\tconst valueToApply = this.getSpan(spanType) - value < 0 ? this.getSpan(spanType) : value;\r\n\r\n\t\t\t\tthis.setAttribute(`${spanType}Span`, valueToApply);\r\n\r\n\t\t\t\t// calculate remaining cells amount to merge in this span type\r\n\t\t\t\tthis.setRemainingSpans(spanType, this.getSpan(spanType) - valueToApply);\r\n\r\n\t\t\t\t// set visibility of connected merge group cells to false to not render them since we added necessary span values to main cell which will leak into their position\r\n\t\t\t\tfor (let mc = 0; mc < valueToApply - 1; mc += 1) {\r\n\t\t\t\t\tif (this.mergedCells[spanType] && this.mergedCells[spanType][mc]) {\r\n\t\t\t\t\t\tthis.mergedCells[spanType][mc].setMergedRenderStatus(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// working on reference\r\n\r\n\t\t\tif (!this.getMergedRenderStatus()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst remainingVal = this.referenceObject.getRemainingSpans(spanType);\r\n\r\n\t\t\t// no space left to put cell\r\n\t\t\tif (remainingVal === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst valueToApply = remainingVal - value < 0 ? remainingVal : value;\r\n\r\n\t\t\tconst remainingParentSpans = remainingVal - valueToApply;\r\n\t\t\tthis.referenceObject.setRemainingSpans(spanType, remainingParentSpans);\r\n\r\n\t\t\tthis.setAttribute(`${spanType}Span`, valueToApply);\r\n\r\n\t\t\t// change render status of remaining connected merge cells\r\n\t\t\tif (remainingParentSpans !== 0) {\r\n\t\t\t\tconst totalConnectedCells = this.referenceObject.mergedCells[spanType].length;\r\n\t\t\t\tconst startIndex = totalConnectedCells - remainingVal + 1;\r\n\t\t\t\tconst endIndex = startIndex + valueToApply - 1;\r\n\r\n\t\t\t\tfor (let mc = startIndex; mc < endIndex; mc += 1) {\r\n\t\t\t\t\tthis.mergedCells[spanType][mc].setMergedRenderStatus(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Reset a modified attribute to its default value\r\n\t\t *\r\n\t\t * @param {string} attributeKey attribute name\r\n\t\t */\r\n\t\tthis.resetAttribute = (attributeKey) => {\r\n\t\t\tif (this.modifications[attributeKey]) {\r\n\t\t\t\tthis.getElement()[attributeKey] = this.modifications[attributeKey].default;\r\n\t\t\t\tthis.modifications[attributeKey] = undefined;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Reset all modified attributes of cell element to their default values.\r\n\t\t */\r\n\t\tthis.resetAllAttributes = () => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tObject.keys(this.modifications).map((k) => {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.modifications, k)) {\r\n\t\t\t\t\tthis.resetAttribute(k);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tgetElement: this.getElement,\r\n\t\t\tel: this.element,\r\n\t\t\tsetAttribute: this.setAttribute,\r\n\t\t\tresetAllAttributes: this.resetAllAttributes,\r\n\t\t\tgetSpan: this.getSpan,\r\n\t\t\tsetSpan: this.setSpan,\r\n\t\t\tgetRemainingSpans: this.getRemainingSpans,\r\n\t\t\tsetRemainingSpans: this.setRemainingSpans,\r\n\t\t\tisReference: this.isReference,\r\n\t\t\taddToMergedCells: this.addToMergedCells,\r\n\t\t\tmergedCells: this.mergedCells,\r\n\t\t\tsetMergedRenderStatus: this.setMergedRenderStatus,\r\n\t\t\tgetMergedRenderStatus: this.getMergedRenderStatus,\r\n\t\t};\r\n\t}\r\n\r\n\tCellObject.spanTypes = { row: 'row', column: 'col' };\r\n\r\n\t/**\r\n\t * Object implementation for table element operations.\r\n\t *\r\n\t * @param {HTMLElement} tableEl table element\r\n\t * @return {Object} instance\r\n\t * @class\r\n\t */\r\n\tfunction TableObject(tableEl) {\r\n\t\t/**\r\n\t\t * Table element.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @type {HTMLElement}\r\n\t\t */\r\n\t\tthis.tableElement = tableEl;\r\n\r\n\t\t/**\r\n\t\t * Parsed table object.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tthis.parsedTable = [];\r\n\r\n\t\t/**\r\n\t\t * An array of created table rows elements that are id'd according to their index in array.\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tthis.rowCache = [];\r\n\r\n\t\t/**\r\n\t\t * Original table elements minus the cells.\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.originals = { rows: [] };\r\n\r\n\t\t/**\r\n\t\t * Row colors of original table.\r\n\t\t *\r\n\t\t * @type {{even: string, header: string, odd: string}}\r\n\t\t */\r\n\t\tthis.rowColors = {\r\n\t\t\theader: null,\r\n\t\t\teven: null,\r\n\t\t\todd: null,\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add cell to parsed array.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @param {number} r row id\r\n\t\t * @param {number} c column id\r\n\t\t * @param {CellObject} cellObject cell object to add to parsed array\r\n\t\t */\r\n\t\tthis.addToParsed = (r, c, cellObject) => {\r\n\t\t\tif (!this.parsedTable[r]) {\r\n\t\t\t\tthis.parsedTable[r] = [];\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedTable[r][c] = cellObject;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Assign table cells into row and column numbers.\r\n\t\t *\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.parseTable = () => {\r\n\t\t\tconst rows = Array.from(this.tableElement.querySelectorAll('tr'));\r\n\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\trows.map((r, ri) => {\r\n\t\t\t\t// cache original rows for future use\r\n\t\t\t\tthis.originals.rows.push(r);\r\n\r\n\t\t\t\tconst cells = Array.from(r.querySelectorAll('td'));\r\n\r\n\t\t\t\tlet currentIndex = 0;\r\n\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\tcells.map((c, ci) => {\r\n\t\t\t\t\tconst currentCellObject = new CellObject(c);\r\n\t\t\t\t\tthis.addToParsed(ri, currentIndex, currentCellObject);\r\n\t\t\t\t\tcurrentIndex += 1;\r\n\r\n\t\t\t\t\tconst spanRow = currentCellObject.getSpan(CellObject.spanTypes.row);\r\n\t\t\t\t\tconst spanCol = currentCellObject.getSpan(CellObject.spanTypes.column);\r\n\r\n\t\t\t\t\tif (spanRow > 1) {\r\n\t\t\t\t\t\tfor (let sr = 1; sr < spanRow; sr += 1) {\r\n\t\t\t\t\t\t\tconst referenceCell = new CellObject(c, currentCellObject);\r\n\t\t\t\t\t\t\tcurrentCellObject.addToMergedCells('row', referenceCell);\r\n\t\t\t\t\t\t\tthis.addToParsed(ri + sr, ci, referenceCell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (spanCol > 1) {\r\n\t\t\t\t\t\tfor (let sc = 1; sc < spanCol; sc += 1) {\r\n\t\t\t\t\t\t\tconst referenceCell = new CellObject(c, currentCellObject);\r\n\t\t\t\t\t\t\tcurrentCellObject.addToMergedCells('column', referenceCell);\r\n\t\t\t\t\t\t\tthis.addToParsed(ri, currentIndex, referenceCell);\r\n\t\t\t\t\t\t\tcurrentIndex += 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.parseRowColors(rows);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Parse row colors of original table for futures uses.\r\n\t\t *\r\n\t\t * @param {Array<HTMLElement>} rows html row elements\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.parseRowColors = (rows) => {\r\n\t\t\tif (!rows || rows.length <= 0) {\r\n\t\t\t\tlogToConsole('no rows are found to parse their colors', 'error');\r\n\t\t\t}\r\n\r\n\t\t\t// get row colors if they are defined as datasets on table element\r\n\t\t\tconst headerDatasetColor = this.tableElement.dataset.wptbHeaderBackgroundColor;\r\n\t\t\tconst evenRowDatasetColor = this.tableElement.dataset.wptbEvenRowBackgroundColor;\r\n\t\t\tconst oddRowDatasetColor = this.tableElement.dataset.wptbOddRowBackgroundColor;\r\n\r\n\t\t\t// header row color\r\n\t\t\tthis.rowColors.header =\r\n\t\t\t\t// eslint-disable-next-line no-nested-ternary\r\n\t\t\t\theaderDatasetColor !== undefined\r\n\t\t\t\t\t? headerDatasetColor\r\n\t\t\t\t\t: rows[0].style.backgroundColor === ''\r\n\t\t\t\t\t? null\r\n\t\t\t\t\t: rows[0].style.backgroundColor;\r\n\r\n\t\t\t// calculate needed number of rows to get even and odd row background colors\r\n\t\t\t// eslint-disable-next-line no-nested-ternary\r\n\t\t\tconst rowsNeeded = rows.length / 3 >= 1 ? 0 : rows.length === 1 ? 2 : (rows.length - 1) % 2;\r\n\r\n\t\t\t// create additional rows and add them to table to get their row background colors since table row count may be lower to get even/odd rows\r\n\t\t\tfor (let rn = 0; rn < rowsNeeded; rn += 1) {\r\n\t\t\t\tconst tempRow = document.createElement('tr');\r\n\r\n\t\t\t\tthis.tableElement.querySelector('tbody').appendChild(tempRow);\r\n\t\t\t\trows.push(tempRow);\r\n\t\t\t}\r\n\r\n\t\t\t// even & odd row colors\r\n\t\t\t// dataset colors have priority over colors gathered from computed row styles\r\n\t\t\tthis.rowColors.even = evenRowDatasetColor || getComputedStyle(rows[1]).backgroundColor;\r\n\t\t\tthis.rowColors.odd = evenRowDatasetColor ? oddRowDatasetColor : getComputedStyle(rows[2]).backgroundColor;\r\n\r\n\t\t\t// remove created rows from DOM\r\n\t\t\tfor (let r = 0; r < rowsNeeded; r += 1) {\r\n\t\t\t\trows[rows.length - (r + 1)].remove();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add a row to the table.\r\n\t\t *\r\n\t\t * @param {Array} classList an array of class names to be added to row\r\n\t\t * @param {boolean} fromOriginals use rows from original table instead of creating a new one\r\n\t\t * @param {number} originalIndex original row index\r\n\t\t */\r\n\t\tthis.addRow = (classList, fromOriginals = false, originalIndex = 0) => {\r\n\t\t\tif (!Array.isArray(classList)) {\r\n\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\tclassList = [classList];\r\n\t\t\t}\r\n\r\n\t\t\tconst tableBody = this.tableElement.querySelector('tbody');\r\n\t\t\tlet tempRow;\r\n\r\n\t\t\tif (!fromOriginals) {\r\n\t\t\t\tconst range = document.createRange();\r\n\t\t\t\trange.setStart(tableBody, 0);\r\n\t\t\t\t// eslint-disable-next-line prefer-destructuring\r\n\t\t\t\ttempRow = range.createContextualFragment(`<tr class=\"${classList.join(' ')}\"></tr>`).childNodes[0];\r\n\t\t\t} else {\r\n\t\t\t\ttempRow = this.originals.rows[originalIndex];\r\n\t\t\t}\r\n\r\n\t\t\t// add row to table body\r\n\t\t\ttableBody.appendChild(tempRow);\r\n\r\n\t\t\t// cache row for future use\r\n\t\t\tthis.rowCache.push(tempRow);\r\n\r\n\t\t\treturn { el: tempRow, id: this.rowCache.length - 1 };\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Clear the contents of table element.\r\n\t\t */\r\n\t\tthis.clearTable = () => {\r\n\t\t\t// clear row cache\r\n\t\t\tthis.rowCache = [];\r\n\r\n\t\t\t// clear children of `tbody` element\r\n\t\t\tthis.tableElement.querySelector('tbody').innerHTML = '';\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get row element from cache.\r\n\t\t *\r\n\t\t * @param {number} id row id\r\n\t\t * @return {null|HTMLElement} row element if present or null if not\r\n\t\t */\r\n\t\tthis.getRow = (id) => {\r\n\t\t\tif (this.rowCache[id]) {\r\n\t\t\t\treturn this.rowCache[id];\r\n\t\t\t}\r\n\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tlogToConsole(`no row with id [${id}] found in the cache.`, 'warn');\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get maximum number of rows available at table.\r\n\t\t *\r\n\t\t * @return {number} maximum amount of rows\r\n\t\t */\r\n\t\tthis.maxRows = () => {\r\n\t\t\treturn this.parsedTable.length;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get the number of maximum available column count in the table.\r\n\t\t *\r\n\t\t * @param {boolean} mergedHeader if header is merged or not\r\n\t\t * @return {number} maximum available column count\r\n\t\t */\r\n\t\tthis.maxColumns = (mergedHeader) => {\r\n\t\t\tif (mergedHeader) {\r\n\t\t\t\treturn this.parsedTable[0].length;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.parsedTable.reduce((p, c) => {\r\n\t\t\t\tif (c.length > p) {\r\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tp = c.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn p;\r\n\t\t\t}, 0);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get the table cell at specified row-column location.\r\n\t\t *\r\n\t\t * As in arrays, row and column numbering starts from number 0.\r\n\t\t *\r\n\t\t * @param {number} r row number\r\n\t\t * @param {number} c column number\r\n\t\t * @param {boolean} returnObject return object instead of HTMLElement\r\n\t\t * @return {HTMLElement | null | CellObject} element if address is possible, null if not\r\n\t\t */\r\n\t\tthis.getCell = (r, c, returnObject = false) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (this.parsedTable[r][c]) {\r\n\t\t\t\t\tif (returnObject) {\r\n\t\t\t\t\t\treturn this.parsedTable[r][c];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.parsedTable[r][c].el;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tlogToConsole(`no cell found at the given address of [${r}-${c}]`, 'warn');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tlogToConsole(`no cell found at the given address of [${r}-${c}]`, 'warn');\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get cells at a given row.\r\n\t\t *\r\n\t\t * @param {number} rowId row id\r\n\t\t * @param {boolean} returnObj return an array of CellObject instead\r\n\t\t * @return {Array} cells in row\r\n\t\t */\r\n\t\tthis.getCellsAtRow = (rowId, returnObj = false) => {\r\n\t\t\tconst cells = [];\r\n\t\t\tfor (let c = 0; c < this.maxColumns(); c += 1) {\r\n\t\t\t\tconst tempCell = this.getCell(rowId, c, returnObj);\r\n\t\t\t\tif (tempCell) {\r\n\t\t\t\t\tcells.push(tempCell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cells;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Append the cell with given ids to a cached row\r\n\t\t *\r\n\t\t * @param {number} cellRowId cell row id\r\n\t\t * @param {number} cellColumnId cell column id\r\n\t\t * @param {number} rowId id of row in row cache\r\n\t\t */\r\n\t\tthis.appendToRow = (cellRowId, cellColumnId, rowId) => {\r\n\t\t\tconst cachedRow = this.getRow(rowId);\r\n\t\t\tconst cell = this.getCell(cellRowId, cellColumnId, true);\r\n\r\n\t\t\tif (cell && cachedRow) {\r\n\t\t\t\tcachedRow.appendChild(cell.getElement());\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Append html element to a cached row.\r\n\t\t *\r\n\t\t * @param {HTMLElement} el element\r\n\t\t * @param {number} rowId if of row in row cache\r\n\t\t */\r\n\t\tthis.appendElementToRow = (el, rowId) => {\r\n\t\t\tconst cachedRow = this.getRow(rowId);\r\n\r\n\t\t\tif (el && cachedRow) {\r\n\t\t\t\tcachedRow.appendChild(el);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add cell object to a cached row.\r\n\t\t *\r\n\t\t * @param {CellObject} cellObj cell object\r\n\t\t * @param {number} rowId row id\r\n\t\t */\r\n\t\tthis.appendObjectToRow = (cellObj, rowId) => {\r\n\t\t\tconst cachedRow = this.getRow(rowId);\r\n\t\t\tif (cellObj && cachedRow) {\r\n\t\t\t\tcachedRow.appendChild(cellObj.getElement());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.getParsedTable = () => {\r\n\t\t\treturn this.parsedTable;\r\n\t\t};\r\n\r\n\t\tthis.parseTable();\r\n\r\n\t\treturn {\r\n\t\t\tmaxRows: this.maxRows,\r\n\t\t\tmaxColumns: this.maxColumns,\r\n\t\t\taddRow: this.addRow,\r\n\t\t\tclearTable: this.clearTable,\r\n\t\t\tgetCell: this.getCell,\r\n\t\t\tappendToRow: this.appendToRow,\r\n\t\t\tappendElementToRow: this.appendElementToRow,\r\n\t\t\tappendObjectToRow: this.appendObjectToRow,\r\n\t\t\tgetCellsAtRow: this.getCellsAtRow,\r\n\t\t\tel: this.tableElement,\r\n\t\t\trowColors: this.rowColors,\r\n\t\t\tgetParsedTable: this.getParsedTable,\r\n\t\t};\r\n\t}\r\n\r\n\t// default options for responsive class\r\n\tconst responsiveClassDefaultOptions = {\r\n\t\tquery: '.wptb-preview-table',\r\n\t\tdefaultClasses: ['wptb-plugin-responsive-base'],\r\n\t\tbindToResize: false,\r\n\t};\r\n\r\n\t/**\r\n\t * Class for handling operations related to responsive functionalities of tables.\r\n\t *\r\n\t * @class\r\n\t * @param {Object} options options object\r\n\t */\r\n\tfunction ResponsiveFront(options = {}) {\r\n\t\t// merge default options with user sent options\r\n\t\t// this.options = { ...responsiveClassDefaultOptions, ...options };\r\n\t\tthis.options = { ...responsiveClassDefaultOptions, ...options };\r\n\r\n\t\tthis.elements = Array.from(document.querySelectorAll(this.options.query));\r\n\r\n\t\tthis.elementObjects = this.elements.map((e) => {\r\n\t\t\treturn {\r\n\t\t\t\tel: e,\r\n\t\t\t\ttableObject: new TableObject(e),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Whether given element's background is transparent or not.\r\n\t\t *\r\n\t\t * @param {HTMLElement} element html element\r\n\t\t * @return {boolean} transparent or not\r\n\t\t */\r\n\t\tconst isBackgroundTransparent = (element) => {\r\n\t\t\tlet status = false;\r\n\t\t\tif (element.style.backgroundColor) {\r\n\t\t\t\tconst regexp = new RegExp(/^rgba\\(\\s?0\\s?,\\s?0\\s?,\\s?0\\s?,\\s?0\\s?\\)$/g);\r\n\r\n\t\t\t\tstatus = element.style.backgroundColor.match(regexp) !== null;\r\n\t\t\t}\r\n\r\n\t\t\treturn status;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Bind rebuilding of tables to window resize event.\r\n\t\t */\r\n\t\tthis.bindRebuildToResize = () => {\r\n\t\t\t// eslint-disable-next-line @wordpress/no-global-event-listener\r\n\t\t\twindow.addEventListener('resize', () => {\r\n\t\t\t\tthis.rebuildTables();\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get responsive directives of table element.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t * @return {Object | null} JSON representation of the directive element, if not available, null will be returned\r\n\t\t */\r\n\t\tthis.getDirective = (el) => {\r\n\t\t\tconst directiveString = el.dataset.wptbResponsiveDirectives;\r\n\r\n\t\t\tif (!directiveString) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn JSON.parse(atob(directiveString));\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add default classes to rebuilt tables.\r\n\t\t *\r\n\t\t * This classes are added to lay out a base style for the responsive table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t */\r\n\t\tthis.addDefaultClasses = (el) => {\r\n\t\t\tel.classList.add(this.options.defaultClasses);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Remove default classes from target table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t */\r\n\t\tthis.removeDefaultClasses = (el) => {\r\n\t\t\tel.classList.remove(this.options.defaultClasses);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Scroll operation related adjustments to responsive process.\r\n\t\t *\r\n\t\t * @param {Node} tableElement table element\r\n\t\t * @param {boolean} revertToOriginal revert to original state\r\n\t\t */\r\n\t\tconst scrollOperations = (tableElement, revertToOriginal) => {\r\n\t\t\tconst scrollFunctionalityStatus = tableElement.dataset.wptbHorizontalScrollStatus;\r\n\r\n\t\t\tif (scrollFunctionalityStatus) {\r\n\t\t\t\tconst matrixContainer = tableElement.parentNode;\r\n\t\t\t\tif (revertToOriginal) {\r\n\t\t\t\t\tconst storedMaxWidth = tableElement.dataset.wptbTableContainerMaxWidth;\r\n\r\n\t\t\t\t\tmatrixContainer.style.width = `${storedMaxWidth}px`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmatrixContainer.style.width = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild table in auto mode.\r\n\t\t *\r\n\t\t * Main characteristic of auto mode is table is rebuilt by stacking rows/columns on top of each other, leaving minimal effort from user to create a responsive table at breakpoints.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableEl table element\r\n\t\t * @param {string} sizeRange range id for current screen size\r\n\t\t * @param {Object} autoOption mode options\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t */\r\n\t\tthis.autoBuild = (tableEl, sizeRange, autoOption, tableObj) => {\r\n\t\t\t// base options\r\n\t\t\tconst direction = autoOption.cellStackDirection[sizeRange];\r\n\t\t\t// eslint-disable-next-line prefer-destructuring\r\n\t\t\tconst topRowAsHeader = autoOption.topRowAsHeader[sizeRange];\r\n\t\t\tconst cellsPerRow = autoOption.cellsPerRow[sizeRange];\r\n\r\n\t\t\t// new options\r\n\t\t\tconst staticTopRow = autoOption.staticTopRow ? autoOption.staticTopRow[sizeRange] : false;\r\n\t\t\tconst repeatMergedHeader =\r\n\t\t\t\t// check for undefined for backward compatibility of older tables\r\n\t\t\t\t/* eslint-disable no-nested-ternary */\r\n\t\t\t\tautoOption.repeatMergedHeader === undefined || autoOption.repeatMergedHeader[sizeRange] === true\r\n\t\t\t\t\t? topRowAsHeader\r\n\t\t\t\t\t\t? autoOption.repeatMergedHeader\r\n\t\t\t\t\t\t\t? autoOption.repeatMergedHeader[sizeRange]\r\n\t\t\t\t\t\t\t: true\r\n\t\t\t\t\t\t: false\r\n\t\t\t\t\t: false;\r\n\t\t\t/* eslint-enable no-nested-ternary */\r\n\r\n\t\t\ttableObj.clearTable();\r\n\r\n\t\t\tif (sizeRange === 'desktop') {\r\n\t\t\t\tscrollOperations(tableEl, true);\r\n\t\t\t\tthis.buildDefault(tableObj);\r\n\t\t\t\tthis.removeDefaultClasses(tableEl);\r\n\t\t\t} else {\r\n\t\t\t\tscrollOperations(tableEl, false);\r\n\t\t\t\tthis.autoDirectionBuild(\r\n\t\t\t\t\ttableObj,\r\n\t\t\t\t\tdirection,\r\n\t\t\t\t\ttopRowAsHeader,\r\n\t\t\t\t\tstaticTopRow,\r\n\t\t\t\t\tcellsPerRow,\r\n\t\t\t\t\trepeatMergedHeader\r\n\t\t\t\t);\r\n\t\t\t\tthis.addDefaultClasses(tableEl);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild table with a direction to read cells.\r\n\t\t *\r\n\t\t * Direction in question in here is either by row or column:\r\n\t\t * * row: cells will be read row by row, in each row starting from the first column\r\n\t\t * * column: cells will be read column by column, in each column starting from the first row of the table\r\n\t\t *\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t * @param {string} direction direction to read cells, possible options [row, column]\r\n\t\t * @param {boolean} topRowAsHeader use top row as header\r\n\t\t * @param {boolean} staticTopRow use top row as static\r\n\t\t * @param {number} cellsPerRow cells per row\r\n\t\t * @param {boolean} repeatMergedHeader repeat merged top header if top row as header option is enabled\r\n\t\t */\r\n\t\tthis.autoDirectionBuild = (\r\n\t\t\ttableObj,\r\n\t\t\tdirection,\r\n\t\t\ttopRowAsHeader = false,\r\n\t\t\tstaticTopRow = false,\r\n\t\t\tcellsPerRow = 1,\r\n\t\t\trepeatMergedHeader = true\r\n\t\t) => {\r\n\t\t\tconst rows = tableObj.maxRows();\r\n\t\t\tconst columns = tableObj.maxColumns();\r\n\t\t\tconst isRowStacked = direction === 'row';\r\n\r\n\t\t\t// build table with top row as header\r\n\t\t\tif (topRowAsHeader) {\r\n\t\t\t\tthis.headerBuild(tableObj, direction, cellsPerRow, repeatMergedHeader);\r\n\t\t\t} else {\r\n\t\t\t\t// cell stack direction is selected as row\r\n\t\t\t\t// for future new functionality additions, keep different cell stack direction logic separate instead of generalizing the inner logic\r\n\t\t\t\t// eslint-disable-next-line no-lonely-if\r\n\t\t\t\tif (isRowStacked) {\r\n\t\t\t\t\tconst allCellsByRow = [];\r\n\t\t\t\t\tlet rowStartIndex = 0;\r\n\r\n\t\t\t\t\t// static top row option is enabled\r\n\t\t\t\t\tif (staticTopRow) {\r\n\t\t\t\t\t\tconst topCells = tableObj.getCellsAtRow(0, true);\r\n\r\n\t\t\t\t\t\tconst baseCells = topCells.filter((c) => !c.isReference());\r\n\r\n\t\t\t\t\t\tif (baseCells.length > 0) {\r\n\t\t\t\t\t\t\trowStartIndex += 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\tbaseCells.map((b) => {\r\n\t\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t\ttableObj.appendObjectToRow(b, rowObj.id);\r\n\r\n\t\t\t\t\t\t\tif (!b.el.style.backgroundColor || isBackgroundTransparent(b.el)) {\r\n\t\t\t\t\t\t\t\tconst bgColor = tableObj.rowColors.header\r\n\t\t\t\t\t\t\t\t\t? tableObj.rowColors.header\r\n\t\t\t\t\t\t\t\t\t: getComputedStyle(rowObj.el).backgroundColor;\r\n\t\t\t\t\t\t\t\tb.setAttribute('style', `background-color: ${bgColor}`, true, ';');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\r\n\t\t\t\t\t\t\tb.setAttribute('colSpan', cellsPerRow);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// get cells by reading row by row\r\n\t\t\t\t\tfor (let r = rowStartIndex; r < rows; r += 1) {\r\n\t\t\t\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\t\t\t\ttableObj.getCellsAtRow(r, true).forEach((c) => {\r\n\t\t\t\t\t\t\t// only use non reference cells to avoid duplication for non top row as header tables\r\n\t\t\t\t\t\t\tif (!c.isReference()) {\r\n\t\t\t\t\t\t\t\tallCellsByRow.push(c);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst cellCount = allCellsByRow.length;\r\n\r\n\t\t\t\t\tfor (let c = 0, r = 0; c < cellCount; c += cellsPerRow, r += 1) {\r\n\t\t\t\t\t\t// const rowId = tableObj.addRow('wptb-row').id;\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t// place cells by 'cells by row' option value\r\n\t\t\t\t\t\tfor (let pR = 0; pR < cellsPerRow; pR += 1) {\r\n\t\t\t\t\t\t\tconst tempCell = allCellsByRow[c + pR];\r\n\r\n\t\t\t\t\t\t\tif (tempCell) {\r\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowObj.id);\r\n\r\n\t\t\t\t\t\t\t\ttempCell.resetAllAttributes();\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('style', 'width: 100% !important', true, ';');\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('colSpan', 1);\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('rowSpan', 1);\r\n\r\n\t\t\t\t\t\t\t\tif (!tempCell.el.style.backgroundColor || isBackgroundTransparent(tempCell.el)) {\r\n\t\t\t\t\t\t\t\t\tconst currentTableColor =\r\n\t\t\t\t\t\t\t\t\t\ttableObj.rowColors[(rowStartIndex + r) % 2 === 0 ? 'odd' : 'even'];\r\n\t\t\t\t\t\t\t\t\ttempCell.el.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\tcurrentTableColor || getComputedStyle(rowObj.el).backgroundColor;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// preserve original row colors for even and odd rows\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// cell stack direction is selected as column\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst allCellsByCol = [];\r\n\t\t\t\t\tlet rowStartIndex = 0;\r\n\r\n\t\t\t\t\t// static top row option is enabled\r\n\t\t\t\t\tif (staticTopRow) {\r\n\t\t\t\t\t\tconst topCells = tableObj.getCellsAtRow(0, true);\r\n\r\n\t\t\t\t\t\tconst baseCells = topCells.filter((t) => !t.isReference());\r\n\r\n\t\t\t\t\t\tif (baseCells.length > 0) {\r\n\t\t\t\t\t\t\trowStartIndex += 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\tbaseCells.map((b) => {\r\n\t\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t\ttableObj.appendObjectToRow(b, rowObj.id);\r\n\r\n\t\t\t\t\t\t\tif (!b.el.style.backgroundColor || isBackgroundTransparent(b.el)) {\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\t\t\tb.el.style.backgroundColor = tableObj.rowColors.header\r\n\t\t\t\t\t\t\t\t\t? tableObj.rowColors.header\r\n\t\t\t\t\t\t\t\t\t: getComputedStyle(rowObj.el).backgroundColor;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\r\n\t\t\t\t\t\t\tb.setAttribute('colSpan', cellsPerRow);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// read all cells column by column\r\n\t\t\t\t\tfor (let c = 0; c < columns; c += 1) {\r\n\t\t\t\t\t\tfor (let r = rowStartIndex; r < rows; r += 1) {\r\n\t\t\t\t\t\t\tconst tCell = tableObj.getCell(r, c, true);\r\n\t\t\t\t\t\t\t// only use non reference cells to avoid duplication for non top row as header tables\r\n\t\t\t\t\t\t\tif (tCell && !tCell.isReference()) {\r\n\t\t\t\t\t\t\t\tallCellsByCol.push(tCell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst cellCount = allCellsByCol.length;\r\n\r\n\t\t\t\t\tfor (let c = 0, r = 0; c < cellCount; c += cellsPerRow, r += 1) {\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\tfor (let cR = 0; cR < cellsPerRow; cR += 1) {\r\n\t\t\t\t\t\t\tconst tempCell = allCellsByCol[c + cR];\r\n\r\n\t\t\t\t\t\t\tif (tempCell) {\r\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowObj.id);\r\n\r\n\t\t\t\t\t\t\t\ttempCell.resetAllAttributes();\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('style', 'width: 100% !important', true, ';');\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('colSpan', 1);\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('rowSpan', 1);\r\n\r\n\t\t\t\t\t\t\t\tif (!tempCell.el.style.backgroundColor || isBackgroundTransparent(tempCell.el)) {\r\n\t\t\t\t\t\t\t\t\tconst currentTableColor =\r\n\t\t\t\t\t\t\t\t\t\ttableObj.rowColors[(rowStartIndex + r) % 2 === 0 ? 'odd' : 'even'];\r\n\t\t\t\t\t\t\t\t\ttempCell.el.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\tcurrentTableColor || getComputedStyle(rowObj.el).backgroundColor;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// preserve original row colors for even and odd rows\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Build table with top row assigned as header.\r\n\t\t *\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t * @param {string} direction cell stack direction, possible options are [row, column]\r\n\t\t * @param {number} itemsPerHeader items bound to each header element\r\n\t\t * @param {boolean} repeatMergedHeader repeat merged header\r\n\t\t */\r\n\t\tthis.headerBuild = (tableObj, direction, itemsPerHeader = 1, repeatMergedHeader = true) => {\r\n\t\t\t// cells at header\r\n\t\t\t// applying header row color to cells\r\n\t\t\tconst headerCells = tableObj.getCellsAtRow(0, true).map((h) => {\r\n\t\t\t\th.resetAllAttributes();\r\n\t\t\t\tif (!h.el.style.backgroundColor || isBackgroundTransparent(h.el)) {\r\n\t\t\t\t\th.setAttribute('style', `background-color: ${tableObj.rowColors.header}`, true, ';');\r\n\t\t\t\t}\r\n\t\t\t\treturn h;\r\n\t\t\t});\r\n\r\n\t\t\tconst stackedAsColumn = direction === 'column';\r\n\r\n\t\t\t// row count\r\n\t\t\tconst rows = tableObj.maxRows();\r\n\t\t\t// column count\r\n\t\t\tconst columns = tableObj.maxColumns();\r\n\r\n\t\t\tconst rowBorderStyle = '3px solid gray';\r\n\r\n\t\t\t// stack direction is column\r\n\t\t\tif (stackedAsColumn) {\r\n\t\t\t\t/**\r\n\t\t\t\t * Add header cells as new row to table.\r\n\t\t\t\t *\r\n\t\t\t\t * @param {boolean} addBorder add top border to header row\r\n\t\t\t\t */\r\n\t\t\t\t// eslint-disable-next-line no-inner-declarations\r\n\t\t\t\tfunction addHeaderCells(addBorder = false) {\r\n\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\tif (addBorder) {\r\n\t\t\t\t\t\trowObj.el.style.borderTop = rowBorderStyle;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\theaderCells.map((h) => {\r\n\t\t\t\t\t\t// clone header cell to reuse it for multiple rows\r\n\t\t\t\t\t\tconst cellClone = h.el.cloneNode(true);\r\n\t\t\t\t\t\ttableObj.appendElementToRow(cellClone, rowObj.id);\r\n\t\t\t\t\t\tif (!cellClone.style.backgroundColor || isBackgroundTransparent(cellClone)) {\r\n\t\t\t\t\t\t\tcellClone.style.backgroundColor = `${getComputedStyle(rowObj.el).backgroundColor}`;\r\n\t\t\t\t\t\t\tif (cellClone.style.backgroundColor) cellClone.style.backgroundColor += ' !important';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// count of header rows that will be created\r\n\t\t\t\tlet headerCount = Math.ceil((rows - 1) / itemsPerHeader);\r\n\r\n\t\t\t\t// in a situation where no cells are bind to header, only render header\r\n\t\t\t\theaderCount = headerCount === 0 ? 1 : headerCount;\r\n\r\n\t\t\t\t// row index on original table\r\n\t\t\t\tlet currentOriginalRow = 1;\r\n\t\t\t\tfor (let r = 0; r < headerCount; r += 1) {\r\n\t\t\t\t\t// create header row and add to table\r\n\t\t\t\t\taddHeaderCells(r > 0);\r\n\t\t\t\t\tfor (let c = 0; c < itemsPerHeader; c += 1) {\r\n\t\t\t\t\t\t// break iteration when current row surpasses original row amount\r\n\t\t\t\t\t\tif (currentOriginalRow >= rows) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t// apply row color relative to current header row\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\t\t\t\t\t\tfor (let cc = 0; cc < columns; cc += 1) {\r\n\t\t\t\t\t\t\tconst currentCell = tableObj.getCell(currentOriginalRow, cc, true);\r\n\r\n\t\t\t\t\t\t\tif (currentCell) {\r\n\t\t\t\t\t\t\t\tcurrentCell.resetAllAttributes();\r\n\r\n\t\t\t\t\t\t\t\t// status to decide whether render cell or not\r\n\t\t\t\t\t\t\t\tlet cellAddStatus = true;\r\n\r\n\t\t\t\t\t\t\t\tconst rowSpan = currentCell.getSpan(CellObject.spanTypes.row);\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\r\n\t\t\t\t\t\t\t\tconst colSpan = currentCell.getSpan(CellObject.spanTypes.column);\r\n\r\n\t\t\t\t\t\t\t\tif (rowSpan > 1) {\r\n\t\t\t\t\t\t\t\t\t// items remaining in current header\r\n\t\t\t\t\t\t\t\t\tconst remainingItems = itemsPerHeader - c;\r\n\r\n\t\t\t\t\t\t\t\t\t// calculate whether to apply full rowspan value or remaining item value depending on the current position of the cell\r\n\t\t\t\t\t\t\t\t\tconst currentRowSpan = Math.min(rowSpan, remainingItems);\r\n\r\n\t\t\t\t\t\t\t\t\tcellAddStatus = currentCell.setSpan(CellObject.spanTypes.row, currentRowSpan);\r\n\t\t\t\t\t\t\t\t\t// reset render status of cell to visible for future use\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setMergedRenderStatus(true);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (cellAddStatus) {\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t!currentCell.el.style.backgroundColor ||\r\n\t\t\t\t\t\t\t\t\t\tisBackgroundTransparent(currentCell.el)\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute(\r\n\t\t\t\t\t\t\t\t\t\t\t'style',\r\n\t\t\t\t\t\t\t\t\t\t\t`background-color: ${tableObj.rowColors[c % 2 === 0 ? 'even' : 'odd']}`,\r\n\t\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t\t';'\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttableObj.appendObjectToRow(currentCell, rowObj.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentOriginalRow += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// stack direction is row\r\n\t\t\t\t// number of headers that will be created\r\n\t\t\t\tlet headerCount = Math.ceil((rows - 1) / itemsPerHeader);\r\n\r\n\t\t\t\t// in a situation where no cells are bind to header, only render header\r\n\t\t\t\theaderCount = headerCount === 0 ? 1 : headerCount;\r\n\r\n\t\t\t\tlet currentOriginalRow = 1;\r\n\r\n\t\t\t\tfor (let hc = 0; hc < headerCount; hc += 1) {\r\n\t\t\t\t\tfor (let c = 0; c < columns; c += 1) {\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\tif (hc > 0 && c === 0) {\r\n\t\t\t\t\t\t\trowObj.el.style.borderTop = rowBorderStyle;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (repeatMergedHeader || hc === 0) {\r\n\t\t\t\t\t\t\tconst headerCellObject = tableObj.getCell(0, c, true);\r\n\t\t\t\t\t\t\t// const clonedHeaderCell = headerCells[c]?.el.cloneNode(true);\r\n\r\n\t\t\t\t\t\t\tif (!headerCellObject.isReference()) {\r\n\t\t\t\t\t\t\t\tconst clonedHeaderCell = headerCellObject.el.cloneNode(true);\r\n\r\n\t\t\t\t\t\t\t\t// apply header row color to header cell\r\n\t\t\t\t\t\t\t\tclonedHeaderCell.style.backgroundColor = `${tableObj.rowColors.header} !important`;\r\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(clonedHeaderCell, rowObj.id);\r\n\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t!clonedHeaderCell.style.backgroundColor ||\r\n\t\t\t\t\t\t\t\t\tisBackgroundTransparent(clonedHeaderCell)\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tclonedHeaderCell.style.backgroundColor = `${\r\n\t\t\t\t\t\t\t\t\t\tgetComputedStyle(rowObj.el).backgroundColor\r\n\t\t\t\t\t\t\t\t\t}`;\r\n\t\t\t\t\t\t\t\t\tif (clonedHeaderCell.style.backgroundColor)\r\n\t\t\t\t\t\t\t\t\t\tclonedHeaderCell.style.backgroundColor += ' !important';\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (!repeatMergedHeader) {\r\n\t\t\t\t\t\t\t\t\tclonedHeaderCell.setAttribute('rowSpan', columns * headerCount);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tclonedHeaderCell.setAttribute('rowSpan', clonedHeaderCell.getAttribute('colSpan'));\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tclonedHeaderCell.setAttribute('colSpan', 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// clear out row color to override row color with cell colors\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = '#ffffff00';\r\n\r\n\t\t\t\t\t\tfor (let r = 0; r < itemsPerHeader; r += 1) {\r\n\t\t\t\t\t\t\tif (currentOriginalRow + r >= rows) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// const currentCell = tableObj.appendToRow(currentOriginalRow + r, c, rowObj.id);\r\n\t\t\t\t\t\t\tconst currentCell = tableObj.getCell(currentOriginalRow + r, c, true);\r\n\r\n\t\t\t\t\t\t\tif (currentCell) {\r\n\t\t\t\t\t\t\t\tcurrentCell.resetAllAttributes();\r\n\r\n\t\t\t\t\t\t\t\tlet cellAddStatus = true;\r\n\r\n\t\t\t\t\t\t\t\tconst rowSpan = currentCell.getSpan(CellObject.spanTypes.row);\r\n\t\t\t\t\t\t\t\tconst colSpan = currentCell.getSpan(CellObject.spanTypes.column);\r\n\r\n\t\t\t\t\t\t\t\tif (rowSpan > 1 || colSpan > 1) {\r\n\t\t\t\t\t\t\t\t\tconst remainingItems = itemsPerHeader - r;\r\n\r\n\t\t\t\t\t\t\t\t\tconst currentRowSpan = Math.min(rowSpan, remainingItems);\r\n\r\n\t\t\t\t\t\t\t\t\tcellAddStatus = currentCell.setSpan(CellObject.spanTypes.row, currentRowSpan);\r\n\r\n\t\t\t\t\t\t\t\t\tconst rS = currentCell.el.getAttribute('rowSpan');\r\n\t\t\t\t\t\t\t\t\tconst cS = currentCell.el.getAttribute('colSpan');\r\n\r\n\t\t\t\t\t\t\t\t\t// switch span values\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute('rowSpan', cS);\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute('colSpan', rS);\r\n\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setMergedRenderStatus(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (cellAddStatus) {\r\n\t\t\t\t\t\t\t\t\t// color index for the cell, this will be used to reflect table row colors to cells. currently, grouping up the same items with the same color code\r\n\t\t\t\t\t\t\t\t\tlet colorIndex = (currentOriginalRow + r + hc) % 2 === 0 ? 'even' : 'odd';\r\n\r\n\t\t\t\t\t\t\t\t\t// for better visuals and distinction for tables with 1 item per header, using this calculation for color index\r\n\t\t\t\t\t\t\t\t\tif (itemsPerHeader === 1) {\r\n\t\t\t\t\t\t\t\t\t\tcolorIndex = currentOriginalRow % 2 === 0 ? 'even' : 'odd';\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t!currentCell.el.style.backgroundColor ||\r\n\t\t\t\t\t\t\t\t\t\tisBackgroundTransparent(currentCell.el)\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute(\r\n\t\t\t\t\t\t\t\t\t\t\t'style',\r\n\t\t\t\t\t\t\t\t\t\t\t`background-color: ${tableObj.rowColors[colorIndex]}`,\r\n\t\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t\t';'\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttableObj.appendObjectToRow(currentCell, rowObj.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentOriginalRow += itemsPerHeader;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Build table in its default form.\r\n\t\t *\r\n\t\t * Default form of table is the layout it has in desktop breakpoint.\r\n\t\t *\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t */\r\n\t\tthis.buildDefault = (tableObj) => {\r\n\t\t\tconst rows = tableObj.maxRows();\r\n\t\t\tconst columns = tableObj.maxColumns();\r\n\r\n\t\t\tfor (let r = 0; r < rows; r += 1) {\r\n\t\t\t\tconst rowId = tableObj.addRow('', true, r).id;\r\n\t\t\t\tfor (let c = 0; c < columns; c += 1) {\r\n\t\t\t\t\tconst tempCell = tableObj.getCell(r, c, true);\r\n\r\n\t\t\t\t\t// only render cell if a valid cell is found and it is not a reference\r\n\t\t\t\t\tif (tempCell && !tempCell.isReference()) {\r\n\t\t\t\t\t\t// reset all modified attributes of cell to their default values\r\n\t\t\t\t\t\ttempCell.resetAllAttributes();\r\n\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculate range id for given size value.\r\n\t\t *\r\n\t\t * @param {number} val value\r\n\t\t * @param {Object} stops an object containing stop ids as keys and respective sizes as values\r\n\t\t * @return {string} range id\r\n\t\t */\r\n\t\tthis.calculateRangeId = (val, stops) => {\r\n\t\t\t// eslint-disable-next-line prefer-destructuring\r\n\t\t\tconst sortedStops = Object.keys(stops).sort((a, b) => stops[a].width - stops[b].width);\r\n\r\n\t\t\tlet rangeId = sortedStops[0];\r\n\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tsortedStops.map((s) => {\r\n\t\t\t\tif (val >= stops[s].width) {\r\n\t\t\t\t\trangeId = s;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn rangeId;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add html related indicators for responsive operation.\r\n\t\t *\r\n\t\t * @param {Node} tableElement target table element\r\n\t\t * @param {string} breakpointId current breakpoint for responsive process\r\n\t\t */\r\n\t\tconst htmlResponsiveIndicators = (tableElement, breakpointId) => {\r\n\t\t\tif (tableElement && breakpointId) {\r\n\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\ttableElement.dataset.wptbBreakpoint = breakpointId;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Status of responsive enabled property.\r\n\t\t *\r\n\t\t * This property is the main switch whether to continue responsive operations or not. For breakpoint related enabled statuses, related properties should be checked\r\n\t\t *\r\n\t\t * @param {Object} directive table responsive directive\r\n\t\t * @return {boolean} responsive enabled status\r\n\t\t */\r\n\t\tconst isMainResponsiveEnabled = (directive) => {\r\n\t\t\treturn directive ? directive.responsiveEnabled : false;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Whether current responsive breakpoint enabled for responsive operations.\r\n\t\t *\r\n\t\t * @param {Object} directive table responsive directive\r\n\t\t * @param {number} size relative size\r\n\t\t */\r\n\t\tconst isCurrentBreakpointEnabled = (directive, size) => {\r\n\t\t\tconst sizeRangeId = this.calculateRangeId(size, directive.breakpoints);\r\n\r\n\t\t\tif (sizeRangeId === 'desktop') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst mode = directive.responsiveMode;\r\n\t\t\tconst modeOptions = directive.modeOptions[mode];\r\n\r\n\t\t\treturn modeOptions.disabled && !modeOptions.disabled[sizeRangeId];\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild table according to its responsive directives.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t * @param {number} size size in pixels\r\n\t\t * @param {TableObject} tableObj table object instance\r\n\t\t * @throws An error will be given for invalid mode name\r\n\t\t */\r\n\t\tthis.rebuildTable = (el, size, tableObj) => {\r\n\t\t\tconst directive = this.getDirective(el);\r\n\r\n\t\t\tif (directive) {\r\n\t\t\t\tif (!isMainResponsiveEnabled(directive)) {\r\n\t\t\t\t\t// this.buildDefault(tableObj);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst mode = directive.responsiveMode;\r\n\r\n\t\t\t\t// main build logic for different responsive modes should be named in the format of `{modeName}Build` to automatically call the associated function from here\r\n\t\t\t\tconst buildCallable = this[`${mode}Build`];\r\n\r\n\t\t\t\tif (!size) {\r\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tsize = el.getBoundingClientRect().width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst sizeRangeId = this.calculateRangeId(size, directive.breakpoints);\r\n\r\n\t\t\t\tif (buildCallable) {\r\n\t\t\t\t\tconst modeOptions = directive.modeOptions[mode];\r\n\r\n\t\t\t\t\t// if current breakpoint is disabled, render default table instead\r\n\t\t\t\t\tif (!isCurrentBreakpointEnabled(directive, size)) {\r\n\t\t\t\t\t\ttableObj.clearTable();\r\n\t\t\t\t\t\tthis.buildDefault(tableObj);\r\n\t\t\t\t\t\tthis.removeDefaultClasses(el);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbuildCallable.call(this, el, sizeRangeId, modeOptions, tableObj);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\t\tWPTB_RecalculateIndexes(el);\r\n\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', {\r\n\t\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\t\tsizeRangeId,\r\n\t\t\t\t\t\t\ttopRowAsHeader: directive.modeOptions[mode].topRowAsHeader,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tel.dispatchEvent(tabEvent);\r\n\r\n\t\t\t\t\t// add html indicators to target table\r\n\t\t\t\t\thtmlResponsiveIndicators(el, sizeRangeId);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(`No build mode named as [${mode}] found.`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculate inner size which will be used to decide breakpoint operations.\r\n\t\t *\r\n\t\t * @param {HTMLTableElement} tableElement table element\r\n\t\t * @return {number} inner size width\r\n\t\t */\r\n\t\tconst calculateInnerSize = (tableElement) => {\r\n\t\t\tlet innerSize = window.innerWidth;\r\n\r\n\t\t\tconst directives = this.getDirective(tableElement);\r\n\r\n\t\t\t// calculate size according to relative width directive\r\n\t\t\tif (directives && directives.relativeWidth) {\r\n\t\t\t\tswitch (directives.relativeWidth) {\r\n\t\t\t\t\tcase 'window':\r\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\tinnerSize = window.innerWidth;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'container':\r\n\t\t\t\t\t\t// get the size of the container table is in\r\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\tinnerSize = tableElement.parentNode.parentNode.parentNode.clientWidth;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\tinnerSize = window.innerWidth;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn innerSize;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild tables with the given screen size.\r\n\t\t *\r\n\t\t * @param {number} size screen size\r\n\t\t */\r\n\t\tthis.rebuildTables = (size) => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tthis.elementObjects.map((o) => {\r\n\t\t\t\tlet innerSize = size;\r\n\t\t\t\tif (!size) {\r\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tinnerSize = calculateInnerSize(o.el);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rebuildTable(o.el, innerSize, o.tableObject);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Check if current breakpoint is enabled for responsive operations.\r\n\t\t *\r\n\t\t * @param {HTMLTableElement} tableElement table element\r\n\t\t */\r\n\t\tthis.isResponsiveEnabledForCurrentBreakpoint = (tableElement) => {\r\n\t\t\tconst tableDirectives = this.getDirective(tableElement);\r\n\r\n\t\t\treturn (\r\n\t\t\t\ttableDirectives &&\r\n\t\t\t\tisMainResponsiveEnabled(tableDirectives) &&\r\n\t\t\t\tisCurrentBreakpointEnabled(tableDirectives, calculateInnerSize(tableElement))\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tif (this.options.bindToResize) {\r\n\t\t\tthis.bindRebuildToResize();\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\trebuildTables: this.rebuildTables,\r\n\t\t\tgetDirective: this.getDirective,\r\n\t\t\tcalculateRangeId: this.calculateRangeId,\r\n\t\t\tisResponsiveEnabledForCurrentBreakpoint: this.isResponsiveEnabledForCurrentBreakpoint,\r\n\t\t};\r\n\t}\r\n\r\n\treturn ResponsiveFront;\r\n});\r\n","/**\r\n * Attach style pass component to global space.\r\n */\r\n(function attachToGlobal(globalKey, context, factory) {\r\n\t// eslint-disable-next-line no-param-reassign\r\n\tcontext[globalKey] = factory();\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_StylePass', self || global, function factory() {\r\n\t/**\r\n\t * Style pass component\r\n\t * This component will be used to either let or block theme related styling to affect table styles.\r\n\t *\r\n\t * @class\r\n\t */\r\n\tfunction StylePass() {\r\n\t\tthis.options = { stylesheets: {} };\r\n\r\n\t\t/**\r\n\t\t * Maintain the same position of table container and insert shadow root container to exact same index.\r\n\t\t *\r\n\t\t * @param {HTMLElement} shadowRootContainer\r\n\t\t * @param {HTMLElement} tableContainer\r\n\t\t *\r\n\t\t */\r\n\t\tthis.insertShadowRoot = (shadowRootContainer, tableContainer) => {\r\n\t\t\tconst mainParent = tableContainer.parentNode;\r\n\t\t\tconst parentChildren = Array.from(mainParent.children);\r\n\t\t\tconst tableIndex = parentChildren.indexOf(tableContainer);\r\n\t\t\tconst upSibling = tableIndex - 1 > 0 ? null : parentChildren[tableIndex - 1];\r\n\t\t\tconst downSibling = tableIndex + 1 >= parentChildren.length ? null : parentChildren[tableIndex + 1];\r\n\r\n\t\t\tthis.prepareAllStylesheets(this.options.stylesheets, shadowRootContainer.shadowRoot);\r\n\t\t\tthis.borrowFromTheme(tableContainer);\r\n\r\n\t\t\tshadowRootContainer.shadowRoot.appendChild(tableContainer);\r\n\r\n\t\t\tif (upSibling) {\r\n\t\t\t\tupSibling.insertAdjacentElement('afterend', shadowRootContainer);\r\n\t\t\t} else if (downSibling) {\r\n\t\t\t\tdownSibling.insertAdjacentElement('beforebegin', shadowRootContainer);\r\n\t\t\t} else {\r\n\t\t\t\tmainParent.appendChild(shadowRootContainer);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Borrow some theme styles and reflect them to table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableContainer table container element\r\n\t\t */\r\n\t\tthis.borrowFromTheme = (tableContainer) => {\r\n\t\t\tconst table = tableContainer.querySelector('table');\r\n\t\t\tconst { fontFamily } = getComputedStyle(table);\r\n\t\t\ttable.style.fontFamily = fontFamily;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initialize and start style pass.\r\n\t\t *\r\n\t\t * @param {Object} options style pass options\r\n\t\t */\r\n\t\tthis.init = (options) => {\r\n\t\t\tthis.options = { ...this.options, ...options };\r\n\t\t\tconst tableContainers = Array.from(document.querySelectorAll('div .wptb-table-container'));\r\n\r\n\t\t\tif (tableContainers.length > 0) {\r\n\t\t\t\ttableContainers.map(this.setupStylePass);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Check if style pass is enabled for current table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableContainer table container\r\n\t\t * @return {string} status null for disabled, true for enabled\r\n\t\t */\r\n\t\tthis.checkTableEligibility = (tableContainer) => {\r\n\t\t\tconst table = tableContainer.querySelector('table');\r\n\t\t\treturn table ? this.options.settings.disableThemeStylesForAll || table.dataset.disableThemeStyles : false;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Prepare containers for necessary style pass operations.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableContainer table container\r\n\t\t */\r\n\t\tthis.setupStylePass = (tableContainer) => {\r\n\t\t\t// abort if style pass is not enabled for table\r\n\t\t\tif (!this.checkTableEligibility(tableContainer)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst container = document.createElement('div');\r\n\t\t\tcontainer.classList.add('wptb-shadow-root-container');\r\n\r\n\t\t\tconst mainTable = tableContainer.querySelector('table');\r\n\r\n\t\t\tconst maxWidth = mainTable.dataset.wptbTableContainerMaxWidth;\r\n\r\n\t\t\tconst scrollStatus = mainTable.dataset.wptbHorizontalScrollStatus;\r\n\r\n\t\t\t// only add max-width to shadow root container if scroll functionality is disabled\r\n\t\t\tif (maxWidth && !scrollStatus) {\r\n\t\t\t\tcontainer.style.maxWidth = `${maxWidth}px`;\r\n\t\t\t}\r\n\r\n\t\t\tcontainer.attachShadow({ mode: 'open' });\r\n\r\n\t\t\tthis.insertShadowRoot(container, tableContainer);\r\n\t\t};\r\n\r\n\t\tthis.prepareAllStylesheets = (stylesheetsObj, root) => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tObject.keys(stylesheetsObj).map((action) => {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(stylesheetsObj, action)) {\r\n\t\t\t\t\t// eslint-disable-next-line default-case\r\n\t\t\t\t\tswitch (action) {\r\n\t\t\t\t\t\tcase 'create':\r\n\t\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\t\tObject.keys(stylesheetsObj[action]).map((s) => {\r\n\t\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(stylesheetsObj[action], s)) {\r\n\t\t\t\t\t\t\t\t\tthis.prepareStylesheet(s, stylesheetsObj[action][s], root);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'copy':\r\n\t\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\t\tstylesheetsObj[action].map((query) => {\r\n\t\t\t\t\t\t\t\tthis.copyStylesheet(query, root);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Copy a stylesheet to current root.\r\n\t\t *\r\n\t\t * @param {string} query query to find stylesheet\r\n\t\t * @param {HTMLElement} root root\r\n\t\t */\r\n\t\tthis.copyStylesheet = (query, root) => {\r\n\t\t\tconst styleSheet = document.querySelector(query);\r\n\r\n\t\t\tif (styleSheet) {\r\n\t\t\t\troot.appendChild(styleSheet.cloneNode(true));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.prepareStylesheet = (handler, url, root) => {\r\n\t\t\tconst linkElement = document.createElement('link');\r\n\t\t\tlinkElement.setAttribute('id', handler);\r\n\t\t\tlinkElement.setAttribute('href', url);\r\n\t\t\tlinkElement.setAttribute('rel', 'stylesheet');\r\n\t\t\tlinkElement.setAttribute('media', 'all');\r\n\r\n\t\t\troot.appendChild(linkElement);\r\n\t\t};\r\n\t}\r\n\r\n\treturn new StylePass();\r\n});\r\n","(function assignToGlobal(key, context, factory) {\r\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_LazyLoad', self || global, () => {\r\n\t/**\r\n\t * Lazy load animation.\r\n\t *\r\n\t * @param {Object} options options\r\n\t * @class\r\n\t */\r\n\tfunction LazyLoadAnimation(options) {\r\n\t\t/**\r\n\t\t * Default options.\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tconst defaults = {\r\n\t\t\tname: '',\r\n\t\t\tspeed: 8,\r\n\t\t\tstep: 10,\r\n\t\t\thooks: {},\r\n\t\t\tdirection: 'left',\r\n\t\t\tperspective: 1000,\r\n\t\t\tflashColor: '#FFFFFF',\r\n\t\t};\r\n\r\n\t\t// merged instance options\r\n\t\tconst instanceOptions = { ...defaults, ...options };\r\n\r\n\t\t/**\r\n\t\t * Style tag id for custom stylesheet rules.\r\n\t\t *\r\n\t\t * @type {string}\r\n\t\t */\r\n\t\tconst styleId = 'wptb-lazy-load-styles';\r\n\r\n\t\tconst bufferElementClass = 'wptb-lazy-load-buffer-element';\r\n\t\tconst bufferElementContainerClass = 'wptb-lazy-load-buffer-element-container';\r\n\r\n\t\t/**\r\n\t\t * Get instance related options.\r\n\t\t *\r\n\t\t * @return {Object} options\r\n\t\t */\r\n\t\tthis.getOptions = () => {\r\n\t\t\treturn { ...instanceOptions };\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculate animation duration relative to its supplied speed.\r\n\t\t *\r\n\t\t * @param {number} min minimum seconds\r\n\t\t * @param {number} max maximum seconds\r\n\t\t * @return {number} animation duration\r\n\t\t */\r\n\t\tthis.calculateDuration = (min = 0.1, max = 1) => {\r\n\t\t\treturn Math.max(min, max) - (Math.abs(max - min) / instanceOptions.step) * instanceOptions.speed;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculate animation direction axis.\r\n\t\t *\r\n\t\t * @param {boolean} invert whether to invert axis\r\n\t\t *\r\n\t\t * @return {string} axis name\r\n\t\t */\r\n\t\tthis.calculateAnimationDirection = (invert = false) => {\r\n\t\t\tconst xAxis = ['left', 'right'];\r\n\t\t\tconst names = ['X', 'Y'];\r\n\t\t\tconst indexConstant = invert ? 1 : 0;\r\n\r\n\t\t\treturn xAxis.includes(instanceOptions.direction)\r\n\t\t\t\t? names[(0 + indexConstant) % 2]\r\n\t\t\t\t: names[(1 + indexConstant) % 2];\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculate a direction constant.\r\n\t\t *\r\n\t\t * @param {boolean} invert whether to invert constant\r\n\t\t *\r\n\t\t * @return {number} direction constant\r\n\t\t */\r\n\t\tthis.calculateDirectionConstant = (invert = false) => {\r\n\t\t\tconst positiveConstant = ['left', 'up'];\r\n\t\t\treturn (invert ? -1 : 1) * (positiveConstant.includes(this.getOptions().direction) ? 1 : -1);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get supplied user hook.\r\n\t\t *\r\n\t\t * @param {string} key hook name\r\n\t\t * @return {null | Function} user hook function\r\n\t\t */\r\n\t\tconst getHook = (key) => {\r\n\t\t\tif (Object.prototype.hasOwnProperty.call(instanceOptions.hooks, key)) {\r\n\t\t\t\tconst userHook = instanceOptions.hooks[key];\r\n\t\t\t\tif (typeof userHook === 'function') {\r\n\t\t\t\t\treturn userHook;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Call supplied user hook.\r\n\t\t *\r\n\t\t * @param {string} hookName hook name\r\n\t\t * @param {any} args arguments to call hook\r\n\t\t */\r\n\t\tconst callHook = (hookName, ...args) => {\r\n\t\t\tconst userHook = getHook(hookName);\r\n\t\t\tif (userHook) {\r\n\t\t\t\tuserHook.apply(this, args);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Delete instance.\r\n\t\t */\r\n\t\tconst cleanUp = () => {\r\n\t\t\tdelete this;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get buffer element.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t * @return {null | HTMLElement} buffer element\r\n\t\t */\r\n\t\tthis.getBufferElement = (imgElement) => {\r\n\t\t\tconst { parentNode } = imgElement;\r\n\t\t\treturn parentNode.querySelector(`.${bufferElementClass}`);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Remove buffer element and associated options.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t */\r\n\t\tthis.removeBufferElement = (imgElement) => {\r\n\t\t\tconst bufferElement = this.getBufferElement(imgElement);\r\n\t\t\tif (bufferElement) {\r\n\t\t\t\tconst { parentNode } = bufferElement;\r\n\t\t\t\tparentNode.removeChild(bufferElement);\r\n\t\t\t\tparentNode.classList.remove(bufferElementContainerClass);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add style element to document head.\r\n\t\t *\r\n\t\t * @param {string} content style content\r\n\t\t * @param {HTMLDocument} contentRoot content root\r\n\t\t */\r\n\t\tthis.addStylesheet = (content, contentRoot) => {\r\n\t\t\tlet lazyloadStyleSheet = contentRoot.querySelector(`style[id=\"${styleId}\"]`);\r\n\r\n\t\t\tif (!lazyloadStyleSheet) {\r\n\t\t\t\tlazyloadStyleSheet = contentRoot.createElement('style');\r\n\t\t\t\tlazyloadStyleSheet.id = styleId;\r\n\t\t\t\tlazyloadStyleSheet.type = 'text/css';\r\n\r\n\t\t\t\tcontentRoot.head.appendChild(lazyloadStyleSheet);\r\n\t\t\t}\r\n\r\n\t\t\tconst styleRules = document.createTextNode(content);\r\n\t\t\tlazyloadStyleSheet.innerHTML = '';\r\n\t\t\tlazyloadStyleSheet.appendChild(styleRules);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Before animation base lifecycle hook.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t */\r\n\t\tthis.beforeAnimation = (imgElement) => {\r\n\t\t\tcallHook('beforeAnimation', imgElement);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Animate element.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t */\r\n\t\tthis.animate = (imgElement) => {\r\n\t\t\tcallHook('animate', imgElement);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * After animation processes and cleanup.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t */\r\n\t\tthis.afterAnimation = (imgElement) => {\r\n\t\t\tcallHook('afterAnimation', imgElement);\r\n\t\t\tcleanUp();\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Factory for lazy load animations.\r\n\t *\r\n\t * @param {Object} options factory options\r\n\t * @class\r\n\t */\r\n\tfunction LazyLoadAnimationFactory(options) {\r\n\t\tthis.getAnimation = (animationName, extraOptions = {}) => {\r\n\t\t\tif (options[animationName]) {\r\n\t\t\t\treturn new LazyLoadAnimation({ ...options[animationName], ...extraOptions });\r\n\t\t\t}\r\n\r\n\t\t\treturn new LazyLoadAnimation({});\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Options for animation factory\r\n\t *\r\n\t * @type {Object}\r\n\t */\r\n\tconst factoryOptions = {\r\n\t\t/* eslint-disable no-param-reassign */\r\n\t\tnone: {\r\n\t\t\thooks: {\r\n\t\t\t\tanimate(imageElement) {\r\n\t\t\t\t\tthis.removeBufferElement(imageElement);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tslideIn: {\r\n\t\t\thooks: {\r\n\t\t\t\tbeforeAnimation(imageElement) {\r\n\t\t\t\t\timageElement.parentNode.style.overflow = 'hidden';\r\n\r\n\t\t\t\t\timageElement.style.transform = `translate${this.calculateAnimationDirection()}(${\r\n\t\t\t\t\t\tthis.calculateDirectionConstant() * 100\r\n\t\t\t\t\t}%)`;\r\n\t\t\t\t},\r\n\t\t\t\tanimate(imageElement) {\r\n\t\t\t\t\tthis.removeBufferElement(imageElement);\r\n\t\t\t\t\timageElement.style.transition = `transform ${this.calculateDuration()}s ease-out`;\r\n\t\t\t\t\timageElement.style.transform = `translate${this.calculateAnimationDirection()}(0)`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tgrowSling: {\r\n\t\t\thooks: {\r\n\t\t\t\tbeforeAnimation(imageElement) {\r\n\t\t\t\t\timageElement.style.transform = 'scale(0.1)';\r\n\t\t\t\t},\r\n\t\t\t\tanimate(imageElement) {\r\n\t\t\t\t\tthis.removeBufferElement(imageElement);\r\n\t\t\t\t\timageElement.style.transition = `transform ${this.calculateDuration()}s cubic-bezier(0.68, -0.55, 0.27, 1.55)`;\r\n\t\t\t\t\timageElement.style.transform = 'scale(1)';\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tflash: {\r\n\t\t\thooks: {\r\n\t\t\t\tbeforeAnimation(imageElement) {\r\n\t\t\t\t\tconst flashElement = document.createElement('div');\r\n\t\t\t\t\tflashElement.classList.add('wptb-flash-element');\r\n\r\n\t\t\t\t\timageElement.parentNode.classList.add('wptb-lazy-load-buffer-element-container');\r\n\t\t\t\t\timageElement.insertAdjacentElement('afterend', flashElement);\r\n\r\n\t\t\t\t\tconst flashStyle = `@keyframes wptb-flash {0% {opacity:1;}100% {opacity: 0;}}  .wptb-flash-element {position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background-color: ${\r\n\t\t\t\t\t\tthis.getOptions().flashColor\r\n\t\t\t\t\t}}.wptb-flash-animation {animation: wptb-flash ${this.calculateDuration()}s  forwards ease-out}`;\r\n\t\t\t\t\tthis.addStylesheet(flashStyle, imageElement.ownerDocument);\r\n\t\t\t\t},\r\n\t\t\t\tanimate(imageElement) {\r\n\t\t\t\t\tthis.removeBufferElement(imageElement);\r\n\t\t\t\t\tconst flashElement = imageElement.parentNode.querySelector('.wptb-flash-element');\r\n\t\t\t\t\tif (flashElement) {\r\n\t\t\t\t\t\timageElement.parentNode.classList.add('wptb-lazy-load-buffer-element-container');\r\n\r\n\t\t\t\t\t\tflashElement.addEventListener('animationend', (e) => {\r\n\t\t\t\t\t\t\tif (e.animationName === 'wptb-flash') {\r\n\t\t\t\t\t\t\t\timageElement.parentNode.classList.remove('wptb-lazy-load-buffer-element-container');\r\n\t\t\t\t\t\t\t\tflashElement.remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tflashElement.classList.add('wptb-flash-animation');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tflip: {\r\n\t\t\thooks: {\r\n\t\t\t\tbeforeAnimation(imageElement) {\r\n\t\t\t\t\tconst parentWrapper = imageElement.parentNode;\r\n\t\t\t\t\tparentWrapper.classList.add('wptb-lazy-load-card-container');\r\n\t\t\t\t\t// eslint-disable-next-line no-unused-expressions\r\n\t\t\t\t\tparentWrapper.parentNode?.classList.add('wptb-lazy-load-perspective-base');\r\n\r\n\t\t\t\t\timageElement.classList.add('wptb-lazy-load-card-back', 'wptb-lazy-load-hidden-backface');\r\n\r\n\t\t\t\t\tthis.getBufferElement(imageElement).classList.add(\r\n\t\t\t\t\t\t'wptb-lazy-load-hidden-backface',\r\n\t\t\t\t\t\t'wptb-lazy-load-card-front'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst animationDirection = this.calculateAnimationDirection(true);\r\n\t\t\t\t\tconst rotationAmount = `${this.calculateDirectionConstant(true) * 180}deg`;\r\n\r\n\t\t\t\t\tconst styles = `.wptb-lazy-load-perspective-base{perspective: ${\r\n\t\t\t\t\t\tthis.getOptions().perspective\r\n\t\t\t\t\t}px;} .wptb-lazy-load-card-container{ transform-style: preserve-3d; transition: transform ${this.calculateDuration()}s ease-out;  } .wptb-lazy-load-card-container[data-wptb-card-flip='true']{transform: rotate${animationDirection}(${rotationAmount})} [data-wptb-card-flip='true'] .wptb-lazy-load-card-front svg{ animation: none !important;  opacity: 0.2;} .wptb-lazy-load-card-back { transform: rotate${animationDirection}(${rotationAmount})} .wptb-lazy-load-hidden-backface{backface-visibility: hidden;}`;\r\n\t\t\t\t\tthis.addStylesheet(styles, imageElement.ownerDocument);\r\n\t\t\t\t},\r\n\t\t\t\tanimate(imageElement) {\r\n\t\t\t\t\tconst parentWrapper = imageElement.parentNode;\r\n\t\t\t\t\tparentWrapper.addEventListener('transitionend', (e) => {\r\n\t\t\t\t\t\tif (e.propertyName === 'transform') {\r\n\t\t\t\t\t\t\tthis.removeBufferElement(imageElement);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparentWrapper.classList.remove('wptb-lazy-load-card-container', 'wptb-lazy-load-flip');\r\n\r\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-expressions\r\n\t\t\t\t\t\tparentWrapper.parentNode.classList.remove('wptb-lazy-load-perspective-base');\r\n\r\n\t\t\t\t\t\timageElement.classList.remove('wptb-lazy-load-card-back', 'wptb-lazy-load-hidden-backface');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tparentWrapper.dataset.wptbCardFlip = 'true';\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/* eslint-enable no-param-reassign */\r\n\t};\r\n\r\n\t/**\r\n\t * WPTB Lazy load functionality module.\r\n\t *\r\n\t * @class\r\n\t */\r\n\t// eslint-disable-next-line camelcase\r\n\tfunction WPTB_LazyLoad() {\r\n\t\t/**\r\n\t\t * Lazy load default options.\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tconst defaultOptions = {\r\n\t\t\t// this mode will be used to manually load image elements\r\n\t\t\tforceMode: false,\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Lazy load instance options.\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tlet options = {};\r\n\r\n\t\t/**\r\n\t\t * Scroll related cached data.\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tconst cachedScrollData = {\r\n\t\t\tlastYPosition: 0,\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * All available table image elements.\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tconst allImages = [];\r\n\r\n\t\tconst bufferElementClass = 'wptb-lazy-load-buffer-element';\r\n\t\tconst bufferElementContainerClass = 'wptb-lazy-load-buffer-element-container';\r\n\r\n\t\tconst animationFactory = new LazyLoadAnimationFactory(factoryOptions);\r\n\r\n\t\t/**\r\n\t\t * Whether user scrolling down or up.\r\n\t\t *\r\n\t\t * @return {boolean} scrolling down or up\r\n\t\t */\r\n\t\tconst isGoingDown = () => {\r\n\t\t\treturn window.scrollY - cachedScrollData.lastYPosition >= 0;\r\n\t\t};\r\n\r\n\t\tlet animation = null;\r\n\r\n\t\t/**\r\n\t\t * Calculate visibility of image element depending on current position of page.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t * @param {number} currentYPos current position of page\r\n\t\t *\r\n\t\t * @return {boolean} is element visible or not\r\n\t\t */\r\n\t\tconst isElementVisible = (imgElement, currentYPos) => {\r\n\t\t\t// check position data of parent node instead of image element since a transformation affecting Y position of element might occurred\r\n\t\t\tconst { top, height, bottom } = imgElement.parentNode.getBoundingClientRect();\r\n\t\t\tconst { visibilityPercentage } = options;\r\n\r\n\t\t\tconst visibilityRangeTop = top + height * (visibilityPercentage / 100);\r\n\t\t\tconst visibilityRangeBottom = bottom - height * (visibilityPercentage / 100);\r\n\r\n\t\t\tconst visibilityVariable = isGoingDown() ? visibilityRangeTop : visibilityRangeBottom;\r\n\r\n\t\t\treturn visibilityVariable >= 0 && visibilityVariable <= currentYPos;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add a buffer element and associated options to image container.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t */\r\n\t\tconst addBufferElement = (imgElement) => {\r\n\t\t\tconst bufferElement = document.createElement('div');\r\n\t\t\tbufferElement.classList.add(bufferElementClass);\r\n\r\n\t\t\t// assign color to buffer element\r\n\t\t\tbufferElement.style.backgroundColor = options.backgroundColor;\r\n\r\n\t\t\tif (options.iconSvg) {\r\n\t\t\t\tbufferElement.innerHTML = `<div class=\"wptb-lazy-load-buffer-icon-wrapper wptb-plugin-filter-box-shadow-md\">${options.iconSvg}</div>`;\r\n\r\n\t\t\t\tconst svgIcon = bufferElement.querySelector('svg');\r\n\t\t\t\tconst iconWrapper = bufferElement.querySelector('.wptb-lazy-load-buffer-icon-wrapper');\r\n\r\n\t\t\t\t// assign icon size\r\n\t\t\t\ticonWrapper.style.width = `${options.iconSize}px`;\r\n\t\t\t\ticonWrapper.style.height = `${options.iconSize}px`;\r\n\r\n\t\t\t\t// assign icon animation related settings\r\n\t\t\t\ticonWrapper.dataset.wptbLazyLoadIconAnimation = options.iconAnimation;\r\n\r\n\t\t\t\tif (svgIcon) {\r\n\t\t\t\t\t// assign icon color\r\n\t\t\t\t\tsvgIcon.style.fill = options.iconColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// insert buffer element adjacent to image element\r\n\t\t\timgElement.insertAdjacentElement('afterend', bufferElement);\r\n\r\n\t\t\timgElement.parentNode.classList.add(bufferElementContainerClass);\r\n\r\n\t\t\tanimation.beforeAnimation(imgElement);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Function to call when image element is loaded.\r\n\t\t *\r\n\t\t * @param {Object} e event\r\n\t\t */\r\n\t\tconst imageElementLoadCallback = (e) => {\r\n\t\t\tconst imageElement = e.target;\r\n\r\n\t\t\tanimation.animate(imageElement);\r\n\r\n\t\t\timageElement.removeEventListener('load', imageElementLoadCallback);\r\n\r\n\t\t\tanimation.afterAnimation(imageElement);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Process image element for visibility.\r\n\t\t *\r\n\t\t * @param {HTMLElement} imgElement image element\r\n\t\t * @param {number} currentYPos current position of page\r\n\t\t */\r\n\t\tconst processIndividualImageElement = (imgElement, currentYPos) => {\r\n\t\t\tif (options.forceMode || isElementVisible(imgElement, currentYPos)) {\r\n\t\t\t\tconst delayCallback = () => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\timageElementLoadCallback({ target: imgElement });\r\n\t\t\t\t\t}, options.delay * 1000);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\timgElement.dataset.wptbLazyLoadStatus = 'true';\r\n\r\n\t\t\t\timgElement.addEventListener('load', options.delay ? delayCallback : imageElementLoadCallback);\r\n\r\n\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\timgElement.src = imgElement.dataset.wptbLazyLoadTarget;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Update cached last scroll position.\r\n\t\t *\r\n\t\t * @param {number} position y position\r\n\t\t */\r\n\t\tconst updateLastScrollY = (position) => {\r\n\t\t\tcachedScrollData.lastYPosition = position;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Process array of image elements for visibility.\r\n\t\t *\r\n\t\t * @param {Array} imgElements image elements array\r\n\t\t * @param {number} currentYPos current position of page\r\n\t\t * @param {boolean} firstTimeProcess whether process is run for the first time or not\r\n\t\t * @param {boolean} forceLoad whether to force load images or not with force mode enabled\r\n\t\t */\r\n\t\tconst processImageElements = (imgElements, currentYPos, firstTimeProcess = false, forceLoad = false) => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\timgElements\r\n\t\t\t\t.filter((element) => {\r\n\t\t\t\t\treturn element.dataset.wptbLazyLoadStatus === 'false';\r\n\t\t\t\t})\r\n\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t.map((img) => {\r\n\t\t\t\t\t// updateBackgroundColor(img);\r\n\r\n\t\t\t\t\tif (firstTimeProcess) {\r\n\t\t\t\t\t\taddBufferElement(img);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!options.forceMode || forceLoad) {\r\n\t\t\t\t\t\tprocessIndividualImageElement(img, currentYPos);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tupdateLastScrollY(window.scrollY);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get window current y position.\r\n\t\t *\r\n\t\t * @return {number} y position\r\n\t\t */\r\n\t\tconst windowCurrentYPosition = () => {\r\n\t\t\treturn window.innerHeight;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get all image elements inside table.\r\n\t\t *\r\n\t\t * @param {Array} allTables table array\r\n\t\t * @return {Array} table image elements\r\n\t\t */\r\n\t\tconst getAllTableImages = (allTables) => {\r\n\t\t\treturn allTables.reduce((carry, tableElement) => {\r\n\t\t\t\tconst images = Array.from(tableElement.querySelectorAll('.wptb-lazy-load-img'));\r\n\t\t\t\tcarry.push(...images);\r\n\t\t\t\treturn carry;\r\n\t\t\t}, []);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Assign lazy load functionality to table elements.\r\n\t\t */\r\n\t\tconst assignLazyLoadToElements = () => {\r\n\t\t\tconst tables = Array.from(document.querySelectorAll('.wptb-preview-table'));\r\n\r\n\t\t\t// tables under shadow roots\r\n\t\t\tconst shadowTables = Array.from(document.querySelectorAll('.wptb-shadow-root-container')).reduce(\r\n\t\t\t\t(carry, shadowRootContainer) => {\r\n\t\t\t\t\tconst table = shadowRootContainer.shadowRoot.querySelector('.wptb-preview-table');\r\n\t\t\t\t\tif (table) {\r\n\t\t\t\t\t\tcarry.push(table);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn carry;\r\n\t\t\t\t},\r\n\t\t\t\t[]\r\n\t\t\t);\r\n\r\n\t\t\tconst allTables = [...tables, ...shadowTables];\r\n\t\t\tallImages.push(...getAllTableImages(allTables));\r\n\r\n\t\t\t// process image elements on window load\r\n\t\t\tprocessImageElements(allImages, windowCurrentYPosition(), true);\r\n\r\n\t\t\t// only bind to scroll event if force mode is not enabled\r\n\t\t\tif (!options.forceMode) {\r\n\t\t\t\t// eslint-disable-next-line @wordpress/no-global-event-listener\r\n\t\t\t\twindow.addEventListener(\r\n\t\t\t\t\t'scroll',\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tprocessImageElements(allImages, windowCurrentYPosition());\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ passive: true }\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Force load all images.\r\n\t\t */\r\n\t\tthis.forceLoadImages = () => {\r\n\t\t\tprocessImageElements(allImages, null, false, true);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initialize lazy load.\r\n\t\t *\r\n\t\t * @param {Object} initOptions options object\r\n\t\t */\r\n\t\tthis.init = (initOptions) => {\r\n\t\t\tif (initOptions && typeof initOptions === 'object') {\r\n\t\t\t\toptions = { ...defaultOptions, ...initOptions };\r\n\r\n\t\t\t\tif (options.enabled) {\r\n\t\t\t\t\tanimation = animationFactory.getAnimation(options.imageLoadAnimation, {\r\n\t\t\t\t\t\tspeed: options.imageLoadAnimationSpeed,\r\n\t\t\t\t\t\tdirection: options.imageLoadAnimationDirection,\r\n\t\t\t\t\t\tperspective: options.imageLoadAnimationPerspective,\r\n\t\t\t\t\t\t...options,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tassignLazyLoadToElements();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// eslint-disable-next-line camelcase\r\n\treturn new WPTB_LazyLoad();\r\n});\r\n","/* eslint-disable camelcase */\r\n(function assignToGlobal(key, context, factory) {\r\n\tcontext[key] = factory();\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_ScrollManager', self || global, () => {\r\n\t/**\r\n\t * Scroll manager for WPTB.\r\n\t *\r\n\t * @param {Object} scrollOptions options\r\n\t * @class\r\n\t */\r\n\tfunction WPTB_ScrollManager(scrollOptions) {\r\n\t\tconst { frontendCalculationStatus } = scrollOptions;\r\n\r\n\t\t/**\r\n\t\t * Prepare tables for scroll functionality.\r\n\t\t *\r\n\t\t * @param {Node} tableElement table element\r\n\t\t */\r\n\t\tconst prepareTableForScroll = (tableElement) => {\r\n\t\t\tconst mainContainer = tableElement.parentNode.parentNode;\r\n\t\t\tconst matrixContainer = tableElement.parentNode;\r\n\r\n\t\t\tmainContainer.dataset.wptbHorizontalScrollStatus = 'true';\r\n\t\t\tconst storedMaxWidth = mainContainer.style.maxWidth;\r\n\t\t\tmainContainer.style.maxWidth = '';\r\n\r\n\t\t\tmatrixContainer.style.width = storedMaxWidth;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initialize scroll manager processes.\r\n\t\t */\r\n\t\tthis.init = () => {\r\n\t\t\tconst tableElements = Array.from(\r\n\t\t\t\tdocument.querySelectorAll('table[data-wptb-horizontal-scroll-status=true]')\r\n\t\t\t);\r\n\r\n\t\t\t// only start preparing tables for scroll functionality if backend didn't\r\n\t\t\t// main factor for that is if server didn't implement `mb_convert_encoding` function\r\n\t\t\tif (frontendCalculationStatus) {\r\n\t\t\t\ttableElements.map(prepareTableForScroll);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * @module WPTB_ScrollManager\r\n\t */\r\n\treturn WPTB_ScrollManager;\r\n});\r\n","document.addEventListener('DOMContentLoaded', function () {\r\n\tconst tableContainers = document.getElementsByClassName('wptb-table-container');\r\n\r\n\t/**\r\n\t * Adds hover color change support for supported button elements.\r\n\t *\r\n\t * @param {string} querySelector query selector string\r\n\t */\r\n\tfunction addHoverSupport(querySelector) {\r\n\t\tconst buttons = Array.from(document.querySelectorAll(querySelector));\r\n\r\n\t\t// eslint-disable-next-line array-callback-return\r\n\t\tbuttons.map((b) => {\r\n\t\t\tb.addEventListener('mouseenter', (e) => {\r\n\t\t\t\tconst el = e.target;\r\n\t\t\t\t// hover background-color\r\n\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\r\n\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementHoverBgColor;\r\n\t\t\t\t}\r\n\t\t\t\t// hover color\r\n\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\r\n\t\t\t\t\tel.style.color = el.dataset.wptbElementHoverTextColor;\r\n\t\t\t\t}\r\n\t\t\t\t// hover scale\r\n\t\t\t\tif (el.dataset.wptbElementHoverScale) {\r\n\t\t\t\t\tel.style.transform = `scale(${b.dataset.wptbElementHoverScale})`;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tb.addEventListener('mouseleave', (e) => {\r\n\t\t\t\t// reset all supported hover properties to their default value\r\n\t\t\t\tconst el = e.target;\r\n\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\r\n\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementBgColor;\r\n\t\t\t\t}\r\n\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\r\n\t\t\t\t\tel.style.color = el.dataset.wptbElementColor;\r\n\t\t\t\t}\r\n\t\t\t\tif (el.dataset.wptbElementHoverScale) {\r\n\t\t\t\t\tel.style.transform = 'scale(1)';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// add all kind of functions that have event listeners before responsive table reconstruction to make sure those event listeners are carried over to their clones\r\n\taddHoverSupport('.wptb-preview-table .wptb-button');\r\n\r\n\twptb_tdDefaultWidth();\r\n\twptb_tableReconstraction();\r\n\r\n\tfunction wptb_tableReconstraction() {\r\n\t\tfor (let i = 0; i < tableContainers.length; i++) {\r\n\t\t\tconst tableContainer = tableContainers[i];\r\n\r\n\t\t\t// Set default indicator of creating a new table in true\r\n\t\t\tlet createNewTableIndic = true;\r\n\r\n\t\t\tlet previewTable = tableContainer.getElementsByClassName('wptb-preview-table');\r\n\t\t\tlet tableContainerMatrix = tableContainer.getElementsByClassName('wptb-table-container-matrix');\r\n\r\n\t\t\tif (previewTable.length > 0 && tableContainerMatrix.length > 0) {\r\n\t\t\t\tpreviewTable = previewTable[0];\r\n\t\t\t\ttableContainerMatrix = tableContainerMatrix[0];\r\n\t\t\t\tpreviewTable.style.display = 'table';\r\n\r\n\t\t\t\tif (previewTable.dataset.wptbTableAlignment) {\r\n\t\t\t\t\tconst { wptbTableAlignment } = previewTable.dataset;\r\n\r\n\t\t\t\t\tconst wptbTableContainerWidth = tableContainer.offsetWidth;\r\n\t\t\t\t\tif (wptbTableContainerWidth < previewTable.offsetWidth) {\r\n\t\t\t\t\t\tpreviewTable.style.float = null;\r\n\t\t\t\t\t} else if (wptbTableAlignment == 'center') {\r\n\t\t\t\t\t\tpreviewTable.style.float = null;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpreviewTable.style.float = wptbTableAlignment;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (wptbTableAlignment == 'center') {\r\n\t\t\t\t\t\ttableContainer.style.float = null;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttableContainer.style.float = wptbTableAlignment;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// check data parametrs reconstraction and wptbAdaptiveTable if they are both equal 1 then continue\r\n\t\t\t\tif (previewTable.dataset.reconstraction == 1 && previewTable.dataset.wptbAdaptiveTable == 1) {\r\n\t\t\t\t\t// get widths for wptb-table-container and wptb-preview-table\r\n\t\t\t\t\tconst tableContainerWidth = tableContainer.offsetWidth;\r\n\t\t\t\t\tconst previewTableWidth = previewTable.offsetWidth;\r\n\r\n\t\t\t\t\t// get count of table columns\r\n\t\t\t\t\tlet tableColumns;\r\n\t\t\t\t\tconst previewTableRows = previewTable.rows;\r\n\t\t\t\t\tif (previewTableRows.length > 0) {\r\n\t\t\t\t\t\tconst firstRow = previewTableRows[0];\r\n\t\t\t\t\t\tconst tdsRow = firstRow.querySelectorAll('td');\r\n\r\n\t\t\t\t\t\ttableColumns = tdsRow.length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check the top line if it is presented as a title\r\n\t\t\t\t\tconst tablePreviewHeadIndic = previewTable.classList.contains('wptb-table-preview-head');\r\n\r\n\t\t\t\t\t// check conditions: if table top row is as \"header\" - table must have more that two columns,\r\n\t\t\t\t\t// otherwise table must have more taht one columns\r\n\t\t\t\t\tlet tableReconstructed = false;\r\n\t\t\t\t\tlet wptbPreviewTableMobile;\r\n\t\t\t\t\tif ((!tablePreviewHeadIndic || tableColumns > 2) && tableColumns > 1) {\r\n\t\t\t\t\t\t// if width of wptb-table-container less then width of wptb-preview-table -\r\n\t\t\t\t\t\t// continue the way creation new mobile table\r\n\t\t\t\t\t\tif (tableContainerWidth < previewTableWidth) {\r\n\t\t\t\t\t\t\ttableContainer.style.overflow = 'unset';\r\n\r\n\t\t\t\t\t\t\t// hide wptb-table-container-matrix\r\n\t\t\t\t\t\t\tif (tableContainerMatrix && !tableContainerMatrix.classList.contains('wptb-matrix-hide')) {\r\n\t\t\t\t\t\t\t\ttableContainerMatrix.classList.add('wptb-matrix-hide');\r\n\t\t\t\t\t\t\t\ttableReconstructed = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpreviewTable.classList.add('wptb-mobile-view-active');\r\n\r\n\t\t\t\t\t\t\tif (previewTable.rows && tableColumns) {\r\n\t\t\t\t\t\t\t\t// we get the estimated cell width\r\n\t\t\t\t\t\t\t\tconst tdWidth = previewTableWidth / tableColumns;\r\n\r\n\t\t\t\t\t\t\t\t// get the quantity of whole Columns that are can placed in the container\r\n\t\t\t\t\t\t\t\tlet wholeColumnsInContainer = Math.floor(tableContainerWidth / tdWidth);\r\n\t\t\t\t\t\t\t\tif (wholeColumnsInContainer < 1) wholeColumnsInContainer = 1;\r\n\r\n\t\t\t\t\t\t\t\t// check for the existence of a mobile table\r\n\t\t\t\t\t\t\t\t// if it available, check this table for compliance\r\n\t\t\t\t\t\t\t\t// with our conditions. If it compliance, remain this table\r\n\t\t\t\t\t\t\t\t// and cancel creating a new table ( createNewTableIndic = false ).\r\n\t\t\t\t\t\t\t\tif (tableContainer.getElementsByClassName('wptb-preview-table-mobile').length > 0) {\r\n\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.getElementsByClassName(\r\n\t\t\t\t\t\t\t\t\t\t'wptb-preview-table-mobile'\r\n\t\t\t\t\t\t\t\t\t)[0];\r\n\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.classList.remove('wptb-mobile-hide');\r\n\t\t\t\t\t\t\t\t\tconst dataWholeColumnInContainer =\r\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.dataset.wholeColumnsInContainer;\r\n\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\r\n\t\t\t\t\t\t\t\t\t\tpreviewTable.classList.contains('wptb-table-preview-head')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\r\n\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\r\n\t\t\t\t\t\t\t\t\t\t!previewTable.classList.contains('wptb-table-preview-head') &&\r\n\t\t\t\t\t\t\t\t\t\t(tableContainerWidth > 480 || wptbPreviewTableMobile.column == 1)\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.parentNode.removeChild(wptbPreviewTableMobile);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t\t// if indicator of creating of table \"true\" - continue\r\n\t\t\t\t\t\t\t\tif (createNewTableIndic) {\r\n\t\t\t\t\t\t\t\t\t// create new table for mobile devices\r\n\t\t\t\t\t\t\t\t\tconst newTable = document.createElement('table');\r\n\t\t\t\t\t\t\t\t\tconst newTableTbody = document.createElement('tbody');\r\n\t\t\t\t\t\t\t\t\tnewTable.appendChild(newTableTbody);\r\n\r\n\t\t\t\t\t\t\t\t\t// add css class for new mobile table\r\n\t\t\t\t\t\t\t\t\tnewTable.classList.add('wptb-preview-table-mobile');\r\n\t\t\t\t\t\t\t\t\tconst infArr = previewTable.className.match(/wptb-element-main(.+)-(\\d+)/i);\r\n\t\t\t\t\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\r\n\t\t\t\t\t\t\t\t\t\tnewTable.classList.add(infArr[0]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// get number of rows for wptb-preview-table\r\n\t\t\t\t\t\t\t\t\tconst tableRows = previewTable.rows.length;\r\n\r\n\t\t\t\t\t\t\t\t\t// In this variable must have quantity columns of the last section of the new table\r\n\t\t\t\t\t\t\t\t\tlet newTableLastSectionFilledColumns;\r\n\r\n\t\t\t\t\t\t\t\t\t// set valuesIsSaved in 'false'\r\n\t\t\t\t\t\t\t\t\t// if the parameters newTableLastSectionFilledColumns get\r\n\t\t\t\t\t\t\t\t\t// optimal values, valuesIsSaved must have value 'true'\r\n\t\t\t\t\t\t\t\t\tlet valuesIsSaved = false;\r\n\r\n\t\t\t\t\t\t\t\t\t// check if top row is as \"header\"\r\n\t\t\t\t\t\t\t\t\tif (previewTable.classList.contains('wptb-table-preview-head')) {\r\n\t\t\t\t\t\t\t\t\t\t// quantity rows without top row\r\n\t\t\t\t\t\t\t\t\t\tconst tableRowsWithoutHeader = tableRows - 1;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// this variable will have quantity columns in new mobile table\r\n\t\t\t\t\t\t\t\t\t\tlet newTableColumnsWithoutLeftHeader;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// if quantity of rows in desktop table more than\r\n\t\t\t\t\t\t\t\t\t\t// quantity whole columns which are can placed in the container,\r\n\t\t\t\t\t\t\t\t\t\t// execute \"loop for\"\r\n\t\t\t\t\t\t\t\t\t\tif (tableRows > wholeColumnsInContainer) {\r\n\t\t\t\t\t\t\t\t\t\t\t// this code, сyclical reduces the number of columns in the new table,\r\n\t\t\t\t\t\t\t\t\t\t\t// until the optimal view is obtained so that the last block of the new table\r\n\t\t\t\t\t\t\t\t\t\t\t// has more than half the columns compared to the previous blocks\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableRowsWithoutHeader; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = wholeColumnsInContainer - 1 - i;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader <= 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = 1;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader % newTableColumnsWithoutLeftHeader;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t2 * newTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.8 * newTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 18 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.6 * newTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = tableRowsWithoutHeader;\r\n\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\r\n\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// if all necessary values ​​are available (  ), execute\r\n\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\r\n\t\t\t\t\t\t\t\t\t\t\tlet countRows;\r\n\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcountRows =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttableColumns *\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMath.ceil(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader / newTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcountRows = tableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tconst sectionNumberLast = Math.floor((countRows - 1) / tableColumns);\r\n\t\t\t\t\t\t\t\t\t\t\tlet tdStyles;\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < countRows; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(j / tableColumns);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst tdLeftHeader = previewTable.rows[0].children[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet td;\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst rowFirstStyles = window.getComputedStyle(previewTable.rows[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!tdLeftHeader.style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.backgroundColor = rowFirstStyles.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.width = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.height = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t// tdLeftHeader.removeAttribute('data-x-index');\r\n\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.removeAttribute('data-wptb-css-td-auto-width');\r\n\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(previewTable.querySelector('td'));\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderTopColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderBottomColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderTopWidth = '5px';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(tdLeftHeader);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet k = newTableColumnsWithoutLeftHeader * sectionNumber + 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tk < newTableColumnsWithoutLeftHeader * (sectionNumber + 1) + 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tk++\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (k < previewTable.rows.length) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = previewTable.rows[k].children[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowKStyles = window.getComputedStyle(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[k]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!td.style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.backgroundColor = rowKStyles.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.width = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.height = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// td.removeAttribute('data-x-index');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.removeAttribute('data-wptb-css-td-auto-width');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = document.createElement('td');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderWidth = '0px';\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.background = '#fff';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderTopColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderBottomColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderTopWidth = '5px';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tlet newTableColumns;\r\n\t\t\t\t\t\t\t\t\t\tif (tableContainerWidth > 480) {\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableColumns; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = wholeColumnsInContainer - i;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumns == 0) newTableColumns = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = tableColumns % newTableColumns;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 2 * newTableLastSectionFilledColumns <= 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.8 * newTableLastSectionFilledColumns <= 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 18 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.6 * newTableLastSectionFilledColumns <= 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = 1;\r\n\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\r\n\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\tnewTable.column = 1;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst increaseRatioRows = Math.ceil(tableColumns / newTableColumns);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst newTableRows = increaseRatioRows * tableRows;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < newTableRows; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(i / tableRows);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet jMax;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet jStart;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsectionNumber != increaseRatioRows - 1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns == 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = sectionNumber * newTableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = newTableColumns * (1 + sectionNumber);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = tableColumns - newTableLastSectionFilledColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = tableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst row = previewTable.rows[i - sectionNumber * tableRows];\r\n\t\t\t\t\t\t\t\t\t\t\t\ttr.classList = row.classList;\r\n\t\t\t\t\t\t\t\t\t\t\t\ttr.style.backgroundColor = row.style.backgroundColor;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = jStart; j < jMax; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst newTd = row.children[j].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!newTd.style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowStyles = window.getComputedStyle(row);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.backgroundColor = rowStyles.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.width = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.height = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// newTd.removeAttribute('data-x-index');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.removeAttribute('data-wptb-css-td-auto-width');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(newTd);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tnewTable.dataset.wholeColumnsInContainer = wholeColumnsInContainer;\r\n\t\t\t\t\t\t\t\t\tconst images = newTable.querySelectorAll('[srcset]');\r\n\t\t\t\t\t\t\t\t\tif (images.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < images.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\timages[i].removeAttribute('srcset');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = newTable;\r\n\t\t\t\t\t\t\t\t\ttableContainer.appendChild(newTable);\r\n\t\t\t\t\t\t\t\t\ttableReconstructed = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\ttableContainerMatrix &&\r\n\t\t\t\t\t\t\ttableContainerMatrix.classList.contains('wptb-matrix-hide')\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\ttableContainerMatrix.classList.remove('wptb-matrix-hide');\r\n\t\t\t\t\t\t\ttableReconstructed = true;\r\n\t\t\t\t\t\t\tpreviewTable.classList.remove('wptb-mobile-view-active');\r\n\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.querySelector('.wptb-preview-table-mobile');\r\n\t\t\t\t\t\t\tif (wptbPreviewTableMobile) {\r\n\t\t\t\t\t\t\t\ttableContainer\r\n\t\t\t\t\t\t\t\t\t.getElementsByClassName('wptb-preview-table-mobile')[0]\r\n\t\t\t\t\t\t\t\t\t.classList.add('wptb-mobile-hide');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttableContainer.style.overflow = 'auto';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpreviewTable.style.minWidth = 'auto';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tWPTB_RecalculateIndexes(previewTable);\r\n\r\n\t\t\t\t\tif (tableReconstructed) {\r\n\t\t\t\t\t\tWPTB_RecalculateIndexes(wptbPreviewTableMobile);\r\n\t\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', { detail: true, bubbles: true });\r\n\t\t\t\t\t\tpreviewTable.dispatchEvent(tabEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction wptb_tdDefaultWidth() {\r\n\t\tconst wptbTableContainers = document.getElementsByClassName('wptb-table-container');\r\n\t\t// let frontendEditLink = document.querySelectorAll( '.wptb-frontend-table-edit-link' );\r\n\t\tfor (let i = 0; i < wptbTableContainers.length; i++) {\r\n\t\t\tconst wptbTableContainer = wptbTableContainers[i];\r\n\r\n\t\t\twptbTableContainer.classList.add(`wptb-table-container-${i}`);\r\n\r\n\t\t\tlet table = wptbTableContainer.getElementsByClassName('wptb-preview-table');\r\n\t\t\tif (table.length > 0) {\r\n\t\t\t\ttable = table[0];\r\n\r\n\t\t\t\t// added check for horizontal scroll functionality while adding max width property to table container style\r\n\t\t\t\tif (\r\n\t\t\t\t\ttable.dataset.wptbTableContainerMaxWidth &&\r\n\t\t\t\t\t!table.dataset.wptbTableHorizontalScrollStatus &&\r\n\t\t\t\t\t!wptbTableContainer.dataset.wptbHorizontalScrollStatus\r\n\t\t\t\t) {\r\n\t\t\t\t\twptbTableContainer.style.maxWidth = `${table.dataset.wptbTableContainerMaxWidth}px`;\r\n\t\t\t\t}\r\n\t\t\t\ttable.classList.remove('wptb-table-preview-static-indic');\r\n\r\n\t\t\t\ttable.mergingСellsHorizontally = false;\r\n\t\t\t\tconst tds = table.querySelectorAll('td');\r\n\t\t\t\tfor (let j = 0; j < tds.length; j++) {\r\n\t\t\t\t\tif (tds[j].colSpan > 1) {\r\n\t\t\t\t\t\ttable.mergingСellsHorizontally = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst wptbTableContainerWidth = wptbTableContainer.offsetWidth;\r\n\r\n\t\t\t\tconst td = table.querySelector('td');\r\n\t\t\t\tconst tdStyleObj = window.getComputedStyle(td, null);\r\n\t\t\t\tconst tdBorderLeftWidth = tdStyleObj.getPropertyValue('border-left-width');\r\n\t\t\t\tconst tdBorderRightWidth = tdStyleObj.getPropertyValue('border-right-width');\r\n\t\t\t\tconst tdPaddingLeftWidth = tdStyleObj.getPropertyValue('padding-left');\r\n\t\t\t\tconst tdPaddingRightWidth = tdStyleObj.getPropertyValue('padding-left');\r\n\t\t\t\tconst tdPaddingCommon = parseFloat(tdPaddingLeftWidth, 10) + parseFloat(tdPaddingRightWidth, 10);\r\n\t\t\t\tconst tableTdBorderCommonWidth = parseFloat(tdBorderLeftWidth, 10) + parseFloat(tdBorderRightWidth, 10);\r\n\t\t\t\tconst { wptbTableTdsSumMaxWidth } = table.dataset;\r\n\t\t\t\tconst { wptbFixedWidthSize } = table.dataset;\r\n\t\t\t\tconst { wptbCellsWidthAutoCount } = table.dataset;\r\n\t\t\t\tlet styleElementCreate = false;\r\n\t\t\t\tlet tableTdWidthAuto;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Table width logic to determine final width on rendered tables.\r\n\t\t\t\t */\r\n\t\t\t\tconst tableWidthLogic = () => {\r\n\t\t\t\t\t// eslint-disable-next-line no-shadow\r\n\t\t\t\t\tconst wptbTableContainerWidth = wptbTableContainer.offsetWidth;\r\n\t\t\t\t\tif (wptbTableTdsSumMaxWidth < wptbTableContainerWidth) {\r\n\t\t\t\t\t\tif (wptbCellsWidthAutoCount) {\r\n\t\t\t\t\t\t\ttable.style.minWidth = '100%';\r\n\r\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = wptbTableTdsSumMaxWidth + 'px';\r\n\t\t\t\t\t\t\t//                        }\r\n\r\n\t\t\t\t\t\t\tif (table.mergingСellsHorizontally) {\r\n\t\t\t\t\t\t\t\ttable.style.width = 'auto';\r\n\t\t\t\t\t\t\t\tconst tableTdsWidthAutoCommon = wptbTableContainerWidth - wptbFixedWidthSize;\r\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdsWidthAutoCommon / wptbCellsWidthAutoCount;\r\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdWidthAuto - tdPaddingCommon - tableTdBorderCommonWidth;\r\n\t\t\t\t\t\t\t\tstyleElementCreate = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.style.width = '100%';\r\n\r\n\t\t\t\t\t\t\t\t//                            if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.width = '100%';\r\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.maxWidth = '100%';\r\n\t\t\t\t\t\t\t\t//                            }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttable.style.width = 'auto';\r\n\t\t\t\t\t\t\ttable.style.minWidth = null;\r\n\t\t\t\t\t\t\ttable.style.maxWidth = `${wptbTableTdsSumMaxWidth}px`;\r\n\r\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.width = null;\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = null;\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.maxWidth = wptbTableTdsSumMaxWidth + 'px';\r\n\t\t\t\t\t\t\t//                        }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttable.style.maxWidth = null;\r\n\t\t\t\t\t\ttable.style.minWidth = `${table.dataset.wptbTableTdsSumMaxWidth}px`;\r\n\t\t\t\t\t\ttable.style.width = 'auto';\r\n\t\t\t\t\t\ttableTdWidthAuto = table.dataset.wptbTdWidthAuto ? table.dataset.wptbTdWidthAuto : '100';\r\n\t\t\t\t\t\tstyleElementCreate = true;\r\n\r\n\t\t\t\t\t\t//                    if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t//                        frontendEditLink[i].style.maxWidth = '100%';\r\n\t\t\t\t\t\t//                        frontendEditLink[i].style.minWidth = table.dataset.wptbTableTdsSumMaxWidth + 'px';\r\n\t\t\t\t\t\t//                        frontendEditLink[i].style.width = null;\r\n\t\t\t\t\t\t//                    }\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// if current table container width is equal or lower than zero, than it means it is hidden through css styles, width calculations should be done when it becomes visible again\r\n\t\t\t\tif (wptbTableContainerWidth <= 0) {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Calculate element visibility status.\r\n\t\t\t\t\t *\r\n\t\t\t\t\t * @param {Element} element element to check\r\n\t\t\t\t\t * @return {boolean} whether element is visible or not\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst elementVisibilityStatus = (element) => {\r\n\t\t\t\t\t\tconst { display, visibility } = getComputedStyle(element);\r\n\t\t\t\t\t\treturn display !== 'none' || visibility === 'visible';\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Find parent element that is responsible for hiding our table.\r\n\t\t\t\t\t *\r\n\t\t\t\t\t * This function is recursive, it will keep searching parents till it hit 'body' element.\r\n\t\t\t\t\t *\r\n\t\t\t\t\t * @param {Element} currentElement current element in check\r\n\t\t\t\t\t * @return {null|Element} found parent or null\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst findParentWithNoDisplay = (currentElement) => {\r\n\t\t\t\t\t\tconst currentParent = currentElement.parentNode;\r\n\t\t\t\t\t\tconst parentDisplayStatus = elementVisibilityStatus(currentParent);\r\n\t\t\t\t\t\t// lower cased element name\r\n\t\t\t\t\t\tconst parentType = currentParent.nodeName.toLowerCase();\r\n\r\n\t\t\t\t\t\t// if parent is visible make a recursive call\r\n\t\t\t\t\t\tif (!parentDisplayStatus && parentType !== 'body') {\r\n\t\t\t\t\t\t\treturn findParentWithNoDisplay(currentParent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// hit body element, should return null to signal a problem with current DOM\r\n\t\t\t\t\t\tif (parentType === 'body') {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn currentParent;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// find parent container with hidden display property\r\n\t\t\t\t\tconst culpritParent = findParentWithNoDisplay(wptbTableContainer);\r\n\t\t\t\t\tif (culpritParent) {\r\n\t\t\t\t\t\t// setup a mutation observer to detect visibility change of parent which is responsible for hiding our table\r\n\t\t\t\t\t\tconst config = { attributes: true, childList: false, subtree: false };\r\n\t\t\t\t\t\tconst parentObserver = new MutationObserver((mutationRecord) => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\t\t\tmutationRecord.map((mutation) => {\r\n\t\t\t\t\t\t\t\t\tconst currentVisibility = elementVisibilityStatus(mutation.target);\r\n\t\t\t\t\t\t\t\t\tconst { width: containerWidth } = mutation.target.getBoundingClientRect();\r\n\r\n\t\t\t\t\t\t\t\t\t// call width logic and start calculations for our table since it is visible now\r\n\t\t\t\t\t\t\t\t\tif (currentVisibility && containerWidth > 0) {\r\n\t\t\t\t\t\t\t\t\t\ttableWidthLogic();\r\n\r\n\t\t\t\t\t\t\t\t\t\t// disconnect observer\r\n\t\t\t\t\t\t\t\t\t\tparentObserver.disconnect();\r\n\r\n\t\t\t\t\t\t\t\t\t\t// get out of iteration\r\n\t\t\t\t\t\t\t\t\t\tthrow new Error('get out of iteration');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t// do nothing since an error is thrown to get out of array iteration\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// observe parent for visibility changes\r\n\t\t\t\t\t\tparentObserver.observe(culpritParent, config);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if no hidden parent element is found, it means our table is visible, continue normally\r\n\t\t\t\t\ttableWidthLogic();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { head } = document;\r\n\t\t\t\tif (head) {\r\n\t\t\t\t\tconst cssForTdsWidthAutoOld = head.querySelector(`style[data-wptb-td-auto-width-${i}=\"true\"]`);\r\n\r\n\t\t\t\t\tif (cssForTdsWidthAutoOld) {\r\n\t\t\t\t\t\thead.removeChild(cssForTdsWidthAutoOld);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (styleElementCreate) {\r\n\t\t\t\t\tconst cssForTdsWidthAuto = document.createElement('style');\r\n\t\t\t\t\tcssForTdsWidthAuto.setAttribute(`data-wptb-td-auto-width-${i}`, true);\r\n\t\t\t\t\tcssForTdsWidthAuto.innerHTML = `.wptb-table-container-${i} table td[data-wptb-css-td-auto-width=true]{width:${tableTdWidthAuto}px}`;\r\n\t\t\t\t\tif (head) {\r\n\t\t\t\t\t\thead.appendChild(cssForTdsWidthAuto);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\twindow.addEventListener('resize', () => {\r\n\t\twptb_tdDefaultWidth();\r\n\t\twptb_tableReconstraction();\r\n\t});\r\n\r\n\t// code for adding of old css styles for correct view\r\n\tconst elements = document.getElementsByClassName('wptb-ph-element');\r\n\tfor (let i = 0; i < elements.length; i++) {\r\n\t\tconst element = elements[i];\r\n\t\tif (element.classList.contains('wptb-list-item-container')) {\r\n\t\t\telement.classList.remove('wptb-list-item-container');\r\n\t\t\telement.classList.add('wptb-list-container');\r\n\t\t}\r\n\r\n\t\tif (element.classList.contains('wptb-button-container')) {\r\n\t\t\tconst infArr = element.className.match(/wptb-size-([A-Z]+)/i);\r\n\t\t\tif (infArr && Array.isArray(infArr)) {\r\n\t\t\t\tconst wptbSize = infArr[0];\r\n\t\t\t\tconst wptbSizeNew = wptbSize.toLowerCase();\r\n\r\n\t\t\t\telement.classList.remove(wptbSize);\r\n\r\n\t\t\t\tconst wptbButtonWrapper = element.querySelector('.wptb-button-wrapper');\r\n\t\t\t\tif (wptbButtonWrapper) {\r\n\t\t\t\t\twptbButtonWrapper.classList.add(wptbSizeNew);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// responsive setup\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tconst responsiveFront = new WPTB_ResponsiveFrontend({\r\n\t\tquery: '.wptb-preview-table',\r\n\t\tbindToResize: true,\r\n\t});\r\n\r\n\t// eslint-disable-next-line no-restricted-globals\r\n\tconst context = self || global;\r\n\r\n\t// assign responsive front instance to global context\r\n\tcontext.wptbResponsiveFrontendInstance = responsiveFront;\r\n\r\n\t// sorting table\r\n\tfunction sortingTable() {\r\n\t\tconst tables = document.querySelectorAll('.wptb-preview-table');\r\n\t\tfor (let i = 0; i < tables.length; i += 1) {\r\n\t\t\tconst sortableTable = new WPTB_SortableTable({ table: tables[i] });\r\n\t\t\tsortableTable.sortableTableInitialization(responsiveFront);\r\n\t\t}\r\n\t}\r\n\r\n\tconst textIconFrontendEditFix = () => {\r\n\t\tconst tableObjects = WptbFrontendBase.getTableObjects();\r\n\r\n\t\ttableObjects.map(({ mainTable }) => {\r\n\t\t\tconst textIconElements = Array.from(mainTable.querySelectorAll('.wptb-text_icon_element-container'));\r\n\r\n\t\t\ttextIconElements.map((tiEl) => {\r\n\t\t\t\ttiEl.setAttribute('contenteditable', false);\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tsortingTable();\r\n\tconst responsiveFrontReady = new CustomEvent('responsive:front', {\r\n\t\tdetail: {\r\n\t\t\tresponsiveFront,\r\n\t\t},\r\n\t});\r\n\tdocument.dispatchEvent(responsiveFrontReady);\r\n\r\n\t// initialize scroll manager\r\n\tnew WPTB_ScrollManager(WptbFrontendData.scrollManager).init();\r\n\r\n\t// apply defined extra styles to tables if there is any\r\n\tWPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.frontEnd, WptbFrontendData.generalStyles);\r\n\r\n\t// rebuild tables according to current responsive mode\r\n\tresponsiveFront.rebuildTables();\r\n\r\n\t// initialize lazy load module\r\n\tWPTB_LazyLoad.init(WptbFrontendData.lazyLoad);\r\n\r\n\ttextIconFrontendEditFix();\r\n\r\n\t// initialize style pass\r\n\tWPTB_StylePass.init(WptbFrontendData.stylePass);\r\n});\r\n"]}