{"version":3,"sources":["WPTB_CutGlueTable.js","WPTB_SortableTable.js","WPTB_RecalculateIndexes.js","DataTableGenerator.js","WPTB_ResponsiveFrontend.js","WPTB_StylePass.js","wp-table-builder-frontend.js"],"names":["WPTB_CutGlueTable","cutTableHorizontally","rowBefore","table","rows","i","tableRowsIChildren","children","j","length","rowSpan","newTdRowspan","dataset","sameCellBeforeDivision","td","hasOwnProperty","wptbCell","mark","getDOMElement","document","createElement","tdTopStyle","getAttribute","setAttribute","colSpan","dataXIndex","xIndex","dataXIndexNext","parseInt","beforeTd","maxCols","querySelector","insertBefore","WPTB_RecalculateIndexes","glueTableHorizontally","tds","_toConsumableArray","getElementsByTagName","hasAttribute","dataSameCellBeforeDivision","tdsSameBeforeDivision","querySelectorAll","parentNode","classList","contains","yIndex","tdsSameBeforeDivisionJPlusChildren","k","appendChild","removeChild","cutTableVertically","col","rowChildren","rowChildrenLength","afterTd","rowSpanNewTd","colSpanOld","colSpanNewTd","tdLeftStyle","tdAnalogThisX","style","width","tdAnalogThisY","height","glueTableVertically","jFirstTdGlue","key","context","factory","exports","_typeof","module","self","global","options","arguments","undefined","this","thisObject","sortingCellMouseMov","e","type","element","target","tagName","x","offsetX","layerX","y","offsetY","layerY","xMatch","clientWidth","clientHeight","add","remove","sortingCellMouseMoveVertical","sortingCellMouseMoveHorizontal","tdMouseLeave","sortableTable","currentTarget","tableWasSorted","tableRowsBefore","tableRowsAfter","itemsPerHeader","tableRowsArr","tableLastCont","push","rowspan","rowNum","concat","map","rowsTdFirst","rowsValuesArr","tdYCoordsRowSpanPrevious","tableRowsPushed","tdsChanged","changeSortingTdsCollection","tdRowspan","textElementsValues","textElementsValuesGet","rowsTd","value","orderBy","setSortedAscDataAttr","sort","prev","next","sortOrder","unshift","indexOf","tBody","innerHTML","rowsValObj","row","trRef","tr","colspan","colNum","columnsTdFirst","columnsValuesArr","tdXCoordsColSpanPrevious","tdColspan","columnsTd","tdsColumn","difference","columnsValObj","removeCellsAttrAfterDivision","tableSM","tableStateSet","reassignElementsStyles","dataAttr","prevValue","nextValue","cell","textElements","innerText","tdIndexSpanPrev","collectionTds","collectionTdsJSpan","collectionTdsJSpanProperty","indexName","indexNameCamelCase","indexNamePerpendicularCamelCase","tdSpanProperty","tableGroupCount","tdsCollectionChanged","splice","tdSpan","tdsAll","removeAttribute","tableMaxCols","cellsStylesScheme","rowsStylesScheme","sortModeSwitcher","active","removeEventListener","sortableTableVerticalStart","sortingCellMouseMoveSwitcher","addEventListener","wptbSortableTableVertical","createTableElementsStylesScheme","sortableTableHorizontalStart","wptbSortableTableHorizontal","tableObjectChange","start","elemSelector","elements","elem","backgroundColor","window","getComputedStyle","getPropertyValue","objectKey","String","elementsStylesScheme","elemStyles","sortableTableInitialization","responsiveFront","typeFirst","typeSecond","switchMode","getDirective","directives","sizeRangeId","detail","mode","responsiveMode","modeOptions","topRowAsHeader","cellStackDirection","cellsPerRow","call","_this","s","sCMM","dataAttrSortChange","rowsLength","dataYIndexStart","trs","maxColsFull","tdsArr","jMainIter","z","columns","defaultMappings","default","button","star_rating","image","circle_rating","icon","parseTableElementId","tableElement","activeElementIdArray","split","filter","c","RegExp","test","replace","parseElementType","activeElementKindArray","_slicedToArray","exec","OperatorType","dataManager","factoryContext","source","defaultOptions","name","methods","calculateMaxRows","bindingOptions","sliceResult","getOperatorResult","operatorOptions","Object","keys","prototype","_objectSpread","results","_ref","rowAmount","rowCustomAmount","sliceAmount","slice","innerOperatorResult","method","bind","highestLowest","_ref2","_this2","compareColumn","operatorType","newValuesArray","getValues","a","b","Number","parseFloat","getColumnValueByIndex","thanOperators","_ref3","_this3","thanAmount","comparedColumnVal","parsedThanAmount","operatorTypeOptions","highest","lowest","not","notOperation","notOperator","operatorType2","notOperatorOptions","dataRowId","getOperator","rowId","higher","lower","equal","_ref4","_this4","equalAmount","OperatorFactory","_this5","operatorTypeInstances","operatorName","optionName","DataManager","_this6","values","bindings","innerValues","innerBindings","updateValues","newValues","updateBindings","newBindings","getColumnIdFromIndex","index","_innerValues$0$values","colId","getColumnValues","columnId","customValues","valuesToUse","reduce","carry","columnValues","getRowById","getBinding","id","Array","from","getRowValuesByIndex","rowIndex","_this7","_dataManager","instance","operatorFactory","updateDataManager","currentBindings","currentValues","getTableElementBinding","elementId","binding","getRowBinding","rowElement","dataTableRowId","getRowId","valueApplyList","text","childNodes","textContent","link","anchorElement","href","_ref5","rating","maxStarCount","starCount","parsedValue","limitedRating","Math","min","roundedRating","floor","emptyStars","fullStars","star","_ref6","imageElement","imageParentAnchor","src","_ref7","percentage","percentageCount","circleSlice","clip","transform","limitedPercentage","max","text_icon_element","_ref8","textElement","_ref9","valueColumn","addValueToTableElement","mapper","tableElementType","elementValue","_ref10","_mapper$tableElementT","mapperIndex","mapIndex","sliceRowDataValues","rowBindings","rowValues","slicedValues","_rowBindings$operator","operator","sortRowDataValues","sortOptions","sortedValues","sortType","sortDirection","sortTarget","aVal","bVal","directionVal","batchPopulateTableElements","tableElements","customBindings","bindingColIdObject","column","getTableElementsFromRow","rowBindingLogicList","auto","cells","rowElements","autoBindings","cellIndex","cellElement","cellTableElements","apply","currentColumnId","elementBindings","elementType","prop","populateRow","blueprintRow","clonedRow","cloneNode","rowBinding","applyRowBindings","populateBlueprint","maxRows","_getRowBinding","rowBindingMode","_this7$operatorFactor","rowBindingOperatorObject","maxValue","colBinding","populatedRows","generateDataTable","sourceTable","clonedTable","tableBody","parsedRows","clearTable","pR","r","frontendGenerateTables","targetTable","dataTableOptions","JSON","parse","atob","wptbDataTableOptions","console","log","mainWrapper","tempData","parsedData","generatedTable","prepareFrontendTable","logToConsole","message","process","env","NODE_ENV","Error","CellObject","reference","referenceObject","mergedRenderStatus","mergedCells","getMergedRenderStatus","setMergedRenderStatus","status","addToMergedCells","mergeType","cellObj","isReference","modifications","spans","remainingSpans","cacheSpanValues","defaultVal","getSpan","spanType","fromElement","spanVal","getElement","getRemainingSpans","setRemainingSpans","createCellElement","attributeKey","attributeValue","append","glue","currentVal","setSpan","valueToApply","mc","remainingVal","remainingParentSpans","startIndex","endIndex","resetAttribute","resetAllAttributes","el","TableObject","tableEl","parsedTable","rowCache","originals","rowColors","header","even","odd","addToParsed","cellObject","parseTable","ri","ci","currentCellObject","spanRow","spanTypes","spanCol","sr","referenceCell","sc","parseRowColors","headerDatasetColor","wptbHeaderBackgroundColor","evenRowDatasetColor","wptbEvenRowBackgroundColor","oddRowDatasetColor","wptbOddRowBackgroundColor","rowsNeeded","rn","tempRow","addRow","fromOriginals","originalIndex","isArray","range","createRange","setStart","createContextualFragment","join","getRow","maxColumns","p","getCell","returnObject","getCellsAtRow","returnObj","tempCell","appendToRow","cellRowId","cellColumnId","cachedRow","appendElementToRow","appendObjectToRow","responsiveClassDefaultOptions","query","defaultClasses","bindToResize","elementObjects","tableObject","bindRebuildToResize","rebuildTables","directiveString","wptbResponsiveDirectives","addDefaultClasses","removeDefaultClasses","autoBuild","sizeRange","autoOption","tableObj","direction","staticTopRow","buildDefault","autoDirectionBuild","isRowStacked","headerBuild","allCellsByRow","rowStartIndex","rowObj","forEach","cellCount","allCellsByCol","topCells","baseCells","t","tCell","cR","headerCells","h","stackedAsColumn","rowBorderStyle","addHeaderCells","addBorder","borderTop","headerCount","ceil","currentOriginalRow","cc","currentCell","cellAddStatus","remainingItems","currentRowSpan","hc","clonedHeaderCell","rS","cS","colorIndex","calculateRangeId","val","stops","sortedStops","rangeId","rebuildTable","size","directive","responsiveEnabled","buildCallable","getBoundingClientRect","breakpoints","tabEvent","CustomEvent","dispatchEvent","o","innerSize","innerWidth","relativeWidth","globalKey","stylesheets","insertShadowRoot","shadowRootContainer","tableContainer","mainParent","parentChildren","tableIndex","upSibling","downSibling","prepareAllStylesheets","shadowRoot","borrowFromTheme","insertAdjacentElement","fontFamily","init","tableContainers","setupStylePass","checkTableEligibility","disableThemeStyles","container","maxWidth","wptbTableContainerMaxWidth","attachShadow","stylesheetsObj","root","prepareStylesheet","handler","url","linkElement","jQuery","ready","$","WPTB_DataTableGenerator","getElementsByClassName","wptb_tableReconstraction","createNewTableIndic","previewTable","tableContainerMatrix","display","wptbTableAlignment","offsetWidth","reconstraction","wptbAdaptiveTable","tableContainerWidth","previewTableWidth","tableColumns","previewTableRows","tableReconstructed","wptbPreviewTableMobile","overflow","tdWidth","wholeColumnsInContainer","dataWholeColumnInContainer","newTable","newTableTbody","infArr","className","match","tableRows","newTableLastSectionFilledColumns","valuesIsSaved","tableRowsWithoutHeader","newTableColumnsWithoutLeftHeader","countRows","tdStyles","sectionNumber","tdLeftHeader","rowFirstStyles","borderTopColor","borderColor","borderBottomColor","borderTopWidth","rowKStyles","borderWidth","background","newTableColumns","increaseRatioRows","newTableRows","jMax","jStart","newTd","rowStyles","images","minWidth","bubbles","wptb_tdDefaultWidth","wptbTableContainers","wptbTableContainer","mergingСellsHorizontally","wptbTableContainerWidth","tdStyleObj","tdBorderLeftWidth","tdBorderRightWidth","tdPaddingLeftWidth","tdPaddingRightWidth","tdPaddingCommon","tableTdBorderCommonWidth","wptbTableTdsSumMaxWidth","wptbFixedWidthSize","wptbCellsWidthAutoCount","styleElementCreate","tableTdWidthAuto","wptbTdWidthAuto","head","cssForTdsWidthAutoOld","cssForTdsWidthAuto","wptbElementHoverBgColor","wptbElementHoverTextColor","color","wptbElementHoverScale","wptbElementBgColor","wptbElementColor","resize","wptbSize","wptbSizeNew","toLowerCase","wptbButtonWrapper","WPTB_ResponsiveFrontend","tables","WPTB_SortableTable","sortingTable","WPTB_StylePass","WptbFrontendData","stylePass"],"mappings":"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","file":"wp-table-builder-frontend.js","sourcesContent":["let WPTB_CutGlueTable = {\n    cutTableHorizontally: function (rowBefore, table) {\n        if( table && table.rows[rowBefore] ) {\n            for( let i = 0; i < rowBefore; i++ ) {\n                let tableRowsIChildren = table.rows[i].children;\n\n                for( let j = 0; j < tableRowsIChildren.length; j++ ) {\n                    if ( tableRowsIChildren[j].rowSpan > 1 && tableRowsIChildren[j].rowSpan > rowBefore - i ) {\n                        let newTdRowspan = tableRowsIChildren[j].rowSpan - rowBefore + i;\n                        tableRowsIChildren[j].rowSpan = rowBefore - i;\n                        if( ! tableRowsIChildren[j].dataset.sameCellBeforeDivision ) {\n                            tableRowsIChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                        }\n\n                        let td;\n                        if(table.hasOwnProperty('wptbCell')) {\n                            td = new table.wptbCell( table.mark );\n                            td = td.getDOMElement();\n                        } else {\n                            td = document.createElement('td');\n                        }\n\n                        let tdTopStyle = tableRowsIChildren[j].getAttribute( 'style' );\n                        td.setAttribute( 'style', tdTopStyle );\n                        td.colSpan = tableRowsIChildren[j].colSpan;\n                        td.rowSpan = newTdRowspan;\n                        td.dataset.sameCellBeforeDivision = tableRowsIChildren[j].dataset.sameCellBeforeDivision;\n\n                        let dataXIndex = tableRowsIChildren[j].dataset.xIndex;\n                        let dataXIndexNext = parseInt( dataXIndex ) + parseInt( tableRowsIChildren[j].colSpan );\n                        let beforeTd;\n                        while( ! beforeTd && dataXIndexNext < table.maxCols ) {\n                            beforeTd = table.rows[rowBefore].querySelector( '[data-x-index=\"' + dataXIndexNext + '\"]' );\n                            dataXIndexNext++;\n                        }\n                        table.rows[rowBefore].insertBefore( td, beforeTd );\n\n                        WPTB_RecalculateIndexes(table);\n                    }\n                }\n            }\n        }\n    },\n    glueTableHorizontally: function (table) {\n        if(table) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' );\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] ) {\n                            if( tdsSameBeforeDivision[j].parentNode && tdsSameBeforeDivision[j + 1].parentNode &&\n                                ! tdsSameBeforeDivision[j].parentNode.classList.contains( 'wptb-row-moving' ) &&\n                                ! tdsSameBeforeDivision[j + 1].parentNode.classList.contains( 'wptb-row-moving' ) ) {\n                                if( ( tdsSameBeforeDivision[j + 1].dataset.yIndex == parseInt( tdsSameBeforeDivision[j].dataset.yIndex ) +\n                                    parseInt( tdsSameBeforeDivision[j].rowSpan ) ) ) {\n                                    tdsSameBeforeDivision[j].rowSpan += tdsSameBeforeDivision[j + 1].rowSpan;\n\n                                    let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                    for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                        tdsSameBeforeDivision[j].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                    }\n\n                                    let nextRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                    nextRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    cutTableVertically: function (col, table) {\n        for ( let i = 0; i < table.rows.length; i++ ) {\n            if( col < table.maxCols ) {\n                if( col != 0 && ( ! table.rows[i].querySelector( '[data-x-index=\"' + col + '\"]' ) ) ) {\n                    let rowChildren = table.rows[i].children;\n\n                    let td,\n                        rowChildrenLength = rowChildren.length,\n                        afterTd,\n                        rowSpanNewTd,\n                        colSpanOld,\n                        colSpanNewTd;\n                    for( let j = 0; j < rowChildrenLength; j++ ) {\n                        if( rowChildren[j].colSpan > 1 && parseInt( rowChildren[j].dataset.xIndex ) < col &&\n                            parseInt( rowChildren[j].dataset.xIndex ) + parseInt( rowChildren[j].colSpan ) > col ) {\n                            if(table.hasOwnProperty('wptbCell')) {\n                                td = new table.wptbCell( table.mark );\n                                td = td.getDOMElement();\n                            } else {\n                                td = document.createElement('td');\n                            }\n\n                            rowSpanNewTd = rowChildren[j].rowSpan;\n                            colSpanOld = rowChildren[j].colSpan;\n                            rowChildren[j].colSpan = col - rowChildren[j].dataset.xIndex;\n                            colSpanNewTd = colSpanOld - rowChildren[j].colSpan;\n\n                            if( ! rowChildren[j].dataset.sameCellBeforeDivision ) {\n                                rowChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                            }\n\n                            let tdLeftStyle = rowChildren[j].getAttribute( 'style' );\n                            td.setAttribute( 'style', tdLeftStyle );\n\n                            let tdAnalogThisX = table.querySelector( '[data-x-index=\"' + col + '\"]' );\n                            if( tdAnalogThisX ) {\n                                td.style.width = tdAnalogThisX.style.width;\n                            }\n\n                            let tdAnalogThisY = table.querySelector( '[data-y-index=\"' + i + '\"]' );\n                            if( tdAnalogThisY ) {\n                                td.style.height = tdAnalogThisY.style.height;\n                            }\n                            if( rowChildren[j + 1] ) {\n                                afterTd = rowChildren[j + 1];\n                            } else {\n                                afterTd = null;\n                            }\n\n                            table.rows[i].insertBefore( td, afterTd );\n                            td.colSpan = colSpanNewTd;\n                            td.rowSpan = rowSpanNewTd;\n                            td.dataset.sameCellBeforeDivision = rowChildren[j].dataset.sameCellBeforeDivision;\n                            i += rowSpanNewTd - 1;\n                            break\n                        }\n                    }\n                }\n            }\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    glueTableVertically: function (table) {\n        if( table ) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = [...table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' )];\n\n                    let jFirstTdGlue = null;\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] &&\n                            ! tdsSameBeforeDivision[j].classList.contains( 'wptb-column-moving' ) &&\n                            ! tdsSameBeforeDivision[j + 1].classList.contains( 'wptb-column-moving' ) ) {\n                            if( ( tdsSameBeforeDivision[j + 1].dataset.xIndex == parseInt( tdsSameBeforeDivision[j].dataset.xIndex ) +\n                                parseInt( tdsSameBeforeDivision[j].colSpan ) ) ) {\n                                if( jFirstTdGlue == null ) {\n                                    jFirstTdGlue = j;\n                                }\n                                tdsSameBeforeDivision[jFirstTdGlue].colSpan += tdsSameBeforeDivision[j + 1].colSpan;\n\n                                let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                    tdsSameBeforeDivision[jFirstTdGlue].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                }\n\n                                let thisRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                thisRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    }\n}\n","/**\n * Responsive class assignment for frontend operations.\n *\n * This file can be used as an UMD.\n */\n(function assignToGlobal(key, context, factory) {\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext[key] = factory();\n\t}\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_SortableTable', self || global, () => {\n\tfunction WPTB_SortTable(options = {}) {\n\t\tconst table = (this.table = options.table);\n\t\tWPTB_RecalculateIndexes(table);\n\t\tconst thisObject = this;\n\t\tthis.itemsPerHeader = 0;\n\t\tthis.tableMaxCols = table.maxCols;\n\t\tthis.cellsStylesScheme = {};\n\t\tthis.rowsStylesScheme = {};\n\n\t\t/**\n\t\t * sets the table to sort mode\n\t\t *\n\t\t * @param {string} type\n\t\t * @param {boolean} active\n\t\t * @param {number} number\n\t\t */\n\t\tthis.sortModeSwitcher = function (type, active) {\n\t\t\tif(active) {\n\t\t\t\tthis.sortModeSwitcher('horizontal', false);\n\t\t\t\tthis.sortModeSwitcher('vertical', false);\n\t\t\t}\n\n\t\t\tif (type === 'vertical') {\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableVerticalStart, false);\n\n\t\t\t\tif (active) {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', true);\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableVerticalStart, false);\n\t\t\t\t\tthis.table.dataset.wptbSortableTableVertical = '1';\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', false);\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableVertical;\n\t\t\t\t}\n\t\t\t} else if (type === 'horizontal') {\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableHorizontalStart, false);\n\n\t\t\t\tif (active) {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', true);\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableHorizontalStart, false);\n\t\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal = '1';\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', false);\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableHorizontal;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * changes table object for old reconstruction table type\n\t\t *\n\t\t * @param {boolean}start\n\t\t * @returns {*}\n\t\t */\n\t\tthis.tableObjectChange = function (start = true) {\n\t\t\tif(this.table.classList.contains('wptb-mobile-view-active') && start) {\n\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n\t\t\t} else if(this.table.classList.contains('wptb-preview-table-mobile') && !start) {\n\t\t\t\tthis.table = table.parentNode.querySelector('.wptb-preview-table');\n\t\t\t}\n\t\t\treturn this.table;\n\t\t}\n\n\t\t/**\n\t\t * fills the object with data about cell styles for all locations (create scheme)\n\t\t *\n\t\t * @param elemSelector\n\t\t */\n\t\tthis.createTableElementsStylesScheme = function (elemSelector) {\n\t\t\tthis.tableObjectChange();\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\n\t\t\tif(elements.length) {\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\n\t\t\t\t\tlet elem = elements[i];\n\t\t\t\t\tlet cellFullStyleObj = window.getComputedStyle(elem, null);\n\t\t\t\t\tlet backgroundColor = cellFullStyleObj.getPropertyValue( 'background-color' );\n\t\t\t\t\tlet objectKey = '';\n\t\t\t\t\tif(elemSelector === 'td') {\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\n\t\t\t\t\t\tthis.cellsStylesScheme[objectKey] = {backgroundColor};\n\t\t\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\t\t\tobjectKey = String(i);\n\t\t\t\t\t\tthis.rowsStylesScheme[objectKey] = {backgroundColor};\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.tableObjectChange(false);\n\t\t}\n\n\t\t/**\n\t\t * applies saved cell styles data to all cells\n\t\t *\n\t\t * @param elemSelector\n\t\t */\n\t\tthis.reassignElementsStyles = function (elemSelector) {\n\t\t\tthis.tableObjectChange();\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\n\t\t\tlet elementsStylesScheme;\n\t\t\tif(elemSelector === 'td') {\n\t\t\t\telementsStylesScheme = this.cellsStylesScheme;\n\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\telementsStylesScheme = this.rowsStylesScheme;\n\t\t\t}\n\t\t\tif(elements.length) {\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\n\t\t\t\t\tlet elem = elements[i];\n\t\t\t\t\tlet objectKey = '';\n\t\t\t\t\tif(elemSelector === 'td') {\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\n\t\t\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\t\t\tobjectKey = i;\n\t\t\t\t\t}\n\t\t\t\t\tif(elementsStylesScheme.hasOwnProperty(objectKey)) {\n\t\t\t\t\t\tlet elemStyles = elementsStylesScheme[objectKey];\n\t\t\t\t\t\tfor(let key in elemStyles) {\n\t\t\t\t\t\t\telem.style[key] = elemStyles[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tableObjectChange(false);\n\t\t}\n\n\t\t/**\n\t\t * checks whether the table should be in the sort state\n\t\t * and connects the necessary handlers\n\t\t *\n\t\t * @param {object} responsiveFront\n\t\t */\n\t\tthis.sortableTableInitialization = function (responsiveFront) {\n\t\t\tlet type = '';\n\t\t\tlet typeFirst;\n\t\t\tlet typeSecond;\n\t\t\tif (this.table.dataset.wptbSortableTableVertical && this.table.dataset.wptbSortableTableVertical === '1') {\n\t\t\t\ttypeFirst = 'vertical';\n\t\t\t\ttypeSecond = 'horizontal';\n\t\t\t} else if (\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal &&\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal === '1'\n\t\t\t) {\n\t\t\t\ttypeFirst = 'horizontal';\n\t\t\t\ttypeSecond = 'vertical';\n\t\t\t}\n\n\t\t\tconst switchMode = {};\n\t\t\tif (responsiveFront && responsiveFront.getDirective(this.table)) {\n\t\t\t\tswitchMode.switch = function (e) {\n\t\t\t\t\tconst directives = responsiveFront.getDirective(this.table)\n\n\t\t\t\t\tlet sizeRangeId = 'desktop';\n\t\t\t\t\tif (e && e.detail) {\n\t\t\t\t\t\tsizeRangeId = e.detail.sizeRangeId;\n\t\t\t\t\t}\n\t\t\t\t\ttype = typeFirst;\n\t\t\t\t\tif (sizeRangeId !== 'desktop') {\n\t\t\t\t\t\tif (directives.hasOwnProperty('modeOptions')) {\n\t\t\t\t\t\t\tconst mode = directives.responsiveMode;\n\t\t\t\t\t\t\tconst modeOptions = directives.modeOptions[mode];\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tmodeOptions.hasOwnProperty('topRowAsHeader') &&\n\t\t\t\t\t\t\t\tmodeOptions.topRowAsHeader.hasOwnProperty(sizeRangeId) &&\n\t\t\t\t\t\t\t\tmodeOptions.topRowAsHeader[sizeRangeId]\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tmodeOptions.hasOwnProperty('cellStackDirection') &&\n\t\t\t\t\t\t\t\t\tmodeOptions.cellStackDirection.hasOwnProperty(sizeRangeId)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tif (modeOptions.cellStackDirection[sizeRangeId] === 'row') {\n\t\t\t\t\t\t\t\t\t\ttype = typeSecond;\n\t\t\t\t\t\t\t\t\t\tthis.itemsPerHeader = this.tableMaxCols - 1;\n\t\t\t\t\t\t\t\t\t} else if (modeOptions.cellStackDirection[sizeRangeId] === 'column') {\n\t\t\t\t\t\t\t\t\t\tif (modeOptions.hasOwnProperty('cellsPerRow')) {\n\t\t\t\t\t\t\t\t\t\t\tthis.itemsPerHeader = modeOptions.cellsPerRow[sizeRangeId];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.itemsPerHeader = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.itemsPerHeader = 0;\n\t\t\t\t\t}\n\t\t\t\t\tthis.sortModeSwitcher(type, true);\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tswitchMode.switch = function (e) {\n\t\t\t\t\tlet type = typeFirst;\n\t\t\t\t\tif (this.table.classList.contains('wptb-mobile-view-active')) {\n\t\t\t\t\t\tif (this.table.classList.contains('wptb-table-preview-head')) {\n\t\t\t\t\t\t\ttype = typeSecond;\n\t\t\t\t\t\t\tif(type === 'vertical') {\n\t\t\t\t\t\t\t\tthis.itemsPerHeader = this.tableMaxCols - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { table } = this;\n\t\t\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n\t\t\t\t\t\tthis.sortModeSwitcher(type, true);\n\t\t\t\t\t\tthis.table = table;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.sortModeSwitcher(type, true);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tswitchMode.switch.call(thisObject);\n\t\t\tthis.table.addEventListener(\n\t\t\t\t'table:rebuilt',\n\t\t\t\tfunction (e) {\n\t\t\t\t\tswitchMode.switch.call(thisObject, e);\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * adds and deletes mousemove and mouseleave events handlers when happens switch sorting mode\n\t\t * and also can add necessary attributes\n\t\t *\n\t\t * @param {string} type\n\t\t * @param {boolean} active\n\t\t */\n\t\tthis.sortingCellMouseMoveSwitcher = function (type, active) {\n\t\t\t/**\n\t\t\t * removes and adds mousemove and mouseleave events handlers\n\t\t\t *\n\t\t\t * @param {HTMLElement} td\n\t\t\t * @param {func} sCMM\n\t\t\t * @param {boolean} active\n\t\t\t */\n\t\t\tfunction s(td, sCMM, active) {\n\t\t\t\ttd.removeEventListener('mousemove', sCMM, false);\n\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\tif (active) {\n\t\t\t\t\ttd.addEventListener('mousemove', sCMM, false);\n\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * removes and adds data sorted attributes\n\t\t\t *\n\t\t\t * @param {HTMLElement} td\n\t\t\t * @param {string} dataAttr\n\t\t\t * @param {boolean} active\n\t\t\t */\n\t\t\tfunction dataAttrSortChange(td, dataAttr, active) {\n\t\t\t\tif (active) {\n\t\t\t\t\tif (!td.dataset[dataAttr] || td.dataset[dataAttr] !== 'desk-disabled') {\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'ask';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'desk';\n\t\t\t\t\t}\n\t\t\t\t} else if (td.dataset[dataAttr] === 'ask') {\n\t\t\t\t\ttd.dataset[dataAttr] = 'ask-disabled';\n\t\t\t\t} else if (td.dataset[dataAttr] === 'desk') {\n\t\t\t\t\ttd.dataset[dataAttr] = 'desk-disabled';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// removes all mousemove and mouseleave events handlers\n\t\t\t// and also removes all data sorted attributes from all cells\n\t\t\tlet tds = this.table.querySelectorAll('td');\n\t\t\tif (tds.length) {\n\t\t\t\ttds = [...tds];\n\t\t\t\ttds.map((td) => {\n\t\t\t\t\ts(td, sortingCellMouseMoveVertical, false);\n\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', false);\n\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, false);\n\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', false);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if active === true sets sorted events handlers\n\t\t\t// and data sorted attributes for all cells\n\t\t\tif (active) {\n\t\t\t\tif (type === 'vertical') {\n\t\t\t\t\tlet rowsLength = this.table.rows.length;\n\t\t\t\t\tlet dataYIndexStart = 0;\n\t\t\t\t\twhile (rowsLength > 0) {\n\t\t\t\t\t\tlet tds = this.table.querySelectorAll(`[data-y-index=\"${dataYIndexStart}\"]`);\n\t\t\t\t\t\ttds = [...tds];\n\t\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveVertical, active);\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', active);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.itemsPerHeader) {\n\t\t\t\t\t\t\trowsLength -= this.itemsPerHeader + 1;\n\t\t\t\t\t\t\tdataYIndexStart += this.itemsPerHeader + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowsLength = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (type === 'horizontal') {\n\t\t\t\t\tlet tds = this.table.querySelectorAll('[data-x-index=\"0\"]');\n\t\t\t\t\ttds = [...tds];\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tlet tdsPerAfter = this.table.querySelectorAll(`[data-y-index=\"${td.dataset.yIndex}\"]`);\n\t\t\t\t\t\tif(tdsPerAfter.length > 2) {\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, active);\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', active);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * adds a sortable-hover class for a cell when the cursor is over the sort icon (arrow)\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {string} type\n\t\t * @param {HTMLElement} element td\n\t\t */\n\t\tfunction sortingCellMouseMov(e, type, element) {\n\t\t\tif (e.target.tagName === 'TD') {\n\t\t\t\tconst x = e.offsetX == undefined ? e.layerX : e.offsetX;\n\t\t\t\tconst y = e.offsetY == undefined ? e.layerY : e.offsetY;\n\t\t\t\tlet xMatch = false;\n\t\t\t\tif ((type === 'vertical' && e.target.clientWidth - x <= 35) || (type === 'horizontal' && x <= 35)) {\n\t\t\t\t\txMatch = true;\n\t\t\t\t}\n\t\t\t\tif (xMatch && (e.target.clientHeight - 35) / 2 < y && (e.target.clientHeight + 35) / 2 > y) {\n\t\t\t\t\telement.classList.add('sortable-hover');\n\t\t\t\t} else {\n\t\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * calls sortingCellMouseMov with the type parameter set to vertical\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tfunction sortingCellMouseMoveVertical(e) {\n\t\t\tsortingCellMouseMov(e, 'vertical', this);\n\t\t}\n\n\t\t/**\n\t\t * calls sortingCellMouseMov with the type parameter set to horizontal\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tfunction sortingCellMouseMoveHorizontal(e) {\n\t\t\tsortingCellMouseMov(e, 'horizontal', this);\n\t\t}\n\n\t\t/**\n\t\t * remove sortable-hover class from cell when cursor leave cell\n\t\t */\n\t\tfunction tdMouseLeave() {\n\t\t\tthis.classList.remove('sortable-hover');\n\t\t}\n\n\t\t/**\n\t\t * function for sorting the table vertically by the numeric content of cells\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {HTMLElement} table\n\t\t * @param {string} type\n\t\t */\n\t\tfunction sortableTable(e, type) {\n\t\t\tif (\n\t\t\t\te.target &&\n\t\t\t\te.target.tagName === 'TD' &&\n\t\t\t\t!table.parentNode.classList.contains('wptb-preview-table-manage-cells')\n\t\t\t) {\n\t\t\t\tconst table = e.currentTarget;\n\t\t\t\tlet tableWasSorted = false;\n\t\t\t\tif (type === 'vertical' && e.target.dataset.hasOwnProperty('sortedVertical')) {\n\t\t\t\t\t/**\n\t\t\t\t\t * if table have enabled param topRowAsHeader and sellsStackDirection is column\n\t\t\t\t\t * the top and bottom rows that will not be sorted are temporarily removed from the table\n\t\t\t\t\t */\n\t\t\t\t\tconst tableRowsBefore = [];\n\t\t\t\t\tconst tableRowsAfter = [];\n\t\t\t\t\tif (this.itemsPerHeader && this.itemsPerHeader < table.rows.length) {\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\t\tconst tableRowsArr = [...table.rows];\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tfor (let i = 0; i < tableRowsArr.length; i++) {\n\t\t\t\t\t\t\tif (i < e.target.dataset.yIndex) {\n\t\t\t\t\t\t\t\ttableRowsBefore.push(tableRowsArr[i]);\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t\t} else if (i > parseInt(e.target.dataset.yIndex, 10) + this.itemsPerHeader) {\n\t\t\t\t\t\t\t\ttableRowsAfter.push(tableRowsArr[i]);\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-x-index=\"${e.target.dataset.xIndex}\"]`);\n\t\t\t\t\ttds = [...tds];\n\n\t\t\t\t\t/**\n\t\t\t\t\t * preparing table for sorting\n\t\t\t\t\t */\n\t\t\t\t\tlet rowspan;\n\t\t\t\t\tlet rowNum;\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tif (!(rowspan = parseInt(td.rowSpan, 10))) {\n\t\t\t\t\t\t\trowspan = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trowNum = td.dataset.yIndex;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\t\trowNum += rowspan;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst rowsValuesArr = [];\n\t\t\t\t\tlet rowsTdFirst;\n\t\t\t\t\tlet tdYCoordsRowSpanPrevious = 0;\n\t\t\t\t\tconst tableRowsPushed = [];\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\ttds,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\ttdYCoordsRowSpanPrevious,\n\t\t\t\t\t\t\t'vertical'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst td = tds[i];\n\n\t\t\t\t\t\tlet tdRowspan = parseInt(td.rowSpan, 10);\n\t\t\t\t\t\tif (!tdRowspan) tdRowspan = 1;\n\n\t\t\t\t\t\ttdYCoordsRowSpanPrevious = parseInt(td.dataset.yIndex, 10) + tdRowspan;\n\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\n\t\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\t\tfor (let j = 0; j < tdRowspan; j++) {\n\t\t\t\t\t\t\trowsTd.push(table.rows[parseInt(td.dataset.yIndex, 10) + j]);\n\t\t\t\t\t\t\ttableRowsPushed.push(parseInt(td.dataset.yIndex, 10) + j);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (td.dataset.yIndex > 0) {\n\t\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowsTdFirst = rowsTd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedVertical');\n\t\t\t\t\tif (!orderBy) return;\n\n\t\t\t\t\tif (rowsValuesArr.length) rowsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\t\trowsValuesArr.unshift({ rowsTd: rowsTdFirst });\n\n\t\t\t\t\tif (rowsValuesArr.length < table.rows.length) {\n\t\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\t\tif (tableRowsPushed.indexOf(i) > -1) continue;\n\t\t\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\t\t\trowsTd.push(table.rows[i]);\n\n\t\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tBody = table.querySelector('tbody');\n\t\t\t\t\ttBody.innerHTML = '';\n\n\t\t\t\t\trowsValuesArr.map((rowsValObj) => {\n\t\t\t\t\t\trowsValObj.rowsTd.map((row) => {\n\t\t\t\t\t\t\ttBody.appendChild(row);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t/**\n\t\t\t\t\t * returning previously deleted rows\n\t\t\t\t\t */\n\t\t\t\t\tif (tableRowsBefore.length) {\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tif (tableLastCont) {\n\t\t\t\t\t\t\tconst trRef = tableLastCont.querySelector('tr');\n\t\t\t\t\t\t\ttableRowsBefore.map((tr) => {\n\t\t\t\t\t\t\t\ttableLastCont.insertBefore(tr, trRef);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (tableRowsAfter.length) {\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tif (tBody) {\n\t\t\t\t\t\t\ttableRowsAfter.map((tr) => {\n\t\t\t\t\t\t\t\ttableLastCont.appendChild(tr);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\t\tWPTB_CutGlueTable.glueTableHorizontally(table);\n\n\t\t\t\t\ttableWasSorted = true;\n\t\t\t\t} else if (type === 'horizontal' && e.target.dataset.xIndex === '0') {\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-y-index=\"${e.target.dataset.yIndex}\"]`);\n\t\t\t\t\ttds = [...tds];\n\n\t\t\t\t\t// preparing table for sorting\n\t\t\t\t\tlet colspan;\n\t\t\t\t\tlet colNum;\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tif (!(colspan = parseInt(td.colSpan, 10))) {\n\t\t\t\t\t\t\tcolspan = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolNum = td.dataset.xIndex;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\t\tcolNum += colspan;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst columnsValuesArr = [];\n\t\t\t\t\tlet columnsTdFirst;\n\n\t\t\t\t\tlet tdXCoordsColSpanPrevious = 0;\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\ttds,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\ttdXCoordsColSpanPrevious,\n\t\t\t\t\t\t\t'horizontal'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst td = tds[i];\n\t\t\t\t\t\tlet tdColspan = parseInt(td.colSpan, 10);\n\t\t\t\t\t\tif (!tdColspan) tdColspan = 1;\n\n\t\t\t\t\t\ttdXCoordsColSpanPrevious = parseInt(td.dataset.xIndex, 10) + tdColspan;\n\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\t\t\t\t\t\tconst columnsTd = [];\n\t\t\t\t\t\tfor (let j = 0; j < tdColspan; j++) {\n\t\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(td.dataset.xIndex, 10) + j}\"]`),\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tcolumnsTd.push(tdsColumn);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (td.dataset.xIndex > 0) {\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\t\tcolumnsTd,\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumnsTdFirst = columnsTd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedHorizontal');\n\t\t\t\t\tif (!orderBy) return;\n\n\t\t\t\t\tif (columnsValuesArr.length) columnsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\t\tcolumnsValuesArr.unshift({ columnsTd: columnsTdFirst });\n\n\t\t\t\t\tif (columnsValuesArr.length < table.maxCols) {\n\t\t\t\t\t\tconst difference = table.maxCols - columnsValuesArr.length;\n\t\t\t\t\t\tfor (let i = 0; i < difference; i++) {\n\t\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t\t...table.querySelectorAll(\n\t\t\t\t\t\t\t\t\t`[data-x-index=\"${parseInt(table.maxCols, 10) - parseInt(difference, 10) + i}\"]`\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\t\tcolumnsTd: [tdsColumn],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\ttable.rows[i].innerHTML = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumnsValuesArr.map((columnsValObj) => {\n\t\t\t\t\t\tcolumnsValObj.columnsTd.map((tdsColumn) => {\n\t\t\t\t\t\t\ttdsColumn.map((td) => {\n\t\t\t\t\t\t\t\ttable.rows[td.dataset.yIndex].appendChild(td);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\t\tWPTB_CutGlueTable.glueTableVertically(table);\n\n\t\t\t\t\ttableWasSorted = true;\n\t\t\t\t}\n\n\t\t\t\tif (tableWasSorted) {\n\t\t\t\t\tremoveCellsAttrAfterDivision(table);\n\n\t\t\t\t\tif (table.hasOwnProperty('tableSM')) {\n\t\t\t\t\t\tconst tableSM = table.tableSM();\n\t\t\t\t\t\tnew tableSM().tableStateSet();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.reassignElementsStyles('td');\n\t\t\t\t\tthis.reassignElementsStyles('tr');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Function that sets the data-attribute with the number of the row or column\n\t\t * that the table was sorted by. Returns the number of a row or column\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {string} dataAttr\n\t\t * @returns {null|boolean}\n\t\t */\n\t\tfunction setSortedAscDataAttr(e, dataAttr) {\n\t\t\tif (\n\t\t\t\te.currentTarget &&\n\t\t\t\t(e.currentTarget.classList.contains('wptb-preview-table') ||\n\t\t\t\t\te.currentTarget.classList.contains('wptb-preview-table-mobile'))\n\t\t\t) {\n\t\t\t\tif (!e.target.dataset[dataAttr] || e.target.dataset[dataAttr] === 'ask') {\n\t\t\t\t\te.target.dataset[dataAttr] = 'desk';\n\t\t\t\t} else {\n\t\t\t\t\te.target.dataset[dataAttr] = 'ask';\n\t\t\t\t}\n\n\t\t\t\treturn e.target.dataset[dataAttr];\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * defines the sorting order\n\t\t *\n\t\t * @param {string} orderBy\n\t\t * @param prev\n\t\t * @param next\n\t\t * @returns {number}\n\t\t */\n\t\tfunction sortOrder(orderBy = 'ask', prev, next) {\n\t\t\tlet prevValue = prev.value;\n\t\t\tlet nextValue = next.value;\n\t\t\tif (parseInt(prevValue) && parseInt(nextValue)) {\n\t\t\t\tprevValue = parseInt(prevValue);\n\t\t\t\tnextValue = parseInt(nextValue);\n\t\t\t}\n\n\t\t\tif (orderBy === 'ask') {\n\t\t\t\tif (prevValue < nextValue) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (prevValue === nextValue) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (prevValue < nextValue) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (prevValue === nextValue) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\t/**\n\t\t * return cell text elements values\n\t\t *\n\t\t * @param cell {HTMLElement}\n\t\t * @returns {string}\n\t\t */\n\t\tfunction textElementsValuesGet(cell) {\n\t\t\tlet textElements = cell.querySelectorAll('.wptb-text-container');\n\t\t\ttextElements = [...textElements];\n\t\t\tlet value = '';\n\t\t\tfor (let j = 0; j < textElements.length; j++) {\n\t\t\t\tconst p = textElements[j].querySelector('p');\n\t\t\t\tvalue += p.innerText;\n\t\t\t\tif (j !== textElements.length - 1) value += ' ';\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\n\t\t/**\n\t\t * adds cells to the collection of cells in the row or column that the table is sorted by.\n\t\t * These added cells are not originally were added in the collection,\n\t\t * because they are combined with cells from higher rows or left-side columns\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {HTMLElement} table\n\t\t * @param {array} tds\n\t\t * @param {number} i\n\t\t * @param {number} tdIndexSpanPrev\n\t\t * @param {string} type\n\t\t * @returns {{tds: *}|boolean|{tds: *, i: *}}\n\t\t */\n\t\tfunction changeSortingTdsCollection(e, table, tds, i, tdIndexSpanPrev, type) {\n\t\t\tconst td = tds[i];\n\t\t\tlet tdsCollectionChanged = false;\n\t\t\tlet collectionTds;\n\t\t\tlet collectionTdsJSpan;\n\t\t\tlet collectionTdsJSpanProperty;\n\t\t\tlet indexName;\n\t\t\tlet indexNameCamelCase;\n\t\t\tlet indexNamePerpendicularCamelCase;\n\t\t\tlet tdSpanProperty;\n\t\t\t// max rows or columns column\n\t\t\tlet tableGroupCount;\n\n\t\t\tif (type === 'vertical') {\n\t\t\t\tcollectionTdsJSpanProperty = 'colSpan';\n\t\t\t\tindexName = 'data-y-index';\n\t\t\t\tindexNameCamelCase = 'yIndex';\n\t\t\t\tindexNamePerpendicularCamelCase = 'xIndex';\n\t\t\t\ttdSpanProperty = 'rowSpan';\n\t\t\t\ttableGroupCount = table.rows.length;\n\t\t\t} else if (type === 'horizontal') {\n\t\t\t\tcollectionTdsJSpanProperty = 'rowSpan';\n\t\t\t\tindexName = 'data-x-index';\n\t\t\t\tindexNameCamelCase = 'xIndex';\n\t\t\t\tindexNamePerpendicularCamelCase = 'yIndex';\n\t\t\t\ttdSpanProperty = 'colSpan';\n\t\t\t\ttableGroupCount = table.maxCols;\n\t\t\t}\n\n\t\t\tif (td.dataset[indexNameCamelCase] - tdIndexSpanPrev > 0) {\n\t\t\t\tcollectionTds = table.querySelectorAll(`[${indexName}=\"${tdIndexSpanPrev}\"]`);\n\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttds.splice(i, 0, collectionTds[j]);\n\t\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tdsCollectionChanged) return { tds, i };\n\n\t\t\tlet tdSpan = parseInt(td[tdSpanProperty], 10);\n\t\t\tif (!tdSpan) tdSpan = 1;\n\t\t\tif (i == tds.length - 1 && parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan < tableGroupCount) {\n\t\t\t\tcollectionTds = table.querySelectorAll(\n\t\t\t\t\t`[${indexName}=\"${parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan}\"]`\n\t\t\t\t);\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttds.push(collectionTds[j]);\n\t\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tdsCollectionChanged) return { tds };\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * remove cells attributes which were used for division table\n\t\t *\n\t\t * @param {HTMLElement} table\n\t\t */\n\t\tfunction removeCellsAttrAfterDivision(table) {\n\t\t\tconst tdsAll = [...table.getElementsByTagName('td')];\n\t\t\tfor (let i = 0; i < tdsAll.length; i++) {\n\t\t\t\tif (tdsAll[i].hasAttribute('data-same-cell-before-division')) {\n\t\t\t\t\ttdsAll[i].removeAttribute('data-same-cell-before-division');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * function for run sorting table vertically\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tthis.sortableTableVerticalStart = function (e) {\n\t\t\tsortableTable.call(thisObject, e, 'vertical');\n\t\t};\n\n\t\t/**\n\t\t * function for run sorting table horizontally\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tthis.sortableTableHorizontalStart = function (e) {\n\t\t\tsortableTable.call(thisObject, e, 'horizontal');\n\t\t};\n\n\t\treturn this;\n\t}\n\n\treturn WPTB_SortTable;\n});\n","const WPTB_RecalculateIndexes = function (table) {\n    let trs = table.getElementsByTagName( 'tr' ),\n        tds, maxCols = 0, maxColsFull = 0, tdsArr = [];\n\n    for ( let i = 0; i < trs.length; i++ ) {\n        tds = trs[i].getElementsByTagName( 'td' );\n\n        if ( tdsArr[i] == undefined ) {\n            tdsArr[i] = [];\n        }\n\n        let jMainIter = 0;\n        for ( let j = 0; j < tds.length; j++ ) {\n            if ( tdsArr[i][j] != undefined ) {\n                for ( let y = 0; y < 100; y++ ) {\n                    if ( tdsArr[i][jMainIter] != undefined ) {\n                        jMainIter++;\n                        continue;\n                    }\n                    tdsArr[i][jMainIter] = tds[j];\n                    tds[j].dataset.xIndex = jMainIter;\n                    break;\n                }\n            } else {\n                tdsArr[i][j] = tds[j];\n                tds[j].dataset.xIndex = jMainIter;\n            }\n            tds[j].dataset.yIndex = i;\n\n            if ( tds[j].colSpan > 1 ) {\n                for ( let k = 1; k < tds[j].colSpan; k++ ) {\n                    jMainIter++;\n                    tdsArr[i][jMainIter] = 'tdDummy';\n                }\n            }\n\n            if ( tds[j].rowSpan > 1 ) {\n                for ( let x = 1; x < tds[j].rowSpan; x++ ) {\n                    if ( tdsArr[i + x] == undefined ) {\n                        tdsArr[i + x] = [];\n                    }\n                    for ( let z = 0; z < tds[j].colSpan; z++ ) {\n                        tdsArr[i + x][jMainIter - tds[j].colSpan + 1 + z ] = 'tdDummy';\n                    }\n                }\n            }\n            jMainIter++;\n        }\n\n        if ( tds.length > maxCols ) {\n            maxCols = tds.length;\n        }\n\n        if( i == 0 ) {\n            maxColsFull = jMainIter;\n        }\n    }\n    table.columns = maxCols;\n    table.maxCols = maxColsFull;\n}\n","/**\n * UMD for data table generator.\n *\n * @param {string} key property name to assign to context\n * @param {Object} context context object\n * @param {Function} factory factory function\n */\n(function assignToGlobal(key, context, factory) {\n\tif (typeof module !== 'undefined' && typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t}\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_DataTableGenerator', self || global, () => {\n\t/**\n\t * Default mappings for element value binds.\n\t *\n\t * @type {Object}\n\t */\n\tconst defaultMappings = {\n\t\tdefault: ['text'],\n\t\tbutton: ['link'],\n\t\tstar_rating: ['rating'],\n\t\timage: ['link'],\n\t\tcircle_rating: ['percentage'],\n\t\ticon: ['icon'],\n\t};\n\n\t/**\n\t * Deep merge object.\n\t *\n\t * @param {Object} source source object\n\t * @param {Object} target target object\n\t * @return {Object} merged object\n\t */\n\t// eslint-disable-next-line import/prefer-default-export\n\tconst objectDeepMerge = (source, target) => {\n\t\t// eslint-disable-next-line array-callback-return\n\t\tObject.keys(target).map((k) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(target, k)) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(source, k)) {\n\t\t\t\t\tif (typeof source[k] === 'object') {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tsource[k] = { ...source[k], ...target[k] };\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tsource[k] = target[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn source;\n\t};\n\n\t/**\n\t * Get element id from a table element's class.\n\t *\n\t * @param {HTMLElement} tableElement table element\n\t * @return {null|string} null if no id is found\n\t */\n\tconst parseTableElementId = (tableElement) => {\n\t\tif (tableElement) {\n\t\t\tconst activeElementIdArray = tableElement\n\t\t\t\t.getAttribute('class')\n\t\t\t\t.split(' ')\n\t\t\t\t.filter((c) => {\n\t\t\t\t\tconst regExp = new RegExp(/^wptb-element-(.+)-(\\d+)$/, 'g');\n\t\t\t\t\treturn regExp.test(c);\n\t\t\t\t})[0];\n\n\t\t\tif (activeElementIdArray) {\n\t\t\t\treturn activeElementIdArray.replace('wptb-element-', '');\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t/**\n\t * Find table element type from its class.\n\t *\n\t * @param {HTMLElement} tableElement table element\n\t * @return {null|string} null if no type is found\n\t */\n\tconst parseElementType = (tableElement) => {\n\t\tif (tableElement) {\n\t\t\tconst activeElementKindArray = tableElement\n\t\t\t\t.getAttribute('class')\n\t\t\t\t.split(' ')\n\t\t\t\t.filter((c) => {\n\t\t\t\t\tconst regExp = new RegExp(/^wptb-element-(.+)-(\\d+)$/, 'g');\n\t\t\t\t\treturn regExp.test(c);\n\t\t\t\t})[0];\n\n\t\t\tif (activeElementKindArray) {\n\t\t\t\tconst regExp = new RegExp(/^wptb-element-(.+)-(\\d+)$/, 'g');\n\t\t\t\tconst [, elementType] = regExp.exec(activeElementKindArray);\n\t\t\t\treturn elementType;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Operator type.\n\t *\n\t * @param {Object} options options object\n\t * @param {Object} dataManager data manager instance\n\t * @param {Object} factoryContext operator factory context\n\t * @class\n\t */\n\tfunction OperatorType(options, dataManager, factoryContext) {\n\t\tconst defaultOptions = {\n\t\t\tname: 'default',\n\t\t\tmethods: {\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t * @param {Object} bindingOptions an object of row binding options\n\t\t\t\t * @return {number} maximum amount of rows this operator will generate.\n\t\t\t\t */\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\tcalculateMaxRows(bindingOptions) {\n\t\t\t\t\treturn sliceResult(this.getOperatorResult(bindingOptions), bindingOptions).length;\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * Get operator result values.\n\t\t\t\t *\n\t\t\t\t * @param {Object} operatorOptions operator options to use\n\t\t\t\t * @return {Array} generated values array based on operator\n\t\t\t\t */\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\tgetOperatorResult(operatorOptions) {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\t// merge default options with the supplied ones\n\t\tthis.options = objectDeepMerge(defaultOptions, options);\n\n\t\t// data manager\n\t\tthis.dataManager = dataManager;\n\n\t\t// factory context\n\t\tthis.factory = factoryContext;\n\n\t\t/**\n\t\t * Raise option methods to instance context to use context related properties.\n\t\t */\n\t\tconst upliftMethodsToInstanceContext = () => {\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tObject.keys(this.options.methods).map((method) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.options.methods, method)) {\n\t\t\t\t\tthis[method === 'getOperatorResult' ? 'innerOperatorResult' : method] = this.options.methods[\n\t\t\t\t\t\tmethod\n\t\t\t\t\t].bind(this);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Slice operator results according to demanded row amounts.\n\t\t *\n\t\t * @param {Array} results operator results\n\t\t * @param {{rowAmount, rowCustomAmount}} options object\n\t\t * @return {Array} sliced results array\n\t\t */\n\t\tconst sliceResult = (results, { rowAmount, rowCustomAmount }) => {\n\t\t\tconst sliceAmount =\n\t\t\t\t// eslint-disable-next-line no-nested-ternary\n\t\t\t\trowAmount === 'all'\n\t\t\t\t\t? results.length\n\t\t\t\t\t: rowCustomAmount > results.length\n\t\t\t\t\t? results.length\n\t\t\t\t\t: rowCustomAmount;\n\n\t\t\treturn results.slice(0, sliceAmount);\n\t\t};\n\n\t\t/**\n\t\t * Get operator process results.\n\t\t *\n\t\t * @param {Object} options options object\n\t\t * @return {Array} final operator results\n\t\t */\n\t\t// eslint-disable-next-line no-shadow\n\t\tthis.getOperatorResult = (options) => {\n\t\t\t// eslint-disable-next-line prefer-spread\n\t\t\t// return sliceResult(this.innerOperatorResult(options), options);\n\t\t\treturn this.innerOperatorResult(options);\n\t\t};\n\n\t\tupliftMethodsToInstanceContext();\n\t}\n\n\t/**\n\t * Highest/lowest operator options.\n\t *\n\t * @type {Object}\n\t */\n\tconst highestLowest = {\n\t\tmethods: {\n\t\t\tgetOperatorResult({ compareColumn, operatorType }) {\n\t\t\t\tconst newValuesArray = this.dataManager.getValues();\n\t\t\t\tnewValuesArray.sort((a, b) => {\n\t\t\t\t\tconst aVal = Number.parseFloat(this.dataManager.getColumnValueByIndex(0, compareColumn, [a]));\n\t\t\t\t\tconst bVal = Number.parseFloat(this.dataManager.getColumnValueByIndex(0, compareColumn, [b]));\n\n\t\t\t\t\treturn (aVal - bVal) * (operatorType === 'highest' ? -1 : 1);\n\t\t\t\t});\n\n\t\t\t\treturn [newValuesArray[0]];\n\t\t\t},\n\t\t},\n\t};\n\n\t/**\n\t * Common operator object for than operators.\n\t *\n\t * @type {Object}\n\t */\n\tconst thanOperators = {\n\t\tmethods: {\n\t\t\tgetOperatorResult({ compareColumn, operatorType, thanAmount }) {\n\t\t\t\treturn this.dataManager.getValues().filter((row) => {\n\t\t\t\t\tconst comparedColumnVal = Number.parseFloat(\n\t\t\t\t\t\tthis.dataManager.getColumnValueByIndex(0, compareColumn, [row])\n\t\t\t\t\t);\n\t\t\t\t\tconst parsedThanAmount = Number.parseFloat(thanAmount);\n\n\t\t\t\t\treturn operatorType === 'higher'\n\t\t\t\t\t\t? comparedColumnVal > parsedThanAmount\n\t\t\t\t\t\t: comparedColumnVal < parsedThanAmount;\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t};\n\n\t/**\n\t * Operator type options that will be used to generator operators in operator factory.\n\t *\n\t * @type {Object}\n\t */\n\tconst operatorTypeOptions = {\n\t\thighest: highestLowest,\n\t\tlowest: highestLowest,\n\t\tnot: {\n\t\t\tmethods: {\n\t\t\t\tnotOperation(options) {\n\t\t\t\t\tconst notOperator = options.operatorType2;\n\t\t\t\t\tconst notOperatorOptions = { ...options, operatorType: notOperator };\n\n\t\t\t\t\t// execute second operator process to find generated rows for that operator\n\t\t\t\t\tconst notOperationValues = this.factory\n\t\t\t\t\t\t.getOperator(notOperator)\n\t\t\t\t\t\t.getOperatorResult(notOperatorOptions)[0];\n\n\t\t\t\t\tconst dataRowId = notOperationValues.rowId;\n\n\t\t\t\t\t// filter out rows generated by second operator process to perform not operation\n\t\t\t\t\treturn this.dataManager.getValues().filter((row) => {\n\t\t\t\t\t\treturn row.rowId !== dataRowId;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetOperatorResult(options) {\n\t\t\t\t\treturn this.notOperation(options);\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thigher: thanOperators,\n\t\tlower: thanOperators,\n\t\tequal: {\n\t\t\tmethods: {\n\t\t\t\tgetOperatorResult({ compareColumn, equalAmount }) {\n\t\t\t\t\treturn this.dataManager.getValues().filter((row) => {\n\t\t\t\t\t\treturn this.dataManager.getColumnValueByIndex(0, compareColumn, [row]) === equalAmount;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n\n\t/**\n\t * Operator factory for easy operator functions.\n\t *\n\t * @param {Object} operatorOptions individual operator options.\n\t * @param {Object} dataManager DataManager instance\n\t * @class\n\t */\n\tfunction OperatorFactory(operatorOptions, dataManager) {\n\t\t/**\n\t\t * Operator type instances.\n\t\t *\n\t\t * Operator name will be used as key and its instance will be used at its value.\n\t\t * This object will be populated with instances based on OperatorType object at factory instance generation.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tlet operatorTypeInstances = {};\n\n\t\t/**\n\t\t * Get operator type instance.\n\t\t *\n\t\t * @param {string} operatorName operator name\n\t\t * @return {Object} operator type instance\n\t\t */\n\t\tthis.getOperator = (operatorName) => {\n\t\t\treturn operatorTypeInstances[operatorName];\n\t\t};\n\n\t\t/**\n\t\t * Create operator type instances.\n\t\t */\n\t\tconst createOperators = () => {\n\t\t\toperatorTypeInstances = {};\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tObject.keys(operatorOptions).map((optionName) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(operatorOptions, optionName)) {\n\t\t\t\t\toperatorTypeInstances[optionName] = new OperatorType(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: optionName,\n\t\t\t\t\t\t\t...operatorOptions[optionName],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdataManager,\n\t\t\t\t\t\tthis\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Operator factory startup hook\n\t\t */\n\t\tconst startUp = () => {\n\t\t\tcreateOperators();\n\t\t};\n\n\t\t// start operator factory initialization\n\t\tstartUp();\n\t}\n\n\t/**\n\t * Data manager for various data operations.\n\t *\n\t * @param {Array} values values array\n\t * @param {Object} bindings bindings object\n\t * @class\n\t */\n\tfunction DataManager(values = [], bindings = {}) {\n\t\tlet innerValues = values;\n\t\tlet innerBindings = bindings;\n\n\t\t/**\n\t\t * Update values.\n\t\t *\n\t\t * @param {Array} newValues new values array\n\t\t */\n\t\tthis.updateValues = (newValues) => {\n\t\t\tinnerValues = newValues;\n\t\t};\n\n\t\t/**\n\t\t * Update bindings.\n\t\t *\n\t\t * @param {Object} newBindings\n\t\t */\n\t\tthis.updateBindings = (newBindings) => {\n\t\t\tinnerBindings = newBindings;\n\t\t};\n\n\t\t/**\n\t\t * Get id of a data column from index.\n\t\t *\n\t\t * @param {number} index column index\n\t\t * @return {string} column id\n\t\t */\n\t\tthis.getColumnIdFromIndex = (index) => {\n\t\t\treturn innerValues[0].values[index]?.colId;\n\t\t};\n\n\t\t/**\n\t\t * Get all values of a column in data table.\n\t\t *\n\t\t * @param {string} columnId data table column id\n\t\t * @param {Array} customValues custom values to use\n\t\t * @return {Array} all values related to that column\n\t\t */\n\t\tthis.getColumnValues = (columnId, customValues = null) => {\n\t\t\tconst valuesToUse = customValues || innerValues;\n\t\t\treturn valuesToUse.reduce((carry, row) => {\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\trow.values.map((cell) => {\n\t\t\t\t\tif (cell.colId === columnId) {\n\t\t\t\t\t\tcarry.push(cell.value);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn carry;\n\t\t\t}, []);\n\t\t};\n\n\t\t/**\n\t\t * Get a column value by index.\n\t\t *\n\t\t * @param {number} index index\n\t\t * @param {string} columnId column id\n\t\t * @param {Array} customValues custom value array, is supplied values will be selected from here instead of store values\n\t\t * @return {null|string} column value, null if none found on index or column id\n\t\t */\n\t\tthis.getColumnValueByIndex = (index, columnId, customValues = null) => {\n\t\t\tconst columnValues = this.getColumnValues(columnId, customValues);\n\n\t\t\tlet value = null;\n\t\t\tif (columnValues) {\n\t\t\t\tif (columnValues[index]) {\n\t\t\t\t\tvalue = columnValues[index];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn value;\n\t\t};\n\n\t\t/**\n\t\t * Get a row object by its id.\n\t\t *\n\t\t * @param {string} rowId row id\n\t\t * @return {Object} row object\n\t\t */\n\t\tthis.getRowById = (rowId) => {\n\t\t\treturn innerValues.filter((row) => row.rowId === rowId)[0];\n\t\t};\n\n\t\t/**\n\t\t * Get binding with a specific id.\n\t\t *\n\t\t * @param {string} id id for the target binding\n\t\t * @param {string|null} type binding type, null for none\n\t\t */\n\t\tthis.getBinding = (id, type) => {\n\t\t\tif (innerBindings[type]) {\n\t\t\t\treturn innerBindings[type][id];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Get values of data manager.\n\t\t * This function will return immutable version of values.\n\t\t *\n\t\t * @return {Array} values array\n\t\t */\n\t\tthis.getValues = () => {\n\t\t\treturn Array.from(innerValues);\n\t\t};\n\n\t\t/**\n\t\t * Get values of a data row from its index.\n\t\t *\n\t\t * @param {number} rowIndex row index\n\t\t * @return {Array} row values\n\t\t */\n\t\tthis.getRowValuesByIndex = (rowIndex) => {\n\t\t\treturn Array.from(innerValues)[rowIndex];\n\t\t};\n\t}\n\n\t/**\n\t * Data table generator for frontend usage.\n\t *\n\t * @class\n\t */\n\tfunction DataTableGenerator() {\n\t\t/**\n\t\t * Data manager instance\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.dataManager = {\n\t\t\t_dataManager: null,\n\t\t\tget instance() {\n\t\t\t\t/* eslint-disable no-underscore-dangle */\n\t\t\t\tif (!this._dataManager) {\n\t\t\t\t\tthis._dataManager = new DataManager();\n\t\t\t\t}\n\n\t\t\t\treturn this._dataManager;\n\t\t\t\t/* eslint-enable no-underscore-dangle */\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Operator factory instance.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.operatorFactory = new OperatorFactory(operatorTypeOptions, this.dataManager.instance);\n\n\t\t/**\n\t\t * Update data manager instance.\n\t\t *\n\t\t * @param {Array} values values array\n\t\t * @param {Object} bindings bindings object\n\t\t */\n\t\tthis.updateDataManager = (values = [], bindings = {}) => {\n\t\t\tthis.dataManager.instance.updateValues(values);\n\t\t\tthis.dataManager.instance.updateBindings(bindings);\n\t\t};\n\n\t\t/**\n\t\t * Current bindings to be used for current generate process.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.currentBindings = {};\n\n\t\t/**\n\t\t * Current values to be used for current generate process.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.currentValues = {};\n\n\t\t/**\n\t\t * Parse target element into its cells and rows.\n\t\t *\n\t\t * @param {HTMLElement} table table element to be parsed\n\t\t */\n\t\tconst parseTable = (table) => {\n\t\t\treturn Array.from(table.querySelectorAll('tr'));\n\t\t};\n\n\t\t/**\n\t\t * Clear table body contents of a table.\n\t\t *\n\t\t * @param {HTMLElement} table table to be cleared\n\t\t */\n\t\tconst clearTable = (table) => {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\ttable.querySelector('tbody').innerHTML = '';\n\t\t};\n\n\t\t/**\n\t\t * Get data table related id of a row element.\n\t\t *\n\t\t * @param {HTMLElement} rowElement row element\n\t\t * @return {string|null} row element id, null if no id found\n\t\t */\n\t\tconst getRowId = (rowElement) => {\n\t\t\treturn rowElement.dataset.dataTableRowId;\n\t\t};\n\n\t\t/**\n\t\t * Get binding of a table element.\n\t\t *\n\t\t * @param {HTMLElement} tableElement table element\n\t\t * @param {string} type binding type\n\t\t * @return {null | string} binding\n\t\t */\n\t\tconst getTableElementBinding = (tableElement, type) => {\n\t\t\tconst elementId = parseTableElementId(tableElement);\n\t\t\tlet binding = null;\n\n\t\t\tif (elementId) {\n\t\t\t\tbinding = this.dataManager.instance.getBinding(elementId, type);\n\t\t\t}\n\n\t\t\treturn binding;\n\t\t};\n\n\t\t/**\n\t\t * Get associated row binding for the given row element.\n\t\t *\n\t\t * @param {HTMLElement} rowElement row element\n\t\t * @return {Object|null} binding for supplied row, null if no binding found\n\t\t */\n\t\tconst getRowBinding = (rowElement) => {\n\t\t\tconst rowId = getRowId(rowElement);\n\n\t\t\tlet binding = null;\n\n\t\t\tif (rowId) {\n\t\t\t\tbinding = this.dataManager.instance.getBinding(rowId, 'row');\n\t\t\t}\n\n\t\t\treturn binding;\n\t\t};\n\n\t\t/**\n\t\t * Calculate maximum amount of rows that can be populated from a blueprint row.\n\t\t *\n\t\t * @param {HTMLElement} rowElement row element\n\t\t */\n\t\tconst calculateMaxRows = (rowElement) => {\n\t\t\tconst rowBindingMode = getRowBinding(rowElement)?.mode;\n\n\t\t\t// if row binding mode is not defined for the row element, use auto as default\n\t\t\tif (rowBindingMode === 'auto' || !rowBindingMode) {\n\t\t\t\treturn this.currentValues.length;\n\t\t\t}\n\t\t\t// max row calculations for operator mode\n\t\t\tif (rowBindingMode === 'operator') {\n\t\t\t\tconst rowBindingOperatorObject = getRowBinding(rowElement).operator;\n\n\t\t\t\treturn this.operatorFactory\n\t\t\t\t\t.getOperator(rowBindingOperatorObject.operatorType)\n\t\t\t\t\t?.calculateMaxRows(rowBindingOperatorObject);\n\t\t\t}\n\n\t\t\tconst cells = Array.from(rowElement.querySelectorAll('td'));\n\n\t\t\treturn cells.reduce((carry, cell) => {\n\t\t\t\tconst tableElements = Array.from(cell.querySelectorAll('.wptb-ph-element'));\n\n\t\t\t\t// max amount of column values can be applied to this cell\n\t\t\t\tlet maxValue = 0;\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\ttableElements.map((element) => {\n\t\t\t\t\tconst colBinding = getTableElementBinding(element, 'column');\n\n\t\t\t\t\tif (colBinding) {\n\t\t\t\t\t\tmaxValue = Object.keys(colBinding)\n\t\t\t\t\t\t\t// TODO [erdembircan] rewrite this with filter > map\n\t\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\t\t\t.map((key) => {\n\t\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(colBinding, key)) {\n\t\t\t\t\t\t\t\t\treturn colBinding[key];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\t\t\t.reduce((carry, binding) => {\n\t\t\t\t\t\t\t\tconst values = this.dataManager.instance.getColumnValues(binding);\n\t\t\t\t\t\t\t\treturn Math.max(values.length, carry);\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn Math.max(maxValue, carry);\n\t\t\t}, 1);\n\t\t};\n\n\t\t/**\n\t\t * Value apply list for different table elements.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst valueApplyList = {\n\t\t\ttext: (tableElement, value) => {\n\t\t\t\tconst { text } = value;\n\t\t\t\tif (text) {\n\t\t\t\t\tconst pElement = tableElement.querySelector('p');\n\t\t\t\t\t// since tinyMCE wraps text content with native font style elements, should be applying text value to first child node of paragraph element\n\t\t\t\t\tpElement.childNodes[0].textContent = value.text;\n\t\t\t\t}\n\t\t\t},\n\t\t\tbutton: (tableElement, value) => {\n\t\t\t\tconst { text, link } = value;\n\t\t\t\tif (text) {\n\t\t\t\t\tconst pElement = tableElement.querySelector('p');\n\t\t\t\t\t// since tinyMCE wraps text content with native font style elements, should be applying text value to first child node of paragraph element\n\t\t\t\t\tpElement.childNodes[0].textContent = value.text;\n\t\t\t\t}\n\t\t\t\tif (link) {\n\t\t\t\t\tconst anchorElement = tableElement.querySelector('a');\n\t\t\t\t\tif (anchorElement) {\n\t\t\t\t\t\tanchorElement.href = link;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tstar_rating: (tableElement, { rating }) => {\n\t\t\t\tif (rating) {\n\t\t\t\t\tconst maxStarCount = Number.parseInt(tableElement.dataset.starCount, 10);\n\t\t\t\t\tconst parsedValue = Number.parseFloat(rating);\n\n\t\t\t\t\t// limit star rating between maximum stars available on element and current rating\n\t\t\t\t\tconst limitedRating = Math.min(maxStarCount, parsedValue);\n\t\t\t\t\tconst roundedRating = Math.floor(limitedRating);\n\n\t\t\t\t\tconst emptyStars = Array.from(tableElement.querySelectorAll('li.wptb-rating-star'));\n\n\t\t\t\t\tconst fullStars = Array.from(tableElement.querySelectorAll('li.wptb-rating-star')).filter(\n\t\t\t\t\t\t(star, index) => {\n\t\t\t\t\t\t\t// clear any star rating on rating element\n\t\t\t\t\t\t\tstar.classList.remove('wptb-rating-star-selected-full');\n\t\t\t\t\t\t\tstar.classList.remove('wptb-rating-star-selected-half');\n\n\t\t\t\t\t\t\treturn index < roundedRating;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\tfullStars.map((star) => {\n\t\t\t\t\t\tstar.classList.add('wptb-rating-star-selected-full');\n\t\t\t\t\t});\n\n\t\t\t\t\t// add any remaining half star\n\t\t\t\t\tif (roundedRating !== limitedRating) {\n\t\t\t\t\t\temptyStars[fullStars.length].classList.add('wptb-rating-star-selected-half');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\timage: (tableElement, { link }) => {\n\t\t\t\tif (link) {\n\t\t\t\t\tlet imageElement = tableElement.querySelector('img');\n\t\t\t\t\tif (!imageElement) {\n\t\t\t\t\t\timageElement = document.createElement('img');\n\t\t\t\t\t\tconst imageParentAnchor = tableElement.querySelector('a');\n\t\t\t\t\t\timageParentAnchor.innerHTML = '';\n\n\t\t\t\t\t\timageParentAnchor.appendChild(imageElement);\n\t\t\t\t\t\timageElement.width = 200;\n\t\t\t\t\t\timageElement.height = 200;\n\t\t\t\t\t}\n\n\t\t\t\t\timageElement.src = link;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcircle_rating: (tableElement, { percentage }) => {\n\t\t\t\tif (percentage) {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\ttableElement.dataset.percentageCount = percentage;\n\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\ttableElement.querySelector('.wptb-rating-circle-wrapper span').textContent = `${percentage}%`;\n\n\t\t\t\t\tconst circleSlice = tableElement.querySelector('.wptb-rating-circle-slice');\n\n\t\t\t\t\tcircleSlice.style.clip =\n\t\t\t\t\t\tpercentage <= 50 ? 'rect(0em, 1em, 1em, 0.5em)' : 'rect(auto, auto, auto, auto)';\n\n\t\t\t\t\tcircleSlice.querySelector('.wptb-rating-circle-bar').style.transform = `rotate(${\n\t\t\t\t\t\tpercentage > 50 ? 180 : 0\n\t\t\t\t\t}deg)`;\n\n\t\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\t\tconst limitedPercentage = Math.max(100, percentage) == percentage ? 100 : percentage;\n\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tcircleSlice.querySelector('.wptb-rating-circle-fill').style.transform = `rotate(${\n\t\t\t\t\t\t(360 / 100) * limitedPercentage\n\t\t\t\t\t}deg)`;\n\t\t\t\t}\n\t\t\t},\n\t\t\ttext_icon_element: (tableElement, { text }) => {\n\t\t\t\tif (text) {\n\t\t\t\t\tconst textElement = tableElement.querySelector('#wptbTextIconMainText');\n\t\t\t\t\tif (textElement) {\n\t\t\t\t\t\ttextElement.textContent = text;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ticon: (tableElement, { valueColumn }) => {\n\t\t\t\tif (valueColumn) {\n\t\t\t\t\t// TODO [erdembircan] icon element data generation\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Add value to a table element.\n\t\t *\n\t\t * @param {HTMLElement} tableElement table element\n\t\t * @param {*} value value\n\t\t * @param {Object} mapper mapper object to map values to certain element properties\n\t\t */\n\t\tconst addValueToTableElement = (tableElement, value, mapper = null) => {\n\t\t\tconst tableElementType = parseElementType(tableElement);\n\n\t\t\tlet elementValue = value;\n\n\t\t\tif (mapper) {\n\t\t\t\t// decide which mapper object to use, if no mapper property is defined for current table element type, use default mapper object\n\t\t\t\tconst mapperIndex = mapper[tableElementType] ?? mapper.default ?? ['text'];\n\n\t\t\t\t// create a new value object with mapped properties\n\t\t\t\telementValue = {};\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\tmapperIndex.map((mapIndex) => {\n\t\t\t\t\telementValue[mapIndex] = value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (valueApplyList[tableElementType]) {\n\t\t\t\tvalueApplyList[tableElementType](tableElement, elementValue);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Slice row data values according to its bindings.\n\t\t *\n\t\t * @param {Object} rowBindings row bindings\n\t\t * @param {Array} rowValues row values\n\t\t * @return {Array} sliced row data values\n\t\t */\n\t\tconst sliceRowDataValues = (rowBindings, rowValues) => {\n\t\t\tlet slicedValues = rowValues;\n\n\t\t\t// null check for builder startup\n\t\t\tif (rowBindings && rowBindings.mode === 'operator') {\n\t\t\t\tconst { rowAmount, rowCustomAmount } = rowBindings.operator;\n\t\t\t\tif (rowAmount === 'custom') {\n\t\t\t\t\tconst sliceAmount = rowCustomAmount > rowValues.length ? rowValues.length : rowCustomAmount;\n\t\t\t\t\tslicedValues = slicedValues.slice(0, sliceAmount);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn slicedValues;\n\t\t};\n\n\t\t/**\n\t\t * Sort row data values.\n\t\t *\n\t\t * @param {Object} sortOptions options object\n\t\t * @param {Array} rowValues row data values\n\t\t * @return {Array} sorted row data values\n\t\t */\n\t\tconst sortRowDataValues = (sortOptions, rowValues) => {\n\t\t\t// immutable row value array\n\t\t\tconst sortedValues = Array.from(rowValues);\n\n\t\t\tif (sortOptions) {\n\t\t\t\tconst { sortType, sortDirection, sortTarget } = sortOptions;\n\n\t\t\t\tif (sortType && sortDirection && sortType && sortTarget !== 'none') {\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\tsortedValues.sort((a, b) => {\n\t\t\t\t\t\tlet aVal = this.dataManager.instance.getColumnValueByIndex(0, sortTarget, [a]);\n\t\t\t\t\t\tlet bVal = this.dataManager.instance.getColumnValueByIndex(0, sortTarget, [b]);\n\n\t\t\t\t\t\t// sorting direction constant\n\t\t\t\t\t\tconst directionVal = sortDirection === 'asc' ? 1 : -1;\n\n\t\t\t\t\t\t// sort by numbers\n\t\t\t\t\t\tif (sortType === '123') {\n\t\t\t\t\t\t\taVal = Number.parseFloat(aVal);\n\t\t\t\t\t\t\tbVal = Number.parseFloat(bVal);\n\n\t\t\t\t\t\t\treturn (aVal - bVal) * directionVal;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// sort by letters\n\t\t\t\t\t\tif (aVal > bVal) {\n\t\t\t\t\t\t\treturn directionVal;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (bVal < aVal) {\n\t\t\t\t\t\t\treturn -1 * directionVal;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn sortedValues;\n\t\t};\n\n\t\t/**\n\t\t * Batch populate table elements with their assigned binding values.\n\t\t *\n\t\t * @param {Array} tableElements an array of table elements\n\t\t * @param {number} rowIndex index of current row this table elements belongs to\n\t\t * @param {Object} rowBindings row bindings for the parent row of the supplied table elements\n\t\t * @param {Array} customValues custom values to use for populate operation\n\t\t * @param {Object} customBindings custom bindings to use instead of element and rows defined ones\n\t\t */\n\t\tconst batchPopulateTableElements = (\n\t\t\ttableElements,\n\t\t\trowIndex,\n\t\t\trowBindings,\n\t\t\tcustomValues = null,\n\t\t\tcustomBindings = null\n\t\t) => {\n\t\t\tconst sortedValues = sliceRowDataValues(\n\t\t\t\trowBindings,\n\t\t\t\tsortRowDataValues(rowBindings?.sort, customValues || this.dataManager.instance.getValues())\n\t\t\t);\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\ttableElements.map((tableElement) => {\n\t\t\t\tconst bindingColIdObject =\n\t\t\t\t\tcustomBindings?.column[parseTableElementId(tableElement)] ||\n\t\t\t\t\tgetTableElementBinding(tableElement, 'column');\n\n\t\t\t\tif (bindingColIdObject) {\n\t\t\t\t\tconst value = {};\n\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\tObject.keys(bindingColIdObject).map((key) => {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(bindingColIdObject, key)) {\n\t\t\t\t\t\t\tvalue[key] = this.dataManager.instance.getColumnValueByIndex(\n\t\t\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\t\t\tbindingColIdObject[key],\n\t\t\t\t\t\t\t\tsortedValues\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\taddValueToTableElement(tableElement, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Get table elements from a supplied row element.\n\t\t *\n\t\t * @param {HTMLElement} rowElement row element\n\t\t * @return {Array} table element array\n\t\t *\n\t\t */\n\t\tconst getTableElementsFromRow = (rowElement) => {\n\t\t\treturn Array.from(rowElement.querySelectorAll('.wptb-ph-element'));\n\t\t};\n\n\t\t/**\n\t\t * Get table elements from a supplied table cell.\n\t\t *\n\t\t * @param {HTMLElement} cellElement cell element\n\t\t * @return {Array} table element array\n\t\t *\n\t\t */\n\t\tconst getTableElementsFromCell = (cellElement) => {\n\t\t\treturn Array.from(cellElement.querySelectorAll('.wptb-ph-element'));\n\t\t};\n\n\t\t/**\n\t\t * Logic for different row bindings.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst rowBindingLogicList = {\n\t\t\tauto: (rowElement, rowIndex) => {\n\t\t\t\tconst cells = Array.from(rowElement.querySelectorAll('td'));\n\n\t\t\t\tconst rowElements = [];\n\t\t\t\tconst autoBindings = cells.reduce((carry, cell, cellIndex) => {\n\t\t\t\t\tconst cellTableElements = getTableElementsFromCell(cell);\n\n\t\t\t\t\t// add cell elements to row elements array\n\t\t\t\t\trowElements.push(...cellTableElements);\n\n\t\t\t\t\t// get column value based on the index of the cell\n\t\t\t\t\tconst currentColumnId = this.dataManager.instance.getColumnIdFromIndex(cellIndex);\n\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\tcellTableElements.map((tableElement) => {\n\t\t\t\t\t\tif (currentColumnId) {\n\t\t\t\t\t\t\tconst elementId = parseTableElementId(tableElement);\n\n\t\t\t\t\t\t\tconst elementBindings = {};\n\t\t\t\t\t\t\tconst elementType = parseElementType(tableElement);\n\n\t\t\t\t\t\t\tconst availableBindingProperties = defaultMappings[elementType] || defaultMappings.default;\n\n\t\t\t\t\t\t\t// map element bindings to default binding\n\t\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\t\t\tavailableBindingProperties.map((prop) => {\n\t\t\t\t\t\t\t\telementBindings[prop] = currentColumnId;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// assign bindings relative to current cell this element resides in\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tcarry[elementId] = elementBindings;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn carry;\n\t\t\t\t}, {});\n\n\t\t\t\tbatchPopulateTableElements(rowElements, rowIndex, getRowBinding(rowElement), null, {\n\t\t\t\t\tcolumn: autoBindings,\n\t\t\t\t});\n\t\t\t},\n\t\t\toperator: (rowElement, rowIndex) => {\n\t\t\t\tconst rowBindings = getRowBinding(rowElement);\n\t\t\t\tconst operatorOptions = rowBindings.operator;\n\n\t\t\t\tbatchPopulateTableElements(\n\t\t\t\t\tgetTableElementsFromRow(rowElement),\n\t\t\t\t\trowIndex,\n\t\t\t\t\trowBindings,\n\t\t\t\t\tthis.operatorFactory.getOperator(operatorOptions.operatorType).getOperatorResult(operatorOptions)\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Generate necessary data for table elements based on binding row mode\n\t\t *\n\t\t * @param {string} mode row binding mode type\n\t\t * @param {HTMLElement} rowElement row element\n\t\t * @param {number} rowIndex current row index\n\t\t * @param {Object} modeOptions extra mode options if necessary\n\t\t */\n\t\tconst applyRowBindings = (mode, rowElement, rowIndex, modeOptions = {}) => {\n\t\t\trowBindingLogicList[mode](rowElement, rowIndex, modeOptions);\n\t\t};\n\n\t\t/**\n\t\t * Populate and generate a row element based on blueprint row.\n\t\t *\n\t\t * @param {number} index current index of row\n\t\t * @param {HTMLElement} blueprintRow blueprint row element\n\t\t * @return {HTMLElement} generated row\n\t\t */\n\t\tconst populateRow = (index, blueprintRow) => {\n\t\t\tconst clonedRow = blueprintRow.cloneNode(true);\n\n\t\t\tconst rowBinding = getRowBinding(clonedRow);\n\n\t\t\t// give priority to row auto mode over element column bindings\n\t\t\tif (rowBinding && rowBinding.mode && rowBinding.mode !== 'none') {\n\t\t\t\tapplyRowBindings(rowBinding.mode, clonedRow, index);\n\t\t\t} else {\n\t\t\t\tconst rowElements = getTableElementsFromRow(clonedRow);\n\t\t\t\tbatchPopulateTableElements(rowElements, index, rowBinding);\n\t\t\t}\n\n\t\t\treturn clonedRow;\n\t\t};\n\n\t\t/**\n\t\t * Populate a blueprint row.\n\t\t *\n\t\t * @param {HTMLElement} row blueprint row\n\t\t * @return {Array} populated blueprint rows\n\t\t */\n\t\tconst populateBlueprint = (row) => {\n\t\t\tconst maxRows = calculateMaxRows(row);\n\t\t\tconst populatedRows = [];\n\t\t\tfor (let i = 0; i < maxRows; i += 1) {\n\t\t\t\tpopulatedRows.push(populateRow(i, row));\n\t\t\t}\n\n\t\t\treturn populatedRows;\n\t\t};\n\n\t\t/**\n\t\t * Generate a data table\n\t\t *\n\t\t * @param {HTMLElement} sourceTable source table to be generated with data\n\t\t * @param {Object} bindings data bindings\n\t\t * @param {Object} values data cell values\n\t\t * @return {HTMLElement} generated data table\n\t\t */\n\t\tthis.generateDataTable = (sourceTable, bindings, values) => {\n\t\t\tthis.updateDataManager(values, bindings);\n\t\t\tthis.currentBindings = bindings;\n\t\t\tthis.currentValues = values;\n\n\t\t\tconst clonedTable = sourceTable.cloneNode(true);\n\t\t\tconst tableBody = clonedTable.querySelector('tbody');\n\n\t\t\tconst parsedRows = parseTable(clonedTable);\n\t\t\tclearTable(clonedTable);\n\n\t\t\tconst populatedRows = parsedRows.reduce((carry, blueprintRow) => {\n\t\t\t\tconst pR = populateBlueprint(blueprintRow);\n\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tcarry = [...carry, ...pR];\n\n\t\t\t\treturn carry;\n\t\t\t}, []);\n\n\t\t\tpopulatedRows.map((r) => tableBody.appendChild(r));\n\n\t\t\treturn clonedTable;\n\t\t};\n\n\t\t/**\n\t\t * Prepare data table for frontend.\n\t\t *\n\t\t * @param {HTMLElement} targetTable target table\n\t\t */\n\t\tconst prepareFrontendTable = (targetTable) => {\n\t\t\t// parse data table options from table dataset\n\t\t\tconst dataTableOptions = JSON.parse(atob(targetTable.dataset.wptbDataTableOptions));\n\n\t\t// TODO [erdembircan] remove for production\n\t\tconsole.log(dataTableOptions);\n\n\t\t\tconst mainWrapper = targetTable.parentNode;\n\t\t\t// remove blueprint table from DOM\n\t\t\ttargetTable.remove();\n\n\t\t\t// TODO [erdembircan] remove for production\n\t\t\tconsole.log(`Data rows: ${dataTableOptions.dataManager.tempData.parsedData.values.length}`);\n\n\t\t\t// only generate table if data values are present\n\t\t\tif (dataTableOptions.dataManager.tempData.parsedData.values.length > 0) {\n\t\t\t\tconst generatedTable = this.generateDataTable(\n\t\t\t\t\ttargetTable,\n\t\t\t\t\tdataTableOptions.dataManager.bindings,\n\t\t\t\t\tdataTableOptions.dataManager.tempData.parsedData.values\n\t\t\t\t);\n\n\t\t\t\t// add generated table as our new table to DOM\n\t\t\t\tmainWrapper.appendChild(generatedTable);\n\t\t\t} else {\n\t\t\t\t// remove all traces of table element from dom\n\t\t\t\tmainWrapper.parentNode.remove();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Generate data tables for frontend.\n\t\t */\n\t\tthis.frontendGenerateTables = () => {\n\t\t\tconst tables = Array.from(document.querySelectorAll('.wptb-preview-table[data-wptb-data-table=\"true\"]'));\n\t\t\ttables.map((table) => prepareFrontendTable(table));\n\t\t};\n\t}\n\n\treturn new DataTableGenerator();\n});\n","/**\n * Responsive class assignment for frontend operations.\n *\n * This file can be used as an UMD.\n */\n(function assignToGlobal(key, context, factory) {\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext[key] = factory();\n\t}\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_ResponsiveFrontend', self || global, () => {\n\t/**\n\t * Log a message to console.\n\t *\n\t * @param {string} message message to be logged\n\t * @param {string} type console log type (e.g info, warn, error)\n\t * @throws An error will be given for invalid type value\n\t */\n\tfunction logToConsole(message, type = 'log') {\n\t\tif (typeof process !== 'undefined' && process.env.NODE_ENV === 'development') {\n\t\t\tif (console[type]) {\n\t\t\t\tconsole[type](`[WPTB]: ${message}`);\n\t\t\t} else {\n\t\t\t\tthrow new Error(`no logging type found with given type value of [${type}]`);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Object implementation for cell element operations.\n\t * If an empty cellElement parameter is given, a fresh cell element will be created.\n\t *\n\t * @param {HTMLElement | null} cellElement cell element\n\t * @param {null | CellObject} [isReference=null] main cell object if the current cell is a reference to that cell in cases like merged cells\n\t * @param reference\n\t * @class\n\t */\n\tfunction CellObject(cellElement, reference = null) {\n\t\t// cell element\n\t\tthis.element = cellElement;\n\n\t\tthis.referenceObject = reference;\n\n\t\t// variable for deciding part of merged cells to be visible or not\n\t\tthis.mergedRenderStatus = true;\n\n\t\t// connected merged cell references\n\t\tthis.mergedCells = {\n\t\t\trow: [],\n\t\t\tcolumn: [],\n\t\t};\n\n\t\t/**\n\t\t * Get merged render status.\n\t\t *\n\t\t * @return {boolean} render status\n\t\t */\n\t\tthis.getMergedRenderStatus = () => {\n\t\t\treturn this.mergedRenderStatus;\n\t\t};\n\n\t\t/**\n\t\t * Set merged render status.\n\t\t *\n\t\t * @param {boolean} status render status\n\t\t */\n\t\tthis.setMergedRenderStatus = (status) => {\n\t\t\tthis.mergedRenderStatus = status;\n\t\t};\n\n\t\t/**\n\t\t * Add merged cells.\n\t\t *\n\t\t * @param {string} mergeType merge type\n\t\t * @param {CellObject} cellObj cell object instance\n\t\t */\n\t\tthis.addToMergedCells = (mergeType, cellObj) => {\n\t\t\tthis.mergedCells[mergeType].push(cellObj);\n\t\t};\n\n\t\t/**\n\t\t * Determine if current cell is a reference to a main cell.\n\t\t *\n\t\t * @return {boolean} a reference or not\n\t\t */\n\t\tthis.isReference = () => {\n\t\t\treturn this.referenceObject !== null;\n\t\t};\n\n\t\tif (this.isReference()) {\n\t\t\tthis.element = cellElement.cloneNode(true);\n\t\t}\n\n\t\t// modifications object\n\t\t// this object will keep track of the modifications that has done to the cell to make sure we can roll them back to their original values\n\t\tthis.modifications = {};\n\n\t\t// spans object for cell's original merge values\n\t\tthis.spans = {\n\t\t\trow: 1,\n\t\t\tcol: 1,\n\t\t};\n\n\t\tthis.remainingSpans = {\n\t\t\trow: 0,\n\t\t\tcol: 0,\n\t\t};\n\n\t\t/**\n\t\t * Cache cell element's original span values.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tthis.cacheSpanValues = () => {\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tObject.keys(this.spans).map((k) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.spans, k)) {\n\t\t\t\t\tconst defaultVal = this.spans[k];\n\n\t\t\t\t\tthis.spans[k] = this.element.getAttribute(`${k}Span`) || defaultVal;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis.cacheSpanValues();\n\n\t\t/**\n\t\t * Get original span value of cell object.\n\t\t *\n\t\t * @param {string} spanType span type, available values are row-column\n\t\t * @param {boolean} fromElement, instead of original value, get the assigned span value from HTMLElement itself\n\t\t * @param fromElement\n\t\t * @throws An error will be given for invalid span type\n\t\t */\n\t\tthis.getSpan = (spanType, fromElement = false) => {\n\t\t\tconst spanVal = fromElement ? this.getElement().getAttribute(`${spanType}Span`) : this.spans[spanType];\n\t\t\tif (spanVal) {\n\t\t\t\treturn spanVal;\n\t\t\t}\n\t\t\tthrow new Error(`no span value found with the given type of [${spanType}]`);\n\t\t};\n\n\t\tthis.getRemainingSpans = (spanType) => {\n\t\t\treturn this.remainingSpans[spanType];\n\t\t};\n\n\t\tthis.setRemainingSpans = (spanType, value) => {\n\t\t\tthis.remainingSpans[spanType] = value;\n\t\t};\n\n\t\t/**\n\t\t * Get cell element.\n\t\t *\n\t\t * @return {HTMLElement} cell element\n\t\t */\n\t\tthis.getElement = () => {\n\t\t\treturn this.element;\n\t\t};\n\n\t\t/**\n\t\t * Create a cell element.\n\t\t *\n\t\t * @private\n\t\t * @return {HTMLTableDataCellElement}\n\t\t */\n\t\tthis.createCellElement = () => {\n\t\t\treturn document.createElement('td');\n\t\t};\n\n\t\t// create a new cell element if no cellElement argument is given with constructor function\n\t\tif (!cellElement) {\n\t\t\tthis.element = this.createCellElement();\n\t\t}\n\n\t\t/**\n\t\t * Add attribute to cell element.\n\t\t *\n\t\t * This function have the ability to add/remove attributes from cell element.\n\t\t * All attributes modified with this function will be cached with their before value for an easy reset on demand.\n\t\t *\n\t\t * @param {string} attributeKey attribute name in camelCase format, for sub-keys, use dot object notation\n\t\t * @param {any} attributeValue attribute value\n\t\t * @param {boolean} [append=false] append the value or replace it\n\t\t * @param {string} [glue=,] glue to join attribute value if append option is enabled\n\t\t */\n\t\tthis.setAttribute = (attributeKey, attributeValue, append = false, glue = ',') => {\n\t\t\tlet defaultVal = this.getElement()[attributeKey];\n\n\t\t\t// if attribute value is a function or an object, it means we pulled a whole declaration instead of only inline attribute values, in that case, use getAttribute to get only inline values related to that attribute\n\t\t\tif (typeof defaultVal === 'function' || typeof defaultVal === 'object') {\n\t\t\t\tdefaultVal = this.getElement().getAttribute(attributeKey);\n\t\t\t}\n\n\t\t\t// if there is already a default value defined, use that instead\n\t\t\tif (this.modifications[attributeKey]) {\n\t\t\t\tdefaultVal = this.modifications[attributeKey].default;\n\t\t\t}\n\n\t\t\tlet currentVal = defaultVal;\n\n\t\t\t// join attributes\n\t\t\tif (append) {\n\t\t\t\tcurrentVal += `${currentVal}${glue}${attributeValue}`;\n\t\t\t} else {\n\t\t\t\tcurrentVal = attributeValue;\n\t\t\t}\n\n\t\t\tthis.modifications[attributeKey] = { value: currentVal, default: defaultVal };\n\n\t\t\tthis.getElement()[attributeKey] = currentVal;\n\t\t};\n\n\t\t/**\n\t\t * Set row/colspan for cell.\n\t\t *\n\t\t * @param {string} spanType span type\n\t\t * @param {number} value value to assign to span\n\t\t * @return {boolean} if any space left to render the element\n\t\t */\n\t\tthis.setSpan = (spanType, value) => {\n\t\t\t// working on main cell\n\t\t\tif (!this.isReference()) {\n\t\t\t\tconst valueToApply = this.getSpan(spanType) - value < 0 ? this.getSpan(spanType) : value;\n\n\t\t\t\tthis.setAttribute(`${spanType}Span`, valueToApply);\n\n\t\t\t\t// calculate remaining cells amount to merge in this span type\n\t\t\t\tthis.setRemainingSpans(spanType, this.getSpan(spanType) - valueToApply);\n\n\t\t\t\t// set visibility of connected merge group cells to false to not render them since we added necessary span values to main cell which will leak into their position\n\t\t\t\tfor (let mc = 0; mc < valueToApply - 1; mc += 1) {\n\t\t\t\t\tif (this.mergedCells[spanType] && this.mergedCells[spanType][mc]) {\n\t\t\t\t\t\tthis.mergedCells[spanType][mc].setMergedRenderStatus(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// working on reference\n\n\t\t\tif (!this.getMergedRenderStatus()) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst remainingVal = this.referenceObject.getRemainingSpans(spanType);\n\n\t\t\t// no space left to put cell\n\t\t\tif (remainingVal === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst valueToApply = remainingVal - value < 0 ? remainingVal : value;\n\n\t\t\tconst remainingParentSpans = remainingVal - valueToApply;\n\t\t\tthis.referenceObject.setRemainingSpans(spanType, remainingParentSpans);\n\n\t\t\tthis.setAttribute(`${spanType}Span`, valueToApply);\n\n\t\t\t// change render status of remaining connected merge cells\n\t\t\tif (remainingParentSpans !== 0) {\n\t\t\t\tconst totalConnectedCells = this.referenceObject.mergedCells[spanType].length;\n\t\t\t\tconst startIndex = totalConnectedCells - remainingVal + 1;\n\t\t\t\tconst endIndex = startIndex + valueToApply - 1;\n\n\t\t\t\tfor (let mc = startIndex; mc < endIndex; mc += 1) {\n\t\t\t\t\tthis.mergedCells[spanType][mc].setMergedRenderStatus(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Reset a modified attribute to its default value\n\t\t *\n\t\t * @param {string} attributeKey attribute name\n\t\t */\n\t\tthis.resetAttribute = (attributeKey) => {\n\t\t\tif (this.modifications[attributeKey]) {\n\t\t\t\tthis.getElement()[attributeKey] = this.modifications[attributeKey].default;\n\t\t\t\tthis.modifications[attributeKey] = undefined;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Reset all modified attributes of cell element to their default values.\n\t\t */\n\t\tthis.resetAllAttributes = () => {\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tObject.keys(this.modifications).map((k) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.modifications, k)) {\n\t\t\t\t\tthis.resetAttribute(k);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tgetElement: this.getElement,\n\t\t\tel: this.element,\n\t\t\tsetAttribute: this.setAttribute,\n\t\t\tresetAllAttributes: this.resetAllAttributes,\n\t\t\tgetSpan: this.getSpan,\n\t\t\tsetSpan: this.setSpan,\n\t\t\tgetRemainingSpans: this.getRemainingSpans,\n\t\t\tsetRemainingSpans: this.setRemainingSpans,\n\t\t\tisReference: this.isReference,\n\t\t\taddToMergedCells: this.addToMergedCells,\n\t\t\tmergedCells: this.mergedCells,\n\t\t\tsetMergedRenderStatus: this.setMergedRenderStatus,\n\t\t\tgetMergedRenderStatus: this.getMergedRenderStatus,\n\t\t};\n\t}\n\n\tCellObject.spanTypes = { row: 'row', column: 'col' };\n\n\t/**\n\t * Object implementation for table element operations.\n\t *\n\t * @param {HTMLElement} tableEl table element\n\t * @return {Object} instance\n\t * @class\n\t */\n\tfunction TableObject(tableEl) {\n\t\t/**\n\t\t * Table element.\n\t\t *\n\t\t * @private\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tthis.tableElement = tableEl;\n\n\t\t/**\n\t\t * Parsed table object.\n\t\t *\n\t\t * @private\n\t\t * @type {Array}\n\t\t */\n\t\tthis.parsedTable = [];\n\n\t\t/**\n\t\t * An array of created table rows elements that are id'd according to their index in array.\n\t\t *\n\t\t * @type {[HTMLElement]}\n\t\t */\n\t\tthis.rowCache = [];\n\n\t\t/**\n\t\t * Original table elements minus the cells.\n\t\t *\n\t\t * @type {{rows: []}}\n\t\t * @private\n\t\t */\n\t\tthis.originals = { rows: [] };\n\n\t\t/**\n\t\t * Row colors of original table.\n\t\t *\n\t\t * @type {{even: string, header: string, odd: string}}\n\t\t */\n\t\tthis.rowColors = {\n\t\t\theader: null,\n\t\t\teven: null,\n\t\t\todd: null,\n\t\t};\n\n\t\t/**\n\t\t * Add cell to parsed array.\n\t\t *\n\t\t * @private\n\t\t * @param {number} r row id\n\t\t * @param {number} c column id\n\t\t * @param {CellObject} cellObject cell object to add to parsed array\n\t\t */\n\t\tthis.addToParsed = (r, c, cellObject) => {\n\t\t\tif (!this.parsedTable[r]) {\n\t\t\t\tthis.parsedTable[r] = [];\n\t\t\t}\n\n\t\t\tthis.parsedTable[r][c] = cellObject;\n\t\t};\n\n\t\t/**\n\t\t * Assign table cells into row and column numbers.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tthis.parseTable = () => {\n\t\t\tconst rows = Array.from(this.tableElement.querySelectorAll('tr'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\trows.map((r, ri) => {\n\t\t\t\t// cache original rows for future use\n\t\t\t\tthis.originals.rows.push(r);\n\n\t\t\t\tconst cells = Array.from(r.querySelectorAll('td'));\n\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\tcells.map((c, ci) => {\n\t\t\t\t\tconst currentCellObject = new CellObject(c);\n\t\t\t\t\tthis.addToParsed(ri, ci, currentCellObject);\n\n\t\t\t\t\tconst spanRow = currentCellObject.getSpan(CellObject.spanTypes.row);\n\t\t\t\t\tconst spanCol = currentCellObject.getSpan(CellObject.spanTypes.column);\n\n\t\t\t\t\tif (spanRow > 1) {\n\t\t\t\t\t\tfor (let sr = 1; sr < spanRow; sr += 1) {\n\t\t\t\t\t\t\tconst referenceCell = new CellObject(c, currentCellObject);\n\t\t\t\t\t\t\tcurrentCellObject.addToMergedCells('row', referenceCell);\n\t\t\t\t\t\t\tthis.addToParsed(ri + sr, ci, referenceCell);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (spanCol > 1) {\n\t\t\t\t\t\tfor (let sc = 1; sc < spanCol; sc += 1) {\n\t\t\t\t\t\t\tconst referenceCell = new CellObject(c, currentCellObject);\n\t\t\t\t\t\t\tcurrentCellObject.addToMergedCells('column', referenceCell);\n\t\t\t\t\t\t\tthis.addToParsed(ri, ci + sc, referenceCell);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.parseRowColors(rows);\n\t\t};\n\n\t\t/**\n\t\t * Parse row colors of original table for futures uses.\n\t\t *\n\t\t * @param {[HTMLElement]} rows html row elements\n\t\t * @private\n\t\t */\n\t\tthis.parseRowColors = (rows) => {\n\t\t\tif (!rows || rows.length <= 0) {\n\t\t\t\tlogToConsole('no rows are found to parse their colors', 'error');\n\t\t\t}\n\n\t\t\t// get row colors if they are defined as datasets on table element\n\t\t\tconst headerDatasetColor = this.tableElement.dataset.wptbHeaderBackgroundColor;\n\t\t\tconst evenRowDatasetColor = this.tableElement.dataset.wptbEvenRowBackgroundColor;\n\t\t\tconst oddRowDatasetColor = this.tableElement.dataset.wptbOddRowBackgroundColor;\n\n\t\t\t// header row color\n\t\t\tthis.rowColors.header =\n\t\t\t\t// eslint-disable-next-line no-nested-ternary\n\t\t\t\theaderDatasetColor !== undefined\n\t\t\t\t\t? headerDatasetColor\n\t\t\t\t\t: rows[0].style.backgroundColor === ''\n\t\t\t\t\t? null\n\t\t\t\t\t: rows[0].style.backgroundColor;\n\n\t\t\t// calculate needed number of rows to get even and odd row background colors\n\t\t\t// eslint-disable-next-line no-nested-ternary\n\t\t\tconst rowsNeeded = rows.length / 3 >= 1 ? 0 : rows.length === 1 ? 2 : (rows.length - 1) % 2;\n\n\t\t\t// create additional rows and add them to table to get their row background colors since table row count may be lower to get even/odd rows\n\t\t\tfor (let rn = 0; rn < rowsNeeded; rn += 1) {\n\t\t\t\tconst tempRow = document.createElement('tr');\n\n\t\t\t\tthis.tableElement.querySelector('tbody').appendChild(tempRow);\n\t\t\t\trows.push(tempRow);\n\t\t\t}\n\n\t\t\t// even & odd row colors\n\t\t\t// dataset colors have priority over colors gathered from computed row styles\n\t\t\tthis.rowColors.even = evenRowDatasetColor || getComputedStyle(rows[1]).backgroundColor;\n\t\t\tthis.rowColors.odd = evenRowDatasetColor ? oddRowDatasetColor : getComputedStyle(rows[2]).backgroundColor;\n\n\t\t\t// remove created rows from DOM\n\t\t\tfor (let r = 0; r < rowsNeeded; r += 1) {\n\t\t\t\trows[rows.length - (r + 1)].remove();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Add a row to the table.\n\t\t *\n\t\t * @param {Array} classList an array of class names to be added to row\n\t\t * @param {boolean} fromOriginals use rows from original table instead of creating a new one\n\t\t * @param {number} originalIndex original row index\n\t\t */\n\t\tthis.addRow = (classList, fromOriginals = false, originalIndex = 0) => {\n\t\t\tif (!Array.isArray(classList)) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tclassList = [classList];\n\t\t\t}\n\n\t\t\tconst tableBody = this.tableElement.querySelector('tbody');\n\t\t\tlet tempRow;\n\n\t\t\tif (!fromOriginals) {\n\t\t\t\tconst range = document.createRange();\n\t\t\t\trange.setStart(tableBody, 0);\n\t\t\t\t// eslint-disable-next-line prefer-destructuring\n\t\t\t\ttempRow = range.createContextualFragment(`<tr class=\"${classList.join(' ')}\"></tr>`).childNodes[0];\n\t\t\t} else {\n\t\t\t\ttempRow = this.originals.rows[originalIndex];\n\t\t\t}\n\n\t\t\t// add row to table body\n\t\t\ttableBody.appendChild(tempRow);\n\n\t\t\t// cache row for future use\n\t\t\tthis.rowCache.push(tempRow);\n\n\t\t\treturn { el: tempRow, id: this.rowCache.length - 1 };\n\t\t};\n\n\t\t/**\n\t\t * Clear the contents of table element.\n\t\t */\n\t\tthis.clearTable = () => {\n\t\t\t// clear row cache\n\t\t\tthis.rowCache = [];\n\n\t\t\t// clear children of `tbody` element\n\t\t\tthis.tableElement.querySelector('tbody').innerHTML = '';\n\t\t};\n\n\t\t/**\n\t\t * Get row element from cache.\n\t\t *\n\t\t * @param {number} id row id\n\t\t * @return {null|HTMLElement} row element if present or null if not\n\t\t */\n\t\tthis.getRow = (id) => {\n\t\t\tif (this.rowCache[id]) {\n\t\t\t\treturn this.rowCache[id];\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tlogToConsole(`no row with id [${id}] found in the cache.`, 'warn');\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Get maximum number of rows available at table.\n\t\t *\n\t\t * @return {number} maximum amount of rows\n\t\t */\n\t\tthis.maxRows = () => {\n\t\t\treturn this.parsedTable.length;\n\t\t};\n\n\t\t/**\n\t\t * Get the number of maximum available column count in the table.\n\t\t *\n\t\t * @return {number} maximum available column count\n\t\t */\n\t\tthis.maxColumns = () => {\n\t\t\treturn this.parsedTable.reduce((p, c) => {\n\t\t\t\tif (c.length > p) {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tp = c.length;\n\t\t\t\t}\n\n\t\t\t\treturn p;\n\t\t\t}, 0);\n\t\t};\n\n\t\t/**\n\t\t * Get the table cell at specified row-column location.\n\t\t *\n\t\t * As in arrays, row and column numbering starts from number 0.\n\t\t *\n\t\t * @param {number} r row number\n\t\t * @param {number} c column number\n\t\t * @param {boolean} returnObject return object instead of HTMLElement\n\t\t * @return {HTMLElement | null | CellObject} element if address is possible, null if not\n\t\t */\n\t\tthis.getCell = (r, c, returnObject = false) => {\n\t\t\ttry {\n\t\t\t\tif (this.parsedTable[r][c]) {\n\t\t\t\t\tif (returnObject) {\n\t\t\t\t\t\treturn this.parsedTable[r][c];\n\t\t\t\t\t}\n\t\t\t\t\treturn this.parsedTable[r][c].el;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tlogToConsole(`no cell found at the given address of [${r}-${c}]`, 'warn');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tlogToConsole(`no cell found at the given address of [${r}-${c}]`, 'warn');\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Get cells at a given row.\n\t\t *\n\t\t * @param {number} rowId row id\n\t\t * @param {boolean} returnObj return an array of CellObject instead\n\t\t * @return {Array} cells in row\n\t\t */\n\t\tthis.getCellsAtRow = (rowId, returnObj = false) => {\n\t\t\tconst cells = [];\n\t\t\tfor (let c = 0; c < this.maxColumns(); c += 1) {\n\t\t\t\tconst tempCell = this.getCell(rowId, c, returnObj);\n\t\t\t\tif (tempCell) {\n\t\t\t\t\tcells.push(tempCell);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cells;\n\t\t};\n\n\t\t/**\n\t\t * Append the cell with given ids to a cached row\n\t\t *\n\t\t * @param {number} cellRowId cell row id\n\t\t * @param {number} cellColumnId cell column id\n\t\t * @param {number} rowId id of row in row cache\n\t\t */\n\t\tthis.appendToRow = (cellRowId, cellColumnId, rowId) => {\n\t\t\tconst cachedRow = this.getRow(rowId);\n\t\t\tconst cell = this.getCell(cellRowId, cellColumnId, true);\n\n\t\t\tif (cell && cachedRow) {\n\t\t\t\tcachedRow.appendChild(cell.getElement());\n\t\t\t}\n\t\t\treturn cell;\n\t\t};\n\n\t\t/**\n\t\t * Append html element to a cached row.\n\t\t *\n\t\t * @param {HTMLElement} el element\n\t\t * @param {number} rowId if of row in row cache\n\t\t */\n\t\tthis.appendElementToRow = (el, rowId) => {\n\t\t\tconst cachedRow = this.getRow(rowId);\n\n\t\t\tif (el && cachedRow) {\n\t\t\t\tcachedRow.appendChild(el);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Add cell object to a cached row.\n\t\t *\n\t\t * @param {CellObject} cellObj cell object\n\t\t * @param {number} rowId row id\n\t\t */\n\t\tthis.appendObjectToRow = (cellObj, rowId) => {\n\t\t\tconst cachedRow = this.getRow(rowId);\n\t\t\tif (cellObj && cachedRow) {\n\t\t\t\tcachedRow.appendChild(cellObj.getElement());\n\t\t\t}\n\t\t};\n\n\t\tthis.parseTable();\n\n\t\treturn {\n\t\t\tmaxRows: this.maxRows,\n\t\t\tmaxColumns: this.maxColumns,\n\t\t\taddRow: this.addRow,\n\t\t\tclearTable: this.clearTable,\n\t\t\tgetCell: this.getCell,\n\t\t\tappendToRow: this.appendToRow,\n\t\t\tappendElementToRow: this.appendElementToRow,\n\t\t\tappendObjectToRow: this.appendObjectToRow,\n\t\t\tgetCellsAtRow: this.getCellsAtRow,\n\t\t\tel: this.tableElement,\n\t\t\trowColors: this.rowColors,\n\t\t};\n\t}\n\n\t// default options for responsive class\n\tconst responsiveClassDefaultOptions = {\n\t\tquery: '.wptb-preview-table',\n\t\tdefaultClasses: ['wptb-plugin-responsive-base'],\n\t\tbindToResize: false,\n\t};\n\n\t/**\n\t * Class for handling operations related to responsive functionalities of tables.\n\t *\n\t * @class\n\t * @param {Object} options options object\n\t */\n\tfunction ResponsiveFront(options = {}) {\n\t\t// merge default options with user sent options\n\t\t// this.options = { ...responsiveClassDefaultOptions, ...options };\n\t\tthis.options = { ...responsiveClassDefaultOptions, ...options };\n\n\t\tthis.elements = Array.from(document.querySelectorAll(this.options.query));\n\n\t\tthis.elementObjects = this.elements.map((e) => {\n\t\t\treturn {\n\t\t\t\tel: e,\n\t\t\t\ttableObject: new TableObject(e),\n\t\t\t};\n\t\t});\n\n\t\t/**\n\t\t * Bind rebuilding of tables to window resize event.\n\t\t */\n\t\tthis.bindRebuildToResize = () => {\n\t\t\twindow.addEventListener('resize', () => {\n\t\t\t\tthis.rebuildTables();\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Get responsive directives of table element.\n\t\t *\n\t\t * @private\n\t\t * @param {HTMLElement} el table element\n\t\t * @return {Object | null} JSON representation of the directive element, if not available, null will be returned\n\t\t */\n\t\tthis.getDirective = (el) => {\n\t\t\tconst directiveString = el.dataset.wptbResponsiveDirectives;\n\n\t\t\tif (!directiveString) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn JSON.parse(atob(directiveString));\n\t\t};\n\n\t\t/**\n\t\t * Add default classes to rebuilt tables.\n\t\t *\n\t\t * This classes are added to lay out a base style for the responsive table.\n\t\t *\n\t\t * @param {HTMLElement} el table element\n\t\t */\n\t\tthis.addDefaultClasses = (el) => {\n\t\t\tel.classList.add(this.options.defaultClasses);\n\t\t};\n\n\t\t/**\n\t\t * Remove default classes from target table.\n\t\t *\n\t\t * @param {HTMLElement} el table element\n\t\t */\n\t\tthis.removeDefaultClasses = (el) => {\n\t\t\tel.classList.remove(this.options.defaultClasses);\n\t\t};\n\n\t\t/**\n\t\t * Rebuild table in auto mode.\n\t\t *\n\t\t * Main characteristic of auto mode is table is rebuilt by stacking rows/columns on top of each other, leaving minimal effort from user to create a responsive table at breakpoints.\n\t\t *\n\t\t * @param {HTMLElement} tableEl table element\n\t\t * @param {string} sizeRange range id for current screen size\n\t\t * @param {Object} autoOption mode options\n\t\t * @param {TableObject} tableObj table object\n\t\t */\n\t\tthis.autoBuild = (tableEl, sizeRange, autoOption, tableObj) => {\n\t\t\t// base options\n\t\t\tconst direction = autoOption.cellStackDirection[sizeRange];\n\t\t\t// eslint-disable-next-line prefer-destructuring\n\t\t\tconst topRowAsHeader = autoOption.topRowAsHeader[sizeRange];\n\t\t\tconst cellsPerRow = autoOption.cellsPerRow[sizeRange];\n\n\t\t\t// new options\n\t\t\tconst staticTopRow = autoOption.staticTopRow ? autoOption.staticTopRow[sizeRange] : false;\n\n\t\t\ttableObj.clearTable();\n\n\t\t\tif (sizeRange === 'desktop') {\n\t\t\t\tthis.buildDefault(tableObj);\n\t\t\t\tthis.removeDefaultClasses(tableEl);\n\t\t\t} else {\n\t\t\t\tthis.autoDirectionBuild(tableObj, direction, topRowAsHeader, staticTopRow, cellsPerRow);\n\t\t\t\tthis.addDefaultClasses(tableEl);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Rebuild table with a direction to read cells.\n\t\t *\n\t\t * Direction in question in here is either by row or column:\n\t\t * * row: cells will be read row by row, in each row starting from the first column\n\t\t * * column: cells will be read column by column, in each column starting from the first row of the table\n\t\t *\n\t\t * @param {TableObject} tableObj table object\n\t\t * @param {string} direction direction to read cells, possible options [row, column]\n\t\t * @param {boolean} topRowAsHeader use top row as header\n\t\t * @param {boolean} staticTopRow use top row as static\n\t\t * @param {number} cellsPerRow cells per row\n\t\t */\n\t\tthis.autoDirectionBuild = (\n\t\t\ttableObj,\n\t\t\tdirection,\n\t\t\ttopRowAsHeader = false,\n\t\t\tstaticTopRow = false,\n\t\t\tcellsPerRow = 1\n\t\t) => {\n\t\t\tconst rows = tableObj.maxRows();\n\t\t\tconst columns = tableObj.maxColumns();\n\t\t\tconst isRowStacked = direction === 'row';\n\n\t\t\t// build table with top row as header\n\t\t\tif (topRowAsHeader) {\n\t\t\t\tthis.headerBuild(tableObj, direction, cellsPerRow);\n\t\t\t} else {\n\t\t\t\t// cell stack direction is selected as row\n\t\t\t\t// for future new functionality additions, keep different cell stack direction logic separate instead of generalizing the inner logic\n\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\tif (isRowStacked) {\n\t\t\t\t\tconst allCellsByRow = [];\n\t\t\t\t\tlet rowStartIndex = 0;\n\n\t\t\t\t\t// static top row option is enabled\n\t\t\t\t\tif (staticTopRow) {\n\t\t\t\t\t\tconst topCells = tableObj.getCellsAtRow(0, true);\n\n\t\t\t\t\t\tconst baseCells = topCells.filter((c) => !c.isReference());\n\n\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\t\tbaseCells.map((b) => {\n\t\t\t\t\t\t\trowStartIndex += 1;\n\t\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\t\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors.header;\n\n\t\t\t\t\t\t\ttableObj.appendObjectToRow(b, rowObj.id);\n\n\t\t\t\t\t\t\tb.setAttribute('colSpan', cellsPerRow);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// get cells by reading row by row\n\t\t\t\t\tfor (let r = rowStartIndex; r < rows; r += 1) {\n\t\t\t\t\t\t// eslint-disable-next-line no-loop-func\n\t\t\t\t\t\ttableObj.getCellsAtRow(r, true).forEach((c) => {\n\t\t\t\t\t\t\t// only use non reference cells to avoid duplication for non top row as header tables\n\t\t\t\t\t\t\tif (!c.isReference()) {\n\t\t\t\t\t\t\t\tallCellsByRow.push(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cellCount = allCellsByRow.length;\n\n\t\t\t\t\tfor (let c = 0, r = 0; c < cellCount; c += cellsPerRow, r += 1) {\n\t\t\t\t\t\t// const rowId = tableObj.addRow('wptb-row').id;\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\n\t\t\t\t\t\t// preserve original row colors for even and odd rows\n\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors[r % 2 === 0 ? 'odd' : 'even'];\n\n\t\t\t\t\t\t// place cells by 'cells by row' option value\n\t\t\t\t\t\tfor (let pR = 0; pR < cellsPerRow; pR += 1) {\n\t\t\t\t\t\t\tconst tempCell = allCellsByRow[c + pR];\n\n\t\t\t\t\t\t\tif (tempCell) {\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowObj.id);\n\n\t\t\t\t\t\t\t\ttempCell.resetAllAttributes();\n\t\t\t\t\t\t\t\ttempCell.setAttribute('style', 'width: 100% !important', true, ';');\n\t\t\t\t\t\t\t\ttempCell.setAttribute('colSpan', 1);\n\t\t\t\t\t\t\t\ttempCell.setAttribute('rowSpan', 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// cell stack direction is selected as column\n\t\t\t\telse {\n\t\t\t\t\tconst allCellsByCol = [];\n\t\t\t\t\tlet rowStartIndex = 0;\n\n\t\t\t\t\t// static top row option is enabled\n\t\t\t\t\tif (staticTopRow) {\n\t\t\t\t\t\tconst topCells = tableObj.getCellsAtRow(0, true);\n\n\t\t\t\t\t\tconst baseCells = topCells.filter((t) => !t.isReference());\n\n\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\t\tbaseCells.map((b) => {\n\t\t\t\t\t\t\trowStartIndex += 1;\n\t\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\t\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors.header;\n\n\t\t\t\t\t\t\ttableObj.appendObjectToRow(b, rowObj.id);\n\n\t\t\t\t\t\t\tb.setAttribute('colSpan', cellsPerRow);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// read all cells column by column\n\t\t\t\t\tfor (let c = 0; c < columns; c += 1) {\n\t\t\t\t\t\tfor (let r = rowStartIndex; r < rows; r += 1) {\n\t\t\t\t\t\t\tconst tCell = tableObj.getCell(r, c, true);\n\t\t\t\t\t\t\t// only use non reference cells to avoid duplication for non top row as header tables\n\t\t\t\t\t\t\tif (tCell && !tCell.isReference()) {\n\t\t\t\t\t\t\t\tallCellsByCol.push(tCell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cellCount = allCellsByCol.length;\n\n\t\t\t\t\tfor (let c = 0, r = 0; c < cellCount; c += cellsPerRow, r += 1) {\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\n\t\t\t\t\t\t// preserve original row colors for even and odd rows\n\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors[r % 2 === 0 ? 'odd' : 'even'];\n\n\t\t\t\t\t\tfor (let cR = 0; cR < cellsPerRow; cR += 1) {\n\t\t\t\t\t\t\tconst tempCell = allCellsByCol[c + cR];\n\n\t\t\t\t\t\t\tif (tempCell) {\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowObj.id);\n\n\t\t\t\t\t\t\t\ttempCell.resetAllAttributes();\n\t\t\t\t\t\t\t\ttempCell.setAttribute('style', 'width: 100% !important', true, ';');\n\t\t\t\t\t\t\t\ttempCell.setAttribute('colSpan', 1);\n\t\t\t\t\t\t\t\ttempCell.setAttribute('rowSpan', 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Build table with top row assigned as header.\n\t\t *\n\t\t * @param {TableObject} tableObj table object\n\t\t * @param {string} direction cell stack direction, possible options are [row, column]\n\t\t * @param {number} itemsPerHeader items bound to each header element\n\t\t */\n\t\tthis.headerBuild = (tableObj, direction, itemsPerHeader = 1) => {\n\t\t\t// cells at header\n\t\t\t// applying header row color to cells\n\t\t\tconst headerCells = tableObj.getCellsAtRow(0, true).map((h) => {\n\t\t\t\th.setAttribute('style', `background-color: ${tableObj.rowColors.header}`, true, ';');\n\t\t\t\treturn h;\n\t\t\t});\n\n\t\t\tconst stackedAsColumn = direction === 'column';\n\n\t\t\t// row count\n\t\t\tconst rows = tableObj.maxRows();\n\t\t\t// column count\n\t\t\tconst columns = tableObj.maxColumns();\n\n\t\t\tconst rowBorderStyle = '3px solid gray';\n\n\t\t\t// stack direction is column\n\t\t\tif (stackedAsColumn) {\n\t\t\t\t/**\n\t\t\t\t * Add header cells as new row to table.\n\t\t\t\t *\n\t\t\t\t * @param {boolean} addBorder add top border to header row\n\t\t\t\t */\n\t\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\t\tfunction addHeaderCells(addBorder = false) {\n\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\n\t\t\t\t\tif (addBorder) {\n\t\t\t\t\t\trowObj.el.style.borderTop = rowBorderStyle;\n\t\t\t\t\t}\n\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\t\theaderCells.map((h) => {\n\t\t\t\t\t\t// clone header cell to reuse it for multiple rows\n\t\t\t\t\t\ttableObj.appendElementToRow(h.el.cloneNode(true), rowObj.id);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// count of header rows that will be created\n\t\t\t\tconst headerCount = Math.ceil((rows - 1) / itemsPerHeader);\n\t\t\t\t// row index on original table\n\t\t\t\tlet currentOriginalRow = 1;\n\t\t\t\tfor (let r = 0; r < headerCount; r += 1) {\n\t\t\t\t\t// create header row and add to table\n\t\t\t\t\taddHeaderCells(r > 0);\n\t\t\t\t\tfor (let c = 0; c < itemsPerHeader; c += 1) {\n\t\t\t\t\t\t// break iteration when current row surpasses original row amount\n\t\t\t\t\t\tif (currentOriginalRow >= rows) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\n\t\t\t\t\t\t// apply row color relative to current header row\n\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors[c % 2 === 0 ? 'even' : 'odd'];\n\t\t\t\t\t\tfor (let cc = 0; cc < columns; cc += 1) {\n\t\t\t\t\t\t\tconst currentCell = tableObj.getCell(currentOriginalRow, cc, true);\n\n\t\t\t\t\t\t\tif (currentCell) {\n\t\t\t\t\t\t\t\tcurrentCell.resetAllAttributes();\n\n\t\t\t\t\t\t\t\t// status to decide whether render cell or not\n\t\t\t\t\t\t\t\tlet cellAddStatus = true;\n\n\t\t\t\t\t\t\t\tconst rowSpan = currentCell.getSpan(CellObject.spanTypes.row);\n\t\t\t\t\t\t\t\tconst colSpan = currentCell.getSpan(CellObject.spanTypes.column);\n\n\t\t\t\t\t\t\t\tif (rowSpan > 1) {\n\t\t\t\t\t\t\t\t\t// items remaining in current header\n\t\t\t\t\t\t\t\t\tconst remainingItems = itemsPerHeader - c;\n\n\t\t\t\t\t\t\t\t\t// calculate whether to apply full rowspan value or remaining item value depending on the current position of the cell\n\t\t\t\t\t\t\t\t\tconst currentRowSpan = Math.min(rowSpan, remainingItems);\n\n\t\t\t\t\t\t\t\t\tcellAddStatus = currentCell.setSpan(CellObject.spanTypes.row, currentRowSpan);\n\t\t\t\t\t\t\t\t\t// reset render status of cell to visible for future use\n\t\t\t\t\t\t\t\t\tcurrentCell.setMergedRenderStatus(true);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (cellAddStatus) {\n\t\t\t\t\t\t\t\t\ttableObj.appendObjectToRow(currentCell, rowObj.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentOriginalRow += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// stack direction is row\n\t\t\t\t// number of headers that will be created\n\t\t\t\tconst headerCount = Math.ceil((rows - 1) / itemsPerHeader);\n\n\t\t\t\tlet currentOriginalRow = 1;\n\n\t\t\t\tfor (let hc = 0; hc < headerCount; hc += 1) {\n\t\t\t\t\tfor (let c = 0; c < columns; c += 1) {\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\n\n\t\t\t\t\t\t// clear out row color to override row color with cell colors\n\t\t\t\t\t\trowObj.el.style.backgroundColor = 'none';\n\n\t\t\t\t\t\tif (hc > 0 && c === 0) {\n\t\t\t\t\t\t\trowObj.el.style.borderTop = rowBorderStyle;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst clonedHeaderCell = headerCells[c].el.cloneNode(true);\n\n\t\t\t\t\t\t// apply header row color to header cell\n\t\t\t\t\t\tclonedHeaderCell.style.backgroundColor = `${tableObj.rowColors.header} !important`;\n\n\t\t\t\t\t\ttableObj.appendElementToRow(clonedHeaderCell, rowObj.id);\n\n\t\t\t\t\t\tfor (let r = 0; r < itemsPerHeader; r += 1) {\n\t\t\t\t\t\t\tif (currentOriginalRow + r >= rows) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// const currentCell = tableObj.appendToRow(currentOriginalRow + r, c, rowObj.id);\n\t\t\t\t\t\t\tconst currentCell = tableObj.getCell(currentOriginalRow + r, c, true);\n\n\t\t\t\t\t\t\tif (currentCell) {\n\t\t\t\t\t\t\t\tcurrentCell.resetAllAttributes();\n\n\t\t\t\t\t\t\t\tlet cellAddStatus = true;\n\n\t\t\t\t\t\t\t\tconst rowSpan = currentCell.getSpan(CellObject.spanTypes.row);\n\t\t\t\t\t\t\t\tconst colSpan = currentCell.getSpan(CellObject.spanTypes.column);\n\n\t\t\t\t\t\t\t\tif (rowSpan > 1) {\n\t\t\t\t\t\t\t\t\tconst remainingItems = itemsPerHeader - r;\n\n\t\t\t\t\t\t\t\t\tconst currentRowSpan = Math.min(rowSpan, remainingItems);\n\n\t\t\t\t\t\t\t\t\tcellAddStatus = currentCell.setSpan(CellObject.spanTypes.row, currentRowSpan);\n\n\t\t\t\t\t\t\t\t\tconst rS = currentCell.el.getAttribute('rowSpan');\n\t\t\t\t\t\t\t\t\tconst cS = currentCell.el.getAttribute('colSpan');\n\n\t\t\t\t\t\t\t\t\t// switch span values\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute('rowSpan', cS);\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute('colSpan', rS);\n\n\t\t\t\t\t\t\t\t\tcurrentCell.setMergedRenderStatus(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (cellAddStatus) {\n\t\t\t\t\t\t\t\t\t// color index for the cell, this will be used to reflect table row colors to cells. currently, grouping up the same items with the same color code\n\t\t\t\t\t\t\t\t\tlet colorIndex = (currentOriginalRow + r + hc) % 2 === 0 ? 'even' : 'odd';\n\n\t\t\t\t\t\t\t\t\t// for better visuals and distinction for tables with 1 item per header, using this calculation for color index\n\t\t\t\t\t\t\t\t\tif (itemsPerHeader === 1) {\n\t\t\t\t\t\t\t\t\t\tcolorIndex = currentOriginalRow % 2 === 0 ? 'even' : 'odd';\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute(\n\t\t\t\t\t\t\t\t\t\t'style',\n\t\t\t\t\t\t\t\t\t\t`background-color: ${tableObj.rowColors[colorIndex]}`,\n\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\ttableObj.appendObjectToRow(currentCell, rowObj.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrentOriginalRow += itemsPerHeader;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Build table in its default form.\n\t\t *\n\t\t * Default form of table is the layout it has in desktop breakpoint.\n\t\t *\n\t\t * @param {TableObject} tableObj table object\n\t\t */\n\t\tthis.buildDefault = (tableObj) => {\n\t\t\tconst rows = tableObj.maxRows();\n\t\t\tconst columns = tableObj.maxColumns();\n\n\t\t\tfor (let r = 0; r < rows; r += 1) {\n\t\t\t\tconst rowId = tableObj.addRow('', true, r).id;\n\t\t\t\tfor (let c = 0; c < columns; c += 1) {\n\t\t\t\t\tconst tempCell = tableObj.getCell(r, c, true);\n\n\t\t\t\t\t// only render cell if a valid cell is found and it is not a reference\n\t\t\t\t\tif (tempCell && !tempCell.isReference()) {\n\t\t\t\t\t\t// reset all modified attributes of cell to their default values\n\t\t\t\t\t\ttempCell.resetAllAttributes();\n\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Calculate range id for given size value.\n\t\t *\n\t\t * @param {number} val value\n\t\t * @param {Object} stops an object containing stop ids as keys and respective sizes as values\n\t\t * @return {string} range id\n\t\t */\n\t\tthis.calculateRangeId = (val, stops) => {\n\t\t\t// eslint-disable-next-line prefer-destructuring\n\t\t\tconst sortedStops = Object.keys(stops).sort((a, b) => stops[a].width - stops[b].width);\n\n\t\t\tlet rangeId = sortedStops[0];\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tsortedStops.map((s) => {\n\t\t\t\tif (val >= stops[s].width) {\n\t\t\t\t\trangeId = s;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn rangeId;\n\t\t};\n\n\t\t/**\n\t\t * Rebuild table according to its responsive directives.\n\t\t *\n\t\t * @private\n\t\t * @param {HTMLElement} el table element\n\t\t * @param {number} size size in pixels\n\t\t * @param {TableObject} tableObj table object instance\n\t\t * @throws An error will be given for invalid mode name\n\t\t */\n\t\tthis.rebuildTable = (el, size, tableObj) => {\n\t\t\tconst directive = this.getDirective(el);\n\n\t\t\tif (directive) {\n\t\t\t\tif (!directive.responsiveEnabled) {\n\t\t\t\t\t// this.buildDefault(tableObj);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst mode = directive.responsiveMode;\n\n\t\t\t\t// main build logic for different responsive modes should be named in the format of `{modeName}Build` to automatically call the associated function from here\n\t\t\t\tconst buildCallable = this[`${mode}Build`];\n\n\t\t\t\tif (!size) {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tsize = el.getBoundingClientRect().width;\n\t\t\t\t}\n\n\t\t\t\tconst sizeRangeId = this.calculateRangeId(size, directive.breakpoints);\n\n\t\t\t\tif (buildCallable) {\n\t\t\t\t\tconst modeOptions = directive.modeOptions[mode];\n\t\t\t\t\tbuildCallable.call(this, el, sizeRangeId, modeOptions, tableObj);\n\n\t\t\t\t\tWPTB_RecalculateIndexes(el);\n\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tsizeRangeId,\n\t\t\t\t\t\t\ttopRowAsHeader: directive.modeOptions[mode].topRowAsHeader,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tel.dispatchEvent(tabEvent);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(`No build mode named as [${mode}] found.`);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Rebuild tables with the given screen size.\n\t\t *\n\t\t * @param {number} size screen size\n\t\t */\n\t\tthis.rebuildTables = (size) => {\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tthis.elementObjects.map((o) => {\n\t\t\t\tlet innerSize = size;\n\t\t\t\tif (!size) {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tinnerSize = window.innerWidth;\n\n\t\t\t\t\tconst directives = this.getDirective(o.el);\n\t\t\t\t\t// calculate size according to relative width directive\n\t\t\t\t\tif (directives && directives.relativeWidth) {\n\t\t\t\t\t\tswitch (directives.relativeWidth) {\n\t\t\t\t\t\t\tcase 'window':\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\tinnerSize = window.innerWidth;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'container':\n\t\t\t\t\t\t\t\t// get the size of the container table is in\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\tinnerSize = o.el.parentNode.parentNode.parentNode.clientWidth;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\tinnerSize = window.innerWidth;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.rebuildTable(o.el, innerSize, o.tableObject);\n\t\t\t});\n\t\t};\n\n\t\tif (this.options.bindToResize) {\n\t\t\tthis.bindRebuildToResize();\n\t\t}\n\n\t\treturn {\n\t\t\trebuildTables: this.rebuildTables,\n\t\t\tgetDirective: this.getDirective,\n\t\t\tcalculateRangeId: this.calculateRangeId,\n\t\t};\n\t}\n\n\treturn ResponsiveFront;\n});\n","/**\n * Attach style pass component to global space.\n */\n(function attachToGlobal(globalKey, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[globalKey] = factory();\n})('WPTB_StylePass', self || global, function () {\n\t/**\n\t * Style pass component\n\t * This component will be used to either let or block theme related styling to affect table styles.\n\t *\n\t * @class\n\t */\n\tfunction StylePass() {\n\t\tthis.options = { stylesheets: {} };\n\n\t\t/**\n\t\t * Maintain the same position of table container and insert shadow root container to exact same index.\n\t\t *\n\t\t * @param {HTMLElement} shadowRootContainer\n\t\t * @param {HTMLElement} tableContainer\n\t\t *\n\t\t */\n\t\tthis.insertShadowRoot = (shadowRootContainer, tableContainer) => {\n\t\t\tconst mainParent = tableContainer.parentNode;\n\t\t\tconst parentChildren = Array.from(mainParent.children);\n\t\t\tconst tableIndex = parentChildren.indexOf(tableContainer);\n\t\t\tconst upSibling = tableIndex - 1 > 0 ? null : parentChildren[tableIndex - 1];\n\t\t\tconst downSibling = tableIndex + 1 >= parentChildren.length ? null : parentChildren[tableIndex + 1];\n\n\t\t\tthis.prepareAllStylesheets(this.options.stylesheets, shadowRootContainer.shadowRoot);\n\t\t\tthis.borrowFromTheme(tableContainer);\n\n\t\t\tshadowRootContainer.shadowRoot.appendChild(tableContainer);\n\n\t\t\tif (upSibling) {\n\t\t\t\tupSibling.insertAdjacentElement('afterend', shadowRootContainer);\n\t\t\t} else if (downSibling) {\n\t\t\t\tdownSibling.insertAdjacentElement('beforebegin', shadowRootContainer);\n\t\t\t} else {\n\t\t\t\tmainParent.appendChild(shadowRootContainer);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Borrow some theme styles and reflect them to table.\n\t\t *\n\t\t * @param {HTMLElement} tableContainer table container element\n\t\t */\n\t\tthis.borrowFromTheme = (tableContainer) => {\n\t\t\tconst table = tableContainer.querySelector('table');\n\t\t\tconst { fontFamily } = getComputedStyle(table);\n\t\t\ttable.style.fontFamily = fontFamily;\n\t\t};\n\n\t\t/**\n\t\t * Initialize and start style pass.\n\t\t *\n\t\t * @param {Object} options style pass options\n\t\t */\n\t\tthis.init = (options) => {\n\t\t\tthis.options = { ...this.options, ...options };\n\t\t\tconst tableContainers = Array.from(document.querySelectorAll('div .wptb-table-container'));\n\n\t\t\tif (tableContainers.length > 0) {\n\t\t\t\ttableContainers.map(this.setupStylePass);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Check if style pass is enabled for current table.\n\t\t *\n\t\t * @param {HTMLElement} tableContainer table container\n\t\t * @return {string} status null for disabled, true for enabled\n\t\t */\n\t\tthis.checkTableEligibility = (tableContainer) => {\n\t\t\tconst table = tableContainer.querySelector('table');\n\t\t\treturn table.dataset.disableThemeStyles;\n\t\t};\n\n\t\t/**\n\t\t * Prepare containers for necessary style pass operations.\n\t\t *\n\t\t * @param {HTMLElement} tableContainer table container\n\t\t */\n\t\tthis.setupStylePass = (tableContainer) => {\n\t\t\t// abort if style pass is not enabled for table\n\t\t\tif (!this.checkTableEligibility(tableContainer)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst container = document.createElement('div');\n\t\t\tconst maxWidth = tableContainer.querySelector('table').dataset.wptbTableContainerMaxWidth;\n\t\t\tif (maxWidth) {\n\t\t\t\tcontainer.style.maxWidth = `${maxWidth}px`;\n\t\t\t}\n\n\t\t\tcontainer.attachShadow({ mode: 'open' });\n\n\t\t\tthis.insertShadowRoot(container, tableContainer);\n\t\t};\n\n\t\tthis.prepareAllStylesheets = (stylesheetsObj, root) => {\n\t\t\tObject.keys(stylesheetsObj).map((s) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(stylesheetsObj, s)) {\n\t\t\t\t\tthis.prepareStylesheet(s, stylesheetsObj[s], root);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis.prepareStylesheet = (handler, url, root) => {\n\t\t\tconst linkElement = document.createElement('link');\n\t\t\tlinkElement.setAttribute('id', handler);\n\t\t\tlinkElement.setAttribute('href', url);\n\t\t\tlinkElement.setAttribute('rel', 'stylesheet');\n\t\t\tlinkElement.setAttribute('media', 'all');\n\n\t\t\troot.appendChild(linkElement);\n\t\t};\n\t}\n\n\treturn new StylePass();\n});\n","(function ($) {\n\t/**\n\t * All of the code for your public-facing JavaScript source\n\t * should reside in this file.\n\t *\n\t * Note: It has been assumed you will write jQuery code here, so the\n\t * $ function reference has been prepared for usage within the scope\n\t * of this function.\n\t *\n\t * This enables you to define handlers, for when the DOM is ready:\n\t *\n\t * $(function() {\n\t *\n\t * });\n\t *\n\t * When the window is loaded:\n\t *\n\t * $( window ).load(function() {\n\t *\n\t * });\n\t *\n\t * ...and/or other possibilities.\n\t *\n\t * Ideally, it is not considered best practise to attach more than a\n\t * single DOM-ready or window-load handler for a particular page.\n\t * Although scripts in the WordPress core, Plugins and Themes may be\n\t * practising this, we should strive to set a better example in our own work.\n\t *\n\t * The file is enqueued from inc/frontend/class-frontend.php.\n\t */\n\n\tjQuery(document).ready(function ($) {\n\t\tWPTB_DataTableGenerator.frontendGenerateTables();\n\n\t\tconst tableContainers = document.getElementsByClassName('wptb-table-container');\n\t\t/**\n\t\t * Adds hover color change support for supported button elements.\n\t\t *\n\t\t * @param querySelector\n\t\t */\n\t\tfunction addHoverSupport(querySelector) {\n\t\t\tconst buttons = Array.from(document.querySelectorAll(querySelector));\n\n\t\t\tbuttons.map((b) => {\n\t\t\t\tb.addEventListener('mouseenter', (e) => {\n\t\t\t\t\tconst el = e.target;\n\t\t\t\t\t// hover background-color\n\t\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\n\t\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementHoverBgColor;\n\t\t\t\t\t}\n\t\t\t\t\t// hover color\n\t\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\n\t\t\t\t\t\tel.style.color = el.dataset.wptbElementHoverTextColor;\n\t\t\t\t\t}\n\t\t\t\t\t// hover scale\n\t\t\t\t\tif (el.dataset.wptbElementHoverScale) {\n\t\t\t\t\t\tel.style.transform = `scale(${b.dataset.wptbElementHoverScale})`;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tb.addEventListener('mouseleave', (e) => {\n\t\t\t\t\t// reset all supported hover properties to their default value\n\t\t\t\t\tconst el = e.target;\n\t\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\n\t\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementBgColor;\n\t\t\t\t\t}\n\t\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\n\t\t\t\t\t\tel.style.color = el.dataset.wptbElementColor;\n\t\t\t\t\t}\n\t\t\t\t\tif (el.dataset.wptbElementHoverScale) {\n\t\t\t\t\t\tel.style.transform = 'scale(1)';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// add all kind of functions that have event listeners before responsive table reconstruction to make sure those event listeners are carried over to their clones\n\t\taddHoverSupport('.wptb-preview-table .wptb-button');\n\n\t\t/**\n\t\t * function wptb_tableContainerSectionSmall\n\t\t * add class ( wptb-section-small ) in small width\n\t\t * remove this class in large width\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tfunction wptb_tableContainerSectionSmall() {\n\t\t\tconst wptbTableContainer = jQuery('.wptb-table-container');\n\t\t\tconst sw = wptbTableContainer.width();\n\t\t\tif (wptbTableContainer.length > 0) {\n\t\t\t\tif (sw < 480) {\n\t\t\t\t\twptbTableContainer.addClass('wptb-section-small');\n\t\t\t\t} else {\n\t\t\t\t\twptbTableContainer.removeClass('wptb-section-small');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * function wptb_tableGenerateMobile\n\t\t * generates a mobile view of the table\n\t\t * when the top row of the table is not a heading\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tfunction wptb_tableGenerateMobile() {\n\t\t\tconst wptbTableContainer = document.getElementsByClassName('wptb-table-container');\n\t\t\tconst wptbPreviewTable = document.getElementsByClassName('wptb-preview-table');\n\t\t\tconst wptbPreviewTableMobile = document.getElementsByClassName('wptb-preview-table-mobile');\n\t\t\tif (wptbTableContainer.length > 0 && wptbPreviewTable.length > 0) {\n\t\t\t\tconst sw = wptbTableContainer[0].offsetWidth;\n\t\t\t\tif (sw < 480) {\n\t\t\t\t\twptbPreviewTable[0].style.display = 'none';\n\n\t\t\t\t\tif (wptbPreviewTableMobile.length == 0) {\n\t\t\t\t\t\tconst tableRows = wptbPreviewTable[0].rows;\n\t\t\t\t\t\tconst tableRowTop = tableRows[0];\n\t\t\t\t\t\tconst tableRowTopChildren = tableRowTop.children;\n\t\t\t\t\t\tlet columnCount = 0;\n\n\t\t\t\t\t\tfor (let i = 0; i < tableRowTopChildren.length; i++) {\n\t\t\t\t\t\t\tcolumnCount += tableRowTopChildren[i].colSpan;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newTableArray = [];\n\n\t\t\t\t\t\tfor (let i = 0; i < columnCount; i++) {\n\t\t\t\t\t\t\tnewTableArray[i] = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let i = 0; i < tableRows.length; i++) {\n\t\t\t\t\t\t\tconst rowChildren = tableRows[i].children;\n\n\t\t\t\t\t\t\tfor (let j = 0; j < columnCount; j++) {\n\t\t\t\t\t\t\t\tif (rowChildren[j].dataset.xIndex == j) {\n\t\t\t\t\t\t\t\t\tconst tdNew = rowChildren[j].cloneNode(true);\n\t\t\t\t\t\t\t\t\tif (tableRows[i].style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\ttdNew.style.backgroundColor = tableRows[i].style.backgroundColor;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tnewTableArray[j].push(tdNew);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewTableArray[j].push('');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst table = document.createElement('table');\n\t\t\t\t\t\ttable.classList.add('wptb-preview-table-mobile');\n\t\t\t\t\t\tconst tableStyle = wptbPreviewTable[0].getAttribute('style');\n\t\t\t\t\t\ttable.setAttribute('style', tableStyle);\n\t\t\t\t\t\ttable.style.display = 'table';\n\t\t\t\t\t\tfor (let i = 0; i < columnCount; i++) {\n\t\t\t\t\t\t\tconst row = table.insertRow(-1);\n\t\t\t\t\t\t\trow.classList.add('wptb-row');\n\n\t\t\t\t\t\t\tfor (let j = 0; j < tableRows.length; j++) {\n\t\t\t\t\t\t\t\tif (newTableArray[i][j]) {\n\t\t\t\t\t\t\t\t\trow.appendChild(newTableArray[i][j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twptbTableContainer[0].appendChild(table);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twptbPreviewTableMobile[0].style.display = 'table';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twptbPreviewTable[0].style.display = 'table';\n\t\t\t\t\tif (wptbPreviewTableMobile.length > 0) {\n\t\t\t\t\t\twptbPreviewTableMobile[0].style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twptb_tdDefaultWidth();\n\t\twptb_tableReconstraction();\n\n\t\t// when window resize call wpcd_archiveSectionSmall and wptb_tableGenerateMobile\n\t\t$(window).resize(function () {\n\t\t\twptb_tdDefaultWidth();\n\t\t\twptb_tableReconstraction();\n\t\t});\n\n\t\tfunction wptb_tableReconstraction() {\n\t\t\tfor (let i = 0; i < tableContainers.length; i++) {\n\t\t\t\tconst tableContainer = tableContainers[i];\n\n\t\t\t\t// Set default indicator of creating a new table in true\n\t\t\t\tlet createNewTableIndic = true;\n\n\t\t\t\tlet previewTable = tableContainer.getElementsByClassName('wptb-preview-table');\n\t\t\t\tlet tableContainerMatrix = tableContainer.getElementsByClassName('wptb-table-container-matrix');\n\n\t\t\t\tif (previewTable.length > 0 && tableContainerMatrix.length > 0) {\n\t\t\t\t\tpreviewTable = previewTable[0];\n\t\t\t\t\ttableContainerMatrix = tableContainerMatrix[0];\n\t\t\t\t\tpreviewTable.style.display = 'table';\n\n\t\t\t\t\tif (previewTable.dataset.wptbTableAlignment) {\n\t\t\t\t\t\tconst { wptbTableAlignment } = previewTable.dataset;\n\n\t\t\t\t\t\tconst wptbTableContainerWidth = tableContainer.offsetWidth;\n\t\t\t\t\t\tif (wptbTableContainerWidth < previewTable.offsetWidth) {\n\t\t\t\t\t\t\tpreviewTable.style.float = null;\n\t\t\t\t\t\t} else if (wptbTableAlignment == 'center') {\n\t\t\t\t\t\t\tpreviewTable.style.float = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpreviewTable.style.float = wptbTableAlignment;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (wptbTableAlignment == 'center') {\n\t\t\t\t\t\t\ttableContainer.style.float = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttableContainer.style.float = wptbTableAlignment;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// check data parametrs reconstraction and wptbAdaptiveTable if they are both equal 1 then continue\n\t\t\t\t\tif (previewTable.dataset.reconstraction == 1 && previewTable.dataset.wptbAdaptiveTable == 1) {\n\t\t\t\t\t\t// get widths for wptb-table-container and wptb-preview-table\n\t\t\t\t\t\tconst tableContainerWidth = tableContainer.offsetWidth;\n\t\t\t\t\t\tconst previewTableWidth = previewTable.offsetWidth;\n\n\t\t\t\t\t\t// get count of table columns\n\t\t\t\t\t\tlet tableColumns;\n\t\t\t\t\t\tconst previewTableRows = previewTable.rows;\n\t\t\t\t\t\tif (previewTableRows.length > 0) {\n\t\t\t\t\t\t\tconst firstRow = previewTableRows[0];\n\t\t\t\t\t\t\tconst tdsRow = firstRow.querySelectorAll('td');\n\n\t\t\t\t\t\t\ttableColumns = tdsRow.length;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// check the top line if it is presented as a title\n\t\t\t\t\t\tconst tablePreviewHeadIndic = previewTable.classList.contains('wptb-table-preview-head');\n\n\t\t\t\t\t\t// check conditions: if table top row is as \"header\" - table must have more that two columns,\n\t\t\t\t\t\t// otherwise table must have more taht one columns\n\t\t\t\t\t\tlet tableReconstructed = false;\n\t\t\t\t\t\tlet wptbPreviewTableMobile;\n\t\t\t\t\t\tif ((!tablePreviewHeadIndic || tableColumns > 2) && tableColumns > 1) {\n\t\t\t\t\t\t\t// if width of wptb-table-container less then width of wptb-preview-table -\n\t\t\t\t\t\t\t// continue the way creation new mobile table\n\t\t\t\t\t\t\tif (tableContainerWidth < previewTableWidth) {\n\t\t\t\t\t\t\t\ttableContainer.style.overflow = 'unset';\n\n\t\t\t\t\t\t\t\t// hide wptb-table-container-matrix\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttableContainerMatrix &&\n\t\t\t\t\t\t\t\t\t!tableContainerMatrix.classList.contains('wptb-matrix-hide')\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\ttableContainerMatrix.classList.add('wptb-matrix-hide');\n\t\t\t\t\t\t\t\t\ttableReconstructed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpreviewTable.classList.add('wptb-mobile-view-active');\n\n\t\t\t\t\t\t\t\tif (previewTable.rows && tableColumns) {\n\t\t\t\t\t\t\t\t\t// we get the estimated cell width\n\t\t\t\t\t\t\t\t\tconst tdWidth = previewTableWidth / tableColumns;\n\n\t\t\t\t\t\t\t\t\t// get the quantity of whole Columns that are can placed in the container\n\t\t\t\t\t\t\t\t\tlet wholeColumnsInContainer = Math.floor(tableContainerWidth / tdWidth);\n\t\t\t\t\t\t\t\t\tif (wholeColumnsInContainer < 1) wholeColumnsInContainer = 1;\n\n\t\t\t\t\t\t\t\t\t// check for the existence of a mobile table\n\t\t\t\t\t\t\t\t\t// if it available, check this table for compliance\n\t\t\t\t\t\t\t\t\t// with our conditions. If it compliance, remain this table\n\t\t\t\t\t\t\t\t\t// and cancel creating a new table ( createNewTableIndic = false ).\n\t\t\t\t\t\t\t\t\tif (tableContainer.getElementsByClassName('wptb-preview-table-mobile').length > 0) {\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t'wptb-preview-table-mobile'\n\t\t\t\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.classList.remove('wptb-mobile-hide');\n\t\t\t\t\t\t\t\t\t\tconst dataWholeColumnInContainer =\n\t\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.dataset.wholeColumnsInContainer;\n\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\n\t\t\t\t\t\t\t\t\t\t\tpreviewTable.classList.contains('wptb-table-preview-head')\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\n\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\n\t\t\t\t\t\t\t\t\t\t\t!previewTable.classList.contains('wptb-table-preview-head') &&\n\t\t\t\t\t\t\t\t\t\t\t(tableContainerWidth > 480 || wptbPreviewTableMobile.column == 1)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.parentNode.removeChild(wptbPreviewTableMobile);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t\t// if indicator of creating of table \"true\" - continue\n\t\t\t\t\t\t\t\t\tif (createNewTableIndic) {\n\t\t\t\t\t\t\t\t\t\t// create new table for mobile devices\n\t\t\t\t\t\t\t\t\t\tconst newTable = document.createElement('table');\n\t\t\t\t\t\t\t\t\t\tconst newTableTbody = document.createElement('tbody');\n\t\t\t\t\t\t\t\t\t\tnewTable.appendChild(newTableTbody);\n\n\t\t\t\t\t\t\t\t\t\t// add css class for new mobile table\n\t\t\t\t\t\t\t\t\t\tnewTable.classList.add('wptb-preview-table-mobile');\n\t\t\t\t\t\t\t\t\t\tconst infArr = previewTable.className.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\t\t\t\t\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\t\t\t\t\t\tnewTable.classList.add(infArr[0]);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// get number of rows for wptb-preview-table\n\t\t\t\t\t\t\t\t\t\tconst tableRows = previewTable.rows.length;\n\n\t\t\t\t\t\t\t\t\t\t// In this variable must have quantity columns of the last section of the new table\n\t\t\t\t\t\t\t\t\t\tlet newTableLastSectionFilledColumns;\n\n\t\t\t\t\t\t\t\t\t\t// set valuesIsSaved in 'false'\n\t\t\t\t\t\t\t\t\t\t// if the parameters newTableLastSectionFilledColumns get\n\t\t\t\t\t\t\t\t\t\t// optimal values, valuesIsSaved must have value 'true'\n\t\t\t\t\t\t\t\t\t\tlet valuesIsSaved = false;\n\n\t\t\t\t\t\t\t\t\t\t// check if top row is as \"header\"\n\t\t\t\t\t\t\t\t\t\tif (previewTable.classList.contains('wptb-table-preview-head')) {\n\t\t\t\t\t\t\t\t\t\t\t// quantity rows without top row\n\t\t\t\t\t\t\t\t\t\t\tconst tableRowsWithoutHeader = tableRows - 1;\n\n\t\t\t\t\t\t\t\t\t\t\t// this variable will have quantity columns in new mobile table\n\t\t\t\t\t\t\t\t\t\t\tlet newTableColumnsWithoutLeftHeader;\n\n\t\t\t\t\t\t\t\t\t\t\t// if quantity of rows in desktop table more than\n\t\t\t\t\t\t\t\t\t\t\t// quantity whole columns which are can placed in the container,\n\t\t\t\t\t\t\t\t\t\t\t// execute \"loop for\"\n\t\t\t\t\t\t\t\t\t\t\tif (tableRows > wholeColumnsInContainer) {\n\t\t\t\t\t\t\t\t\t\t\t\t// this code, сyclical reduces the number of columns in the new table,\n\t\t\t\t\t\t\t\t\t\t\t\t// until the optimal view is obtained so that the last block of the new table\n\t\t\t\t\t\t\t\t\t\t\t\t// has more than half the columns compared to the previous blocks\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableRowsWithoutHeader; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = wholeColumnsInContainer - 1 - i;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader <= 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = 1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader % newTableColumnsWithoutLeftHeader;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2 * newTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.8 * newTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 18 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.6 * newTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = tableRowsWithoutHeader;\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\n\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// if all necessary values ​​are available (  ), execute\n\t\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\n\t\t\t\t\t\t\t\t\t\t\t\tlet countRows;\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountRows =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableColumns *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader / newTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountRows = tableColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumberLast = Math.floor((countRows - 1) / tableColumns);\n\t\t\t\t\t\t\t\t\t\t\t\tlet tdStyles;\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < countRows; j++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(j / tableColumns);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tdLeftHeader = previewTable.rows[0].children[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet td;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowFirstStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!tdLeftHeader.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.backgroundColor =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trowFirstStyles.backgroundColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.width = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.height = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t// tdLeftHeader.removeAttribute('data-x-index');\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.removeAttribute('data-wptb-css-td-auto-width');\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderTopColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderBottomColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderTopWidth = '5px';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(tdLeftHeader);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet k = newTableColumnsWithoutLeftHeader * sectionNumber + 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tk < newTableColumnsWithoutLeftHeader * (sectionNumber + 1) + 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tk++\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (k < previewTable.rows.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = previewTable.rows[k].children[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowKStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[k]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!td.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.backgroundColor = rowKStyles.backgroundColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.width = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.height = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// td.removeAttribute('data-x-index');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.removeAttribute('data-wptb-css-td-auto-width');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = document.createElement('td');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderWidth = '0px';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.background = '#fff';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderTopColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderBottomColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderTopWidth = '5px';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tlet newTableColumns;\n\t\t\t\t\t\t\t\t\t\t\tif (tableContainerWidth > 480) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableColumns; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = wholeColumnsInContainer - i;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumns == 0) newTableColumns = 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = tableColumns % newTableColumns;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 2 * newTableLastSectionFilledColumns <= 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.8 * newTableLastSectionFilledColumns <= 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 18 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.6 * newTableLastSectionFilledColumns <= 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = 1;\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\n\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\tnewTable.column = 1;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tconst increaseRatioRows = Math.ceil(tableColumns / newTableColumns);\n\n\t\t\t\t\t\t\t\t\t\t\tconst newTableRows = increaseRatioRows * tableRows;\n\n\t\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < newTableRows; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(i / tableRows);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet jMax;\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet jStart;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionNumber != increaseRatioRows - 1 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns == 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = sectionNumber * newTableColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = newTableColumns * (1 + sectionNumber);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = tableColumns - newTableLastSectionFilledColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = tableColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst row = previewTable.rows[i - sectionNumber * tableRows];\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.classList = row.classList;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.style.backgroundColor = row.style.backgroundColor;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = jStart; j < jMax; j++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newTd = row.children[j].cloneNode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!newTd.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowStyles = window.getComputedStyle(row);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.backgroundColor = rowStyles.backgroundColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.width = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.height = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// newTd.removeAttribute('data-x-index');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.removeAttribute('data-wptb-css-td-auto-width');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(newTd);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tnewTable.dataset.wholeColumnsInContainer = wholeColumnsInContainer;\n\t\t\t\t\t\t\t\t\t\tconst images = newTable.querySelectorAll('[srcset]');\n\t\t\t\t\t\t\t\t\t\tif (images.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\timages[i].removeAttribute('srcset');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = newTable;\n\t\t\t\t\t\t\t\t\t\ttableContainer.appendChild(newTable);\n\t\t\t\t\t\t\t\t\t\ttableReconstructed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\ttableContainerMatrix &&\n\t\t\t\t\t\t\t\ttableContainerMatrix.classList.contains('wptb-matrix-hide')\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\ttableContainerMatrix.classList.remove('wptb-matrix-hide');\n\t\t\t\t\t\t\t\ttableReconstructed = true;\n\t\t\t\t\t\t\t\tpreviewTable.classList.remove('wptb-mobile-view-active');\n\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.querySelector('.wptb-preview-table-mobile');\n\t\t\t\t\t\t\t\tif (wptbPreviewTableMobile) {\n\t\t\t\t\t\t\t\t\ttableContainer\n\t\t\t\t\t\t\t\t\t\t.getElementsByClassName('wptb-preview-table-mobile')[0]\n\t\t\t\t\t\t\t\t\t\t.classList.add('wptb-mobile-hide');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttableContainer.style.overflow = 'auto';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpreviewTable.style.minWidth = 'auto';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tWPTB_RecalculateIndexes(previewTable);\n\n\t\t\t\t\t\tif (tableReconstructed) {\n\t\t\t\t\t\t\tWPTB_RecalculateIndexes(wptbPreviewTableMobile);\n\t\t\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', { detail: true, bubbles: true });\n\t\t\t\t\t\t\tpreviewTable.dispatchEvent(tabEvent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction wptb_tdDefaultWidth() {\n\t\t\tconst wptbTableContainers = document.getElementsByClassName('wptb-table-container');\n\t\t\t// let frontendEditLink = document.querySelectorAll( '.wptb-frontend-table-edit-link' );\n\t\t\tfor (let i = 0; i < wptbTableContainers.length; i++) {\n\t\t\t\tconst wptbTableContainer = wptbTableContainers[i];\n\n\t\t\t\twptbTableContainer.classList.add(`wptb-table-container-${i}`);\n\n\t\t\t\tlet table = wptbTableContainer.getElementsByClassName('wptb-preview-table');\n\t\t\t\tif (table.length > 0) {\n\t\t\t\t\ttable = table[0];\n\n\t\t\t\t\tif (table.dataset.wptbTableContainerMaxWidth) {\n\t\t\t\t\t\twptbTableContainer.style.maxWidth = `${table.dataset.wptbTableContainerMaxWidth}px`;\n\t\t\t\t\t}\n\t\t\t\t\ttable.classList.remove('wptb-table-preview-static-indic');\n\n\t\t\t\t\ttable.mergingСellsHorizontally = false;\n\t\t\t\t\tconst tds = table.querySelectorAll('td');\n\t\t\t\t\tfor (let j = 0; j < tds.length; j++) {\n\t\t\t\t\t\tif (tds[j].colSpan > 1) {\n\t\t\t\t\t\t\ttable.mergingСellsHorizontally = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst wptbTableContainerWidth = wptbTableContainer.offsetWidth;\n\n\t\t\t\t\tconst td = table.querySelector('td');\n\t\t\t\t\tconst tdStyleObj = window.getComputedStyle(td, null);\n\t\t\t\t\tconst tdBorderLeftWidth = tdStyleObj.getPropertyValue('border-left-width');\n\t\t\t\t\tconst tdBorderRightWidth = tdStyleObj.getPropertyValue('border-right-width');\n\t\t\t\t\tconst tdPaddingLeftWidth = tdStyleObj.getPropertyValue('padding-left');\n\t\t\t\t\tconst tdPaddingRightWidth = tdStyleObj.getPropertyValue('padding-left');\n\t\t\t\t\tconst tdPaddingCommon = parseFloat(tdPaddingLeftWidth, 10) + parseFloat(tdPaddingRightWidth, 10);\n\t\t\t\t\tconst tableTdBorderCommonWidth =\n\t\t\t\t\t\tparseFloat(tdBorderLeftWidth, 10) + parseFloat(tdBorderRightWidth, 10);\n\t\t\t\t\tconst { wptbTableTdsSumMaxWidth } = table.dataset;\n\t\t\t\t\tconst { wptbFixedWidthSize } = table.dataset;\n\t\t\t\t\tconst { wptbCellsWidthAutoCount } = table.dataset;\n\t\t\t\t\tlet styleElementCreate = false;\n\t\t\t\t\tlet tableTdWidthAuto;\n\t\t\t\t\tif (wptbTableTdsSumMaxWidth < wptbTableContainerWidth) {\n\t\t\t\t\t\tif (wptbCellsWidthAutoCount) {\n\t\t\t\t\t\t\ttable.style.minWidth = '100%';\n\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = wptbTableTdsSumMaxWidth + 'px';\n\t\t\t\t\t\t\t//                        }\n\n\t\t\t\t\t\t\tif (table.mergingСellsHorizontally) {\n\t\t\t\t\t\t\t\ttable.style.width = 'auto';\n\t\t\t\t\t\t\t\tconst tableTdsWidthAutoCommon = wptbTableContainerWidth - wptbFixedWidthSize;\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdsWidthAutoCommon / wptbCellsWidthAutoCount;\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdWidthAuto - tdPaddingCommon - tableTdBorderCommonWidth;\n\t\t\t\t\t\t\t\tstyleElementCreate = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttable.style.width = '100%';\n\n\t\t\t\t\t\t\t\t//                            if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.width = '100%';\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.maxWidth = '100%';\n\t\t\t\t\t\t\t\t//                            }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttable.style.width = 'auto';\n\t\t\t\t\t\t\ttable.style.minWidth = null;\n\t\t\t\t\t\t\ttable.style.maxWidth = `${wptbTableTdsSumMaxWidth}px`;\n\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.width = null;\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = null;\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.maxWidth = wptbTableTdsSumMaxWidth + 'px';\n\t\t\t\t\t\t\t//                        }\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttable.style.maxWidth = null;\n\t\t\t\t\t\ttable.style.minWidth = `${table.dataset.wptbTableTdsSumMaxWidth}px`;\n\t\t\t\t\t\ttable.style.width = 'auto';\n\t\t\t\t\t\ttableTdWidthAuto = table.dataset.wptbTdWidthAuto ? table.dataset.wptbTdWidthAuto : '100';\n\t\t\t\t\t\tstyleElementCreate = true;\n\n\t\t\t\t\t\t//                    if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t//                        frontendEditLink[i].style.maxWidth = '100%';\n\t\t\t\t\t\t//                        frontendEditLink[i].style.minWidth = table.dataset.wptbTableTdsSumMaxWidth + 'px';\n\t\t\t\t\t\t//                        frontendEditLink[i].style.width = null;\n\t\t\t\t\t\t//                    }\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { head } = document;\n\t\t\t\t\tif (head) {\n\t\t\t\t\t\tconst cssForTdsWidthAutoOld = head.querySelector(`style[data-wptb-td-auto-width-${i}=\"true\"]`);\n\n\t\t\t\t\t\tif (cssForTdsWidthAutoOld) {\n\t\t\t\t\t\t\thead.removeChild(cssForTdsWidthAutoOld);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (styleElementCreate) {\n\t\t\t\t\t\tconst cssForTdsWidthAuto = document.createElement('style');\n\t\t\t\t\t\tcssForTdsWidthAuto.setAttribute(`data-wptb-td-auto-width-${i}`, true);\n\t\t\t\t\t\tcssForTdsWidthAuto.innerHTML = `.wptb-table-container-${i} table td[data-wptb-css-td-auto-width=true]{width:${tableTdWidthAuto}px}`;\n\t\t\t\t\t\tif (head) {\n\t\t\t\t\t\t\thead.appendChild(cssForTdsWidthAuto);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// code for adding of old css styles for correct view\n\t\tconst elements = document.getElementsByClassName('wptb-ph-element');\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tconst element = elements[i];\n\t\t\tif (element.classList.contains('wptb-list-item-container')) {\n\t\t\t\telement.classList.remove('wptb-list-item-container');\n\t\t\t\telement.classList.add('wptb-list-container');\n\t\t\t}\n\n\t\t\tif (element.classList.contains('wptb-button-container')) {\n\t\t\t\tconst infArr = element.className.match(/wptb-size-([A-Z]+)/i);\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tconst wptbSize = infArr[0];\n\t\t\t\t\tconst wptbSizeNew = wptbSize.toLowerCase();\n\n\t\t\t\t\telement.classList.remove(wptbSize);\n\n\t\t\t\t\tconst wptbButtonWrapper = element.querySelector('.wptb-button-wrapper');\n\t\t\t\t\tif (wptbButtonWrapper) {\n\t\t\t\t\t\twptbButtonWrapper.classList.add(wptbSizeNew);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// responsive setup\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst responsiveFront = new WPTB_ResponsiveFrontend({\n\t\t\tquery: '.wptb-preview-table',\n\t\t\tbindToResize: true,\n\t\t});\n\n\t\t// sorting table\n\t\tfunction sortingTable() {\n\t\t\tconst tables = document.querySelectorAll('.wptb-preview-table');\n\t\t\tfor (let i = 0; i < tables.length; i++) {\n\t\t\t\tconst sortableTable = new WPTB_SortableTable({ table: tables[i] });\n\t\t\t\tsortableTable.sortableTableInitialization(responsiveFront);\n\t\t\t}\n\t\t}\n\t\tsortingTable();\n\t\tresponsiveFront.rebuildTables();\n\n\t\tWPTB_StylePass.init(WptbFrontendData.stylePass);\n\t});\n})(jQuery);\n"]}