{"version":3,"sources":["WPTB_CutGlueTable.js","WPTB_GetDirectionAfterReconstruction.js","WPTB_SortableTable.js","WPTB_RecalculateIndexes.js","WPTB_ResponsiveFrontend.js","WPTB_StylePass.js","wp-table-builder-frontend.js"],"names":["WPTB_CutGlueTable","cutTableHorizontally","rowBefore","table","rows","i","tableRowsIChildren","children","j","length","rowSpan","newTdRowspan","dataset","sameCellBeforeDivision","td","hasOwnProperty","wptbCell","mark","getDOMElement","document","createElement","tdTopStyle","getAttribute","setAttribute","colSpan","dataXIndex","xIndex","dataXIndexNext","parseInt","beforeTd","maxCols","querySelector","insertBefore","WPTB_RecalculateIndexes","glueTableHorizontally","tds","_toConsumableArray","getElementsByTagName","hasAttribute","dataSameCellBeforeDivision","tdsSameBeforeDivision","querySelectorAll","parentNode","classList","contains","yIndex","tdsSameBeforeDivisionJPlusChildren","k","appendChild","removeChild","cutTableVertically","col","rowSpanNewTd","colSpanOld","colSpanNewTd","rowChildren","rowChildrenLength","afterTd","tdLeftStyle","tdAnalogThisX","style","width","tdAnalogThisY","height","glueTableVertically","jFirstTdGlue","WPTB_GetDirectionAfterReconstruction","typeFirst","typeSecond","verticalProp","responsiveFront","itemsPerHeader","tableMaxCols","switchMode","type","getDirective","e","directives","sizeRangeId","detail","mode","responsiveMode","modeOptions","topRowAsHeader","cellStackDirection","cellsPerRow","newTable","key","context","factory","exports","_typeof","module","self","global","options","arguments","undefined","this","thisObject","sortingCellMouseMov","element","x","y","xMatch","target","tagName","offsetX","layerX","offsetY","layerY","clientWidth","clientHeight","add","remove","sortingCellMouseMoveVertical","sortingCellMouseMoveHorizontal","tdMouseLeave","sortableTable","currentTarget","tableWasSorted","tableRowsBefore","tableRowsAfter","tableRowsArr","tableLastCont","push","rowspan","rowNum","concat","map","rowsTdFirst","rowsValuesArr","tdYCoordsRowSpanPrevious","tableRowsPushed","tdsChanged","changeSortingTdsCollection","tdRowspan","textElementsValues","textElementsValuesGet","rowsTd","value","orderBy","setSortedAscDataAttr","sort","prev","next","sortOrder","unshift","indexOf","trRef","tBody","innerHTML","rowsValObj","row","tr","colspan","colNum","columnsTdFirst","columnsValuesArr","tdXCoordsColSpanPrevious","tdColspan","columnsTd","tdsColumn","difference","columnsValObj","tdsAll","removeAttribute","removeCellsAttrAfterDivision","tableSM","tableStateSet","reassignElementsStyles","dataAttr","prevValue","nextValue","cell","textElements","innerText","tdIndexSpanPrev","collectionTds","collectionTdsJSpan","collectionTdsJSpanProperty","indexName","indexNameCamelCase","indexNamePerpendicularCamelCase","tableGroupCount","tdsCollectionChanged","tdSpanProperty","splice","tdSpan","cellsStylesScheme","rowsStylesScheme","sortModeSwitcher","active","removeEventListener","sortableTableVerticalStart","sortingCellMouseMoveSwitcher","addEventListener","wptbSortableTableVertical","createTableElementsStylesScheme","sortableTableHorizontalStart","wptbSortableTableHorizontal","tableObjectChange","start","elemSelector","elements","elem","backgroundColor","window","getComputedStyle","getPropertyValue","objectKey","String","elementsStylesScheme","elemStyles","sortableTableInitialization","sortModeSwitcherRun","switchModeObj","tableOld","call","_this","s","sCMM","dataAttrSortChange","rowsLength","dataYIndexStart","trs","maxColsFull","tdsArr","jMainIter","z","columns","logToConsole","message","process","env","NODE_ENV","console","Error","CellObject","cellElement","reference","referenceObject","mergedRenderStatus","mergedCells","column","getMergedRenderStatus","setMergedRenderStatus","status","addToMergedCells","mergeType","cellObj","isReference","cloneNode","modifications","spans","remainingSpans","cacheSpanValues","Object","keys","defaultVal","prototype","getSpan","spanType","spanVal","getElement","getRemainingSpans","setRemainingSpans","createCellElement","attributeKey","attributeValue","append","glue","currentVal","default","setSpan","valueToApply","mc","remainingVal","remainingParentSpans","startIndex","endIndex","resetAttribute","resetAllAttributes","el","TableObject","tableEl","_this2","tableElement","parsedTable","rowCache","originals","rowColors","header","even","odd","addToParsed","r","c","cellObject","parseTable","Array","from","ri","ci","currentCellObject","spanRow","spanTypes","spanCol","sr","referenceCell","sc","parseRowColors","headerDatasetColor","wptbHeaderBackgroundColor","evenRowDatasetColor","wptbEvenRowBackgroundColor","oddRowDatasetColor","wptbOddRowBackgroundColor","rowsNeeded","rn","tempRow","addRow","fromOriginals","originalIndex","isArray","tableBody","range","createRange","setStart","createContextualFragment","join","childNodes","id","clearTable","getRow","maxRows","maxColumns","reduce","p","getCell","returnObject","getCellsAtRow","rowId","returnObj","cells","tempCell","appendToRow","cellRowId","cellColumnId","cachedRow","appendElementToRow","appendObjectToRow","responsiveClassDefaultOptions","query","defaultClasses","bindToResize","_this3","_objectSpread","elementObjects","tableObject","bindRebuildToResize","rebuildTables","directiveString","wptbResponsiveDirectives","JSON","parse","atob","addDefaultClasses","removeDefaultClasses","autoBuild","sizeRange","autoOption","tableObj","direction","staticTopRow","buildDefault","autoDirectionBuild","isRowStacked","headerBuild","allCellsByRow","rowStartIndex","filter","b","rowObj","forEach","cellCount","pR","allCellsByCol","t","tCell","cR","headerCells","h","stackedAsColumn","rowBorderStyle","headerCount","Math","ceil","currentOriginalRow","addBorder","borderTop","addHeaderCells","cc","currentRowSpan","cellAddStatus","currentCell","remainingItems","min","hc","clonedHeaderCell","rS","cS","colorIndex","calculateRangeId","val","stops","sortedStops","a","rangeId","rebuildTable","size","directive","responsiveEnabled","buildCallable","getBoundingClientRect","breakpoints","tabEvent","CustomEvent","dispatchEvent","o","innerSize","innerWidth","relativeWidth","globalKey","stylesheets","insertShadowRoot","shadowRootContainer","tableContainer","mainParent","parentChildren","tableIndex","upSibling","downSibling","prepareAllStylesheets","shadowRoot","borrowFromTheme","insertAdjacentElement","fontFamily","init","tableContainers","setupStylePass","checkTableEligibility","disableThemeStyles","container","maxWidth","wptbTableContainerMaxWidth","attachShadow","stylesheetsObj","root","prepareStylesheet","handler","url","linkElement","jQuery","ready","$","getElementsByClassName","wptb_tableReconstraction","createNewTableIndic","previewTable","tableContainerMatrix","display","wptbTableAlignment","offsetWidth","reconstraction","wptbAdaptiveTable","tableContainerWidth","previewTableWidth","tableColumns","previewTableRows","tableReconstructed","wptbPreviewTableMobile","overflow","tdWidth","wholeColumnsInContainer","floor","dataWholeColumnInContainer","newTableTbody","infArr","className","match","tableRows","newTableLastSectionFilledColumns","valuesIsSaved","tableRowsWithoutHeader","newTableColumnsWithoutLeftHeader","countRows","tdStyles","sectionNumber","tdLeftHeader","rowFirstStyles","borderTopColor","borderColor","borderBottomColor","borderTopWidth","rowKStyles","borderWidth","background","newTableColumns","increaseRatioRows","newTableRows","jMax","jStart","rowStyles","newTd","images","minWidth","bubbles","wptb_tdDefaultWidth","wptbTableContainers","wptbTableContainer","merging–°ellsHorizontally","wptbTableContainerWidth","tdStyleObj","tdBorderLeftWidth","tdBorderRightWidth","tdPaddingLeftWidth","tdPaddingRightWidth","tdPaddingCommon","parseFloat","tableTdBorderCommonWidth","wptbTableTdsSumMaxWidth","wptbFixedWidthSize","wptbCellsWidthAutoCount","styleElementCreate","tableTdWidthAuto","wptbTdWidthAuto","head","cssForTdsWidthAutoOld","cssForTdsWidthAuto","wptbElementHoverBgColor","wptbElementHoverTextColor","color","wptbElementHoverScale","transform","wptbElementBgColor","wptbElementColor","resize","wptbSize","wptbSizeNew","toLowerCase","wptbButtonWrapper","WPTB_ResponsiveFrontend","tables","WPTB_SortableTable","sortingTable","responsiveFrontReady","WPTB_StylePass","WptbFrontendData","stylePass"],"mappings":"g9BAAA,IAAIA,kBAAoB,CACpBC,qBAAsB,SAAUC,EAAWC,GACvC,GAAIA,GAASA,EAAMC,KAAKF,GACpB,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAWG,IAG3B,IAFA,IAAIC,EAAqBH,EAAMC,KAAKC,GAAGE,SAE9BC,EAAI,EAAGA,EAAIF,EAAmBG,OAAQD,IAC3C,GAAqC,EAAhCF,EAAmBE,GAAGE,SAAeJ,EAAmBE,GAAGE,QAAUR,EAAYG,EAAI,CACtF,IAAIM,EAAeL,EAAmBE,GAAGE,QAAUR,EAAYG,EAC/DC,EAAmBE,GAAGE,QAAUR,EAAYG,EACtCC,EAAmBE,GAAGI,QAAQC,yBAChCP,EAAmBE,GAAGI,QAAQC,uBAAyB,IAAMR,EAAI,IAAMG,GAG3E,IAAIM,OAAE,EAGFA,EAFDX,EAAMY,eAAe,aACpBD,EAAK,IAAIX,EAAMa,SAAUb,EAAMc,OACvBC,gBAEHC,SAASC,cAAc,MAG5BC,EAAaf,EAAmBE,GAAGc,aAAc,SACrDR,EAAGS,aAAc,QAASF,GAC1BP,EAAGU,QAAUlB,EAAmBE,GAAGgB,QACnCV,EAAGJ,QAAUC,EACbG,EAAGF,QAAQC,uBAAyBP,EAAmBE,GAAGI,QAAQC,uBAKlE,IAHA,IAAIY,EAAanB,EAAmBE,GAAGI,QAAQc,OAC3CC,EAAiBC,SAAUH,GAAeG,SAAUtB,EAAmBE,GAAGgB,SAC1EK,OAAQ,GACHA,GAAYF,EAAiBxB,EAAM2B,SACxCD,EAAW1B,EAAMC,KAAKF,GAAW6B,cAAe,kBAAoBJ,EAAiB,MACrFA,IAEJxB,EAAMC,KAAKF,GAAW8B,aAAclB,EAAIe,GAExCI,wBAAwB9B,KAM5C+B,sBAAuB,SAAU/B,GAC7B,GAAGA,EAAO,CAEN,IADA,IAAIgC,EAAGC,mBAAOjC,EAAMkC,qBAAsB,OACjChC,EAAI,EAAGA,EAAI8B,EAAI1B,OAAQJ,IAC5B,GAAI8B,EAAI9B,GAAGiC,aAAc,kCAGrB,IAFA,IAAIC,EAA6BJ,EAAI9B,GAAGO,QAAQC,uBAC5C2B,EAAwBrC,EAAMsC,iBAAkB,oCAAsCF,EAA6B,MAC9G/B,EAAI,EAAGA,EAAIgC,EAAsB/B,OAAQD,IAC9C,GAAIgC,EAAsBhC,IAAMgC,EAAsBhC,EAAI,IAClDgC,EAAsBhC,GAAGkC,YAAcF,EAAsBhC,EAAI,GAAGkC,aAClEF,EAAsBhC,GAAGkC,WAAWC,UAAUC,SAAU,qBACxDJ,EAAsBhC,EAAI,GAAGkC,WAAWC,UAAUC,SAAU,oBACxDJ,EAAsBhC,EAAI,GAAGI,QAAQiC,QAAUjB,SAAUY,EAAsBhC,GAAGI,QAAQiC,QAC5FjB,SAAUY,EAAsBhC,GAAGE,SAAc,CACjD8B,EAAsBhC,GAAGE,SAAW8B,EAAsBhC,EAAI,GAAGE,QAIjE,IAFA,IAAIoC,EAAkCV,mBAAOI,EAAsBhC,EAAI,GAAGD,UAEjEwC,EAAI,EAAGA,EAAID,EAAmCrC,OAAQsC,IAC3DP,EAAsBhC,GAAGwC,YAAaF,EAAmCC,IAG/DP,EAAsBhC,EAAI,GAAGkC,WACnCO,YAAaT,EAAsBhC,EAAI,IAQvEyB,wBAAwB9B,KAGhC+C,mBAAoB,SAAUC,EAAKhD,GAC/B,IAAM,IAAIE,EAAI,EAAGA,EAAIF,EAAMC,KAAKK,OAAQJ,IAAM,CAC1C,GAAI8C,EAAMhD,EAAM2B,SACD,GAAPqB,IAAgBhD,EAAMC,KAAKC,GAAG0B,cAAe,kBAAoBoB,EAAM,MASvE,IARA,IAKIC,EACAC,EACAC,EAPAC,EAAcpD,EAAMC,KAAKC,GAAGE,SAE5BO,OAAE,EACF0C,EAAoBD,EAAY9C,OAChCgD,OAAO,EAIFjD,EAAI,EAAGA,EAAIgD,EAAmBhD,IACnC,GAA6B,EAAzB+C,EAAY/C,GAAGgB,SAAeI,SAAU2B,EAAY/C,GAAGI,QAAQc,QAAWyB,GAC1EvB,SAAU2B,EAAY/C,GAAGI,QAAQc,QAAWE,SAAU2B,EAAY/C,GAAGgB,SAAY2B,EAAM,CAGnFrC,EAFDX,EAAMY,eAAe,aACpBD,EAAK,IAAIX,EAAMa,SAAUb,EAAMc,OACvBC,gBAEHC,SAASC,cAAc,MAGhCgC,EAAeG,EAAY/C,GAAGE,QAC9B2C,EAAaE,EAAY/C,GAAGgB,QAC5B+B,EAAY/C,GAAGgB,QAAU2B,EAAMI,EAAY/C,GAAGI,QAAQc,OACtD4B,EAAeD,EAAaE,EAAY/C,GAAGgB,QAErC+B,EAAY/C,GAAGI,QAAQC,yBACzB0C,EAAY/C,GAAGI,QAAQC,uBAAyB,IAAMR,EAAI,IAAMG,GAGpE,IAAIkD,EAAcH,EAAY/C,GAAGc,aAAc,SAC/CR,EAAGS,aAAc,QAASmC,GAEtBC,EAAgBxD,EAAM4B,cAAe,kBAAoBoB,EAAM,MAC/DQ,IACA7C,EAAG8C,MAAMC,MAAQF,EAAcC,MAAMC,OAGrCC,EAAgB3D,EAAM4B,cAAe,kBAAoB1B,EAAI,MAC7DyD,IACAhD,EAAG8C,MAAMG,OAASD,EAAcF,MAAMG,QAGtCN,EADAF,EAAY/C,EAAI,IAGN,KAGdL,EAAMC,KAAKC,GAAG2B,aAAclB,EAAI2C,GAChC3C,EAAGU,QAAU8B,EACbxC,EAAGJ,QAAU0C,EACbtC,EAAGF,QAAQC,uBAAyB0C,EAAY/C,GAAGI,QAAQC,uBAC3DR,GAAK+C,EAAe,EACpB,MAKhBnB,wBAAwB9B,KAGhC6D,oBAAqB,SAAU7D,GAC3B,GAAIA,EAAQ,CAER,IADA,IAAIgC,EAAGC,mBAAOjC,EAAMkC,qBAAsB,OACjChC,EAAI,EAAGA,EAAI8B,EAAI1B,OAAQJ,IAC5B,GAAI8B,EAAI9B,GAAGiC,aAAc,kCAKrB,IAJA,IAAIC,EAA6BJ,EAAI9B,GAAGO,QAAQC,uBAC5C2B,EAAqBJ,mBAAOjC,EAAMsC,iBAAkB,oCAAsCF,EAA6B,OAEvH0B,EAAe,KACVzD,EAAI,EAAGA,EAAIgC,EAAsB/B,OAAQD,IAC9C,GAAIgC,EAAsBhC,IAAMgC,EAAsBhC,EAAI,KACpDgC,EAAsBhC,GAAGmC,UAAUC,SAAU,wBAC7CJ,EAAsBhC,EAAI,GAAGmC,UAAUC,SAAU,uBAC7CJ,EAAsBhC,EAAI,GAAGI,QAAQc,QAAUE,SAAUY,EAAsBhC,GAAGI,QAAQc,QAC5FE,SAAUY,EAAsBhC,GAAGgB,SAAc,CAC7B,MAAhByC,IACAA,EAAezD,GAEnBgC,EAAsByB,GAAczC,SAAWgB,EAAsBhC,EAAI,GAAGgB,QAI5E,IAFA,IAAIsB,EAAkCV,mBAAOI,EAAsBhC,EAAI,GAAGD,UAEjEwC,EAAI,EAAGA,EAAID,EAAmCrC,OAAQsC,IAC3DP,EAAsByB,GAAcjB,YAAaF,EAAmCC,IAG1EP,EAAsBhC,EAAI,GAAGkC,WACnCO,YAAaT,EAAsBhC,EAAI,IAOnEyB,wBAAwB9B,MCrKhC+D,qCAAuC,SAAU/D,EAAOgE,EAAWC,EAAWC,EAAcC,GAE5F,IAAIC,EAAiB,EACjBC,EAAerE,EAAM2B,QACnB2C,EAAa,GACfC,EAAO,GA4DX,OA3DIJ,GAAmBA,EAAgBK,aAAaxE,GAChDsE,EAAU,OAAU,SAAUG,GAC1B,IAAMC,EAAaP,EAAgBK,aAAaxE,GAE5C2E,EAAc,UAmClB,OAlCIF,GAAKA,EAAEG,SACPD,EAAcF,EAAEG,OAAOD,aAE3BJ,EAAO,CAACP,EAAW,GACC,YAAhBW,EACID,EAAW9D,eAAe,iBACpBiE,EAAOH,EAAWI,gBAClBC,EAAcL,EAAWK,YAAYF,IAG3BjE,eAAe,mBAC3BmE,EAAYC,eAAepE,eAAe+D,IAC1CI,EAAYC,eAAeL,GAGvBI,EAAYnE,eAAe,uBAC3BmE,EAAYE,mBAAmBrE,eAAe+D,KAEM,QAAhDI,EAAYE,mBAAmBN,IAC/BJ,EAAO,CAACN,EAAY,GACpBG,EAAiBC,EAAe,GACuB,WAAhDU,EAAYE,mBAAmBN,IAClCI,EAAYnE,eAAe,iBAC3BwD,EAAiBW,EAAYG,YAAYP,KAKrDP,EAAiB,GAIzBA,EAAiB,EAEd,CAACG,KAAAA,EAAMH,eAAAA,IAGlBE,EAAU,OAAU,SAAUG,GAE1B,GADAF,EAAO,CAACP,EAAW,GACfhE,EAAMwC,UAAUC,SAAS,2BAA4B,CACjDzC,EAAMwC,UAAUC,SAAS,6BACzB8B,EAAO,CAACN,EAAY,MACRC,IACRE,EAAiBC,EAAe,GAGxC,IAAIc,EAAWnF,EAAMuC,WAAWA,WAAWX,cAAc,8BACzD,MAAO,CAAC2C,KAAAA,EAAMH,eAAAA,EAAgBe,SAAAA,GAGlC,MAAO,CAACZ,KAAAA,EAAMH,eAAAA,IAIfE,G,ksCCpEX,SAAyBc,EAAKC,EAASC,GACf,YAAnB,oBAAOC,QAAP,YAAAC,QAAOD,WAA0C,oBAAXE,OACzCA,OAAOF,QAAUD,IAGjBD,EAAQD,GAAOE,IALjB,CAQG,qBAAsBI,MAAQC,OAAQ,WAkyBxC,OAjyBA,WAAsC,IAAdC,EAAc,EAAAC,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAC3B7F,EAAS+F,KAAK/F,MAAQ4F,EAAQ5F,MACpC8B,wBAAwB9B,GACxB,IAAMgG,EAAaD,KAmRnB,SAASE,EAAoBxB,EAAGF,EAAM2B,GACrC,IACOC,EACAC,EACFC,EAHoB,OAArB5B,EAAE6B,OAAOC,SACNJ,EAAiBL,MAAbrB,EAAE+B,QAAuB/B,EAAEgC,OAAShC,EAAE+B,QAC1CJ,EAAiBN,MAAbrB,EAAEiC,QAAuBjC,EAAEkC,OAASlC,EAAEiC,QAC5CL,GAAS,GACC,aAAT9B,GAAuBE,EAAE6B,OAAOM,YAAcT,GAAK,IAAiB,eAAT5B,GAAyB4B,GAAK,MAC7FE,GAAS,GAENA,IAAW5B,EAAE6B,OAAOO,aAAe,IAAM,EAAIT,IAAM3B,EAAE6B,OAAOO,aAAe,IAAM,EAAIT,EACxFF,EAAQ1D,UAAUsE,IAAI,kBAEtBZ,EAAQ1D,UAAUuE,OAAO,mBAG1Bb,EAAQ1D,UAAUuE,OAAO,kBAS3B,SAASC,EAA6BvC,GACrCwB,EAAoBxB,EAAG,WAAYsB,MAQpC,SAASkB,EAA+BxC,GACvCwB,EAAoBxB,EAAG,aAAcsB,MAMtC,SAASmB,IACRnB,KAAKvD,UAAUuE,OAAO,kBAUvB,SAASI,EAAc1C,EAAGF,GACzB,GACCE,EAAE6B,QACmB,OAArB7B,EAAE6B,OAAOC,UACRvG,EAAMuC,WAAWC,UAAUC,SAAS,mCACpC,CACD,IAAMzC,EAAQyE,EAAE2C,cACZC,GAAiB,EACrB,GAAa,aAAT9C,GAAuBE,EAAE6B,OAAO7F,QAAQG,eAAe,kBAAmB,CAK7E,IAAM0G,EAAkB,GAClBC,EAAiB,GACvB,GAAIxB,KAAK3B,gBAAkB2B,KAAK3B,eAAiBpE,EAAMC,KAAKK,OAAQ,CACnEwB,wBAAwB9B,GAGxB,IAFA,IAAMwH,EAAYvF,mBAAOjC,EAAMC,MACzBwH,EAAgBzH,EAAM4B,cAAc,SAAW5B,EAAM4B,cAAc,SAAW5B,EAC3EE,EAAI,EAAGA,EAAIsH,EAAalH,OAAQJ,IACpCA,EAAIuE,EAAE6B,OAAO7F,QAAQiC,QACxB4E,EAAgBI,KAAKF,EAAatH,IAClCuH,EAAc3E,YAAY0E,EAAatH,KAC7BA,EAAIuB,SAASgD,EAAE6B,OAAO7F,QAAQiC,OAAQ,IAAMqD,KAAK3B,iBAC3DmD,EAAeG,KAAKF,EAAatH,IACjCuH,EAAc3E,YAAY0E,EAAatH,KAGzC4B,wBAAwB9B,GAGzB,IAMI2H,EACAC,EAPA5F,EAAMhC,EAAMsC,iBAAN,kBAAAuF,OAAyCpD,EAAE6B,OAAO7F,QAAQc,OAA1D,QACVS,EAAGC,mBAAOD,IAON8F,IAAI,SAACnH,IACFgH,EAAUlG,SAASd,EAAGJ,QAAS,OACpCoH,EAAU,GAEXC,EAASjH,EAAGF,QAAQiC,OACpB7C,kBAAkBC,qBAAqB8H,EAAQ5H,GAC/C4H,GAAUD,EACV9H,kBAAkBC,qBAAqB8H,EAAQ5H,KAOhD,IAJA,IACI+H,EADEC,EAAgB,GAElBC,EAA2B,EACzBC,EAAkB,GACfhI,EAAI,EAAGA,EAAI8B,EAAI1B,OAAQJ,IAAK,CACpC,IAAMiI,EAAaC,EAClB3D,EACAzE,EACAgC,EACA9B,EACA+H,EACA,YAED,GAAIE,GAAcA,EAAWvH,eAAe,KAC3CoB,EAAMmG,EAAWnG,IACjB9B,EAAIiI,EAAWjI,MAFhB,CAIWiI,IACVnG,EAAMmG,EAAWnG,KAalB,IAVA,IAAMrB,EAAKqB,EAAI9B,GAGCmI,GADZA,EAAY5G,SAASd,EAAGJ,QAAS,MACT,EAE5B0H,EAA2BxG,SAASd,EAAGF,QAAQiC,OAAQ,IAAM2F,EAEvDC,EAAqBC,EAAsB5H,GAE3C6H,EAAS,GACNnI,EAAI,EAAGA,EAAIgI,EAAWhI,IAC9BmI,EAAOd,KAAK1H,EAAMC,KAAKwB,SAASd,EAAGF,QAAQiC,OAAQ,IAAMrC,IACzD6H,EAAgBR,KAAKjG,SAASd,EAAGF,QAAQiC,OAAQ,IAAMrC,GAEhC,EAApBM,EAAGF,QAAQiC,OACdsF,EAAcN,KAAK,CAClBc,OAAAA,EACAC,MAAOH,IAGRP,EAAcS,GAIhB,IAAME,EAAUC,EAAqBlE,EAAG,kBACxC,IAAKiE,EAAS,OAMd,GAJIV,EAAc1H,QAAQ0H,EAAcY,KAAK,SAACC,EAAMC,GAAP,OAAgBC,EAAUL,EAASG,EAAMC,KAEtFd,EAAcgB,QAAQ,CAAER,OAAQT,IAE5BC,EAAc1H,OAASN,EAAMC,KAAKK,OACrC,IAAK,IAEEkI,EAFEtI,EAAI,EAAGA,EAAIF,EAAMC,KAAKK,OAAQJ,KACJ,EAA9BgI,EAAgBe,QAAQ/I,MACtBsI,EAAS,IACRd,KAAK1H,EAAMC,KAAKC,IAEvB8H,EAAcN,KAAK,CAClBc,OAAAA,KAKH,IAaOf,EAECyB,EAODzB,EAtBD0B,EAAQnJ,EAAM4B,cAAc,SAClCuH,EAAMC,UAAY,GAElBpB,EAAcF,IAAI,SAACuB,GAClBA,EAAWb,OAAOV,IAAI,SAACwB,GACtBH,EAAMtG,YAAYyG,QAOhBhC,EAAgBhH,SACbmH,EAAgBzH,EAAM4B,cAAc,SAAW5B,EAAM4B,cAAc,SAAW5B,KAE7EkJ,EAAQzB,EAAc7F,cAAc,MAC1C0F,EAAgBQ,IAAI,SAACyB,GACpB9B,EAAc5F,aAAa0H,EAAIL,MAI9B3B,EAAejH,SACZmH,EAAgBzH,EAAM4B,cAAc,SAAW5B,EAAM4B,cAAc,SAAW5B,EAChFmJ,GACH5B,EAAeO,IAAI,SAACyB,GACnB9B,EAAc5E,YAAY0G,MAK7BzH,wBAAwB9B,GAExBH,kBAAkBkC,sBAAsB/B,GAExCqH,GAAiB,OACX,GAAa,eAAT9C,GAAqD,MAA5BE,EAAE6B,OAAO7F,QAAQc,OAAgB,CACpE,IAIIiI,EACAC,EALAzH,EAAMhC,EAAMsC,iBAAN,kBAAAuF,OAAyCpD,EAAE6B,OAAO7F,QAAQiC,OAA1D,QACVV,EAAGC,mBAAOD,IAKN8F,IAAI,SAACnH,IACF6I,EAAU/H,SAASd,EAAGU,QAAS,OACpCmI,EAAU,GAEXC,EAAS9I,EAAGF,QAAQc,OACpB1B,kBAAkBkD,mBAAmB0G,EAAQzJ,GAC7CyJ,GAAUD,EACV3J,kBAAkBkD,mBAAmB0G,EAAQzJ,KAO9C,IAJA,IACI0J,EADEC,EAAmB,GAGrBC,EAA2B,EACtB1J,EAAI,EAAGA,EAAI8B,EAAI1B,OAAQJ,IAAK,CACpC,IAAMiI,EAAaC,EAClB3D,EACAzE,EACAgC,EACA9B,EACA0J,EACA,cAED,GAAIzB,GAAcA,EAAWvH,eAAe,KAC3CoB,EAAMmG,EAAWnG,IACjB9B,EAAIiI,EAAWjI,MAFhB,CAIWiI,IACVnG,EAAMmG,EAAWnG,KAWlB,IARA,IAAMrB,EAAKqB,EAAI9B,GAEC2J,GADZA,EAAYpI,SAASd,EAAGU,QAAS,MACT,EAE5BuI,EAA2BnI,SAASd,EAAGF,QAAQc,OAAQ,IAAMsI,EAEvDvB,EAAqBC,EAAsB5H,GAC3CmJ,EAAY,GACTzJ,EAAI,EAAGA,EAAIwJ,EAAWxJ,IAAK,CACnC,IAAM0J,EAAS9H,mBACXjC,EAAMsC,iBAAN,kBAAAuF,OAAyCpG,SAASd,EAAGF,QAAQc,OAAQ,IAAMlB,EAA3E,QAEJyJ,EAAUpC,KAAKqC,GAEQ,EAApBpJ,EAAGF,QAAQc,OACdoI,EAAiBjC,KAAK,CACrBoC,UAAAA,EACArB,MAAOH,IAGRoB,EAAiBI,GAInB,IAAMpB,EAAUC,EAAqBlE,EAAG,oBACxC,IAAKiE,EAAS,OAMd,GAJIiB,EAAiBrJ,QAAQqJ,EAAiBf,KAAK,SAACC,EAAMC,GAAP,OAAgBC,EAAUL,EAASG,EAAMC,KAE5Fa,EAAiBX,QAAQ,CAAEc,UAAWJ,IAElCC,EAAiBrJ,OAASN,EAAM2B,QAEnC,IADA,IAAMqI,EAAahK,EAAM2B,QAAUgI,EAAiBrJ,OAC3CJ,EAAI,EAAGA,EAAI8J,EAAY9J,IAAK,CACpC,IAAM6J,EAAS9H,mBACXjC,EAAMsC,iBAAN,kBAAAuF,OACgBpG,SAASzB,EAAM2B,QAAS,IAAMF,SAASuI,EAAY,IAAM9J,EADzE,QAKJyJ,EAAiBjC,KAAK,CACrBoC,UAAW,CAACC,KAKf,IAAK,IAAI7J,EAAI,EAAGA,EAAIF,EAAMC,KAAKK,OAAQJ,IACtCF,EAAMC,KAAKC,GAAGkJ,UAAY,GAG3BO,EAAiB7B,IAAI,SAACmC,GACrBA,EAAcH,UAAUhC,IAAI,SAACiC,GAC5BA,EAAUjC,IAAI,SAACnH,GACdX,EAAMC,KAAKU,EAAGF,QAAQiC,QAAQG,YAAYlC,SAK7CmB,wBAAwB9B,GAExBH,kBAAkBgE,oBAAoB7D,GAEtCqH,GAAiB,EAGdA,IAgMN,SAAsCrH,GAErC,IADA,IAAMkK,EAAMjI,mBAAOjC,EAAMkC,qBAAqB,OACrChC,EAAI,EAAGA,EAAIgK,EAAO5J,OAAQJ,IAC9BgK,EAAOhK,GAAGiC,aAAa,mCAC1B+H,EAAOhK,GAAGiK,gBAAgB,kCAnM1BC,CAA6BpK,GAEzBA,EAAMY,eAAe,aAExB,IADgBZ,EAAMqK,YACRC,gBAGfvE,KAAKwE,uBAAuB,MAC5BxE,KAAKwE,uBAAuB,QAa/B,SAAS5B,EAAqBlE,EAAG+F,GAChC,SACC/F,EAAE2C,gBACD3C,EAAE2C,cAAc5E,UAAUC,SAAS,wBACnCgC,EAAE2C,cAAc5E,UAAUC,SAAS,gCAE/BgC,EAAE6B,OAAO7F,QAAQ+J,IAA4C,QAA/B/F,EAAE6B,OAAO7F,QAAQ+J,GAGnD/F,EAAE6B,OAAO7F,QAAQ+J,GAAY,MAF7B/F,EAAE6B,OAAO7F,QAAQ+J,GAAY,OAKvB/F,EAAE6B,OAAO7F,QAAQ+J,IAc1B,SAASzB,EAAT,EAAA,EAAA,GAAgD,IAA7BL,EAA6B,EAAA7C,UAAAvF,aAAAwF,IAAhD,EAAA,EAA6B,MAAagD,EAAM,EAAAjD,UAAAvF,OAAhD,OAAgDwF,EAC3C2E,GAD2C,EAAA5E,UAAAvF,OAAhD,OAAgDwF,GAC1B2C,MACjBiC,EAAY5B,EAAKL,MAMrB,OALIhH,SAASgJ,IAAchJ,SAASiJ,KACnCD,EAAYhJ,SAASgJ,GACrBC,EAAYjJ,SAASiJ,IAGN,QAAZhC,EACC+B,EAAYC,GACP,EAELD,IAAcC,EACV,EAED,EAEJD,EAAYC,EACR,EAEJD,IAAcC,EACV,GAEA,EAST,SAASnC,EAAsBoC,GAI9B,IAHA,IAAIC,EAAeD,EAAKrI,iBAAiB,wBACzCsI,EAAY3I,mBAAO2I,GACfnC,EAAQ,GACHpI,EAAI,EAAGA,EAAIuK,EAAatK,OAAQD,IAExCoI,GADUmC,EAAavK,GAAGuB,cAAc,KAC7BiJ,UACPxK,IAAMuK,EAAatK,OAAS,IAAGmI,GAAS,KAG7C,OAAOA,EAgBR,SAASL,EAA2B3D,EAAGzE,EAAOgC,EAAK9B,EAAG4K,EAAiBvG,GACtE,IAEIwG,EACAC,EACAC,EACAC,EACAC,EACAC,EAGAC,EAVE1K,EAAKqB,EAAI9B,GACXoL,GAAuB,EA2B3B,GAhBa,aAAT/G,GACH0G,EAA6B,UAC7BC,EAAY,eACZC,EAAqB,SACrBC,EAAkC,SAClCG,EAAiB,UACjBF,EAAkBrL,EAAMC,KAAKK,QACV,eAATiE,IACV0G,EAA6B,UAC7BC,EAAY,eACZC,EAAqB,SACrBC,EAAkC,SAClCG,EAAiB,UACjBF,EAAkBrL,EAAM2B,SAG8B,EAAnDhB,EAAGF,QAAQ0K,GAAsBL,EAAqB,CACzDC,EAAgB/K,EAAMsC,iBAAN,IAAAuF,OAA2BqD,EAA3B,MAAArD,OAAyCiD,EAAzC,OAEhB,IAAK,IAAIzK,EAAI,EAAGA,EAAI0K,EAAczK,OAAQD,IAIzC,GAFyB2K,GADzBA,EAAqBD,EAAc1K,GAAG4K,KACQ,EAG7CF,EAAc1K,GAAGI,QAAQ2K,GACxB3G,EAAE6B,OAAO7F,QAAQ2K,IAClB3J,SAASsJ,EAAc1K,GAAGI,QAAQ2K,GAAkC,IACnE3J,SAASuJ,EAAoB,IAC7BvG,EAAE6B,OAAO7F,QAAQ2K,GACjB,CACDpJ,EAAIwJ,OAAOtL,EAAG,EAAG6K,EAAc1K,IAC/BiL,GAAuB,EACvBpL,IACA,OAKH,GAAIoL,EAAsB,MAAO,CAAEtJ,IAAAA,EAAK9B,EAAAA,GAExC,IACauL,GADTA,EAAShK,SAASd,EAAG4K,GAAiB,MACpB,EACtB,GAAIrL,GAAK8B,EAAI1B,OAAS,GAAKmB,SAASd,EAAGF,QAAQ0K,GAAqB,IAAMM,EAASJ,EAAiB,CACnGN,EAAgB/K,EAAMsC,iBAAN,IAAAuF,OACXqD,EADW,MAAArD,OACGpG,SAASd,EAAGF,QAAQ0K,GAAqB,IAAMM,EADlD,OAGhB,IAAK,IAAIpL,EAAI,EAAGA,EAAI0K,EAAczK,OAAQD,IAIzC,GAFyB2K,GADzBA,EAAqBD,EAAc1K,GAAG4K,KACQ,EAG7CF,EAAc1K,GAAGI,QAAQ2K,GACxB3G,EAAE6B,OAAO7F,QAAQ2K,IAClB3J,SAASsJ,EAAc1K,GAAGI,QAAQ2K,GAAkC,IACnE3J,SAASuJ,EAAoB,IAC7BvG,EAAE6B,OAAO7F,QAAQ2K,GACjB,CACDpJ,EAAI0F,KAAKqD,EAAc1K,IACvBiL,GAAuB,EACvB,OAKH,QAAIA,GAA6B,CAAEtJ,IAAAA,GAoCpC,OA1xBA+D,KAAK3B,eAAiB,EACtB2B,KAAK1B,aAAerE,EAAM2B,QAC1BoE,KAAK2F,kBAAoB,GACzB3F,KAAK4F,iBAAmB,GASxB5F,KAAK6F,iBAAmB,SAAUrH,EAAMsH,GACpCA,IACF9F,KAAK6F,iBAAiB,cAAc,GACpC7F,KAAK6F,iBAAiB,YAAY,IAGtB,aAATrH,GACHwB,KAAK/F,MAAM8L,oBAAoB,QAAS/F,KAAKgG,4BAA4B,GAErEF,GACH9F,KAAKiG,6BAA6B,YAAY,GAC9CjG,KAAK/F,MAAMiM,iBAAiB,QAASlG,KAAKgG,4BAA4B,GACtEhG,KAAK/F,MAAMS,QAAQyL,0BAA4B,IAC/CnG,KAAKoG,gCAAgC,MACrCpG,KAAKoG,gCAAgC,QAErCpG,KAAKiG,6BAA6B,YAAY,UACvCjG,KAAK/F,MAAMS,QAAQyL,4BAER,eAAT3H,IACVwB,KAAK/F,MAAM8L,oBAAoB,QAAS/F,KAAKqG,8BAA8B,GAEvEP,GACH9F,KAAKiG,6BAA6B,cAAc,GAChDjG,KAAK/F,MAAMiM,iBAAiB,QAASlG,KAAKqG,8BAA8B,GACxErG,KAAK/F,MAAMS,QAAQ4L,4BAA8B,IACjDtG,KAAKoG,gCAAgC,MACrCpG,KAAKoG,gCAAgC,QAErCpG,KAAKiG,6BAA6B,cAAc,UACzCjG,KAAK/F,MAAMS,QAAQ4L,+BAW7BtG,KAAKuG,kBAAoB,WAAwB,IAAdC,IAAc,EAAA1G,UAAAvF,aAAAwF,IAAAD,UAAA,KAAAA,UAAA,GAMhD,OALGE,KAAK/F,MAAMwC,UAAUC,SAAS,4BAA8B8J,EAC9DxG,KAAK/F,MAAQA,EAAMuC,WAAWA,WAAWX,cAAc,8BAC9CmE,KAAK/F,MAAMwC,UAAUC,SAAS,+BAAiC8J,IACxExG,KAAK/F,MAAQA,EAAMuC,WAAWX,cAAc,wBAEtCmE,KAAK/F,OAQb+F,KAAKoG,gCAAkC,SAAUK,GAChDzG,KAAKuG,oBACL,IAAIG,EAAW1G,KAAK/F,MAAMsC,iBAAiBkK,GAC3C,GAAGC,EAASnM,OACX,IAAI,IAAIJ,EAAI,EAAGA,EAAIuM,EAASnM,OAAQJ,IAAK,CACxC,IAAIwM,EAAOD,EAASvM,GAEhByM,EADmBC,OAAOC,iBAAiBH,EAAM,MACdI,iBAAkB,oBACrDC,EAAY,GACI,OAAjBP,GACFO,EAAYL,EAAKjM,QAAQc,OAAS,IAAMmL,EAAKjM,QAAQiC,OACrDqD,KAAK2F,kBAAkBqB,GAAa,CAACJ,gBAAAA,IACX,OAAjBH,IACTO,EAAYC,OAAO9M,GACnB6F,KAAK4F,iBAAiBoB,GAAa,CAACJ,gBAAAA,IAMvC5G,KAAKuG,mBAAkB,IAQxBvG,KAAKwE,uBAAyB,SAAUiC,GACvCzG,KAAKuG,oBACL,IACIW,EADAR,EAAW1G,KAAK/F,MAAMsC,iBAAiBkK,GAO3C,GALoB,OAAjBA,EACFS,EAAuBlH,KAAK2F,kBACF,OAAjBc,IACTS,EAAuBlH,KAAK4F,kBAE1Bc,EAASnM,OACX,IAAI,IAAIJ,EAAI,EAAGA,EAAIuM,EAASnM,OAAQJ,IAAK,CACxC,IAAIwM,EAAOD,EAASvM,GAChB6M,EAAY,GAMhB,GALoB,OAAjBP,EACFO,EAAYL,EAAKjM,QAAQc,OAAS,IAAMmL,EAAKjM,QAAQiC,OAC3B,OAAjB8J,IACTO,EAAY7M,GAEV+M,EAAqBrM,eAAemM,GAAY,CAClD,IACQ3H,EADJ8H,EAAaD,EAAqBF,GACtC,IAAQ3H,KAAO8H,EACdR,EAAKjJ,MAAM2B,GAAO8H,EAAW9H,IAKjCW,KAAKuG,mBAAkB,IASxBvG,KAAKoH,4BAA8B,SAAUhJ,GAC5C,IAAIH,EACAC,EAcAK,EAGM8I,EAhBNrH,KAAK/F,MAAMS,QAAQyL,2BAA8E,MAAjDnG,KAAK/F,MAAMS,QAAQyL,2BACtElI,EAAY,WACZC,EAAa,cAEb8B,KAAK/F,MAAMS,QAAQ4L,6BACgC,MAAnDtG,KAAK/F,MAAMS,QAAQ4L,8BAEnBrI,EAAY,aACZC,EAAa,YAGVD,GAAkC,iBAAdA,GAA2BC,GAAoC,iBAAfA,IAEpEK,EAAaP,qCAAqCgC,KAAK/F,MAAOgE,EAAWC,EAAY,WAAYE,GAE5E,WAAtBqB,QAAOlB,IAA2BA,EAAW1D,eAAe,aACrDwM,EAAT,SAA8B3I,GAC7B,IAAI4I,EAAgB/I,EAAU,OAAQG,GACV,WAAzBe,QAAO6H,KACTtH,KAAK3B,eAAiBiJ,EAAcjJ,eACjCiJ,EAAczM,eAAe,aAC3B0M,EAAWvH,KAAK/F,MACpB+F,KAAK/F,MAAQqN,EAAclI,SAC3BY,KAAK6F,iBAAiByB,EAAc9I,KAAK,IAAI,GAC7CwB,KAAK/F,MAAQsN,GAEbvH,KAAK6F,iBAAiByB,EAAc9I,KAAK,IAAI,MAI5BgJ,KAAKvH,GACzBD,KAAK/F,MAAMiM,iBACV,gBACA,SAAUxH,GACT2I,EAAoBG,KAAKvH,EAAYvB,KAEtC,MAYHsB,KAAKiG,6BAA+B,SAAUzH,EAAMsH,GAAQ,IAAA2B,EAAAzH,KAQ3D,SAAS0H,EAAE9M,EAAI+M,EAAM7B,GACpBlL,EAAGmL,oBAAoB,YAAa4B,GAAM,GAC1C/M,EAAGmL,oBAAoB,aAAc5E,GAAc,GAC/C2E,IACHlL,EAAGsL,iBAAiB,YAAayB,GAAM,GACvC/M,EAAGsL,iBAAiB,aAAc/E,GAAc,IAWlD,SAASyG,EAAmBhN,EAAI6J,EAAUqB,GACrCA,EACElL,EAAGF,QAAQ+J,IAAsC,kBAAzB7J,EAAGF,QAAQ+J,GAGvC7J,EAAGF,QAAQ+J,GAAY,OAFvB7J,EAAGF,QAAQ+J,GAAY,MAIW,QAAzB7J,EAAGF,QAAQ+J,GACrB7J,EAAGF,QAAQ+J,GAAY,eACY,SAAzB7J,EAAGF,QAAQ+J,KACrB7J,EAAGF,QAAQ+J,GAAY,iBAMzB,IAAIxI,EAAM+D,KAAK/F,MAAMsC,iBAAiB,MAatC,GAZIN,EAAI1B,SACP0B,EAAGC,mBAAOD,IACN8F,IAAI,SAACnH,GACR8M,EAAE9M,EAAIqG,GAA8B,GACpC2G,EAAmBhN,EAAI,kBAAkB,GACzC8M,EAAE9M,EAAIsG,GAAgC,GACtC0G,EAAmBhN,EAAI,oBAAoB,KAMzCkL,EACH,GAAa,aAATtH,EAGH,IAFA,IAAIqJ,EAAa7H,KAAK/F,MAAMC,KAAKK,OAC7BuN,EAAkB,EACF,EAAbD,GAAgB,CACtB,IAAI5L,EAAM+D,KAAK/F,MAAMsC,iBAAX,kBAAAuF,OAA8CgG,EAA9C,QACV7L,EAAGC,mBAAOD,IACN8F,IAAI,SAACnH,GACR8M,EAAE9M,EAAIqG,EAA8B6E,GACpC8B,EAAmBhN,EAAI,iBAAkBkL,KAGtC9F,KAAK3B,gBACRwJ,GAAc7H,KAAK3B,eAAiB,EACpCyJ,GAAmB9H,KAAK3B,eAAiB,GAEzCwJ,EAAa,MAGI,eAATrJ,IACNvC,EAAM+D,KAAK/F,MAAMsC,iBAAiB,uBACtCN,EAAGC,mBAAOD,IACN8F,IAAI,SAACnH,GAEgB,EADN6M,EAAKxN,MAAMsC,iBAAX,kBAAAuF,OAA8ClH,EAAGF,QAAQiC,OAAzD,OACHpC,SACdmN,EAAE9M,EAAIsG,EAAgC4E,GACtC8B,EAAmBhN,EAAI,mBAAoBkL,QAygBhD9F,KAAKgG,2BAA6B,SAAUtH,GAC3C0C,EAAcoG,KAAKvH,EAAYvB,EAAG,aAQnCsB,KAAKqG,6BAA+B,SAAU3H,GAC7C0C,EAAcoG,KAAKvH,EAAYvB,EAAG,eAG5BsB,QC5yBT,IAAMjE,wBAA0B,SAAU9B,GAItC,IAHA,IACIgC,EADA8L,EAAM9N,EAAMkC,qBAAsB,MAC7BP,EAAU,EAAGoM,EAAc,EAAGC,EAAS,GAEtC9N,EAAI,EAAGA,EAAI4N,EAAIxN,OAAQJ,IAAM,CACnC8B,EAAM8L,EAAI5N,GAAGgC,qBAAsB,MAEjB4D,MAAbkI,EAAO9N,KACR8N,EAAO9N,GAAK,IAIhB,IADA,IAAI+N,EAAY,EACN5N,EAAI,EAAGA,EAAI2B,EAAI1B,OAAQD,IAAM,CACnC,GAAqByF,MAAhBkI,EAAO9N,GAAGG,GACX,IAAM,IAAI+F,EAAI,EAAGA,EAAI,IAAKA,IAAM,CAC5B,GAA6BN,MAAxBkI,EAAO9N,GAAG+N,GAAf,CAIAD,EAAO9N,GAAG+N,GAAajM,EAAI3B,GAC3B2B,EAAI3B,GAAGI,QAAQc,OAAS0M,EACxB,MALIA,SAQRD,EAAO9N,GAAGG,GAAK2B,EAAI3B,GACnB2B,EAAI3B,GAAGI,QAAQc,OAAS0M,EAI5B,GAFAjM,EAAI3B,GAAGI,QAAQiC,OAASxC,EAEF,EAAjB8B,EAAI3B,GAAGgB,QACR,IAAM,IAAIuB,EAAI,EAAGA,EAAIZ,EAAI3B,GAAGgB,QAASuB,IACjCqL,IACAD,EAAO9N,GAAG+N,GAAa,UAI/B,GAAsB,EAAjBjM,EAAI3B,GAAGE,QACR,IAAM,IAAI4F,EAAI,EAAGA,EAAInE,EAAI3B,GAAGE,QAAS4F,IAAM,CACjBL,MAAjBkI,EAAO9N,EAAIiG,KACZ6H,EAAO9N,EAAIiG,GAAK,IAEpB,IAAM,IAAI+H,EAAI,EAAGA,EAAIlM,EAAI3B,GAAGgB,QAAS6M,IACjCF,EAAO9N,EAAIiG,GAAG8H,EAAYjM,EAAI3B,GAAGgB,QAAU,EAAI6M,GAAM,UAIjED,IAGCjM,EAAI1B,OAASqB,IACdA,EAAUK,EAAI1B,QAGT,GAALJ,IACA6N,EAAcE,GAGtBjO,EAAMmO,QAAUxM,EAChB3B,EAAM2B,QAAUoM,G,ksDCrDpB,SAAyB3I,EAAKC,EAASC,GACf,YAAnB,oBAAOC,QAAP,YAAAC,QAAOD,WAA0C,oBAAXE,OACzCA,OAAOF,QAAUD,IAGjBD,EAAQD,GAAOE,IALjB,CAQG,0BAA2BI,MAAQC,OAAQ,WAQ7C,SAASyI,EAAaC,EAAtB,GAA6C,IAAd9J,EAAc,EAAAsB,UAAAvF,aAAAwF,IAA7C,EAAA,EAAsC,MACrC,GAAuB,oBAAZwI,SAAoD,gBAAzBA,QAAQC,IAAIC,SAA4B,CAC7E,IAAIC,QAAQlK,GAGX,MAAM,IAAImK,MAAJ,mDAAA7G,OAA6DtD,EAA7D,MAFNkK,QAAQlK,GAAR,WAAAsD,OAAyBwG,KAgB5B,SAASM,EAAWC,GAA+B,IAAApB,EAAAzH,KAAlB8I,EAAkB,EAAAhJ,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAN,KAmQ5C,OAjQAE,KAAKG,QAAU0I,EAEf7I,KAAK+I,gBAAkBD,EAGvB9I,KAAKgJ,oBAAqB,EAG1BhJ,KAAKiJ,YAAc,CAClB1F,IAAK,GACL2F,OAAQ,IAQTlJ,KAAKmJ,sBAAwB,WAC5B,OAAO1B,EAAKuB,oBAQbhJ,KAAKoJ,sBAAwB,SAACC,GAC7B5B,EAAKuB,mBAAqBK,GAS3BrJ,KAAKsJ,iBAAmB,SAACC,EAAWC,GACnC/B,EAAKwB,YAAYM,GAAW5H,KAAK6H,IAQlCxJ,KAAKyJ,YAAc,WAClB,OAAgC,OAAzBhC,EAAKsB,iBAGT/I,KAAKyJ,gBACRzJ,KAAKG,QAAU0I,EAAYa,WAAU,IAKtC1J,KAAK2J,cAAgB,GAGrB3J,KAAK4J,MAAQ,CACZrG,IAAK,EACLtG,IAAK,GAGN+C,KAAK6J,eAAiB,CACrBtG,IAAK,EACLtG,IAAK,GAQN+C,KAAK8J,gBAAkB,WAEtBC,OAAOC,KAAKvC,EAAKmC,OAAO7H,IAAI,SAAClF,GAC5B,IACOoN,EADHF,OAAOG,UAAUrP,eAAe2M,KAAKC,EAAKmC,MAAO/M,KAC9CoN,EAAaxC,EAAKmC,MAAM/M,GAE9B4K,EAAKmC,MAAM/M,GAAK4K,EAAKtH,QAAQ/E,aAAb,GAAA0G,OAA6BjF,EAA7B,UAAyCoN,MAK5DjK,KAAK8J,kBAUL9J,KAAKmK,QAAU,SAACC,GAAkC,IAC3CC,EAD2C,EAAAvK,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GACnB2H,EAAK6C,aAAalP,aAAlB,GAAA0G,OAAkCsI,EAAlC,SAAoD3C,EAAKmC,MAAMQ,GAC7F,GAAIC,EACH,OAAOA,EAER,MAAM,IAAI1B,MAAJ,+CAAA7G,OAAyDsI,EAAzD,OAGPpK,KAAKuK,kBAAoB,SAACH,GACzB,OAAO3C,EAAKoC,eAAeO,IAG5BpK,KAAKwK,kBAAoB,SAACJ,EAAU1H,GACnC+E,EAAKoC,eAAeO,GAAY1H,GAQjC1C,KAAKsK,WAAa,WACjB,OAAO7C,EAAKtH,SASbH,KAAKyK,kBAAoB,WACxB,OAAOxP,SAASC,cAAc,OAI1B2N,IACJ7I,KAAKG,QAAUH,KAAKyK,qBAcrBzK,KAAK3E,aAAe,SAACqP,EAAcC,GAA+C,IAA/BC,EAA+B,EAAA9K,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GAAf+K,EAAe,EAAA/K,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAR,IACrEmK,EAAaxC,EAAK6C,aAAaI,GAGT,mBAAfT,GAAmD,WAAtBxK,QAAOwK,KAC9CA,EAAaxC,EAAK6C,aAAalP,aAAasP,IAIzCjD,EAAKkC,cAAce,KACtBT,EAAaxC,EAAKkC,cAAce,GAAnB,SAGd,IAAII,EAAab,EAGbW,EACHE,GAAU,GAAAhJ,OAAOgJ,GAAPhJ,OAAoB+I,GAApB/I,OAA2B6I,GAErCG,EAAaH,EAGdlD,EAAKkC,cAAce,GAAgB,CAAEhI,MAAOoI,EAAYC,QAASd,GAEjExC,EAAK6C,aAAaI,GAAgBI,GAUnC9K,KAAKgL,QAAU,SAACZ,EAAU1H,GAEzB,IAAK+E,EAAKgC,cAAe,CACxB,IAAMwB,EAAexD,EAAK0C,QAAQC,GAAY1H,EAAQ,EAAI+E,EAAK0C,QAAQC,GAAY1H,EAEnF+E,EAAKpM,aAAL,GAAAyG,OAAqBsI,EAArB,QAAqCa,GAGrCxD,EAAK+C,kBAAkBJ,EAAU3C,EAAK0C,QAAQC,GAAYa,GAG1D,IAAK,IAAIC,EAAK,EAAGA,EAAKD,EAAe,EAAGC,GAAM,EACzCzD,EAAKwB,YAAYmB,IAAa3C,EAAKwB,YAAYmB,GAAUc,IAC5DzD,EAAKwB,YAAYmB,GAAUc,GAAI9B,uBAAsB,GAIvD,OAAO,EAIR,IAAK3B,EAAK0B,wBACT,OAAO,EAGR,IAAMgC,EAAe1D,EAAKsB,gBAAgBwB,kBAAkBH,GAG5D,GAAqB,IAAjBe,EACH,OAAO,EAGR,IAAMF,EAAeE,EAAezI,EAAQ,EAAIyI,EAAezI,EAEzD0I,EAAuBD,EAAeF,EAM5C,GALAxD,EAAKsB,gBAAgByB,kBAAkBJ,EAAUgB,GAEjD3D,EAAKpM,aAAL,GAAAyG,OAAqBsI,EAArB,QAAqCa,GAGR,GAAzBG,EAKH,IAJA,IACMC,EADsB5D,EAAKsB,gBAAgBE,YAAYmB,GAAU7P,OAC9B4Q,EAAe,EAClDG,EAAWD,EAAaJ,EAAe,EAEpCC,EAAKG,EAAYH,EAAKI,EAAUJ,GAAM,EAC9CzD,EAAKwB,YAAYmB,GAAUc,GAAI9B,uBAAsB,GAIvD,OAAO,GAQRpJ,KAAKuL,eAAiB,SAACb,GAClBjD,EAAKkC,cAAce,KACtBjD,EAAK6C,aAAaI,GAAgBjD,EAAKkC,cAAce,GAAnB,QAClCjD,EAAKkC,cAAce,QAAgB3K,IAOrCC,KAAKwL,mBAAqB,WAEzBzB,OAAOC,KAAKvC,EAAKkC,eAAe5H,IAAI,SAAClF,GAChCkN,OAAOG,UAAUrP,eAAe2M,KAAKC,EAAKkC,cAAe9M,IAC5D4K,EAAK8D,eAAe1O,MAKhB,CACNyN,WAAYtK,KAAKsK,WACjBmB,GAAIzL,KAAKG,QACT9E,aAAc2E,KAAK3E,aACnBmQ,mBAAoBxL,KAAKwL,mBACzBrB,QAASnK,KAAKmK,QACda,QAAShL,KAAKgL,QACdT,kBAAmBvK,KAAKuK,kBACxBC,kBAAmBxK,KAAKwK,kBACxBf,YAAazJ,KAAKyJ,YAClBH,iBAAkBtJ,KAAKsJ,iBACvBL,YAAajJ,KAAKiJ,YAClBG,sBAAuBpJ,KAAKoJ,sBAC5BD,sBAAuBnJ,KAAKmJ,uBAa9B,SAASuC,EAAYC,GAAS,IAAAC,EAAA5L,KAuU7B,OAhUAA,KAAK6L,aAAeF,EAQpB3L,KAAK8L,YAAc,GAOnB9L,KAAK+L,SAAW,GAQhB/L,KAAKgM,UAAY,CAAE9R,KAAM,IAOzB8F,KAAKiM,UAAY,CAChBC,OAAQ,KACRC,KAAM,KACNC,IAAK,MAWNpM,KAAKqM,YAAc,SAACC,EAAGC,EAAGC,GACpBZ,EAAKE,YAAYQ,KACrBV,EAAKE,YAAYQ,GAAK,IAGvBV,EAAKE,YAAYQ,GAAGC,GAAKC,GAQ1BxM,KAAKyM,WAAa,WACjB,IAAMvS,EAAOwS,MAAMC,KAAKf,EAAKC,aAAatP,iBAAiB,OAG3DrC,EAAK6H,IAAI,SAACuK,EAAGM,GAEZhB,EAAKI,UAAU9R,KAAKyH,KAAK2K,GAEXI,MAAMC,KAAKL,EAAE/P,iBAAiB,OAGtCwF,IAAI,SAACwK,EAAGM,GACb,IAAMC,EAAoB,IAAIlE,EAAW2D,GACzCX,EAAKS,YAAYO,EAAIC,EAAIC,GAEzB,IAAMC,EAAUD,EAAkB3C,QAAQvB,EAAWoE,UAAUzJ,KACzD0J,EAAUH,EAAkB3C,QAAQvB,EAAWoE,UAAU9D,QAE/D,GAAc,EAAV6D,EACH,IAAK,IAAIG,EAAK,EAAGA,EAAKH,EAASG,GAAM,EAAG,CACvC,IAAMC,EAAgB,IAAIvE,EAAW2D,EAAGO,GACxCA,EAAkBxD,iBAAiB,MAAO6D,GAC1CvB,EAAKS,YAAYO,EAAKM,EAAIL,EAAIM,GAGhC,GAAc,EAAVF,EACH,IAAK,IAAIG,EAAK,EAAGA,EAAKH,EAASG,GAAM,EAAG,CACvC,IAAMD,EAAgB,IAAIvE,EAAW2D,EAAGO,GACxCA,EAAkBxD,iBAAiB,SAAU6D,GAC7CvB,EAAKS,YAAYO,EAAIC,EAAKO,EAAID,QAKlCvB,EAAKyB,eAAenT,IASrB8F,KAAKqN,eAAiB,SAACnT,KACjBA,GAAQA,EAAKK,QAAU,IAC3B8N,EAAa,0CAA2C,SAIzD,IAAMiF,EAAqB1B,EAAKC,aAAanR,QAAQ6S,0BAC/CC,EAAsB5B,EAAKC,aAAanR,QAAQ+S,2BAChDC,EAAqB9B,EAAKC,aAAanR,QAAQiT,0BAGrD/B,EAAKK,UAAUC,YAESnM,IAAvBuN,EACGA,EACkC,KAAlCpT,EAAK,GAAGwD,MAAMkJ,gBACd,KACA1M,EAAK,GAAGwD,MAAMkJ,gBAOlB,IAHA,IAAMgH,EAAgC,GAAnB1T,EAAKK,OAAS,EAAS,EAAoB,IAAhBL,EAAKK,OAAe,GAAKL,EAAKK,OAAS,GAAK,EAGjFsT,EAAK,EAAGA,EAAKD,EAAYC,GAAM,EAAG,CAC1C,IAAMC,EAAU7S,SAASC,cAAc,MAEvC0Q,EAAKC,aAAahQ,cAAc,SAASiB,YAAYgR,GACrD5T,EAAKyH,KAAKmM,GAKXlC,EAAKK,UAAUE,KAAOqB,GAAuB1G,iBAAiB5M,EAAK,IAAI0M,gBACvEgF,EAAKK,UAAUG,IAAMoB,EAAsBE,EAAqB5G,iBAAiB5M,EAAK,IAAI0M,gBAG1F,IAAK,IAAI0F,EAAI,EAAGA,EAAIsB,EAAYtB,GAAK,EACpCpS,EAAKA,EAAKK,QAAU+R,EAAI,IAAItL,UAW9BhB,KAAK+N,OAAS,SAACtR,GAAwD,IAA7CuR,EAA6C,EAAAlO,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GAAtBmO,EAAsB,EAAAnO,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAN,EAC3D4M,MAAMwB,QAAQzR,KAElBA,EAAY,CAACA,IAGd,IAAM0R,EAAYvC,EAAKC,aAAahQ,cAAc,SASjDiS,EANIE,EAMMpC,EAAKI,UAAU9R,KAAK+T,KALxBG,EAAQnT,SAASoT,eACjBC,SAASH,EAAW,GAEhBC,EAAMG,yBAAN,cAAAzM,OAA6CrF,EAAU+R,KAAK,KAA5D,YAA2EC,WAAW,IAWjG,OALAN,EAAUrR,YAAYgR,GAGtBlC,EAAKG,SAASpK,KAAKmM,GAEZ,CAAErC,GAAIqC,EAASY,GAAI9C,EAAKG,SAASxR,OAAS,IAMlDyF,KAAK2O,WAAa,WAEjB/C,EAAKG,SAAW,GAGhBH,EAAKC,aAAahQ,cAAc,SAASwH,UAAY,IAStDrD,KAAK4O,OAAS,SAACF,GACd,OAAI9C,EAAKG,SAAS2C,KAKlBrG,EAAY,mBAAAvG,OAAoB4M,EAApB,yBAA+C,QACpD,OAQR1O,KAAK6O,QAAU,WACd,OAAOjD,EAAKE,YAAYvR,QAQzByF,KAAK8O,WAAa,WACjB,OAAOlD,EAAKE,YAAYiD,OAAO,SAACC,EAAGzC,GAMlC,OALIA,EAAEhS,OAASyU,IAEdA,EAAIzC,EAAEhS,QAGAyU,GACL,IAaJhP,KAAKiP,QAAU,SAAC3C,EAAGC,GAA4B,IAAzB2C,EAAyB,EAAApP,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GAC9C,IACC,GAAI8L,EAAKE,YAAYQ,GAAGC,GACvB,OAAI2C,EACItD,EAAKE,YAAYQ,GAAGC,GAErBX,EAAKE,YAAYQ,GAAGC,GAAGd,GAE9B,MAAO/M,GAGR,OADA2J,EAAY,0CAAAvG,OAA2CwK,EAA3C,KAAAxK,OAAgDyK,EAAhD,KAAsD,QAC3D,KAIR,OADAlE,EAAY,0CAAAvG,OAA2CwK,EAA3C,KAAAxK,OAAgDyK,EAAhD,KAAsD,QAC3D,MAURvM,KAAKmP,cAAgB,SAACC,GAErB,IAFkD,IAAtBC,EAAsB,EAAAvP,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GAC5CwP,EAAQ,GACL/C,EAAI,EAAGA,EAAIX,EAAKkD,aAAcvC,GAAK,EAAG,CAC9C,IAAMgD,EAAW3D,EAAKqD,QAAQG,EAAO7C,EAAG8C,GACpCE,GACHD,EAAM3N,KAAK4N,GAGb,OAAOD,GAURtP,KAAKwP,YAAc,SAACC,EAAWC,EAAcN,GACtCO,EAAY/D,EAAKgD,OAAOQ,GACxBxK,EAAOgH,EAAKqD,QAAQQ,EAAWC,GAAc,GAKnD,OAHI9K,GAAQ+K,GACXA,EAAU7S,YAAY8H,EAAK0F,cAErB1F,GASR5E,KAAK4P,mBAAqB,SAACnE,EAAI2D,GACxBO,EAAY/D,EAAKgD,OAAOQ,GAE1B3D,GAAMkE,GACTA,EAAU7S,YAAY2O,IAUxBzL,KAAK6P,kBAAoB,SAACrG,EAAS4F,GAC5BO,EAAY/D,EAAKgD,OAAOQ,GAC1B5F,GAAWmG,GACdA,EAAU7S,YAAY0M,EAAQc,eAIhCtK,KAAKyM,aAEE,CACNoC,QAAS7O,KAAK6O,QACdC,WAAY9O,KAAK8O,WACjBf,OAAQ/N,KAAK+N,OACbY,WAAY3O,KAAK2O,WACjBM,QAASjP,KAAKiP,QACdO,YAAaxP,KAAKwP,YAClBI,mBAAoB5P,KAAK4P,mBACzBC,kBAAmB7P,KAAK6P,kBACxBV,cAAenP,KAAKmP,cACpB1D,GAAIzL,KAAK6L,aACTI,UAAWjM,KAAKiM,WAKlB,IAAM6D,EAAgC,CACrCC,MAAO,sBACPC,eAAgB,CAAC,+BACjBC,eAnWDrH,EAAWoE,UAAY,CAAEzJ,IAAK,MAAO2F,OAAQ,SA25B7C,OA/iBA,WAAuC,IAAAgH,EAAAlQ,KAAdH,EAAc,EAAAC,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAwiBlC,OAriBAE,KAAKH,QAALsQ,cAAA,GAAoBL,EAApB,GAAsDjQ,GAEtDG,KAAK0G,SAAWgG,MAAMC,KAAK1R,SAASsB,iBAAiByD,KAAKH,QAAQkQ,QAElE/P,KAAKoQ,eAAiBpQ,KAAK0G,SAAS3E,IAAI,SAACrD,GACxC,MAAO,CACN+M,GAAI/M,EACJ2R,YAAa,IAAI3E,EAAYhN,MAO/BsB,KAAKsQ,oBAAsB,WAC1BzJ,OAAOX,iBAAiB,SAAU,WACjCgK,EAAKK,mBAWPvQ,KAAKvB,aAAe,SAACgN,GACd+E,EAAkB/E,EAAG/Q,QAAQ+V,yBAEnC,OAAKD,EAIEE,KAAKC,MAAMC,KAAKJ,IAHf,MAaTxQ,KAAK6Q,kBAAoB,SAACpF,GACzBA,EAAGhP,UAAUsE,IAAImP,EAAKrQ,QAAQmQ,iBAQ/BhQ,KAAK8Q,qBAAuB,SAACrF,GAC5BA,EAAGhP,UAAUuE,OAAOkP,EAAKrQ,QAAQmQ,iBAalChQ,KAAK+Q,UAAY,SAACpF,EAASqF,EAAWC,EAAYC,GAEjD,IAAMC,EAAYF,EAAW/R,mBAAmB8R,GAE1C/R,EAAiBgS,EAAWhS,eAAe+R,GAC3C7R,EAAc8R,EAAW9R,YAAY6R,GAGrCI,IAAeH,EAAWG,cAAeH,EAAWG,aAAaJ,GAEvEE,EAASvC,aAES,YAAdqC,GACHd,EAAKmB,aAAaH,GAClBhB,EAAKY,qBAAqBnF,KAE1BuE,EAAKoB,mBAAmBJ,EAAUC,EAAWlS,EAAgBmS,EAAcjS,GAC3E+Q,EAAKW,kBAAkBlF,KAiBzB3L,KAAKsR,mBAAqB,SACzBJ,EACAC,GAII,IAHJlS,EAGI,EAAAa,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GAFJsR,EAEI,EAAAtR,UAAAvF,aAAAwF,IAAAD,UAAA,IAAAA,UAAA,GADJX,EACI,EAAAW,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GADU,EAER5F,EAAOgX,EAASrC,UAChBzG,EAAU8I,EAASpC,aACnByC,EAA6B,QAAdJ,EAGrB,GAAIlS,EACHiR,EAAKsB,YAAYN,EAAUC,EAAWhS,QAKtC,GAAIoS,GAAc,WACjB,IAAME,EAAgB,GAClBC,EAAgB,EAGhBN,GACcF,EAAS/B,cAAc,GAAG,GAEhBwC,OAAO,SAACpF,GAAD,OAAQA,EAAE9C,gBAGlC1H,IAAI,SAAC6P,GACdF,GAAiB,EACjB,IAAMG,EAASX,EAASnD,OAAO,YAC/B8D,EAAOpG,GAAG/N,MAAMkJ,gBAAkBsK,EAASjF,UAAUC,OAErDgF,EAASrB,kBAAkB+B,EAAGC,EAAOnD,IAErCkD,EAAEvW,aAAa,UAAW8D,KAK5B,IAAK,IAAImN,EAAIoF,EAAepF,EAAIpS,EAAMoS,GAAK,EAE1C4E,EAAS/B,cAAc7C,GAAG,GAAMwF,QAAQ,SAACvF,GAEnCA,EAAE9C,eACNgI,EAAc9P,KAAK4K,KAOtB,IAFA,IAAMwF,EAAYN,EAAclX,OAEvBgS,EAAI,EAAGD,EAAI,EAAGC,EAAIwF,EAAWxF,GAAKpN,EAAamN,GAAK,EAAG,CAE/D,IAAMuF,EAASX,EAASnD,OAAO,YAG/B8D,EAAOpG,GAAG/N,MAAMkJ,gBAAkBsK,EAASjF,UAAUK,EAAI,GAAM,EAAI,MAAQ,QAG3E,IAAK,IAAI0F,EAAK,EAAGA,EAAK7S,EAAa6S,GAAM,EAAG,CAC3C,IAAMzC,EAAWkC,EAAclF,EAAIyF,GAE/BzC,IACH2B,EAAStB,mBAAmBL,EAASjF,aAAcuH,EAAOnD,IAE1Da,EAAS/D,qBACT+D,EAASlU,aAAa,QAAS,0BAA0B,EAAM,KAC/DkU,EAASlU,aAAa,UAAW,GACjCkU,EAASlU,aAAa,UAAW,MApDnB,OA0Db,CACJ,IAAM4W,EAAgB,GAClBP,EAAgB,EAGhBN,GACcF,EAAS/B,cAAc,GAAG,GAEhBwC,OAAO,SAACO,GAAD,OAAQA,EAAEzI,gBAGlC1H,IAAI,SAAC6P,GACdF,GAAiB,EACjB,IAAMG,EAASX,EAASnD,OAAO,YAC/B8D,EAAOpG,GAAG/N,MAAMkJ,gBAAkBsK,EAASjF,UAAUC,OAErDgF,EAASrB,kBAAkB+B,EAAGC,EAAOnD,IAErCkD,EAAEvW,aAAa,UAAW8D,KAK5B,IAAK,IAAIoN,EAAI,EAAGA,EAAInE,EAASmE,GAAK,EACjC,IAAK,IAAID,EAAIoF,EAAepF,EAAIpS,EAAMoS,GAAK,EAAG,CAC7C,IAAM6F,EAAQjB,EAASjC,QAAQ3C,EAAGC,GAAG,GAEjC4F,IAAUA,EAAM1I,eACnBwI,EAActQ,KAAKwQ,GAOtB,IAFA,IAAMJ,EAAYE,EAAc1X,OAEvBgS,EAAI,EAAGD,EAAI,EAAGC,EAAIwF,EAAWxF,GAAKpN,EAAamN,GAAK,EAAG,CAC/D,IAAMuF,EAASX,EAASnD,OAAO,YAG/B8D,EAAOpG,GAAG/N,MAAMkJ,gBAAkBsK,EAASjF,UAAUK,EAAI,GAAM,EAAI,MAAQ,QAE3E,IAAK,IAAI8F,EAAK,EAAGA,EAAKjT,EAAaiT,GAAM,EAAG,CAC3C,IAAM7C,EAAW0C,EAAc1F,EAAI6F,GAE/B7C,IACH2B,EAAStB,mBAAmBL,EAASjF,aAAcuH,EAAOnD,IAE1Da,EAAS/D,qBACT+D,EAASlU,aAAa,QAAS,0BAA0B,EAAM,KAC/DkU,EAASlU,aAAa,UAAW,GACjCkU,EAASlU,aAAa,UAAW,QAevC2E,KAAKwR,YAAc,SAACN,EAAUC,GAAkC,IAAvB9S,EAAuB,EAAAyB,UAAAvF,aAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAN,EAGnDuS,EAAcnB,EAAS/B,cAAc,GAAG,GAAMpN,IAAI,SAACuQ,GAExD,OADAA,EAAEjX,aAAa,QAAf,qBAAAyG,OAA6CoP,EAASjF,UAAUC,SAAU,EAAM,KACzEoG,IAGFC,EAAgC,WAAdpB,EAGlBjX,EAAOgX,EAASrC,UAEhBzG,EAAU8I,EAASpC,aAEnB0D,EAAiB,iBAGvB,GAAID,EAyBH,IAzBoB,IAsBdE,EAAcC,KAAKC,MAAMzY,EAAO,GAAKmE,GAEvCuU,EAAqB,EAChBtG,EAAI,EAAGA,EAAImG,EAAanG,GAAK,EAAG,EAlBzC,SAAA,GAA2C,IAAnBuG,EAAmB,EAAA/S,UAAAvF,aAAAwF,IAA3C,GAAA,EACO8R,EAASX,EAASnD,OAAO,YAE3B8E,IACHhB,EAAOpG,GAAG/N,MAAMoV,UAAYN,GAI7BH,EAAYtQ,IAAI,SAACuQ,GAEhBpB,EAAStB,mBAAmB0C,EAAE7G,GAAG/B,WAAU,GAAOmI,EAAOnD,MAU1DqE,CAAmB,EAAJzG,GACf,IAAK,IAAIC,EAAI,EAAGA,EAAIlO,KAEOnE,GAAtB0Y,GAF+BrG,GAAK,EAAG,CAK3C,IAAMsF,EAASX,EAASnD,OAAO,YAG/B8D,EAAOpG,GAAG/N,MAAMkJ,gBAAkBsK,EAASjF,UAAUM,EAAI,GAAM,EAAI,OAAS,OAC5E,IAAK,IAAIyG,EAAK,EAAGA,EAAK5K,EAAS4K,GAAM,EAAG,CACvC,IAQOxY,EAQCyY,EAENC,EAlBIC,EAAcjC,EAASjC,QAAQ2D,EAAoBI,GAAI,GAEzDG,IACHA,EAAY3H,qBAGR0H,GAAgB,EAEd1Y,EAAU2Y,EAAYhJ,QAAQvB,EAAWoE,UAAUzJ,KACzC4P,EAAYhJ,QAAQvB,EAAWoE,UAAU9D,QAE3C,EAAV1O,IAEG4Y,EAAiB/U,EAAiBkO,EAGlC0G,EAAiBP,KAAKW,IAAI7Y,EAAS4Y,GAEzCF,EAAgBC,EAAYnI,QAAQpC,EAAWoE,UAAUzJ,IAAK0P,GAE9DE,EAAY/J,uBAAsB,IAG/B8J,GACHhC,EAASrB,kBAAkBsD,EAAatB,EAAOnD,KAIlDkE,GAAsB,QAUxB,IAJA,IAAMH,EAAcC,KAAKC,MAAMzY,EAAO,GAAKmE,GAEvCuU,EAAqB,EAEhBU,EAAK,EAAGA,EAAKb,EAAaa,GAAM,EAAG,CAC3C,IAAK,IAAI/G,EAAI,EAAGA,EAAInE,EAASmE,GAAK,EAAG,CACpC,IAAMsF,EAASX,EAASnD,OAAO,YAG/B8D,EAAOpG,GAAG/N,MAAMkJ,gBAAkB,OAEzB,EAAL0M,GAAgB,IAAN/G,IACbsF,EAAOpG,GAAG/N,MAAMoV,UAAYN,GAG7B,IAAMe,EAAmBlB,EAAY9F,GAAGd,GAAG/B,WAAU,GAGrD6J,EAAiB7V,MAAMkJ,gBAAvB,GAAA9E,OAA4CoP,EAASjF,UAAUC,OAA/D,eAEAgF,EAAStB,mBAAmB2D,EAAkB1B,EAAOnD,IAErD,IAAK,IAAIpC,EAAI,EAAGA,EAAIjO,KACWnE,GAA1B0Y,EAAqBtG,GADUA,GAAK,EAAG,CAM3C,IAiBQkH,EACAC,EAUFC,EA5BAP,EAAcjC,EAASjC,QAAQ2D,EAAqBtG,EAAGC,GAAG,GAE5D4G,IACHA,EAAY3H,qBAER0H,GAAgB,EAEd1Y,EAAU2Y,EAAYhJ,QAAQvB,EAAWoE,UAAUzJ,KACzC4P,EAAYhJ,QAAQvB,EAAWoE,UAAU9D,QAE3C,EAAV1O,IACG4Y,EAAiB/U,EAAiBiO,EAElC2G,EAAiBP,KAAKW,IAAI7Y,EAAS4Y,GAEzCF,EAAgBC,EAAYnI,QAAQpC,EAAWoE,UAAUzJ,IAAK0P,GAExDO,EAAKL,EAAY1H,GAAGrQ,aAAa,WACjCqY,EAAKN,EAAY1H,GAAGrQ,aAAa,WAGvC+X,EAAY9X,aAAa,UAAWoY,GACpCN,EAAY9X,aAAa,UAAWmY,GAEpCL,EAAY/J,uBAAsB,IAE/B8J,IAECQ,EAGmB,IAAnBrV,EACUuU,EAAqB,GAAM,EAAI,OAAS,OAJpCA,EAAqBtG,EAAIgH,GAAM,GAAM,EAAI,OAAS,MAOpEH,EAAY9X,aACX,QADD,qBAAAyG,OAEsBoP,EAASjF,UAAUyH,KACxC,EACA,KAEDxC,EAASrB,kBAAkBsD,EAAatB,EAAOnD,OAKnDkE,GAAsBvU,IAYzB2B,KAAKqR,aAAe,SAACH,GAIpB,IAHA,IAAMhX,EAAOgX,EAASrC,UAChBzG,EAAU8I,EAASpC,aAEhBxC,EAAI,EAAGA,EAAIpS,EAAMoS,GAAK,EAE9B,IADA,IAAM8C,EAAQ8B,EAASnD,OAAO,IAAI,EAAMzB,GAAGoC,GAClCnC,EAAI,EAAGA,EAAInE,EAASmE,GAAK,EAAG,CACpC,IAAMgD,EAAW2B,EAASjC,QAAQ3C,EAAGC,GAAG,GAGpCgD,IAAaA,EAAS9F,gBAEzB8F,EAAS/D,qBACT0F,EAAStB,mBAAmBL,EAASjF,aAAc8E,MAavDpP,KAAK2T,iBAAmB,SAACC,EAAKC,GAE7B,IAAMC,EAAc/J,OAAOC,KAAK6J,GAAOhR,KAAK,SAACkR,EAAGnC,GAAJ,OAAUiC,EAAME,GAAGpW,MAAQkW,EAAMjC,GAAGjU,QAE5EqW,EAAUF,EAAY,GAS1B,OANAA,EAAY/R,IAAI,SAAC2F,GACZkM,GAAOC,EAAMnM,GAAG/J,QACnBqW,EAAUtM,KAILsM,GAYRhU,KAAKiU,aAAe,SAACxI,EAAIyI,EAAMhD,GAC9B,IAAMiD,EAAYjE,EAAKzR,aAAagN,GAEpC,GAAI0I,GACEA,EAAUC,kBAAf,CAKA,IAAMtV,EAAOqV,EAAUpV,eAGjBsV,EAAgBnE,EAAI,GAAApO,OAAIhD,EAAJ,UAIzBoV,EAFIA,GAEGzI,EAAG6I,wBAAwB3W,MAGnC,IAAMiB,EAAcsR,EAAKyD,iBAAiBO,EAAMC,EAAUI,aAE1D,IAAIF,EAaH,MAAM,IAAI1L,MAAJ,2BAAA7G,OAAqChD,EAArC,aAZAE,EAAcmV,EAAUnV,YAAYF,GAC1CuV,EAAc7M,KAAK0I,EAAMzE,EAAI7M,EAAaI,EAAakS,GAEvDnV,wBAAwB0P,GAClB+I,EAAW,IAAIC,YAAY,gBAAiB,CACjD5V,OAAQ,CACPD,YAAAA,EACAK,eAAgBkV,EAAUnV,YAAYF,GAAMG,kBAG9CwM,EAAGiJ,cAAcF,KAYpBxU,KAAKuQ,cAAgB,SAAC2D,GAErBhE,EAAKE,eAAerO,IAAI,SAAC4S,GACxB,IAAIC,EAAYV,EAChB,IAAKA,EAAM,CAEVU,EAAY/N,OAAOgO,WAEnB,IAAMlW,EAAauR,EAAKzR,aAAakW,EAAElJ,IAEvC,GAAI9M,GAAcA,EAAWmW,cAC5B,OAAQnW,EAAWmW,eAClB,IAAK,SAEJF,EAAY/N,OAAOgO,WACnB,MACD,IAAK,YAGJD,EAAYD,EAAElJ,GAAGjP,WAAWA,WAAWA,WAAWqE,YAClD,MACD,QAEC+T,EAAY/N,OAAOgO,YAKvB3E,EAAK+D,aAAaU,EAAElJ,GAAImJ,EAAWD,EAAEtE,gBAInCrQ,KAAKH,QAAQoQ,cAChBjQ,KAAKsQ,sBAGC,CACNC,cAAevQ,KAAKuQ,cACpB9R,aAAcuB,KAAKvB,aACnBkV,iBAAkB3T,KAAK2T,qBChtC1B,SAAyBoB,EAAWzV,EAASC,GAE5CD,EAAQyV,GAAaxV,IAFtB,CAGG,iBAAkBI,MAAQC,OAAQ,WAkHpC,OAAO,IA3GP,WAAqB,IAAA6H,EAAAzH,KACpBA,KAAKH,QAAU,CAAEmV,YAAa,IAS9BhV,KAAKiV,iBAAmB,SAACC,EAAqBC,GAC7C,IAAMC,EAAaD,EAAe3Y,WAC5B6Y,EAAiB3I,MAAMC,KAAKyI,EAAW/a,UACvCib,EAAaD,EAAenS,QAAQiS,GACpCI,EAA6B,EAAjBD,EAAa,EAAQ,KAAOD,EAAeC,EAAa,GACpEE,EAAcF,EAAa,GAAKD,EAAe9a,OAAS,KAAO8a,EAAeC,EAAa,GAEjG7N,EAAKgO,sBAAsBhO,EAAK5H,QAAQmV,YAAaE,EAAoBQ,YACzEjO,EAAKkO,gBAAgBR,GAErBD,EAAoBQ,WAAW5Y,YAAYqY,GAEvCI,EACHA,EAAUK,sBAAsB,WAAYV,GAClCM,EACVA,EAAYI,sBAAsB,cAAeV,GAEjDE,EAAWtY,YAAYoY,IASzBlV,KAAK2V,gBAAkB,SAACR,GACvB,IAAMlb,EAAQkb,EAAetZ,cAAc,SACnCga,EAAe/O,iBAAiB7M,GAAhC4b,WACR5b,EAAMyD,MAAMmY,WAAaA,GAQ1B7V,KAAK8V,KAAO,SAACjW,GACZ4H,EAAK5H,QAALsQ,cAAA,GAAoB1I,EAAK5H,QAAzB,GAAqCA,GAC/BkW,EAAkBrJ,MAAMC,KAAK1R,SAASsB,iBAAiB,8BAEhC,EAAzBwZ,EAAgBxb,QACnBwb,EAAgBhU,IAAI0F,EAAKuO,iBAU3BhW,KAAKiW,sBAAwB,SAACd,GAE7B,OADcA,EAAetZ,cAAc,SAC9BnB,QAAQwb,oBAQtBlW,KAAKgW,eAAiB,SAACb,GAEtB,IAGMgB,EACAC,EAJD3O,EAAKwO,sBAAsBd,KAG1BgB,EAAYlb,SAASC,cAAc,QACnCkb,EAAWjB,EAAetZ,cAAc,SAASnB,QAAQ2b,8BAE9DF,EAAUzY,MAAM0Y,SAAhB,GAAAtU,OAA8BsU,EAA9B,OAGDD,EAAUG,aAAa,CAAExX,KAAM,SAE/B2I,EAAKwN,iBAAiBkB,EAAWhB,KAGlCnV,KAAKyV,sBAAwB,SAACc,EAAgBC,GAC7CzM,OAAOC,KAAKuM,GAAgBxU,IAAI,SAAC2F,GAC5BqC,OAAOG,UAAUrP,eAAe2M,KAAK+O,EAAgB7O,IACxDD,EAAKgP,kBAAkB/O,EAAG6O,EAAe7O,GAAI8O,MAKhDxW,KAAKyW,kBAAoB,SAACC,EAASC,EAAKH,GACvC,IAAMI,EAAc3b,SAASC,cAAc,QAC3C0b,EAAYvb,aAAa,KAAMqb,GAC/BE,EAAYvb,aAAa,OAAQsb,GACjCC,EAAYvb,aAAa,MAAO,cAChCub,EAAYvb,aAAa,QAAS,OAElCmb,EAAK1Z,YAAY8Z,OC2oBjBC,OAhuBFA,OAAO5b,UAAU6b,MAAM,SAAUC,GAChC,IAMyBlb,EANnBka,EAAkB9a,SAAS+b,uBAAuB,wBAsJxD,SAASC,IACR,IAAK,IAAI9c,EAAI,EAAGA,EAAI4b,EAAgBxb,OAAQJ,IAAK,CAChD,IAAMgb,EAAiBY,EAAgB5b,GAGnC+c,GAAsB,EAEtBC,EAAehC,EAAe6B,uBAAuB,sBACrDI,EAAuBjC,EAAe6B,uBAAuB,+BAEjE,GAA0B,EAAtBG,EAAa5c,QAA4C,EAA9B6c,EAAqB7c,OAAY,CAC/D4c,EAAeA,EAAa,GAC5BC,EAAuBA,EAAqB,GAuB5C,GAtBAD,EAAazZ,MAAM2Z,QAAU,QAEzBF,EAAazc,QAAQ4c,qBAChBA,EAAuBH,EAAazc,QAApC4c,mBAEwBnC,EAAeoC,YACjBJ,EAAaI,YAC1CJ,EAAazZ,MAAb,MAA2B,KAE3ByZ,EAAazZ,MAAb,MADgC,UAAtB4Z,EACiB,KAEAA,EAI3BnC,EAAezX,MAAf,MADyB,UAAtB4Z,EAC0B,KAEAA,GAKY,GAAvCH,EAAazc,QAAQ8c,gBAAiE,GAA1CL,EAAazc,QAAQ+c,kBAAwB,CAE5F,IAAMC,EAAsBvC,EAAeoC,YACrCI,EAAoBR,EAAaI,YAGnCK,OAAY,EACVC,EAAmBV,EAAajd,KACR,EAA1B2d,EAAiBtd,SAIpBqd,EAHiBC,EAAiB,GACVtb,iBAAiB,MAEnBhC,QAIvB,IAIIud,GAAqB,EACrBC,OAAsB,EAC1B,KAN8BZ,EAAa1a,UAAUC,SAAS,4BAMhB,EAAfkb,IAAoC,EAAfA,EAGnD,GAAIF,EAAsBC,GAazB,GAZAxC,EAAezX,MAAMsa,SAAW,QAI/BZ,IACCA,EAAqB3a,UAAUC,SAAS,sBAEzC0a,EAAqB3a,UAAUsE,IAAI,oBACnC+W,GAAqB,GAEtBX,EAAa1a,UAAUsE,IAAI,2BAEvBoW,EAAajd,MAAQ0d,EAAc,CAEtC,IAAMK,EAAUN,EAAoBC,EAGhCM,EAA0BxF,KAAKyF,MAAMT,EAAsBO,GAgC/D,GA/BIC,EAA0B,IAAGA,EAA0B,GAMqB,EAA5E/C,EAAe6B,uBAAuB,6BAA6Bzc,UACtEwd,EAAyB5C,EAAe6B,uBACvC,6BACC,IACqBva,UAAUuE,OAAO,qBAClCoX,EACLL,EAAuBrd,QAAQwd,0BAGDA,GAC9Bf,EAAa1a,UAAUC,SAAS,4BAIhC0b,GAA8BF,IAC7Bf,EAAa1a,UAAUC,SAAS,6BACV,IAAtBgb,GAA8D,GAAjCK,EAAuB7O,QAJrDgO,GAAsB,EAQtBa,EAAuBvb,WAAWO,YAAYgb,IAK5Cb,EAAqB,CAExB,IAAM9X,EAAWnE,SAASC,cAAc,SAClCmd,EAAgBpd,SAASC,cAAc,SAC7CkE,EAAStC,YAAYub,GAGrBjZ,EAAS3C,UAAUsE,IAAI,6BACjBuX,EAASnB,EAAaoB,UAAUC,MAAM,gCACxCF,GAAU5L,MAAMwB,QAAQoK,IAC3BlZ,EAAS3C,UAAUsE,IAAIuX,EAAO,IAI/B,IAAMG,EAAYtB,EAAajd,KAAKK,OAGhCme,OAAgC,EAKhCC,GAAgB,EAGpB,GAAIxB,EAAa1a,UAAUC,SAAS,2BAA4B,CAE/D,IAAMkc,EAAyBH,EAAY,EAGvCI,OAAgC,EAKpC,GAAgBX,EAAZO,EAIH,IAAK,IAAIte,EAAI,EAAGA,EAAIye,EAAwBze,IAAK,CAQhD,IAPA0e,EAAmCX,EAA0B,EAAI/d,IACzB,IACvC0e,EAAmC,GAKI,IAHxCH,EACCE,EAAyBC,GAEiB,CAC1CF,GAAgB,EAChB,MACM,GAC6B,EAAnCE,GACAA,GAAoC,GACpCA,EACC,EAAIH,EACJ,GACDA,EACCG,EACA,CACDF,GAAgB,EAChB,MACM,GAC6B,EAAnCE,GACAA,GAAoC,IACpCA,EACC,IAAMH,EACN,GACDA,EACCG,EACA,CACDF,GAAgB,EAChB,MACM,GAC6B,GAAnCE,GACAA,GAAoC,IACpCA,EACC,IAAMH,EACN,GACDA,EACCG,EACA,CACDF,GAAgB,EAChB,YAMFE,EAAmCD,EAEnCD,IADAD,EAAmC,GAKpC,GAAIC,EAcH,IAbA,IAAIG,OAAS,EAEZA,EADsC,EAAnCD,EAEFjB,EACAlF,KAAKC,KACJiG,EAAyBC,GAGfjB,EAITmB,GADsBrG,KAAKyF,OAAOW,EAAY,GAAKlB,QAC3C,GACHtd,EAAI,EAAGA,EAAIwe,EAAWxe,IAAK,CACnC,IAAM0e,EAAgBtG,KAAKyF,MAAM7d,EAAIsd,GAC/BpU,EAAKvI,SAASC,cAAc,MAC5B+d,EAAe9B,EAAajd,KAAK,GAAGG,SACzCC,EAAI0e,EAAgBpB,GACnBlO,WAAU,GACR9O,OAAE,EACAse,EAAiBrS,OAAOC,iBAC7BqQ,EAAajd,KAAK,IAEd+e,EAAavb,MAAMkJ,kBACvBqS,EAAavb,MAAMkJ,gBAClBsS,EAAetS,iBAEjBqS,EAAavb,MAAMC,MAAQ,KAC3Bsb,EAAavb,MAAMG,OAAS,KAE5Bob,EAAa7U,gBAAgB,gCAC7B2U,EAAWlS,OAAOC,iBACjBqQ,EAAatb,cAAc,QAEfsd,eACZF,EAAavb,MAAM0b,YAAcL,EAASI,eAE1CF,EAAavb,MAAM0b,YAAcL,EAASM,kBAEvB,EAAhBL,GAAqB1e,EAAIsd,GAAgB,IAC5CqB,EAAavb,MAAM4b,eAAiB,OAErC9V,EAAG1G,YAAYmc,GAEf,IACC,IAQOM,EARH1c,EAAIgc,EAAmCG,EAAgB,EAC3Dnc,EAAIgc,GAAoCG,EAAgB,GAAK,EAC7Dnc,IAEIA,EAAIsa,EAAajd,KAAKK,QACzBK,EAAKuc,EAAajd,KAAK2C,GAAGxC,SACzBC,EAAI0e,EAAgBpB,GACnBlO,WAAU,GACN6P,EAAa1S,OAAOC,iBACzBqQ,EAAajd,KAAK2C,IAEdjC,EAAG8C,MAAMkJ,kBACbhM,EAAG8C,MAAMkJ,gBAAkB2S,EAAW3S,iBAGvChM,EAAG8C,MAAMC,MAAQ,KACjB/C,EAAG8C,MAAMG,OAAS,KAElBjD,EAAGwJ,gBAAgB,kCAEnBxJ,EAAKK,SAASC,cAAc,OACzBwC,MAAM8b,YAAc,MAEvB5e,EAAG8C,MAAM+b,WAAa,SAGvBV,EAAWlS,OAAOC,iBACjBqQ,EAAatb,cAAc,QAEfsd,eACZve,EAAG8C,MAAM0b,YAAcL,EAASI,eAEhCve,EAAG8C,MAAM0b,YAAcL,EAASM,kBAGb,EAAhBL,GAAqB1e,EAAIsd,GAAgB,IAC5Chd,EAAG8C,MAAM4b,eAAiB,OAG3B9V,EAAG1G,YAAYlC,GAGhByd,EAAcvb,YAAY0G,QAGtB,CACN,IAAIkW,OAAe,EACnB,GAA0B,IAAtBhC,EACH,IAAK,IAAIvd,EAAI,EAAGA,EAAIyd,EAAczd,IAAK,CAKtC,GAHuB,IADvBuf,EAAkBxB,EAA0B/d,KAClBuf,EAAkB,GAGJ,IAFxChB,EAAmCd,EAAe8B,GAEP,CAC1Cf,GAAgB,EAChB,MACM,GACY,EAAlBe,GACAA,GAAmB,GACnBA,EAAkB,EAAIhB,GAAoC,GAC1DA,EAAmCgB,EAClC,CACDf,GAAgB,EAChB,MACM,GACY,EAAlBe,GACAA,GAAmB,IACnBA,EAAkB,IAAMhB,GAAoC,GAC5DA,EAAmCgB,EAClC,CACDf,GAAgB,EAChB,MACM,GACY,GAAlBe,GACAA,GAAmB,IACnBA,EAAkB,IAAMhB,GAAoC,GAC5DA,EAAmCgB,EAClC,CACDf,GAAgB,EAChB,YAMFe,EAAkB,EAElBf,IADAD,EAAmC,GAEnCtZ,EAAS8J,OAAS,EAGnB,IAAMyQ,EAAoBjH,KAAKC,KAAKiF,EAAe8B,GAE7CE,EAAeD,EAAoBlB,EAEzC,GAAIE,EACH,IAAK,IAAIxe,EAAI,EAAGA,EAAIyf,EAAczf,IAAK,CACtC,IAAM6e,EAAgBtG,KAAKyF,MAAMhe,EAAIse,GAC/BjV,EAAKvI,SAASC,cAAc,MAC9B2e,OAAI,EACJC,OAAM,EAMTD,EAJAb,GAAiBW,EAAoB,GACD,GAApCjB,GAEAoB,EAASd,EAAgBU,EAClBA,GAAmB,EAAIV,KAE9Bc,EAASlC,EAAec,EACjBd,GAEFrU,EAAM4T,EAAajd,KAAKC,EAAI6e,EAAgBP,GAClDjV,EAAG/G,UAAY8G,EAAI9G,UACnB+G,EAAG9F,MAAMkJ,gBAAkBrD,EAAI7F,MAAMkJ,gBAErC,IAAK,IAAItM,EAAIwf,EAAQxf,EAAIuf,EAAMvf,IAAK,CACnC,IAEOyf,EAFDC,EAAQzW,EAAIlJ,SAASC,GAAGoP,WAAU,GACnCsQ,EAAMtc,MAAMkJ,kBACVmT,EAAYlT,OAAOC,iBAAiBvD,GAC1CyW,EAAMtc,MAAMkJ,gBAAkBmT,EAAUnT,iBAEzCoT,EAAMtc,MAAMC,MAAQ,KACpBqc,EAAMtc,MAAMG,OAAS,KAErBmc,EAAM5V,gBAAgB,+BACtBZ,EAAG1G,YAAYkd,GAGhB3B,EAAcvb,YAAY0G,IAK7BpE,EAAS1E,QAAQwd,wBAA0BA,EAC3C,IAAM+B,EAAS7a,EAAS7C,iBAAiB,YACzC,GAAoB,EAAhB0d,EAAO1f,OACV,IAAK,IAAIJ,EAAI,EAAGA,EAAI8f,EAAO1f,OAAQJ,IAClC8f,EAAO9f,GAAGiK,gBAAgB,UAG5B2T,EAAyB3Y,EACzB+V,EAAerY,YAAYsC,GAC3B0Y,GAAqB,SAIvBV,GACAA,EAAqB3a,UAAUC,SAAS,sBAExC0a,EAAqB3a,UAAUuE,OAAO,oBACtC8W,GAAqB,EACrBX,EAAa1a,UAAUuE,OAAO,4BAC9B+W,EAAyB5C,EAAetZ,cAAc,gCAErDsZ,EACE6B,uBAAuB,6BAA6B,GACpDva,UAAUsE,IAAI,oBAEjBoU,EAAezX,MAAMsa,SAAW,aAGjCb,EAAazZ,MAAMwc,SAAW,OAG/Bne,wBAAwBob,GAEpBW,IACH/b,wBAAwBgc,GAClBvD,EAAW,IAAIC,YAAY,gBAAiB,CAAE5V,QAAQ,EAAMsb,SAAS,IAC3EhD,EAAazC,cAAcF,OAOhC,SAAS4F,IAGR,IAFA,IAAMC,EAAsBpf,SAAS+b,uBAAuB,wBAEnD7c,EAAI,EAAGA,EAAIkgB,EAAoB9f,OAAQJ,IAAK,CACpD,IAAMmgB,EAAqBD,EAAoBlgB,GAE/CmgB,EAAmB7d,UAAUsE,IAA7B,wBAAAe,OAAyD3H,IAEzD,IAAIF,EAAQqgB,EAAmBtD,uBAAuB,sBACtD,GAAmB,EAAf/c,EAAMM,OAAY,EACrBN,EAAQA,EAAM,IAEJS,QAAQ2b,6BACjBiE,EAAmB5c,MAAM0Y,SAAzB,GAAAtU,OAAuC7H,EAAMS,QAAQ2b,2BAArD,OAEDpc,EAAMwC,UAAUuE,OAAO,mCAEvB/G,EAAMsgB,0BAA2B,EAEjC,IADA,IAAMte,EAAMhC,EAAMsC,iBAAiB,MAC1BjC,EAAI,EAAGA,EAAI2B,EAAI1B,OAAQD,IACV,EAAjB2B,EAAI3B,GAAGgB,UACVrB,EAAMsgB,0BAA2B,GAGnC,IAAMC,EAA0BF,EAAmB/C,YAE7C3c,EAAKX,EAAM4B,cAAc,MACzB4e,EAAa5T,OAAOC,iBAAiBlM,EAAI,MACzC8f,EAAoBD,EAAW1T,iBAAiB,qBAChD4T,EAAqBF,EAAW1T,iBAAiB,sBACjD6T,EAAqBH,EAAW1T,iBAAiB,gBACjD8T,EAAsBJ,EAAW1T,iBAAiB,gBAClD+T,EAAkBC,WAAWH,EAAoB,IAAMG,WAAWF,EAAqB,IACvFG,EACLD,WAAWL,EAAmB,IAAMK,WAAWJ,EAAoB,IAC5DM,EAA4BhhB,EAAMS,QAAlCugB,wBACAC,EAAuBjhB,EAAMS,QAA7BwgB,mBACAC,EAA4BlhB,EAAMS,QAAlCygB,wBACJC,GAAqB,EACrBC,OAAgB,EAChBJ,EAA0BT,EACzBW,GACHlhB,EAAMyD,MAAMwc,SAAW,OAMnBjgB,EAAMsgB,0BACTtgB,EAAMyD,MAAMC,MAAQ,OAGpB0d,GADAA,GADgCb,EAA0BU,GACbC,GACPL,EAAkBE,EACxDI,GAAqB,GAErBnhB,EAAMyD,MAAMC,MAAQ,SAQrB1D,EAAMyD,MAAMC,MAAQ,OACpB1D,EAAMyD,MAAMwc,SAAW,KACvBjgB,EAAMyD,MAAM0Y,SAAZ,GAAAtU,OAA0BmZ,EAA1B,QASDhhB,EAAMyD,MAAM0Y,SAAW,KACvBnc,EAAMyD,MAAMwc,SAAZ,GAAApY,OAA0B7H,EAAMS,QAAQugB,wBAAxC,MACAhhB,EAAMyD,MAAMC,MAAQ,OACpB0d,EAAmBphB,EAAMS,QAAQ4gB,iBAAkD,MACnFF,GAAqB,GASdG,EAAStgB,SAATsgB,MACJA,IACGC,EAAwBD,EAAK1f,cAAL,iCAAAiG,OAAoD3H,EAApD,eAG7BohB,EAAKxe,YAAYye,GAIfJ,KACGK,EAAqBxgB,SAASC,cAAc,UAC/BG,aAAnB,2BAAAyG,OAA2D3H,IAAK,GAChEshB,EAAmBpY,UAAnB,yBAAAvB,OAAwD3H,EAAxD,sDAAA2H,OAA8GuZ,EAA9G,OACIE,GACHA,EAAKze,YAAY2e,MA/pBG5f,EAqCT,mCApCC6Q,MAAMC,KAAK1R,SAASsB,iBAAiBV,IAE7CkG,IAAI,SAAC6P,GACZA,EAAE1L,iBAAiB,aAAc,SAACxH,GAC3B+M,EAAK/M,EAAE6B,OAETkL,EAAG/Q,QAAQghB,0BACdjQ,EAAG/N,MAAMkJ,gBAAkB6E,EAAG/Q,QAAQghB,yBAGnCjQ,EAAG/Q,QAAQihB,4BACdlQ,EAAG/N,MAAMke,MAAQnQ,EAAG/Q,QAAQihB,2BAGzBlQ,EAAG/Q,QAAQmhB,wBACdpQ,EAAG/N,MAAMoe,UAAT,SAAAha,OAA8B8P,EAAElX,QAAQmhB,sBAAxC,QAIFjK,EAAE1L,iBAAiB,aAAc,SAACxH,GAE3B+M,EAAK/M,EAAE6B,OACTkL,EAAG/Q,QAAQghB,0BACdjQ,EAAG/N,MAAMkJ,gBAAkB6E,EAAG/Q,QAAQqhB,oBAEnCtQ,EAAG/Q,QAAQihB,4BACdlQ,EAAG/N,MAAMke,MAAQnQ,EAAG/Q,QAAQshB,kBAEzBvQ,EAAG/Q,QAAQmhB,wBACdpQ,EAAG/N,MAAMoe,UAAY,gBAyGzB1B,IACAnD,IAGAF,EAAElQ,QAAQoV,OAAO,WAChB7B,IACAnD,MA2hBD,IADA,IAAMvQ,EAAWzL,SAAS+b,uBAAuB,mBACxC7c,EAAI,EAAGA,EAAIuM,EAASnM,OAAQJ,IAAK,CACzC,IASQ+hB,EACAC,EAVFhc,EAAUuG,EAASvM,GACrBgG,EAAQ1D,UAAUC,SAAS,8BAC9ByD,EAAQ1D,UAAUuE,OAAO,4BACzBb,EAAQ1D,UAAUsE,IAAI,yBAGnBZ,EAAQ1D,UAAUC,SAAS,2BACxB4b,EAASnY,EAAQoY,UAAUC,MAAM,yBACzB9L,MAAMwB,QAAQoK,KAErB6D,GADAD,EAAW5D,EAAO,IACK8D,cAE7Bjc,EAAQ1D,UAAUuE,OAAOkb,IAEnBG,EAAoBlc,EAAQtE,cAAc,0BAE/CwgB,EAAkB5f,UAAUsE,IAAIob,IAQpC,IAAM/d,EAAkB,IAAIke,wBAAwB,CACnDvM,MAAO,sBACPE,cAAc,KAIf,WAEC,IADA,IAAMsM,EAASthB,SAASsB,iBAAiB,uBAChCpC,EAAI,EAAGA,EAAIoiB,EAAOhiB,OAAQJ,IACZ,IAAIqiB,mBAAmB,CAAEviB,MAAOsiB,EAAOpiB,KAC/CiN,4BAA4BhJ,GAG5Cqe,GACIC,EAAuB,IAAIjI,YAAY,mBAAoB,CAC9D5V,OAAQ,CACPT,gBAAAA,KAGFnD,SAASyZ,cAAcgI,GACvBte,EAAgBmS,gBAEhBoM,eAAe7G,KAAK8G,iBAAiBC","file":"wp-table-builder-frontend.js","sourcesContent":["let WPTB_CutGlueTable = {\n    cutTableHorizontally: function (rowBefore, table) {\n        if( table && table.rows[rowBefore] ) {\n            for( let i = 0; i < rowBefore; i++ ) {\n                let tableRowsIChildren = table.rows[i].children;\n\n                for( let j = 0; j < tableRowsIChildren.length; j++ ) {\n                    if ( tableRowsIChildren[j].rowSpan > 1 && tableRowsIChildren[j].rowSpan > rowBefore - i ) {\n                        let newTdRowspan = tableRowsIChildren[j].rowSpan - rowBefore + i;\n                        tableRowsIChildren[j].rowSpan = rowBefore - i;\n                        if( ! tableRowsIChildren[j].dataset.sameCellBeforeDivision ) {\n                            tableRowsIChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                        }\n\n                        let td;\n                        if(table.hasOwnProperty('wptbCell')) {\n                            td = new table.wptbCell( table.mark );\n                            td = td.getDOMElement();\n                        } else {\n                            td = document.createElement('td');\n                        }\n\n                        let tdTopStyle = tableRowsIChildren[j].getAttribute( 'style' );\n                        td.setAttribute( 'style', tdTopStyle );\n                        td.colSpan = tableRowsIChildren[j].colSpan;\n                        td.rowSpan = newTdRowspan;\n                        td.dataset.sameCellBeforeDivision = tableRowsIChildren[j].dataset.sameCellBeforeDivision;\n\n                        let dataXIndex = tableRowsIChildren[j].dataset.xIndex;\n                        let dataXIndexNext = parseInt( dataXIndex ) + parseInt( tableRowsIChildren[j].colSpan );\n                        let beforeTd;\n                        while( ! beforeTd && dataXIndexNext < table.maxCols ) {\n                            beforeTd = table.rows[rowBefore].querySelector( '[data-x-index=\"' + dataXIndexNext + '\"]' );\n                            dataXIndexNext++;\n                        }\n                        table.rows[rowBefore].insertBefore( td, beforeTd );\n\n                        WPTB_RecalculateIndexes(table);\n                    }\n                }\n            }\n        }\n    },\n    glueTableHorizontally: function (table) {\n        if(table) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' );\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] ) {\n                            if( tdsSameBeforeDivision[j].parentNode && tdsSameBeforeDivision[j + 1].parentNode &&\n                                ! tdsSameBeforeDivision[j].parentNode.classList.contains( 'wptb-row-moving' ) &&\n                                ! tdsSameBeforeDivision[j + 1].parentNode.classList.contains( 'wptb-row-moving' ) ) {\n                                if( ( tdsSameBeforeDivision[j + 1].dataset.yIndex == parseInt( tdsSameBeforeDivision[j].dataset.yIndex ) +\n                                    parseInt( tdsSameBeforeDivision[j].rowSpan ) ) ) {\n                                    tdsSameBeforeDivision[j].rowSpan += tdsSameBeforeDivision[j + 1].rowSpan;\n\n                                    let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                    for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                        tdsSameBeforeDivision[j].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                    }\n\n                                    let nextRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                    nextRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    cutTableVertically: function (col, table) {\n        for ( let i = 0; i < table.rows.length; i++ ) {\n            if( col < table.maxCols ) {\n                if( col != 0 && ( ! table.rows[i].querySelector( '[data-x-index=\"' + col + '\"]' ) ) ) {\n                    let rowChildren = table.rows[i].children;\n\n                    let td,\n                        rowChildrenLength = rowChildren.length,\n                        afterTd,\n                        rowSpanNewTd,\n                        colSpanOld,\n                        colSpanNewTd;\n                    for( let j = 0; j < rowChildrenLength; j++ ) {\n                        if( rowChildren[j].colSpan > 1 && parseInt( rowChildren[j].dataset.xIndex ) < col &&\n                            parseInt( rowChildren[j].dataset.xIndex ) + parseInt( rowChildren[j].colSpan ) > col ) {\n                            if(table.hasOwnProperty('wptbCell')) {\n                                td = new table.wptbCell( table.mark );\n                                td = td.getDOMElement();\n                            } else {\n                                td = document.createElement('td');\n                            }\n\n                            rowSpanNewTd = rowChildren[j].rowSpan;\n                            colSpanOld = rowChildren[j].colSpan;\n                            rowChildren[j].colSpan = col - rowChildren[j].dataset.xIndex;\n                            colSpanNewTd = colSpanOld - rowChildren[j].colSpan;\n\n                            if( ! rowChildren[j].dataset.sameCellBeforeDivision ) {\n                                rowChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                            }\n\n                            let tdLeftStyle = rowChildren[j].getAttribute( 'style' );\n                            td.setAttribute( 'style', tdLeftStyle );\n\n                            let tdAnalogThisX = table.querySelector( '[data-x-index=\"' + col + '\"]' );\n                            if( tdAnalogThisX ) {\n                                td.style.width = tdAnalogThisX.style.width;\n                            }\n\n                            let tdAnalogThisY = table.querySelector( '[data-y-index=\"' + i + '\"]' );\n                            if( tdAnalogThisY ) {\n                                td.style.height = tdAnalogThisY.style.height;\n                            }\n                            if( rowChildren[j + 1] ) {\n                                afterTd = rowChildren[j + 1];\n                            } else {\n                                afterTd = null;\n                            }\n\n                            table.rows[i].insertBefore( td, afterTd );\n                            td.colSpan = colSpanNewTd;\n                            td.rowSpan = rowSpanNewTd;\n                            td.dataset.sameCellBeforeDivision = rowChildren[j].dataset.sameCellBeforeDivision;\n                            i += rowSpanNewTd - 1;\n                            break\n                        }\n                    }\n                }\n            }\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    glueTableVertically: function (table) {\n        if( table ) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = [...table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' )];\n\n                    let jFirstTdGlue = null;\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] &&\n                            ! tdsSameBeforeDivision[j].classList.contains( 'wptb-column-moving' ) &&\n                            ! tdsSameBeforeDivision[j + 1].classList.contains( 'wptb-column-moving' ) ) {\n                            if( ( tdsSameBeforeDivision[j + 1].dataset.xIndex == parseInt( tdsSameBeforeDivision[j].dataset.xIndex ) +\n                                parseInt( tdsSameBeforeDivision[j].colSpan ) ) ) {\n                                if( jFirstTdGlue == null ) {\n                                    jFirstTdGlue = j;\n                                }\n                                tdsSameBeforeDivision[jFirstTdGlue].colSpan += tdsSameBeforeDivision[j + 1].colSpan;\n\n                                let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                    tdsSameBeforeDivision[jFirstTdGlue].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                }\n\n                                let thisRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                thisRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    }\n}\n","/**\r\n *\r\n * @param {HTMLElement} table\r\n * @param {string} typeFirst\r\n * @param {strinig} typeSecond\r\n * @param {func} workFunction\r\n * @param {object} responsiveFront\r\n */\r\nvar WPTB_GetDirectionAfterReconstruction = function (table, typeFirst, typeSecond,verticalProp, responsiveFront) {\r\n\r\n    let itemsPerHeader = 0;\r\n    let tableMaxCols = table.maxCols;\r\n    const switchMode = {};\r\n    let type = [];\r\n    if (responsiveFront && responsiveFront.getDirective(table)) {\r\n        switchMode.switch = function (e) {\r\n            const directives = responsiveFront.getDirective(table)\r\n\r\n            let sizeRangeId = 'desktop';\r\n            if (e && e.detail) {\r\n                sizeRangeId = e.detail.sizeRangeId;\r\n            }\r\n            type = [typeFirst, 1];\r\n            if (sizeRangeId !== 'desktop') {\r\n                if (directives.hasOwnProperty('modeOptions')) {\r\n                    const mode = directives.responsiveMode;\r\n                    const modeOptions = directives.modeOptions[mode];\r\n\r\n                    if (\r\n                        modeOptions.hasOwnProperty('topRowAsHeader') &&\r\n                        modeOptions.topRowAsHeader.hasOwnProperty(sizeRangeId) &&\r\n                        modeOptions.topRowAsHeader[sizeRangeId]\r\n                    ) {\r\n                        if (\r\n                            modeOptions.hasOwnProperty('cellStackDirection') &&\r\n                            modeOptions.cellStackDirection.hasOwnProperty(sizeRangeId)\r\n                        ) {\r\n                            if (modeOptions.cellStackDirection[sizeRangeId] === 'row') {\r\n                                type = [typeSecond, 2];\r\n                                itemsPerHeader = tableMaxCols - 1;\r\n                            } else if (modeOptions.cellStackDirection[sizeRangeId] === 'column') {\r\n                                if (modeOptions.hasOwnProperty('cellsPerRow')) {\r\n                                    itemsPerHeader = modeOptions.cellsPerRow[sizeRangeId];\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        itemsPerHeader = 0;\r\n                    }\r\n                }\r\n            } else {\r\n                itemsPerHeader = 0;\r\n            }\r\n            return {type, itemsPerHeader}\r\n        };\r\n    } else {\r\n        switchMode.switch = function (e) {\r\n            type = [typeFirst, 1];\r\n            if (table.classList.contains('wptb-mobile-view-active')) {\r\n                if (table.classList.contains('wptb-table-preview-head')) {\r\n                    type = [typeSecond, 2];\r\n                    if(type === verticalProp) {\r\n                        itemsPerHeader = tableMaxCols - 1;\r\n                    }\r\n                }\r\n                let newTable = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\r\n                return {type, itemsPerHeader, newTable};\r\n            }\r\n\r\n            return {type, itemsPerHeader}\r\n        };\r\n    }\r\n\r\n    return switchMode;\r\n}\r\n","/**\r\n * Responsive class assignment for frontend operations.\r\n *\r\n * This file can be used as an UMD.\r\n */\r\n(function assignToGlobal(key, context, factory) {\r\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// eslint-disable-next-line no-param-reassign\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_SortableTable', self || global, () => {\r\n\tfunction WPTB_SortTable(options = {}) {\r\n\t\tconst table = (this.table = options.table);\r\n\t\tWPTB_RecalculateIndexes(table);\r\n\t\tconst thisObject = this;\r\n\t\tthis.itemsPerHeader = 0;\r\n\t\tthis.tableMaxCols = table.maxCols;\r\n\t\tthis.cellsStylesScheme = {};\r\n\t\tthis.rowsStylesScheme = {};\r\n\r\n\t\t/**\r\n\t\t * sets the table to sort mode\r\n\t\t *\r\n\t\t * @param {string} type\r\n\t\t * @param {boolean} active\r\n\t\t * @param {number} number\r\n\t\t */\r\n\t\tthis.sortModeSwitcher = function (type, active) {\r\n\t\t\tif(active) {\r\n\t\t\t\tthis.sortModeSwitcher('horizontal', false);\r\n\t\t\t\tthis.sortModeSwitcher('vertical', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (type === 'vertical') {\r\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableVerticalStart, false);\r\n\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', true);\r\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableVerticalStart, false);\r\n\t\t\t\t\tthis.table.dataset.wptbSortableTableVertical = '1';\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', false);\r\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableVertical;\r\n\t\t\t\t}\r\n\t\t\t} else if (type === 'horizontal') {\r\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableHorizontalStart, false);\r\n\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', true);\r\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableHorizontalStart, false);\r\n\t\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal = '1';\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\r\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', false);\r\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableHorizontal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * changes table object for old reconstruction table type\r\n\t\t *\r\n\t\t * @param {boolean}start\r\n\t\t * @returns {*}\r\n\t\t */\r\n\t\tthis.tableObjectChange = function (start = true) {\r\n\t\t\tif(this.table.classList.contains('wptb-mobile-view-active') && start) {\r\n\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\r\n\t\t\t} else if(this.table.classList.contains('wptb-preview-table-mobile') && !start) {\r\n\t\t\t\tthis.table = table.parentNode.querySelector('.wptb-preview-table');\r\n\t\t\t}\r\n\t\t\treturn this.table;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * fills the object with data about cell styles for all locations (create scheme)\r\n\t\t *\r\n\t\t * @param elemSelector\r\n\t\t */\r\n\t\tthis.createTableElementsStylesScheme = function (elemSelector) {\r\n\t\t\tthis.tableObjectChange();\r\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\r\n\t\t\tif(elements.length) {\r\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tlet elem = elements[i];\r\n\t\t\t\t\tlet cellFullStyleObj = window.getComputedStyle(elem, null);\r\n\t\t\t\t\tlet backgroundColor = cellFullStyleObj.getPropertyValue( 'background-color' );\r\n\t\t\t\t\tlet objectKey = '';\r\n\t\t\t\t\tif(elemSelector === 'td') {\r\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\r\n\t\t\t\t\t\tthis.cellsStylesScheme[objectKey] = {backgroundColor};\r\n\t\t\t\t\t} else if(elemSelector === 'tr') {\r\n\t\t\t\t\t\tobjectKey = String(i);\r\n\t\t\t\t\t\tthis.rowsStylesScheme[objectKey] = {backgroundColor};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.tableObjectChange(false);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * applies saved cell styles data to all cells\r\n\t\t *\r\n\t\t * @param elemSelector\r\n\t\t */\r\n\t\tthis.reassignElementsStyles = function (elemSelector) {\r\n\t\t\tthis.tableObjectChange();\r\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\r\n\t\t\tlet elementsStylesScheme;\r\n\t\t\tif(elemSelector === 'td') {\r\n\t\t\t\telementsStylesScheme = this.cellsStylesScheme;\r\n\t\t\t} else if(elemSelector === 'tr') {\r\n\t\t\t\telementsStylesScheme = this.rowsStylesScheme;\r\n\t\t\t}\r\n\t\t\tif(elements.length) {\r\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tlet elem = elements[i];\r\n\t\t\t\t\tlet objectKey = '';\r\n\t\t\t\t\tif(elemSelector === 'td') {\r\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\r\n\t\t\t\t\t} else if(elemSelector === 'tr') {\r\n\t\t\t\t\t\tobjectKey = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(elementsStylesScheme.hasOwnProperty(objectKey)) {\r\n\t\t\t\t\t\tlet elemStyles = elementsStylesScheme[objectKey];\r\n\t\t\t\t\t\tfor(let key in elemStyles) {\r\n\t\t\t\t\t\t\telem.style[key] = elemStyles[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.tableObjectChange(false);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * checks whether the table should be in the sort state\r\n\t\t * and connects the necessary handlers\r\n\t\t *\r\n\t\t * @param {object} responsiveFront\r\n\t\t */\r\n\t\tthis.sortableTableInitialization = function (responsiveFront) {\r\n\t\t\tlet typeFirst;\r\n\t\t\tlet typeSecond;\r\n\t\t\tif (this.table.dataset.wptbSortableTableVertical && this.table.dataset.wptbSortableTableVertical === '1') {\r\n\t\t\t\ttypeFirst = 'vertical';\r\n\t\t\t\ttypeSecond = 'horizontal';\r\n\t\t\t} else if (\r\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal &&\r\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal === '1'\r\n\t\t\t) {\r\n\t\t\t\ttypeFirst = 'horizontal';\r\n\t\t\t\ttypeSecond = 'vertical';\r\n\t\t\t}\r\n\r\n\t\t\tif(!typeFirst || typeof typeFirst !== 'string' || !typeSecond || typeof typeSecond !== 'string') return;\r\n\r\n\t\t\tlet switchMode = WPTB_GetDirectionAfterReconstruction(this.table, typeFirst, typeSecond, 'vertical', responsiveFront);\r\n\r\n\t\t\tif(typeof switchMode === 'object' && switchMode.hasOwnProperty('switch')) {\r\n\t\t\t\tfunction sortModeSwitcherRun (e) {\r\n\t\t\t\t\tlet switchModeObj = switchMode.switch(e);\r\n\t\t\t\t\tif(typeof switchModeObj === 'object') {\r\n\t\t\t\t\t\tthis.itemsPerHeader = switchModeObj.itemsPerHeader;\r\n\t\t\t\t\t\tif(switchModeObj.hasOwnProperty('newTable')) {\r\n\t\t\t\t\t\t\tlet tableOld = this.table;\r\n\t\t\t\t\t\t\tthis.table = switchModeObj.newTable;\r\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\r\n\t\t\t\t\t\t\tthis.table = tableOld;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsortModeSwitcherRun.call(thisObject);\r\n\t\t\t\tthis.table.addEventListener(\r\n\t\t\t\t\t'table:rebuilt',\r\n\t\t\t\t\tfunction (e) {\r\n\t\t\t\t\t\tsortModeSwitcherRun.call(thisObject, e);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * adds and deletes mousemove and mouseleave events handlers when happens switch sorting mode\r\n\t\t * and also can add necessary attributes\r\n\t\t *\r\n\t\t * @param {string} type\r\n\t\t * @param {boolean} active\r\n\t\t */\r\n\t\tthis.sortingCellMouseMoveSwitcher = function (type, active) {\r\n\t\t\t/**\r\n\t\t\t * removes and adds mousemove and mouseleave events handlers\r\n\t\t\t *\r\n\t\t\t * @param {HTMLElement} td\r\n\t\t\t * @param {func} sCMM\r\n\t\t\t * @param {boolean} active\r\n\t\t\t */\r\n\t\t\tfunction s(td, sCMM, active) {\r\n\t\t\t\ttd.removeEventListener('mousemove', sCMM, false);\r\n\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\ttd.addEventListener('mousemove', sCMM, false);\r\n\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * removes and adds data sorted attributes\r\n\t\t\t *\r\n\t\t\t * @param {HTMLElement} td\r\n\t\t\t * @param {string} dataAttr\r\n\t\t\t * @param {boolean} active\r\n\t\t\t */\r\n\t\t\tfunction dataAttrSortChange(td, dataAttr, active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tif (!td.dataset[dataAttr] || td.dataset[dataAttr] !== 'desk-disabled') {\r\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'ask';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'desk';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (td.dataset[dataAttr] === 'ask') {\r\n\t\t\t\t\ttd.dataset[dataAttr] = 'ask-disabled';\r\n\t\t\t\t} else if (td.dataset[dataAttr] === 'desk') {\r\n\t\t\t\t\ttd.dataset[dataAttr] = 'desk-disabled';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// removes all mousemove and mouseleave events handlers\r\n\t\t\t// and also removes all data sorted attributes from all cells\r\n\t\t\tlet tds = this.table.querySelectorAll('td');\r\n\t\t\tif (tds.length) {\r\n\t\t\t\ttds = [...tds];\r\n\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\ts(td, sortingCellMouseMoveVertical, false);\r\n\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', false);\r\n\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, false);\r\n\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// if active === true sets sorted events handlers\r\n\t\t\t// and data sorted attributes for all cells\r\n\t\t\tif (active) {\r\n\t\t\t\tif (type === 'vertical') {\r\n\t\t\t\t\tlet rowsLength = this.table.rows.length;\r\n\t\t\t\t\tlet dataYIndexStart = 0;\r\n\t\t\t\t\twhile (rowsLength > 0) {\r\n\t\t\t\t\t\tlet tds = this.table.querySelectorAll(`[data-y-index=\"${dataYIndexStart}\"]`);\r\n\t\t\t\t\t\ttds = [...tds];\r\n\t\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveVertical, active);\r\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', active);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (this.itemsPerHeader) {\r\n\t\t\t\t\t\t\trowsLength -= this.itemsPerHeader + 1;\r\n\t\t\t\t\t\t\tdataYIndexStart += this.itemsPerHeader + 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trowsLength = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (type === 'horizontal') {\r\n\t\t\t\t\tlet tds = this.table.querySelectorAll('[data-x-index=\"0\"]');\r\n\t\t\t\t\ttds = [...tds];\r\n\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\tlet tdsPerAfter = this.table.querySelectorAll(`[data-y-index=\"${td.dataset.yIndex}\"]`);\r\n\t\t\t\t\t\tif(tdsPerAfter.length > 2) {\r\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, active);\r\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', active);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * adds a sortable-hover class for a cell when the cursor is over the sort icon (arrow)\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {string} type\r\n\t\t * @param {HTMLElement} element td\r\n\t\t */\r\n\t\tfunction sortingCellMouseMov(e, type, element) {\r\n\t\t\tif (e.target.tagName === 'TD') {\r\n\t\t\t\tconst x = e.offsetX == undefined ? e.layerX : e.offsetX;\r\n\t\t\t\tconst y = e.offsetY == undefined ? e.layerY : e.offsetY;\r\n\t\t\t\tlet xMatch = false;\r\n\t\t\t\tif ((type === 'vertical' && e.target.clientWidth - x <= 35) || (type === 'horizontal' && x <= 35)) {\r\n\t\t\t\t\txMatch = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (xMatch && (e.target.clientHeight - 35) / 2 < y && (e.target.clientHeight + 35) / 2 > y) {\r\n\t\t\t\t\telement.classList.add('sortable-hover');\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.classList.remove('sortable-hover');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\telement.classList.remove('sortable-hover');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * calls sortingCellMouseMov with the type parameter set to vertical\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tfunction sortingCellMouseMoveVertical(e) {\r\n\t\t\tsortingCellMouseMov(e, 'vertical', this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * calls sortingCellMouseMov with the type parameter set to horizontal\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tfunction sortingCellMouseMoveHorizontal(e) {\r\n\t\t\tsortingCellMouseMov(e, 'horizontal', this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * remove sortable-hover class from cell when cursor leave cell\r\n\t\t */\r\n\t\tfunction tdMouseLeave() {\r\n\t\t\tthis.classList.remove('sortable-hover');\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * function for sorting the table vertically by the numeric content of cells\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {HTMLElement} table\r\n\t\t * @param {string} type\r\n\t\t */\r\n\t\tfunction sortableTable(e, type) {\r\n\t\t\tif (\r\n\t\t\t\te.target &&\r\n\t\t\t\te.target.tagName === 'TD' &&\r\n\t\t\t\t!table.parentNode.classList.contains('wptb-preview-table-manage-cells')\r\n\t\t\t) {\r\n\t\t\t\tconst table = e.currentTarget;\r\n\t\t\t\tlet tableWasSorted = false;\r\n\t\t\t\tif (type === 'vertical' && e.target.dataset.hasOwnProperty('sortedVertical')) {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * if table have enabled param topRowAsHeader and sellsStackDirection is column\r\n\t\t\t\t\t * the top and bottom rows that will not be sorted are temporarily removed from the table\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst tableRowsBefore = [];\r\n\t\t\t\t\tconst tableRowsAfter = [];\r\n\t\t\t\t\tif (this.itemsPerHeader && this.itemsPerHeader < table.rows.length) {\r\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\t\t\t\t\t\tconst tableRowsArr = [...table.rows];\r\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\r\n\t\t\t\t\t\tfor (let i = 0; i < tableRowsArr.length; i++) {\r\n\t\t\t\t\t\t\tif (i < e.target.dataset.yIndex) {\r\n\t\t\t\t\t\t\t\ttableRowsBefore.push(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t} else if (i > parseInt(e.target.dataset.yIndex, 10) + this.itemsPerHeader) {\r\n\t\t\t\t\t\t\t\ttableRowsAfter.push(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-x-index=\"${e.target.dataset.xIndex}\"]`);\r\n\t\t\t\t\ttds = [...tds];\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * preparing table for sorting\r\n\t\t\t\t\t */\r\n\t\t\t\t\tlet rowspan;\r\n\t\t\t\t\tlet rowNum;\r\n\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\tif (!(rowspan = parseInt(td.rowSpan, 10))) {\r\n\t\t\t\t\t\t\trowspan = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trowNum = td.dataset.yIndex;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\r\n\t\t\t\t\t\trowNum += rowspan;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconst rowsValuesArr = [];\r\n\t\t\t\t\tlet rowsTdFirst;\r\n\t\t\t\t\tlet tdYCoordsRowSpanPrevious = 0;\r\n\t\t\t\t\tconst tableRowsPushed = [];\r\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\r\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\ttable,\r\n\t\t\t\t\t\t\ttds,\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\ttdYCoordsRowSpanPrevious,\r\n\t\t\t\t\t\t\t'vertical'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t\ti = tdsChanged.i;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t} else if (tdsChanged) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst td = tds[i];\r\n\r\n\t\t\t\t\t\tlet tdRowspan = parseInt(td.rowSpan, 10);\r\n\t\t\t\t\t\tif (!tdRowspan) tdRowspan = 1;\r\n\r\n\t\t\t\t\t\ttdYCoordsRowSpanPrevious = parseInt(td.dataset.yIndex, 10) + tdRowspan;\r\n\r\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\r\n\r\n\t\t\t\t\t\tconst rowsTd = [];\r\n\t\t\t\t\t\tfor (let j = 0; j < tdRowspan; j++) {\r\n\t\t\t\t\t\t\trowsTd.push(table.rows[parseInt(td.dataset.yIndex, 10) + j]);\r\n\t\t\t\t\t\t\ttableRowsPushed.push(parseInt(td.dataset.yIndex, 10) + j);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (td.dataset.yIndex > 0) {\r\n\t\t\t\t\t\t\trowsValuesArr.push({\r\n\t\t\t\t\t\t\t\trowsTd,\r\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trowsTdFirst = rowsTd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedVertical');\r\n\t\t\t\t\tif (!orderBy) return;\r\n\r\n\t\t\t\t\tif (rowsValuesArr.length) rowsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\r\n\r\n\t\t\t\t\trowsValuesArr.unshift({ rowsTd: rowsTdFirst });\r\n\r\n\t\t\t\t\tif (rowsValuesArr.length < table.rows.length) {\r\n\t\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\r\n\t\t\t\t\t\t\tif (tableRowsPushed.indexOf(i) > -1) continue;\r\n\t\t\t\t\t\t\tconst rowsTd = [];\r\n\t\t\t\t\t\t\trowsTd.push(table.rows[i]);\r\n\r\n\t\t\t\t\t\t\trowsValuesArr.push({\r\n\t\t\t\t\t\t\t\trowsTd,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst tBody = table.querySelector('tbody');\r\n\t\t\t\t\ttBody.innerHTML = '';\r\n\r\n\t\t\t\t\trowsValuesArr.map((rowsValObj) => {\r\n\t\t\t\t\t\trowsValObj.rowsTd.map((row) => {\r\n\t\t\t\t\t\t\ttBody.appendChild(row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * returning previously deleted rows\r\n\t\t\t\t\t */\r\n\t\t\t\t\tif (tableRowsBefore.length) {\r\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\r\n\t\t\t\t\t\tif (tableLastCont) {\r\n\t\t\t\t\t\t\tconst trRef = tableLastCont.querySelector('tr');\r\n\t\t\t\t\t\t\ttableRowsBefore.map((tr) => {\r\n\t\t\t\t\t\t\t\ttableLastCont.insertBefore(tr, trRef);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (tableRowsAfter.length) {\r\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\r\n\t\t\t\t\t\tif (tBody) {\r\n\t\t\t\t\t\t\ttableRowsAfter.map((tr) => {\r\n\t\t\t\t\t\t\t\ttableLastCont.appendChild(tr);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\r\n\t\t\t\t\tWPTB_CutGlueTable.glueTableHorizontally(table);\r\n\r\n\t\t\t\t\ttableWasSorted = true;\r\n\t\t\t\t} else if (type === 'horizontal' && e.target.dataset.xIndex === '0') {\r\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-y-index=\"${e.target.dataset.yIndex}\"]`);\r\n\t\t\t\t\ttds = [...tds];\r\n\r\n\t\t\t\t\t// preparing table for sorting\r\n\t\t\t\t\tlet colspan;\r\n\t\t\t\t\tlet colNum;\r\n\t\t\t\t\ttds.map((td) => {\r\n\t\t\t\t\t\tif (!(colspan = parseInt(td.colSpan, 10))) {\r\n\t\t\t\t\t\t\tcolspan = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolNum = td.dataset.xIndex;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\r\n\t\t\t\t\t\tcolNum += colspan;\r\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconst columnsValuesArr = [];\r\n\t\t\t\t\tlet columnsTdFirst;\r\n\r\n\t\t\t\t\tlet tdXCoordsColSpanPrevious = 0;\r\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\r\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\ttable,\r\n\t\t\t\t\t\t\ttds,\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\ttdXCoordsColSpanPrevious,\r\n\t\t\t\t\t\t\t'horizontal'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t\ti = tdsChanged.i;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t} else if (tdsChanged) {\r\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst td = tds[i];\r\n\t\t\t\t\t\tlet tdColspan = parseInt(td.colSpan, 10);\r\n\t\t\t\t\t\tif (!tdColspan) tdColspan = 1;\r\n\r\n\t\t\t\t\t\ttdXCoordsColSpanPrevious = parseInt(td.dataset.xIndex, 10) + tdColspan;\r\n\r\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\r\n\t\t\t\t\t\tconst columnsTd = [];\r\n\t\t\t\t\t\tfor (let j = 0; j < tdColspan; j++) {\r\n\t\t\t\t\t\t\tconst tdsColumn = [\r\n\t\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(td.dataset.xIndex, 10) + j}\"]`),\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tcolumnsTd.push(tdsColumn);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (td.dataset.xIndex > 0) {\r\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\r\n\t\t\t\t\t\t\t\tcolumnsTd,\r\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcolumnsTdFirst = columnsTd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedHorizontal');\r\n\t\t\t\t\tif (!orderBy) return;\r\n\r\n\t\t\t\t\tif (columnsValuesArr.length) columnsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\r\n\r\n\t\t\t\t\tcolumnsValuesArr.unshift({ columnsTd: columnsTdFirst });\r\n\r\n\t\t\t\t\tif (columnsValuesArr.length < table.maxCols) {\r\n\t\t\t\t\t\tconst difference = table.maxCols - columnsValuesArr.length;\r\n\t\t\t\t\t\tfor (let i = 0; i < difference; i++) {\r\n\t\t\t\t\t\t\tconst tdsColumn = [\r\n\t\t\t\t\t\t\t\t...table.querySelectorAll(\r\n\t\t\t\t\t\t\t\t\t`[data-x-index=\"${parseInt(table.maxCols, 10) - parseInt(difference, 10) + i}\"]`\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\r\n\t\t\t\t\t\t\t\tcolumnsTd: [tdsColumn],\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\r\n\t\t\t\t\t\ttable.rows[i].innerHTML = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumnsValuesArr.map((columnsValObj) => {\r\n\t\t\t\t\t\tcolumnsValObj.columnsTd.map((tdsColumn) => {\r\n\t\t\t\t\t\t\ttdsColumn.map((td) => {\r\n\t\t\t\t\t\t\t\ttable.rows[td.dataset.yIndex].appendChild(td);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\r\n\r\n\t\t\t\t\tWPTB_CutGlueTable.glueTableVertically(table);\r\n\r\n\t\t\t\t\ttableWasSorted = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (tableWasSorted) {\r\n\t\t\t\t\tremoveCellsAttrAfterDivision(table);\r\n\r\n\t\t\t\t\tif (table.hasOwnProperty('tableSM')) {\r\n\t\t\t\t\t\tconst tableSM = table.tableSM();\r\n\t\t\t\t\t\tnew tableSM().tableStateSet();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.reassignElementsStyles('td');\r\n\t\t\t\t\tthis.reassignElementsStyles('tr');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Function that sets the data-attribute with the number of the row or column\r\n\t\t * that the table was sorted by. Returns the number of a row or column\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {string} dataAttr\r\n\t\t * @returns {null|boolean}\r\n\t\t */\r\n\t\tfunction setSortedAscDataAttr(e, dataAttr) {\r\n\t\t\tif (\r\n\t\t\t\te.currentTarget &&\r\n\t\t\t\t(e.currentTarget.classList.contains('wptb-preview-table') ||\r\n\t\t\t\t\te.currentTarget.classList.contains('wptb-preview-table-mobile'))\r\n\t\t\t) {\r\n\t\t\t\tif (!e.target.dataset[dataAttr] || e.target.dataset[dataAttr] === 'ask') {\r\n\t\t\t\t\te.target.dataset[dataAttr] = 'desk';\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.target.dataset[dataAttr] = 'ask';\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn e.target.dataset[dataAttr];\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * defines the sorting order\r\n\t\t *\r\n\t\t * @param {string} orderBy\r\n\t\t * @param prev\r\n\t\t * @param next\r\n\t\t * @returns {number}\r\n\t\t */\r\n\t\tfunction sortOrder(orderBy = 'ask', prev, next) {\r\n\t\t\tlet prevValue = prev.value;\r\n\t\t\tlet nextValue = next.value;\r\n\t\t\tif (parseInt(prevValue) && parseInt(nextValue)) {\r\n\t\t\t\tprevValue = parseInt(prevValue);\r\n\t\t\t\tnextValue = parseInt(nextValue);\r\n\t\t\t}\r\n\r\n\t\t\tif (orderBy === 'ask') {\r\n\t\t\t\tif (prevValue < nextValue) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (prevValue === nextValue) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif (prevValue < nextValue) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif (prevValue === nextValue) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * return cell text elements values\r\n\t\t *\r\n\t\t * @param cell {HTMLElement}\r\n\t\t * @returns {string}\r\n\t\t */\r\n\t\tfunction textElementsValuesGet(cell) {\r\n\t\t\tlet textElements = cell.querySelectorAll('.wptb-text-container');\r\n\t\t\ttextElements = [...textElements];\r\n\t\t\tlet value = '';\r\n\t\t\tfor (let j = 0; j < textElements.length; j++) {\r\n\t\t\t\tconst p = textElements[j].querySelector('p');\r\n\t\t\t\tvalue += p.innerText;\r\n\t\t\t\tif (j !== textElements.length - 1) value += ' ';\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * adds cells to the collection of cells in the row or column that the table is sorted by.\r\n\t\t * These added cells are not originally were added in the collection,\r\n\t\t * because they are combined with cells from higher rows or left-side columns\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t * @param {HTMLElement} table\r\n\t\t * @param {array} tds\r\n\t\t * @param {number} i\r\n\t\t * @param {number} tdIndexSpanPrev\r\n\t\t * @param {string} type\r\n\t\t * @returns {{tds: *}|boolean|{tds: *, i: *}}\r\n\t\t */\r\n\t\tfunction changeSortingTdsCollection(e, table, tds, i, tdIndexSpanPrev, type) {\r\n\t\t\tconst td = tds[i];\r\n\t\t\tlet tdsCollectionChanged = false;\r\n\t\t\tlet collectionTds;\r\n\t\t\tlet collectionTdsJSpan;\r\n\t\t\tlet collectionTdsJSpanProperty;\r\n\t\t\tlet indexName;\r\n\t\t\tlet indexNameCamelCase;\r\n\t\t\tlet indexNamePerpendicularCamelCase;\r\n\t\t\tlet tdSpanProperty;\r\n\t\t\t// max rows or columns column\r\n\t\t\tlet tableGroupCount;\r\n\r\n\t\t\tif (type === 'vertical') {\r\n\t\t\t\tcollectionTdsJSpanProperty = 'colSpan';\r\n\t\t\t\tindexName = 'data-y-index';\r\n\t\t\t\tindexNameCamelCase = 'yIndex';\r\n\t\t\t\tindexNamePerpendicularCamelCase = 'xIndex';\r\n\t\t\t\ttdSpanProperty = 'rowSpan';\r\n\t\t\t\ttableGroupCount = table.rows.length;\r\n\t\t\t} else if (type === 'horizontal') {\r\n\t\t\t\tcollectionTdsJSpanProperty = 'rowSpan';\r\n\t\t\t\tindexName = 'data-x-index';\r\n\t\t\t\tindexNameCamelCase = 'xIndex';\r\n\t\t\t\tindexNamePerpendicularCamelCase = 'yIndex';\r\n\t\t\t\ttdSpanProperty = 'colSpan';\r\n\t\t\t\ttableGroupCount = table.maxCols;\r\n\t\t\t}\r\n\r\n\t\t\tif (td.dataset[indexNameCamelCase] - tdIndexSpanPrev > 0) {\r\n\t\t\t\tcollectionTds = table.querySelectorAll(`[${indexName}=\"${tdIndexSpanPrev}\"]`);\r\n\r\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\r\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\r\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\r\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\r\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttds.splice(i, 0, collectionTds[j]);\r\n\t\t\t\t\t\ttdsCollectionChanged = true;\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tdsCollectionChanged) return { tds, i };\r\n\r\n\t\t\tlet tdSpan = parseInt(td[tdSpanProperty], 10);\r\n\t\t\tif (!tdSpan) tdSpan = 1;\r\n\t\t\tif (i == tds.length - 1 && parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan < tableGroupCount) {\r\n\t\t\t\tcollectionTds = table.querySelectorAll(\r\n\t\t\t\t\t`[${indexName}=\"${parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan}\"]`\r\n\t\t\t\t);\r\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\r\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\r\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\r\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\r\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\r\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttds.push(collectionTds[j]);\r\n\t\t\t\t\t\ttdsCollectionChanged = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tdsCollectionChanged) return { tds };\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * remove cells attributes which were used for division table\r\n\t\t *\r\n\t\t * @param {HTMLElement} table\r\n\t\t */\r\n\t\tfunction removeCellsAttrAfterDivision(table) {\r\n\t\t\tconst tdsAll = [...table.getElementsByTagName('td')];\r\n\t\t\tfor (let i = 0; i < tdsAll.length; i++) {\r\n\t\t\t\tif (tdsAll[i].hasAttribute('data-same-cell-before-division')) {\r\n\t\t\t\t\ttdsAll[i].removeAttribute('data-same-cell-before-division');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * function for run sorting table vertically\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tthis.sortableTableVerticalStart = function (e) {\r\n\t\t\tsortableTable.call(thisObject, e, 'vertical');\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * function for run sorting table horizontally\r\n\t\t *\r\n\t\t * @param {event} e\r\n\t\t */\r\n\t\tthis.sortableTableHorizontalStart = function (e) {\r\n\t\t\tsortableTable.call(thisObject, e, 'horizontal');\r\n\t\t};\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\treturn WPTB_SortTable;\r\n});\r\n","const WPTB_RecalculateIndexes = function (table) {\r\n    let trs = table.getElementsByTagName( 'tr' ),\r\n        tds, maxCols = 0, maxColsFull = 0, tdsArr = [];\r\n\r\n    for ( let i = 0; i < trs.length; i++ ) {\r\n        tds = trs[i].getElementsByTagName( 'td' );\r\n\r\n        if ( tdsArr[i] == undefined ) {\r\n            tdsArr[i] = [];\r\n        }\r\n\r\n        let jMainIter = 0;\r\n        for ( let j = 0; j < tds.length; j++ ) {\r\n            if ( tdsArr[i][j] != undefined ) {\r\n                for ( let y = 0; y < 100; y++ ) {\r\n                    if ( tdsArr[i][jMainIter] != undefined ) {\r\n                        jMainIter++;\r\n                        continue;\r\n                    }\r\n                    tdsArr[i][jMainIter] = tds[j];\r\n                    tds[j].dataset.xIndex = jMainIter;\r\n                    break;\r\n                }\r\n            } else {\r\n                tdsArr[i][j] = tds[j];\r\n                tds[j].dataset.xIndex = jMainIter;\r\n            }\r\n            tds[j].dataset.yIndex = i;\r\n\r\n            if ( tds[j].colSpan > 1 ) {\r\n                for ( let k = 1; k < tds[j].colSpan; k++ ) {\r\n                    jMainIter++;\r\n                    tdsArr[i][jMainIter] = 'tdDummy';\r\n                }\r\n            }\r\n\r\n            if ( tds[j].rowSpan > 1 ) {\r\n                for ( let x = 1; x < tds[j].rowSpan; x++ ) {\r\n                    if ( tdsArr[i + x] == undefined ) {\r\n                        tdsArr[i + x] = [];\r\n                    }\r\n                    for ( let z = 0; z < tds[j].colSpan; z++ ) {\r\n                        tdsArr[i + x][jMainIter - tds[j].colSpan + 1 + z ] = 'tdDummy';\r\n                    }\r\n                }\r\n            }\r\n            jMainIter++;\r\n        }\r\n\r\n        if ( tds.length > maxCols ) {\r\n            maxCols = tds.length;\r\n        }\r\n\r\n        if( i == 0 ) {\r\n            maxColsFull = jMainIter;\r\n        }\r\n    }\r\n    table.columns = maxCols;\r\n    table.maxCols = maxColsFull;\r\n}\r\n","/**\r\n * Responsive class assignment for frontend operations.\r\n *\r\n * This file can be used as an UMD.\r\n */\r\n(function assignToGlobal(key, context, factory) {\r\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// eslint-disable-next-line no-param-reassign\r\n\t\tcontext[key] = factory();\r\n\t}\r\n\t// eslint-disable-next-line no-restricted-globals\r\n})('WPTB_ResponsiveFrontend', self || global, () => {\r\n\t/**\r\n\t * Log a message to console.\r\n\t *\r\n\t * @param {string} message message to be logged\r\n\t * @param {string} type console log type (e.g info, warn, error)\r\n\t * @throws An error will be given for invalid type value\r\n\t */\r\n\tfunction logToConsole(message, type = 'log') {\r\n\t\tif (typeof process !== 'undefined' && process.env.NODE_ENV === 'development') {\r\n\t\t\tif (console[type]) {\r\n\t\t\t\tconsole[type](`[WPTB]: ${message}`);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(`no logging type found with given type value of [${type}]`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Object implementation for cell element operations.\r\n\t * If an empty cellElement parameter is given, a fresh cell element will be created.\r\n\t *\r\n\t * @param {HTMLElement | null} cellElement cell element\r\n\t * @param {null | CellObject} [isReference=null] main cell object if the current cell is a reference to that cell in cases like merged cells\r\n\t * @param reference\r\n\t * @class\r\n\t */\r\n\tfunction CellObject(cellElement, reference = null) {\r\n\t\t// cell element\r\n\t\tthis.element = cellElement;\r\n\r\n\t\tthis.referenceObject = reference;\r\n\r\n\t\t// variable for deciding part of merged cells to be visible or not\r\n\t\tthis.mergedRenderStatus = true;\r\n\r\n\t\t// connected merged cell references\r\n\t\tthis.mergedCells = {\r\n\t\t\trow: [],\r\n\t\t\tcolumn: [],\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get merged render status.\r\n\t\t *\r\n\t\t * @return {boolean} render status\r\n\t\t */\r\n\t\tthis.getMergedRenderStatus = () => {\r\n\t\t\treturn this.mergedRenderStatus;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Set merged render status.\r\n\t\t *\r\n\t\t * @param {boolean} status render status\r\n\t\t */\r\n\t\tthis.setMergedRenderStatus = (status) => {\r\n\t\t\tthis.mergedRenderStatus = status;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add merged cells.\r\n\t\t *\r\n\t\t * @param {string} mergeType merge type\r\n\t\t * @param {CellObject} cellObj cell object instance\r\n\t\t */\r\n\t\tthis.addToMergedCells = (mergeType, cellObj) => {\r\n\t\t\tthis.mergedCells[mergeType].push(cellObj);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Determine if current cell is a reference to a main cell.\r\n\t\t *\r\n\t\t * @return {boolean} a reference or not\r\n\t\t */\r\n\t\tthis.isReference = () => {\r\n\t\t\treturn this.referenceObject !== null;\r\n\t\t};\r\n\r\n\t\tif (this.isReference()) {\r\n\t\t\tthis.element = cellElement.cloneNode(true);\r\n\t\t}\r\n\r\n\t\t// modifications object\r\n\t\t// this object will keep track of the modifications that has done to the cell to make sure we can roll them back to their original values\r\n\t\tthis.modifications = {};\r\n\r\n\t\t// spans object for cell's original merge values\r\n\t\tthis.spans = {\r\n\t\t\trow: 1,\r\n\t\t\tcol: 1,\r\n\t\t};\r\n\r\n\t\tthis.remainingSpans = {\r\n\t\t\trow: 0,\r\n\t\t\tcol: 0,\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Cache cell element's original span values.\r\n\t\t *\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.cacheSpanValues = () => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tObject.keys(this.spans).map((k) => {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.spans, k)) {\r\n\t\t\t\t\tconst defaultVal = this.spans[k];\r\n\r\n\t\t\t\t\tthis.spans[k] = this.element.getAttribute(`${k}Span`) || defaultVal;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tthis.cacheSpanValues();\r\n\r\n\t\t/**\r\n\t\t * Get original span value of cell object.\r\n\t\t *\r\n\t\t * @param {string} spanType span type, available values are row-column\r\n\t\t * @param {boolean} fromElement, instead of original value, get the assigned span value from HTMLElement itself\r\n\t\t * @param fromElement\r\n\t\t * @throws An error will be given for invalid span type\r\n\t\t */\r\n\t\tthis.getSpan = (spanType, fromElement = false) => {\r\n\t\t\tconst spanVal = fromElement ? this.getElement().getAttribute(`${spanType}Span`) : this.spans[spanType];\r\n\t\t\tif (spanVal) {\r\n\t\t\t\treturn spanVal;\r\n\t\t\t}\r\n\t\t\tthrow new Error(`no span value found with the given type of [${spanType}]`);\r\n\t\t};\r\n\r\n\t\tthis.getRemainingSpans = (spanType) => {\r\n\t\t\treturn this.remainingSpans[spanType];\r\n\t\t};\r\n\r\n\t\tthis.setRemainingSpans = (spanType, value) => {\r\n\t\t\tthis.remainingSpans[spanType] = value;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get cell element.\r\n\t\t *\r\n\t\t * @return {HTMLElement} cell element\r\n\t\t */\r\n\t\tthis.getElement = () => {\r\n\t\t\treturn this.element;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Create a cell element.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @return {HTMLTableDataCellElement}\r\n\t\t */\r\n\t\tthis.createCellElement = () => {\r\n\t\t\treturn document.createElement('td');\r\n\t\t};\r\n\r\n\t\t// create a new cell element if no cellElement argument is given with constructor function\r\n\t\tif (!cellElement) {\r\n\t\t\tthis.element = this.createCellElement();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Add attribute to cell element.\r\n\t\t *\r\n\t\t * This function have the ability to add/remove attributes from cell element.\r\n\t\t * All attributes modified with this function will be cached with their before value for an easy reset on demand.\r\n\t\t *\r\n\t\t * @param {string} attributeKey attribute name in camelCase format, for sub-keys, use dot object notation\r\n\t\t * @param {any} attributeValue attribute value\r\n\t\t * @param {boolean} [append=false] append the value or replace it\r\n\t\t * @param {string} [glue=,] glue to join attribute value if append option is enabled\r\n\t\t */\r\n\t\tthis.setAttribute = (attributeKey, attributeValue, append = false, glue = ',') => {\r\n\t\t\tlet defaultVal = this.getElement()[attributeKey];\r\n\r\n\t\t\t// if attribute value is a function or an object, it means we pulled a whole declaration instead of only inline attribute values, in that case, use getAttribute to get only inline values related to that attribute\r\n\t\t\tif (typeof defaultVal === 'function' || typeof defaultVal === 'object') {\r\n\t\t\t\tdefaultVal = this.getElement().getAttribute(attributeKey);\r\n\t\t\t}\r\n\r\n\t\t\t// if there is already a default value defined, use that instead\r\n\t\t\tif (this.modifications[attributeKey]) {\r\n\t\t\t\tdefaultVal = this.modifications[attributeKey].default;\r\n\t\t\t}\r\n\r\n\t\t\tlet currentVal = defaultVal;\r\n\r\n\t\t\t// join attributes\r\n\t\t\tif (append) {\r\n\t\t\t\tcurrentVal += `${currentVal}${glue}${attributeValue}`;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentVal = attributeValue;\r\n\t\t\t}\r\n\r\n\t\t\tthis.modifications[attributeKey] = { value: currentVal, default: defaultVal };\r\n\r\n\t\t\tthis.getElement()[attributeKey] = currentVal;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Set row/colspan for cell.\r\n\t\t *\r\n\t\t * @param {string} spanType span type\r\n\t\t * @param {number} value value to assign to span\r\n\t\t * @return {boolean} if any space left to render the element\r\n\t\t */\r\n\t\tthis.setSpan = (spanType, value) => {\r\n\t\t\t// working on main cell\r\n\t\t\tif (!this.isReference()) {\r\n\t\t\t\tconst valueToApply = this.getSpan(spanType) - value < 0 ? this.getSpan(spanType) : value;\r\n\r\n\t\t\t\tthis.setAttribute(`${spanType}Span`, valueToApply);\r\n\r\n\t\t\t\t// calculate remaining cells amount to merge in this span type\r\n\t\t\t\tthis.setRemainingSpans(spanType, this.getSpan(spanType) - valueToApply);\r\n\r\n\t\t\t\t// set visibility of connected merge group cells to false to not render them since we added necessary span values to main cell which will leak into their position\r\n\t\t\t\tfor (let mc = 0; mc < valueToApply - 1; mc += 1) {\r\n\t\t\t\t\tif (this.mergedCells[spanType] && this.mergedCells[spanType][mc]) {\r\n\t\t\t\t\t\tthis.mergedCells[spanType][mc].setMergedRenderStatus(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// working on reference\r\n\r\n\t\t\tif (!this.getMergedRenderStatus()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst remainingVal = this.referenceObject.getRemainingSpans(spanType);\r\n\r\n\t\t\t// no space left to put cell\r\n\t\t\tif (remainingVal === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst valueToApply = remainingVal - value < 0 ? remainingVal : value;\r\n\r\n\t\t\tconst remainingParentSpans = remainingVal - valueToApply;\r\n\t\t\tthis.referenceObject.setRemainingSpans(spanType, remainingParentSpans);\r\n\r\n\t\t\tthis.setAttribute(`${spanType}Span`, valueToApply);\r\n\r\n\t\t\t// change render status of remaining connected merge cells\r\n\t\t\tif (remainingParentSpans !== 0) {\r\n\t\t\t\tconst totalConnectedCells = this.referenceObject.mergedCells[spanType].length;\r\n\t\t\t\tconst startIndex = totalConnectedCells - remainingVal + 1;\r\n\t\t\t\tconst endIndex = startIndex + valueToApply - 1;\r\n\r\n\t\t\t\tfor (let mc = startIndex; mc < endIndex; mc += 1) {\r\n\t\t\t\t\tthis.mergedCells[spanType][mc].setMergedRenderStatus(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Reset a modified attribute to its default value\r\n\t\t *\r\n\t\t * @param {string} attributeKey attribute name\r\n\t\t */\r\n\t\tthis.resetAttribute = (attributeKey) => {\r\n\t\t\tif (this.modifications[attributeKey]) {\r\n\t\t\t\tthis.getElement()[attributeKey] = this.modifications[attributeKey].default;\r\n\t\t\t\tthis.modifications[attributeKey] = undefined;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Reset all modified attributes of cell element to their default values.\r\n\t\t */\r\n\t\tthis.resetAllAttributes = () => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tObject.keys(this.modifications).map((k) => {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.modifications, k)) {\r\n\t\t\t\t\tthis.resetAttribute(k);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tgetElement: this.getElement,\r\n\t\t\tel: this.element,\r\n\t\t\tsetAttribute: this.setAttribute,\r\n\t\t\tresetAllAttributes: this.resetAllAttributes,\r\n\t\t\tgetSpan: this.getSpan,\r\n\t\t\tsetSpan: this.setSpan,\r\n\t\t\tgetRemainingSpans: this.getRemainingSpans,\r\n\t\t\tsetRemainingSpans: this.setRemainingSpans,\r\n\t\t\tisReference: this.isReference,\r\n\t\t\taddToMergedCells: this.addToMergedCells,\r\n\t\t\tmergedCells: this.mergedCells,\r\n\t\t\tsetMergedRenderStatus: this.setMergedRenderStatus,\r\n\t\t\tgetMergedRenderStatus: this.getMergedRenderStatus,\r\n\t\t};\r\n\t}\r\n\r\n\tCellObject.spanTypes = { row: 'row', column: 'col' };\r\n\r\n\t/**\r\n\t * Object implementation for table element operations.\r\n\t *\r\n\t * @param {HTMLElement} tableEl table element\r\n\t * @return {Object} instance\r\n\t * @class\r\n\t */\r\n\tfunction TableObject(tableEl) {\r\n\t\t/**\r\n\t\t * Table element.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @type {HTMLElement}\r\n\t\t */\r\n\t\tthis.tableElement = tableEl;\r\n\r\n\t\t/**\r\n\t\t * Parsed table object.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tthis.parsedTable = [];\r\n\r\n\t\t/**\r\n\t\t * An array of created table rows elements that are id'd according to their index in array.\r\n\t\t *\r\n\t\t * @type {[HTMLElement]}\r\n\t\t */\r\n\t\tthis.rowCache = [];\r\n\r\n\t\t/**\r\n\t\t * Original table elements minus the cells.\r\n\t\t *\r\n\t\t * @type {{rows: []}}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.originals = { rows: [] };\r\n\r\n\t\t/**\r\n\t\t * Row colors of original table.\r\n\t\t *\r\n\t\t * @type {{even: string, header: string, odd: string}}\r\n\t\t */\r\n\t\tthis.rowColors = {\r\n\t\t\theader: null,\r\n\t\t\teven: null,\r\n\t\t\todd: null,\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add cell to parsed array.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @param {number} r row id\r\n\t\t * @param {number} c column id\r\n\t\t * @param {CellObject} cellObject cell object to add to parsed array\r\n\t\t */\r\n\t\tthis.addToParsed = (r, c, cellObject) => {\r\n\t\t\tif (!this.parsedTable[r]) {\r\n\t\t\t\tthis.parsedTable[r] = [];\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedTable[r][c] = cellObject;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Assign table cells into row and column numbers.\r\n\t\t *\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.parseTable = () => {\r\n\t\t\tconst rows = Array.from(this.tableElement.querySelectorAll('tr'));\r\n\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\trows.map((r, ri) => {\r\n\t\t\t\t// cache original rows for future use\r\n\t\t\t\tthis.originals.rows.push(r);\r\n\r\n\t\t\t\tconst cells = Array.from(r.querySelectorAll('td'));\r\n\r\n\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\tcells.map((c, ci) => {\r\n\t\t\t\t\tconst currentCellObject = new CellObject(c);\r\n\t\t\t\t\tthis.addToParsed(ri, ci, currentCellObject);\r\n\r\n\t\t\t\t\tconst spanRow = currentCellObject.getSpan(CellObject.spanTypes.row);\r\n\t\t\t\t\tconst spanCol = currentCellObject.getSpan(CellObject.spanTypes.column);\r\n\r\n\t\t\t\t\tif (spanRow > 1) {\r\n\t\t\t\t\t\tfor (let sr = 1; sr < spanRow; sr += 1) {\r\n\t\t\t\t\t\t\tconst referenceCell = new CellObject(c, currentCellObject);\r\n\t\t\t\t\t\t\tcurrentCellObject.addToMergedCells('row', referenceCell);\r\n\t\t\t\t\t\t\tthis.addToParsed(ri + sr, ci, referenceCell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (spanCol > 1) {\r\n\t\t\t\t\t\tfor (let sc = 1; sc < spanCol; sc += 1) {\r\n\t\t\t\t\t\t\tconst referenceCell = new CellObject(c, currentCellObject);\r\n\t\t\t\t\t\t\tcurrentCellObject.addToMergedCells('column', referenceCell);\r\n\t\t\t\t\t\t\tthis.addToParsed(ri, ci + sc, referenceCell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.parseRowColors(rows);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Parse row colors of original table for futures uses.\r\n\t\t *\r\n\t\t * @param {[HTMLElement]} rows html row elements\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis.parseRowColors = (rows) => {\r\n\t\t\tif (!rows || rows.length <= 0) {\r\n\t\t\t\tlogToConsole('no rows are found to parse their colors', 'error');\r\n\t\t\t}\r\n\r\n\t\t\t// get row colors if they are defined as datasets on table element\r\n\t\t\tconst headerDatasetColor = this.tableElement.dataset.wptbHeaderBackgroundColor;\r\n\t\t\tconst evenRowDatasetColor = this.tableElement.dataset.wptbEvenRowBackgroundColor;\r\n\t\t\tconst oddRowDatasetColor = this.tableElement.dataset.wptbOddRowBackgroundColor;\r\n\r\n\t\t\t// header row color\r\n\t\t\tthis.rowColors.header =\r\n\t\t\t\t// eslint-disable-next-line no-nested-ternary\r\n\t\t\t\theaderDatasetColor !== undefined\r\n\t\t\t\t\t? headerDatasetColor\r\n\t\t\t\t\t: rows[0].style.backgroundColor === ''\r\n\t\t\t\t\t? null\r\n\t\t\t\t\t: rows[0].style.backgroundColor;\r\n\r\n\t\t\t// calculate needed number of rows to get even and odd row background colors\r\n\t\t\t// eslint-disable-next-line no-nested-ternary\r\n\t\t\tconst rowsNeeded = rows.length / 3 >= 1 ? 0 : rows.length === 1 ? 2 : (rows.length - 1) % 2;\r\n\r\n\t\t\t// create additional rows and add them to table to get their row background colors since table row count may be lower to get even/odd rows\r\n\t\t\tfor (let rn = 0; rn < rowsNeeded; rn += 1) {\r\n\t\t\t\tconst tempRow = document.createElement('tr');\r\n\r\n\t\t\t\tthis.tableElement.querySelector('tbody').appendChild(tempRow);\r\n\t\t\t\trows.push(tempRow);\r\n\t\t\t}\r\n\r\n\t\t\t// even & odd row colors\r\n\t\t\t// dataset colors have priority over colors gathered from computed row styles\r\n\t\t\tthis.rowColors.even = evenRowDatasetColor || getComputedStyle(rows[1]).backgroundColor;\r\n\t\t\tthis.rowColors.odd = evenRowDatasetColor ? oddRowDatasetColor : getComputedStyle(rows[2]).backgroundColor;\r\n\r\n\t\t\t// remove created rows from DOM\r\n\t\t\tfor (let r = 0; r < rowsNeeded; r += 1) {\r\n\t\t\t\trows[rows.length - (r + 1)].remove();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add a row to the table.\r\n\t\t *\r\n\t\t * @param {Array} classList an array of class names to be added to row\r\n\t\t * @param {boolean} fromOriginals use rows from original table instead of creating a new one\r\n\t\t * @param {number} originalIndex original row index\r\n\t\t */\r\n\t\tthis.addRow = (classList, fromOriginals = false, originalIndex = 0) => {\r\n\t\t\tif (!Array.isArray(classList)) {\r\n\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\tclassList = [classList];\r\n\t\t\t}\r\n\r\n\t\t\tconst tableBody = this.tableElement.querySelector('tbody');\r\n\t\t\tlet tempRow;\r\n\r\n\t\t\tif (!fromOriginals) {\r\n\t\t\t\tconst range = document.createRange();\r\n\t\t\t\trange.setStart(tableBody, 0);\r\n\t\t\t\t// eslint-disable-next-line prefer-destructuring\r\n\t\t\t\ttempRow = range.createContextualFragment(`<tr class=\"${classList.join(' ')}\"></tr>`).childNodes[0];\r\n\t\t\t} else {\r\n\t\t\t\ttempRow = this.originals.rows[originalIndex];\r\n\t\t\t}\r\n\r\n\t\t\t// add row to table body\r\n\t\t\ttableBody.appendChild(tempRow);\r\n\r\n\t\t\t// cache row for future use\r\n\t\t\tthis.rowCache.push(tempRow);\r\n\r\n\t\t\treturn { el: tempRow, id: this.rowCache.length - 1 };\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Clear the contents of table element.\r\n\t\t */\r\n\t\tthis.clearTable = () => {\r\n\t\t\t// clear row cache\r\n\t\t\tthis.rowCache = [];\r\n\r\n\t\t\t// clear children of `tbody` element\r\n\t\t\tthis.tableElement.querySelector('tbody').innerHTML = '';\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get row element from cache.\r\n\t\t *\r\n\t\t * @param {number} id row id\r\n\t\t * @return {null|HTMLElement} row element if present or null if not\r\n\t\t */\r\n\t\tthis.getRow = (id) => {\r\n\t\t\tif (this.rowCache[id]) {\r\n\t\t\t\treturn this.rowCache[id];\r\n\t\t\t}\r\n\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tlogToConsole(`no row with id [${id}] found in the cache.`, 'warn');\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get maximum number of rows available at table.\r\n\t\t *\r\n\t\t * @return {number} maximum amount of rows\r\n\t\t */\r\n\t\tthis.maxRows = () => {\r\n\t\t\treturn this.parsedTable.length;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get the number of maximum available column count in the table.\r\n\t\t *\r\n\t\t * @return {number} maximum available column count\r\n\t\t */\r\n\t\tthis.maxColumns = () => {\r\n\t\t\treturn this.parsedTable.reduce((p, c) => {\r\n\t\t\t\tif (c.length > p) {\r\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tp = c.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn p;\r\n\t\t\t}, 0);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get the table cell at specified row-column location.\r\n\t\t *\r\n\t\t * As in arrays, row and column numbering starts from number 0.\r\n\t\t *\r\n\t\t * @param {number} r row number\r\n\t\t * @param {number} c column number\r\n\t\t * @param {boolean} returnObject return object instead of HTMLElement\r\n\t\t * @return {HTMLElement | null | CellObject} element if address is possible, null if not\r\n\t\t */\r\n\t\tthis.getCell = (r, c, returnObject = false) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (this.parsedTable[r][c]) {\r\n\t\t\t\t\tif (returnObject) {\r\n\t\t\t\t\t\treturn this.parsedTable[r][c];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.parsedTable[r][c].el;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tlogToConsole(`no cell found at the given address of [${r}-${c}]`, 'warn');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tlogToConsole(`no cell found at the given address of [${r}-${c}]`, 'warn');\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get cells at a given row.\r\n\t\t *\r\n\t\t * @param {number} rowId row id\r\n\t\t * @param {boolean} returnObj return an array of CellObject instead\r\n\t\t * @return {Array} cells in row\r\n\t\t */\r\n\t\tthis.getCellsAtRow = (rowId, returnObj = false) => {\r\n\t\t\tconst cells = [];\r\n\t\t\tfor (let c = 0; c < this.maxColumns(); c += 1) {\r\n\t\t\t\tconst tempCell = this.getCell(rowId, c, returnObj);\r\n\t\t\t\tif (tempCell) {\r\n\t\t\t\t\tcells.push(tempCell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cells;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Append the cell with given ids to a cached row\r\n\t\t *\r\n\t\t * @param {number} cellRowId cell row id\r\n\t\t * @param {number} cellColumnId cell column id\r\n\t\t * @param {number} rowId id of row in row cache\r\n\t\t */\r\n\t\tthis.appendToRow = (cellRowId, cellColumnId, rowId) => {\r\n\t\t\tconst cachedRow = this.getRow(rowId);\r\n\t\t\tconst cell = this.getCell(cellRowId, cellColumnId, true);\r\n\r\n\t\t\tif (cell && cachedRow) {\r\n\t\t\t\tcachedRow.appendChild(cell.getElement());\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Append html element to a cached row.\r\n\t\t *\r\n\t\t * @param {HTMLElement} el element\r\n\t\t * @param {number} rowId if of row in row cache\r\n\t\t */\r\n\t\tthis.appendElementToRow = (el, rowId) => {\r\n\t\t\tconst cachedRow = this.getRow(rowId);\r\n\r\n\t\t\tif (el && cachedRow) {\r\n\t\t\t\tcachedRow.appendChild(el);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add cell object to a cached row.\r\n\t\t *\r\n\t\t * @param {CellObject} cellObj cell object\r\n\t\t * @param {number} rowId row id\r\n\t\t */\r\n\t\tthis.appendObjectToRow = (cellObj, rowId) => {\r\n\t\t\tconst cachedRow = this.getRow(rowId);\r\n\t\t\tif (cellObj && cachedRow) {\r\n\t\t\t\tcachedRow.appendChild(cellObj.getElement());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.parseTable();\r\n\r\n\t\treturn {\r\n\t\t\tmaxRows: this.maxRows,\r\n\t\t\tmaxColumns: this.maxColumns,\r\n\t\t\taddRow: this.addRow,\r\n\t\t\tclearTable: this.clearTable,\r\n\t\t\tgetCell: this.getCell,\r\n\t\t\tappendToRow: this.appendToRow,\r\n\t\t\tappendElementToRow: this.appendElementToRow,\r\n\t\t\tappendObjectToRow: this.appendObjectToRow,\r\n\t\t\tgetCellsAtRow: this.getCellsAtRow,\r\n\t\t\tel: this.tableElement,\r\n\t\t\trowColors: this.rowColors,\r\n\t\t};\r\n\t}\r\n\r\n\t// default options for responsive class\r\n\tconst responsiveClassDefaultOptions = {\r\n\t\tquery: '.wptb-preview-table',\r\n\t\tdefaultClasses: ['wptb-plugin-responsive-base'],\r\n\t\tbindToResize: false,\r\n\t};\r\n\r\n\t/**\r\n\t * Class for handling operations related to responsive functionalities of tables.\r\n\t *\r\n\t * @class\r\n\t * @param {Object} options options object\r\n\t */\r\n\tfunction ResponsiveFront(options = {}) {\r\n\t\t// merge default options with user sent options\r\n\t\t// this.options = { ...responsiveClassDefaultOptions, ...options };\r\n\t\tthis.options = { ...responsiveClassDefaultOptions, ...options };\r\n\r\n\t\tthis.elements = Array.from(document.querySelectorAll(this.options.query));\r\n\r\n\t\tthis.elementObjects = this.elements.map((e) => {\r\n\t\t\treturn {\r\n\t\t\t\tel: e,\r\n\t\t\t\ttableObject: new TableObject(e),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Bind rebuilding of tables to window resize event.\r\n\t\t */\r\n\t\tthis.bindRebuildToResize = () => {\r\n\t\t\twindow.addEventListener('resize', () => {\r\n\t\t\t\tthis.rebuildTables();\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get responsive directives of table element.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t * @return {Object | null} JSON representation of the directive element, if not available, null will be returned\r\n\t\t */\r\n\t\tthis.getDirective = (el) => {\r\n\t\t\tconst directiveString = el.dataset.wptbResponsiveDirectives;\r\n\r\n\t\t\tif (!directiveString) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn JSON.parse(atob(directiveString));\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Add default classes to rebuilt tables.\r\n\t\t *\r\n\t\t * This classes are added to lay out a base style for the responsive table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t */\r\n\t\tthis.addDefaultClasses = (el) => {\r\n\t\t\tel.classList.add(this.options.defaultClasses);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Remove default classes from target table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t */\r\n\t\tthis.removeDefaultClasses = (el) => {\r\n\t\t\tel.classList.remove(this.options.defaultClasses);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild table in auto mode.\r\n\t\t *\r\n\t\t * Main characteristic of auto mode is table is rebuilt by stacking rows/columns on top of each other, leaving minimal effort from user to create a responsive table at breakpoints.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableEl table element\r\n\t\t * @param {string} sizeRange range id for current screen size\r\n\t\t * @param {Object} autoOption mode options\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t */\r\n\t\tthis.autoBuild = (tableEl, sizeRange, autoOption, tableObj) => {\r\n\t\t\t// base options\r\n\t\t\tconst direction = autoOption.cellStackDirection[sizeRange];\r\n\t\t\t// eslint-disable-next-line prefer-destructuring\r\n\t\t\tconst topRowAsHeader = autoOption.topRowAsHeader[sizeRange];\r\n\t\t\tconst cellsPerRow = autoOption.cellsPerRow[sizeRange];\r\n\r\n\t\t\t// new options\r\n\t\t\tconst staticTopRow = autoOption.staticTopRow ? autoOption.staticTopRow[sizeRange] : false;\r\n\r\n\t\t\ttableObj.clearTable();\r\n\r\n\t\t\tif (sizeRange === 'desktop') {\r\n\t\t\t\tthis.buildDefault(tableObj);\r\n\t\t\t\tthis.removeDefaultClasses(tableEl);\r\n\t\t\t} else {\r\n\t\t\t\tthis.autoDirectionBuild(tableObj, direction, topRowAsHeader, staticTopRow, cellsPerRow);\r\n\t\t\t\tthis.addDefaultClasses(tableEl);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild table with a direction to read cells.\r\n\t\t *\r\n\t\t * Direction in question in here is either by row or column:\r\n\t\t * * row: cells will be read row by row, in each row starting from the first column\r\n\t\t * * column: cells will be read column by column, in each column starting from the first row of the table\r\n\t\t *\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t * @param {string} direction direction to read cells, possible options [row, column]\r\n\t\t * @param {boolean} topRowAsHeader use top row as header\r\n\t\t * @param {boolean} staticTopRow use top row as static\r\n\t\t * @param {number} cellsPerRow cells per row\r\n\t\t */\r\n\t\tthis.autoDirectionBuild = (\r\n\t\t\ttableObj,\r\n\t\t\tdirection,\r\n\t\t\ttopRowAsHeader = false,\r\n\t\t\tstaticTopRow = false,\r\n\t\t\tcellsPerRow = 1\r\n\t\t) => {\r\n\t\t\tconst rows = tableObj.maxRows();\r\n\t\t\tconst columns = tableObj.maxColumns();\r\n\t\t\tconst isRowStacked = direction === 'row';\r\n\r\n\t\t\t// build table with top row as header\r\n\t\t\tif (topRowAsHeader) {\r\n\t\t\t\tthis.headerBuild(tableObj, direction, cellsPerRow);\r\n\t\t\t} else {\r\n\t\t\t\t// cell stack direction is selected as row\r\n\t\t\t\t// for future new functionality additions, keep different cell stack direction logic separate instead of generalizing the inner logic\r\n\t\t\t\t// eslint-disable-next-line no-lonely-if\r\n\t\t\t\tif (isRowStacked) {\r\n\t\t\t\t\tconst allCellsByRow = [];\r\n\t\t\t\t\tlet rowStartIndex = 0;\r\n\r\n\t\t\t\t\t// static top row option is enabled\r\n\t\t\t\t\tif (staticTopRow) {\r\n\t\t\t\t\t\tconst topCells = tableObj.getCellsAtRow(0, true);\r\n\r\n\t\t\t\t\t\tconst baseCells = topCells.filter((c) => !c.isReference());\r\n\r\n\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\tbaseCells.map((b) => {\r\n\t\t\t\t\t\t\trowStartIndex += 1;\r\n\t\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\t\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors.header;\r\n\r\n\t\t\t\t\t\t\ttableObj.appendObjectToRow(b, rowObj.id);\r\n\r\n\t\t\t\t\t\t\tb.setAttribute('colSpan', cellsPerRow);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// get cells by reading row by row\r\n\t\t\t\t\tfor (let r = rowStartIndex; r < rows; r += 1) {\r\n\t\t\t\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\t\t\t\ttableObj.getCellsAtRow(r, true).forEach((c) => {\r\n\t\t\t\t\t\t\t// only use non reference cells to avoid duplication for non top row as header tables\r\n\t\t\t\t\t\t\tif (!c.isReference()) {\r\n\t\t\t\t\t\t\t\tallCellsByRow.push(c);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst cellCount = allCellsByRow.length;\r\n\r\n\t\t\t\t\tfor (let c = 0, r = 0; c < cellCount; c += cellsPerRow, r += 1) {\r\n\t\t\t\t\t\t// const rowId = tableObj.addRow('wptb-row').id;\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t// preserve original row colors for even and odd rows\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors[r % 2 === 0 ? 'odd' : 'even'];\r\n\r\n\t\t\t\t\t\t// place cells by 'cells by row' option value\r\n\t\t\t\t\t\tfor (let pR = 0; pR < cellsPerRow; pR += 1) {\r\n\t\t\t\t\t\t\tconst tempCell = allCellsByRow[c + pR];\r\n\r\n\t\t\t\t\t\t\tif (tempCell) {\r\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowObj.id);\r\n\r\n\t\t\t\t\t\t\t\ttempCell.resetAllAttributes();\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('style', 'width: 100% !important', true, ';');\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('colSpan', 1);\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('rowSpan', 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// cell stack direction is selected as column\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst allCellsByCol = [];\r\n\t\t\t\t\tlet rowStartIndex = 0;\r\n\r\n\t\t\t\t\t// static top row option is enabled\r\n\t\t\t\t\tif (staticTopRow) {\r\n\t\t\t\t\t\tconst topCells = tableObj.getCellsAtRow(0, true);\r\n\r\n\t\t\t\t\t\tconst baseCells = topCells.filter((t) => !t.isReference());\r\n\r\n\t\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\t\tbaseCells.map((b) => {\r\n\t\t\t\t\t\t\trowStartIndex += 1;\r\n\t\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\t\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors.header;\r\n\r\n\t\t\t\t\t\t\ttableObj.appendObjectToRow(b, rowObj.id);\r\n\r\n\t\t\t\t\t\t\tb.setAttribute('colSpan', cellsPerRow);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// read all cells column by column\r\n\t\t\t\t\tfor (let c = 0; c < columns; c += 1) {\r\n\t\t\t\t\t\tfor (let r = rowStartIndex; r < rows; r += 1) {\r\n\t\t\t\t\t\t\tconst tCell = tableObj.getCell(r, c, true);\r\n\t\t\t\t\t\t\t// only use non reference cells to avoid duplication for non top row as header tables\r\n\t\t\t\t\t\t\tif (tCell && !tCell.isReference()) {\r\n\t\t\t\t\t\t\t\tallCellsByCol.push(tCell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst cellCount = allCellsByCol.length;\r\n\r\n\t\t\t\t\tfor (let c = 0, r = 0; c < cellCount; c += cellsPerRow, r += 1) {\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t// preserve original row colors for even and odd rows\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors[r % 2 === 0 ? 'odd' : 'even'];\r\n\r\n\t\t\t\t\t\tfor (let cR = 0; cR < cellsPerRow; cR += 1) {\r\n\t\t\t\t\t\t\tconst tempCell = allCellsByCol[c + cR];\r\n\r\n\t\t\t\t\t\t\tif (tempCell) {\r\n\t\t\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowObj.id);\r\n\r\n\t\t\t\t\t\t\t\ttempCell.resetAllAttributes();\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('style', 'width: 100% !important', true, ';');\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('colSpan', 1);\r\n\t\t\t\t\t\t\t\ttempCell.setAttribute('rowSpan', 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Build table with top row assigned as header.\r\n\t\t *\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t * @param {string} direction cell stack direction, possible options are [row, column]\r\n\t\t * @param {number} itemsPerHeader items bound to each header element\r\n\t\t */\r\n\t\tthis.headerBuild = (tableObj, direction, itemsPerHeader = 1) => {\r\n\t\t\t// cells at header\r\n\t\t\t// applying header row color to cells\r\n\t\t\tconst headerCells = tableObj.getCellsAtRow(0, true).map((h) => {\r\n\t\t\t\th.setAttribute('style', `background-color: ${tableObj.rowColors.header}`, true, ';');\r\n\t\t\t\treturn h;\r\n\t\t\t});\r\n\r\n\t\t\tconst stackedAsColumn = direction === 'column';\r\n\r\n\t\t\t// row count\r\n\t\t\tconst rows = tableObj.maxRows();\r\n\t\t\t// column count\r\n\t\t\tconst columns = tableObj.maxColumns();\r\n\r\n\t\t\tconst rowBorderStyle = '3px solid gray';\r\n\r\n\t\t\t// stack direction is column\r\n\t\t\tif (stackedAsColumn) {\r\n\t\t\t\t/**\r\n\t\t\t\t * Add header cells as new row to table.\r\n\t\t\t\t *\r\n\t\t\t\t * @param {boolean} addBorder add top border to header row\r\n\t\t\t\t */\r\n\t\t\t\t// eslint-disable-next-line no-inner-declarations\r\n\t\t\t\tfunction addHeaderCells(addBorder = false) {\r\n\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\tif (addBorder) {\r\n\t\t\t\t\t\trowObj.el.style.borderTop = rowBorderStyle;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\t\t\theaderCells.map((h) => {\r\n\t\t\t\t\t\t// clone header cell to reuse it for multiple rows\r\n\t\t\t\t\t\ttableObj.appendElementToRow(h.el.cloneNode(true), rowObj.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// count of header rows that will be created\r\n\t\t\t\tconst headerCount = Math.ceil((rows - 1) / itemsPerHeader);\r\n\t\t\t\t// row index on original table\r\n\t\t\t\tlet currentOriginalRow = 1;\r\n\t\t\t\tfor (let r = 0; r < headerCount; r += 1) {\r\n\t\t\t\t\t// create header row and add to table\r\n\t\t\t\t\taddHeaderCells(r > 0);\r\n\t\t\t\t\tfor (let c = 0; c < itemsPerHeader; c += 1) {\r\n\t\t\t\t\t\t// break iteration when current row surpasses original row amount\r\n\t\t\t\t\t\tif (currentOriginalRow >= rows) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t// apply row color relative to current header row\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = tableObj.rowColors[c % 2 === 0 ? 'even' : 'odd'];\r\n\t\t\t\t\t\tfor (let cc = 0; cc < columns; cc += 1) {\r\n\t\t\t\t\t\t\tconst currentCell = tableObj.getCell(currentOriginalRow, cc, true);\r\n\r\n\t\t\t\t\t\t\tif (currentCell) {\r\n\t\t\t\t\t\t\t\tcurrentCell.resetAllAttributes();\r\n\r\n\t\t\t\t\t\t\t\t// status to decide whether render cell or not\r\n\t\t\t\t\t\t\t\tlet cellAddStatus = true;\r\n\r\n\t\t\t\t\t\t\t\tconst rowSpan = currentCell.getSpan(CellObject.spanTypes.row);\r\n\t\t\t\t\t\t\t\tconst colSpan = currentCell.getSpan(CellObject.spanTypes.column);\r\n\r\n\t\t\t\t\t\t\t\tif (rowSpan > 1) {\r\n\t\t\t\t\t\t\t\t\t// items remaining in current header\r\n\t\t\t\t\t\t\t\t\tconst remainingItems = itemsPerHeader - c;\r\n\r\n\t\t\t\t\t\t\t\t\t// calculate whether to apply full rowspan value or remaining item value depending on the current position of the cell\r\n\t\t\t\t\t\t\t\t\tconst currentRowSpan = Math.min(rowSpan, remainingItems);\r\n\r\n\t\t\t\t\t\t\t\t\tcellAddStatus = currentCell.setSpan(CellObject.spanTypes.row, currentRowSpan);\r\n\t\t\t\t\t\t\t\t\t// reset render status of cell to visible for future use\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setMergedRenderStatus(true);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (cellAddStatus) {\r\n\t\t\t\t\t\t\t\t\ttableObj.appendObjectToRow(currentCell, rowObj.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentOriginalRow += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// stack direction is row\r\n\t\t\t\t// number of headers that will be created\r\n\t\t\t\tconst headerCount = Math.ceil((rows - 1) / itemsPerHeader);\r\n\r\n\t\t\t\tlet currentOriginalRow = 1;\r\n\r\n\t\t\t\tfor (let hc = 0; hc < headerCount; hc += 1) {\r\n\t\t\t\t\tfor (let c = 0; c < columns; c += 1) {\r\n\t\t\t\t\t\tconst rowObj = tableObj.addRow('wptb-row');\r\n\r\n\t\t\t\t\t\t// clear out row color to override row color with cell colors\r\n\t\t\t\t\t\trowObj.el.style.backgroundColor = 'none';\r\n\r\n\t\t\t\t\t\tif (hc > 0 && c === 0) {\r\n\t\t\t\t\t\t\trowObj.el.style.borderTop = rowBorderStyle;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst clonedHeaderCell = headerCells[c].el.cloneNode(true);\r\n\r\n\t\t\t\t\t\t// apply header row color to header cell\r\n\t\t\t\t\t\tclonedHeaderCell.style.backgroundColor = `${tableObj.rowColors.header} !important`;\r\n\r\n\t\t\t\t\t\ttableObj.appendElementToRow(clonedHeaderCell, rowObj.id);\r\n\r\n\t\t\t\t\t\tfor (let r = 0; r < itemsPerHeader; r += 1) {\r\n\t\t\t\t\t\t\tif (currentOriginalRow + r >= rows) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// const currentCell = tableObj.appendToRow(currentOriginalRow + r, c, rowObj.id);\r\n\t\t\t\t\t\t\tconst currentCell = tableObj.getCell(currentOriginalRow + r, c, true);\r\n\r\n\t\t\t\t\t\t\tif (currentCell) {\r\n\t\t\t\t\t\t\t\tcurrentCell.resetAllAttributes();\r\n\r\n\t\t\t\t\t\t\t\tlet cellAddStatus = true;\r\n\r\n\t\t\t\t\t\t\t\tconst rowSpan = currentCell.getSpan(CellObject.spanTypes.row);\r\n\t\t\t\t\t\t\t\tconst colSpan = currentCell.getSpan(CellObject.spanTypes.column);\r\n\r\n\t\t\t\t\t\t\t\tif (rowSpan > 1) {\r\n\t\t\t\t\t\t\t\t\tconst remainingItems = itemsPerHeader - r;\r\n\r\n\t\t\t\t\t\t\t\t\tconst currentRowSpan = Math.min(rowSpan, remainingItems);\r\n\r\n\t\t\t\t\t\t\t\t\tcellAddStatus = currentCell.setSpan(CellObject.spanTypes.row, currentRowSpan);\r\n\r\n\t\t\t\t\t\t\t\t\tconst rS = currentCell.el.getAttribute('rowSpan');\r\n\t\t\t\t\t\t\t\t\tconst cS = currentCell.el.getAttribute('colSpan');\r\n\r\n\t\t\t\t\t\t\t\t\t// switch span values\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute('rowSpan', cS);\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute('colSpan', rS);\r\n\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setMergedRenderStatus(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (cellAddStatus) {\r\n\t\t\t\t\t\t\t\t\t// color index for the cell, this will be used to reflect table row colors to cells. currently, grouping up the same items with the same color code\r\n\t\t\t\t\t\t\t\t\tlet colorIndex = (currentOriginalRow + r + hc) % 2 === 0 ? 'even' : 'odd';\r\n\r\n\t\t\t\t\t\t\t\t\t// for better visuals and distinction for tables with 1 item per header, using this calculation for color index\r\n\t\t\t\t\t\t\t\t\tif (itemsPerHeader === 1) {\r\n\t\t\t\t\t\t\t\t\t\tcolorIndex = currentOriginalRow % 2 === 0 ? 'even' : 'odd';\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tcurrentCell.setAttribute(\r\n\t\t\t\t\t\t\t\t\t\t'style',\r\n\t\t\t\t\t\t\t\t\t\t`background-color: ${tableObj.rowColors[colorIndex]}`,\r\n\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t';'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\ttableObj.appendObjectToRow(currentCell, rowObj.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentOriginalRow += itemsPerHeader;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Build table in its default form.\r\n\t\t *\r\n\t\t * Default form of table is the layout it has in desktop breakpoint.\r\n\t\t *\r\n\t\t * @param {TableObject} tableObj table object\r\n\t\t */\r\n\t\tthis.buildDefault = (tableObj) => {\r\n\t\t\tconst rows = tableObj.maxRows();\r\n\t\t\tconst columns = tableObj.maxColumns();\r\n\r\n\t\t\tfor (let r = 0; r < rows; r += 1) {\r\n\t\t\t\tconst rowId = tableObj.addRow('', true, r).id;\r\n\t\t\t\tfor (let c = 0; c < columns; c += 1) {\r\n\t\t\t\t\tconst tempCell = tableObj.getCell(r, c, true);\r\n\r\n\t\t\t\t\t// only render cell if a valid cell is found and it is not a reference\r\n\t\t\t\t\tif (tempCell && !tempCell.isReference()) {\r\n\t\t\t\t\t\t// reset all modified attributes of cell to their default values\r\n\t\t\t\t\t\ttempCell.resetAllAttributes();\r\n\t\t\t\t\t\ttableObj.appendElementToRow(tempCell.getElement(), rowId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculate range id for given size value.\r\n\t\t *\r\n\t\t * @param {number} val value\r\n\t\t * @param {Object} stops an object containing stop ids as keys and respective sizes as values\r\n\t\t * @return {string} range id\r\n\t\t */\r\n\t\tthis.calculateRangeId = (val, stops) => {\r\n\t\t\t// eslint-disable-next-line prefer-destructuring\r\n\t\t\tconst sortedStops = Object.keys(stops).sort((a, b) => stops[a].width - stops[b].width);\r\n\r\n\t\t\tlet rangeId = sortedStops[0];\r\n\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tsortedStops.map((s) => {\r\n\t\t\t\tif (val >= stops[s].width) {\r\n\t\t\t\t\trangeId = s;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn rangeId;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild table according to its responsive directives.\r\n\t\t *\r\n\t\t * @private\r\n\t\t * @param {HTMLElement} el table element\r\n\t\t * @param {number} size size in pixels\r\n\t\t * @param {TableObject} tableObj table object instance\r\n\t\t * @throws An error will be given for invalid mode name\r\n\t\t */\r\n\t\tthis.rebuildTable = (el, size, tableObj) => {\r\n\t\t\tconst directive = this.getDirective(el);\r\n\r\n\t\t\tif (directive) {\r\n\t\t\t\tif (!directive.responsiveEnabled) {\r\n\t\t\t\t\t// this.buildDefault(tableObj);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst mode = directive.responsiveMode;\r\n\r\n\t\t\t\t// main build logic for different responsive modes should be named in the format of `{modeName}Build` to automatically call the associated function from here\r\n\t\t\t\tconst buildCallable = this[`${mode}Build`];\r\n\r\n\t\t\t\tif (!size) {\r\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tsize = el.getBoundingClientRect().width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst sizeRangeId = this.calculateRangeId(size, directive.breakpoints);\r\n\r\n\t\t\t\tif (buildCallable) {\r\n\t\t\t\t\tconst modeOptions = directive.modeOptions[mode];\r\n\t\t\t\t\tbuildCallable.call(this, el, sizeRangeId, modeOptions, tableObj);\r\n\r\n\t\t\t\t\tWPTB_RecalculateIndexes(el);\r\n\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', {\r\n\t\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\t\tsizeRangeId,\r\n\t\t\t\t\t\t\ttopRowAsHeader: directive.modeOptions[mode].topRowAsHeader,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tel.dispatchEvent(tabEvent);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(`No build mode named as [${mode}] found.`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Rebuild tables with the given screen size.\r\n\t\t *\r\n\t\t * @param {number} size screen size\r\n\t\t */\r\n\t\tthis.rebuildTables = (size) => {\r\n\t\t\t// eslint-disable-next-line array-callback-return\r\n\t\t\tthis.elementObjects.map((o) => {\r\n\t\t\t\tlet innerSize = size;\r\n\t\t\t\tif (!size) {\r\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tinnerSize = window.innerWidth;\r\n\r\n\t\t\t\t\tconst directives = this.getDirective(o.el);\r\n\t\t\t\t\t// calculate size according to relative width directive\r\n\t\t\t\t\tif (directives && directives.relativeWidth) {\r\n\t\t\t\t\t\tswitch (directives.relativeWidth) {\r\n\t\t\t\t\t\t\tcase 'window':\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\t\t\tinnerSize = window.innerWidth;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'container':\r\n\t\t\t\t\t\t\t\t// get the size of the container table is in\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\t\t\tinnerSize = o.el.parentNode.parentNode.parentNode.clientWidth;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\t\t\t\tinnerSize = window.innerWidth;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.rebuildTable(o.el, innerSize, o.tableObject);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (this.options.bindToResize) {\r\n\t\t\tthis.bindRebuildToResize();\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\trebuildTables: this.rebuildTables,\r\n\t\t\tgetDirective: this.getDirective,\r\n\t\t\tcalculateRangeId: this.calculateRangeId,\r\n\t\t};\r\n\t}\r\n\r\n\treturn ResponsiveFront;\r\n});\r\n","/**\r\n * Attach style pass component to global space.\r\n */\r\n(function attachToGlobal(globalKey, context, factory) {\r\n\t// eslint-disable-next-line no-param-reassign\r\n\tcontext[globalKey] = factory();\r\n})('WPTB_StylePass', self || global, function () {\r\n\t/**\r\n\t * Style pass component\r\n\t * This component will be used to either let or block theme related styling to affect table styles.\r\n\t *\r\n\t * @class\r\n\t */\r\n\tfunction StylePass() {\r\n\t\tthis.options = { stylesheets: {} };\r\n\r\n\t\t/**\r\n\t\t * Maintain the same position of table container and insert shadow root container to exact same index.\r\n\t\t *\r\n\t\t * @param {HTMLElement} shadowRootContainer\r\n\t\t * @param {HTMLElement} tableContainer\r\n\t\t *\r\n\t\t */\r\n\t\tthis.insertShadowRoot = (shadowRootContainer, tableContainer) => {\r\n\t\t\tconst mainParent = tableContainer.parentNode;\r\n\t\t\tconst parentChildren = Array.from(mainParent.children);\r\n\t\t\tconst tableIndex = parentChildren.indexOf(tableContainer);\r\n\t\t\tconst upSibling = tableIndex - 1 > 0 ? null : parentChildren[tableIndex - 1];\r\n\t\t\tconst downSibling = tableIndex + 1 >= parentChildren.length ? null : parentChildren[tableIndex + 1];\r\n\r\n\t\t\tthis.prepareAllStylesheets(this.options.stylesheets, shadowRootContainer.shadowRoot);\r\n\t\t\tthis.borrowFromTheme(tableContainer);\r\n\r\n\t\t\tshadowRootContainer.shadowRoot.appendChild(tableContainer);\r\n\r\n\t\t\tif (upSibling) {\r\n\t\t\t\tupSibling.insertAdjacentElement('afterend', shadowRootContainer);\r\n\t\t\t} else if (downSibling) {\r\n\t\t\t\tdownSibling.insertAdjacentElement('beforebegin', shadowRootContainer);\r\n\t\t\t} else {\r\n\t\t\t\tmainParent.appendChild(shadowRootContainer);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Borrow some theme styles and reflect them to table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableContainer table container element\r\n\t\t */\r\n\t\tthis.borrowFromTheme = (tableContainer) => {\r\n\t\t\tconst table = tableContainer.querySelector('table');\r\n\t\t\tconst { fontFamily } = getComputedStyle(table);\r\n\t\t\ttable.style.fontFamily = fontFamily;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initialize and start style pass.\r\n\t\t *\r\n\t\t * @param {Object} options style pass options\r\n\t\t */\r\n\t\tthis.init = (options) => {\r\n\t\t\tthis.options = { ...this.options, ...options };\r\n\t\t\tconst tableContainers = Array.from(document.querySelectorAll('div .wptb-table-container'));\r\n\r\n\t\t\tif (tableContainers.length > 0) {\r\n\t\t\t\ttableContainers.map(this.setupStylePass);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Check if style pass is enabled for current table.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableContainer table container\r\n\t\t * @return {string} status null for disabled, true for enabled\r\n\t\t */\r\n\t\tthis.checkTableEligibility = (tableContainer) => {\r\n\t\t\tconst table = tableContainer.querySelector('table');\r\n\t\t\treturn table.dataset.disableThemeStyles;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Prepare containers for necessary style pass operations.\r\n\t\t *\r\n\t\t * @param {HTMLElement} tableContainer table container\r\n\t\t */\r\n\t\tthis.setupStylePass = (tableContainer) => {\r\n\t\t\t// abort if style pass is not enabled for table\r\n\t\t\tif (!this.checkTableEligibility(tableContainer)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst container = document.createElement('div');\r\n\t\t\tconst maxWidth = tableContainer.querySelector('table').dataset.wptbTableContainerMaxWidth;\r\n\t\t\tif (maxWidth) {\r\n\t\t\t\tcontainer.style.maxWidth = `${maxWidth}px`;\r\n\t\t\t}\r\n\r\n\t\t\tcontainer.attachShadow({ mode: 'open' });\r\n\r\n\t\t\tthis.insertShadowRoot(container, tableContainer);\r\n\t\t};\r\n\r\n\t\tthis.prepareAllStylesheets = (stylesheetsObj, root) => {\r\n\t\t\tObject.keys(stylesheetsObj).map((s) => {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(stylesheetsObj, s)) {\r\n\t\t\t\t\tthis.prepareStylesheet(s, stylesheetsObj[s], root);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tthis.prepareStylesheet = (handler, url, root) => {\r\n\t\t\tconst linkElement = document.createElement('link');\r\n\t\t\tlinkElement.setAttribute('id', handler);\r\n\t\t\tlinkElement.setAttribute('href', url);\r\n\t\t\tlinkElement.setAttribute('rel', 'stylesheet');\r\n\t\t\tlinkElement.setAttribute('media', 'all');\r\n\r\n\t\t\troot.appendChild(linkElement);\r\n\t\t};\r\n\t}\r\n\r\n\treturn new StylePass();\r\n});\r\n","(function ($) {\r\n\t/**\r\n\t * All of the code for your public-facing JavaScript source\r\n\t * should reside in this file.\r\n\t *\r\n\t * Note: It has been assumed you will write jQuery code here, so the\r\n\t * $ function reference has been prepared for usage within the scope\r\n\t * of this function.\r\n\t *\r\n\t * This enables you to define handlers, for when the DOM is ready:\r\n\t *\r\n\t * $(function() {\r\n\t *\r\n\t * });\r\n\t *\r\n\t * When the window is loaded:\r\n\t *\r\n\t * $( window ).load(function() {\r\n\t *\r\n\t * });\r\n\t *\r\n\t * ...and/or other possibilities.\r\n\t *\r\n\t * Ideally, it is not considered best practise to attach more than a\r\n\t * single DOM-ready or window-load handler for a particular page.\r\n\t * Although scripts in the WordPress core, Plugins and Themes may be\r\n\t * practising this, we should strive to set a better example in our own work.\r\n\t *\r\n\t * The file is enqueued from inc/frontend/class-frontend.php.\r\n\t */\r\n\r\n\tjQuery(document).ready(function ($) {\r\n\t\tconst tableContainers = document.getElementsByClassName('wptb-table-container');\r\n\t\t/**\r\n\t\t * Adds hover color change support for supported button elements.\r\n\t\t *\r\n\t\t * @param querySelector\r\n\t\t */\r\n\t\tfunction addHoverSupport(querySelector) {\r\n\t\t\tconst buttons = Array.from(document.querySelectorAll(querySelector));\r\n\r\n\t\t\tbuttons.map((b) => {\r\n\t\t\t\tb.addEventListener('mouseenter', (e) => {\r\n\t\t\t\t\tconst el = e.target;\r\n\t\t\t\t\t// hover background-color\r\n\t\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\r\n\t\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementHoverBgColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// hover color\r\n\t\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\r\n\t\t\t\t\t\tel.style.color = el.dataset.wptbElementHoverTextColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// hover scale\r\n\t\t\t\t\tif (el.dataset.wptbElementHoverScale) {\r\n\t\t\t\t\t\tel.style.transform = `scale(${b.dataset.wptbElementHoverScale})`;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tb.addEventListener('mouseleave', (e) => {\r\n\t\t\t\t\t// reset all supported hover properties to their default value\r\n\t\t\t\t\tconst el = e.target;\r\n\t\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\r\n\t\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementBgColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\r\n\t\t\t\t\t\tel.style.color = el.dataset.wptbElementColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (el.dataset.wptbElementHoverScale) {\r\n\t\t\t\t\t\tel.style.transform = 'scale(1)';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// add all kind of functions that have event listeners before responsive table reconstruction to make sure those event listeners are carried over to their clones\r\n\t\taddHoverSupport('.wptb-preview-table .wptb-button');\r\n\r\n\t\t/**\r\n\t\t * function wptb_tableContainerSectionSmall\r\n\t\t * add class ( wptb-section-small ) in small width\r\n\t\t * remove this class in large width\r\n\t\t *\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tfunction wptb_tableContainerSectionSmall() {\r\n\t\t\tconst wptbTableContainer = jQuery('.wptb-table-container');\r\n\t\t\tconst sw = wptbTableContainer.width();\r\n\t\t\tif (wptbTableContainer.length > 0) {\r\n\t\t\t\tif (sw < 480) {\r\n\t\t\t\t\twptbTableContainer.addClass('wptb-section-small');\r\n\t\t\t\t} else {\r\n\t\t\t\t\twptbTableContainer.removeClass('wptb-section-small');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * function wptb_tableGenerateMobile\r\n\t\t * generates a mobile view of the table\r\n\t\t * when the top row of the table is not a heading\r\n\t\t *\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tfunction wptb_tableGenerateMobile() {\r\n\t\t\tconst wptbTableContainer = document.getElementsByClassName('wptb-table-container');\r\n\t\t\tconst wptbPreviewTable = document.getElementsByClassName('wptb-preview-table');\r\n\t\t\tconst wptbPreviewTableMobile = document.getElementsByClassName('wptb-preview-table-mobile');\r\n\t\t\tif (wptbTableContainer.length > 0 && wptbPreviewTable.length > 0) {\r\n\t\t\t\tconst sw = wptbTableContainer[0].offsetWidth;\r\n\t\t\t\tif (sw < 480) {\r\n\t\t\t\t\twptbPreviewTable[0].style.display = 'none';\r\n\r\n\t\t\t\t\tif (wptbPreviewTableMobile.length == 0) {\r\n\t\t\t\t\t\tconst tableRows = wptbPreviewTable[0].rows;\r\n\t\t\t\t\t\tconst tableRowTop = tableRows[0];\r\n\t\t\t\t\t\tconst tableRowTopChildren = tableRowTop.children;\r\n\t\t\t\t\t\tlet columnCount = 0;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < tableRowTopChildren.length; i++) {\r\n\t\t\t\t\t\t\tcolumnCount += tableRowTopChildren[i].colSpan;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst newTableArray = [];\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < columnCount; i++) {\r\n\t\t\t\t\t\t\tnewTableArray[i] = [];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < tableRows.length; i++) {\r\n\t\t\t\t\t\t\tconst rowChildren = tableRows[i].children;\r\n\r\n\t\t\t\t\t\t\tfor (let j = 0; j < columnCount; j++) {\r\n\t\t\t\t\t\t\t\tif (rowChildren[j].dataset.xIndex == j) {\r\n\t\t\t\t\t\t\t\t\tconst tdNew = rowChildren[j].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\tif (tableRows[i].style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\ttdNew.style.backgroundColor = tableRows[i].style.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tnewTableArray[j].push(tdNew);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewTableArray[j].push('');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst table = document.createElement('table');\r\n\t\t\t\t\t\ttable.classList.add('wptb-preview-table-mobile');\r\n\t\t\t\t\t\tconst tableStyle = wptbPreviewTable[0].getAttribute('style');\r\n\t\t\t\t\t\ttable.setAttribute('style', tableStyle);\r\n\t\t\t\t\t\ttable.style.display = 'table';\r\n\t\t\t\t\t\tfor (let i = 0; i < columnCount; i++) {\r\n\t\t\t\t\t\t\tconst row = table.insertRow(-1);\r\n\t\t\t\t\t\t\trow.classList.add('wptb-row');\r\n\r\n\t\t\t\t\t\t\tfor (let j = 0; j < tableRows.length; j++) {\r\n\t\t\t\t\t\t\t\tif (newTableArray[i][j]) {\r\n\t\t\t\t\t\t\t\t\trow.appendChild(newTableArray[i][j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twptbTableContainer[0].appendChild(table);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twptbPreviewTableMobile[0].style.display = 'table';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twptbPreviewTable[0].style.display = 'table';\r\n\t\t\t\t\tif (wptbPreviewTableMobile.length > 0) {\r\n\t\t\t\t\t\twptbPreviewTableMobile[0].style.display = 'none';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twptb_tdDefaultWidth();\r\n\t\twptb_tableReconstraction();\r\n\r\n\t\t// when window resize call wpcd_archiveSectionSmall and wptb_tableGenerateMobile\r\n\t\t$(window).resize(function () {\r\n\t\t\twptb_tdDefaultWidth();\r\n\t\t\twptb_tableReconstraction();\r\n\t\t});\r\n\r\n\t\tfunction wptb_tableReconstraction() {\r\n\t\t\tfor (let i = 0; i < tableContainers.length; i++) {\r\n\t\t\t\tconst tableContainer = tableContainers[i];\r\n\r\n\t\t\t\t// Set default indicator of creating a new table in true\r\n\t\t\t\tlet createNewTableIndic = true;\r\n\r\n\t\t\t\tlet previewTable = tableContainer.getElementsByClassName('wptb-preview-table');\r\n\t\t\t\tlet tableContainerMatrix = tableContainer.getElementsByClassName('wptb-table-container-matrix');\r\n\r\n\t\t\t\tif (previewTable.length > 0 && tableContainerMatrix.length > 0) {\r\n\t\t\t\t\tpreviewTable = previewTable[0];\r\n\t\t\t\t\ttableContainerMatrix = tableContainerMatrix[0];\r\n\t\t\t\t\tpreviewTable.style.display = 'table';\r\n\r\n\t\t\t\t\tif (previewTable.dataset.wptbTableAlignment) {\r\n\t\t\t\t\t\tconst { wptbTableAlignment } = previewTable.dataset;\r\n\r\n\t\t\t\t\t\tconst wptbTableContainerWidth = tableContainer.offsetWidth;\r\n\t\t\t\t\t\tif (wptbTableContainerWidth < previewTable.offsetWidth) {\r\n\t\t\t\t\t\t\tpreviewTable.style.float = null;\r\n\t\t\t\t\t\t} else if (wptbTableAlignment == 'center') {\r\n\t\t\t\t\t\t\tpreviewTable.style.float = null;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpreviewTable.style.float = wptbTableAlignment;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (wptbTableAlignment == 'center') {\r\n\t\t\t\t\t\t\ttableContainer.style.float = null;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttableContainer.style.float = wptbTableAlignment;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check data parametrs reconstraction and wptbAdaptiveTable if they are both equal 1 then continue\r\n\t\t\t\t\tif (previewTable.dataset.reconstraction == 1 && previewTable.dataset.wptbAdaptiveTable == 1) {\r\n\t\t\t\t\t\t// get widths for wptb-table-container and wptb-preview-table\r\n\t\t\t\t\t\tconst tableContainerWidth = tableContainer.offsetWidth;\r\n\t\t\t\t\t\tconst previewTableWidth = previewTable.offsetWidth;\r\n\r\n\t\t\t\t\t\t// get count of table columns\r\n\t\t\t\t\t\tlet tableColumns;\r\n\t\t\t\t\t\tconst previewTableRows = previewTable.rows;\r\n\t\t\t\t\t\tif (previewTableRows.length > 0) {\r\n\t\t\t\t\t\t\tconst firstRow = previewTableRows[0];\r\n\t\t\t\t\t\t\tconst tdsRow = firstRow.querySelectorAll('td');\r\n\r\n\t\t\t\t\t\t\ttableColumns = tdsRow.length;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// check the top line if it is presented as a title\r\n\t\t\t\t\t\tconst tablePreviewHeadIndic = previewTable.classList.contains('wptb-table-preview-head');\r\n\r\n\t\t\t\t\t\t// check conditions: if table top row is as \"header\" - table must have more that two columns,\r\n\t\t\t\t\t\t// otherwise table must have more taht one columns\r\n\t\t\t\t\t\tlet tableReconstructed = false;\r\n\t\t\t\t\t\tlet wptbPreviewTableMobile;\r\n\t\t\t\t\t\tif ((!tablePreviewHeadIndic || tableColumns > 2) && tableColumns > 1) {\r\n\t\t\t\t\t\t\t// if width of wptb-table-container less then width of wptb-preview-table -\r\n\t\t\t\t\t\t\t// continue the way creation new mobile table\r\n\t\t\t\t\t\t\tif (tableContainerWidth < previewTableWidth) {\r\n\t\t\t\t\t\t\t\ttableContainer.style.overflow = 'unset';\r\n\r\n\t\t\t\t\t\t\t\t// hide wptb-table-container-matrix\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\ttableContainerMatrix &&\r\n\t\t\t\t\t\t\t\t\t!tableContainerMatrix.classList.contains('wptb-matrix-hide')\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\ttableContainerMatrix.classList.add('wptb-matrix-hide');\r\n\t\t\t\t\t\t\t\t\ttableReconstructed = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpreviewTable.classList.add('wptb-mobile-view-active');\r\n\r\n\t\t\t\t\t\t\t\tif (previewTable.rows && tableColumns) {\r\n\t\t\t\t\t\t\t\t\t// we get the estimated cell width\r\n\t\t\t\t\t\t\t\t\tconst tdWidth = previewTableWidth / tableColumns;\r\n\r\n\t\t\t\t\t\t\t\t\t// get the quantity of whole Columns that are can placed in the container\r\n\t\t\t\t\t\t\t\t\tlet wholeColumnsInContainer = Math.floor(tableContainerWidth / tdWidth);\r\n\t\t\t\t\t\t\t\t\tif (wholeColumnsInContainer < 1) wholeColumnsInContainer = 1;\r\n\r\n\t\t\t\t\t\t\t\t\t// check for the existence of a mobile table\r\n\t\t\t\t\t\t\t\t\t// if it available, check this table for compliance\r\n\t\t\t\t\t\t\t\t\t// with our conditions. If it compliance, remain this table\r\n\t\t\t\t\t\t\t\t\t// and cancel creating a new table ( createNewTableIndic = false ).\r\n\t\t\t\t\t\t\t\t\tif (tableContainer.getElementsByClassName('wptb-preview-table-mobile').length > 0) {\r\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.getElementsByClassName(\r\n\t\t\t\t\t\t\t\t\t\t\t'wptb-preview-table-mobile'\r\n\t\t\t\t\t\t\t\t\t\t)[0];\r\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.classList.remove('wptb-mobile-hide');\r\n\t\t\t\t\t\t\t\t\t\tconst dataWholeColumnInContainer =\r\n\t\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.dataset.wholeColumnsInContainer;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\r\n\t\t\t\t\t\t\t\t\t\t\tpreviewTable.classList.contains('wptb-table-preview-head')\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\r\n\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\r\n\t\t\t\t\t\t\t\t\t\t\t!previewTable.classList.contains('wptb-table-preview-head') &&\r\n\t\t\t\t\t\t\t\t\t\t\t(tableContainerWidth > 480 || wptbPreviewTableMobile.column == 1)\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.parentNode.removeChild(wptbPreviewTableMobile);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t\t\t// if indicator of creating of table \"true\" - continue\r\n\t\t\t\t\t\t\t\t\tif (createNewTableIndic) {\r\n\t\t\t\t\t\t\t\t\t\t// create new table for mobile devices\r\n\t\t\t\t\t\t\t\t\t\tconst newTable = document.createElement('table');\r\n\t\t\t\t\t\t\t\t\t\tconst newTableTbody = document.createElement('tbody');\r\n\t\t\t\t\t\t\t\t\t\tnewTable.appendChild(newTableTbody);\r\n\r\n\t\t\t\t\t\t\t\t\t\t// add css class for new mobile table\r\n\t\t\t\t\t\t\t\t\t\tnewTable.classList.add('wptb-preview-table-mobile');\r\n\t\t\t\t\t\t\t\t\t\tconst infArr = previewTable.className.match(/wptb-element-main(.+)-(\\d+)/i);\r\n\t\t\t\t\t\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewTable.classList.add(infArr[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// get number of rows for wptb-preview-table\r\n\t\t\t\t\t\t\t\t\t\tconst tableRows = previewTable.rows.length;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// In this variable must have quantity columns of the last section of the new table\r\n\t\t\t\t\t\t\t\t\t\tlet newTableLastSectionFilledColumns;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// set valuesIsSaved in 'false'\r\n\t\t\t\t\t\t\t\t\t\t// if the parameters newTableLastSectionFilledColumns get\r\n\t\t\t\t\t\t\t\t\t\t// optimal values, valuesIsSaved must have value 'true'\r\n\t\t\t\t\t\t\t\t\t\tlet valuesIsSaved = false;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// check if top row is as \"header\"\r\n\t\t\t\t\t\t\t\t\t\tif (previewTable.classList.contains('wptb-table-preview-head')) {\r\n\t\t\t\t\t\t\t\t\t\t\t// quantity rows without top row\r\n\t\t\t\t\t\t\t\t\t\t\tconst tableRowsWithoutHeader = tableRows - 1;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// this variable will have quantity columns in new mobile table\r\n\t\t\t\t\t\t\t\t\t\t\tlet newTableColumnsWithoutLeftHeader;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// if quantity of rows in desktop table more than\r\n\t\t\t\t\t\t\t\t\t\t\t// quantity whole columns which are can placed in the container,\r\n\t\t\t\t\t\t\t\t\t\t\t// execute \"loop for\"\r\n\t\t\t\t\t\t\t\t\t\t\tif (tableRows > wholeColumnsInContainer) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// this code, —Åyclical reduces the number of columns in the new table,\r\n\t\t\t\t\t\t\t\t\t\t\t\t// until the optimal view is obtained so that the last block of the new table\r\n\t\t\t\t\t\t\t\t\t\t\t\t// has more than half the columns compared to the previous blocks\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableRowsWithoutHeader; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = wholeColumnsInContainer - 1 - i;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader <= 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = 1;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader % newTableColumnsWithoutLeftHeader;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2 * newTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.8 * newTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 18 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.6 * newTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = tableRowsWithoutHeader;\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// if all necessary values ‚Äã‚Äãare available (  ), execute\r\n\t\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet countRows;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountRows =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableColumns *\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tMath.ceil(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader / newTableColumnsWithoutLeftHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountRows = tableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumberLast = Math.floor((countRows - 1) / tableColumns);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet tdStyles;\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < countRows; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(j / tableColumns);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tdLeftHeader = previewTable.rows[0].children[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet td;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowFirstStyles = window.getComputedStyle(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!tdLeftHeader.style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trowFirstStyles.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.width = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.height = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// tdLeftHeader.removeAttribute('data-x-index');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.removeAttribute('data-wptb-css-td-auto-width');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderTopColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderBottomColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderTopWidth = '5px';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(tdLeftHeader);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet k = newTableColumnsWithoutLeftHeader * sectionNumber + 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tk < newTableColumnsWithoutLeftHeader * (sectionNumber + 1) + 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tk++\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (k < previewTable.rows.length) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = previewTable.rows[k].children[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowKStyles = window.getComputedStyle(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[k]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!td.style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.backgroundColor = rowKStyles.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.width = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.height = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// td.removeAttribute('data-x-index');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.removeAttribute('data-wptb-css-td-auto-width');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = document.createElement('td');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderWidth = '0px';\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.background = '#fff';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderTopColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderBottomColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderTopWidth = '5px';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tlet newTableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\tif (tableContainerWidth > 480) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableColumns; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = wholeColumnsInContainer - i;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumns == 0) newTableColumns = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = tableColumns % newTableColumns;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 2 * newTableLastSectionFilledColumns <= 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 6 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.8 * newTableLastSectionFilledColumns <= 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 12 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 18 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.6 * newTableLastSectionFilledColumns <= 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewTable.column = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tconst increaseRatioRows = Math.ceil(tableColumns / newTableColumns);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tconst newTableRows = increaseRatioRows * tableRows;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < newTableRows; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(i / tableRows);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet jMax;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet jStart;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionNumber != increaseRatioRows - 1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns == 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = sectionNumber * newTableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = newTableColumns * (1 + sectionNumber);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = tableColumns - newTableLastSectionFilledColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = tableColumns;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst row = previewTable.rows[i - sectionNumber * tableRows];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.classList = row.classList;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.style.backgroundColor = row.style.backgroundColor;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = jStart; j < jMax; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newTd = row.children[j].cloneNode(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!newTd.style.backgroundColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowStyles = window.getComputedStyle(row);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.backgroundColor = rowStyles.backgroundColor;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.width = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.height = null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// newTd.removeAttribute('data-x-index');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.removeAttribute('data-wptb-css-td-auto-width');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(newTd);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tnewTable.dataset.wholeColumnsInContainer = wholeColumnsInContainer;\r\n\t\t\t\t\t\t\t\t\t\tconst images = newTable.querySelectorAll('[srcset]');\r\n\t\t\t\t\t\t\t\t\t\tif (images.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < images.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\timages[i].removeAttribute('srcset');\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = newTable;\r\n\t\t\t\t\t\t\t\t\t\ttableContainer.appendChild(newTable);\r\n\t\t\t\t\t\t\t\t\t\ttableReconstructed = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\ttableContainerMatrix &&\r\n\t\t\t\t\t\t\t\ttableContainerMatrix.classList.contains('wptb-matrix-hide')\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\ttableContainerMatrix.classList.remove('wptb-matrix-hide');\r\n\t\t\t\t\t\t\t\ttableReconstructed = true;\r\n\t\t\t\t\t\t\t\tpreviewTable.classList.remove('wptb-mobile-view-active');\r\n\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.querySelector('.wptb-preview-table-mobile');\r\n\t\t\t\t\t\t\t\tif (wptbPreviewTableMobile) {\r\n\t\t\t\t\t\t\t\t\ttableContainer\r\n\t\t\t\t\t\t\t\t\t\t.getElementsByClassName('wptb-preview-table-mobile')[0]\r\n\t\t\t\t\t\t\t\t\t\t.classList.add('wptb-mobile-hide');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttableContainer.style.overflow = 'auto';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpreviewTable.style.minWidth = 'auto';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tWPTB_RecalculateIndexes(previewTable);\r\n\r\n\t\t\t\t\t\tif (tableReconstructed) {\r\n\t\t\t\t\t\t\tWPTB_RecalculateIndexes(wptbPreviewTableMobile);\r\n\t\t\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', { detail: true, bubbles: true });\r\n\t\t\t\t\t\t\tpreviewTable.dispatchEvent(tabEvent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction wptb_tdDefaultWidth() {\r\n\t\t\tconst wptbTableContainers = document.getElementsByClassName('wptb-table-container');\r\n\t\t\t// let frontendEditLink = document.querySelectorAll( '.wptb-frontend-table-edit-link' );\r\n\t\t\tfor (let i = 0; i < wptbTableContainers.length; i++) {\r\n\t\t\t\tconst wptbTableContainer = wptbTableContainers[i];\r\n\r\n\t\t\t\twptbTableContainer.classList.add(`wptb-table-container-${i}`);\r\n\r\n\t\t\t\tlet table = wptbTableContainer.getElementsByClassName('wptb-preview-table');\r\n\t\t\t\tif (table.length > 0) {\r\n\t\t\t\t\ttable = table[0];\r\n\r\n\t\t\t\t\tif (table.dataset.wptbTableContainerMaxWidth) {\r\n\t\t\t\t\t\twptbTableContainer.style.maxWidth = `${table.dataset.wptbTableContainerMaxWidth}px`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttable.classList.remove('wptb-table-preview-static-indic');\r\n\r\n\t\t\t\t\ttable.merging–°ellsHorizontally = false;\r\n\t\t\t\t\tconst tds = table.querySelectorAll('td');\r\n\t\t\t\t\tfor (let j = 0; j < tds.length; j++) {\r\n\t\t\t\t\t\tif (tds[j].colSpan > 1) {\r\n\t\t\t\t\t\t\ttable.merging–°ellsHorizontally = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst wptbTableContainerWidth = wptbTableContainer.offsetWidth;\r\n\r\n\t\t\t\t\tconst td = table.querySelector('td');\r\n\t\t\t\t\tconst tdStyleObj = window.getComputedStyle(td, null);\r\n\t\t\t\t\tconst tdBorderLeftWidth = tdStyleObj.getPropertyValue('border-left-width');\r\n\t\t\t\t\tconst tdBorderRightWidth = tdStyleObj.getPropertyValue('border-right-width');\r\n\t\t\t\t\tconst tdPaddingLeftWidth = tdStyleObj.getPropertyValue('padding-left');\r\n\t\t\t\t\tconst tdPaddingRightWidth = tdStyleObj.getPropertyValue('padding-left');\r\n\t\t\t\t\tconst tdPaddingCommon = parseFloat(tdPaddingLeftWidth, 10) + parseFloat(tdPaddingRightWidth, 10);\r\n\t\t\t\t\tconst tableTdBorderCommonWidth =\r\n\t\t\t\t\t\tparseFloat(tdBorderLeftWidth, 10) + parseFloat(tdBorderRightWidth, 10);\r\n\t\t\t\t\tconst { wptbTableTdsSumMaxWidth } = table.dataset;\r\n\t\t\t\t\tconst { wptbFixedWidthSize } = table.dataset;\r\n\t\t\t\t\tconst { wptbCellsWidthAutoCount } = table.dataset;\r\n\t\t\t\t\tlet styleElementCreate = false;\r\n\t\t\t\t\tlet tableTdWidthAuto;\r\n\t\t\t\t\tif (wptbTableTdsSumMaxWidth < wptbTableContainerWidth) {\r\n\t\t\t\t\t\tif (wptbCellsWidthAutoCount) {\r\n\t\t\t\t\t\t\ttable.style.minWidth = '100%';\r\n\r\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = wptbTableTdsSumMaxWidth + 'px';\r\n\t\t\t\t\t\t\t//                        }\r\n\r\n\t\t\t\t\t\t\tif (table.merging–°ellsHorizontally) {\r\n\t\t\t\t\t\t\t\ttable.style.width = 'auto';\r\n\t\t\t\t\t\t\t\tconst tableTdsWidthAutoCommon = wptbTableContainerWidth - wptbFixedWidthSize;\r\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdsWidthAutoCommon / wptbCellsWidthAutoCount;\r\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdWidthAuto - tdPaddingCommon - tableTdBorderCommonWidth;\r\n\t\t\t\t\t\t\t\tstyleElementCreate = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.style.width = '100%';\r\n\r\n\t\t\t\t\t\t\t\t//                            if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.width = '100%';\r\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.maxWidth = '100%';\r\n\t\t\t\t\t\t\t\t//                            }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttable.style.width = 'auto';\r\n\t\t\t\t\t\t\ttable.style.minWidth = null;\r\n\t\t\t\t\t\t\ttable.style.maxWidth = `${wptbTableTdsSumMaxWidth}px`;\r\n\r\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.width = null;\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = null;\r\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.maxWidth = wptbTableTdsSumMaxWidth + 'px';\r\n\t\t\t\t\t\t\t//                        }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttable.style.maxWidth = null;\r\n\t\t\t\t\t\ttable.style.minWidth = `${table.dataset.wptbTableTdsSumMaxWidth}px`;\r\n\t\t\t\t\t\ttable.style.width = 'auto';\r\n\t\t\t\t\t\ttableTdWidthAuto = table.dataset.wptbTdWidthAuto ? table.dataset.wptbTdWidthAuto : '100';\r\n\t\t\t\t\t\tstyleElementCreate = true;\r\n\r\n\t\t\t\t\t\t//                    if( frontendEditLink && frontendEditLink[i] ) {\r\n\t\t\t\t\t\t//                        frontendEditLink[i].style.maxWidth = '100%';\r\n\t\t\t\t\t\t//                        frontendEditLink[i].style.minWidth = table.dataset.wptbTableTdsSumMaxWidth + 'px';\r\n\t\t\t\t\t\t//                        frontendEditLink[i].style.width = null;\r\n\t\t\t\t\t\t//                    }\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst { head } = document;\r\n\t\t\t\t\tif (head) {\r\n\t\t\t\t\t\tconst cssForTdsWidthAutoOld = head.querySelector(`style[data-wptb-td-auto-width-${i}=\"true\"]`);\r\n\r\n\t\t\t\t\t\tif (cssForTdsWidthAutoOld) {\r\n\t\t\t\t\t\t\thead.removeChild(cssForTdsWidthAutoOld);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (styleElementCreate) {\r\n\t\t\t\t\t\tconst cssForTdsWidthAuto = document.createElement('style');\r\n\t\t\t\t\t\tcssForTdsWidthAuto.setAttribute(`data-wptb-td-auto-width-${i}`, true);\r\n\t\t\t\t\t\tcssForTdsWidthAuto.innerHTML = `.wptb-table-container-${i} table td[data-wptb-css-td-auto-width=true]{width:${tableTdWidthAuto}px}`;\r\n\t\t\t\t\t\tif (head) {\r\n\t\t\t\t\t\t\thead.appendChild(cssForTdsWidthAuto);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// code for adding of old css styles for correct view\r\n\t\tconst elements = document.getElementsByClassName('wptb-ph-element');\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.classList.contains('wptb-list-item-container')) {\r\n\t\t\t\telement.classList.remove('wptb-list-item-container');\r\n\t\t\t\telement.classList.add('wptb-list-container');\r\n\t\t\t}\r\n\r\n\t\t\tif (element.classList.contains('wptb-button-container')) {\r\n\t\t\t\tconst infArr = element.className.match(/wptb-size-([A-Z]+)/i);\r\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\r\n\t\t\t\t\tconst wptbSize = infArr[0];\r\n\t\t\t\t\tconst wptbSizeNew = wptbSize.toLowerCase();\r\n\r\n\t\t\t\t\telement.classList.remove(wptbSize);\r\n\r\n\t\t\t\t\tconst wptbButtonWrapper = element.querySelector('.wptb-button-wrapper');\r\n\t\t\t\t\tif (wptbButtonWrapper) {\r\n\t\t\t\t\t\twptbButtonWrapper.classList.add(wptbSizeNew);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// responsive setup\r\n\t\t// eslint-disable-next-line no-unused-vars\r\n\t\tconst responsiveFront = new WPTB_ResponsiveFrontend({\r\n\t\t\tquery: '.wptb-preview-table',\r\n\t\t\tbindToResize: true,\r\n\t\t});\r\n\r\n\t\t// sorting table\r\n\t\tfunction sortingTable() {\r\n\t\t\tconst tables = document.querySelectorAll('.wptb-preview-table');\r\n\t\t\tfor (let i = 0; i < tables.length; i++) {\r\n\t\t\t\tconst sortableTable = new WPTB_SortableTable({ table: tables[i] });\r\n\t\t\t\tsortableTable.sortableTableInitialization(responsiveFront);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsortingTable();\r\n\t\tvar responsiveFrontReady = new CustomEvent('responsive:front', {\r\n\t\t\tdetail: {\r\n\t\t\t\tresponsiveFront\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.dispatchEvent(responsiveFrontReady);\r\n\t\tresponsiveFront.rebuildTables();\r\n\r\n\t\tWPTB_StylePass.init(WptbFrontendData.stylePass);\r\n\t});\r\n})(jQuery);\r\n"]}