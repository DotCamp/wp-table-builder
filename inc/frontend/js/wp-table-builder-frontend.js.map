{"version":3,"sources":["WPTB_CutGlueTable.js","WPTB_SortableTable.js","WPTB_RecalculateIndexes.js","wp-table-builder-frontend.js"],"names":["WPTB_CutGlueTable","cutTableHorizontally","rowBefore","table","rows","i","tableRowsIChildren","children","j","length","rowSpan","newTdRowspan","dataset","sameCellBeforeDivision","td","hasOwnProperty","wptbCell","mark","getDOMElement","document","createElement","tdTopStyle","getAttribute","setAttribute","colSpan","dataXIndex","xIndex","dataXIndexNext","parseInt","beforeTd","maxCols","querySelector","insertBefore","WPTB_RecalculateIndexes","glueTableHorizontally","tds","getElementsByTagName","hasAttribute","dataSameCellBeforeDivision","tdsSameBeforeDivision","querySelectorAll","parentNode","classList","contains","yIndex","tdsSameBeforeDivisionJPlusChildren","k","appendChild","nextRow","removeChild","cutTableVertically","col","rowChildren","rowChildrenLength","afterTd","rowSpanNewTd","colSpanOld","colSpanNewTd","tdLeftStyle","tdAnalogThisX","style","width","tdAnalogThisY","height","glueTableVertically","jFirstTdGlue","thisRow","WPTB_SortableTable","thisObject","topRow","itemsPerHeader","sortModeSwitcher","type","active","number","removeEventListener","sortableTableVerticalStart","sortingCellMouseMoveSwitcher","addEventListener","wptbSortableTableVertical","sortableTableHorizontalStart","wptbSortableTableHorizontal","sortableTableInitialization","responsiveFront","typeFirst","typeSecond","switchMode","getDirective","size","directives","relativeWidth","window","innerWidth","o","el","clientWidth","getBoundingClientRect","sizeRangeId","calculateRangeId","breakpoints","mode","responsiveMode","modeOptions","topRowAsHeader","cellStackDirection","cellsPerRow","call","e","rowsLength","dataYIndexStart","map","sortingCellMouseMoveVertical","tdMouseLeave","sortedVertical","sortingCellMouseMoveHorizontal","sortingCellMouseMov","element","target","tagName","x","offsetX","undefined","layerX","y","offsetY","layerY","xMatch","clientHeight","add","remove","sortableTable","tableWasSorted","tableRowsBefore","tableRowsAfter","tableRowsArr","tableLastCont","push","rowspan","rowNum","rowsValuesArr","rowsTdFirst","tdYCoordsRowSpanPrevious","tableRowsPushed","tdsChanged","changeSortingTdsCollection","tdRowspan","textElementsValues","textElementsValuesGet","rowsTd","value","orderBy","setSortedAscDataAttr","sort","prev","next","sortOrder","unshift","indexOf","tBody","innerHTML","rowsValObj","row","trRef","tr","colspan","colNum","columnsValuesArr","columnsTdFirst","tdXCoordsColSpanPrevious","tdColspan","columnsTd","tdsColumn","difference","columnsValObj","removeCellsAttrAfterDivision","tableSM","tableStateSet","dataAttr","currentTarget","prevValue","nextValue","cell","textElements","p","innerText","tdIndexSpanPrev","tdsCollectionChanged","collectionTds","collectionTdsJSpan","collectionTdsJSpanProperty","indexName","indexNameCamelCase","indexNamePerpendicularCamelCase","tdSpanProperty","tableGroupCount","splice","tdSpan","tdsAll","removeAttribute","trs","maxColsFull","tdsArr","jMainIter","z","columns","$","jQuery","ready","tableContainers","getElementsByClassName","addHoverSupport","buttons","Array","from","b","wptbElementHoverBgColor","backgroundColor","wptbElementHoverTextColor","color","wptbElementHoverScale","transform","wptbElementBgColor","wptbElementColor","wptb_tableContainerSectionSmall","wptbTableContainer","sw","addClass","removeClass","wptb_tableGenerateMobile","wptbPreviewTable","wptbPreviewTableMobile","offsetWidth","display","tableRows","tableRowTop","tableRowTopChildren","columnCount","newTableArray","tdNew","cloneNode","tableStyle","insertRow","wptb_tdDefaultWidth","wptb_tableReconstraction","resize","tableContainer","createNewTableIndic","previewTable","tableContainerMatrix","wptbTableAlignment","wptbTableContainerWidth","float","reconstraction","wptbAdaptiveTable","tableContainerWidth","previewTableWidth","tableColumns","previewTableRows","firstRow","tdsRow","tablePreviewHeadIndic","tableReconstructed","overflow","tdWidth","wholeColumnsInContainer","Math","floor","dataWholeColumnInContainer","column","newTable","newTableTbody","infArr","className","match","isArray","newTableLastSectionFilledColumns","valuesIsSaved","tableRowsWithoutHeader","newTableColumnsWithoutLeftHeader","countRows","ceil","sectionNumberLast","tdStyles","sectionNumber","tdLeftHeader","rowFirstStyles","getComputedStyle","borderTopColor","borderColor","borderBottomColor","borderTopWidth","rowKStyles","borderWidth","background","newTableColumns","increaseRatioRows","newTableRows","jMax","jStart","newTd","rowStyles","images","minWidth","tabEvent","CustomEvent","detail","bubbles","dispatchEvent","wptbTableContainers","wptbTableContainerMaxWidth","maxWidth","merging–°ellsHorizontally","tdStyleObj","tdBorderLeftWidth","getPropertyValue","tdBorderRightWidth","tdPaddingLeftWidth","tdPaddingRightWidth","tdPaddingCommon","parseFloat","tableTdBorderCommonWidth","wptbTableTdsSumMaxWidth","wptbFixedWidthSize","wptbCellsWidthAutoCount","styleElementCreate","tableTdWidthAuto","tableTdsWidthAutoCommon","wptbTdWidthAuto","head","cssForTdsWidthAutoOld","cssForTdsWidthAuto","elements","wptbSize","wptbSizeNew","toLowerCase","wptbButtonWrapper","WPTB_ResponsiveFrontend","query","bindToResize","rebuildTables","sortingTable","tables"],"mappings":";;AAAA,IAAIA,oBAAoB;AACpBC,0BAAsB,8BAAUC,SAAV,EAAqBC,KAArB,EAA4B;AAC9C,YAAIA,SAASA,MAAMC,IAAN,CAAWF,SAAX,CAAb,EAAqC;AACjC,iBAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIH,SAApB,EAA+BG,GAA/B,EAAqC;AACjC,oBAAIC,qBAAqBH,MAAMC,IAAN,CAAWC,CAAX,EAAcE,QAAvC;;AAEA,qBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,mBAAmBG,MAAvC,EAA+CD,GAA/C,EAAqD;AACjD,wBAAKF,mBAAmBE,CAAnB,EAAsBE,OAAtB,GAAgC,CAAhC,IAAqCJ,mBAAmBE,CAAnB,EAAsBE,OAAtB,GAAgCR,YAAYG,CAAtF,EAA0F;AACtF,4BAAIM,eAAeL,mBAAmBE,CAAnB,EAAsBE,OAAtB,GAAgCR,SAAhC,GAA4CG,CAA/D;AACAC,2CAAmBE,CAAnB,EAAsBE,OAAtB,GAAgCR,YAAYG,CAA5C;AACA,4BAAI,CAAEC,mBAAmBE,CAAnB,EAAsBI,OAAtB,CAA8BC,sBAApC,EAA6D;AACzDP,+CAAmBE,CAAnB,EAAsBI,OAAtB,CAA8BC,sBAA9B,GAAuD,MAAMR,CAAN,GAAU,GAAV,GAAgBG,CAAvE;AACH;;AAED,4BAAIM,WAAJ;AACA,4BAAGX,MAAMY,cAAN,CAAqB,UAArB,CAAH,EAAqC;AACjCD,iCAAK,IAAIX,MAAMa,QAAV,CAAoBb,MAAMc,IAA1B,CAAL;AACAH,iCAAKA,GAAGI,aAAH,EAAL;AACH,yBAHD,MAGO;AACHJ,iCAAKK,SAASC,aAAT,CAAuB,IAAvB,CAAL;AACH;;AAED,4BAAIC,aAAaf,mBAAmBE,CAAnB,EAAsBc,YAAtB,CAAoC,OAApC,CAAjB;AACAR,2BAAGS,YAAH,CAAiB,OAAjB,EAA0BF,UAA1B;AACAP,2BAAGU,OAAH,GAAalB,mBAAmBE,CAAnB,EAAsBgB,OAAnC;AACAV,2BAAGJ,OAAH,GAAaC,YAAb;AACAG,2BAAGF,OAAH,CAAWC,sBAAX,GAAoCP,mBAAmBE,CAAnB,EAAsBI,OAAtB,CAA8BC,sBAAlE;;AAEA,4BAAIY,aAAanB,mBAAmBE,CAAnB,EAAsBI,OAAtB,CAA8Bc,MAA/C;AACA,4BAAIC,iBAAiBC,SAAUH,UAAV,IAAyBG,SAAUtB,mBAAmBE,CAAnB,EAAsBgB,OAAhC,CAA9C;AACA,4BAAIK,iBAAJ;AACA,+BAAO,CAAEA,QAAF,IAAcF,iBAAiBxB,MAAM2B,OAA5C,EAAsD;AAClDD,uCAAW1B,MAAMC,IAAN,CAAWF,SAAX,EAAsB6B,aAAtB,CAAqC,oBAAoBJ,cAApB,GAAqC,IAA1E,CAAX;AACAA;AACH;AACDxB,8BAAMC,IAAN,CAAWF,SAAX,EAAsB8B,YAAtB,CAAoClB,EAApC,EAAwCe,QAAxC;;AAEAI,gDAAwB9B,KAAxB;AACH;AACJ;AACJ;AACJ;AACJ,KA1CmB;AA2CpB+B,2BAAuB,+BAAU/B,KAAV,EAAiB;AACpC,YAAGA,KAAH,EAAU;AACN,gBAAIgC,mCAAUhC,MAAMiC,oBAAN,CAA4B,IAA5B,CAAV,EAAJ;AACA,iBAAK,IAAI/B,IAAI,CAAb,EAAgBA,IAAI8B,IAAI1B,MAAxB,EAAgCJ,GAAhC,EAAsC;AAClC,oBAAI8B,IAAI9B,CAAJ,EAAOgC,YAAP,CAAqB,gCAArB,CAAJ,EAA8D;AAC1D,wBAAIC,6BAA6BH,IAAI9B,CAAJ,EAAOO,OAAP,CAAeC,sBAAhD;AACA,wBAAI0B,wBAAwBpC,MAAMqC,gBAAN,CAAwB,sCAAsCF,0BAAtC,GAAmE,IAA3F,CAA5B;AACA,yBAAK,IAAI9B,IAAI,CAAb,EAAgBA,IAAI+B,sBAAsB9B,MAA1C,EAAkDD,GAAlD,EAAwD;AACpD,4BAAI+B,sBAAsB/B,CAAtB,KAA4B+B,sBAAsB/B,IAAI,CAA1B,CAAhC,EAA+D;AAC3D,gCAAI+B,sBAAsB/B,CAAtB,EAAyBiC,UAAzB,IAAuCF,sBAAsB/B,IAAI,CAA1B,EAA6BiC,UAApE,IACA,CAAEF,sBAAsB/B,CAAtB,EAAyBiC,UAAzB,CAAoCC,SAApC,CAA8CC,QAA9C,CAAwD,iBAAxD,CADF,IAEA,CAAEJ,sBAAsB/B,IAAI,CAA1B,EAA6BiC,UAA7B,CAAwCC,SAAxC,CAAkDC,QAAlD,CAA4D,iBAA5D,CAFN,EAEwF;AACpF,oCAAMJ,sBAAsB/B,IAAI,CAA1B,EAA6BI,OAA7B,CAAqCgC,MAArC,IAA+ChB,SAAUW,sBAAsB/B,CAAtB,EAAyBI,OAAzB,CAAiCgC,MAA3C,IACjDhB,SAAUW,sBAAsB/B,CAAtB,EAAyBE,OAAnC,CADJ,EACqD;AACjD6B,0DAAsB/B,CAAtB,EAAyBE,OAAzB,IAAoC6B,sBAAsB/B,IAAI,CAA1B,EAA6BE,OAAjE;;AAEA,wCAAImC,kEAAyCN,sBAAsB/B,IAAI,CAA1B,EAA6BD,QAAtE,EAAJ;;AAEA,yCAAK,IAAIuC,IAAI,CAAb,EAAgBA,IAAID,mCAAmCpC,MAAvD,EAA+DqC,GAA/D,EAAqE;AACjEP,8DAAsB/B,CAAtB,EAAyBuC,WAAzB,CAAsCF,mCAAmCC,CAAnC,CAAtC;AACH;;AAED,wCAAIE,UAAUT,sBAAsB/B,IAAI,CAA1B,EAA6BiC,UAA3C;AACAO,4CAAQC,WAAR,CAAqBV,sBAAsB/B,IAAI,CAA1B,CAArB;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;;AAEDyB,oCAAwB9B,KAAxB;AACH;AACJ,KA5EmB;AA6EpB+C,wBAAoB,4BAAUC,GAAV,EAAehD,KAAf,EAAsB;AACtC,aAAM,IAAIE,IAAI,CAAd,EAAiBA,IAAIF,MAAMC,IAAN,CAAWK,MAAhC,EAAwCJ,GAAxC,EAA8C;AAC1C,gBAAI8C,MAAMhD,MAAM2B,OAAhB,EAA0B;AACtB,oBAAIqB,OAAO,CAAP,IAAc,CAAEhD,MAAMC,IAAN,CAAWC,CAAX,EAAc0B,aAAd,CAA6B,oBAAoBoB,GAApB,GAA0B,IAAvD,CAApB,EAAsF;AAClF,wBAAIC,cAAcjD,MAAMC,IAAN,CAAWC,CAAX,EAAcE,QAAhC;;AAEA,wBAAIO,WAAJ;AAAA,wBACIuC,oBAAoBD,YAAY3C,MADpC;AAAA,wBAEI6C,gBAFJ;AAAA,wBAGIC,qBAHJ;AAAA,wBAIIC,mBAJJ;AAAA,wBAKIC,qBALJ;AAMA,yBAAK,IAAIjD,IAAI,CAAb,EAAgBA,IAAI6C,iBAApB,EAAuC7C,GAAvC,EAA6C;AACzC,4BAAI4C,YAAY5C,CAAZ,EAAegB,OAAf,GAAyB,CAAzB,IAA8BI,SAAUwB,YAAY5C,CAAZ,EAAeI,OAAf,CAAuBc,MAAjC,IAA4CyB,GAA1E,IACAvB,SAAUwB,YAAY5C,CAAZ,EAAeI,OAAf,CAAuBc,MAAjC,IAA4CE,SAAUwB,YAAY5C,CAAZ,EAAegB,OAAzB,CAA5C,GAAiF2B,GADrF,EAC2F;AACvF,gCAAGhD,MAAMY,cAAN,CAAqB,UAArB,CAAH,EAAqC;AACjCD,qCAAK,IAAIX,MAAMa,QAAV,CAAoBb,MAAMc,IAA1B,CAAL;AACAH,qCAAKA,GAAGI,aAAH,EAAL;AACH,6BAHD,MAGO;AACHJ,qCAAKK,SAASC,aAAT,CAAuB,IAAvB,CAAL;AACH;;AAEDmC,2CAAeH,YAAY5C,CAAZ,EAAeE,OAA9B;AACA8C,yCAAaJ,YAAY5C,CAAZ,EAAegB,OAA5B;AACA4B,wCAAY5C,CAAZ,EAAegB,OAAf,GAAyB2B,MAAMC,YAAY5C,CAAZ,EAAeI,OAAf,CAAuBc,MAAtD;AACA+B,2CAAeD,aAAaJ,YAAY5C,CAAZ,EAAegB,OAA3C;;AAEA,gCAAI,CAAE4B,YAAY5C,CAAZ,EAAeI,OAAf,CAAuBC,sBAA7B,EAAsD;AAClDuC,4CAAY5C,CAAZ,EAAeI,OAAf,CAAuBC,sBAAvB,GAAgD,MAAMR,CAAN,GAAU,GAAV,GAAgBG,CAAhE;AACH;;AAED,gCAAIkD,cAAcN,YAAY5C,CAAZ,EAAec,YAAf,CAA6B,OAA7B,CAAlB;AACAR,+BAAGS,YAAH,CAAiB,OAAjB,EAA0BmC,WAA1B;;AAEA,gCAAIC,gBAAgBxD,MAAM4B,aAAN,CAAqB,oBAAoBoB,GAApB,GAA0B,IAA/C,CAApB;AACA,gCAAIQ,aAAJ,EAAoB;AAChB7C,mCAAG8C,KAAH,CAASC,KAAT,GAAiBF,cAAcC,KAAd,CAAoBC,KAArC;AACH;;AAED,gCAAIC,gBAAgB3D,MAAM4B,aAAN,CAAqB,oBAAoB1B,CAApB,GAAwB,IAA7C,CAApB;AACA,gCAAIyD,aAAJ,EAAoB;AAChBhD,mCAAG8C,KAAH,CAASG,MAAT,GAAkBD,cAAcF,KAAd,CAAoBG,MAAtC;AACH;AACD,gCAAIX,YAAY5C,IAAI,CAAhB,CAAJ,EAAyB;AACrB8C,0CAAUF,YAAY5C,IAAI,CAAhB,CAAV;AACH,6BAFD,MAEO;AACH8C,0CAAU,IAAV;AACH;;AAEDnD,kCAAMC,IAAN,CAAWC,CAAX,EAAc2B,YAAd,CAA4BlB,EAA5B,EAAgCwC,OAAhC;AACAxC,+BAAGU,OAAH,GAAaiC,YAAb;AACA3C,+BAAGJ,OAAH,GAAa6C,YAAb;AACAzC,+BAAGF,OAAH,CAAWC,sBAAX,GAAoCuC,YAAY5C,CAAZ,EAAeI,OAAf,CAAuBC,sBAA3D;AACAR,iCAAKkD,eAAe,CAApB;AACA;AACH;AACJ;AACJ;AACJ;AACDtB,oCAAwB9B,KAAxB;AACH;AACJ,KA1ImB;AA2IpB6D,yBAAqB,6BAAU7D,KAAV,EAAiB;AAClC,YAAIA,KAAJ,EAAY;AACR,gBAAIgC,mCAAUhC,MAAMiC,oBAAN,CAA4B,IAA5B,CAAV,EAAJ;AACA,iBAAK,IAAI/B,IAAI,CAAb,EAAgBA,IAAI8B,IAAI1B,MAAxB,EAAgCJ,GAAhC,EAAsC;AAClC,oBAAI8B,IAAI9B,CAAJ,EAAOgC,YAAP,CAAqB,gCAArB,CAAJ,EAA8D;AAC1D,wBAAIC,6BAA6BH,IAAI9B,CAAJ,EAAOO,OAAP,CAAeC,sBAAhD;AACA,wBAAI0B,qDAA4BpC,MAAMqC,gBAAN,CAAwB,sCAAsCF,0BAAtC,GAAmE,IAA3F,CAA5B,EAAJ;;AAEA,wBAAI2B,eAAe,IAAnB;AACA,yBAAK,IAAIzD,IAAI,CAAb,EAAgBA,IAAI+B,sBAAsB9B,MAA1C,EAAkDD,GAAlD,EAAwD;AACpD,4BAAI+B,sBAAsB/B,CAAtB,KAA4B+B,sBAAsB/B,IAAI,CAA1B,CAA5B,IACA,CAAE+B,sBAAsB/B,CAAtB,EAAyBkC,SAAzB,CAAmCC,QAAnC,CAA6C,oBAA7C,CADF,IAEA,CAAEJ,sBAAsB/B,IAAI,CAA1B,EAA6BkC,SAA7B,CAAuCC,QAAvC,CAAiD,oBAAjD,CAFN,EAEgF;AAC5E,gCAAMJ,sBAAsB/B,IAAI,CAA1B,EAA6BI,OAA7B,CAAqCc,MAArC,IAA+CE,SAAUW,sBAAsB/B,CAAtB,EAAyBI,OAAzB,CAAiCc,MAA3C,IACjDE,SAAUW,sBAAsB/B,CAAtB,EAAyBgB,OAAnC,CADJ,EACqD;AACjD,oCAAIyC,gBAAgB,IAApB,EAA2B;AACvBA,mDAAezD,CAAf;AACH;AACD+B,sDAAsB0B,YAAtB,EAAoCzC,OAApC,IAA+Ce,sBAAsB/B,IAAI,CAA1B,EAA6BgB,OAA5E;;AAEA,oCAAIqB,kEAAyCN,sBAAsB/B,IAAI,CAA1B,EAA6BD,QAAtE,EAAJ;;AAEA,qCAAK,IAAIuC,IAAI,CAAb,EAAgBA,IAAID,mCAAmCpC,MAAvD,EAA+DqC,GAA/D,EAAqE;AACjEP,0DAAsB0B,YAAtB,EAAoClB,WAApC,CAAiDF,mCAAmCC,CAAnC,CAAjD;AACH;;AAED,oCAAIoB,UAAU3B,sBAAsB/B,IAAI,CAA1B,EAA6BiC,UAA3C;AACAyB,wCAAQjB,WAAR,CAAqBV,sBAAsB/B,IAAI,CAA1B,CAArB;AACH;AACJ;AACJ;AACJ;AACJ;;AAEDyB,oCAAwB9B,KAAxB;AACH;AACJ;AA/KmB,CAAxB;;;ACAA,IAAMgE,qBAAqB,SAArBA,kBAAqB,CAAUhE,KAAV,EAAiB;AAC3C,MAAKA,KAAL,GAAaA,KAAb;AACA,KAAMiE,aAAa,IAAnB;AACA,MAAKC,MAAL,GAAclE,MAAMC,IAAN,CAAWK,MAAX,GAAoBN,MAAMC,IAAN,CAAW,CAAX,CAApB,GAAoC,IAAlD;AACA,MAAKkE,cAAL,GAAsB,CAAtB;;AAEA;;;;;;AAMA,MAAKC,gBAAL,GAAwB,UAAUC,IAAV,EAAgBC,MAAhB,EAAwBC,MAAxB,EAAgC;AACvD,MAAIF,SAAS,UAAb,EAAyB;AACxB,QAAKrE,KAAL,CAAWwE,mBAAX,CAA+B,OAA/B,EAAwC,KAAKC,0BAA7C,EAAyE,KAAzE;;AAEA,OAAIH,MAAJ,EAAY;AACX,SAAKF,gBAAL,CAAsB,YAAtB,EAAoC,KAApC;AACA,SAAKM,4BAAL,CAAkC,UAAlC,EAA8C,IAA9C;AACA,SAAK1E,KAAL,CAAW2E,gBAAX,CAA4B,OAA5B,EAAqC,KAAKF,0BAA1C,EAAsE,KAAtE;AACA,SAAKzE,KAAL,CAAWS,OAAX,CAAmBmE,yBAAnB,GAA+C,GAA/C;AACA,IALD,MAKO;AACN,SAAKF,4BAAL,CAAkC,UAAlC,EAA8C,KAA9C;AACA,WAAO,KAAK1E,KAAL,CAAWS,OAAX,CAAmBmE,yBAA1B;AACA;AACD,GAZD,MAYO,IAAIP,SAAS,YAAb,EAA2B;AACjC,QAAKrE,KAAL,CAAWwE,mBAAX,CAA+B,OAA/B,EAAwC,KAAKK,4BAA7C,EAA2E,KAA3E;;AAEA,OAAIP,MAAJ,EAAY;AACX,SAAKF,gBAAL,CAAsB,UAAtB,EAAkC,KAAlC;AACA,SAAKM,4BAAL,CAAkC,YAAlC,EAAgD,IAAhD;AACA,SAAK1E,KAAL,CAAW2E,gBAAX,CAA4B,OAA5B,EAAqC,KAAKE,4BAA1C,EAAwE,KAAxE;AACA,SAAK7E,KAAL,CAAWS,OAAX,CAAmBqE,2BAAnB,GAAiD,GAAjD;AACA,IALD,MAKO;AACN,SAAKJ,4BAAL,CAAkC,YAAlC,EAAgD,KAAhD;AACA,WAAO,KAAK1E,KAAL,CAAWS,OAAX,CAAmBqE,2BAA1B;AACA;AACD;AACD,EA1BD;;AA4BA;;;;;;AAMA,MAAKC,2BAAL,GAAmC,UAAUC,eAAV,EAA2B;AAC7D,MAAIX,OAAO,EAAX;AACA,MAAIY,kBAAJ;AACA,MAAIC,mBAAJ;AACA,MAAI,KAAKlF,KAAL,CAAWS,OAAX,CAAmBmE,yBAAnB,IACH,KAAK5E,KAAL,CAAWS,OAAX,CAAmBmE,yBAAnB,KAAiD,GADlD,EACuD;AACtDK,eAAY,UAAZ;AACAC,gBAAa,YAAb;AACA,GAJD,MAIO,IACN,KAAKlF,KAAL,CAAWS,OAAX,CAAmBqE,2BAAnB,IACA,KAAK9E,KAAL,CAAWS,OAAX,CAAmBqE,2BAAnB,KAAmD,GAF7C,EAGL;AACDG,eAAY,YAAZ;AACAC,gBAAa,UAAb;AACA;;AAGD,MAAIC,mBAAJ;AACA,MAAGH,mBAAmBA,gBAAgBI,YAAhB,CAA6B,KAAKpF,KAAlC,CAAtB,EAA+D;AAC9DmF,gBAAa,sBAAW;AACvB,QAAIE,aAAJ;AACA,QAAIC,aAAaN,gBAAgBI,YAAhB,CAA6B,KAAKpF,KAAlC,CAAjB;AACA,QAAIsF,cAAcA,WAAWC,aAA7B,EAA4C;AAC3C,aAAQD,WAAWC,aAAnB;AACC,WAAK,QAAL;AACC;AACAF,cAAOG,OAAOC,UAAd;AACA;AACD,WAAK,WAAL;AACC;AACA;AACAJ,cAAOK,EAAEC,EAAF,CAAKrD,UAAL,CAAgBA,UAAhB,CAA2BA,UAA3B,CAAsCsD,WAA7C;AACA;AACD;AACC;AACAP,cAAOG,OAAOC,UAAd;AACA;AAbF;AAeA,KAhBD,MAgBO;AACNJ,YAAO,KAAKrF,KAAL,CAAW6F,qBAAX,GAAmCnC,KAA1C;AACA;AACD,QAAMoC,cAAcd,gBAAgBe,gBAAhB,CAAiCV,IAAjC,EAAuCC,WAAWU,WAAlD,CAApB;AACA3B,WAAOY,SAAP;AACA,QAAGa,gBAAgB,SAAnB,EAA8B;AAC7B,SAAGR,WAAW1E,cAAX,CAA0B,aAA1B,CAAH,EAA6C;AAC5C,UAAMqF,OAAOX,WAAWY,cAAxB;AACA,UAAMC,cAAcb,WAAWa,WAAX,CAAuBF,IAAvB,CAApB;;AAEA,UAAGE,YAAYvF,cAAZ,CAA2B,gBAA3B,KAAgDuF,YAAYC,cAAZ,CAA2BxF,cAA3B,CAA0CkF,WAA1C,CAAhD,IAA0GK,YAAYC,cAAZ,CAA2BN,WAA3B,CAA7G,EAAsJ;AACrJ,WAAGK,YAAYvF,cAAZ,CAA2B,oBAA3B,KAAoDuF,YAAYE,kBAAZ,CAA+BzF,cAA/B,CAA8CkF,WAA9C,CAAvD,EAAmH;AAClH,YAAGK,YAAYE,kBAAZ,CAA+BP,WAA/B,MAAgD,KAAnD,EAA0D;AACzDzB,gBAAOa,UAAP;AACA,SAFD,MAEO,IAAGiB,YAAYE,kBAAZ,CAA+BP,WAA/B,MAAgD,QAAnD,EAA6D;AACnE,aAAGK,YAAYvF,cAAZ,CAA2B,aAA3B,CAAH,EAA8C;AAC7C,eAAKuD,cAAL,GAAuBgC,YAAYG,WAAZ,CAAwBR,WAAxB,CAAvB;AACA;AACD;AACD;AACD;AACD;AACD;AACD,SAAK1B,gBAAL,CAAsBC,IAAtB,EAA4B,IAA5B;AACA,IA3CD;AA4CA,GA7CD,MA6CO;AACNc,gBAAa,sBAAW;AACvB,QAAId,OAAOY,SAAX;AACA,QAAI,KAAKjF,KAAL,CAAWuC,SAAX,CAAqBC,QAArB,CAA8B,yBAA9B,CAAJ,EAA8D;AAC7D,SAAG,KAAKxC,KAAL,CAAWuC,SAAX,CAAqBC,QAArB,CAA8B,yBAA9B,CAAH,EAA6D;AAC5D6B,aAAOa,UAAP;AACA;AACD,SAAIlF,SAAQ,KAAKA,KAAjB;AACA,UAAKA,KAAL,GAAaA,OAAMsC,UAAN,CAAiBA,UAAjB,CAA4BV,aAA5B,CAA0C,4BAA1C,CAAb;AACA,UAAKwC,gBAAL,CAAsBC,IAAtB,EAA4B,IAA5B;AACA,UAAKrE,KAAL,GAAaA,MAAb;AACA;AACA;;AAED,SAAKoE,gBAAL,CAAsBC,IAAtB,EAA4B,IAA5B;AACA,IAdD;AAeA;;AAEDc,aAAWoB,IAAX,CAAgBtC,UAAhB;AACA,OAAKjE,KAAL,CAAW2E,gBAAX,CAA4B,eAA5B,EAA6C,UAAU6B,CAAV,EAAa;AACzDrB,cAAWoB,IAAX,CAAgBtC,UAAhB;AACA,GAFD,EAEG,KAFH;AAGA,EArFD;;AAuFA;;;;;;;AAOA,MAAKS,4BAAL,GAAoC,UAAUL,IAAV,EAAgBC,MAAhB,EAAwB;AAC3D,MAAID,SAAS,UAAb,EAAyB;AACxB,OAAIoC,aAAa,KAAKzG,KAAL,CAAWC,IAAX,CAAgBK,MAAjC;AACA,OAAIoG,kBAAkB,CAAtB;AACA,UAAOD,aAAa,CAApB,EAAuB;AACtB,QAAIzE,MAAM,KAAKhC,KAAL,CAAWqC,gBAAX,qBAA8CqE,eAA9C,QAAV;AACA1E,uCAAUA,GAAV;AACAA,QAAI2E,GAAJ,CAAQ,UAAChG,EAAD,EAAQ;AACfA,QAAG6D,mBAAH,CAAuB,WAAvB,EAAoCoC,4BAApC,EAAkE,KAAlE;AACAjG,QAAG6D,mBAAH,CAAuB,YAAvB,EAAqCqC,YAArC,EAAmD,KAAnD;AACA,SAAIvC,MAAJ,EAAY;AACX3D,SAAGgE,gBAAH,CAAoB,WAApB,EAAiCiC,4BAAjC,EAA+D,KAA/D;AACAjG,SAAGgE,gBAAH,CAAoB,YAApB,EAAkCkC,YAAlC,EAAgD,KAAhD;AACA,UAAG,CAAClG,GAAGF,OAAH,CAAWqG,cAAf,EAA+B;AAC9BnG,UAAGF,OAAH,CAAWqG,cAAX,GAA4B,KAA5B;AACA;AACD;AACD,KAVD;;AAYA,QAAG,KAAK3C,cAAR,EAAwB;AACvBsC,mBAAe,KAAKtC,cAAL,GAAsB,CAArC;AACAuC,wBAAoB,KAAKvC,cAAL,GAAsB,CAA1C;AACA,KAHD,MAGO;AACNsC,kBAAa,CAAb;AACA;AACD;AACD,GAzBD,MAyBO,IAAIpC,SAAS,YAAb,EAA2B;AACjC,OAAIrC,OAAM,KAAKhC,KAAL,CAAWqC,gBAAX,CAA4B,oBAA5B,CAAV;AACAL,uCAAUA,IAAV;AACAA,QAAI2E,GAAJ,CAAQ,UAAChG,EAAD,EAAQ;AACfA,OAAG6D,mBAAH,CAAuB,WAAvB,EAAoCuC,8BAApC,EAAoE,KAApE;AACApG,OAAG6D,mBAAH,CAAuB,YAAvB,EAAqCqC,YAArC,EAAmD,KAAnD;AACA,QAAIvC,MAAJ,EAAY;AACX3D,QAAGgE,gBAAH,CAAoB,WAApB,EAAiCoC,8BAAjC,EAAiE,KAAjE;AACApG,QAAGgE,gBAAH,CAAoB,YAApB,EAAkCkC,YAAlC,EAAgD,KAAhD;AACA;AACD,IAPD;AAQA;AACD,EAtCD;;AAwCA;;;;;;;AAOA,UAASG,mBAAT,CAA6BR,CAA7B,EAAgCnC,IAAhC,EAAsC4C,OAAtC,EAA+C;AAC9C,MAAIT,EAAEU,MAAF,CAASC,OAAT,KAAqB,IAAzB,EAA+B;AAC9B,OAAMC,IAAIZ,EAAEa,OAAF,IAAaC,SAAb,GAAyBd,EAAEe,MAA3B,GAAoCf,EAAEa,OAAhD;AACA,OAAMG,IAAIhB,EAAEiB,OAAF,IAAaH,SAAb,GAAyBd,EAAEkB,MAA3B,GAAoClB,EAAEiB,OAAhD;AACA,OAAIE,SAAS,KAAb;AACA,OAAKtD,SAAS,UAAT,IAAuBmC,EAAEU,MAAF,CAAStB,WAAT,GAAuBwB,CAAvB,IAA4B,EAApD,IAA4D/C,SAAS,YAAT,IAAyB+C,KAAK,EAA9F,EAAmG;AAClGO,aAAS,IAAT;AACA;AACD,OAAIA,UAAU,CAACnB,EAAEU,MAAF,CAASU,YAAT,GAAwB,EAAzB,IAA+B,CAA/B,GAAmCJ,CAA7C,IAAkD,CAAChB,EAAEU,MAAF,CAASU,YAAT,GAAwB,EAAzB,IAA+B,CAA/B,GAAmCJ,CAAzF,EAA4F;AAC3FP,YAAQ1E,SAAR,CAAkBsF,GAAlB,CAAsB,gBAAtB;AACA,IAFD,MAEO;AACNZ,YAAQ1E,SAAR,CAAkBuF,MAAlB,CAAyB,gBAAzB;AACA;AACD,GAZD,MAYO;AACNb,WAAQ1E,SAAR,CAAkBuF,MAAlB,CAAyB,gBAAzB;AACA;AACD;;AAED;;;;;AAKA,UAASlB,4BAAT,CAAsCJ,CAAtC,EAAyC;AACxCQ,sBAAoBR,CAApB,EAAuB,UAAvB,EAAmC,IAAnC;AACA;;AAED;;;;;AAKA,UAASO,8BAAT,CAAwCP,CAAxC,EAA2C;AAC1CQ,sBAAoBR,CAApB,EAAuB,YAAvB,EAAqC,IAArC;AACA;;AAED;;;AAGA,UAASK,YAAT,GAAwB;AACvB,OAAKtE,SAAL,CAAeuF,MAAf,CAAsB,gBAAtB;AACA;;AAED;;;;;;;AAOA,UAASC,aAAT,CAAuBvB,CAAvB,EAA0BxG,KAA1B,EAAiCqE,IAAjC,EAAuC;AACtC,MACCmC,EAAEU,MAAF,IACAV,EAAEU,MAAF,CAASC,OAAT,KAAqB,IADrB,IAEA,CAACnH,MAAMsC,UAAN,CAAiBC,SAAjB,CAA2BC,QAA3B,CAAoC,iCAApC,CAHF,EAIE;AACD,OAAIwF,iBAAiB,KAArB;AACA,OAAI3D,SAAS,UAAT,IAAuBmC,EAAEU,MAAF,CAASzG,OAAT,CAAiBG,cAAjB,CAAgC,gBAAhC,CAA3B,EAA8E;;AAE7E;;;;AAIA,QAAIqH,kBAAkB,EAAtB;AACA,QAAIC,iBAAiB,EAArB;AACA,QAAG,KAAK/D,cAAL,IAAuB,KAAKA,cAAL,GAAsBnE,MAAMC,IAAN,CAAWK,MAA3D,EAAmE;AAClEwB,6BAAwB9B,KAAxB;AACA,SAAImI,4CAAmBnI,MAAMC,IAAzB,EAAJ;AACA,SAAImI,gBAAgBpI,MAAM4B,aAAN,CAAoB,OAApB,IAA+B5B,MAAM4B,aAAN,CAAoB,OAApB,CAA/B,GAA8D5B,KAAlF;AACA,UAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAIiI,aAAa7H,MAAhC,EAAwCJ,GAAxC,EAA6C;AAC5C,UAAGA,IAAIsG,EAAEU,MAAF,CAASzG,OAAT,CAAiBgC,MAAxB,EAAgC;AAC/BwF,uBAAgBI,IAAhB,CAAqBF,aAAajI,CAAb,CAArB;AACAkI,qBAActF,WAAd,CAA0BqF,aAAajI,CAAb,CAA1B;AACA,OAHD,MAGO,IAAGA,IAAIsG,EAAEU,MAAF,CAASzG,OAAT,CAAiBgC,MAAjB,GAA0B,KAAK0B,cAAtC,EAAsD;AAC5D+D,sBAAeG,IAAf,CAAoBF,aAAajI,CAAb,CAApB;AACAkI,qBAActF,WAAd,CAA0BqF,aAAajI,CAAb,CAA1B;AACA;AACD;AACD4B,6BAAwB9B,KAAxB;AACA;;AAED,QAAIgC,MAAMhC,MAAMqC,gBAAN,qBAAyCmE,EAAEU,MAAF,CAASzG,OAAT,CAAiBc,MAA1D,QAAV;AACAS,uCAAUA,GAAV;;AAEA;;;AAGA,QAAIsG,gBAAJ;AACA,QAAIC,eAAJ;AACAvG,QAAI2E,GAAJ,CAAQ,UAAChG,EAAD,EAAQ;AACf,SAAI,EAAE2H,UAAU7G,SAASd,GAAGJ,OAAZ,EAAqB,EAArB,CAAZ,CAAJ,EAA2C;AAC1C+H,gBAAU,CAAV;AACA;AACDC,cAAS5H,GAAGF,OAAH,CAAWgC,MAApB;AACA5C,uBAAkBC,oBAAlB,CAAuCyI,MAAvC,EAA+CvI,KAA/C;AACAuI,eAAUD,OAAV;AACAzI,uBAAkBC,oBAAlB,CAAuCyI,MAAvC,EAA+CvI,KAA/C;AACA,KARD;;AAUA,QAAMwI,gBAAgB,EAAtB;AACA,QAAIC,oBAAJ;AACA,QAAIC,2BAA2B,CAA/B;AACA,QAAIC,kBAAkB,EAAtB;AACA,SAAK,IAAIzI,KAAI,CAAb,EAAgBA,KAAI8B,IAAI1B,MAAxB,EAAgCJ,IAAhC,EAAqC;AACpC,SAAM0I,aAAaC,2BAClBrC,CADkB,EAElBxG,KAFkB,EAGlBgC,GAHkB,EAIlB9B,EAJkB,EAKlBwI,wBALkB,EAMlB,UANkB,CAAnB;AAQA,SAAIE,cAAcA,WAAWhI,cAAX,CAA0B,GAA1B,CAAlB,EAAkD;AACjDoB,YAAM4G,WAAW5G,GAAjB;AACA9B,WAAI0I,WAAW1I,CAAf;AACA;AACA,MAJD,MAIO,IAAI0I,UAAJ,EAAgB;AACtB5G,YAAM4G,WAAW5G,GAAjB;AACA;;AAED,SAAMrB,KAAKqB,IAAI9B,EAAJ,CAAX;;AAEA,SAAI4I,YAAYrH,SAASd,GAAGJ,OAAZ,EAAqB,EAArB,CAAhB;AACA,SAAI,CAACuI,SAAL,EAAgBA,YAAY,CAAZ;;AAEhBJ,gCAA2BjH,SAASd,GAAGF,OAAH,CAAWgC,MAApB,EAA4B,EAA5B,IAAkCqG,SAA7D;;AAEA,SAAMC,qBAAqBC,sBAAsBrI,EAAtB,CAA3B;;AAEA,SAAMsI,SAAS,EAAf;AACA,UAAK,IAAI5I,IAAI,CAAb,EAAgBA,IAAIyI,SAApB,EAA+BzI,GAA/B,EAAoC;AACnC4I,aAAOZ,IAAP,CAAYrI,MAAMC,IAAN,CAAWwB,SAASd,GAAGF,OAAH,CAAWgC,MAApB,EAA4B,EAA5B,IAAkCpC,CAA7C,CAAZ;AACAsI,sBAAgBN,IAAhB,CAAqB5G,SAASd,GAAGF,OAAH,CAAWgC,MAApB,EAA4B,EAA5B,IAAkCpC,CAAvD;AACA;AACD,SAAIM,GAAGF,OAAH,CAAWgC,MAAX,GAAoB,CAAxB,EAA2B;AAC1B+F,oBAAcH,IAAd,CAAmB;AAClBY,qBADkB;AAElBC,cAAOH;AAFW,OAAnB;AAIA,MALD,MAKO;AACNN,oBAAcQ,MAAd;AACA;AACD;;AAED,QAAME,UAAUC,qBAAqB5C,CAArB,EAAwB,gBAAxB,CAAhB;AACA,QAAI,CAAC2C,OAAL,EAAc;;AAEd,QAAIX,cAAclI,MAAlB,EAA0BkI,cAAca,IAAd,CAAmB,UAACC,IAAD,EAAOC,IAAP;AAAA,YAAgBC,UAAUL,OAAV,EAAmBG,IAAnB,EAAyBC,IAAzB,CAAhB;AAAA,KAAnB;;AAE1Bf,kBAAciB,OAAd,CAAsB,EAAER,QAAQR,WAAV,EAAtB;;AAEA,QAAGD,cAAclI,MAAd,GAAuBN,MAAMC,IAAN,CAAWK,MAArC,EAA6C;AAC5C,UAAI,IAAIJ,MAAI,CAAZ,EAAeA,MAAIF,MAAMC,IAAN,CAAWK,MAA9B,EAAsCJ,KAAtC,EAA2C;AAC1C,UAAGyI,gBAAgBe,OAAhB,CAAwBxJ,GAAxB,IAA6B,CAAC,CAAjC,EAAoC;AACpC,UAAI+I,UAAS,EAAb;AACAA,cAAOZ,IAAP,CAAYrI,MAAMC,IAAN,CAAWC,GAAX,CAAZ;;AAEAsI,oBAAcH,IAAd,CAAmB;AAClBY;AADkB,OAAnB;AAGA;AACD;;AAED,QAAMU,QAAQ3J,MAAM4B,aAAN,CAAoB,OAApB,CAAd;AACA+H,UAAMC,SAAN,GAAkB,EAAlB;;AAEApB,kBAAc7B,GAAd,CAAkB,UAACkD,UAAD,EAAgB;AACjCA,gBAAWZ,MAAX,CAAkBtC,GAAlB,CAAsB,UAACmD,GAAD,EAAS;AAC9BH,YAAM/G,WAAN,CAAkBkH,GAAlB;AACA,MAFD;AAGA,KAJD;;AAMA;;;AAGA,QAAG7B,gBAAgB3H,MAAnB,EAA2B;AAC1B,SAAI8H,iBAAgBpI,MAAM4B,aAAN,CAAoB,OAApB,IAA+B5B,MAAM4B,aAAN,CAAoB,OAApB,CAA/B,GAA8D5B,KAAlF;AACA,SAAGoI,cAAH,EAAkB;AACjB,UAAI2B,QAAQ3B,eAAcxG,aAAd,CAA4B,IAA5B,CAAZ;AACAqG,sBAAgBtB,GAAhB,CAAoB,cAAM;AACzByB,sBAAcvG,YAAd,CAA2BmI,EAA3B,EAA+BD,KAA/B;AACA,OAFD;AAGA;AACD;AACD,QAAG7B,eAAe5H,MAAlB,EAA0B;AACzB,SAAI8H,kBAAgBpI,MAAM4B,aAAN,CAAoB,OAApB,IAA+B5B,MAAM4B,aAAN,CAAoB,OAApB,CAA/B,GAA8D5B,KAAlF;AACA,SAAG2J,KAAH,EAAU;AACTzB,qBAAevB,GAAf,CAAmB,cAAM;AACxByB,uBAAcxF,WAAd,CAA0BoH,EAA1B;AACA,OAFD;AAGA;AACD;;AAEDlI,4BAAwB9B,KAAxB;;AAEAH,sBAAkBkC,qBAAlB,CAAwC/B,KAAxC;;AAEAgI,qBAAiB,IAAjB;AACA,IA7ID,MA6IO,IAAI3D,SAAS,YAAT,IAAyBmC,EAAEU,MAAF,CAASzG,OAAT,CAAiBc,MAAjB,KAA4B,GAAzD,EAA8D;AACpE,QAAIS,QAAMhC,MAAMqC,gBAAN,qBAAyCmE,EAAEU,MAAF,CAASzG,OAAT,CAAiBgC,MAA1D,QAAV;AACAT,yCAAUA,KAAV;;AAEA;AACA,QAAIiI,gBAAJ;AACA,QAAIC,eAAJ;AACAlI,UAAI2E,GAAJ,CAAQ,UAAChG,EAAD,EAAQ;AACf,SAAI,EAAEsJ,UAAUxI,SAASd,GAAGU,OAAZ,EAAqB,EAArB,CAAZ,CAAJ,EAA2C;AAC1C4I,gBAAU,CAAV;AACA;AACDC,cAASvJ,GAAGF,OAAH,CAAWc,MAApB;AACA1B,uBAAkBkD,kBAAlB,CAAqCmH,MAArC,EAA6ClK,KAA7C;AACAkK,eAAUD,OAAV;AACApK,uBAAkBkD,kBAAlB,CAAqCmH,MAArC,EAA6ClK,KAA7C;AACA,KARD;;AAUA,QAAMmK,mBAAmB,EAAzB;AACA,QAAIC,uBAAJ;;AAEA,QAAIC,2BAA2B,CAA/B;AACA,SAAK,IAAInK,MAAI,CAAb,EAAgBA,MAAI8B,MAAI1B,MAAxB,EAAgCJ,KAAhC,EAAqC;AACpC,SAAM0I,cAAaC,2BAClBrC,CADkB,EAElBxG,KAFkB,EAGlBgC,KAHkB,EAIlB9B,GAJkB,EAKlBmK,wBALkB,EAMlB,YANkB,CAAnB;AAQA,SAAIzB,eAAcA,YAAWhI,cAAX,CAA0B,GAA1B,CAAlB,EAAkD;AACjDoB,cAAM4G,YAAW5G,GAAjB;AACA9B,YAAI0I,YAAW1I,CAAf;AACA;AACA,MAJD,MAIO,IAAI0I,WAAJ,EAAgB;AACtB5G,cAAM4G,YAAW5G,GAAjB;AACA;;AAED,SAAMrB,MAAKqB,MAAI9B,GAAJ,CAAX;AACA,SAAIoK,YAAY7I,SAASd,IAAGU,OAAZ,EAAqB,EAArB,CAAhB;AACA,SAAI,CAACiJ,SAAL,EAAgBA,YAAY,CAAZ;;AAEhBD,gCAA2B5I,SAASd,IAAGF,OAAH,CAAWc,MAApB,EAA4B,EAA5B,IAAkC+I,SAA7D;;AAEA,SAAMvB,sBAAqBC,sBAAsBrI,GAAtB,CAA3B;AACA,SAAM4J,YAAY,EAAlB;AACA,UAAK,IAAIlK,KAAI,CAAb,EAAgBA,KAAIiK,SAApB,EAA+BjK,IAA/B,EAAoC;AACnC,UAAMmK,yCACFxK,MAAMqC,gBAAN,sBAAyCZ,SAASd,IAAGF,OAAH,CAAWc,MAApB,EAA4B,EAA5B,IAAkClB,EAA3E,SADE,EAAN;AAGAkK,gBAAUlC,IAAV,CAAemC,SAAf;AACA;AACD,SAAI7J,IAAGF,OAAH,CAAWc,MAAX,GAAoB,CAAxB,EAA2B;AAC1B4I,uBAAiB9B,IAAjB,CAAsB;AACrBkC,2BADqB;AAErBrB,cAAOH;AAFc,OAAtB;AAIA,MALD,MAKO;AACNqB,uBAAiBG,SAAjB;AACA;AACD;;AAED,QAAMpB,WAAUC,qBAAqB5C,CAArB,EAAwB,kBAAxB,CAAhB;AACA,QAAI,CAAC2C,QAAL,EAAc;;AAEd,QAAIgB,iBAAiB7J,MAArB,EAA6B6J,iBAAiBd,IAAjB,CAAsB,UAACC,IAAD,EAAOC,IAAP;AAAA,YAAgBC,UAAUL,QAAV,EAAmBG,IAAnB,EAAyBC,IAAzB,CAAhB;AAAA,KAAtB;;AAE7BY,qBAAiBV,OAAjB,CAAyB,EAAEc,WAAWH,cAAb,EAAzB;;AAEA,QAAGD,iBAAiB7J,MAAjB,GAA0BN,MAAM2B,OAAnC,EAA4C;AAC3C,SAAI8I,aAAazK,MAAM2B,OAAN,GAAgBwI,iBAAiB7J,MAAlD;AACA,UAAI,IAAIJ,MAAI,CAAZ,EAAeA,MAAIuK,UAAnB,EAA+BvK,KAA/B,EAAoC;AACnC,UAAIsK,0CACAxK,MAAMqC,gBAAN,sBAAyCZ,SAASzB,MAAM2B,OAAf,EAAwB,EAAxB,IAA8BF,SAASgJ,UAAT,EAAqB,EAArB,CAA9B,GAAyDvK,GAAlG,SADA,EAAJ;;AAIAiK,uBAAiB9B,IAAjB,CAAsB;AACrBkC,kBAAW,CAACC,UAAD;AADU,OAAtB;AAGA;AACD;;AAED,SAAK,IAAItK,MAAI,CAAb,EAAgBA,MAAIF,MAAMC,IAAN,CAAWK,MAA/B,EAAuCJ,KAAvC,EAA4C;AAC3CF,WAAMC,IAAN,CAAWC,GAAX,EAAc0J,SAAd,GAA0B,EAA1B;AACA;;AAEDO,qBAAiBxD,GAAjB,CAAqB,UAAC+D,aAAD,EAAmB;AACvCA,mBAAcH,SAAd,CAAwB5D,GAAxB,CAA4B,UAAC6D,SAAD,EAAe;AAC1CA,gBAAU7D,GAAV,CAAc,UAAChG,EAAD,EAAQ;AACrBX,aAAMC,IAAN,CAAWU,GAAGF,OAAH,CAAWgC,MAAtB,EAA8BG,WAA9B,CAA0CjC,EAA1C;AACA,OAFD;AAGA,MAJD;AAKA,KAND;;AAQAmB,4BAAwB9B,KAAxB;;AAEAH,sBAAkBgE,mBAAlB,CAAsC7D,KAAtC;;AAEAgI,qBAAiB,IAAjB;AACA;;AAED,OAAIA,cAAJ,EAAoB;AACnB2C,iCAA6B3K,KAA7B;;AAEA,QAAIA,MAAMY,cAAN,CAAqB,SAArB,CAAJ,EAAqC;AACpC,SAAMgK,UAAU5K,MAAM4K,OAAN,EAAhB;AACA,SAAIA,OAAJ,GAAcC,aAAd;AACA;AACD;AACD;AACD;;AAED;;;;;;;;AAQA,UAASzB,oBAAT,CAA8B5C,CAA9B,EAAiCsE,QAAjC,EAA2C;AAC1C,MAAItE,EAAEuE,aAAF,KAAoBvE,EAAEuE,aAAF,CAAgBxI,SAAhB,CAA0BC,QAA1B,CAAmC,oBAAnC,KACvBgE,EAAEuE,aAAF,CAAgBxI,SAAhB,CAA0BC,QAA1B,CAAmC,2BAAnC,CADG,CAAJ,EACmE;AAClE,OAAI,CAACgE,EAAEU,MAAF,CAASzG,OAAT,CAAiBqK,QAAjB,CAAD,IAA+BtE,EAAEU,MAAF,CAASzG,OAAT,CAAiBqK,QAAjB,MAA+B,KAAlE,EAAyE;AACxEtE,MAAEU,MAAF,CAASzG,OAAT,CAAiBqK,QAAjB,IAA6B,MAA7B;AACA,IAFD,MAEO;AACNtE,MAAEU,MAAF,CAASzG,OAAT,CAAiBqK,QAAjB,IAA6B,KAA7B;AACA;;AAED,UAAOtE,EAAEU,MAAF,CAASzG,OAAT,CAAiBqK,QAAjB,CAAP;AACA;;AAED,SAAO,KAAP;AACA;;AAED;;;;;;;;AAQA,UAAStB,SAAT,GAAgD;AAAA,MAA7BL,OAA6B,uEAAnB,KAAmB;AAAA,MAAZG,IAAY;AAAA,MAANC,IAAM;;AAC/C,MAAIyB,YAAY1B,KAAKJ,KAArB;AACA,MAAI+B,YAAY1B,KAAKL,KAArB;AACA,MAAIzH,SAASuJ,SAAT,KAAuBvJ,SAASwJ,SAAT,CAA3B,EAAgD;AAC/CD,eAAYvJ,SAASuJ,SAAT,CAAZ;AACAC,eAAYxJ,SAASwJ,SAAT,CAAZ;AACA;;AAED,MAAI9B,YAAY,KAAhB,EAAuB;AACtB,OAAI6B,YAAYC,SAAhB,EAA2B;AAC1B,WAAO,CAAC,CAAR;AACA;AACD,OAAID,cAAcC,SAAlB,EAA6B;AAC5B,WAAO,CAAP;AACA;AACD,UAAO,CAAP;AACA;AACD,MAAID,YAAYC,SAAhB,EAA2B;AAC1B,UAAO,CAAP;AACA;AACD,MAAID,cAAcC,SAAlB,EAA6B;AAC5B,UAAO,CAAP;AACA;AACD,SAAO,CAAC,CAAR;AACA;;AAED;;;;;;AAMA,UAASjC,qBAAT,CAA+BkC,IAA/B,EAAqC;AACpC,MAAIC,eAAeD,KAAK7I,gBAAL,CAAsB,sBAAtB,CAAnB;AACA8I,8CAAmBA,YAAnB;AACA,MAAIjC,QAAQ,EAAZ;AACA,OAAK,IAAI7I,IAAI,CAAb,EAAgBA,IAAI8K,aAAa7K,MAAjC,EAAyCD,GAAzC,EAA8C;AAC7C,OAAM+K,IAAID,aAAa9K,CAAb,EAAgBuB,aAAhB,CAA8B,GAA9B,CAAV;AACAsH,YAASkC,EAAEC,SAAX;AACA,OAAIhL,MAAM8K,aAAa7K,MAAb,GAAsB,CAAhC,EAAmC4I,SAAS,GAAT;AACnC;;AAED,SAAOA,KAAP;AACA;;AAED;;;;;;;;;;;;;AAaA,UAASL,0BAAT,CAAoCrC,CAApC,EAAuCxG,KAAvC,EAA8CgC,GAA9C,EAAmD9B,CAAnD,EAAsDoL,eAAtD,EAAuEjH,IAAvE,EAA6E;AAC5E,MAAM1D,KAAKqB,IAAI9B,CAAJ,CAAX;AACA,MAAIqL,uBAAuB,KAA3B;AACA,MAAIC,sBAAJ;AACA,MAAIC,2BAAJ;AACA,MAAIC,mCAAJ;AACA,MAAIC,kBAAJ;AACA,MAAIC,2BAAJ;AACA,MAAIC,wCAAJ;AACA,MAAIC,uBAAJ;AACA;AACA,MAAIC,wBAAJ;;AAEA,MAAI1H,SAAS,UAAb,EAAyB;AACxBqH,gCAA6B,SAA7B;AACAC,eAAY,cAAZ;AACAC,wBAAqB,QAArB;AACAC,qCAAkC,QAAlC;AACAC,oBAAiB,SAAjB;AACAC,qBAAkB/L,MAAMC,IAAN,CAAWK,MAA7B;AACA,GAPD,MAOO,IAAI+D,SAAS,YAAb,EAA2B;AACjCqH,gCAA6B,SAA7B;AACAC,eAAY,cAAZ;AACAC,wBAAqB,QAArB;AACAC,qCAAkC,QAAlC;AACAC,oBAAiB,SAAjB;AACAC,qBAAkB/L,MAAM2B,OAAxB;AACA;;AAED,MAAIhB,GAAGF,OAAH,CAAWmL,kBAAX,IAAiCN,eAAjC,GAAmD,CAAvD,EAA0D;AACzDE,mBAAgBxL,MAAMqC,gBAAN,OAA2BsJ,SAA3B,UAAyCL,eAAzC,QAAhB;;AAEA,QAAK,IAAIjL,IAAI,CAAb,EAAgBA,IAAImL,cAAclL,MAAlC,EAA0CD,GAA1C,EAA+C;AAC9CoL,yBAAqBD,cAAcnL,CAAd,EAAiBqL,0BAAjB,CAArB;AACA,QAAI,CAACD,kBAAL,EAAyBA,qBAAqB,CAArB;;AAEzB,QACCD,cAAcnL,CAAd,EAAiBI,OAAjB,CAAyBoL,+BAAzB,IACCrF,EAAEU,MAAF,CAASzG,OAAT,CAAiBoL,+BAAjB,CADD,IAEApK,SAAS+J,cAAcnL,CAAd,EAAiBI,OAAjB,CAAyBoL,+BAAzB,CAAT,EAAoE,EAApE,IACCpK,SAASgK,kBAAT,EAA6B,EAA7B,CADD,GAECjF,EAAEU,MAAF,CAASzG,OAAT,CAAiBoL,+BAAjB,CALF,EAME;AACD7J,SAAIgK,MAAJ,CAAW9L,CAAX,EAAc,CAAd,EAAiBsL,cAAcnL,CAAd,CAAjB;AACAkL,4BAAuB,IAAvB;AACArL;AACA;AACA;AACD;AACD;;AAED,MAAIqL,oBAAJ,EAA0B,OAAO,EAAEvJ,QAAF,EAAO9B,IAAP,EAAP;;AAE1B,MAAI+L,SAASxK,SAASd,GAAGmL,cAAH,CAAT,EAA6B,EAA7B,CAAb;AACA,MAAI,CAACG,MAAL,EAAaA,SAAS,CAAT;AACb,MAAI/L,KAAK8B,IAAI1B,MAAJ,GAAa,CAAlB,IAAuBmB,SAASd,GAAGF,OAAH,CAAWmL,kBAAX,CAAT,EAAyC,EAAzC,IAA+CK,MAA/C,GAAwDF,eAAnF,EAAoG;AACnGP,mBAAgBxL,MAAMqC,gBAAN,OACXsJ,SADW,WACGlK,SAASd,GAAGF,OAAH,CAAWmL,kBAAX,CAAT,EAAyC,EAAzC,IAA+CK,MADlD,SAAhB;AAGA,QAAK,IAAI5L,MAAI,CAAb,EAAgBA,MAAImL,cAAclL,MAAlC,EAA0CD,KAA1C,EAA+C;AAC9CoL,yBAAqBD,cAAcnL,GAAd,EAAiBqL,0BAAjB,CAArB;AACA,QAAI,CAACD,kBAAL,EAAyBA,qBAAqB,CAArB;;AAEzB,QACCD,cAAcnL,GAAd,EAAiBI,OAAjB,CAAyBoL,+BAAzB,IACCrF,EAAEU,MAAF,CAASzG,OAAT,CAAiBoL,+BAAjB,CADD,IAEApK,SAAS+J,cAAcnL,GAAd,EAAiBI,OAAjB,CAAyBoL,+BAAzB,CAAT,EAAoE,EAApE,IACCpK,SAASgK,kBAAT,EAA6B,EAA7B,CADD,GAECjF,EAAEU,MAAF,CAASzG,OAAT,CAAiBoL,+BAAjB,CALF,EAME;AACD7J,SAAIqG,IAAJ,CAASmD,cAAcnL,GAAd,CAAT;AACAkL,4BAAuB,IAAvB;AACA;AACA;AACD;AACD;;AAED,MAAIA,oBAAJ,EAA0B,OAAO,EAAEvJ,QAAF,EAAP;AAC1B,SAAO,KAAP;AACA;;AAED;;;;;AAKA,UAAS2I,4BAAT,CAAsC3K,KAAtC,EAA6C;AAC5C,MAAMkM,sCAAalM,MAAMiC,oBAAN,CAA2B,IAA3B,CAAb,EAAN;AACA,OAAK,IAAI/B,IAAI,CAAb,EAAgBA,IAAIgM,OAAO5L,MAA3B,EAAmCJ,GAAnC,EAAwC;AACvC,OAAIgM,OAAOhM,CAAP,EAAUgC,YAAV,CAAuB,gCAAvB,CAAJ,EAA8D;AAC7DgK,WAAOhM,CAAP,EAAUiM,eAAV,CAA0B,gCAA1B;AACA;AACD;AACD;;AAED;;;;;AAKA,MAAK1H,0BAAL,GAAkC,UAAU+B,CAAV,EAAa;AAC9CuB,gBAAcxB,IAAd,CAAmBtC,UAAnB,EAA+BuC,CAA/B,EAAkCxG,KAAlC,EAAyC,UAAzC;AACA,EAFD;;AAIA;;;;;AAKA,MAAK6E,4BAAL,GAAoC,UAAU2B,CAAV,EAAa;AAChDuB,gBAAcxB,IAAd,CAAmBtC,UAAnB,EAA+BuC,CAA/B,EAAkCxG,KAAlC,EAAyC,YAAzC;AACA,EAFD;AAGA,CA1rBD;ACAA,IAAM8B,0BAA0B,SAA1BA,uBAA0B,CAAU9B,KAAV,EAAiB;AAC7C,QAAIoM,MAAMpM,MAAMiC,oBAAN,CAA4B,IAA5B,CAAV;AAAA,QACID,YADJ;AAAA,QACSL,UAAU,CADnB;AAAA,QACsB0K,cAAc,CADpC;AAAA,QACuCC,SAAS,EADhD;;AAGA,SAAM,IAAIpM,IAAI,CAAd,EAAiBA,IAAIkM,IAAI9L,MAAzB,EAAiCJ,GAAjC,EAAuC;AACnC8B,cAAMoK,IAAIlM,CAAJ,EAAO+B,oBAAP,CAA6B,IAA7B,CAAN;;AAEA,YAAKqK,OAAOpM,CAAP,KAAaoH,SAAlB,EAA8B;AAC1BgF,mBAAOpM,CAAP,IAAY,EAAZ;AACH;;AAED,YAAIqM,YAAY,CAAhB;AACA,aAAM,IAAIlM,IAAI,CAAd,EAAiBA,IAAI2B,IAAI1B,MAAzB,EAAiCD,GAAjC,EAAuC;AACnC,gBAAKiM,OAAOpM,CAAP,EAAUG,CAAV,KAAgBiH,SAArB,EAAiC;AAC7B,qBAAM,IAAIE,IAAI,CAAd,EAAiBA,IAAI,GAArB,EAA0BA,GAA1B,EAAgC;AAC5B,wBAAK8E,OAAOpM,CAAP,EAAUqM,SAAV,KAAwBjF,SAA7B,EAAyC;AACrCiF;AACA;AACH;AACDD,2BAAOpM,CAAP,EAAUqM,SAAV,IAAuBvK,IAAI3B,CAAJ,CAAvB;AACA2B,wBAAI3B,CAAJ,EAAOI,OAAP,CAAec,MAAf,GAAwBgL,SAAxB;AACA;AACH;AACJ,aAVD,MAUO;AACHD,uBAAOpM,CAAP,EAAUG,CAAV,IAAe2B,IAAI3B,CAAJ,CAAf;AACA2B,oBAAI3B,CAAJ,EAAOI,OAAP,CAAec,MAAf,GAAwBgL,SAAxB;AACH;AACDvK,gBAAI3B,CAAJ,EAAOI,OAAP,CAAegC,MAAf,GAAwBvC,CAAxB;;AAEA,gBAAK8B,IAAI3B,CAAJ,EAAOgB,OAAP,GAAiB,CAAtB,EAA0B;AACtB,qBAAM,IAAIsB,IAAI,CAAd,EAAiBA,IAAIX,IAAI3B,CAAJ,EAAOgB,OAA5B,EAAqCsB,GAArC,EAA2C;AACvC4J;AACAD,2BAAOpM,CAAP,EAAUqM,SAAV,IAAuB,SAAvB;AACH;AACJ;;AAED,gBAAKvK,IAAI3B,CAAJ,EAAOE,OAAP,GAAiB,CAAtB,EAA0B;AACtB,qBAAM,IAAI6G,IAAI,CAAd,EAAiBA,IAAIpF,IAAI3B,CAAJ,EAAOE,OAA5B,EAAqC6G,GAArC,EAA2C;AACvC,wBAAKkF,OAAOpM,IAAIkH,CAAX,KAAiBE,SAAtB,EAAkC;AAC9BgF,+BAAOpM,IAAIkH,CAAX,IAAgB,EAAhB;AACH;AACD,yBAAM,IAAIoF,IAAI,CAAd,EAAiBA,IAAIxK,IAAI3B,CAAJ,EAAOgB,OAA5B,EAAqCmL,GAArC,EAA2C;AACvCF,+BAAOpM,IAAIkH,CAAX,EAAcmF,YAAYvK,IAAI3B,CAAJ,EAAOgB,OAAnB,GAA6B,CAA7B,GAAiCmL,CAA/C,IAAqD,SAArD;AACH;AACJ;AACJ;AACDD;AACH;;AAED,YAAKvK,IAAI1B,MAAJ,GAAaqB,OAAlB,EAA4B;AACxBA,sBAAUK,IAAI1B,MAAd;AACH;;AAED,YAAIJ,KAAK,CAAT,EAAa;AACTmM,0BAAcE,SAAd;AACH;AACJ;AACDvM,UAAMyM,OAAN,GAAgB9K,OAAhB;AACA3B,UAAM2B,OAAN,GAAgB0K,WAAhB;AACH,CA3DD;ACAA,CAAC,UAAUK,CAAV,EAAa;AACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BAC,QAAO3L,QAAP,EAAiB4L,KAAjB,CAAuB,UAAUF,CAAV,EAAa;AACnC,MAAMG,kBAAkB7L,SAAS8L,sBAAT,CAAgC,sBAAhC,CAAxB;AACA;;;AAGA,WAASC,eAAT,CAAyBnL,aAAzB,EAAwC;AACvC,OAAMoL,UAAUC,MAAMC,IAAN,CAAWlM,SAASqB,gBAAT,CAA0BT,aAA1B,CAAX,CAAhB;;AAEAoL,WAAQrG,GAAR,CAAY,UAACwG,CAAD,EAAO;AAClBA,MAAExI,gBAAF,CAAmB,YAAnB,EAAiC,UAAC6B,CAAD,EAAO;AACvC,SAAMb,KAAKa,EAAEU,MAAb;AACA;AACA,SAAIvB,GAAGlF,OAAH,CAAW2M,uBAAf,EAAwC;AACvCzH,SAAGlC,KAAH,CAAS4J,eAAT,GAA2B1H,GAAGlF,OAAH,CAAW2M,uBAAtC;AACA;AACD;AACA,SAAIzH,GAAGlF,OAAH,CAAW6M,yBAAf,EAA0C;AACzC3H,SAAGlC,KAAH,CAAS8J,KAAT,GAAiB5H,GAAGlF,OAAH,CAAW6M,yBAA5B;AACA;AACD;AACA,SAAI3H,GAAGlF,OAAH,CAAW+M,qBAAf,EAAsC;AACrC7H,SAAGlC,KAAH,CAASgK,SAAT,cAA8BN,EAAE1M,OAAF,CAAU+M,qBAAxC;AACA;AACD,KAdD;;AAgBAL,MAAExI,gBAAF,CAAmB,YAAnB,EAAiC,UAAC6B,CAAD,EAAO;AACvC;AACA,SAAMb,KAAKa,EAAEU,MAAb;AACA,SAAIvB,GAAGlF,OAAH,CAAW2M,uBAAf,EAAwC;AACvCzH,SAAGlC,KAAH,CAAS4J,eAAT,GAA2B1H,GAAGlF,OAAH,CAAWiN,kBAAtC;AACA;AACD,SAAI/H,GAAGlF,OAAH,CAAW6M,yBAAf,EAA0C;AACzC3H,SAAGlC,KAAH,CAAS8J,KAAT,GAAiB5H,GAAGlF,OAAH,CAAWkN,gBAA5B;AACA;AACD,SAAIhI,GAAGlF,OAAH,CAAW+M,qBAAf,EAAsC;AACrC7H,SAAGlC,KAAH,CAASgK,SAAT,GAAqB,UAArB;AACA;AACD,KAZD;AAaA,IA9BD;AA+BA;;AAED;AACAV,kBAAgB,kCAAhB;;AAEA;;;;;;AAMA,WAASa,+BAAT,GAA2C;AAC1C,OAAMC,qBAAqBlB,OAAO,uBAAP,CAA3B;AACA,OAAMmB,KAAKD,mBAAmBnK,KAAnB,EAAX;AACA,OAAImK,mBAAmBvN,MAAnB,GAA4B,CAAhC,EAAmC;AAClC,QAAIwN,KAAK,GAAT,EAAc;AACbD,wBAAmBE,QAAnB,CAA4B,oBAA5B;AACA,KAFD,MAEO;AACNF,wBAAmBG,WAAnB,CAA+B,oBAA/B;AACA;AACD;AACD;;AAED;;;;;;AAMA,WAASC,wBAAT,GAAoC;AACnC,OAAMJ,qBAAqB7M,SAAS8L,sBAAT,CAAgC,sBAAhC,CAA3B;AACA,OAAMoB,mBAAmBlN,SAAS8L,sBAAT,CAAgC,oBAAhC,CAAzB;AACA,OAAMqB,yBAAyBnN,SAAS8L,sBAAT,CAAgC,2BAAhC,CAA/B;AACA,OAAIe,mBAAmBvN,MAAnB,GAA4B,CAA5B,IAAiC4N,iBAAiB5N,MAAjB,GAA0B,CAA/D,EAAkE;AACjE,QAAMwN,KAAKD,mBAAmB,CAAnB,EAAsBO,WAAjC;AACA,QAAIN,KAAK,GAAT,EAAc;AACbI,sBAAiB,CAAjB,EAAoBzK,KAApB,CAA0B4K,OAA1B,GAAoC,MAApC;;AAEA,SAAIF,uBAAuB7N,MAAvB,IAAiC,CAArC,EAAwC;AACvC,UAAMgO,YAAYJ,iBAAiB,CAAjB,EAAoBjO,IAAtC;AACA,UAAMsO,cAAcD,UAAU,CAAV,CAApB;AACA,UAAME,sBAAsBD,YAAYnO,QAAxC;AACA,UAAIqO,cAAc,CAAlB;;AAEA,WAAK,IAAIvO,IAAI,CAAb,EAAgBA,IAAIsO,oBAAoBlO,MAAxC,EAAgDJ,GAAhD,EAAqD;AACpDuO,sBAAeD,oBAAoBtO,CAApB,EAAuBmB,OAAtC;AACA;;AAED,UAAMqN,gBAAgB,EAAtB;;AAEA,WAAK,IAAIxO,KAAI,CAAb,EAAgBA,KAAIuO,WAApB,EAAiCvO,IAAjC,EAAsC;AACrCwO,qBAAcxO,EAAd,IAAmB,EAAnB;AACA;;AAED,WAAK,IAAIA,MAAI,CAAb,EAAgBA,MAAIoO,UAAUhO,MAA9B,EAAsCJ,KAAtC,EAA2C;AAC1C,WAAM+C,cAAcqL,UAAUpO,GAAV,EAAaE,QAAjC;;AAEA,YAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIoO,WAApB,EAAiCpO,GAAjC,EAAsC;AACrC,YAAI4C,YAAY5C,CAAZ,EAAeI,OAAf,CAAuBc,MAAvB,IAAiClB,CAArC,EAAwC;AACvC,aAAMsO,QAAQ1L,YAAY5C,CAAZ,EAAeuO,SAAf,CAAyB,IAAzB,CAAd;AACA,aAAIN,UAAUpO,GAAV,EAAauD,KAAb,CAAmB4J,eAAvB,EAAwC;AACvCsB,gBAAMlL,KAAN,CAAY4J,eAAZ,GAA8BiB,UAAUpO,GAAV,EAAauD,KAAb,CAAmB4J,eAAjD;AACA;AACDqB,uBAAcrO,CAAd,EAAiBgI,IAAjB,CAAsBsG,KAAtB;AACA,SAND,MAMO;AACND,uBAAcrO,CAAd,EAAiBgI,IAAjB,CAAsB,EAAtB;AACA;AACD;AACD;;AAED,UAAMrI,QAAQgB,SAASC,aAAT,CAAuB,OAAvB,CAAd;AACAjB,YAAMuC,SAAN,CAAgBsF,GAAhB,CAAoB,2BAApB;AACA,UAAMgH,aAAaX,iBAAiB,CAAjB,EAAoB/M,YAApB,CAAiC,OAAjC,CAAnB;AACAnB,YAAMoB,YAAN,CAAmB,OAAnB,EAA4ByN,UAA5B;AACA7O,YAAMyD,KAAN,CAAY4K,OAAZ,GAAsB,OAAtB;AACA,WAAK,IAAInO,MAAI,CAAb,EAAgBA,MAAIuO,WAApB,EAAiCvO,KAAjC,EAAsC;AACrC,WAAM4J,MAAM9J,MAAM8O,SAAN,CAAgB,CAAC,CAAjB,CAAZ;AACAhF,WAAIvH,SAAJ,CAAcsF,GAAd,CAAkB,UAAlB;;AAEA,YAAK,IAAIxH,KAAI,CAAb,EAAgBA,KAAIiO,UAAUhO,MAA9B,EAAsCD,IAAtC,EAA2C;AAC1C,YAAIqO,cAAcxO,GAAd,EAAiBG,EAAjB,CAAJ,EAAyB;AACxByJ,aAAIlH,WAAJ,CAAgB8L,cAAcxO,GAAd,EAAiBG,EAAjB,CAAhB;AACA;AACD;AACD;;AAEDwN,yBAAmB,CAAnB,EAAsBjL,WAAtB,CAAkC5C,KAAlC;AACA,MAjDD,MAiDO;AACNmO,6BAAuB,CAAvB,EAA0B1K,KAA1B,CAAgC4K,OAAhC,GAA0C,OAA1C;AACA;AACD,KAvDD,MAuDO;AACNH,sBAAiB,CAAjB,EAAoBzK,KAApB,CAA0B4K,OAA1B,GAAoC,OAApC;AACA,SAAIF,uBAAuB7N,MAAvB,GAAgC,CAApC,EAAuC;AACtC6N,6BAAuB,CAAvB,EAA0B1K,KAA1B,CAAgC4K,OAAhC,GAA0C,MAA1C;AACA;AACD;AACD;AACD;;AAEDU;AACAC;;AAEA;AACAtC,IAAElH,MAAF,EAAUyJ,MAAV,CAAiB,YAAY;AAC5BF;AACAC;AACA,GAHD;;AAKA,WAASA,wBAAT,GAAoC;AACnC,QAAK,IAAI9O,IAAI,CAAb,EAAgBA,IAAI2M,gBAAgBvM,MAApC,EAA4CJ,GAA5C,EAAiD;AAChD,QAAMgP,iBAAiBrC,gBAAgB3M,CAAhB,CAAvB;;AAEA;AACA,QAAIiP,sBAAsB,IAA1B;;AAEA,QAAIC,eAAeF,eAAepC,sBAAf,CAAsC,oBAAtC,CAAnB;AACA,QAAIuC,uBAAuBH,eAAepC,sBAAf,CAAsC,6BAAtC,CAA3B;;AAEA,QAAIsC,aAAa9O,MAAb,GAAsB,CAAtB,IAA2B+O,qBAAqB/O,MAArB,GAA8B,CAA7D,EAAgE;AAC/D8O,oBAAeA,aAAa,CAAb,CAAf;AACAC,4BAAuBA,qBAAqB,CAArB,CAAvB;AACAD,kBAAa3L,KAAb,CAAmB4K,OAAnB,GAA6B,OAA7B;;AAEA,SAAIe,aAAa3O,OAAb,CAAqB6O,kBAAzB,EAA6C;AAAA,UACpCA,kBADoC,GACbF,aAAa3O,OADA,CACpC6O,kBADoC;;;AAG5C,UAAMC,0BAA0BL,eAAed,WAA/C;AACA,UAAImB,0BAA0BH,aAAahB,WAA3C,EAAwD;AACvDgB,oBAAa3L,KAAb,CAAmB+L,KAAnB,GAA2B,IAA3B;AACA,OAFD,MAEO,IAAIF,sBAAsB,QAA1B,EAAoC;AAC1CF,oBAAa3L,KAAb,CAAmB+L,KAAnB,GAA2B,IAA3B;AACA,OAFM,MAEA;AACNJ,oBAAa3L,KAAb,CAAmB+L,KAAnB,GAA2BF,kBAA3B;AACA;;AAED,UAAIA,sBAAsB,QAA1B,EAAoC;AACnCJ,sBAAezL,KAAf,CAAqB+L,KAArB,GAA6B,IAA7B;AACA,OAFD,MAEO;AACNN,sBAAezL,KAAf,CAAqB+L,KAArB,GAA6BF,kBAA7B;AACA;AACD;;AAED;AACA,SAAIF,aAAa3O,OAAb,CAAqBgP,cAArB,IAAuC,CAAvC,IAA4CL,aAAa3O,OAAb,CAAqBiP,iBAArB,IAA0C,CAA1F,EAA6F;AAC5F;AACA,UAAMC,sBAAsBT,eAAed,WAA3C;AACA,UAAMwB,oBAAoBR,aAAahB,WAAvC;;AAEA;AACA,UAAIyB,qBAAJ;AACA,UAAMC,mBAAmBV,aAAanP,IAAtC;AACA,UAAI6P,iBAAiBxP,MAAjB,GAA0B,CAA9B,EAAiC;AAChC,WAAMyP,WAAWD,iBAAiB,CAAjB,CAAjB;AACA,WAAME,SAASD,SAAS1N,gBAAT,CAA0B,IAA1B,CAAf;;AAEAwN,sBAAeG,OAAO1P,MAAtB;AACA;;AAED;AACA,UAAM2P,wBAAwBb,aAAa7M,SAAb,CAAuBC,QAAvB,CAAgC,yBAAhC,CAA9B;;AAEA;AACA;AACA,UAAI0N,qBAAqB,KAAzB;AACA,UAAI/B,+BAAJ;AACA,UAAI,CAAC,CAAC8B,qBAAD,IAA0BJ,eAAe,CAA1C,KAAgDA,eAAe,CAAnE,EAAsE;AACrE;AACA;AACA,WAAIF,sBAAsBC,iBAA1B,EAA6C;AAC5CV,uBAAezL,KAAf,CAAqB0M,QAArB,GAAgC,OAAhC;;AAEA;AACA,YAAId,wBAAwB,CAACA,qBAAqB9M,SAArB,CAA+BC,QAA/B,CAAwC,kBAAxC,CAA7B,EAA0F;AACzF6M,8BAAqB9M,SAArB,CAA+BsF,GAA/B,CAAmC,kBAAnC;AACAqI,8BAAqB,IAArB;AACA;AACDd,qBAAa7M,SAAb,CAAuBsF,GAAvB,CAA2B,yBAA3B;;AAEA,YAAIuH,aAAanP,IAAb,IAAqB4P,YAAzB,EAAuC;AACtC;AACA,aAAMO,UAAUR,oBAAoBC,YAApC;;AAEA;AACA,aAAIQ,0BAA0BC,KAAKC,KAAL,CAAWZ,sBAAsBS,OAAjC,CAA9B;AACA,aAAIC,0BAA0B,CAA9B,EAAiCA,0BAA0B,CAA1B;;AAEjC;AACA;AACA;AACA;AACA,aAAInB,eAAepC,sBAAf,CAAsC,2BAAtC,EAAmExM,MAAnE,GAA4E,CAAhF,EAAmF;AAClF6N,mCAAyBe,eAAepC,sBAAf,CACxB,2BADwB,EAEvB,CAFuB,CAAzB;AAGAqB,iCAAuB5L,SAAvB,CAAiCuF,MAAjC,CAAwC,kBAAxC;AACA,cAAM0I,6BACLrC,uBAAuB1N,OAAvB,CAA+B4P,uBADhC;;AAGA,cACCG,8BAA8BH,uBAA9B,IACAjB,aAAa7M,SAAb,CAAuBC,QAAvB,CAAgC,yBAAhC,CAFD,EAGE;AACD2M,iCAAsB,KAAtB;AACA,WALD,MAKO,IACNqB,8BAA8BH,uBAA9B,IACA,CAACjB,aAAa7M,SAAb,CAAuBC,QAAvB,CAAgC,yBAAhC,CADD,KAECmN,sBAAsB,GAAtB,IAA6BxB,uBAAuBsC,MAAvB,IAAiC,CAF/D,CADM,EAIL;AACDtB,iCAAsB,KAAtB;AACA,WANM,MAMA;AACNhB,kCAAuB7L,UAAvB,CAAkCQ,WAAlC,CAA8CqL,sBAA9C;AACA;AACD;AACD;AACA;AACA,aAAIgB,mBAAJ,EAAyB;AACxB;AACA,cAAMuB,WAAW1P,SAASC,aAAT,CAAuB,OAAvB,CAAjB;AACA,cAAM0P,gBAAgB3P,SAASC,aAAT,CAAuB,OAAvB,CAAtB;AACAyP,mBAAS9N,WAAT,CAAqB+N,aAArB;;AAEA;AACAD,mBAASnO,SAAT,CAAmBsF,GAAnB,CAAuB,2BAAvB;AACA,cAAM+I,SAASxB,aAAayB,SAAb,CAAuBC,KAAvB,CAA6B,8BAA7B,CAAf;AACA,cAAIF,UAAU3D,MAAM8D,OAAN,CAAcH,MAAd,CAAd,EAAqC;AACpCF,oBAASnO,SAAT,CAAmBsF,GAAnB,CAAuB+I,OAAO,CAAP,CAAvB;AACA;;AAED;AACA,cAAMtC,YAAYc,aAAanP,IAAb,CAAkBK,MAApC;;AAEA;AACA,cAAI0Q,yCAAJ;;AAEA;AACA;AACA;AACA,cAAIC,gBAAgB,KAApB;;AAEA;AACA,cAAI7B,aAAa7M,SAAb,CAAuBC,QAAvB,CAAgC,yBAAhC,CAAJ,EAAgE;AAC/D;AACA,eAAM0O,yBAAyB5C,YAAY,CAA3C;;AAEA;AACA,eAAI6C,yCAAJ;;AAEA;AACA;AACA;AACA,eAAI7C,YAAY+B,uBAAhB,EAAyC;AACxC;AACA;AACA;AACA,iBAAK,IAAInQ,MAAI,CAAb,EAAgBA,MAAIgR,sBAApB,EAA4ChR,KAA5C,EAAiD;AAChDiR,gDAAmCd,0BAA0B,CAA1B,GAA8BnQ,GAAjE;AACA,iBAAIiR,oCAAoC,CAAxC,EACCA,mCAAmC,CAAnC;;AAEDH,gDACCE,yBAAyBC,gCAD1B;;AAGA,iBAAIH,oCAAoC,CAAxC,EAA2C;AAC1CC,8BAAgB,IAAhB;AACA;AACA,cAHD,MAGO,IACNE,mCAAmC,CAAnC,IACAA,oCAAoC,CADpC,IAEAA,mCACC,IAAIH,gCADL,GAEC,CAJD,IAKAA,mCACCG,gCAPK,EAQL;AACDF,8BAAgB,IAAhB;AACA;AACA,cAXM,MAWA,IACNE,mCAAmC,CAAnC,IACAA,oCAAoC,EADpC,IAEAA,mCACC,MAAMH,gCADP,GAEC,CAJD,IAKAA,mCACCG,gCAPK,EAQL;AACDF,8BAAgB,IAAhB;AACA;AACA,cAXM,MAWA,IACNE,mCAAmC,EAAnC,IACAA,oCAAoC,EADpC,IAEAA,mCACC,MAAMH,gCADP,GAEC,CAJD,IAKAA,mCACCG,gCAPK,EAQL;AACDF,8BAAgB,IAAhB;AACA;AACA,cAXM,MAWA;AACN;AACA;AACD;AACD,YApDD,MAoDO;AACNE,+CAAmCD,sBAAnC;AACAF,+CAAmC,CAAnC;AACAC,4BAAgB,IAAhB;AACA;;AAED;AACA,eAAIA,aAAJ,EAAmB;AAClB,gBAAIG,kBAAJ;AACA,gBAAID,mCAAmC,CAAvC,EAA0C;AACzCC,yBACCvB,eACAS,KAAKe,IAAL,CACCH,yBAAyBC,gCAD1B,CAFD;AAKA,aAND,MAMO;AACNC,yBAAYvB,YAAZ;AACA;;AAED,gBAAMyB,oBAAoBhB,KAAKC,KAAL,CAAW,CAACa,YAAY,CAAb,IAAkBvB,YAA7B,CAA1B;AACA,gBAAI0B,iBAAJ;AACA,iBAAK,IAAIlR,IAAI,CAAb,EAAgBA,IAAI+Q,SAApB,EAA+B/Q,GAA/B,EAAoC;AACnC,iBAAMmR,gBAAgBlB,KAAKC,KAAL,CAAWlQ,IAAIwP,YAAf,CAAtB;AACA,iBAAM7F,KAAKhJ,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA,iBAAMwQ,eAAerC,aAAanP,IAAb,CAAkB,CAAlB,EAAqBG,QAArB,CACpBC,IAAImR,gBAAgB3B,YADA,EAEnBjB,SAFmB,CAET,IAFS,CAArB;AAGA,iBAAIjO,WAAJ;AACA,iBAAM+Q,iBAAiBlM,OAAOmM,gBAAP,CACtBvC,aAAanP,IAAb,CAAkB,CAAlB,CADsB,CAAvB;AAGA,iBAAI,CAACwR,aAAahO,KAAb,CAAmB4J,eAAxB,EAAyC;AACxCoE,2BAAahO,KAAb,CAAmB4J,eAAnB,GACCqE,eAAerE,eADhB;AAEA;AACDoE,0BAAahO,KAAb,CAAmBC,KAAnB,GAA2B,IAA3B;AACA+N,0BAAahO,KAAb,CAAmBG,MAAnB,GAA4B,IAA5B;AACA;AACA6N,0BAAatF,eAAb,CAA6B,6BAA7B;AACAoF,wBAAW/L,OAAOmM,gBAAP,CACVvC,aAAaxN,aAAb,CAA2B,IAA3B,CADU,CAAX;AAGA,iBAAI2P,SAASK,cAAb,EAA6B;AAC5BH,2BAAahO,KAAb,CAAmBoO,WAAnB,GAAiCN,SAASK,cAA1C;AACA,cAFD,MAEO;AACNH,2BAAahO,KAAb,CAAmBoO,WAAnB,GAAiCN,SAASO,iBAA1C;AACA;AACD,iBAAIN,gBAAgB,CAAhB,IAAqBnR,IAAIwP,YAAJ,IAAoB,CAA7C,EAAgD;AAC/C4B,2BAAahO,KAAb,CAAmBsO,cAAnB,GAAoC,KAApC;AACA;AACD/H,gBAAGpH,WAAH,CAAe6O,YAAf;;AAEA,kBACC,IAAI9O,IAAIwO,mCAAmCK,aAAnC,GAAmD,CAD5D,EAEC7O,IAAIwO,oCAAoCK,gBAAgB,CAApD,IAAyD,CAF9D,EAGC7O,GAHD,EAIE;AACD,kBAAIA,IAAIyM,aAAanP,IAAb,CAAkBK,MAA1B,EAAkC;AACjCK,oBAAKyO,aAAanP,IAAb,CAAkB0C,CAAlB,EAAqBvC,QAArB,CACJC,IAAImR,gBAAgB3B,YADhB,EAEHjB,SAFG,CAEO,IAFP,CAAL;AAGA,mBAAMoD,aAAaxM,OAAOmM,gBAAP,CAClBvC,aAAanP,IAAb,CAAkB0C,CAAlB,CADkB,CAAnB;AAGA,mBAAI,CAAChC,GAAG8C,KAAH,CAAS4J,eAAd,EAA+B;AAC9B1M,mBAAG8C,KAAH,CAAS4J,eAAT,GAA2B2E,WAAW3E,eAAtC;AACA;;AAED1M,kBAAG8C,KAAH,CAASC,KAAT,GAAiB,IAAjB;AACA/C,kBAAG8C,KAAH,CAASG,MAAT,GAAkB,IAAlB;AACA;AACAjD,kBAAGwL,eAAH,CAAmB,6BAAnB;AACA,eAfD,MAeO;AACNxL,oBAAKK,SAASC,aAAT,CAAuB,IAAvB,CAAL;AACAN,kBAAG8C,KAAH,CAASwO,WAAT,GAAuB,KAAvB;;AAEAtR,kBAAG8C,KAAH,CAASyO,UAAT,GAAsB,MAAtB;AACA;;AAEDX,yBAAW/L,OAAOmM,gBAAP,CACVvC,aAAaxN,aAAb,CAA2B,IAA3B,CADU,CAAX;AAGA,kBAAI2P,SAASK,cAAb,EAA6B;AAC5BjR,kBAAG8C,KAAH,CAASoO,WAAT,GAAuBN,SAASK,cAAhC;AACA,eAFD,MAEO;AACNjR,kBAAG8C,KAAH,CAASoO,WAAT,GAAuBN,SAASO,iBAAhC;AACA;;AAED,kBAAIN,gBAAgB,CAAhB,IAAqBnR,IAAIwP,YAAJ,IAAoB,CAA7C,EAAgD;AAC/ClP,kBAAG8C,KAAH,CAASsO,cAAT,GAA0B,KAA1B;AACA;;AAED/H,iBAAGpH,WAAH,CAAejC,EAAf;AACA;;AAEDgQ,2BAAc/N,WAAd,CAA0BoH,EAA1B;AACA;AACD;AACD,WAhKD,MAgKO;AACN,eAAImI,wBAAJ;AACA,eAAIxC,sBAAsB,GAA1B,EAA+B;AAC9B,iBAAK,IAAIzP,MAAI,CAAb,EAAgBA,MAAI2P,YAApB,EAAkC3P,KAAlC,EAAuC;AACtCiS,+BAAkB9B,0BAA0BnQ,GAA5C;AACA,iBAAIiS,mBAAmB,CAAvB,EAA0BA,kBAAkB,CAAlB;AAC1BnB,gDAAmCnB,eAAesC,eAAlD;;AAEA,iBAAInB,oCAAoC,CAAxC,EAA2C;AAC1CC,8BAAgB,IAAhB;AACA;AACA,cAHD,MAGO,IACNkB,kBAAkB,CAAlB,IACAA,mBAAmB,CADnB,IAEAA,kBAAkB,IAAInB,gCAAtB,IAA0D,CAF1D,IAGAA,mCAAmCmB,eAJ7B,EAKL;AACDlB,8BAAgB,IAAhB;AACA;AACA,cARM,MAQA,IACNkB,kBAAkB,CAAlB,IACAA,mBAAmB,EADnB,IAEAA,kBAAkB,MAAMnB,gCAAxB,IAA4D,CAF5D,IAGAA,mCAAmCmB,eAJ7B,EAKL;AACDlB,8BAAgB,IAAhB;AACA;AACA,cARM,MAQA,IACNkB,kBAAkB,EAAlB,IACAA,mBAAmB,EADnB,IAEAA,kBAAkB,MAAMnB,gCAAxB,IAA4D,CAF5D,IAGAA,mCAAmCmB,eAJ7B,EAKL;AACDlB,8BAAgB,IAAhB;AACA;AACA,cARM,MAQA;AACN;AACA;AACD;AACD,YArCD,MAqCO;AACNkB,8BAAkB,CAAlB;AACAnB,+CAAmC,CAAnC;AACAC,4BAAgB,IAAhB;AACAP,qBAASD,MAAT,GAAkB,CAAlB;AACA;;AAED,eAAM2B,oBAAoB9B,KAAKe,IAAL,CAAUxB,eAAesC,eAAzB,CAA1B;;AAEA,eAAME,eAAeD,oBAAoB9D,SAAzC;;AAEA,eAAI2C,aAAJ,EAAmB;AAClB,iBAAK,IAAI/Q,MAAI,CAAb,EAAgBA,MAAImS,YAApB,EAAkCnS,KAAlC,EAAuC;AACtC,iBAAMsR,iBAAgBlB,KAAKC,KAAL,CAAWrQ,MAAIoO,SAAf,CAAtB;AACA,iBAAMtE,MAAKhJ,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA,iBAAIqR,aAAJ;AACA,iBAAIC,eAAJ;AACA,iBACCf,kBAAiBY,oBAAoB,CAArC,IACApB,oCAAoC,CAFrC,EAGE;AACDuB,uBAASf,iBAAgBW,eAAzB;AACAG,qBAAOH,mBAAmB,IAAIX,cAAvB,CAAP;AACA,cAND,MAMO;AACNe,uBAAS1C,eAAemB,gCAAxB;AACAsB,qBAAOzC,YAAP;AACA;AACD,iBAAM/F,MAAMsF,aAAanP,IAAb,CAAkBC,MAAIsR,iBAAgBlD,SAAtC,CAAZ;AACAtE,iBAAGzH,SAAH,GAAeuH,IAAIvH,SAAnB;AACAyH,iBAAGvG,KAAH,CAAS4J,eAAT,GAA2BvD,IAAIrG,KAAJ,CAAU4J,eAArC;;AAEA,kBAAK,IAAIhN,MAAIkS,MAAb,EAAqBlS,MAAIiS,IAAzB,EAA+BjS,KAA/B,EAAoC;AACnC,kBAAMmS,QAAQ1I,IAAI1J,QAAJ,CAAaC,GAAb,EAAgBuO,SAAhB,CAA0B,IAA1B,CAAd;AACA,kBAAI,CAAC4D,MAAM/O,KAAN,CAAY4J,eAAjB,EAAkC;AACjC,mBAAMoF,YAAYjN,OAAOmM,gBAAP,CAAwB7H,GAAxB,CAAlB;AACA0I,qBAAM/O,KAAN,CAAY4J,eAAZ,GAA8BoF,UAAUpF,eAAxC;AACA;AACDmF,oBAAM/O,KAAN,CAAYC,KAAZ,GAAoB,IAApB;AACA8O,oBAAM/O,KAAN,CAAYG,MAAZ,GAAqB,IAArB;AACA;AACA4O,oBAAMrG,eAAN,CAAsB,6BAAtB;AACAnC,kBAAGpH,WAAH,CAAe4P,KAAf;AACA;;AAED7B,2BAAc/N,WAAd,CAA0BoH,GAA1B;AACA;AACD;AACD;;AAED0G,mBAASjQ,OAAT,CAAiB4P,uBAAjB,GAA2CA,uBAA3C;AACA,cAAMqC,SAAShC,SAASrO,gBAAT,CAA0B,UAA1B,CAAf;AACA,cAAIqQ,OAAOpS,MAAP,GAAgB,CAApB,EAAuB;AACtB,gBAAK,IAAIJ,MAAI,CAAb,EAAgBA,MAAIwS,OAAOpS,MAA3B,EAAmCJ,KAAnC,EAAwC;AACvCwS,mBAAOxS,GAAP,EAAUiM,eAAV,CAA0B,QAA1B;AACA;AACD;AACDgC,mCAAyBuC,QAAzB;AACAxB,yBAAetM,WAAf,CAA2B8N,QAA3B;AACAR,+BAAqB,IAArB;AACA;AACD;AACD,QA5UD,MA4UO;AACN,YAAIb,wBAAwBA,qBAAqB9M,SAArB,CAA+BC,QAA/B,CAAwC,kBAAxC,CAA5B,EAAyF;AACxF6M,8BAAqB9M,SAArB,CAA+BuF,MAA/B,CAAsC,kBAAtC;AACAoI,8BAAqB,IAArB;AACAd,sBAAa7M,SAAb,CAAuBuF,MAAvB,CAA8B,yBAA9B;AACAqG,kCAAyBe,eAAetN,aAAf,CAA6B,4BAA7B,CAAzB;AACA,aAAIuM,sBAAJ,EAA4B;AAC3Be,yBACEpC,sBADF,CACyB,2BADzB,EACsD,CADtD,EAEEvK,SAFF,CAEYsF,GAFZ,CAEgB,kBAFhB;AAGA;AACDqH,wBAAezL,KAAf,CAAqB0M,QAArB,GAAgC,MAAhC;AACA;AACD;AAED,OA9VD,MA8VO;AACNf,oBAAa3L,KAAb,CAAmBkP,QAAnB,GAA8B,MAA9B;AACA;;AAED7Q,8BAAwBsN,YAAxB;;AAEA,UAAGc,kBAAH,EAAuB;AACtBpO,+BAAwBqM,sBAAxB;AACA,WAAMyE,WAAW,IAAIC,WAAJ,CAAgB,eAAhB,EAAiC,EAAEC,QAAQ,IAAV,EAAgBC,SAAS,IAAzB,EAAjC,CAAjB;AACA3D,oBAAa4D,aAAb,CAA2BJ,QAA3B;AACA;AACD;AACD;AACD;AACD;;AAED,WAAS7D,mBAAT,GAA+B;AAC9B,OAAMkE,sBAAsBjS,SAAS8L,sBAAT,CAAgC,sBAAhC,CAA5B;AACA;AACA,QAAK,IAAI5M,IAAI,CAAb,EAAgBA,IAAI+S,oBAAoB3S,MAAxC,EAAgDJ,GAAhD,EAAqD;AACpD,QAAM2N,qBAAqBoF,oBAAoB/S,CAApB,CAA3B;;AAEA2N,uBAAmBtL,SAAnB,CAA6BsF,GAA7B,2BAAyD3H,CAAzD;;AAEA,QAAIF,QAAQ6N,mBAAmBf,sBAAnB,CAA0C,oBAA1C,CAAZ;AACA,QAAI9M,MAAMM,MAAN,GAAe,CAAnB,EAAsB;AACrBN,aAAQA,MAAM,CAAN,CAAR;;AAEA,SAAIA,MAAMS,OAAN,CAAcyS,0BAAlB,EAA8C;AAC7CrF,yBAAmBpK,KAAnB,CAAyB0P,QAAzB,GAAuCnT,MAAMS,OAAN,CAAcyS,0BAArD;AACA;AACDlT,WAAMuC,SAAN,CAAgBuF,MAAhB,CAAuB,iCAAvB;;AAEA9H,WAAMoT,wBAAN,GAAiC,KAAjC;AACA,SAAMpR,MAAMhC,MAAMqC,gBAAN,CAAuB,IAAvB,CAAZ;AACA,UAAK,IAAIhC,IAAI,CAAb,EAAgBA,IAAI2B,IAAI1B,MAAxB,EAAgCD,GAAhC,EAAqC;AACpC,UAAI2B,IAAI3B,CAAJ,EAAOgB,OAAP,GAAiB,CAArB,EAAwB;AACvBrB,aAAMoT,wBAAN,GAAiC,IAAjC;AACA;AACD;AACD,SAAM7D,0BAA0B1B,mBAAmBO,WAAnD;;AAEA,SAAMzN,KAAKX,MAAM4B,aAAN,CAAoB,IAApB,CAAX;AACA,SAAMyR,aAAa7N,OAAOmM,gBAAP,CAAwBhR,EAAxB,EAA4B,IAA5B,CAAnB;AACA,SAAM2S,oBAAoBD,WAAWE,gBAAX,CAA4B,mBAA5B,CAA1B;AACA,SAAMC,qBAAqBH,WAAWE,gBAAX,CAA4B,oBAA5B,CAA3B;AACA,SAAME,qBAAqBJ,WAAWE,gBAAX,CAA4B,cAA5B,CAA3B;AACA,SAAMG,sBAAsBL,WAAWE,gBAAX,CAA4B,cAA5B,CAA5B;AACA,SAAMI,kBAAkBC,WAAWH,kBAAX,EAA+B,EAA/B,IAAqCG,WAAWF,mBAAX,EAAgC,EAAhC,CAA7D;AACA,SAAMG,2BACLD,WAAWN,iBAAX,EAA8B,EAA9B,IAAoCM,WAAWJ,kBAAX,EAA+B,EAA/B,CADrC;AAxBqB,SA0BbM,uBA1Ba,GA0Be9T,MAAMS,OA1BrB,CA0BbqT,uBA1Ba;AAAA,SA2BbC,kBA3Ba,GA2BU/T,MAAMS,OA3BhB,CA2BbsT,kBA3Ba;AAAA,SA4BbC,uBA5Ba,GA4BehU,MAAMS,OA5BrB,CA4BbuT,uBA5Ba;;AA6BrB,SAAIC,qBAAqB,KAAzB;AACA,SAAIC,yBAAJ;AACA,SAAIJ,0BAA0BvE,uBAA9B,EAAuD;AACtD,UAAIyE,uBAAJ,EAA6B;AAC5BhU,aAAMyD,KAAN,CAAYkP,QAAZ,GAAuB,MAAvB;;AAEA;AACA;AACA;;AAEA,WAAI3S,MAAMoT,wBAAV,EAAoC;AACnCpT,cAAMyD,KAAN,CAAYC,KAAZ,GAAoB,MAApB;AACA,YAAMyQ,0BAA0B5E,0BAA0BwE,kBAA1D;AACAG,2BAAmBC,0BAA0BH,uBAA7C;AACAE,2BAAmBA,mBAAmBP,eAAnB,GAAqCE,wBAAxD;AACAI,6BAAqB,IAArB;AACA,QAND,MAMO;AACNjU,cAAMyD,KAAN,CAAYC,KAAZ,GAAoB,MAApB;;AAEA;AACA;AACA;AACA;AACA;AACD,OArBD,MAqBO;AACN1D,aAAMyD,KAAN,CAAYC,KAAZ,GAAoB,MAApB;AACA1D,aAAMyD,KAAN,CAAYkP,QAAZ,GAAuB,IAAvB;AACA3S,aAAMyD,KAAN,CAAY0P,QAAZ,GAA0BW,uBAA1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACD,MAjCD,MAiCO;AACN9T,YAAMyD,KAAN,CAAY0P,QAAZ,GAAuB,IAAvB;AACAnT,YAAMyD,KAAN,CAAYkP,QAAZ,GAA0B3S,MAAMS,OAAN,CAAcqT,uBAAxC;AACA9T,YAAMyD,KAAN,CAAYC,KAAZ,GAAoB,MAApB;AACAwQ,yBAAmBlU,MAAMS,OAAN,CAAc2T,eAAd,GAAgCpU,MAAMS,OAAN,CAAc2T,eAA9C,GAAgE,KAAnF;AACAH,2BAAqB,IAArB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AA5EoB,qBA8EJjT,QA9EI;AAAA,SA8EbqT,IA9Ea,aA8EbA,IA9Ea;;AA+ErB,SAAIA,IAAJ,EAAU;AACT,UAAMC,wBAAwBD,KAAKzS,aAAL,oCAAoD1B,CAApD,cAA9B;;AAEA,UAAIoU,qBAAJ,EAA2B;AAC1BD,YAAKvR,WAAL,CAAiBwR,qBAAjB;AACA;AACD;;AAED,SAAIL,kBAAJ,EAAwB;AACvB,UAAMM,qBAAqBvT,SAASC,aAAT,CAAuB,OAAvB,CAA3B;AACAsT,yBAAmBnT,YAAnB,8BAA2DlB,CAA3D,EAAgE,IAAhE;AACAqU,yBAAmB3K,SAAnB,8BAAwD1J,CAAxD,0DAA8GgU,gBAA9G;AACA,UAAIG,IAAJ,EAAU;AACTA,YAAKzR,WAAL,CAAiB2R,kBAAjB;AACA;AACD;AACD;AACD;AACD;;AAED;AACA,MAAMC,WAAWxT,SAAS8L,sBAAT,CAAgC,iBAAhC,CAAjB;AACA,OAAK,IAAI5M,IAAI,CAAb,EAAgBA,IAAIsU,SAASlU,MAA7B,EAAqCJ,GAArC,EAA0C;AACzC,OAAM+G,UAAUuN,SAAStU,CAAT,CAAhB;AACA,OAAI+G,QAAQ1E,SAAR,CAAkBC,QAAlB,CAA2B,0BAA3B,CAAJ,EAA4D;AAC3DyE,YAAQ1E,SAAR,CAAkBuF,MAAlB,CAAyB,0BAAzB;AACAb,YAAQ1E,SAAR,CAAkBsF,GAAlB,CAAsB,qBAAtB;AACA;;AAED,OAAIZ,QAAQ1E,SAAR,CAAkBC,QAAlB,CAA2B,uBAA3B,CAAJ,EAAyD;AACxD,QAAMoO,SAAS3J,QAAQ4J,SAAR,CAAkBC,KAAlB,CAAwB,qBAAxB,CAAf;AACA,QAAIF,UAAU3D,MAAM8D,OAAN,CAAcH,MAAd,CAAd,EAAqC;AACpC,SAAM6D,WAAW7D,OAAO,CAAP,CAAjB;AACA,SAAM8D,cAAcD,SAASE,WAAT,EAApB;;AAEA1N,aAAQ1E,SAAR,CAAkBuF,MAAlB,CAAyB2M,QAAzB;;AAEA,SAAMG,oBAAoB3N,QAAQrF,aAAR,CAAsB,sBAAtB,CAA1B;AACA,SAAIgT,iBAAJ,EAAuB;AACtBA,wBAAkBrS,SAAlB,CAA4BsF,GAA5B,CAAgC6M,WAAhC;AACA;AACD;AACD;AACD;;AAED;AACA;AACA,MAAM1P,kBAAkB,IAAI6P,uBAAJ,CAA4B;AACnDC,UAAO,qBAD4C;AAEnDC,iBAAc;AAFqC,GAA5B,CAAxB;;AAKA/P,kBAAgBgQ,aAAhB;;AAEA;AACA,WAASC,YAAT,GAAwB;AACvB,OAAIC,SAASlU,SAASqB,gBAAT,CAA0B,qBAA1B,CAAb;AACA,QAAK,IAAInC,MAAI,CAAb,EAAgBA,MAAIgV,OAAO5U,MAA3B,EAAmCJ,KAAnC,EAAwC;AACvC,QAAI6H,gBAAgB,IAAI/D,kBAAJ,CAAuBkR,OAAOhV,GAAP,CAAvB,CAApB;AACA6H,kBAAchD,2BAAd,CAA0CC,eAA1C;AACA;AACD;AACDiQ;AACA,EAjtBD;AAktBA,CAjvBD,EAivBGtI,MAjvBH","file":"wp-table-builder-frontend.js","sourcesContent":["let WPTB_CutGlueTable = {\n    cutTableHorizontally: function (rowBefore, table) {\n        if( table && table.rows[rowBefore] ) {\n            for( let i = 0; i < rowBefore; i++ ) {\n                let tableRowsIChildren = table.rows[i].children;\n\n                for( let j = 0; j < tableRowsIChildren.length; j++ ) {\n                    if ( tableRowsIChildren[j].rowSpan > 1 && tableRowsIChildren[j].rowSpan > rowBefore - i ) {\n                        let newTdRowspan = tableRowsIChildren[j].rowSpan - rowBefore + i;\n                        tableRowsIChildren[j].rowSpan = rowBefore - i;\n                        if( ! tableRowsIChildren[j].dataset.sameCellBeforeDivision ) {\n                            tableRowsIChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                        }\n\n                        let td;\n                        if(table.hasOwnProperty('wptbCell')) {\n                            td = new table.wptbCell( table.mark );\n                            td = td.getDOMElement();\n                        } else {\n                            td = document.createElement('td');\n                        }\n\n                        let tdTopStyle = tableRowsIChildren[j].getAttribute( 'style' );\n                        td.setAttribute( 'style', tdTopStyle );\n                        td.colSpan = tableRowsIChildren[j].colSpan;\n                        td.rowSpan = newTdRowspan;\n                        td.dataset.sameCellBeforeDivision = tableRowsIChildren[j].dataset.sameCellBeforeDivision;\n\n                        let dataXIndex = tableRowsIChildren[j].dataset.xIndex;\n                        let dataXIndexNext = parseInt( dataXIndex ) + parseInt( tableRowsIChildren[j].colSpan );\n                        let beforeTd;\n                        while( ! beforeTd && dataXIndexNext < table.maxCols ) {\n                            beforeTd = table.rows[rowBefore].querySelector( '[data-x-index=\"' + dataXIndexNext + '\"]' );\n                            dataXIndexNext++;\n                        }\n                        table.rows[rowBefore].insertBefore( td, beforeTd );\n\n                        WPTB_RecalculateIndexes(table);\n                    }\n                }\n            }\n        }\n    },\n    glueTableHorizontally: function (table) {\n        if(table) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' );\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] ) {\n                            if( tdsSameBeforeDivision[j].parentNode && tdsSameBeforeDivision[j + 1].parentNode &&\n                                ! tdsSameBeforeDivision[j].parentNode.classList.contains( 'wptb-row-moving' ) &&\n                                ! tdsSameBeforeDivision[j + 1].parentNode.classList.contains( 'wptb-row-moving' ) ) {\n                                if( ( tdsSameBeforeDivision[j + 1].dataset.yIndex == parseInt( tdsSameBeforeDivision[j].dataset.yIndex ) +\n                                    parseInt( tdsSameBeforeDivision[j].rowSpan ) ) ) {\n                                    tdsSameBeforeDivision[j].rowSpan += tdsSameBeforeDivision[j + 1].rowSpan;\n\n                                    let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                    for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                        tdsSameBeforeDivision[j].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                    }\n\n                                    let nextRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                    nextRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    cutTableVertically: function (col, table) {\n        for ( let i = 0; i < table.rows.length; i++ ) {\n            if( col < table.maxCols ) {\n                if( col != 0 && ( ! table.rows[i].querySelector( '[data-x-index=\"' + col + '\"]' ) ) ) {\n                    let rowChildren = table.rows[i].children;\n\n                    let td,\n                        rowChildrenLength = rowChildren.length,\n                        afterTd,\n                        rowSpanNewTd,\n                        colSpanOld,\n                        colSpanNewTd;\n                    for( let j = 0; j < rowChildrenLength; j++ ) {\n                        if( rowChildren[j].colSpan > 1 && parseInt( rowChildren[j].dataset.xIndex ) < col &&\n                            parseInt( rowChildren[j].dataset.xIndex ) + parseInt( rowChildren[j].colSpan ) > col ) {\n                            if(table.hasOwnProperty('wptbCell')) {\n                                td = new table.wptbCell( table.mark );\n                                td = td.getDOMElement();\n                            } else {\n                                td = document.createElement('td');\n                            }\n\n                            rowSpanNewTd = rowChildren[j].rowSpan;\n                            colSpanOld = rowChildren[j].colSpan;\n                            rowChildren[j].colSpan = col - rowChildren[j].dataset.xIndex;\n                            colSpanNewTd = colSpanOld - rowChildren[j].colSpan;\n\n                            if( ! rowChildren[j].dataset.sameCellBeforeDivision ) {\n                                rowChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                            }\n\n                            let tdLeftStyle = rowChildren[j].getAttribute( 'style' );\n                            td.setAttribute( 'style', tdLeftStyle );\n\n                            let tdAnalogThisX = table.querySelector( '[data-x-index=\"' + col + '\"]' );\n                            if( tdAnalogThisX ) {\n                                td.style.width = tdAnalogThisX.style.width;\n                            }\n\n                            let tdAnalogThisY = table.querySelector( '[data-y-index=\"' + i + '\"]' );\n                            if( tdAnalogThisY ) {\n                                td.style.height = tdAnalogThisY.style.height;\n                            }\n                            if( rowChildren[j + 1] ) {\n                                afterTd = rowChildren[j + 1];\n                            } else {\n                                afterTd = null;\n                            }\n\n                            table.rows[i].insertBefore( td, afterTd );\n                            td.colSpan = colSpanNewTd;\n                            td.rowSpan = rowSpanNewTd;\n                            td.dataset.sameCellBeforeDivision = rowChildren[j].dataset.sameCellBeforeDivision;\n                            i += rowSpanNewTd - 1;\n                            break\n                        }\n                    }\n                }\n            }\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    glueTableVertically: function (table) {\n        if( table ) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = [...table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' )];\n\n                    let jFirstTdGlue = null;\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] &&\n                            ! tdsSameBeforeDivision[j].classList.contains( 'wptb-column-moving' ) &&\n                            ! tdsSameBeforeDivision[j + 1].classList.contains( 'wptb-column-moving' ) ) {\n                            if( ( tdsSameBeforeDivision[j + 1].dataset.xIndex == parseInt( tdsSameBeforeDivision[j].dataset.xIndex ) +\n                                parseInt( tdsSameBeforeDivision[j].colSpan ) ) ) {\n                                if( jFirstTdGlue == null ) {\n                                    jFirstTdGlue = j;\n                                }\n                                tdsSameBeforeDivision[jFirstTdGlue].colSpan += tdsSameBeforeDivision[j + 1].colSpan;\n\n                                let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                    tdsSameBeforeDivision[jFirstTdGlue].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                }\n\n                                let thisRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                thisRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    }\n}\n","const WPTB_SortableTable = function (table) {\n\tthis.table = table;\n\tconst thisObject = this;\n\tthis.topRow = table.rows.length ? table.rows[0] : null;\n\tthis.itemsPerHeader = 0;\n\n\t/**\n\t * sets the table to sort mode\n\t * @param {string} type\n\t * @param {boolean} active\n\t * @param {number} number\n\t */\n\tthis.sortModeSwitcher = function (type, active, number) {\n\t\tif (type === 'vertical') {\n\t\t\tthis.table.removeEventListener('click', this.sortableTableVerticalStart, false);\n\n\t\t\tif (active) {\n\t\t\t\tthis.sortModeSwitcher('horizontal', false);\n\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', true);\n\t\t\t\tthis.table.addEventListener('click', this.sortableTableVerticalStart, false);\n\t\t\t\tthis.table.dataset.wptbSortableTableVertical = '1';\n\t\t\t} else {\n\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', false);\n\t\t\t\tdelete this.table.dataset.wptbSortableTableVertical;\n\t\t\t}\n\t\t} else if (type === 'horizontal') {\n\t\t\tthis.table.removeEventListener('click', this.sortableTableHorizontalStart, false);\n\n\t\t\tif (active) {\n\t\t\t\tthis.sortModeSwitcher('vertical', false);\n\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', true);\n\t\t\t\tthis.table.addEventListener('click', this.sortableTableHorizontalStart, false);\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal = '1';\n\t\t\t} else {\n\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', false);\n\t\t\t\tdelete this.table.dataset.wptbSortableTableHorizontal;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * checks whether the table should be in the sort state\n\t * and connects the necessary handlers\n\t *\n\t * @param {object} responsiveFront\n\t */\n\tthis.sortableTableInitialization = function (responsiveFront) {\n\t\tlet type = '';\n\t\tlet typeFirst;\n\t\tlet typeSecond;\n\t\tif (this.table.dataset.wptbSortableTableVertical &&\n\t\t\tthis.table.dataset.wptbSortableTableVertical === '1') {\n\t\t\ttypeFirst = 'vertical';\n\t\t\ttypeSecond = 'horizontal';\n\t\t} else if (\n\t\t\tthis.table.dataset.wptbSortableTableHorizontal &&\n\t\t\tthis.table.dataset.wptbSortableTableHorizontal === '1'\n\t\t) {\n\t\t\ttypeFirst = 'horizontal';\n\t\t\ttypeSecond = 'vertical';\n\t\t}\n\n\n\t\tlet switchMode;\n\t\tif(responsiveFront && responsiveFront.getDirective(this.table)){\n\t\t\tswitchMode = function() {\n\t\t\t\tlet size;\n\t\t\t\tlet directives = responsiveFront.getDirective(this.table);\n\t\t\t\tif (directives && directives.relativeWidth) {\n\t\t\t\t\tswitch (directives.relativeWidth) {\n\t\t\t\t\t\tcase 'window':\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tsize = window.innerWidth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'container':\n\t\t\t\t\t\t\t// get the size of the container table is in\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tsize = o.el.parentNode.parentNode.parentNode.clientWidth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tsize = window.innerWidth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsize = this.table.getBoundingClientRect().width;\n\t\t\t\t}\n\t\t\t\tconst sizeRangeId = responsiveFront.calculateRangeId(size, directives.breakpoints);\n\t\t\t\ttype = typeFirst;\n\t\t\t\tif(sizeRangeId !== 'desktop') {\n\t\t\t\t\tif(directives.hasOwnProperty('modeOptions')) {\n\t\t\t\t\t\tconst mode = directives.responsiveMode;\n\t\t\t\t\t\tconst modeOptions = directives.modeOptions[mode];\n\n\t\t\t\t\t\tif(modeOptions.hasOwnProperty('topRowAsHeader') && modeOptions.topRowAsHeader.hasOwnProperty(sizeRangeId) && modeOptions.topRowAsHeader[sizeRangeId]) {\n\t\t\t\t\t\t\tif(modeOptions.hasOwnProperty('cellStackDirection') && modeOptions.cellStackDirection.hasOwnProperty(sizeRangeId)) {\n\t\t\t\t\t\t\t\tif(modeOptions.cellStackDirection[sizeRangeId] === 'row') {\n\t\t\t\t\t\t\t\t\ttype = typeSecond;\n\t\t\t\t\t\t\t\t} else if(modeOptions.cellStackDirection[sizeRangeId] === 'column') {\n\t\t\t\t\t\t\t\t\tif(modeOptions.hasOwnProperty('cellsPerRow')) {\n\t\t\t\t\t\t\t\t\t\tthis.itemsPerHeader  = modeOptions.cellsPerRow[sizeRangeId];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.sortModeSwitcher(type, true);\n\t\t\t}\n\t\t} else {\n\t\t\tswitchMode = function() {\n\t\t\t\tlet type = typeFirst;\n\t\t\t\tif (this.table.classList.contains('wptb-mobile-view-active')) {\n\t\t\t\t\tif(this.table.classList.contains('wptb-table-preview-head')) {\n\t\t\t\t\t\ttype = typeSecond;\n\t\t\t\t\t}\n\t\t\t\t\tlet table = this.table;\n\t\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n\t\t\t\t\tthis.sortModeSwitcher(type, true);\n\t\t\t\t\tthis.table = table;\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\n\t\t\t\tthis.sortModeSwitcher(type, true);\n\t\t\t}\n\t\t}\n\n\t\tswitchMode.call(thisObject);\n\t\tthis.table.addEventListener('table:rebuilt', function (e) {\n\t\t\tswitchMode.call(thisObject);\n\t\t}, false)\n\t};\n\n\t/**\n\t * adds and deletes mousemove and mouseleave events handlers when happens switch sorting mode\n\t * and also can add necessary attributes\n\t *\n\t * @param {string} type\n\t * @param {boolean} active\n\t */\n\tthis.sortingCellMouseMoveSwitcher = function (type, active) {\n\t\tif (type === 'vertical') {\n\t\t\tlet rowsLength = this.table.rows.length;\n\t\t\tlet dataYIndexStart = 0;\n\t\t\twhile (rowsLength > 0) {\n\t\t\t\tlet tds = this.table.querySelectorAll(`[data-y-index=\"${dataYIndexStart}\"]`);\n\t\t\t\ttds = [...tds];\n\t\t\t\ttds.map((td) => {\n\t\t\t\t\ttd.removeEventListener('mousemove', sortingCellMouseMoveVertical, false);\n\t\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\t\tif (active) {\n\t\t\t\t\t\ttd.addEventListener('mousemove', sortingCellMouseMoveVertical, false);\n\t\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\t\t\tif(!td.dataset.sortedVertical) {\n\t\t\t\t\t\t\ttd.dataset.sortedVertical = 'ask';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.itemsPerHeader) {\n\t\t\t\t\trowsLength -= (this.itemsPerHeader + 1);\n\t\t\t\t\tdataYIndexStart += (this.itemsPerHeader + 1);\n\t\t\t\t} else {\n\t\t\t\t\trowsLength = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'horizontal') {\n\t\t\tlet tds = this.table.querySelectorAll('[data-x-index=\"0\"]');\n\t\t\ttds = [...tds];\n\t\t\ttds.map((td) => {\n\t\t\t\ttd.removeEventListener('mousemove', sortingCellMouseMoveHorizontal, false);\n\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\tif (active) {\n\t\t\t\t\ttd.addEventListener('mousemove', sortingCellMouseMoveHorizontal, false);\n\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * adds a sortable-hover class for a cell when the cursor is over the sort icon (arrow)\n\t *\n\t * @param {event} e\n\t * @param {string} type\n\t * @param {HTMLElement} element td\n\t */\n\tfunction sortingCellMouseMov(e, type, element) {\n\t\tif (e.target.tagName === 'TD') {\n\t\t\tconst x = e.offsetX == undefined ? e.layerX : e.offsetX;\n\t\t\tconst y = e.offsetY == undefined ? e.layerY : e.offsetY;\n\t\t\tlet xMatch = false;\n\t\t\tif ((type === 'vertical' && e.target.clientWidth - x <= 35) || (type === 'horizontal' && x <= 35)) {\n\t\t\t\txMatch = true;\n\t\t\t}\n\t\t\tif (xMatch && (e.target.clientHeight - 35) / 2 < y && (e.target.clientHeight + 35) / 2 > y) {\n\t\t\t\telement.classList.add('sortable-hover');\n\t\t\t} else {\n\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t}\n\t\t} else {\n\t\t\telement.classList.remove('sortable-hover');\n\t\t}\n\t}\n\n\t/**\n\t * calls sortingCellMouseMov with the type parameter set to vertical\n\t *\n\t * @param {event} e\n\t */\n\tfunction sortingCellMouseMoveVertical(e) {\n\t\tsortingCellMouseMov(e, 'vertical', this);\n\t}\n\n\t/**\n\t * calls sortingCellMouseMov with the type parameter set to horizontal\n\t *\n\t * @param {event} e\n\t */\n\tfunction sortingCellMouseMoveHorizontal(e) {\n\t\tsortingCellMouseMov(e, 'horizontal', this);\n\t}\n\n\t/**\n\t * remove sortable-hover class from cell when cursor leave cell\n\t */\n\tfunction tdMouseLeave() {\n\t\tthis.classList.remove('sortable-hover');\n\t}\n\n\t/**\n\t * function for sorting the table vertically by the numeric content of cells\n\t *\n\t * @param {event} e\n\t * @param {HTMLElement} table\n\t * @param {string} type\n\t */\n\tfunction sortableTable(e, table, type) {\n\t\tif (\n\t\t\te.target &&\n\t\t\te.target.tagName === 'TD' &&\n\t\t\t!table.parentNode.classList.contains('wptb-preview-table-manage-cells')\n\t\t) {\n\t\t\tlet tableWasSorted = false;\n\t\t\tif (type === 'vertical' && e.target.dataset.hasOwnProperty('sortedVertical')) {\n\n\t\t\t\t/**\n\t\t\t\t * if table have enabled param topRowAsHeader and sellsStackDirection is column\n\t\t\t\t * the top and bottom rows that will not be sorted are temporarily removed from the table\n\t\t\t\t */\n\t\t\t\tlet tableRowsBefore = [];\n\t\t\t\tlet tableRowsAfter = [];\n\t\t\t\tif(this.itemsPerHeader && this.itemsPerHeader < table.rows.length) {\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\tlet tableRowsArr = [...table.rows];\n\t\t\t\t\tlet tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\tfor(let i = 0; i < tableRowsArr.length; i++) {\n\t\t\t\t\t\tif(i < e.target.dataset.yIndex) {\n\t\t\t\t\t\t\ttableRowsBefore.push(tableRowsArr[i]);\n\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t} else if(i > e.target.dataset.yIndex + this.itemsPerHeader) {\n\t\t\t\t\t\t\ttableRowsAfter.push(tableRowsArr[i]);\n\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t}\n\n\t\t\t\tlet tds = table.querySelectorAll(`[data-x-index=\"${e.target.dataset.xIndex}\"]`);\n\t\t\t\ttds = [...tds];\n\n\t\t\t\t/**\n\t\t\t\t * preparing table for sorting\n\t\t\t\t */\n\t\t\t\tlet rowspan;\n\t\t\t\tlet rowNum;\n\t\t\t\ttds.map((td) => {\n\t\t\t\t\tif (!(rowspan = parseInt(td.rowSpan, 10))) {\n\t\t\t\t\t\trowspan = 1;\n\t\t\t\t\t}\n\t\t\t\t\trowNum = td.dataset.yIndex;\n\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\trowNum += rowspan;\n\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t});\n\n\t\t\t\tconst rowsValuesArr = [];\n\t\t\t\tlet rowsTdFirst;\n\t\t\t\tlet tdYCoordsRowSpanPrevious = 0;\n\t\t\t\tlet tableRowsPushed = [];\n\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\te,\n\t\t\t\t\t\ttable,\n\t\t\t\t\t\ttds,\n\t\t\t\t\t\ti,\n\t\t\t\t\t\ttdYCoordsRowSpanPrevious,\n\t\t\t\t\t\t'vertical'\n\t\t\t\t\t);\n\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst td = tds[i];\n\n\t\t\t\t\tlet tdRowspan = parseInt(td.rowSpan, 10);\n\t\t\t\t\tif (!tdRowspan) tdRowspan = 1;\n\n\t\t\t\t\ttdYCoordsRowSpanPrevious = parseInt(td.dataset.yIndex, 10) + tdRowspan;\n\n\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\n\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\tfor (let j = 0; j < tdRowspan; j++) {\n\t\t\t\t\t\trowsTd.push(table.rows[parseInt(td.dataset.yIndex, 10) + j]);\n\t\t\t\t\t\ttableRowsPushed.push(parseInt(td.dataset.yIndex, 10) + j);\n\t\t\t\t\t}\n\t\t\t\t\tif (td.dataset.yIndex > 0) {\n\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowsTdFirst = rowsTd;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedVertical');\n\t\t\t\tif (!orderBy) return;\n\n\t\t\t\tif (rowsValuesArr.length) rowsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\trowsValuesArr.unshift({ rowsTd: rowsTdFirst });\n\n\t\t\t\tif(rowsValuesArr.length < table.rows.length) {\n\t\t\t\t\tfor(let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\tif(tableRowsPushed.indexOf(i) > -1) continue;\n\t\t\t\t\t\tlet rowsTd = [];\n\t\t\t\t\t\trowsTd.push(table.rows[i]);\n\n\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\trowsTd\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst tBody = table.querySelector('tbody');\n\t\t\t\ttBody.innerHTML = '';\n\n\t\t\t\trowsValuesArr.map((rowsValObj) => {\n\t\t\t\t\trowsValObj.rowsTd.map((row) => {\n\t\t\t\t\t\ttBody.appendChild(row);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * returning previously deleted rows\n\t\t\t\t */\n\t\t\t\tif(tableRowsBefore.length) {\n\t\t\t\t\tlet tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\tif(tableLastCont) {\n\t\t\t\t\t\tlet trRef = tableLastCont.querySelector('tr');\n\t\t\t\t\t\ttableRowsBefore.map(tr => {\n\t\t\t\t\t\t\ttableLastCont.insertBefore(tr, trRef);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(tableRowsAfter.length) {\n\t\t\t\t\tlet tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\tif(tBody) {\n\t\t\t\t\t\ttableRowsAfter.map(tr => {\n\t\t\t\t\t\t\ttableLastCont.appendChild(tr);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\tWPTB_CutGlueTable.glueTableHorizontally(table);\n\n\t\t\t\ttableWasSorted = true;\n\t\t\t} else if (type === 'horizontal' && e.target.dataset.xIndex === '0') {\n\t\t\t\tlet tds = table.querySelectorAll(`[data-y-index=\"${e.target.dataset.yIndex}\"]`);\n\t\t\t\ttds = [...tds];\n\n\t\t\t\t// preparing table for sorting\n\t\t\t\tlet colspan;\n\t\t\t\tlet colNum;\n\t\t\t\ttds.map((td) => {\n\t\t\t\t\tif (!(colspan = parseInt(td.colSpan, 10))) {\n\t\t\t\t\t\tcolspan = 1;\n\t\t\t\t\t}\n\t\t\t\t\tcolNum = td.dataset.xIndex;\n\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\tcolNum += colspan;\n\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t});\n\n\t\t\t\tconst columnsValuesArr = [];\n\t\t\t\tlet columnsTdFirst;\n\n\t\t\t\tlet tdXCoordsColSpanPrevious = 0;\n\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\te,\n\t\t\t\t\t\ttable,\n\t\t\t\t\t\ttds,\n\t\t\t\t\t\ti,\n\t\t\t\t\t\ttdXCoordsColSpanPrevious,\n\t\t\t\t\t\t'horizontal'\n\t\t\t\t\t);\n\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst td = tds[i];\n\t\t\t\t\tlet tdColspan = parseInt(td.colSpan, 10);\n\t\t\t\t\tif (!tdColspan) tdColspan = 1;\n\n\t\t\t\t\ttdXCoordsColSpanPrevious = parseInt(td.dataset.xIndex, 10) + tdColspan;\n\n\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\t\t\t\t\tconst columnsTd = [];\n\t\t\t\t\tfor (let j = 0; j < tdColspan; j++) {\n\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(td.dataset.xIndex, 10) + j}\"]`),\n\t\t\t\t\t\t];\n\t\t\t\t\t\tcolumnsTd.push(tdsColumn);\n\t\t\t\t\t}\n\t\t\t\t\tif (td.dataset.xIndex > 0) {\n\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\tcolumnsTd,\n\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumnsTdFirst = columnsTd;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedHorizontal');\n\t\t\t\tif (!orderBy) return;\n\n\t\t\t\tif (columnsValuesArr.length) columnsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\tcolumnsValuesArr.unshift({ columnsTd: columnsTdFirst });\n\n\t\t\t\tif(columnsValuesArr.length < table.maxCols) {\n\t\t\t\t\tlet difference = table.maxCols - columnsValuesArr.length;\n\t\t\t\t\tfor(let i = 0; i < difference; i++) {\n\t\t\t\t\t\tlet tdsColumn = [\n\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(table.maxCols, 10) - parseInt(difference, 10) + i}\"]`),\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\tcolumnsTd: [tdsColumn]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\ttable.rows[i].innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tcolumnsValuesArr.map((columnsValObj) => {\n\t\t\t\t\tcolumnsValObj.columnsTd.map((tdsColumn) => {\n\t\t\t\t\t\ttdsColumn.map((td) => {\n\t\t\t\t\t\t\ttable.rows[td.dataset.yIndex].appendChild(td);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\tWPTB_CutGlueTable.glueTableVertically(table);\n\n\t\t\t\ttableWasSorted = true;\n\t\t\t}\n\n\t\t\tif (tableWasSorted) {\n\t\t\t\tremoveCellsAttrAfterDivision(table);\n\n\t\t\t\tif (table.hasOwnProperty('tableSM')) {\n\t\t\t\t\tconst tableSM = table.tableSM();\n\t\t\t\t\tnew tableSM().tableStateSet();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Function that sets the data-attribute with the number of the row or column\n\t * that the table was sorted by. Returns the number of a row or column\n\t *\n\t * @param {event} e\n\t * @param {string} dataAttr\n\t * @returns {null|boolean}\n\t */\n\tfunction setSortedAscDataAttr(e, dataAttr) {\n\t\tif (e.currentTarget && (e.currentTarget.classList.contains('wptb-preview-table') ||\n\t\t\te.currentTarget.classList.contains('wptb-preview-table-mobile'))) {\n\t\t\tif (!e.target.dataset[dataAttr] || e.target.dataset[dataAttr] === 'ask') {\n\t\t\t\te.target.dataset[dataAttr] = 'desk';\n\t\t\t} else {\n\t\t\t\te.target.dataset[dataAttr] = 'ask';\n\t\t\t}\n\n\t\t\treturn e.target.dataset[dataAttr];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * defines the sorting order\n\t *\n\t * @param {string} orderBy\n\t * @param prev\n\t * @param next\n\t * @returns {number}\n\t */\n\tfunction sortOrder(orderBy = 'ask', prev, next) {\n\t\tlet prevValue = prev.value;\n\t\tlet nextValue = next.value;\n\t\tif (parseInt(prevValue) && parseInt(nextValue)) {\n\t\t\tprevValue = parseInt(prevValue);\n\t\t\tnextValue = parseInt(nextValue);\n\t\t}\n\n\t\tif (orderBy === 'ask') {\n\t\t\tif (prevValue < nextValue) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (prevValue === nextValue) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn 1;\n\t\t}\n\t\tif (prevValue < nextValue) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (prevValue === nextValue) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * return cell text elements values\n\t *\n\t * @param cell {HTMLElement}\n\t * @returns {string}\n\t */\n\tfunction textElementsValuesGet(cell) {\n\t\tlet textElements = cell.querySelectorAll('.wptb-text-container');\n\t\ttextElements = [...textElements];\n\t\tlet value = '';\n\t\tfor (let j = 0; j < textElements.length; j++) {\n\t\t\tconst p = textElements[j].querySelector('p');\n\t\t\tvalue += p.innerText;\n\t\t\tif (j !== textElements.length - 1) value += ' ';\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * adds cells to the collection of cells in the row or column that the table is sorted by.\n\t * These added cells are not originally were added in the collection,\n\t * because they are combined with cells from higher rows or left-side columns\n\t *\n\t * @param {event} e\n\t * @param {HTMLElement} table\n\t * @param {array} tds\n\t * @param {number} i\n\t * @param {number} tdIndexSpanPrev\n\t * @param {string} type\n\t * @returns {{tds: *}|boolean|{tds: *, i: *}}\n\t */\n\tfunction changeSortingTdsCollection(e, table, tds, i, tdIndexSpanPrev, type) {\n\t\tconst td = tds[i];\n\t\tlet tdsCollectionChanged = false;\n\t\tlet collectionTds;\n\t\tlet collectionTdsJSpan;\n\t\tlet collectionTdsJSpanProperty;\n\t\tlet indexName;\n\t\tlet indexNameCamelCase;\n\t\tlet indexNamePerpendicularCamelCase;\n\t\tlet tdSpanProperty;\n\t\t// max rows or columns column\n\t\tlet tableGroupCount;\n\n\t\tif (type === 'vertical') {\n\t\t\tcollectionTdsJSpanProperty = 'colSpan';\n\t\t\tindexName = 'data-y-index';\n\t\t\tindexNameCamelCase = 'yIndex';\n\t\t\tindexNamePerpendicularCamelCase = 'xIndex';\n\t\t\ttdSpanProperty = 'rowSpan';\n\t\t\ttableGroupCount = table.rows.length;\n\t\t} else if (type === 'horizontal') {\n\t\t\tcollectionTdsJSpanProperty = 'rowSpan';\n\t\t\tindexName = 'data-x-index';\n\t\t\tindexNameCamelCase = 'xIndex';\n\t\t\tindexNamePerpendicularCamelCase = 'yIndex';\n\t\t\ttdSpanProperty = 'colSpan';\n\t\t\ttableGroupCount = table.maxCols;\n\t\t}\n\n\t\tif (td.dataset[indexNameCamelCase] - tdIndexSpanPrev > 0) {\n\t\t\tcollectionTds = table.querySelectorAll(`[${indexName}=\"${tdIndexSpanPrev}\"]`);\n\n\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\tif (\n\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t) {\n\t\t\t\t\ttds.splice(i, 0, collectionTds[j]);\n\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\ti--;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (tdsCollectionChanged) return { tds, i };\n\n\t\tlet tdSpan = parseInt(td[tdSpanProperty], 10);\n\t\tif (!tdSpan) tdSpan = 1;\n\t\tif (i == tds.length - 1 && parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan < tableGroupCount) {\n\t\t\tcollectionTds = table.querySelectorAll(\n\t\t\t\t`[${indexName}=\"${parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan}\"]`\n\t\t\t);\n\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\tif (\n\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t) {\n\t\t\t\t\ttds.push(collectionTds[j]);\n\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (tdsCollectionChanged) return { tds };\n\t\treturn false;\n\t}\n\n\t/**\n\t * remove cells attributes which were used for division table\n\t *\n\t * @param {HTMLElement} table\n\t */\n\tfunction removeCellsAttrAfterDivision(table) {\n\t\tconst tdsAll = [...table.getElementsByTagName('td')];\n\t\tfor (let i = 0; i < tdsAll.length; i++) {\n\t\t\tif (tdsAll[i].hasAttribute('data-same-cell-before-division')) {\n\t\t\t\ttdsAll[i].removeAttribute('data-same-cell-before-division');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * function for run sorting table vertically\n\t *\n\t * @param {event} e\n\t */\n\tthis.sortableTableVerticalStart = function (e) {\n\t\tsortableTable.call(thisObject, e, table, 'vertical');\n\t};\n\n\t/**\n\t * function for run sorting table horizontally\n\t *\n\t * @param {event} e\n\t */\n\tthis.sortableTableHorizontalStart = function (e) {\n\t\tsortableTable.call(thisObject, e, table, 'horizontal');\n\t};\n};\n","const WPTB_RecalculateIndexes = function (table) {\r\n    let trs = table.getElementsByTagName( 'tr' ),\r\n        tds, maxCols = 0, maxColsFull = 0, tdsArr = [];\r\n\r\n    for ( let i = 0; i < trs.length; i++ ) {\r\n        tds = trs[i].getElementsByTagName( 'td' );\r\n\r\n        if ( tdsArr[i] == undefined ) {\r\n            tdsArr[i] = [];\r\n        }\r\n\r\n        let jMainIter = 0;\r\n        for ( let j = 0; j < tds.length; j++ ) {\r\n            if ( tdsArr[i][j] != undefined ) {\r\n                for ( let y = 0; y < 100; y++ ) {\r\n                    if ( tdsArr[i][jMainIter] != undefined ) {\r\n                        jMainIter++;\r\n                        continue;\r\n                    }\r\n                    tdsArr[i][jMainIter] = tds[j];\r\n                    tds[j].dataset.xIndex = jMainIter;\r\n                    break;\r\n                }\r\n            } else {\r\n                tdsArr[i][j] = tds[j];\r\n                tds[j].dataset.xIndex = jMainIter;\r\n            }\r\n            tds[j].dataset.yIndex = i;\r\n\r\n            if ( tds[j].colSpan > 1 ) {\r\n                for ( let k = 1; k < tds[j].colSpan; k++ ) {\r\n                    jMainIter++;\r\n                    tdsArr[i][jMainIter] = 'tdDummy';\r\n                }\r\n            }\r\n\r\n            if ( tds[j].rowSpan > 1 ) {\r\n                for ( let x = 1; x < tds[j].rowSpan; x++ ) {\r\n                    if ( tdsArr[i + x] == undefined ) {\r\n                        tdsArr[i + x] = [];\r\n                    }\r\n                    for ( let z = 0; z < tds[j].colSpan; z++ ) {\r\n                        tdsArr[i + x][jMainIter - tds[j].colSpan + 1 + z ] = 'tdDummy';\r\n                    }\r\n                }\r\n            }\r\n            jMainIter++;\r\n        }\r\n\r\n        if ( tds.length > maxCols ) {\r\n            maxCols = tds.length;\r\n        }\r\n\r\n        if( i == 0 ) {\r\n            maxColsFull = jMainIter;\r\n        }\r\n    }\r\n    table.columns = maxCols;\r\n    table.maxCols = maxColsFull;\r\n}\r\n","(function ($) {\n\t/**\n\t * All of the code for your public-facing JavaScript source\n\t * should reside in this file.\n\t *\n\t * Note: It has been assumed you will write jQuery code here, so the\n\t * $ function reference has been prepared for usage within the scope\n\t * of this function.\n\t *\n\t * This enables you to define handlers, for when the DOM is ready:\n\t *\n\t * $(function() {\n\t *\n\t * });\n\t *\n\t * When the window is loaded:\n\t *\n\t * $( window ).load(function() {\n\t *\n\t * });\n\t *\n\t * ...and/or other possibilities.\n\t *\n\t * Ideally, it is not considered best practise to attach more than a\n\t * single DOM-ready or window-load handler for a particular page.\n\t * Although scripts in the WordPress core, Plugins and Themes may be\n\t * practising this, we should strive to set a better example in our own work.\n\t *\n\t * The file is enqueued from inc/frontend/class-frontend.php.\n\t */\n\n\tjQuery(document).ready(function ($) {\n\t\tconst tableContainers = document.getElementsByClassName('wptb-table-container');\n\t\t/**\n\t\t * Adds hover color change support for supported button elements.\n\t\t */\n\t\tfunction addHoverSupport(querySelector) {\n\t\t\tconst buttons = Array.from(document.querySelectorAll(querySelector));\n\n\t\t\tbuttons.map((b) => {\n\t\t\t\tb.addEventListener('mouseenter', (e) => {\n\t\t\t\t\tconst el = e.target;\n\t\t\t\t\t// hover background-color\n\t\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\n\t\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementHoverBgColor;\n\t\t\t\t\t}\n\t\t\t\t\t// hover color\n\t\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\n\t\t\t\t\t\tel.style.color = el.dataset.wptbElementHoverTextColor;\n\t\t\t\t\t}\n\t\t\t\t\t// hover scale\n\t\t\t\t\tif (el.dataset.wptbElementHoverScale) {\n\t\t\t\t\t\tel.style.transform = `scale(${b.dataset.wptbElementHoverScale})`;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tb.addEventListener('mouseleave', (e) => {\n\t\t\t\t\t// reset all supported hover properties to their default value\n\t\t\t\t\tconst el = e.target;\n\t\t\t\t\tif (el.dataset.wptbElementHoverBgColor) {\n\t\t\t\t\t\tel.style.backgroundColor = el.dataset.wptbElementBgColor;\n\t\t\t\t\t}\n\t\t\t\t\tif (el.dataset.wptbElementHoverTextColor) {\n\t\t\t\t\t\tel.style.color = el.dataset.wptbElementColor;\n\t\t\t\t\t}\n\t\t\t\t\tif (el.dataset.wptbElementHoverScale) {\n\t\t\t\t\t\tel.style.transform = 'scale(1)';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// add all kind of functions that have event listeners before responsive table reconstruction to make sure those event listeners are carried over to their clones\n\t\taddHoverSupport('.wptb-preview-table .wptb-button');\n\n\t\t/**\n\t\t * function wptb_tableContainerSectionSmall\n\t\t * add class ( wptb-section-small ) in small width\n\t\t * remove this class in large width\n\t\t * @returns {void}\n\t\t */\n\t\tfunction wptb_tableContainerSectionSmall() {\n\t\t\tconst wptbTableContainer = jQuery('.wptb-table-container');\n\t\t\tconst sw = wptbTableContainer.width();\n\t\t\tif (wptbTableContainer.length > 0) {\n\t\t\t\tif (sw < 480) {\n\t\t\t\t\twptbTableContainer.addClass('wptb-section-small');\n\t\t\t\t} else {\n\t\t\t\t\twptbTableContainer.removeClass('wptb-section-small');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * function wptb_tableGenerateMobile\n\t\t * generates a mobile view of the table\n\t\t * when the top row of the table is not a heading\n\t\t * @returns {void}\n\t\t */\n\t\tfunction wptb_tableGenerateMobile() {\n\t\t\tconst wptbTableContainer = document.getElementsByClassName('wptb-table-container');\n\t\t\tconst wptbPreviewTable = document.getElementsByClassName('wptb-preview-table');\n\t\t\tconst wptbPreviewTableMobile = document.getElementsByClassName('wptb-preview-table-mobile');\n\t\t\tif (wptbTableContainer.length > 0 && wptbPreviewTable.length > 0) {\n\t\t\t\tconst sw = wptbTableContainer[0].offsetWidth;\n\t\t\t\tif (sw < 480) {\n\t\t\t\t\twptbPreviewTable[0].style.display = 'none';\n\n\t\t\t\t\tif (wptbPreviewTableMobile.length == 0) {\n\t\t\t\t\t\tconst tableRows = wptbPreviewTable[0].rows;\n\t\t\t\t\t\tconst tableRowTop = tableRows[0];\n\t\t\t\t\t\tconst tableRowTopChildren = tableRowTop.children;\n\t\t\t\t\t\tlet columnCount = 0;\n\n\t\t\t\t\t\tfor (let i = 0; i < tableRowTopChildren.length; i++) {\n\t\t\t\t\t\t\tcolumnCount += tableRowTopChildren[i].colSpan;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newTableArray = [];\n\n\t\t\t\t\t\tfor (let i = 0; i < columnCount; i++) {\n\t\t\t\t\t\t\tnewTableArray[i] = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let i = 0; i < tableRows.length; i++) {\n\t\t\t\t\t\t\tconst rowChildren = tableRows[i].children;\n\n\t\t\t\t\t\t\tfor (let j = 0; j < columnCount; j++) {\n\t\t\t\t\t\t\t\tif (rowChildren[j].dataset.xIndex == j) {\n\t\t\t\t\t\t\t\t\tconst tdNew = rowChildren[j].cloneNode(true);\n\t\t\t\t\t\t\t\t\tif (tableRows[i].style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\ttdNew.style.backgroundColor = tableRows[i].style.backgroundColor;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tnewTableArray[j].push(tdNew);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewTableArray[j].push('');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst table = document.createElement('table');\n\t\t\t\t\t\ttable.classList.add('wptb-preview-table-mobile');\n\t\t\t\t\t\tconst tableStyle = wptbPreviewTable[0].getAttribute('style');\n\t\t\t\t\t\ttable.setAttribute('style', tableStyle);\n\t\t\t\t\t\ttable.style.display = 'table';\n\t\t\t\t\t\tfor (let i = 0; i < columnCount; i++) {\n\t\t\t\t\t\t\tconst row = table.insertRow(-1);\n\t\t\t\t\t\t\trow.classList.add('wptb-row');\n\n\t\t\t\t\t\t\tfor (let j = 0; j < tableRows.length; j++) {\n\t\t\t\t\t\t\t\tif (newTableArray[i][j]) {\n\t\t\t\t\t\t\t\t\trow.appendChild(newTableArray[i][j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twptbTableContainer[0].appendChild(table);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twptbPreviewTableMobile[0].style.display = 'table';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twptbPreviewTable[0].style.display = 'table';\n\t\t\t\t\tif (wptbPreviewTableMobile.length > 0) {\n\t\t\t\t\t\twptbPreviewTableMobile[0].style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twptb_tdDefaultWidth();\n\t\twptb_tableReconstraction();\n\n\t\t// when window resize call wpcd_archiveSectionSmall and wptb_tableGenerateMobile\n\t\t$(window).resize(function () {\n\t\t\twptb_tdDefaultWidth();\n\t\t\twptb_tableReconstraction();\n\t\t});\n\n\t\tfunction wptb_tableReconstraction() {\n\t\t\tfor (let i = 0; i < tableContainers.length; i++) {\n\t\t\t\tconst tableContainer = tableContainers[i];\n\n\t\t\t\t// Set default indicator of creating a new table in true\n\t\t\t\tlet createNewTableIndic = true;\n\n\t\t\t\tlet previewTable = tableContainer.getElementsByClassName('wptb-preview-table');\n\t\t\t\tlet tableContainerMatrix = tableContainer.getElementsByClassName('wptb-table-container-matrix');\n\n\t\t\t\tif (previewTable.length > 0 && tableContainerMatrix.length > 0) {\n\t\t\t\t\tpreviewTable = previewTable[0];\n\t\t\t\t\ttableContainerMatrix = tableContainerMatrix[0];\n\t\t\t\t\tpreviewTable.style.display = 'table';\n\n\t\t\t\t\tif (previewTable.dataset.wptbTableAlignment) {\n\t\t\t\t\t\tconst { wptbTableAlignment } = previewTable.dataset;\n\n\t\t\t\t\t\tconst wptbTableContainerWidth = tableContainer.offsetWidth;\n\t\t\t\t\t\tif (wptbTableContainerWidth < previewTable.offsetWidth) {\n\t\t\t\t\t\t\tpreviewTable.style.float = null;\n\t\t\t\t\t\t} else if (wptbTableAlignment == 'center') {\n\t\t\t\t\t\t\tpreviewTable.style.float = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpreviewTable.style.float = wptbTableAlignment;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (wptbTableAlignment == 'center') {\n\t\t\t\t\t\t\ttableContainer.style.float = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttableContainer.style.float = wptbTableAlignment;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// check data parametrs reconstraction and wptbAdaptiveTable if they are both equal 1 then continue\n\t\t\t\t\tif (previewTable.dataset.reconstraction == 1 && previewTable.dataset.wptbAdaptiveTable == 1) {\n\t\t\t\t\t\t// get widths for wptb-table-container and wptb-preview-table\n\t\t\t\t\t\tconst tableContainerWidth = tableContainer.offsetWidth;\n\t\t\t\t\t\tconst previewTableWidth = previewTable.offsetWidth;\n\n\t\t\t\t\t\t// get count of table columns\n\t\t\t\t\t\tlet tableColumns;\n\t\t\t\t\t\tconst previewTableRows = previewTable.rows;\n\t\t\t\t\t\tif (previewTableRows.length > 0) {\n\t\t\t\t\t\t\tconst firstRow = previewTableRows[0];\n\t\t\t\t\t\t\tconst tdsRow = firstRow.querySelectorAll('td');\n\n\t\t\t\t\t\t\ttableColumns = tdsRow.length;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// check the top line if it is presented as a title\n\t\t\t\t\t\tconst tablePreviewHeadIndic = previewTable.classList.contains('wptb-table-preview-head');\n\n\t\t\t\t\t\t// check conditions: if table top row is as \"header\" - table must have more that two columns,\n\t\t\t\t\t\t// otherwise table must have more taht one columns\n\t\t\t\t\t\tlet tableReconstructed = false;\n\t\t\t\t\t\tlet wptbPreviewTableMobile;\n\t\t\t\t\t\tif ((!tablePreviewHeadIndic || tableColumns > 2) && tableColumns > 1) {\n\t\t\t\t\t\t\t// if width of wptb-table-container less then width of wptb-preview-table -\n\t\t\t\t\t\t\t// continue the way creation new mobile table\n\t\t\t\t\t\t\tif (tableContainerWidth < previewTableWidth) {\n\t\t\t\t\t\t\t\ttableContainer.style.overflow = 'unset';\n\n\t\t\t\t\t\t\t\t// hide wptb-table-container-matrix\n\t\t\t\t\t\t\t\tif (tableContainerMatrix && !tableContainerMatrix.classList.contains('wptb-matrix-hide')) {\n\t\t\t\t\t\t\t\t\ttableContainerMatrix.classList.add('wptb-matrix-hide');\n\t\t\t\t\t\t\t\t\ttableReconstructed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpreviewTable.classList.add('wptb-mobile-view-active');\n\n\t\t\t\t\t\t\t\tif (previewTable.rows && tableColumns) {\n\t\t\t\t\t\t\t\t\t// we get the estimated cell width\n\t\t\t\t\t\t\t\t\tconst tdWidth = previewTableWidth / tableColumns;\n\n\t\t\t\t\t\t\t\t\t// get the quantity of whole Columns that are can placed in the container\n\t\t\t\t\t\t\t\t\tlet wholeColumnsInContainer = Math.floor(tableContainerWidth / tdWidth);\n\t\t\t\t\t\t\t\t\tif (wholeColumnsInContainer < 1) wholeColumnsInContainer = 1;\n\n\t\t\t\t\t\t\t\t\t// check for the existence of a mobile table\n\t\t\t\t\t\t\t\t\t// if it available, check this table for compliance\n\t\t\t\t\t\t\t\t\t// with our conditions. If it compliance, remain this table\n\t\t\t\t\t\t\t\t\t// and cancel creating a new table ( createNewTableIndic = false ).\n\t\t\t\t\t\t\t\t\tif (tableContainer.getElementsByClassName('wptb-preview-table-mobile').length > 0) {\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t'wptb-preview-table-mobile'\n\t\t\t\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.classList.remove('wptb-mobile-hide');\n\t\t\t\t\t\t\t\t\t\tconst dataWholeColumnInContainer =\n\t\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.dataset.wholeColumnsInContainer;\n\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\n\t\t\t\t\t\t\t\t\t\t\tpreviewTable.classList.contains('wptb-table-preview-head')\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\n\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\tdataWholeColumnInContainer == wholeColumnsInContainer &&\n\t\t\t\t\t\t\t\t\t\t\t!previewTable.classList.contains('wptb-table-preview-head') &&\n\t\t\t\t\t\t\t\t\t\t\t(tableContainerWidth > 480 || wptbPreviewTableMobile.column == 1)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tcreateNewTableIndic = false;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile.parentNode.removeChild(wptbPreviewTableMobile);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t\t// if indicator of creating of table \"true\" - continue\n\t\t\t\t\t\t\t\t\tif (createNewTableIndic) {\n\t\t\t\t\t\t\t\t\t\t// create new table for mobile devices\n\t\t\t\t\t\t\t\t\t\tconst newTable = document.createElement('table');\n\t\t\t\t\t\t\t\t\t\tconst newTableTbody = document.createElement('tbody');\n\t\t\t\t\t\t\t\t\t\tnewTable.appendChild(newTableTbody);\n\n\t\t\t\t\t\t\t\t\t\t// add css class for new mobile table\n\t\t\t\t\t\t\t\t\t\tnewTable.classList.add('wptb-preview-table-mobile');\n\t\t\t\t\t\t\t\t\t\tconst infArr = previewTable.className.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\t\t\t\t\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\t\t\t\t\t\tnewTable.classList.add(infArr[0]);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// get number of rows for wptb-preview-table\n\t\t\t\t\t\t\t\t\t\tconst tableRows = previewTable.rows.length;\n\n\t\t\t\t\t\t\t\t\t\t// In this variable must have quantity columns of the last section of the new table\n\t\t\t\t\t\t\t\t\t\tlet newTableLastSectionFilledColumns;\n\n\t\t\t\t\t\t\t\t\t\t// set valuesIsSaved in 'false'\n\t\t\t\t\t\t\t\t\t\t// if the parameters newTableLastSectionFilledColumns get\n\t\t\t\t\t\t\t\t\t\t// optimal values, valuesIsSaved must have value 'true'\n\t\t\t\t\t\t\t\t\t\tlet valuesIsSaved = false;\n\n\t\t\t\t\t\t\t\t\t\t// check if top row is as \"header\"\n\t\t\t\t\t\t\t\t\t\tif (previewTable.classList.contains('wptb-table-preview-head')) {\n\t\t\t\t\t\t\t\t\t\t\t// quantity rows without top row\n\t\t\t\t\t\t\t\t\t\t\tconst tableRowsWithoutHeader = tableRows - 1;\n\n\t\t\t\t\t\t\t\t\t\t\t// this variable will have quantity columns in new mobile table\n\t\t\t\t\t\t\t\t\t\t\tlet newTableColumnsWithoutLeftHeader;\n\n\t\t\t\t\t\t\t\t\t\t\t// if quantity of rows in desktop table more than\n\t\t\t\t\t\t\t\t\t\t\t// quantity whole columns which are can placed in the container,\n\t\t\t\t\t\t\t\t\t\t\t// execute \"loop for\"\n\t\t\t\t\t\t\t\t\t\t\tif (tableRows > wholeColumnsInContainer) {\n\t\t\t\t\t\t\t\t\t\t\t\t// this code, —Åyclical reduces the number of columns in the new table,\n\t\t\t\t\t\t\t\t\t\t\t\t// until the optimal view is obtained so that the last block of the new table\n\t\t\t\t\t\t\t\t\t\t\t\t// has more than half the columns compared to the previous blocks\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableRowsWithoutHeader; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = wholeColumnsInContainer - 1 - i;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader <= 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = 1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader % newTableColumnsWithoutLeftHeader;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2 * newTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.8 * newTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader > 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader <= 18 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1.6 * newTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns <\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumnsWithoutLeftHeader = tableRowsWithoutHeader;\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\n\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// if all necessary values ‚Äã‚Äãare available (  ), execute\n\t\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\n\t\t\t\t\t\t\t\t\t\t\t\tlet countRows;\n\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumnsWithoutLeftHeader > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountRows =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableColumns *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttableRowsWithoutHeader / newTableColumnsWithoutLeftHeader\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountRows = tableColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumberLast = Math.floor((countRows - 1) / tableColumns);\n\t\t\t\t\t\t\t\t\t\t\t\tlet tdStyles;\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < countRows; j++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(j / tableColumns);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tdLeftHeader = previewTable.rows[0].children[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet td;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowFirstStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!tdLeftHeader.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.backgroundColor =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trowFirstStyles.backgroundColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.width = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.height = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tdLeftHeader.removeAttribute('data-x-index');\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.removeAttribute('data-wptb-css-td-auto-width');\n\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderTopColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderColor = tdStyles.borderBottomColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdLeftHeader.style.borderTopWidth = '5px';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(tdLeftHeader);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet k = newTableColumnsWithoutLeftHeader * sectionNumber + 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tk < newTableColumnsWithoutLeftHeader * (sectionNumber + 1) + 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tk++\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (k < previewTable.rows.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = previewTable.rows[k].children[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tj - sectionNumber * tableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].cloneNode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowKStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.rows[k]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!td.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.backgroundColor = rowKStyles.backgroundColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.width = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.height = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//td.removeAttribute('data-x-index');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.removeAttribute('data-wptb-css-td-auto-width');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = document.createElement('td');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderWidth = '0px';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.background = '#fff';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttdStyles = window.getComputedStyle(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewTable.querySelector('td')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (tdStyles.borderTopColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderTopColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderColor = tdStyles.borderBottomColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sectionNumber > 0 && j % tableColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd.style.borderTopWidth = '5px';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tlet newTableColumns;\n\t\t\t\t\t\t\t\t\t\t\tif (tableContainerWidth > 480) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < tableColumns; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = wholeColumnsInContainer - i;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableColumns == 0) newTableColumns = 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = tableColumns % newTableColumns;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newTableLastSectionFilledColumns == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 2 * newTableLastSectionFilledColumns <= 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 6 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.8 * newTableLastSectionFilledColumns <= 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns > 12 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns <= 18 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns - 1.6 * newTableLastSectionFilledColumns <= 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns < newTableColumns\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableColumns = 1;\n\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns = 0;\n\t\t\t\t\t\t\t\t\t\t\t\tvaluesIsSaved = true;\n\t\t\t\t\t\t\t\t\t\t\t\tnewTable.column = 1;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tconst increaseRatioRows = Math.ceil(tableColumns / newTableColumns);\n\n\t\t\t\t\t\t\t\t\t\t\tconst newTableRows = increaseRatioRows * tableRows;\n\n\t\t\t\t\t\t\t\t\t\t\tif (valuesIsSaved) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < newTableRows; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sectionNumber = Math.floor(i / tableRows);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet jMax;\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet jStart;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionNumber != increaseRatioRows - 1 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableLastSectionFilledColumns == 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = sectionNumber * newTableColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = newTableColumns * (1 + sectionNumber);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjStart = tableColumns - newTableLastSectionFilledColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjMax = tableColumns;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst row = previewTable.rows[i - sectionNumber * tableRows];\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.classList = row.classList;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.style.backgroundColor = row.style.backgroundColor;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (let j = jStart; j < jMax; j++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newTd = row.children[j].cloneNode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!newTd.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rowStyles = window.getComputedStyle(row);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.backgroundColor = rowStyles.backgroundColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.width = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.style.height = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//newTd.removeAttribute('data-x-index');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewTd.removeAttribute('data-wptb-css-td-auto-width');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(newTd);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewTableTbody.appendChild(tr);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tnewTable.dataset.wholeColumnsInContainer = wholeColumnsInContainer;\n\t\t\t\t\t\t\t\t\t\tconst images = newTable.querySelectorAll('[srcset]');\n\t\t\t\t\t\t\t\t\t\tif (images.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\timages[i].removeAttribute('srcset');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = newTable;\n\t\t\t\t\t\t\t\t\t\ttableContainer.appendChild(newTable);\n\t\t\t\t\t\t\t\t\t\ttableReconstructed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (tableContainerMatrix && tableContainerMatrix.classList.contains('wptb-matrix-hide')) {\n\t\t\t\t\t\t\t\t\ttableContainerMatrix.classList.remove('wptb-matrix-hide');\n\t\t\t\t\t\t\t\t\ttableReconstructed = true;\n\t\t\t\t\t\t\t\t\tpreviewTable.classList.remove('wptb-mobile-view-active');\n\t\t\t\t\t\t\t\t\twptbPreviewTableMobile = tableContainer.querySelector('.wptb-preview-table-mobile');\n\t\t\t\t\t\t\t\t\tif (wptbPreviewTableMobile) {\n\t\t\t\t\t\t\t\t\t\ttableContainer\n\t\t\t\t\t\t\t\t\t\t\t.getElementsByClassName('wptb-preview-table-mobile')[0]\n\t\t\t\t\t\t\t\t\t\t\t.classList.add('wptb-mobile-hide');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttableContainer.style.overflow = 'auto';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpreviewTable.style.minWidth = 'auto';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tWPTB_RecalculateIndexes(previewTable);\n\n\t\t\t\t\t\tif(tableReconstructed) {\n\t\t\t\t\t\t\tWPTB_RecalculateIndexes(wptbPreviewTableMobile);\n\t\t\t\t\t\t\tconst tabEvent = new CustomEvent('table:rebuilt', { detail: true, bubbles: true });\n\t\t\t\t\t\t\tpreviewTable.dispatchEvent(tabEvent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction wptb_tdDefaultWidth() {\n\t\t\tconst wptbTableContainers = document.getElementsByClassName('wptb-table-container');\n\t\t\t// let frontendEditLink = document.querySelectorAll( '.wptb-frontend-table-edit-link' );\n\t\t\tfor (let i = 0; i < wptbTableContainers.length; i++) {\n\t\t\t\tconst wptbTableContainer = wptbTableContainers[i];\n\n\t\t\t\twptbTableContainer.classList.add(`wptb-table-container-${i}`);\n\n\t\t\t\tlet table = wptbTableContainer.getElementsByClassName('wptb-preview-table');\n\t\t\t\tif (table.length > 0) {\n\t\t\t\t\ttable = table[0];\n\n\t\t\t\t\tif (table.dataset.wptbTableContainerMaxWidth) {\n\t\t\t\t\t\twptbTableContainer.style.maxWidth = `${table.dataset.wptbTableContainerMaxWidth}px`;\n\t\t\t\t\t}\n\t\t\t\t\ttable.classList.remove('wptb-table-preview-static-indic');\n\n\t\t\t\t\ttable.merging–°ellsHorizontally = false;\n\t\t\t\t\tconst tds = table.querySelectorAll('td');\n\t\t\t\t\tfor (let j = 0; j < tds.length; j++) {\n\t\t\t\t\t\tif (tds[j].colSpan > 1) {\n\t\t\t\t\t\t\ttable.merging–°ellsHorizontally = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst wptbTableContainerWidth = wptbTableContainer.offsetWidth;\n\n\t\t\t\t\tconst td = table.querySelector('td');\n\t\t\t\t\tconst tdStyleObj = window.getComputedStyle(td, null);\n\t\t\t\t\tconst tdBorderLeftWidth = tdStyleObj.getPropertyValue('border-left-width');\n\t\t\t\t\tconst tdBorderRightWidth = tdStyleObj.getPropertyValue('border-right-width');\n\t\t\t\t\tconst tdPaddingLeftWidth = tdStyleObj.getPropertyValue('padding-left');\n\t\t\t\t\tconst tdPaddingRightWidth = tdStyleObj.getPropertyValue('padding-left');\n\t\t\t\t\tconst tdPaddingCommon = parseFloat(tdPaddingLeftWidth, 10) + parseFloat(tdPaddingRightWidth, 10);\n\t\t\t\t\tconst tableTdBorderCommonWidth =\n\t\t\t\t\t\tparseFloat(tdBorderLeftWidth, 10) + parseFloat(tdBorderRightWidth, 10);\n\t\t\t\t\tconst { wptbTableTdsSumMaxWidth } = table.dataset;\n\t\t\t\t\tconst { wptbFixedWidthSize } = table.dataset;\n\t\t\t\t\tconst { wptbCellsWidthAutoCount } = table.dataset;\n\t\t\t\t\tlet styleElementCreate = false;\n\t\t\t\t\tlet tableTdWidthAuto;\n\t\t\t\t\tif (wptbTableTdsSumMaxWidth < wptbTableContainerWidth) {\n\t\t\t\t\t\tif (wptbCellsWidthAutoCount) {\n\t\t\t\t\t\t\ttable.style.minWidth = '100%';\n\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = wptbTableTdsSumMaxWidth + 'px';\n\t\t\t\t\t\t\t//                        }\n\n\t\t\t\t\t\t\tif (table.merging–°ellsHorizontally) {\n\t\t\t\t\t\t\t\ttable.style.width = 'auto';\n\t\t\t\t\t\t\t\tconst tableTdsWidthAutoCommon = wptbTableContainerWidth - wptbFixedWidthSize;\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdsWidthAutoCommon / wptbCellsWidthAutoCount;\n\t\t\t\t\t\t\t\ttableTdWidthAuto = tableTdWidthAuto - tdPaddingCommon - tableTdBorderCommonWidth;\n\t\t\t\t\t\t\t\tstyleElementCreate = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttable.style.width = '100%';\n\n\t\t\t\t\t\t\t\t//                            if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.width = '100%';\n\t\t\t\t\t\t\t\t//                                frontendEditLink[i].style.maxWidth = '100%';\n\t\t\t\t\t\t\t\t//                            }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttable.style.width = 'auto';\n\t\t\t\t\t\t\ttable.style.minWidth = null;\n\t\t\t\t\t\t\ttable.style.maxWidth = `${wptbTableTdsSumMaxWidth}px`;\n\n\t\t\t\t\t\t\t//                        if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.width = null;\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.minWidth = null;\n\t\t\t\t\t\t\t//                            frontendEditLink[i].style.maxWidth = wptbTableTdsSumMaxWidth + 'px';\n\t\t\t\t\t\t\t//                        }\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttable.style.maxWidth = null;\n\t\t\t\t\t\ttable.style.minWidth = `${table.dataset.wptbTableTdsSumMaxWidth}px`;\n\t\t\t\t\t\ttable.style.width = 'auto';\n\t\t\t\t\t\ttableTdWidthAuto = table.dataset.wptbTdWidthAuto ? table.dataset.wptbTdWidthAuto : '100';\n\t\t\t\t\t\tstyleElementCreate = true;\n\n\t\t\t\t\t\t//                    if( frontendEditLink && frontendEditLink[i] ) {\n\t\t\t\t\t\t//                        frontendEditLink[i].style.maxWidth = '100%';\n\t\t\t\t\t\t//                        frontendEditLink[i].style.minWidth = table.dataset.wptbTableTdsSumMaxWidth + 'px';\n\t\t\t\t\t\t//                        frontendEditLink[i].style.width = null;\n\t\t\t\t\t\t//                    }\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { head } = document;\n\t\t\t\t\tif (head) {\n\t\t\t\t\t\tconst cssForTdsWidthAutoOld = head.querySelector(`style[data-wptb-td-auto-width-${i}=\"true\"]`);\n\n\t\t\t\t\t\tif (cssForTdsWidthAutoOld) {\n\t\t\t\t\t\t\thead.removeChild(cssForTdsWidthAutoOld);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (styleElementCreate) {\n\t\t\t\t\t\tconst cssForTdsWidthAuto = document.createElement('style');\n\t\t\t\t\t\tcssForTdsWidthAuto.setAttribute(`data-wptb-td-auto-width-${i}`, true);\n\t\t\t\t\t\tcssForTdsWidthAuto.innerHTML = `.wptb-table-container-${i} table td[data-wptb-css-td-auto-width=true]{width:${tableTdWidthAuto}px}`;\n\t\t\t\t\t\tif (head) {\n\t\t\t\t\t\t\thead.appendChild(cssForTdsWidthAuto);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// code for adding of old css styles for correct view\n\t\tconst elements = document.getElementsByClassName('wptb-ph-element');\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tconst element = elements[i];\n\t\t\tif (element.classList.contains('wptb-list-item-container')) {\n\t\t\t\telement.classList.remove('wptb-list-item-container');\n\t\t\t\telement.classList.add('wptb-list-container');\n\t\t\t}\n\n\t\t\tif (element.classList.contains('wptb-button-container')) {\n\t\t\t\tconst infArr = element.className.match(/wptb-size-([A-Z]+)/i);\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tconst wptbSize = infArr[0];\n\t\t\t\t\tconst wptbSizeNew = wptbSize.toLowerCase();\n\n\t\t\t\t\telement.classList.remove(wptbSize);\n\n\t\t\t\t\tconst wptbButtonWrapper = element.querySelector('.wptb-button-wrapper');\n\t\t\t\t\tif (wptbButtonWrapper) {\n\t\t\t\t\t\twptbButtonWrapper.classList.add(wptbSizeNew);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// responsive setup\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst responsiveFront = new WPTB_ResponsiveFrontend({\n\t\t\tquery: '.wptb-preview-table',\n\t\t\tbindToResize: true,\n\t\t});\n\n\t\tresponsiveFront.rebuildTables();\n\n\t\t//sorting table\n\t\tfunction sortingTable() {\n\t\t\tlet tables = document.querySelectorAll('.wptb-preview-table');\n\t\t\tfor (let i = 0; i < tables.length; i++) {\n\t\t\t\tlet sortableTable = new WPTB_SortableTable(tables[i]);\n\t\t\t\tsortableTable.sortableTableInitialization(responsiveFront);\n\t\t\t}\n\t\t}\n\t\tsortingTable();\n\t});\n})(jQuery);\n"]}