function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var a=0;a<e;a++)for(var r=t.rows[a].children,o=0;o<r.length;o++)if(1<r[o].rowSpan&&r[o].rowSpan>e-a){var l=r[o].rowSpan-e+a;r[o].rowSpan=e-a,r[o].dataset.sameCellBeforeDivision||(r[o].dataset.sameCellBeforeDivision="r"+a+"c"+o);var n=void 0;n=t.hasOwnProperty("wptbCell")?(n=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td");var s=r[o].getAttribute("style");n.setAttribute("style",s),n.colSpan=r[o].colSpan,n.rowSpan=l,n.dataset.sameCellBeforeDivision=r[o].dataset.sameCellBeforeDivision;for(var i=r[o].dataset.xIndex,d=parseInt(i)+parseInt(r[o].colSpan),c=void 0;!c&&d<t.maxCols;)c=t.rows[e].querySelector('[data-x-index="'+d+'"]'),d++;t.rows[e].insertBefore(n,c),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=[].concat(_toConsumableArray(e.getElementsByTagName("td"))),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var r=t[a].dataset.sameCellBeforeDivision,o=e.querySelectorAll('[data-same-cell-before-division="'+r+'"]'),l=0;l<o.length;l++)if(o[l]&&o[l+1]&&o[l].parentNode&&o[l+1].parentNode&&!o[l].parentNode.classList.contains("wptb-row-moving")&&!o[l+1].parentNode.classList.contains("wptb-row-moving")&&o[l+1].dataset.yIndex==parseInt(o[l].dataset.yIndex)+parseInt(o[l].rowSpan)){o[l].rowSpan+=o[l+1].rowSpan;for(var n=[].concat(_toConsumableArray(o[l+1].children)),s=0;s<n.length;s++)o[l].appendChild(n[s]);o[l+1].parentNode.removeChild(o[l+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var a=0;a<t.rows.length;a++){if(e<t.maxCols&&0!=e&&!t.rows[a].querySelector('[data-x-index="'+e+'"]'))for(var r=t.rows[a].children,o=void 0,l=r.length,n=void 0,s=void 0,i=void 0,d=void 0,c=0;c<l;c++)if(1<r[c].colSpan&&parseInt(r[c].dataset.xIndex)<e&&parseInt(r[c].dataset.xIndex)+parseInt(r[c].colSpan)>e){o=t.hasOwnProperty("wptbCell")?(o=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),s=r[c].rowSpan,i=r[c].colSpan,r[c].colSpan=e-r[c].dataset.xIndex,d=i-r[c].colSpan,r[c].dataset.sameCellBeforeDivision||(r[c].dataset.sameCellBeforeDivision="r"+a+"c"+c);var u=r[c].getAttribute("style");o.setAttribute("style",u);var p=t.querySelector('[data-x-index="'+e+'"]');p&&(o.style.width=p.style.width);var b=t.querySelector('[data-y-index="'+a+'"]');b&&(o.style.height=b.style.height),n=r[c+1]?r[c+1]:null,t.rows[a].insertBefore(o,n),o.colSpan=d,o.rowSpan=s,o.dataset.sameCellBeforeDivision=r[c].dataset.sameCellBeforeDivision,a+=s-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=[].concat(_toConsumableArray(e.getElementsByTagName("td"))),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var r=t[a].dataset.sameCellBeforeDivision,o=[].concat(_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+r+'"]'))),l=null,n=0;n<o.length;n++)if(o[n]&&o[n+1]&&!o[n].classList.contains("wptb-column-moving")&&!o[n+1].classList.contains("wptb-column-moving")&&o[n+1].dataset.xIndex==parseInt(o[n].dataset.xIndex)+parseInt(o[n].colSpan)){null==l&&(l=n),o[l].colSpan+=o[n+1].colSpan;for(var s=[].concat(_toConsumableArray(o[n+1].children)),i=0;i<s.length;i++)o[l].appendChild(s[i]);o[n+1].parentNode.removeChild(o[n+1])}WPTB_RecalculateIndexes(e)}}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}!function(e,t,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=a():t[e]=a()}("WPTB_SortableTable",self||global,function(){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},J=this.table=e.table;WPTB_RecalculateIndexes(J);var a=this;function t(e,t,a){if("TD"===e.target.tagName){var r=null==e.offsetX?e.layerX:e.offsetX,o=null==e.offsetY?e.layerY:e.offsetY,l=!1;("vertical"===t&&e.target.clientWidth-r<=35||"horizontal"===t&&r<=35)&&(l=!0),l&&(e.target.clientHeight-35)/2<o&&(e.target.clientHeight+35)/2>o?a.classList.add("sortable-hover"):a.classList.remove("sortable-hover")}else a.classList.remove("sortable-hover")}function c(e){t(e,"vertical",this)}function u(e){t(e,"horizontal",this)}function p(){this.classList.remove("sortable-hover")}function r(e,t){if(e.target&&"TD"===e.target.tagName&&!J.parentNode.classList.contains("wptb-preview-table-manage-cells")){var a=e.currentTarget,r=!1;if("vertical"===t&&e.target.dataset.hasOwnProperty("sortedVertical")){var o=[],l=[];if(this.itemsPerHeader&&this.itemsPerHeader<a.rows.length){WPTB_RecalculateIndexes(a);for(var n=[].concat(_toConsumableArray(a.rows)),s=a.querySelector("tbody")?a.querySelector("tbody"):a,i=0;i<n.length;i++)i<e.target.dataset.yIndex?(o.push(n[i]),s.removeChild(n[i])):i>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(l.push(n[i]),s.removeChild(n[i]));WPTB_RecalculateIndexes(a)}var d=a.querySelectorAll('[data-x-index="'+e.target.dataset.xIndex+'"]');d=[].concat(_toConsumableArray(d));var c=void 0,u=void 0;d.map(function(e){(c=parseInt(e.rowSpan,10))||(c=1),u=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(u,a),u+=c,WPTB_CutGlueTable.cutTableHorizontally(u,a)});for(var p=[],b=void 0,h=0,v=[],f=0;f<d.length;f++){var m=$(e,a,d,f,h,"vertical");if(m&&m.hasOwnProperty("i"))d=m.tds,f=m.i;else{m&&(d=m.tds);var w=d[f],g=parseInt(w.rowSpan,10);g||(g=1),h=parseInt(w.dataset.yIndex,10)+g;for(var y=U(w),S=[],C=0;C<g;C++)S.push(a.rows[parseInt(w.dataset.yIndex,10)+C]),v.push(parseInt(w.dataset.yIndex,10)+C);0<w.dataset.yIndex?p.push({rowsTd:S,value:y}):b=S}}var T=Z(e,"sortedVertical");if(!T)return;if(p.length&&p.sort(function(e,t){return K(T,e,t)}),p.unshift({rowsTd:b}),p.length<a.rows.length)for(var x=0;x<a.rows.length;x++)if(!(-1<v.indexOf(x))){var A=[];A.push(a.rows[x]),p.push({rowsTd:A})}var R=a.querySelector("tbody");if(R.innerHTML="",p.map(function(e){e.rowsTd.map(function(e){R.appendChild(e)})}),o.length){var E=a.querySelector("tbody")?a.querySelector("tbody"):a;if(E){var I=E.querySelector("tr");o.map(function(e){E.insertBefore(e,I)})}}if(l.length){var k=a.querySelector("tbody")?a.querySelector("tbody"):a;R&&l.map(function(e){k.appendChild(e)})}WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableHorizontally(a),r=!0}else if("horizontal"===t&&"0"===e.target.dataset.xIndex){var B=a.querySelectorAll('[data-y-index="'+e.target.dataset.yIndex+'"]');B=[].concat(_toConsumableArray(B));var P=void 0,M=void 0;B.map(function(e){(P=parseInt(e.colSpan,10))||(P=1),M=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(M,a),M+=P,WPTB_CutGlueTable.cutTableVertically(M,a)});for(var L=[],W=void 0,H=0,O=0;O<B.length;O++){var q=$(e,a,B,O,H,"horizontal");if(q&&q.hasOwnProperty("i"))B=q.tds,O=q.i;else{q&&(B=q.tds);var _=B[O],N=parseInt(_.colSpan,10);N||(N=1),H=parseInt(_.dataset.xIndex,10)+N;for(var z=U(_),D=[],j=0;j<N;j++){var V=[].concat(_toConsumableArray(a.querySelectorAll('[data-x-index="'+(parseInt(_.dataset.xIndex,10)+j)+'"]')));D.push(V)}0<_.dataset.xIndex?L.push({columnsTd:D,value:z}):W=D}}var F=Z(e,"sortedHorizontal");if(!F)return;if(L.length&&L.sort(function(e,t){return K(F,e,t)}),L.unshift({columnsTd:W}),L.length<a.maxCols)for(var G=a.maxCols-L.length,X=0;X<G;X++){var Y=[].concat(_toConsumableArray(a.querySelectorAll('[data-x-index="'+(parseInt(a.maxCols,10)-parseInt(G,10)+X)+'"]')));L.push({columnsTd:[Y]})}for(var Q=0;Q<a.rows.length;Q++)a.rows[Q].innerHTML="";L.map(function(e){e.columnsTd.map(function(e){e.map(function(e){a.rows[e.dataset.yIndex].appendChild(e)})})}),WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableVertically(a),r=!0}r&&(function(e){for(var t=[].concat(_toConsumableArray(e.getElementsByTagName("td"))),a=0;a<t.length;a++)t[a].hasAttribute("data-same-cell-before-division")&&t[a].removeAttribute("data-same-cell-before-division")}(a),a.hasOwnProperty("tableSM")&&(new(a.tableSM())).tableStateSet(),this.reassignElementsStyles("td"),this.reassignElementsStyles("tr"))}}function Z(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function K(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ask",t=arguments[1],a=arguments[2],r=t.value,o=a.value;return parseInt(r)&&parseInt(o)&&(r=parseInt(r),o=parseInt(o)),"ask"===e?r<o?-1:r===o?0:1:r<o?1:r===o?0:-1}function U(e){var t=e.querySelectorAll(".wptb-text-container");t=[].concat(_toConsumableArray(t));for(var a="",r=0;r<t.length;r++)a+=t[r].querySelector("p").innerText,r!==t.length-1&&(a+=" ");return a}function $(e,t,a,r,o,l){var n=a[r],s=!1,i=void 0,d=void 0,c=void 0,u=void 0,p=void 0,b=void 0,h=void 0,v=void 0;if("vertical"===l?(c="colSpan",u="data-y-index",p="yIndex",b="xIndex",h="rowSpan",v=t.rows.length):"horizontal"===l&&(c="rowSpan",u="data-x-index",p="xIndex",b="yIndex",h="colSpan",v=t.maxCols),0<n.dataset[p]-o){i=t.querySelectorAll("["+u+'="'+o+'"]');for(var f=0;f<i.length;f++)if((d=i[f][c])||(d=1),i[f].dataset[b]<e.target.dataset[b]&&parseInt(i[f].dataset[b],10)+parseInt(d,10)>e.target.dataset[b]){a.splice(r,0,i[f]),s=!0,r--;break}}if(s)return{tds:a,i:r};var m=parseInt(n[h],10);if(m||(m=1),r==a.length-1&&parseInt(n.dataset[p],10)+m<v){i=t.querySelectorAll("["+u+'="'+(parseInt(n.dataset[p],10)+m)+'"]');for(var w=0;w<i.length;w++)if((d=i[w][c])||(d=1),i[w].dataset[b]<e.target.dataset[b]&&parseInt(i[w].dataset[b],10)+parseInt(d,10)>e.target.dataset[b]){a.push(i[w]),s=!0;break}}return!!s&&{tds:a}}return this.itemsPerHeader=0,this.tableMaxCols=J.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=J.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=J.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var a=0;a<t.length;a++){var r=t[a],o=window.getComputedStyle(r,null).getPropertyValue("background-color"),l="";"td"===e?(l=r.dataset.xIndex+"-"+r.dataset.yIndex,this.cellsStylesScheme[l]={backgroundColor:o}):"tr"===e&&(l=String(a),this.rowsStylesScheme[l]={backgroundColor:o})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e),a=void 0;if("td"===e?a=this.cellsStylesScheme:"tr"===e&&(a=this.rowsStylesScheme),t.length)for(var r=0;r<t.length;r++){var o=t[r],l="";if("td"===e?l=o.dataset.xIndex+"-"+o.dataset.yIndex:"tr"===e&&(l=r),a.hasOwnProperty(l)){var n=a[l];for(var s in n)o.style[s]=n[s]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(l){var n="",s=void 0,i=void 0;this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(s="vertical",i="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(s="horizontal",i="vertical");var t={};l&&l.getDirective(this.table)?t.switch=function(e){var t=l.getDirective(this.table),a="desktop";if(e&&e.detail&&(a=e.detail.sizeRangeId),n=s,"desktop"!==a){if(t.hasOwnProperty("modeOptions")){var r=t.responsiveMode,o=t.modeOptions[r];o.hasOwnProperty("topRowAsHeader")&&o.topRowAsHeader.hasOwnProperty(a)&&o.topRowAsHeader[a]?o.hasOwnProperty("cellStackDirection")&&o.cellStackDirection.hasOwnProperty(a)&&("row"===o.cellStackDirection[a]?(n=i,this.itemsPerHeader=this.tableMaxCols-1):"column"===o.cellStackDirection[a]&&o.hasOwnProperty("cellsPerRow")&&(this.itemsPerHeader=o.cellsPerRow[a])):this.itemsPerHeader=0}}else this.itemsPerHeader=0;this.sortModeSwitcher(n,!0)}:t.switch=function(e){var t=s;if(this.table.classList.contains("wptb-mobile-view-active")){this.table.classList.contains("wptb-table-preview-head")&&"vertical"===(t=i)&&(this.itemsPerHeader=this.tableMaxCols-1);var a=this.table;return this.table=a.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"),this.sortModeSwitcher(t,!0),void(this.table=a)}this.sortModeSwitcher(t,!0)},t.switch.call(a),this.table.addEventListener("table:rebuilt",function(e){t.switch.call(a,e)},!1)},this.sortingCellMouseMoveSwitcher=function(e,t){var a=this;function r(e,t,a){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",p,!1),a&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",p,!1))}function o(e,t,a){a?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var l=this.table.querySelectorAll("td");if(l.length&&(l=[].concat(_toConsumableArray(l))).map(function(e){r(e,c,!1),o(e,"sortedVertical",!1),r(e,u,!1),o(e,"sortedHorizontal",!1)}),t)if("vertical"===e)for(var n=this.table.rows.length,s=0;0<n;){var i=this.table.querySelectorAll('[data-y-index="'+s+'"]');(i=[].concat(_toConsumableArray(i))).map(function(e){r(e,c,t),o(e,"sortedVertical",t)}),this.itemsPerHeader?(n-=this.itemsPerHeader+1,s+=this.itemsPerHeader+1):n=0}else if("horizontal"===e){var d=this.table.querySelectorAll('[data-x-index="0"]');(d=[].concat(_toConsumableArray(d))).map(function(e){2<a.table.querySelectorAll('[data-y-index="'+e.dataset.yIndex+'"]').length&&(r(e,u,t),o(e,"sortedHorizontal",t))})}},this.sortableTableVerticalStart=function(e){r.call(a,e,"vertical")},this.sortableTableHorizontalStart=function(e){r.call(a,e,"horizontal")},this}});var WPTB_RecalculateIndexes=function(e){for(var t=e.getElementsByTagName("tr"),a=void 0,r=0,o=0,l=[],n=0;n<t.length;n++){a=t[n].getElementsByTagName("td"),null==l[n]&&(l[n]=[]);for(var s=0,i=0;i<a.length;i++){if(null!=l[n][i])for(var d=0;d<100;d++){if(null==l[n][s]){l[n][s]=a[i],a[i].dataset.xIndex=s;break}s++}else l[n][i]=a[i],a[i].dataset.xIndex=s;if(a[i].dataset.yIndex=n,1<a[i].colSpan)for(var c=1;c<a[i].colSpan;c++)s++,l[n][s]="tdDummy";if(1<a[i].rowSpan)for(var u=1;u<a[i].rowSpan;u++){null==l[n+u]&&(l[n+u]=[]);for(var p=0;p<a[i].colSpan;p++)l[n+u][s-a[i].colSpan+1+p]="tdDummy"}s++}a.length>r&&(r=a.length),0==n&&(o=s)}e.columns=r,e.maxCols=o};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=a():t[e]=a()}("WPTB_ResponsiveFrontend",self||global,function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"log";if("undefined"!=typeof process&&"development"===process.env.NODE_ENV){if(!console[t])throw new Error("no logging type found with given type value of ["+t+"]");console[t]("[WPTB]: "+e)}}function H(e){var c=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.element=e,this.referenceObject=t,this.mergedRenderStatus=!0,this.mergedCells={row:[],column:[]},this.getMergedRenderStatus=function(){return c.mergedRenderStatus},this.setMergedRenderStatus=function(e){c.mergedRenderStatus=e},this.addToMergedCells=function(e,t){c.mergedCells[e].push(t)},this.isReference=function(){return null!==c.referenceObject},this.isReference()&&(this.element=e.cloneNode(!0)),this.modifications={},this.spans={row:1,col:1},this.remainingSpans={row:0,col:0},this.cacheSpanValues=function(){Object.keys(c.spans).map(function(e){if(Object.prototype.hasOwnProperty.call(c.spans,e)){var t=c.spans[e];c.spans[e]=c.element.getAttribute(e+"Span")||t}})},this.cacheSpanValues(),this.getSpan=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?c.getElement().getAttribute(e+"Span"):c.spans[e];if(t)return t;throw new Error("no span value found with the given type of ["+e+"]")},this.getRemainingSpans=function(e){return c.remainingSpans[e]},this.setRemainingSpans=function(e,t){c.remainingSpans[e]=t},this.getElement=function(){return c.element},this.createCellElement=function(){return document.createElement("td")},e||(this.element=this.createCellElement()),this.setAttribute=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:",",o=c.getElement()[e];"function"!=typeof o&&"object"!==(void 0===o?"undefined":_typeof(o))||(o=c.getElement().getAttribute(e)),c.modifications[e]&&(o=c.modifications[e].default);var l=o;a?l+=""+l+r+t:l=t,c.modifications[e]={value:l,default:o},c.getElement()[e]=l},this.setSpan=function(e,t){if(!c.isReference()){var a=c.getSpan(e)-t<0?c.getSpan(e):t;c.setAttribute(e+"Span",a),c.setRemainingSpans(e,c.getSpan(e)-a);for(var r=0;r<a-1;r+=1)c.mergedCells[e]&&c.mergedCells[e][r]&&c.mergedCells[e][r].setMergedRenderStatus(!1);return!0}if(!c.getMergedRenderStatus())return!1;var o=c.referenceObject.getRemainingSpans(e);if(0===o)return!1;var l=o-t<0?o:t,n=o-l;if(c.referenceObject.setRemainingSpans(e,n),c.setAttribute(e+"Span",l),0!==n)for(var s=c.referenceObject.mergedCells[e].length-o+1,i=s+l-1,d=s;d<i;d+=1)c.mergedCells[e][d].setMergedRenderStatus(!1);return!0},this.resetAttribute=function(e){c.modifications[e]&&(c.getElement()[e]=c.modifications[e].default,c.modifications[e]=void 0)},this.resetAllAttributes=function(){Object.keys(c.modifications).map(function(e){Object.prototype.hasOwnProperty.call(c.modifications,e)&&c.resetAttribute(e)})},{getElement:this.getElement,el:this.element,setAttribute:this.setAttribute,resetAllAttributes:this.resetAllAttributes,getSpan:this.getSpan,setSpan:this.setSpan,getRemainingSpans:this.getRemainingSpans,setRemainingSpans:this.setRemainingSpans,isReference:this.isReference,addToMergedCells:this.addToMergedCells,mergedCells:this.mergedCells,setMergedRenderStatus:this.setMergedRenderStatus,getMergedRenderStatus:this.getMergedRenderStatus}}function t(e){var c=this;return this.tableElement=e,this.parsedTable=[],this.rowCache=[],this.originals={rows:[]},this.rowColors={header:null,even:null,odd:null},this.addToParsed=function(e,t,a){c.parsedTable[e]||(c.parsedTable[e]=[]),c.parsedTable[e][t]=a},this.parseTable=function(){var e=Array.from(c.tableElement.querySelectorAll("tr"));e.map(function(e,d){c.originals.rows.push(e),Array.from(e.querySelectorAll("td")).map(function(e,t){var a=new H(e);c.addToParsed(d,t,a);var r=a.getSpan(H.spanTypes.row),o=a.getSpan(H.spanTypes.column);if(1<r)for(var l=1;l<r;l+=1){var n=new H(e,a);a.addToMergedCells("row",n),c.addToParsed(d+l,t,n)}if(1<o)for(var s=1;s<o;s+=1){var i=new H(e,a);a.addToMergedCells("column",i),c.addToParsed(d,t+s,i)}})}),c.parseRowColors(e)},this.parseRowColors=function(e){(!e||e.length<=0)&&i("no rows are found to parse their colors","error");var t=c.tableElement.dataset.wptbHeaderBackgroundColor,a=c.tableElement.dataset.wptbEvenRowBackgroundColor,r=c.tableElement.dataset.wptbOddRowBackgroundColor;c.rowColors.header=void 0!==t?t:""===e[0].style.backgroundColor?null:e[0].style.backgroundColor;for(var o=1<=e.length/3?0:1===e.length?2:(e.length-1)%2,l=0;l<o;l+=1){var n=document.createElement("tr");c.tableElement.querySelector("tbody").appendChild(n),e.push(n)}c.rowColors.even=a||getComputedStyle(e[1]).backgroundColor,c.rowColors.odd=a?r:getComputedStyle(e[2]).backgroundColor;for(var s=0;s<o;s+=1)e[e.length-(s+1)].remove()},this.addRow=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;Array.isArray(e)||(e=[e]);var r=c.tableElement.querySelector("tbody"),o=void 0;if(t)o=c.originals.rows[a];else{var l=document.createRange();l.setStart(r,0),o=l.createContextualFragment('<tr class="'+e.join(" ")+'"></tr>').childNodes[0]}return r.appendChild(o),c.rowCache.push(o),{el:o,id:c.rowCache.length-1}},this.clearTable=function(){c.rowCache=[],c.tableElement.querySelector("tbody").innerHTML=""},this.getRow=function(e){return c.rowCache[e]?c.rowCache[e]:(i("no row with id ["+e+"] found in the cache.","warn"),null)},this.maxRows=function(){return c.parsedTable.length},this.maxColumns=function(){return c.parsedTable.reduce(function(e,t){return t.length>e&&(e=t.length),e},0)},this.getCell=function(t,a){var e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{if(c.parsedTable[t][a])return e?c.parsedTable[t][a]:c.parsedTable[t][a].el}catch(e){return i("no cell found at the given address of ["+t+"-"+a+"]","warn"),null}return i("no cell found at the given address of ["+t+"-"+a+"]","warn"),null},this.getCellsAtRow=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=[],r=0;r<c.maxColumns();r+=1){var o=c.getCell(e,r,t);o&&a.push(o)}return a},this.appendToRow=function(e,t,a){var r=c.getRow(a),o=c.getCell(e,t,!0);return o&&r&&r.appendChild(o.getElement()),o},this.appendElementToRow=function(e,t){var a=c.getRow(t);e&&a&&a.appendChild(e)},this.appendObjectToRow=function(e,t){var a=c.getRow(t);e&&a&&a.appendChild(e.getElement())},this.parseTable(),{maxRows:this.maxRows,maxColumns:this.maxColumns,addRow:this.addRow,clearTable:this.clearTable,getCell:this.getCell,appendToRow:this.appendToRow,appendElementToRow:this.appendElementToRow,appendObjectToRow:this.appendObjectToRow,getCellsAtRow:this.getCellsAtRow,el:this.tableElement,rowColors:this.rowColors}}var a={query:".wptb-preview-table",defaultClasses:["wptb-plugin-responsive-base"],bindToResize:!(H.spanTypes={row:"row",column:"col"})};return function(){var g=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},a,e),this.elements=Array.from(document.querySelectorAll(this.options.query)),this.elementObjects=this.elements.map(function(e){return{el:e,tableObject:new t(e)}}),this.bindRebuildToResize=function(){window.addEventListener("resize",function(){g.rebuildTables()})},this.getDirective=function(e){var t=e.dataset.wptbResponsiveDirectives;return t?JSON.parse(atob(t)):null},this.addDefaultClasses=function(e){e.classList.add(g.options.defaultClasses)},this.removeDefaultClasses=function(e){e.classList.remove(g.options.defaultClasses)},this.autoBuild=function(e,t,a,r){var o=a.cellStackDirection[t],l=a.topRowAsHeader[t],n=a.cellsPerRow[t],s=!!a.staticTopRow&&a.staticTopRow[t];r.clearTable(),"desktop"===t?(g.buildDefault(r),g.removeDefaultClasses(e)):(g.autoDirectionBuild(r,o,l,s,n),g.addDefaultClasses(e))},this.autoDirectionBuild=function(d,e){var t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],c=3<arguments.length&&void 0!==arguments[3]&&arguments[3],u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,p=d.maxRows(),a=d.maxColumns(),r="row"===e;if(t)g.headerBuild(d,e,u);else if(r)!function(){var t=[],a=0;c&&d.getCellsAtRow(0,!0).filter(function(e){return!e.isReference()}).map(function(e){a+=1;var t=d.addRow("wptb-row");t.el.style.backgroundColor=d.rowColors.header,d.appendObjectToRow(e,t.id),e.setAttribute("colSpan",u)});for(var e=a;e<p;e+=1)d.getCellsAtRow(e,!0).forEach(function(e){e.isReference()||t.push(e)});for(var r=t.length,o=0,l=0;o<r;o+=u,l+=1){var n=d.addRow("wptb-row");n.el.style.backgroundColor=d.rowColors[l%2==0?"odd":"even"];for(var s=0;s<u;s+=1){var i=t[o+s];i&&(d.appendElementToRow(i.getElement(),n.id),i.resetAllAttributes(),i.setAttribute("style","width: 100% !important",!0,";"),i.setAttribute("colSpan",1),i.setAttribute("rowSpan",1))}}}();else{var o=[],l=0;c&&d.getCellsAtRow(0,!0).filter(function(e){return!e.isReference()}).map(function(e){l+=1;var t=d.addRow("wptb-row");t.el.style.backgroundColor=d.rowColors.header,d.appendObjectToRow(e,t.id),e.setAttribute("colSpan",u)});for(var n=0;n<a;n+=1)for(var s=l;s<p;s+=1){var i=d.getCell(s,n,!0);i&&!i.isReference()&&o.push(i)}for(var b=o.length,h=0,v=0;h<b;h+=u,v+=1){var f=d.addRow("wptb-row");f.el.style.backgroundColor=d.rowColors[v%2==0?"odd":"even"];for(var m=0;m<u;m+=1){var w=o[h+m];w&&(d.appendElementToRow(w.getElement(),f.id),w.resetAllAttributes(),w.setAttribute("style","width: 100% !important",!0,";"),w.setAttribute("colSpan",1),w.setAttribute("rowSpan",1))}}}},this.headerBuild=function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=a.getCellsAtRow(0,!0).map(function(e){return e.setAttribute("style","background-color: "+a.rowColors.header,!0,";"),e}),o="column"===e,l=a.maxRows(),n=a.maxColumns(),s="3px solid gray";if(o)for(var i=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=a.addRow("wptb-row");e&&(t.el.style.borderTop=s),r.map(function(e){a.appendElementToRow(e.el.cloneNode(!0),t.id)})},d=Math.ceil((l-1)/t),c=1,u=0;u<d;u+=1){i(0<u);for(var p=0;p<t&&!(l<=c);p+=1){var b=a.addRow("wptb-row");b.el.style.backgroundColor=a.rowColors[p%2==0?"even":"odd"];for(var h=0;h<n;h+=1){var v=a.getCell(c,h,!0);if(v){v.resetAllAttributes();var f=!0,m=v.getSpan(H.spanTypes.row);if(v.getSpan(H.spanTypes.column),1<m){var w=t-p,g=Math.min(m,w);f=v.setSpan(H.spanTypes.row,g),v.setMergedRenderStatus(!0)}f&&a.appendObjectToRow(v,b.id)}}c+=1}}else for(var y=Math.ceil((l-1)/t),S=1,C=0;C<y;C+=1){for(var T=0;T<n;T+=1){var x=a.addRow("wptb-row");x.el.style.backgroundColor="none",0<C&&0===T&&(x.el.style.borderTop=s);var A=r[T].el.cloneNode(!0);A.style.backgroundColor=a.rowColors.header+" !important",a.appendElementToRow(A,x.id);for(var R=0;R<t&&!(l<=S+R);R+=1){var E=a.getCell(S+R,T,!0);if(E){E.resetAllAttributes();var I=!0,k=E.getSpan(H.spanTypes.row);if(E.getSpan(H.spanTypes.column),1<k){var B=t-R,P=Math.min(k,B);I=E.setSpan(H.spanTypes.row,P);var M=E.el.getAttribute("rowSpan"),L=E.el.getAttribute("colSpan");E.setAttribute("rowSpan",L),E.setAttribute("colSpan",M),E.setMergedRenderStatus(!0)}if(I){var W=(S+R+C)%2==0?"even":"odd";1===t&&(W=S%2==0?"even":"odd"),E.setAttribute("style","background-color: "+a.rowColors[W],!0,";"),a.appendObjectToRow(E,x.id)}}}}S+=t}},this.buildDefault=function(e){for(var t=e.maxRows(),a=e.maxColumns(),r=0;r<t;r+=1)for(var o=e.addRow("",!0,r).id,l=0;l<a;l+=1){var n=e.getCell(r,l,!0);n&&!n.isReference()&&(n.resetAllAttributes(),e.appendElementToRow(n.getElement(),o))}},this.calculateRangeId=function(t,a){var e=Object.keys(a).sort(function(e,t){return a[e].width-a[t].width}),r=e[0];return e.map(function(e){t>=a[e].width&&(r=e)}),r},this.rebuildTable=function(e,t,a){var r=g.getDirective(e);if(r){if(!r.responsiveEnabled)return;var o=r.responsiveMode,l=g[o+"Build"];t||(t=e.getBoundingClientRect().width);var n=g.calculateRangeId(t,r.breakpoints);if(!l)throw new Error("No build mode named as ["+o+"] found.");var s=r.modeOptions[o];l.call(g,e,n,s,a),WPTB_RecalculateIndexes(e);var i=new CustomEvent("table:rebuilt",{detail:{sizeRangeId:n,topRowAsHeader:r.modeOptions[o].topRowAsHeader}});e.dispatchEvent(i)}},this.rebuildTables=function(r){g.elementObjects.map(function(e){var t=r;if(!r){t=window.innerWidth;var a=g.getDirective(e.el);if(a&&a.relativeWidth)switch(a.relativeWidth){case"window":t=window.innerWidth;break;case"container":t=e.el.parentNode.parentNode.parentNode.clientWidth;break;default:t=window.innerWidth}}g.rebuildTable(e.el,t,e.tableObject)})},this.options.bindToResize&&this.bindRebuildToResize(),{rebuildTables:this.rebuildTables,getDirective:this.getDirective,calculateRangeId:this.calculateRangeId}}}),jQuery,jQuery(document).ready(function(e){var t,Z=document.getElementsByClassName("wptb-table-container");function a(){for(var e=0;e<Z.length;e++){var t=Z[e],a=!0,r=t.getElementsByClassName("wptb-preview-table"),o=t.getElementsByClassName("wptb-table-container-matrix");if(0<r.length&&0<o.length){if(r=r[0],o=o[0],r.style.display="table",r.dataset.wptbTableAlignment){var l=r.dataset.wptbTableAlignment;t.offsetWidth<r.offsetWidth?r.style.float=null:r.style.float="center"==l?null:l,t.style.float="center"==l?null:l}if(1==r.dataset.reconstraction&&1==r.dataset.wptbAdaptiveTable){var n=t.offsetWidth,s=r.offsetWidth,i=void 0,d=r.rows;0<d.length&&(i=d[0].querySelectorAll("td").length);var c=!1,u=void 0;if((!r.classList.contains("wptb-table-preview-head")||2<i)&&1<i)if(n<s){if(t.style.overflow="unset",o&&!o.classList.contains("wptb-matrix-hide")&&(o.classList.add("wptb-matrix-hide"),c=!0),r.classList.add("wptb-mobile-view-active"),r.rows&&i){var p=s/i,b=Math.floor(n/p);if(b<1&&(b=1),0<t.getElementsByClassName("wptb-preview-table-mobile").length){(u=t.getElementsByClassName("wptb-preview-table-mobile")[0]).classList.remove("wptb-mobile-hide");var h=u.dataset.wholeColumnsInContainer;h==b&&r.classList.contains("wptb-table-preview-head")?a=!1:h==b&&!r.classList.contains("wptb-table-preview-head")&&(480<n||1==u.column)?a=!1:u.parentNode.removeChild(u)}if(a){var v=document.createElement("table"),f=document.createElement("tbody");v.appendChild(f),v.classList.add("wptb-preview-table-mobile");var m=r.className.match(/wptb-element-main(.+)-(\d+)/i);m&&Array.isArray(m)&&v.classList.add(m[0]);var w=r.rows.length,g=void 0,y=!1;if(r.classList.contains("wptb-table-preview-head")){var S=w-1,C=void 0;if(b<w)for(var T=0;T<S;T++){if((C=b-1-T)<=0&&(C=1),0==(g=S%C)){y=!0;break}if(0<C&&C<=6&&C-2*g<0&&g<C){y=!0;break}if(6<C&&C<=12&&C-1.8*g<0&&g<C){y=!0;break}if(12<C&&C<=18&&C-1.6*g<0&&g<C){y=!0;break}}else C=S,y=!(g=0);if(y){var x=void 0;x=0<C?i*Math.ceil(S/C):i,Math.floor((x-1)/i);for(var A=void 0,R=0;R<x;R++){var E=Math.floor(R/i),I=document.createElement("tr"),k=r.rows[0].children[R-E*i].cloneNode(!0),B=void 0,P=window.getComputedStyle(r.rows[0]);k.style.backgroundColor||(k.style.backgroundColor=P.backgroundColor),k.style.width=null,k.style.height=null,k.removeAttribute("data-wptb-css-td-auto-width"),(A=window.getComputedStyle(r.querySelector("td"))).borderTopColor?k.style.borderColor=A.borderTopColor:k.style.borderColor=A.borderBottomColor,0<E&&R%i==0&&(k.style.borderTopWidth="5px"),I.appendChild(k);for(var M=C*E+1;M<C*(E+1)+1;M++){if(M<r.rows.length){B=r.rows[M].children[R-E*i].cloneNode(!0);var L=window.getComputedStyle(r.rows[M]);B.style.backgroundColor||(B.style.backgroundColor=L.backgroundColor),B.style.width=null,B.style.height=null,B.removeAttribute("data-wptb-css-td-auto-width")}else(B=document.createElement("td")).style.borderWidth="0px",B.style.background="#fff";(A=window.getComputedStyle(r.querySelector("td"))).borderTopColor?B.style.borderColor=A.borderTopColor:B.style.borderColor=A.borderBottomColor,0<E&&R%i==0&&(B.style.borderTopWidth="5px"),I.appendChild(B)}f.appendChild(I)}}}else{var W=void 0;if(480<n)for(var H=0;H<i;H++){if(0==(W=b-H)&&(W=1),0==(g=i%W)){y=!0;break}if(0<W&&W<=6&&W-2*g<=0&&g<W){y=!0;break}if(6<W&&W<=12&&W-1.8*g<=0&&g<W){y=!0;break}if(12<W&&W<=18&&W-1.6*g<=0&&g<W){y=!0;break}}else W=1,y=!(g=0),v.column=1;var O=Math.ceil(i/W),q=O*w;if(y)for(var _=0;_<q;_++){var N=Math.floor(_/w),z=document.createElement("tr"),D=void 0,j=void 0;D=N!=O-1||0==g?(j=N*W,W*(1+N)):(j=i-g,i);var V=r.rows[_-N*w];z.classList=V.classList,z.style.backgroundColor=V.style.backgroundColor;for(var F=j;F<D;F++){var G=V.children[F].cloneNode(!0);if(!G.style.backgroundColor){var X=window.getComputedStyle(V);G.style.backgroundColor=X.backgroundColor}G.style.width=null,G.style.height=null,G.removeAttribute("data-wptb-css-td-auto-width"),z.appendChild(G)}f.appendChild(z)}}v.dataset.wholeColumnsInContainer=b;var Y=v.querySelectorAll("[srcset]");if(0<Y.length)for(var Q=0;Q<Y.length;Q++)Y[Q].removeAttribute("srcset");u=v,t.appendChild(v),c=!0}}}else o&&o.classList.contains("wptb-matrix-hide")&&(o.classList.remove("wptb-matrix-hide"),c=!0,r.classList.remove("wptb-mobile-view-active"),(u=t.querySelector(".wptb-preview-table-mobile"))&&t.getElementsByClassName("wptb-preview-table-mobile")[0].classList.add("wptb-mobile-hide"),t.style.overflow="auto");else r.style.minWidth="auto";if(WPTB_RecalculateIndexes(r),c){WPTB_RecalculateIndexes(u);var J=new CustomEvent("table:rebuilt",{detail:!0,bubbles:!0});r.dispatchEvent(J)}}}}}function r(){for(var e=document.getElementsByClassName("wptb-table-container"),t=0;t<e.length;t++){var a=e[t];a.classList.add("wptb-table-container-"+t);var r=a.getElementsByClassName("wptb-preview-table");if(0<r.length){(r=r[0]).dataset.wptbTableContainerMaxWidth&&(a.style.maxWidth=r.dataset.wptbTableContainerMaxWidth+"px"),r.classList.remove("wptb-table-preview-static-indic"),r.mergingСellsHorizontally=!1;for(var o=r.querySelectorAll("td"),l=0;l<o.length;l++)1<o[l].colSpan&&(r.mergingСellsHorizontally=!0);var n=a.offsetWidth,s=r.querySelector("td"),i=window.getComputedStyle(s,null),d=i.getPropertyValue("border-left-width"),c=i.getPropertyValue("border-right-width"),u=i.getPropertyValue("padding-left"),p=i.getPropertyValue("padding-left"),b=parseFloat(u,10)+parseFloat(p,10),h=parseFloat(d,10)+parseFloat(c,10),v=r.dataset.wptbTableTdsSumMaxWidth,f=r.dataset.wptbFixedWidthSize,m=r.dataset.wptbCellsWidthAutoCount,w=!1,g=void 0;v<n?m?(r.style.minWidth="100%",r.mergingСellsHorizontally?(r.style.width="auto",g=(g=(n-f)/m)-b-h,w=!0):r.style.width="100%"):(r.style.width="auto",r.style.minWidth=null,r.style.maxWidth=v+"px"):(r.style.maxWidth=null,r.style.minWidth=r.dataset.wptbTableTdsSumMaxWidth+"px",r.style.width="auto",g=r.dataset.wptbTdWidthAuto?r.dataset.wptbTdWidthAuto:"100",w=!0);var y=document.head;if(y){var S=y.querySelector("style[data-wptb-td-auto-width-"+t+'="true"]');S&&y.removeChild(S)}if(w){var C=document.createElement("style");C.setAttribute("data-wptb-td-auto-width-"+t,!0),C.innerHTML=".wptb-table-container-"+t+" table td[data-wptb-css-td-auto-width=true]{width:"+g+"px}",y&&y.appendChild(C)}}}}t=".wptb-preview-table .wptb-button",Array.from(document.querySelectorAll(t)).map(function(a){a.addEventListener("mouseenter",function(e){var t=e.target;t.dataset.wptbElementHoverBgColor&&(t.style.backgroundColor=t.dataset.wptbElementHoverBgColor),t.dataset.wptbElementHoverTextColor&&(t.style.color=t.dataset.wptbElementHoverTextColor),t.dataset.wptbElementHoverScale&&(t.style.transform="scale("+a.dataset.wptbElementHoverScale+")")}),a.addEventListener("mouseleave",function(e){var t=e.target;t.dataset.wptbElementHoverBgColor&&(t.style.backgroundColor=t.dataset.wptbElementBgColor),t.dataset.wptbElementHoverTextColor&&(t.style.color=t.dataset.wptbElementColor),t.dataset.wptbElementHoverScale&&(t.style.transform="scale(1)")})}),r(),a(),e(window).resize(function(){r(),a()});for(var o=document.getElementsByClassName("wptb-ph-element"),l=0;l<o.length;l++){var n=o[l];if(n.classList.contains("wptb-list-item-container")&&(n.classList.remove("wptb-list-item-container"),n.classList.add("wptb-list-container")),n.classList.contains("wptb-button-container")){var s=n.className.match(/wptb-size-([A-Z]+)/i);if(s&&Array.isArray(s)){var i=s[0],d=i.toLowerCase();n.classList.remove(i);var c=n.querySelector(".wptb-button-wrapper");c&&c.classList.add(d)}}}var u=new WPTB_ResponsiveFrontend({query:".wptb-preview-table",bindToResize:!0});!function(){for(var e=document.querySelectorAll(".wptb-preview-table"),t=0;t<e.length;t++)new WPTB_SortableTable({table:e[t]}).sortableTableInitialization(u)}(),u.rebuildTables()});
//# sourceMappingURL=wp-table-builder-frontend.js.map
