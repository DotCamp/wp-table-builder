function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var r=0;r<e;r++)for(var a=t.rows[r].children,n=0;n<a.length;n++)if(a[n].rowSpan>1&&a[n].rowSpan>e-r){var o=a[n].rowSpan-e+r;a[n].rowSpan=e-r,a[n].dataset.sameCellBeforeDivision||(a[n].dataset.sameCellBeforeDivision="r"+r+"c"+n);var l=void 0;l=t.hasOwnProperty("wptbCell")?(l=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td");var i=a[n].getAttribute("style");l.setAttribute("style",i),l.colSpan=a[n].colSpan,l.rowSpan=o,l.dataset.sameCellBeforeDivision=a[n].dataset.sameCellBeforeDivision;for(var s=a[n].dataset.xIndex,c=parseInt(s)+parseInt(a[n].colSpan),d=void 0;!d&&c<t.maxCols;)d=t.rows[e].querySelector('[data-x-index="'+c+'"]'),c++;t.rows[e].insertBefore(l,d),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),r=0;r<t.length;r++)if(t[r].hasAttribute("data-same-cell-before-division"))for(var a=t[r].dataset.sameCellBeforeDivision,n=e.querySelectorAll('[data-same-cell-before-division="'+a+'"]'),o=0;o<n.length;o++)if(n[o]&&n[o+1]&&n[o].parentNode&&n[o+1].parentNode&&!n[o].parentNode.classList.contains("wptb-row-moving")&&!n[o+1].parentNode.classList.contains("wptb-row-moving")&&n[o+1].dataset.yIndex==parseInt(n[o].dataset.yIndex)+parseInt(n[o].rowSpan)){n[o].rowSpan+=n[o+1].rowSpan;for(var l=_toConsumableArray(n[o+1].children),i=0;i<l.length;i++)n[o].appendChild(l[i]);n[o+1].parentNode.removeChild(n[o+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var r=0;r<t.rows.length;r++){if(e<t.maxCols&&0!=e&&!t.rows[r].querySelector('[data-x-index="'+e+'"]'))for(var a=t.rows[r].children,n=void 0,o=a.length,l=void 0,i=void 0,s=void 0,c=void 0,d=0;d<o;d++)if(a[d].colSpan>1&&parseInt(a[d].dataset.xIndex)<e&&parseInt(a[d].dataset.xIndex)+parseInt(a[d].colSpan)>e){n=t.hasOwnProperty("wptbCell")?(n=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),i=a[d].rowSpan,s=a[d].colSpan,a[d].colSpan=e-a[d].dataset.xIndex,c=s-a[d].colSpan,a[d].dataset.sameCellBeforeDivision||(a[d].dataset.sameCellBeforeDivision="r"+r+"c"+d);var u=a[d].getAttribute("style");n.setAttribute("style",u);var p=t.querySelector('[data-x-index="'+e+'"]');p&&(n.style.width=p.style.width);var b=t.querySelector('[data-y-index="'+r+'"]');b&&(n.style.height=b.style.height),l=a[d+1]?a[d+1]:null,t.rows[r].insertBefore(n,l),n.colSpan=c,n.rowSpan=i,n.dataset.sameCellBeforeDivision=a[d].dataset.sameCellBeforeDivision,r+=i-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),r=0;r<t.length;r++)if(t[r].hasAttribute("data-same-cell-before-division"))for(var a=t[r].dataset.sameCellBeforeDivision,n=_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+a+'"]')),o=null,l=0;l<n.length;l++)if(n[l]&&n[l+1]&&!n[l].classList.contains("wptb-column-moving")&&!n[l+1].classList.contains("wptb-column-moving")&&n[l+1].dataset.xIndex==parseInt(n[l].dataset.xIndex)+parseInt(n[l].colSpan)){null==o&&(o=l),n[o].colSpan+=n[l+1].colSpan;for(var i=_toConsumableArray(n[l+1].children),s=0;s<i.length;s++)n[o].appendChild(i[s]);n[l+1].parentNode.removeChild(n[l+1])}WPTB_RecalculateIndexes(e)}}};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,r){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=r():t[e]=r()}("WPTB_SortableTable",self||global,(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.table=e.table;WPTB_RecalculateIndexes(t);var r=this;function a(e,t,r){if("TD"===e.target.tagName){var a=null==e.offsetX?e.layerX:e.offsetX,n=null==e.offsetY?e.layerY:e.offsetY,o=!1;("vertical"===t&&e.target.clientWidth-a<=35||"horizontal"===t&&a<=35)&&(o=!0),o&&(e.target.clientHeight-35)/2<n&&(e.target.clientHeight+35)/2>n?r.classList.add("sortable-hover"):r.classList.remove("sortable-hover")}else r.classList.remove("sortable-hover")}function n(e){a(e,"vertical",this)}function o(e){a(e,"horizontal",this)}function l(){this.classList.remove("sortable-hover")}function i(e,r){if(e.target&&"TD"===e.target.tagName&&!t.parentNode.classList.contains("wptb-preview-table-manage-cells")){var a=e.currentTarget,n=!1;if("vertical"===r&&e.target.dataset.hasOwnProperty("sortedVertical")){var o=[],l=[];if(this.itemsPerHeader&&this.itemsPerHeader<a.rows.length){WPTB_RecalculateIndexes(a);for(var i=_toConsumableArray(a.rows),b=a.querySelector("tbody")?a.querySelector("tbody"):a,f=0;f<i.length;f++)f<e.target.dataset.yIndex?(o.push(i[f]),b.removeChild(i[f])):f>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(l.push(i[f]),b.removeChild(i[f]));WPTB_RecalculateIndexes(a)}var h,m,y=a.querySelectorAll('[data-x-index="'.concat(e.target.dataset.xIndex,'"]'));(y=_toConsumableArray(y)).map((function(e){(h=parseInt(e.rowSpan,10))||(h=1),m=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(m,a),m+=h,WPTB_CutGlueTable.cutTableHorizontally(m,a)}));for(var v,g=[],w=0,S=[],C=0;C<y.length;C++){var T=u(e,a,y,C,w,"vertical");if(T&&T.hasOwnProperty("i"))y=T.tds,C=T.i;else{T&&(y=T.tds);var A=y[C],x=parseInt(A.rowSpan,10);x||(x=1),w=parseInt(A.dataset.yIndex,10)+x;for(var O=d(A),R=[],I=0;I<x;I++)R.push(a.rows[parseInt(A.dataset.yIndex,10)+I]),S.push(parseInt(A.dataset.yIndex,10)+I);A.dataset.yIndex>0?g.push({rowsTd:R,value:O}):v=R}}var _=s(e,"sortedVertical");if(!_)return;if(g.length&&g.sort((function(e,t){return c(_,e,t)})),g.unshift({rowsTd:v}),g.length<a.rows.length)for(var E=0;E<a.rows.length;E++)if(!(S.indexOf(E)>-1)){var P=[];P.push(a.rows[E]),g.push({rowsTd:P})}var j=a.querySelector("tbody");if(j.innerHTML="",g.map((function(e){e.rowsTd.map((function(e){j.appendChild(e)}))})),o.length){var k=a.querySelector("tbody")?a.querySelector("tbody"):a;if(k){var M=k.querySelector("tr");o.map((function(e){k.insertBefore(e,M)}))}}if(l.length){var B=a.querySelector("tbody")?a.querySelector("tbody"):a;j&&l.map((function(e){B.appendChild(e)}))}WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableHorizontally(a),n=!0}else if("horizontal"===r&&"0"===e.target.dataset.xIndex){var q,L,W=a.querySelectorAll('[data-y-index="'.concat(e.target.dataset.yIndex,'"]'));(W=_toConsumableArray(W)).map((function(e){(q=parseInt(e.colSpan,10))||(q=1),L=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(L,a),L+=q,WPTB_CutGlueTable.cutTableVertically(L,a)}));for(var D,H=[],N=0,V=0;V<W.length;V++){var z=u(e,a,W,V,N,"horizontal");if(z&&z.hasOwnProperty("i"))W=z.tds,V=z.i;else{z&&(W=z.tds);var F=W[V],G=parseInt(F.colSpan,10);G||(G=1),N=parseInt(F.dataset.xIndex,10)+G;for(var K=d(F),$=[],U=0;U<G;U++){var X=_toConsumableArray(a.querySelectorAll('[data-x-index="'.concat(parseInt(F.dataset.xIndex,10)+U,'"]')));$.push(X)}F.dataset.xIndex>0?H.push({columnsTd:$,value:K}):D=$}}var Y=s(e,"sortedHorizontal");if(!Y)return;if(H.length&&H.sort((function(e,t){return c(Y,e,t)})),H.unshift({columnsTd:D}),H.length<a.maxCols)for(var J=a.maxCols-H.length,Q=0;Q<J;Q++){var Z=_toConsumableArray(a.querySelectorAll('[data-x-index="'.concat(parseInt(a.maxCols,10)-parseInt(J,10)+Q,'"]')));H.push({columnsTd:[Z]})}for(var ee=0;ee<a.rows.length;ee++)a.rows[ee].innerHTML="";H.map((function(e){e.columnsTd.map((function(e){e.map((function(e){a.rows[e.dataset.yIndex].appendChild(e)}))}))})),WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableVertically(a),n=!0}if(n){if(p(a),a.hasOwnProperty("tableSM"))(new(a.tableSM())).tableStateSet();this.reassignElementsStyles("td"),this.reassignElementsStyles("tr")}}}function s(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ask",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=t.value,n=r.value;return parseInt(a)&&parseInt(n)&&(a=parseInt(a),n=parseInt(n)),"ask"===e?a<n?-1:a===n?0:1:a<n?1:a===n?0:-1}function d(e){var t=e.querySelectorAll(".wptb-text-container");t=_toConsumableArray(t);for(var r="",a=0;a<t.length;a++){r+=t[a].querySelector("p").innerText,a!==t.length-1&&(r+=" ")}return r}function u(e,t,r,a,n,o){var l,i,s,c,d,u,p,b,f=r[a],h=!1;if("vertical"===o?(s="colSpan",c="data-y-index",d="yIndex",u="xIndex",p="rowSpan",b=t.rows.length):"horizontal"===o&&(s="rowSpan",c="data-x-index",d="xIndex",u="yIndex",p="colSpan",b=t.maxCols),f.dataset[d]-n>0){l=t.querySelectorAll("[".concat(c,'="').concat(n,'"]'));for(var m=0;m<l.length;m++)if((i=l[m][s])||(i=1),l[m].dataset[u]<e.target.dataset[u]&&parseInt(l[m].dataset[u],10)+parseInt(i,10)>e.target.dataset[u]){r.splice(a,0,l[m]),h=!0,a--;break}}if(h)return{tds:r,i:a};var y=parseInt(f[p],10);if(y||(y=1),a==r.length-1&&parseInt(f.dataset[d],10)+y<b){l=t.querySelectorAll("[".concat(c,'="').concat(parseInt(f.dataset[d],10)+y,'"]'));for(var v=0;v<l.length;v++)if((i=l[v][s])||(i=1),l[v].dataset[u]<e.target.dataset[u]&&parseInt(l[v].dataset[u],10)+parseInt(i,10)>e.target.dataset[u]){r.push(l[v]),h=!0;break}}return!!h&&{tds:r}}function p(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),r=0;r<t.length;r++)t[r].hasAttribute("data-same-cell-before-division")&&t[r].removeAttribute("data-same-cell-before-division")}return this.itemsPerHeader=0,this.tableMaxCols=t.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=t.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=t.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var r=0;r<t.length;r++){var a=t[r],n=window.getComputedStyle(a,null).getPropertyValue("background-color"),o="";"td"===e?(o=a.dataset.xIndex+"-"+a.dataset.yIndex,this.cellsStylesScheme[o]={backgroundColor:n}):"tr"===e&&(o=String(r),this.rowsStylesScheme[o]={backgroundColor:n})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t,r=this.table.querySelectorAll(e);if("td"===e?t=this.cellsStylesScheme:"tr"===e&&(t=this.rowsStylesScheme),r.length)for(var a=0;a<r.length;a++){var n=r[a],o="";if("td"===e?o=n.dataset.xIndex+"-"+n.dataset.yIndex:"tr"===e&&(o=a),t.hasOwnProperty(o)){var l=t[o];for(var i in l)n.style[i]=l[i]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(e){var t,a,n="";this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(t="vertical",a="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(t="horizontal",a="vertical");var o={};e&&e.getDirective(this.table)?o.switch=function(r){var o=e.getDirective(this.table),l="desktop";if(r&&r.detail&&(l=r.detail.sizeRangeId),n=t,"desktop"!==l){if(o.hasOwnProperty("modeOptions")){var i=o.responsiveMode,s=o.modeOptions[i];s.hasOwnProperty("topRowAsHeader")&&s.topRowAsHeader.hasOwnProperty(l)&&s.topRowAsHeader[l]?s.hasOwnProperty("cellStackDirection")&&s.cellStackDirection.hasOwnProperty(l)&&("row"===s.cellStackDirection[l]?(n=a,this.itemsPerHeader=this.tableMaxCols-1):"column"===s.cellStackDirection[l]&&s.hasOwnProperty("cellsPerRow")&&(this.itemsPerHeader=s.cellsPerRow[l])):this.itemsPerHeader=0}}else this.itemsPerHeader=0;this.sortModeSwitcher(n,!0)}:o.switch=function(e){var r=t;if(this.table.classList.contains("wptb-mobile-view-active")){this.table.classList.contains("wptb-table-preview-head")&&"vertical"===(r=a)&&(this.itemsPerHeader=this.tableMaxCols-1);var n=this.table;return this.table=n.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"),this.sortModeSwitcher(r,!0),void(this.table=n)}this.sortModeSwitcher(r,!0)},o.switch.call(r),this.table.addEventListener("table:rebuilt",(function(e){o.switch.call(r,e)}),!1)},this.sortingCellMouseMoveSwitcher=function(e,t){var r=this;function a(e,t,r){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",l,!1),r&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",l,!1))}function i(e,t,r){r?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var s=this.table.querySelectorAll("td");if(s.length&&(s=_toConsumableArray(s)).map((function(e){a(e,n,!1),i(e,"sortedVertical",!1),a(e,o,!1),i(e,"sortedHorizontal",!1)})),t)if("vertical"===e)for(var c=this.table.rows.length,d=0;c>0;){var u=this.table.querySelectorAll('[data-y-index="'.concat(d,'"]'));(u=_toConsumableArray(u)).map((function(e){a(e,n,t),i(e,"sortedVertical",t)})),this.itemsPerHeader?(c-=this.itemsPerHeader+1,d+=this.itemsPerHeader+1):c=0}else if("horizontal"===e){var p=this.table.querySelectorAll('[data-x-index="0"]');(p=_toConsumableArray(p)).map((function(e){r.table.querySelectorAll('[data-y-index="'.concat(e.dataset.yIndex,'"]')).length>2&&(a(e,o,t),i(e,"sortedHorizontal",t))}))}},this.sortableTableVerticalStart=function(e){i.call(r,e,"vertical")},this.sortableTableHorizontalStart=function(e){i.call(r,e,"horizontal")},this}}));var WPTB_RecalculateIndexes=function(e){for(var t,r=e.getElementsByTagName("tr"),a=0,n=0,o=[],l=0;l<r.length;l++){t=r[l].getElementsByTagName("td"),null==o[l]&&(o[l]=[]);for(var i=0,s=0;s<t.length;s++){if(null!=o[l][s])for(var c=0;c<100;c++){if(null==o[l][i]){o[l][i]=t[s],t[s].dataset.xIndex=i;break}i++}else o[l][s]=t[s],t[s].dataset.xIndex=i;if(t[s].dataset.yIndex=l,t[s].colSpan>1)for(var d=1;d<t[s].colSpan;d++)i++,o[l][i]="tdDummy";if(t[s].rowSpan>1)for(var u=1;u<t[s].rowSpan;u++){null==o[l+u]&&(o[l+u]=[]);for(var p=0;p<t[s].colSpan;p++)o[l+u][i-t[s].colSpan+1+p]="tdDummy"}i++}t.length>a&&(a=t.length),0==l&&(n=i)}e.columns=a,e.maxCols=n};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e,t,r){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=r()),t[e]=r()}("WPTB_DataTableGenerator",self||global,(function(){var e={default:["text"],button:["link"],star_rating:["rating"],image:["link"],circle_rating:["percentage"],icon:["icon"]},t=function(e){if(e){var t=e.getAttribute("class").split(" ").filter((function(e){return new RegExp(/^wptb-element-(.+)-(\d+)$/,"g").test(e)}))[0];if(t)return t.replace("wptb-element-","")}return null},r=function(e){if(e){var t=e.getAttribute("class").split(" ").filter((function(e){return new RegExp(/^wptb-element-(.+)-(\d+)$/,"g").test(e)}))[0];if(t)return _slicedToArray(new RegExp(/^wptb-element-(.+)-(\d+)$/,"g").exec(t),2)[1]}return null};function a(e,t,r){var a,n,o=this,l={name:"default",methods:{calculateMaxRows:function(e){return i(this.getOperatorResult(e),e).length},getOperatorResult:function(e){return[]}}};this.options=(a=l,n=e,Object.keys(n).map((function(e){Object.prototype.hasOwnProperty.call(n,e)&&Object.prototype.hasOwnProperty.call(a,e)&&("object"===_typeof(a[e])?a[e]=_objectSpread({},a[e],{},n[e]):a[e]=n[e])})),a),this.dataManager=t,this.factory=r;var i=function(e,t){var r=t.rowAmount,a=t.rowCustomAmount,n="all"===r||a>e.length?e.length:a;return e.slice(0,n)};this.getOperatorResult=function(e){return o.innerOperatorResult(e)},Object.keys(o.options.methods).map((function(e){Object.prototype.hasOwnProperty.call(o.options.methods,e)&&(o["getOperatorResult"===e?"innerOperatorResult":e]=o.options.methods[e].bind(o))}))}var n={methods:{getOperatorResult:function(e){var t=this,r=e.compareColumn,a=e.operatorType,n=this.dataManager.getValues();return n.sort((function(e,n){return(Number.parseFloat(t.dataManager.getColumnValueByIndex(0,r,[e]))-Number.parseFloat(t.dataManager.getColumnValueByIndex(0,r,[n])))*("highest"===a?-1:1)})),[n[0]]}}},o={methods:{getOperatorResult:function(e){var t=this,r=e.compareColumn,a=e.operatorType,n=e.thanAmount;return this.dataManager.getValues().filter((function(e){var o=Number.parseFloat(t.dataManager.getColumnValueByIndex(0,r,[e])),l=Number.parseFloat(n);return"higher"===a?o>l:o<l}))}}},l={highest:n,lowest:n,not:{methods:{notOperation:function(e){var t=e.operatorType2,r=_objectSpread({},e,{operatorType:t}),a=this.factory.getOperator(t).getOperatorResult(r)[0].rowId;return this.dataManager.getValues().filter((function(e){return e.rowId!==a}))},getOperatorResult:function(e){return this.notOperation(e)}}},higher:o,lower:o,equal:{methods:{getOperatorResult:function(e){var t=this,r=e.compareColumn,a=e.equalAmount;return this.dataManager.getValues().filter((function(e){return t.dataManager.getColumnValueByIndex(0,r,[e])===a}))}}}};function i(e,t){var r=this,n={};this.getOperator=function(e){return n[e]};n={},Object.keys(e).map((function(o){Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=new a(_objectSpread({name:o},e[o]),t,r))}))}function s(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t,n=r;this.updateValues=function(e){a=e},this.updateBindings=function(e){n=e},this.getColumnIdFromIndex=function(e){var t;return null===(t=a[0].values[e])||void 0===t?void 0:t.colId},this.getColumnValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t||a;return r.reduce((function(t,r){return r.values.map((function(r){r.colId===e&&t.push(r.value)})),t}),[])},this.getColumnValueByIndex=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.getColumnValues(r,a),o=null;return n&&n[t]&&(o=n[t]),o},this.getRowById=function(e){return a.filter((function(t){return t.rowId===e}))[0]},this.getBinding=function(e,t){return n[t]?n[t][e]:null},this.getValues=function(){return Array.from(a)},this.getRowValuesByIndex=function(e){return Array.from(a)[e]}}return new function(){var a=this;this.dataManager={_dataManager:null,get instance(){return this._dataManager||(this._dataManager=new s),this._dataManager}},this.operatorFactory=new i(l,this.dataManager.instance),this.updateDataManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.dataManager.instance.updateValues(e),a.dataManager.instance.updateBindings(t)},this.currentBindings={},this.currentValues={};var n=function(e,r){var n=t(e),o=null;return n&&(o=a.dataManager.instance.getBinding(n,r)),o},o=function(e){var t=function(e){return e.dataset.dataTableRowId}(e),r=null;return t&&(r=a.dataManager.instance.getBinding(t,"row")),r},c={text:function(e,t){var r=t.text;r&&(e.querySelector("p").childNodes[0].textContent=t.text)},button:function(e,t){var r=t.text,a=t.link;r&&(e.querySelector("p").childNodes[0].textContent=t.text);if(a){var n=e.querySelector("a");n&&(n.href=a)}},star_rating:function(e,t){var r=t.rating;if(r){var a=Number.parseInt(e.dataset.starCount,10),n=Number.parseFloat(r),o=Math.min(a,n),l=Math.floor(o),i=Array.from(e.querySelectorAll("li.wptb-rating-star")),s=Array.from(e.querySelectorAll("li.wptb-rating-star")).filter((function(e,t){return e.classList.remove("wptb-rating-star-selected-full"),e.classList.remove("wptb-rating-star-selected-half"),t<l}));s.map((function(e){e.classList.add("wptb-rating-star-selected-full")})),l!==o&&i[s.length].classList.add("wptb-rating-star-selected-half")}},image:function(e,t){var r=t.link;if(r){var a=e.querySelector("img");if(!a){a=document.createElement("img");var n=e.querySelector("a");n.innerHTML="",n.appendChild(a),a.width=200,a.height=200}a.src=r}},circle_rating:function(e,t){var r=t.percentage;if(r){e.dataset.percentageCount=r,e.querySelector(".wptb-rating-circle-wrapper span").textContent="".concat(r,"%");var a=e.querySelector(".wptb-rating-circle-slice");a.style.clip=r<=50?"rect(0em, 1em, 1em, 0.5em)":"rect(auto, auto, auto, auto)",a.querySelector(".wptb-rating-circle-bar").style.transform="rotate(".concat(r>50?180:0,"deg)");var n=Math.max(100,r)==r?100:r;a.querySelector(".wptb-rating-circle-fill").style.transform="rotate(".concat(3.6*n,"deg)")}},text_icon_element:function(e,t){var r=t.text;if(r){var a=e.querySelector("#wptbTextIconMainText");a&&(a.textContent=r)}},icon:function(e,t){t.valueColumn}},d=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=r(e),o=t;if(a){var l,i,s=null!==(l=null!==(i=a[n])&&void 0!==i?i:a.default)&&void 0!==l?l:["text"];o={},s.map((function(e){o[e]=t}))}c[n]&&c[n](e,o)},u=function(e,t){var r=t,a=e.operator,n=a.rowAmount,o=a.rowCustomAmount;if("operator"===e.mode&&"custom"===n){var l=o>t.length?t.length:o;r=r.slice(0,l)}return r},p=function(e,t){var r=Array.from(t);if(e){var n=e.sortType,o=e.sortDirection,l=e.sortTarget;n&&o&&n&&"none"!==l&&r.sort((function(e,t){var r=a.dataManager.instance.getColumnValueByIndex(0,l,[e]),i=a.dataManager.instance.getColumnValueByIndex(0,l,[t]),s="asc"===o?1:-1;return"123"===n?((r=Number.parseFloat(r))-(i=Number.parseFloat(i)))*s:r>i?s:i<r?-1*s:0}))}return r},b=function(e,r,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=u(o,p(null==o?void 0:o.sort,l||a.dataManager.instance.getValues()));e.map((function(e){var o=(null==i?void 0:i.column[t(e)])||n(e,"column");if(o){var l={};Object.keys(o).map((function(e){Object.prototype.hasOwnProperty.call(o,e)&&(l[e]=a.dataManager.instance.getColumnValueByIndex(r,o[e],s))})),l&&d(e,l)}}))},f=function(e){return Array.from(e.querySelectorAll(".wptb-ph-element"))},h={auto:function(n,l){var i=Array.from(n.querySelectorAll("td")),s=[],c=i.reduce((function(n,o,l){var i,c=(i=o,Array.from(i.querySelectorAll(".wptb-ph-element")));s.push.apply(s,_toConsumableArray(c));var d=a.dataManager.instance.getColumnIdFromIndex(l);return c.map((function(a){if(d){var o=t(a),l={},i=r(a);(e[i]||e.default).map((function(e){l[e]=d})),n[o]=l}})),n}),{});b(s,l,o(n),null,{column:c})},operator:function(e,t){var r=o(e),n=r.operator;b(f(e),t,r,a.operatorFactory.getOperator(n.operatorType).getOperatorResult(n))}},m=function(e,t){var r=t.cloneNode(!0),a=o(r);if(a&&a.mode&&"none"!==a.mode)!function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};h[e](t,r,a)}(a.mode,r,e);else{var n=f(r);b(n,e,a)}return r},y=function(e){for(var t=function(e){var t,r=null===(t=o(e))||void 0===t?void 0:t.mode;if("auto"===r||!r)return a.currentValues.length;if("operator"===r){var l,i=o(e).operator;return null===(l=a.operatorFactory.getOperator(i.operatorType))||void 0===l?void 0:l.calculateMaxRows(i)}return Array.from(e.querySelectorAll("td")).reduce((function(e,t){var r=Array.from(t.querySelectorAll(".wptb-ph-element")),o=0;return r.map((function(e){var t=n(e,"column");t&&(o=Object.keys(t).map((function(e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]})).reduce((function(e,t){var r=a.dataManager.instance.getColumnValues(t);return Math.max(r.length,e)}),0))})),Math.max(o,e)}),1)}(e),r=[],l=0;l<t;l+=1)r.push(m(l,e));return r};this.generateDataTable=function(e,t,r){a.updateDataManager(r,t),a.currentBindings=t,a.currentValues=r;var n,o=e.cloneNode(!0),l=o.querySelector("tbody"),i=(n=o,Array.from(n.querySelectorAll("tr")));return function(e){e.querySelector("tbody").innerHTML=""}(o),i.reduce((function(e,t){var r=y(t);return e=[].concat(_toConsumableArray(e),_toConsumableArray(r))}),[]).map((function(e){return l.appendChild(e)})),o},this.frontendGenerateTables=function(){Array.from(document.querySelectorAll('.wptb-preview-table[data-wptb-data-table="true"]')).map((function(e){return function(e){var t=JSON.parse(atob(e.dataset.wptbDataTableOptions));console.log("Data rows: ".concat(t.dataManager.tempData.parsedData.values.length));var r=e.parentNode;if(e.remove(),t.dataManager.tempData.parsedData.values.length>0){var n=a.generateDataTable(e,t.dataManager.bindings,t.dataManager.tempData.parsedData.values);r.appendChild(n)}else r.parentNode.remove()}(e)}))}}})),function(e,t,r){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=r():t[e]=r()}("WPTB_ResponsiveFrontend",self||global,(function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";if("undefined"!=typeof process&&"development"===process.env.NODE_ENV){if(!console[t])throw new Error("no logging type found with given type value of [".concat(t,"]"));console[t]("[WPTB]: ".concat(e))}}function t(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.element=e,this.referenceObject=r,this.mergedRenderStatus=!0,this.mergedCells={row:[],column:[]},this.getMergedRenderStatus=function(){return t.mergedRenderStatus},this.setMergedRenderStatus=function(e){t.mergedRenderStatus=e},this.addToMergedCells=function(e,r){t.mergedCells[e].push(r)},this.isReference=function(){return null!==t.referenceObject},this.isReference()&&(this.element=e.cloneNode(!0)),this.modifications={},this.spans={row:1,col:1},this.remainingSpans={row:0,col:0},this.cacheSpanValues=function(){Object.keys(t.spans).map((function(e){if(Object.prototype.hasOwnProperty.call(t.spans,e)){var r=t.spans[e];t.spans[e]=t.element.getAttribute("".concat(e,"Span"))||r}}))},this.cacheSpanValues(),this.getSpan=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=r?t.getElement().getAttribute("".concat(e,"Span")):t.spans[e];if(a)return a;throw new Error("no span value found with the given type of [".concat(e,"]"))},this.getRemainingSpans=function(e){return t.remainingSpans[e]},this.setRemainingSpans=function(e,r){t.remainingSpans[e]=r},this.getElement=function(){return t.element},this.createCellElement=function(){return document.createElement("td")},e||(this.element=this.createCellElement()),this.setAttribute=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",",o=t.getElement()[e];"function"!=typeof o&&"object"!==_typeof(o)||(o=t.getElement().getAttribute(e)),t.modifications[e]&&(o=t.modifications[e].default);var l=o;a?l+="".concat(l).concat(n).concat(r):l=r,t.modifications[e]={value:l,default:o},t.getElement()[e]=l},this.setSpan=function(e,r){if(!t.isReference()){var a=t.getSpan(e)-r<0?t.getSpan(e):r;t.setAttribute("".concat(e,"Span"),a),t.setRemainingSpans(e,t.getSpan(e)-a);for(var n=0;n<a-1;n+=1)t.mergedCells[e]&&t.mergedCells[e][n]&&t.mergedCells[e][n].setMergedRenderStatus(!1);return!0}if(!t.getMergedRenderStatus())return!1;var o=t.referenceObject.getRemainingSpans(e);if(0===o)return!1;var l=o-r<0?o:r,i=o-l;if(t.referenceObject.setRemainingSpans(e,i),t.setAttribute("".concat(e,"Span"),l),0!==i)for(var s=t.referenceObject.mergedCells[e].length-o+1,c=s+l-1,d=s;d<c;d+=1)t.mergedCells[e][d].setMergedRenderStatus(!1);return!0},this.resetAttribute=function(e){t.modifications[e]&&(t.getElement()[e]=t.modifications[e].default,t.modifications[e]=void 0)},this.resetAllAttributes=function(){Object.keys(t.modifications).map((function(e){Object.prototype.hasOwnProperty.call(t.modifications,e)&&t.resetAttribute(e)}))},{getElement:this.getElement,el:this.element,setAttribute:this.setAttribute,resetAllAttributes:this.resetAllAttributes,getSpan:this.getSpan,setSpan:this.setSpan,getRemainingSpans:this.getRemainingSpans,setRemainingSpans:this.setRemainingSpans,isReference:this.isReference,addToMergedCells:this.addToMergedCells,mergedCells:this.mergedCells,setMergedRenderStatus:this.setMergedRenderStatus,getMergedRenderStatus:this.getMergedRenderStatus}}function r(r){var a=this;return this.tableElement=r,this.parsedTable=[],this.rowCache=[],this.originals={rows:[]},this.rowColors={header:null,even:null,odd:null},this.addToParsed=function(e,t,r){a.parsedTable[e]||(a.parsedTable[e]=[]),a.parsedTable[e][t]=r},this.parseTable=function(){var e=Array.from(a.tableElement.querySelectorAll("tr"));e.map((function(e,r){a.originals.rows.push(e),Array.from(e.querySelectorAll("td")).map((function(e,n){var o=new t(e);a.addToParsed(r,n,o);var l=o.getSpan(t.spanTypes.row),i=o.getSpan(t.spanTypes.column);if(l>1)for(var s=1;s<l;s+=1){var c=new t(e,o);o.addToMergedCells("row",c),a.addToParsed(r+s,n,c)}if(i>1)for(var d=1;d<i;d+=1){var u=new t(e,o);o.addToMergedCells("column",u),a.addToParsed(r,n+d,u)}}))})),a.parseRowColors(e)},this.parseRowColors=function(t){(!t||t.length<=0)&&e("no rows are found to parse their colors","error");var r=a.tableElement.dataset.wptbHeaderBackgroundColor,n=a.tableElement.dataset.wptbEvenRowBackgroundColor,o=a.tableElement.dataset.wptbOddRowBackgroundColor;a.rowColors.header=void 0!==r?r:""===t[0].style.backgroundColor?null:t[0].style.backgroundColor;for(var l=t.length/3>=1?0:1===t.length?2:(t.length-1)%2,i=0;i<l;i+=1){var s=document.createElement("tr");a.tableElement.querySelector("tbody").appendChild(s),t.push(s)}a.rowColors.even=n||getComputedStyle(t[1]).backgroundColor,a.rowColors.odd=n?o:getComputedStyle(t[2]).backgroundColor;for(var c=0;c<l;c+=1)t[t.length-(c+1)].remove()},this.addRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Array.isArray(e)||(e=[e]);var n,o=a.tableElement.querySelector("tbody");if(t)n=a.originals.rows[r];else{var l=document.createRange();l.setStart(o,0),n=l.createContextualFragment('<tr class="'.concat(e.join(" "),'"></tr>')).childNodes[0]}return o.appendChild(n),a.rowCache.push(n),{el:n,id:a.rowCache.length-1}},this.clearTable=function(){a.rowCache=[],a.tableElement.querySelector("tbody").innerHTML=""},this.getRow=function(t){return a.rowCache[t]?a.rowCache[t]:(e("no row with id [".concat(t,"] found in the cache."),"warn"),null)},this.maxRows=function(){return a.parsedTable.length},this.maxColumns=function(){return a.parsedTable.reduce((function(e,t){return t.length>e&&(e=t.length),e}),0)},this.getCell=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(a.parsedTable[t][r])return n?a.parsedTable[t][r]:a.parsedTable[t][r].el}catch(a){return e("no cell found at the given address of [".concat(t,"-").concat(r,"]"),"warn"),null}return e("no cell found at the given address of [".concat(t,"-").concat(r,"]"),"warn"),null},this.getCellsAtRow=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=0;n<a.maxColumns();n+=1){var o=a.getCell(e,n,t);o&&r.push(o)}return r},this.appendToRow=function(e,t,r){var n=a.getRow(r),o=a.getCell(e,t,!0);return o&&n&&n.appendChild(o.getElement()),o},this.appendElementToRow=function(e,t){var r=a.getRow(t);e&&r&&r.appendChild(e)},this.appendObjectToRow=function(e,t){var r=a.getRow(t);e&&r&&r.appendChild(e.getElement())},this.parseTable(),{maxRows:this.maxRows,maxColumns:this.maxColumns,addRow:this.addRow,clearTable:this.clearTable,getCell:this.getCell,appendToRow:this.appendToRow,appendElementToRow:this.appendElementToRow,appendObjectToRow:this.appendObjectToRow,getCellsAtRow:this.getCellsAtRow,el:this.tableElement,rowColors:this.rowColors}}t.spanTypes={row:"row",column:"col"};var a={query:".wptb-preview-table",defaultClasses:["wptb-plugin-responsive-base"],bindToResize:!1};return function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=_objectSpread({},a,{},n),this.elements=Array.from(document.querySelectorAll(this.options.query)),this.elementObjects=this.elements.map((function(e){return{el:e,tableObject:new r(e)}})),this.bindRebuildToResize=function(){window.addEventListener("resize",(function(){e.rebuildTables()}))},this.getDirective=function(e){var t=e.dataset.wptbResponsiveDirectives;return t?JSON.parse(atob(t)):null},this.addDefaultClasses=function(t){t.classList.add(e.options.defaultClasses)},this.removeDefaultClasses=function(t){t.classList.remove(e.options.defaultClasses)},this.autoBuild=function(t,r,a,n){var o=a.cellStackDirection[r],l=a.topRowAsHeader[r],i=a.cellsPerRow[r],s=!!a.staticTopRow&&a.staticTopRow[r];n.clearTable(),"desktop"===r?(e.buildDefault(n),e.removeDefaultClasses(t)):(e.autoDirectionBuild(n,o,l,s,i),e.addDefaultClasses(t))},this.autoDirectionBuild=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=t.maxRows(),i=t.maxColumns(),s="row"===r;if(a)e.headerBuild(t,r,o);else if(s)!function(){var e=[],r=0;n&&t.getCellsAtRow(0,!0).filter((function(e){return!e.isReference()})).map((function(e){r+=1;var a=t.addRow("wptb-row");a.el.style.backgroundColor=t.rowColors.header,t.appendObjectToRow(e,a.id),e.setAttribute("colSpan",o)}));for(var a=r;a<l;a+=1)t.getCellsAtRow(a,!0).forEach((function(t){t.isReference()||e.push(t)}));for(var i=e.length,s=0,c=0;s<i;s+=o,c+=1){var d=t.addRow("wptb-row");d.el.style.backgroundColor=t.rowColors[c%2==0?"odd":"even"];for(var u=0;u<o;u+=1){var p=e[s+u];p&&(t.appendElementToRow(p.getElement(),d.id),p.resetAllAttributes(),p.setAttribute("style","width: 100% !important",!0,";"),p.setAttribute("colSpan",1),p.setAttribute("rowSpan",1))}}}();else{var c=[],d=0;if(n){var u=t.getCellsAtRow(0,!0),p=u.filter((function(e){return!e.isReference()}));p.map((function(e){d+=1;var r=t.addRow("wptb-row");r.el.style.backgroundColor=t.rowColors.header,t.appendObjectToRow(e,r.id),e.setAttribute("colSpan",o)}))}for(var b=0;b<i;b+=1)for(var f=d;f<l;f+=1){var h=t.getCell(f,b,!0);h&&!h.isReference()&&c.push(h)}for(var m=c.length,y=0,v=0;y<m;y+=o,v+=1){var g=t.addRow("wptb-row");g.el.style.backgroundColor=t.rowColors[v%2==0?"odd":"even"];for(var w=0;w<o;w+=1){var S=c[y+w];S&&(t.appendElementToRow(S.getElement(),g.id),S.resetAllAttributes(),S.setAttribute("style","width: 100% !important",!0,";"),S.setAttribute("colSpan",1),S.setAttribute("rowSpan",1))}}}},this.headerBuild=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.getCellsAtRow(0,!0).map((function(t){return t.setAttribute("style","background-color: ".concat(e.rowColors.header),!0,";"),t})),o="column"===r,l=e.maxRows(),i=e.maxColumns(),s="3px solid gray";if(o)for(var c=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=e.addRow("wptb-row");t&&(r.el.style.borderTop=s),n.map((function(t){e.appendElementToRow(t.el.cloneNode(!0),r.id)}))},d=Math.ceil((l-1)/a),u=1,p=0;p<d;p+=1){c(p>0);for(var b=0;b<a&&!(u>=l);b+=1){var f=e.addRow("wptb-row");f.el.style.backgroundColor=e.rowColors[b%2==0?"even":"odd"];for(var h=0;h<i;h+=1){var m=e.getCell(u,h,!0);if(m){m.resetAllAttributes();var y=!0,v=m.getSpan(t.spanTypes.row);m.getSpan(t.spanTypes.column);if(v>1){var g=a-b,w=Math.min(v,g);y=m.setSpan(t.spanTypes.row,w),m.setMergedRenderStatus(!0)}y&&e.appendObjectToRow(m,f.id)}}u+=1}}else for(var S=Math.ceil((l-1)/a),C=1,T=0;T<S;T+=1){for(var A=0;A<i;A+=1){var x=e.addRow("wptb-row");x.el.style.backgroundColor="none",T>0&&0===A&&(x.el.style.borderTop=s);var O=n[A].el.cloneNode(!0);O.style.backgroundColor="".concat(e.rowColors.header," !important"),e.appendElementToRow(O,x.id);for(var R=0;R<a&&!(C+R>=l);R+=1){var I=e.getCell(C+R,A,!0);if(I){I.resetAllAttributes();var _=!0,E=I.getSpan(t.spanTypes.row);I.getSpan(t.spanTypes.column);if(E>1){var P=a-R,j=Math.min(E,P);_=I.setSpan(t.spanTypes.row,j);var k=I.el.getAttribute("rowSpan"),M=I.el.getAttribute("colSpan");I.setAttribute("rowSpan",M),I.setAttribute("colSpan",k),I.setMergedRenderStatus(!0)}if(_){var B=(C+R+T)%2==0?"even":"odd";1===a&&(B=C%2==0?"even":"odd"),I.setAttribute("style","background-color: ".concat(e.rowColors[B]),!0,";"),e.appendObjectToRow(I,x.id)}}}}C+=a}},this.buildDefault=function(e){for(var t=e.maxRows(),r=e.maxColumns(),a=0;a<t;a+=1)for(var n=e.addRow("",!0,a).id,o=0;o<r;o+=1){var l=e.getCell(a,o,!0);l&&!l.isReference()&&(l.resetAllAttributes(),e.appendElementToRow(l.getElement(),n))}},this.calculateRangeId=function(e,t){var r=Object.keys(t).sort((function(e,r){return t[e].width-t[r].width})),a=r[0];return r.map((function(r){e>=t[r].width&&(a=r)})),a},this.rebuildTable=function(t,r,a){var n=e.getDirective(t);if(n){if(!n.responsiveEnabled)return;var o=n.responsiveMode,l=e["".concat(o,"Build")];r||(r=t.getBoundingClientRect().width);var i=e.calculateRangeId(r,n.breakpoints);if(!l)throw new Error("No build mode named as [".concat(o,"] found."));var s=n.modeOptions[o];l.call(e,t,i,s,a),WPTB_RecalculateIndexes(t);var c=new CustomEvent("table:rebuilt",{detail:{sizeRangeId:i,topRowAsHeader:n.modeOptions[o].topRowAsHeader}});t.dispatchEvent(c)}},this.rebuildTables=function(t){e.elementObjects.map((function(r){var a=t;if(!t){a=window.innerWidth;var n=e.getDirective(r.el);if(n&&n.relativeWidth)switch(n.relativeWidth){case"window":a=window.innerWidth;break;case"container":a=r.el.parentNode.parentNode.parentNode.clientWidth;break;default:a=window.innerWidth}}e.rebuildTable(r.el,a,r.tableObject)}))},this.options.bindToResize&&this.bindRebuildToResize(),{rebuildTables:this.rebuildTables,getDirective:this.getDirective,calculateRangeId:this.calculateRangeId}}})),function(e,t,r){t[e]=r()}("WPTB_StylePass",self||global,(function(){return new function(){var e=this;this.options={stylesheets:{}},this.insertShadowRoot=function(t,r){var a=r.parentNode,n=Array.from(a.children),o=n.indexOf(r),l=o-1>0?null:n[o-1],i=o+1>=n.length?null:n[o+1];e.prepareAllStylesheets(e.options.stylesheets,t.shadowRoot),e.borrowFromTheme(r),t.shadowRoot.appendChild(r),l?l.insertAdjacentElement("afterend",t):i?i.insertAdjacentElement("beforebegin",t):a.appendChild(t)},this.borrowFromTheme=function(e){var t=e.querySelector("table"),r=getComputedStyle(t).fontFamily;t.style.fontFamily=r},this.init=function(t){e.options=_objectSpread({},e.options,{},t);var r=Array.from(document.querySelectorAll("div .wptb-table-container"));r.length>0&&r.map(e.setupStylePass)},this.checkTableEligibility=function(e){return e.querySelector("table").dataset.disableThemeStyles},this.setupStylePass=function(t){if(e.checkTableEligibility(t)){var r=document.createElement("div"),a=t.querySelector("table").dataset.wptbTableContainerMaxWidth;a&&(r.style.maxWidth="".concat(a,"px")),r.attachShadow({mode:"open"}),e.insertShadowRoot(r,t)}},this.prepareAllStylesheets=function(t,r){Object.keys(t).map((function(a){Object.prototype.hasOwnProperty.call(t,a)&&e.prepareStylesheet(a,t[a],r)}))},this.prepareStylesheet=function(e,t,r){var a=document.createElement("link");a.setAttribute("id",e),a.setAttribute("href",t),a.setAttribute("rel","stylesheet"),a.setAttribute("media","all"),r.appendChild(a)}}})),jQuery,jQuery(document).ready((function(e){WPTB_DataTableGenerator.frontendGenerateTables();var t,r=document.getElementsByClassName("wptb-table-container");function a(){for(var e=0;e<r.length;e++){var t=r[e],a=!0,n=t.getElementsByClassName("wptb-preview-table"),o=t.getElementsByClassName("wptb-table-container-matrix");if(n.length>0&&o.length>0){if(n=n[0],o=o[0],n.style.display="table",n.dataset.wptbTableAlignment){var l=n.dataset.wptbTableAlignment;t.offsetWidth<n.offsetWidth?n.style.float=null:n.style.float="center"==l?null:l,t.style.float="center"==l?null:l}if(1==n.dataset.reconstraction&&1==n.dataset.wptbAdaptiveTable){var i=t.offsetWidth,s=n.offsetWidth,c=void 0,d=n.rows;d.length>0&&(c=d[0].querySelectorAll("td").length);var u=!1,p=void 0;if((!n.classList.contains("wptb-table-preview-head")||c>2)&&c>1)if(i<s){if(t.style.overflow="unset",o&&!o.classList.contains("wptb-matrix-hide")&&(o.classList.add("wptb-matrix-hide"),u=!0),n.classList.add("wptb-mobile-view-active"),n.rows&&c){var b=s/c,f=Math.floor(i/b);if(f<1&&(f=1),t.getElementsByClassName("wptb-preview-table-mobile").length>0){(p=t.getElementsByClassName("wptb-preview-table-mobile")[0]).classList.remove("wptb-mobile-hide");var h=p.dataset.wholeColumnsInContainer;h==f&&n.classList.contains("wptb-table-preview-head")||h==f&&!n.classList.contains("wptb-table-preview-head")&&(i>480||1==p.column)?a=!1:p.parentNode.removeChild(p)}if(a){var m=document.createElement("table"),y=document.createElement("tbody");m.appendChild(y),m.classList.add("wptb-preview-table-mobile");var v=n.className.match(/wptb-element-main(.+)-(\d+)/i);v&&Array.isArray(v)&&m.classList.add(v[0]);var g=n.rows.length,w=void 0,S=!1;if(n.classList.contains("wptb-table-preview-head")){var C=g-1,T=void 0;if(g>f)for(var A=0;A<C;A++){if((T=f-1-A)<=0&&(T=1),0==(w=C%T)){S=!0;break}if(T>0&&T<=6&&T-2*w<0&&w<T){S=!0;break}if(T>6&&T<=12&&T-1.8*w<0&&w<T){S=!0;break}if(T>12&&T<=18&&T-1.6*w<0&&w<T){S=!0;break}}else T=C,w=0,S=!0;if(S){var x=void 0;x=T>0?c*Math.ceil(C/T):c,Math.floor((x-1)/c);for(var O=void 0,R=0;R<x;R++){var I=Math.floor(R/c),_=document.createElement("tr"),E=n.rows[0].children[R-I*c].cloneNode(!0),P=void 0,j=window.getComputedStyle(n.rows[0]);E.style.backgroundColor||(E.style.backgroundColor=j.backgroundColor),E.style.width=null,E.style.height=null,E.removeAttribute("data-wptb-css-td-auto-width"),(O=window.getComputedStyle(n.querySelector("td"))).borderTopColor?E.style.borderColor=O.borderTopColor:E.style.borderColor=O.borderBottomColor,I>0&&R%c==0&&(E.style.borderTopWidth="5px"),_.appendChild(E);for(var k=T*I+1;k<T*(I+1)+1;k++){if(k<n.rows.length){P=n.rows[k].children[R-I*c].cloneNode(!0);var M=window.getComputedStyle(n.rows[k]);P.style.backgroundColor||(P.style.backgroundColor=M.backgroundColor),P.style.width=null,P.style.height=null,P.removeAttribute("data-wptb-css-td-auto-width")}else(P=document.createElement("td")).style.borderWidth="0px",P.style.background="#fff";(O=window.getComputedStyle(n.querySelector("td"))).borderTopColor?P.style.borderColor=O.borderTopColor:P.style.borderColor=O.borderBottomColor,I>0&&R%c==0&&(P.style.borderTopWidth="5px"),_.appendChild(P)}y.appendChild(_)}}}else{var B=void 0;if(i>480)for(var q=0;q<c;q++){if(0==(B=f-q)&&(B=1),0==(w=c%B)){S=!0;break}if(B>0&&B<=6&&B-2*w<=0&&w<B){S=!0;break}if(B>6&&B<=12&&B-1.8*w<=0&&w<B){S=!0;break}if(B>12&&B<=18&&B-1.6*w<=0&&w<B){S=!0;break}}else B=1,w=0,S=!0,m.column=1;var L=Math.ceil(c/B),W=L*g;if(S)for(var D=0;D<W;D++){var H=Math.floor(D/g),N=document.createElement("tr"),V=void 0,z=void 0;H!=L-1||0==w?(z=H*B,V=B*(1+H)):(z=c-w,V=c);var F=n.rows[D-H*g];N.classList=F.classList,N.style.backgroundColor=F.style.backgroundColor;for(var G=z;G<V;G++){var K=F.children[G].cloneNode(!0);if(!K.style.backgroundColor){var $=window.getComputedStyle(F);K.style.backgroundColor=$.backgroundColor}K.style.width=null,K.style.height=null,K.removeAttribute("data-wptb-css-td-auto-width"),N.appendChild(K)}y.appendChild(N)}}m.dataset.wholeColumnsInContainer=f;var U=m.querySelectorAll("[srcset]");if(U.length>0)for(var X=0;X<U.length;X++)U[X].removeAttribute("srcset");p=m,t.appendChild(m),u=!0}}}else o&&o.classList.contains("wptb-matrix-hide")&&(o.classList.remove("wptb-matrix-hide"),u=!0,n.classList.remove("wptb-mobile-view-active"),(p=t.querySelector(".wptb-preview-table-mobile"))&&t.getElementsByClassName("wptb-preview-table-mobile")[0].classList.add("wptb-mobile-hide"),t.style.overflow="auto");else n.style.minWidth="auto";if(WPTB_RecalculateIndexes(n),u){WPTB_RecalculateIndexes(p);var Y=new CustomEvent("table:rebuilt",{detail:!0,bubbles:!0});n.dispatchEvent(Y)}}}}}function n(){for(var e=document.getElementsByClassName("wptb-table-container"),t=0;t<e.length;t++){var r=e[t];r.classList.add("wptb-table-container-".concat(t));var a=r.getElementsByClassName("wptb-preview-table");if(a.length>0){(a=a[0]).dataset.wptbTableContainerMaxWidth&&(r.style.maxWidth="".concat(a.dataset.wptbTableContainerMaxWidth,"px")),a.classList.remove("wptb-table-preview-static-indic"),a.mergingСellsHorizontally=!1;for(var n=a.querySelectorAll("td"),o=0;o<n.length;o++)n[o].colSpan>1&&(a.mergingСellsHorizontally=!0);var l=r.offsetWidth,i=a.querySelector("td"),s=window.getComputedStyle(i,null),c=s.getPropertyValue("border-left-width"),d=s.getPropertyValue("border-right-width"),u=s.getPropertyValue("padding-left"),p=s.getPropertyValue("padding-left"),b=parseFloat(u,10)+parseFloat(p,10),f=parseFloat(c,10)+parseFloat(d,10),h=a.dataset.wptbTableTdsSumMaxWidth,m=a.dataset.wptbFixedWidthSize,y=a.dataset.wptbCellsWidthAutoCount,v=!1,g=void 0;h<l?y?(a.style.minWidth="100%",a.mergingСellsHorizontally?(a.style.width="auto",g=(g=(l-m)/y)-b-f,v=!0):a.style.width="100%"):(a.style.width="auto",a.style.minWidth=null,a.style.maxWidth="".concat(h,"px")):(a.style.maxWidth=null,a.style.minWidth="".concat(a.dataset.wptbTableTdsSumMaxWidth,"px"),a.style.width="auto",g=a.dataset.wptbTdWidthAuto?a.dataset.wptbTdWidthAuto:"100",v=!0);var w=document.head;if(w){var S=w.querySelector("style[data-wptb-td-auto-width-".concat(t,'="true"]'));S&&w.removeChild(S)}if(v){var C=document.createElement("style");C.setAttribute("data-wptb-td-auto-width-".concat(t),!0),C.innerHTML=".wptb-table-container-".concat(t," table td[data-wptb-css-td-auto-width=true]{width:").concat(g,"px}"),w&&w.appendChild(C)}}}}t=".wptb-preview-table .wptb-button",Array.from(document.querySelectorAll(t)).map((function(e){e.addEventListener("mouseenter",(function(t){var r=t.target;r.dataset.wptbElementHoverBgColor&&(r.style.backgroundColor=r.dataset.wptbElementHoverBgColor),r.dataset.wptbElementHoverTextColor&&(r.style.color=r.dataset.wptbElementHoverTextColor),r.dataset.wptbElementHoverScale&&(r.style.transform="scale(".concat(e.dataset.wptbElementHoverScale,")"))})),e.addEventListener("mouseleave",(function(e){var t=e.target;t.dataset.wptbElementHoverBgColor&&(t.style.backgroundColor=t.dataset.wptbElementBgColor),t.dataset.wptbElementHoverTextColor&&(t.style.color=t.dataset.wptbElementColor),t.dataset.wptbElementHoverScale&&(t.style.transform="scale(1)")}))})),n(),a(),e(window).resize((function(){n(),a()}));for(var o=document.getElementsByClassName("wptb-ph-element"),l=0;l<o.length;l++){var i=o[l];if(i.classList.contains("wptb-list-item-container")&&(i.classList.remove("wptb-list-item-container"),i.classList.add("wptb-list-container")),i.classList.contains("wptb-button-container")){var s=i.className.match(/wptb-size-([A-Z]+)/i);if(s&&Array.isArray(s)){var c=s[0],d=c.toLowerCase();i.classList.remove(c);var u=i.querySelector(".wptb-button-wrapper");u&&u.classList.add(d)}}}var p=new WPTB_ResponsiveFrontend({query:".wptb-preview-table",bindToResize:!0});!function(){for(var e=document.querySelectorAll(".wptb-preview-table"),t=0;t<e.length;t++)new WPTB_SortableTable({table:e[t]}).sortableTableInitialization(p)}(),p.rebuildTables(),WPTB_StylePass.init(WptbFrontendData.stylePass)}));
//# sourceMappingURL=wp-table-builder-frontend.js.map
