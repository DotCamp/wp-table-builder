{"version":3,"sources":["../../../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../../../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../../../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../../../../node_modules/@babel/runtime/helpers/typeof.js","../../../../../node_modules/@babel/runtime/helpers/toPrimitive.js","../../../../../node_modules/@babel/runtime/helpers/toPropertyKey.js","../../../../../node_modules/@babel/runtime/helpers/defineProperty.js","../WPTB_ExtraStyles.js","WPTB_Block_ExtraStyles.js"],"names":["_arrayWithHoles","arr","Array","isArray","module","exports","__esModule","_iterableToArrayLimit","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","_arrayLikeToArray","len","arr2","arrayLikeToArray","require","_unsupportedIterableToArray","o","minLen","n","prototype","toString","slice","constructor","name","from","test","_nonIterableRest","TypeError","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_slicedToArray","_typeof","obj","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","String","Number","_toPropertyKey","arg","key","toPropertyKey","_defineProperty","defineProperty","enumerable","configurable","writable","context","factory","_typeof2","default","self","global","_this","modes","builder","frontEnd","block","baseDocument","document","currentMode","generalStyles","tableQueries","_defineProperty2","prefixStyleRules","prefix","extraStyles","splitStyles","replaceAll","split","prefixedStylesArray","map","matches","RegExp","exec","trim","replace","concat","join","applyGeneralStyles","baseElement","arguments","generalStylesheet","createElement","type","id","insertAdjacentElement","querySelector","appendChild","prefixedStyleRules","parentPrefix","styles","createTextNode","applyExtraStyle","tableElement","extraStylesRaw","dataset","wptbExtraStyles","atob","_tableElement$getAttr","getAttribute","match","tableId","_slicedToArray2","styleId","head","styleElement","disableThemeStyles","uniqueClass","prefixedStyles","innerHTML","applyStyles","mode","allTables","querySelectorAll","_WPTB_ExtraStyles","_interopRequireDefault","e","shadowDocument","shadowRoot","WPTB_ExtraStyles"],"mappings":"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","file":"WPTB_Block_ExtraStyles.js","sourceRoot":"core\\rollup-source","sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * Extra styles module to add custom css rules defined for individual tables.\n */\n(function UMD(key, context, factory) {\n    if (typeof module !== \"undefined\" && typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        // eslint-disable-next-line no-param-reassign\n        context[key] = factory();\n    }\n    // eslint-disable-next-line no-restricted-globals\n})(\"WPTB_ExtraStyles\", self || global, () => {\n    /**\n     * Extra styles frontend manager.\n     *\n     * This component will be responsible for adding and maintaining extra styles defined for tables.\n     *\n     * @class\n     */\n    // eslint-disable-next-line camelcase\n    function WPTB_ExtraStyles() {\n        /**\n         * Extra styles operation modes\n         *\n         * @type {Object}\n         */\n        this.modes = {\n            builder: \"builder\",\n            frontEnd: \"frontEnd\",\n            block: \"block\",\n        };\n\n        /**\n         * Base document for DOM operations.\n         *\n         * @type {Document}\n         */\n        this.baseDocument = document;\n\n        /**\n         * Current mode extra styles are operating on.\n         *\n         * @type {string}\n         */\n        this.currentMode = this.modes.builder;\n\n        /**\n         * General table styles.\n         *\n         * @type {string}\n         */\n        this.generalStyles = \"\";\n\n        /**\n         * HTML queries for table element in different plugin modes\n         *\n         * @type {Object}\n         */\n        const tableQueries = {\n            [this.modes.builder]: \".wptb-table-setup .wptb-preview-table\",\n            [this.modes.block]: \".wptb-block-table-setup .wptb-preview-table\",\n            [this.modes.frontEnd]: \".wptb-table-container .wptb-preview-table\",\n        };\n\n        /**\n         * Format styles.\n         *\n         * @param {string} styles styles\n         * @return {string} formatted styles\n         */\n        const formatStyles = (styles) => {\n            // remove all newlines, comments and '!important' from style string to make it a one liner\n            const cleaned = styles.replaceAll(\n                /(\\r?\\n)|(\\/\\*.+?\\*\\/)|(\\s*!important)/g,\n                \"\"\n            );\n\n            // add '!important' to all rules to override default style rules\n            return cleaned.replaceAll(\";\", \" !important;\");\n        };\n\n        /**\n         * Reform style rules so they will only affect given table id.\n         *\n         * @param {number} prefix prefix string that will be added to all rules\n         * @param {string} extraStyles extra styles\n         * @return {string} new style properties prefixed with table id class\n         */\n        const prefixStyleRules = (prefix, extraStyles) => {\n            // reformat styles into a suitable form for our regexp operations\n            const formattedStyles = formatStyles(extraStyles);\n\n            const splitStyles = formattedStyles.split(\"}\");\n            const prefixedStylesArray = [];\n\n            // eslint-disable-next-line array-callback-return\n            splitStyles.map((split) => {\n                const regExp = new RegExp(/(.+?)\\{/g);\n                const matches = regExp.exec(split);\n\n                if (matches) {\n                    if (prefix === matches[1].trim()) {\n                        prefixedStylesArray.push(split);\n                    } else {\n                        prefixedStylesArray.push(\n                            split.replace(matches[1], `${prefix} ${matches[1]}`)\n                        );\n                    }\n                }\n            });\n\n            return `${prefixedStylesArray.join(\"}\")}}`;\n        };\n\n        /**\n         * Apply general styles to document.\n         *\n         * @param {string} generalStyles general style rules\n         * @param {Node} baseElement element to use as base\n         */\n        const applyGeneralStyles = (generalStyles, baseElement = null) => {\n            const generalStylesheet = document.createElement(\"style\");\n            generalStylesheet.type = \"text/css\";\n            generalStylesheet.id = \"wptb-general-styles\";\n\n            if (!baseElement) {\n                const head =\n                    this.currentMode === this.modes.block\n                        ? this.baseDocument\n                        : this.baseDocument.querySelector(\"head\");\n\n                head.appendChild(generalStylesheet);\n            } else {\n                baseElement.insertAdjacentElement(\n                    \"beforebegin\",\n                    generalStylesheet\n                );\n            }\n            const prefixedStyleRules = prefixStyleRules(\n                generalStyles.parentPrefix,\n                generalStyles.styles\n            );\n            generalStylesheet.appendChild(\n                document.createTextNode(prefixedStyleRules)\n            );\n        };\n\n        /**\n         * Apply defined extra styles for given table element.\n         *\n         * @param {Element} tableElement table element\n         */\n        const applyExtraStyle = (tableElement) => {\n            const extraStylesRaw = tableElement.dataset.wptbExtraStyles;\n            const styleIdPrefix = \"wptb-extra-styles-\";\n\n            if (extraStylesRaw) {\n                const extraStyles = atob(extraStylesRaw);\n\n                const [, tableId] = tableElement\n                    .getAttribute(\"class\")\n                    .match(\n                        /wptb-element-main-table_setting-(?:startedid-)?(\\d+)/\n                    );\n\n                const styleId = styleIdPrefix + tableId;\n\n                const head = this.baseDocument.querySelector(\"head\");\n\n                // since stylesheets are created for frontend only once at startup, checking document head for any created style object will work even with theme disabled tables which at builder, they are not inside a shadow-root\n                let styleElement = head?.querySelector(`#${styleId}`);\n\n                // if no style element is found, create one\n                if (!styleElement) {\n                    styleElement = document.createElement(\"style\");\n                    styleElement.type = \"text/css\";\n                    styleElement.id = styleId;\n\n                    const isThemeStylesDisabled =\n                        tableElement.dataset.disableThemeStyles;\n\n                    // if theme styles are disabled, it means our table is residing inside a shadow-root, place style element inside shadow-root instead of document head\n                    if (\n                        (isThemeStylesDisabled &&\n                            this.currentMode === this.modes.frontEnd) ||\n                        this.currentMode === this.modes.block\n                    ) {\n                        tableElement.insertAdjacentElement(\n                            \"beforebegin\",\n                            styleElement\n                        );\n                        if (\n                            this.currentMode === this.modes.frontEnd &&\n                            this.generalStyles\n                        ) {\n                            applyGeneralStyles(\n                                this.generalStyles,\n                                tableElement\n                            );\n                        }\n                    } else {\n                        head.appendChild(styleElement);\n                    }\n                }\n                const uniqueClass = `.wptb-element-main-table_setting-${tableId}`;\n                // reform style rules so they will only affect the table they are assigned to\n                const prefixedStyles = prefixStyleRules(\n                    uniqueClass,\n                    extraStyles\n                );\n\n                // remove previous styles with updated ones\n                styleElement.innerHTML = \"\";\n                styleElement.appendChild(\n                    document.createTextNode(prefixedStyles)\n                );\n            }\n        };\n\n        /**\n         * Apply extra styles to all available tables on DOM.\n         *\n         * @param {string} mode operation mode to apply styles\n         * @param {string} generalStyles general style rules\n         * @param {Object} baseDocument base document for DOM operations\n         */\n        this.applyStyles = (\n            mode = this.modes.frontEnd,\n            generalStyles = null,\n            baseDocument = document\n        ) => {\n            this.baseDocument = baseDocument;\n            this.currentMode = mode;\n            this.generalStyles = generalStyles;\n\n            const allTables = Array.from(\n                this.baseDocument.querySelectorAll(tableQueries[mode])\n            );\n\n            if (allTables) {\n                allTables.map(applyExtraStyle);\n            }\n\n            // only apply general styles on client frontend if any general styles are defined\n            if (\n                (mode === this.modes.frontEnd || mode === this.modes.block) &&\n                generalStyles\n            ) {\n                applyGeneralStyles(generalStyles);\n            }\n        };\n    }\n\n    // send a singleton instance of manager\n    return new WPTB_ExtraStyles();\n});\n","import WPTB_ExtraStyles from '../WPTB_ExtraStyles';\n\nconst shadowDocument = document.querySelector('#wptb-block-preview-base').shadowRoot;\n\nWPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.block, null, shadowDocument);\n"]}