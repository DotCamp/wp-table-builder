function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _slicedToArray(b,a){return _arrayWithHoles(b)||_iterableToArrayLimit(b,a)||_unsupportedIterableToArray(b,a)||_nonIterableRest()}function _iterableToArrayLimit(h,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(h)){var k=[],c=!0,g=!1,j=void 0;try{for(var b,d=h[Symbol.iterator]();!(c=(b=d.next()).done)&&(k.push(b.value),!f||k.length!==f);c=!0){}}catch(h){g=!0,j=h}finally{try{c||null==d["return"]||d["return"]()}finally{if(g){throw j}}}return k}}function _toArray(a){return _arrayWithHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithHoles(a){return Array.isArray(a)?a:void 0}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _slicedToArray(b,a){return _arrayWithHoles(b)||_iterableToArrayLimit(b,a)||_unsupportedIterableToArray(b,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _iterableToArrayLimit(h,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(h)){var k=[],c=!0,g=!1,j=void 0;try{for(var b,d=h[Symbol.iterator]();!(c=(b=d.next()).done)&&(k.push(b.value),!f||k.length!==f);c=!0){}}catch(h){g=!0,j=h}finally{try{c||null==d["return"]||d["return"]()}finally{if(g){throw j}}}return k}}function _arrayWithHoles(a){return Array.isArray(a)?a:void 0}function _defineProperty(b,a,c){return a in b?Object.defineProperty(b,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):b[a]=c,b}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _wrapRegExp(g,d){function i(j,a,k){return a=f.call(this,j,a),b.set(a,k||b.get(j)),a}function c(j,a){var k=b.get(a);return Object.keys(k).reduce(function(m,l){return m[l]=j[k[l]],m},Object.create(null))}_wrapRegExp=function(j,a){return new i(j,void 0,a)};var f=_wrapNativeSuper(RegExp),h=RegExp.prototype,b=new WeakMap;return _inherits(i,f),i.prototype.exec=function(a){return a=h.exec.call(this,a),a&&(a.groups=c(a,this)),a},i.prototype[Symbol.replace]=function(k,a){if("string"==typeof a){var l=b.get(this);return h[Symbol.replace].call(this,k,a.replace(/\$<([^>]+)>/g,function(n,m){return"$"+l[m]}))}if("function"!=typeof a){return h[Symbol.replace].call(this,k,a)}var j=this;return h[Symbol.replace].call(this,k,function(){var m=[];return m.push.apply(m,arguments),"object"!==_typeof(m[m.length-1])&&m.push(c(m,j)),a.apply(this,m)})},_wrapRegExp.apply(this,arguments)}function _inherits(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&_setPrototypeOf(b,a)}function _possibleConstructorReturn(b,a){return !a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(b):a}function _assertThisInitialized(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function _wrapNativeSuper(b){var a="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(c){function d(){return _construct(c,arguments,_getPrototypeOf(this).constructor)}if(null===c||!_isNativeFunction(c)){return c}if("function"!=typeof c){throw new TypeError("Super expression must either be null or a function")}if(void 0!==a){if(a.has(c)){return a.get(c)}a.set(c,d)}return d.prototype=Object.create(c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(d,c)})(b)}function _construct(b,a,c){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(g,f,h){var d=[null];return d.push.apply(d,f),d=new (Function.bind.apply(g,d)),h&&_setPrototypeOf(d,h.prototype),d}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct){return !1}if(Reflect.construct.sham){return !1}if("function"==typeof Proxy){return !0}try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return !1}}function _isNativeFunction(a){return -1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(b,a){return(_setPrototypeOf=Object.setPrototypeOf||function(d,c){return d.__proto__=c,d})(b,a)}function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function ownKeys(d,c){var f,b=Object.keys(d);return Object.getOwnPropertySymbols&&(f=Object.getOwnPropertySymbols(d),c&&(f=f.filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})),b.push.apply(b,f)),b}function _objectSpread(b){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(c),!0).forEach(function(d){_defineProperty(b,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(d){Object.defineProperty(b,d,Object.getOwnPropertyDescriptor(c,d))})}return b}function _defineProperty(b,a,c){return a in b?Object.defineProperty(b,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):b[a]=c,b}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function WptbResponsive(d,c,f){var b=this;this.sectionName=d,this.responsiveWrapperId=c,this.responsiveTable=null,this.loaded=!1,this.addContainerToDom=function(){if(!document.querySelector("#".concat(b.responsiveWrapperId))){var g=document.querySelector(f);if(!g){throw new Error("[WPTB_Responsive]: no parent container is found with the given query of [".concat(f,"]"))}var a=document.createRange();a.setStart(g,0),a=a.createContextualFragment('<div class="wptb-responsive" id="'.concat(b.responsiveWrapperId,'">responsive element</div>')),g.appendChild(a),b.loaded=!0}b.responsiveTable=document.querySelector("#".concat(b.responsiveWrapperId))},this.load=function(){b.loaded||(b.addContainerToDom(),WPTB_Helper.elementStartScript(b.responsiveTable,"table_responsive_menu"),WPTB_Helper.elementOptionsSet("table_responsive_menu",b.responsiveTable),WPTB_ControlsManager.callControlScript("ResponsiveTable",b.responsiveWrapperId))},this.startUp=function(){document.addEventListener("wptbSectionChanged",function(g){var a=document.querySelector(".wptb-table-setup .wptb-preview-table");g.detail===b.sectionName&&a&&b.load()}),document.addEventListener("wptb:table:generated",function(){"table_responsive_menu"===WPTB_Helper.getCurrentSection()&&b.load()})},this.startUp()}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _slicedToArray(b,a){return _arrayWithHoles(b)||_iterableToArrayLimit(b,a)||_unsupportedIterableToArray(b,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function _iterableToArrayLimit(h,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(h)){var k=[],c=!0,g=!1,j=void 0;try{for(var b,d=h[Symbol.iterator]();!(c=(b=d.next()).done)&&(k.push(b.value),!f||k.length!==f);c=!0){}}catch(h){g=!0,j=h}finally{try{c||null==d["return"]||d["return"]()}finally{if(g){throw j}}}return k}}function _arrayWithHoles(a){return Array.isArray(a)?a:void 0}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,a){if(b){if("string"==typeof b){return _arrayLikeToArray(b,a)}var c=Object.prototype.toString.call(b).slice(8,-1);return"Map"===(c="Object"===c&&b.constructor?b.constructor.name:c)||"Set"===c?Array.from(b):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(b,a):void 0}}function _iterableToArray(a){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0}function _arrayWithoutHoles(a){return Array.isArray(a)?_arrayLikeToArray(a):void 0}function _arrayLikeToArray(d,c){(null==c||c>d.length)&&(c=d.length);for(var f=0,b=new Array(c);c>f;f++){b[f]=d[f]}return b}function copyToClipboard(){var a=jQuery("<input>");jQuery("body").append(a),a.val(jQuery("#wptb-embed-shortcode").val()).select(),document.execCommand("copy"),a.remove()}jQuery("#divSvg").mouseenter(function(){jQuery(".tooltiptext").html("Copy");jQuery(".tooltiptext").css("visibility","visible")});jQuery("#divSvg").mouseleave(function(){jQuery(".tooltiptext").html("Copy");jQuery(".tooltiptext").css("visibility","hidden")});jQuery("#divSvg").mousedown(function(){jQuery(".tooltiptext").html("Copied");jQuery(".tooltiptext").css("visibility","visible")});var WPTB_ActionsField=function e(){var a=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(g,c){var d=document.getElementsByTagName("body")[0],f=document.getElementsByClassName("wptb-actions");if(0!=f.length){var b=f[0].activeElem;for(b&&b.classList.remove("wptb-directlyhovered");0!=f.length;){f[0].parentNode.removeChild(f[0])}}1==g&&(b=document.createElement("span"),g=document.createElement("span"),(f=document.createElement("div")).classList.add("wptb-actions"),b.classList.add("dashicons","dashicons-trash","wptb-delete-action"),g.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),f.appendChild(g),f.appendChild(b),d.appendChild(f),f.activeElem=c,f.type=1,b.onclick=function(h){var i=h.target.parentNode.activeElem,h=i.parentNode;i.className.match(/wptb-element-(.+)-(\d+)/i),i&&h.removeChild(i),i&&"object"===_typeof(i)&&i.hasOwnProperty("kind")&&"text"==i.kind&&(h=h.parentNode,!WPTB_Helper.rowIsTop(h)||(h=WPTB_Helper.findAncestor(h,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(h)),(new e).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.wptbDocumentEventGenerate("element:removed:dom",document,i)},g.onclick=function(i){var l,h,j=i.target.parentNode.activeElem,k=j.parentNode,i=j.className.match(/wptb-element-(.+)-(\d+)/i);i&&Array.isArray(i)?(i=i[1],(l={}).kind=i,l.elemProt=j,l.tinyMceClear=!0,(l=new WPTB_ElementObject(l)).getDOMElement().classList.remove("edit-active"),k.insertBefore(l.getDOMElement(),j.nextSibling)):(l={},(h=j.cloneNode(!0)).classList.remove("wptb-directlyhovered"),l.getDOMElement=function(){return h},applyGenericItemSettings(l),k.insertBefore(l.getDOMElement(),j.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",j,l.getDOMElement())),WPTB_innerElementSet(l.getDOMElement()),(new e).setParameters(j),(new WPTB_TableStateSaveManager).tableStateSet()},c.classList.contains("wptb-ph-element")&&((c=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),c.draggable=!0,f.appendChild(c),c.ondragstart=function(k){var p,i=wp.template("wptb-element-icons-directories")({}),j=JSON.parse(i),m=k.target.parentNode.activeElem,h=m.className.match(/wptb-element-(.+)-(\d+)/i);h&&Array.isArray(h)?(i=h[1],m.classList.add("wptb-moving-mode"),j&&"object"===_typeof(j)&&j[i]&&(p=WPTB_Helper.getElementIcon(j[i])),k.dataTransfer.effectAllowed="move",k.dataTransfer.setDragImage(p,0,0),k.dataTransfer.setData("node","wptb-element-"+h[1]+"-"+h[2]),k.dataTransfer.setData("wptb-moving-mode","wptb-element-"+h[1]+"-"+h[2]),k.dataTransfer.setData("wptbElIndic-"+h[1],"wptbElIndic-"+h[1]),"text"==(k=k.target.parentNode.activeElem).kind&&(k=k.parentNode.parentNode,!WPTB_Helper.rowIsTop(k)||(k=WPTB_Helper.findAncestor(k,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(k))):a.style.display="none",a.actionsHide()},c.ondragend=function(h){WPTB_Helper.elementDragEndClear()}),f.style.display="flex",a.wptbActions=f),WPTB_Helper.wptbDocumentEventGenerate("wptb:actionfield:generated",document)},this.setParameters=function(c){var d,b;a.wptbActions||(0<(b=document.getElementsByClassName("wptb-actions")).length?a.wptbActions=b[0]:a.wptbActions=!1),a.wptbActions&&a.wptbActions.classList.contains("wptb-actions")&&(a.wptbActions.style.display="flex",d=c.getBoundingClientRect(),b=document.getElementsByClassName("wptb-container")[0],a.wptbActions.style.top=parseFloat(d.top)-15+"px",a.wptbActions.style.left=parseFloat(d.right)-parseFloat(a.wptbActions.clientWidth)+1+"px",a.wptbActions.style.display="flex",c.classList.add("wptb-directlyhovered"),b.onscroll=function(){var f=c.getBoundingClientRect();a.wptbActions.style.top=parseFloat(f.top)-15+"px"})},this.leaveFromField=function(f,b,c){var d;if(a.wptbActions||(0<(d=document.getElementsByClassName("wptb-actions")).length?a.wptbActions=d[0]:a.wptbActions=!1),a.wptbActions){if(f.relatedTarget&&(f.relatedTarget.classList.contains("wptb-actions")||f.relatedTarget.classList.contains("wptb-move-action")||f.relatedTarget.classList.contains("wptb-duplicate-action")||f.relatedTarget.classList.contains("wptb-delete-action")||f.relatedTarget.classList.contains("wptb-prebuilt-mark-action"))){return a.wptbActions||(a.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void (a.wptbActions.onmouseleave=function(g){null!=g.relatedTarget&&(g.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(g.relatedTarget,"wptb-ph-element"))&&g.relatedTarget!=a.wptbActions.activeElem&&(WPTB_Helper.findAncestor(g.relatedTarget,"wptb-directlyhovered"),a.wptbActions.activeElem),(new e).leaveFromField(g,g.relatedTarget.parentNode.parentNode),g.target.activeElem.classList.remove("wptb-directlyhovered")})}b.classList.remove("wptb-directlyhovered"),a.wptbActions.style.display="none",f.relatedTarget&&(f.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(f.relatedTarget,"wptb-ph-element"))&&(a.addActionField(1,f.relatedTarget.parentNode),a.setParameters(f.relatedTarget.parentNode))}},this.actionsRemove=function(){var b;a.wptbActions||0<(b=document.getElementsByClassName("wptb-actions")).length&&(a.wptbActions=b[0]),a.wptbActions&&a.wptbActions.parentNode.removeChild(a.wptbActions)},this.actionsHide=function(){var b;a.wptbActions||0<(b=document.getElementsByClassName("wptb-actions")).length&&(a.wptbActions=b[0]),a.wptbActions&&(a.wptbActions.style.opacity=0)}};!function(a){(self||global).WPTB_BackgroundMenu=a()}(function(){var a=new function(){function H(){return document.querySelector(".wptb-table-setup .wptb-preview-table")}function q(){return document.querySelector(".wptb-bg-color-selectors")}function B(){Array.from(H().querySelectorAll("td")).map(function(b){b.classList.remove("wptb-highlighted")})}function L(d){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1],b=d.nodeName.toLowerCase();c||B(),(d="td"!==b?d.parentNode:d).classList.add("wptb-highlighted")}function x(c){c.preventDefault(),c.stopPropagation();var b=c.target.nodeName.toLowerCase(),d=c.target;"td"!==b&&(d=c.target.parentNode),L(d),j.commit("setMenuSelectedTableElement",{type:j.state.types.selected.cell,item:d})}function A(){return document.querySelector(".wptb-col-selection")}function D(){return document.querySelector(".wptb-row-selection")}function E(b){j.commit("updateHoveredRowElement",b.target)}function v(c){var b=c.target,c=Array.from(b.parentNode.querySelectorAll("td")).reduce(function(f,g,d){return g===b?d:f},-1);j.commit("updateHoveredCellElement",{element:b,index:c})}function J(c){var d="number"==typeof c?c:Number.parseInt(c,10),b=[];return isNaN(d)||Array.from(H().querySelectorAll("tr")).map(function(f){f=Array.from(f.querySelectorAll("td")).splice(d,1),f=_slicedToArray(f,1)[0],f&&b.push(f)}),b}function I(){var b=document.createElement("div");return b.classList.add("wptb-bg-rail-mark"),b}function z(){var c=(b=H().getBoundingClientRect()).width,g=b.height,b=(f=document.querySelector(".wptb-bg-color-selectors .wptb-bg-column-rail")).getBoundingClientRect().height;f.style.top="-".concat(b,"px"),f.style.width="".concat(c,"px"),function(i){Array.from(i.querySelectorAll(".wptb-bg-rail-mark")).map(function(m){m.remove()});var l=H(),l=Array.from(l.querySelectorAll("tr")).reduce(function(o,m){if(null===o){return m}var p=m.querySelectorAll("td").length;return o.querySelectorAll("td").length<p?m:o},null);Array.from(l.querySelectorAll("td")).map(function(m){return m=m.getBoundingClientRect(),{cellX:m.x,cellWidth:m.width}}).map(function(o,p){var m=I();m.style.width="".concat(o.cellWidth,"px"),m.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),j.commit("updateHoveredCellElement",{element:null,index:p})}),i.appendChild(m)})}(f);var d,f=(c=document.querySelector(".wptb-bg-color-selectors .wptb-bg-row-rail")).getBoundingClientRect().width;c.style.left="-".concat(f,"px"),c.style.height="".concat(g,"px"),d=c,Array.from(d.querySelectorAll(".wptb-bg-rail-mark")).map(function(i){i.remove()}),Array.from(H().querySelectorAll("tr")).map(function(l){var i=l.getBoundingClientRect();return{element:l,rowHeight:i.height}}).map(function(l){var i=I();i.style.height="".concat(l.rowHeight,"px"),i.addEventListener("click",function(m){m.preventDefault(),m.stopPropagation(),j.commit("updateHoveredRowElement",l.element)}),d.appendChild(i)})}function k(){var d=document.createElement("div");d.classList.add("wptb-bg-color-selectors");var b=document.createElement("div");b.classList.add("wptb-bg-row-rail");var g=document.createElement("div");g.classList.add("wptb-row-selection","wptb-bg-selection-item"),g.title="Select row",WPTB_IconManager.getIcon("arrow-alt-circle-right","wptb-selector-icon-wrapper").then(function(i){g.appendChild(i)});var c=document.createElement("div");c.classList.add("wptb-bg-column-rail");var f=document.createElement("div");f.classList.add("wptb-col-selection","wptb-bg-selection-item"),f.title="Select column",WPTB_IconManager.getIcon("arrow-alt-circle-down","wptb-selector-icon-wrapper").then(function(i){f.appendChild(i)}),f.addEventListener("click",function(l){var i;l.preventDefault(),l.stopPropagation(),null!==(i=j.getters.hoveredCell.index)&&(i=(l=_toArray(J(i)))[0],l=l.slice(1),L(i),l.map(function(m){L(m,!0)}),j.commit("setMenuSelectedTableElement",{type:j.getters.types.selected.column,item:[i].concat(_toConsumableArray(l))}))}),b.appendChild(g),c.appendChild(f),d.appendChild(c),d.appendChild(b),document.querySelector(".wptb-builder-content .wptb-table-setup").appendChild(d)}function C(){D().addEventListener("click",function(c){var b,d;c.preventDefault(),c.stopPropagation(),(d=j.getters.hoveredRow)&&(c=(b=_toArray(Array.from(d.querySelectorAll("td"))))[0],b=b.slice(1),L(c),b.map(function(f){L(f,!0)}),j.commit("setMenuSelectedTableElement",{type:j.getters.types.selected.row,item:d}))}),Array.from(H().querySelectorAll("tr")).map(function(b){b.addEventListener("mouseenter",E)})}function K(){var b=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];q()&&(q().dataset.visible=b)}function F(){Array.from(H().querySelectorAll("td")).map(function(b){b.removeEventListener("click",x),b.removeEventListener("mouseenter",v)}),A().classList.remove("wptb-bg-selection-visible"),Array.from(H().querySelectorAll("tr")).map(function(b){b.removeEventListener("mouseenter",E)}),j.commit("updateHoveredRowElement",null),B(),j.dispatch("clearSelection"),j.dispatch("clearHoverStates")}function h(b){b.subscribe(function(m){var f,o,c,l,d=m.type,g=m.payload;switch(d){case"updateHoveredRowElement":g&&(f=g,o=document.querySelector(".wptb-table-setup").getBoundingClientRect().y,c=f.getBoundingClientRect(),l=c.height,f=c.y,(c=D()).classList.add("wptb-bg-selection-visible"),c.style.height="".concat(l,"px"),c.style.top="".concat(f-o,"px"));break;case"updateHoveredCellElement":l=g.index,0<(c=J(l)).length&&(f=A(),o=c.reduce(function(n,i){return n.offsetWidth>i.offsetWidth?i:n},c[0]),l=document.querySelector(".wptb-table-setup").getBoundingClientRect().x,o=(c=o.getBoundingClientRect()).width,c=c.x,f.classList.add("wptb-bg-selection-visible"),f.style.left="".concat(c-l,"px"),f.style.width="".concat(o,"px"))}})}var G=this;this.initialized=!1;var j=null;this.applyOptions=function(){var c,g,b,d,f=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||{row:{headerBg:(g=H()).dataset.wptbHeaderBackgroundColor,evenBg:g.dataset.wptbEvenRowBackgroundColor,oddBg:g.dataset.wptbOddRowBackgroundColor}};g=(c=f.row).headerBg,b=c.evenBg,d=c.oddBg,f=H(),f=(c=_toArray(Array.from(f.querySelectorAll("tr"))))[0],c=c.slice(1),f=f,""===(g=g)||null===g?f.style.removeProperty("background-color"):f.style.backgroundColor=g,c.map(function(l,i){var p=["",null,void 0],m=l.dataset.wptbBgColor,p=!p.includes(m);l.style.backgroundColor=p?m:i%2==0?b:d})},this.init=function(){document.addEventListener("wptbSectionChanged",function(c){var b=c.detail;G.initialized||"background_menu"!==b||(WPTB_ControlsManager.callControlScript("BackgroundMenu","wptb-background-menu"),G.initialized=!0),"background_menu"!==WPTB_Helper.getPreviousSection()&&"background_menu"===b&&(q()||k(),K(!0),WPTB_Store.get("proStatus")&&Array.from(H().querySelectorAll("td")).map(function(d){d.addEventListener("click",x),d.addEventListener("mouseenter",v)}),C(),c=H(),Array.from(c.querySelectorAll(".edit-active")).map(function(d){d.classList.remove("edit-active")}),(c=document.querySelector(".wptb-actions"))&&(c.style.display="none"),z(),j.commit("updateHoveredCellElement",{element:null,index:0}),j.commit("updateHoveredRowElement",H().querySelector("tr"))),"background_menu"===WPTB_Helper.getPreviousSection()&&"background_menu"!==b&&(K(!1),F())}),document.addEventListener("wp-table-builder/table-changed/after",function(){G.applyOptions()})},this.addStore=function(b){j||h(j=b)}};return a.init(),a}),function(){var a=window.location.href;new RegExp("[?&]page=wptb-builder").exec(a)&&document.addEventListener("DOMContentLoaded",function(){var c,b,d=WPTB_Helper.detectMode();d?(c=new XMLHttpRequest,b=ajaxurl+"?action=get_table&id="+d,c.open("GET",b,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(g){var f,h;4==this.readyState&&200==this.status&&(h=JSON.parse(c.responseText),document.getElementById("wptb-setup-name").value=h[0],h[1]?((f=document.getElementsByClassName("wptb-table-setup")[0]).appendChild(WPTB_Parser(h[1])),document.getElementsByTagName("body")[0],WPTB_Table(),(h=document.querySelector(".wptb-preview-table"))&&(h.className.match(/wptb-element-((.+-)\d+)/i)||h.classList.add("wptb-element-main-table_setting-"+d),h.dataset.wptbTableContainerMaxWidth&&(f.style.maxWidth=h.dataset.wptbTableContainerMaxWidth+"px",h.tdDefaultWidth())),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()):document.getElementsByClassName("wptb-table-generator")[0].style.display="table")},c.send(null)):(new WPTB_TableStateSaveManager).tableStateSet(),document.counter=new ElementCounters,document.select=new MultipleSelect,WPTB_Initializer(),settings=WPTB_Settings()})}();var WPTB_Cell=function(f,c){function h(i){d[i].getDOMElement=function(){return d[i]},WPTB_innerElementSet(d[i]);var a=d[i].className.match(/wptb-element-((.+-)\d+)/i);a&&Array.isArray(a)&&function(){var l=a[1].split("-");d[i].kind=l[0],applyGenericItemSettings(d[i],a[1]);var j=d[i].getElementsByClassName("wptb-in-element");if(0<j.length){for(var k=0;k<j.length;k++){!function(n){var m={getDOMElement:function(){return j[n]}};applyGenericItemSettings(m)}(k)}}}()}var b;c||((c=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px",""!=(b=jQuery("#wptb-table-inner-border-number").val())&&0!=parseInt(b)&&(c.style.border=b+"px solid "+jQuery("#wptb-table-border-color").val()),c.classList.add("wptb-droppable","wptb-cell"),b=(b=WPTB_Helper.newElementProxy("text")).getDOMElement(),c.appendChild(b)),c.draggable=!1,f&&(c.onclick=f),c.ondblclick=function(a){a.stopPropagation();var i=document.querySelector(".wptb-table-setup");!i||i.classList.contains("wptb-preview-table-manage-cells")||"0"===a.target.dataset.yIndex&&"1"===i.dataset.wptbSortableTable||a.target!=a.currentTarget||(WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",a.target),a=(a=WPTB_Helper.newElementProxy("text")).getDOMElement(),c.appendChild(a),WPTB_innerElementSet(a))},WPTB_innerElementSet(c),WPTB_Helper.elementStartScript(c,"table_cell_setting");var d=c.getElementsByClassName("wptb-ph-element");if(0<d.length){for(var g=0;g<d.length;g++){h(g)}}return this.getDOMElement=function(){return c},this.setCoords=function(i,a){var j=this.getDOMElement();j.dataset.yIndex=i,j.dataset.xIndex=a},this.getCoords=function(){var i,a=this.getDOMElement();return i.x=a.dataset.xIndex,i.y=a.dataset.yIndex,i},this.appendElement=function(a){getDOMElement().appendChild(a)},c.getCellDimensions=function(){var w=window.getComputedStyle(this,null),A=w.getPropertyValue("padding-left"),q=w.getPropertyValue("padding-right"),z=w.getPropertyValue("border-left-width"),j=w.getPropertyValue("border-right-width"),m=w.getPropertyValue("padding-top"),u=w.getPropertyValue("padding-bottom"),v=w.getPropertyValue("border-top-width"),B=w.getPropertyValue("border-bottom-width"),y=parseInt(this.offsetWidth,10)-parseInt(A,10)-parseInt(q,10),x=parseInt(this.offsetHeight,10)-parseInt(m,10)-parseInt(u,10),k=WPTB_Helper.findAncestor(this,"wptb-preview-table");return k&&("collapse"===k.style.borderCollapse?(y=y-parseInt(z,10)/2-parseInt(j,10)/2,x=x-parseInt(v,10)/2-parseInt(B,10)/2,A=(w=window.getComputedStyle(k,null)).getPropertyValue("border-left-width"),q=w.getPropertyValue("border-right-width"),m=w.getPropertyValue("border-top-width"),u=w.getPropertyValue("border-bottom-width"),(w=this.parentNode)&&"tr"===w.nodeName.toLowerCase()&&(w.firstChild&&w.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(A,10)>parseInt(z,10)&&(y+=-(parseInt(A,10)-parseInt(z,10))/2),w.lastChild&&w.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(q,10)>parseInt(j,10)&&(y+=-(parseInt(q,10)-parseInt(j,10))/2),(w=w.parentNode)&&"body"===w.nodeName.toLowerCase()&&(w.firstChild&&w.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(m,10)>parseInt(v,10)&&(x+=(parseInt(m,10)-parseInt(v,10))/2),w.lastChild&&w.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(u,10)>parseInt(B,10)&&(x+=(parseInt(u,10)-parseInt(B,10))/2)))):"separate"===k.style.borderCollapse&&(y=y-parseInt(z,10)-parseInt(j,10),x=x-parseInt(v,10)-parseInt(B,10))),{width:parseInt(y),height:parseInt(x)}},this},WPTB_CutGlueTable={cutTableHorizontally:function(j,p){if(p&&p.rows[j]){for(var f=0;j>f;f++){for(var m=p.rows[f].children,b=0;b<m.length;b++){if(1<m[b].rowSpan&&m[b].rowSpan>j-f){var d=m[b].rowSpan-j+f;m[b].rowSpan=j-f,m[b].dataset.sameCellBeforeDivision||(m[b].dataset.sameCellBeforeDivision="r"+f+"c"+b);var g=void 0,g=p.hasOwnProperty("wptbCell")?(g=new p.wptbCell(p.mark)).getDOMElement():document.createElement("td"),h=m[b].getAttribute("style");g.setAttribute("style",h),g.colSpan=m[b].colSpan,g.rowSpan=d,g.dataset.sameCellBeforeDivision=m[b].dataset.sameCellBeforeDivision;for(var d=m[b].dataset.xIndex,q=parseInt(d)+parseInt(m[b].colSpan),k=void 0;!k&&q<p.maxCols;){k=p.rows[j].querySelector('[data-x-index="'+q+'"]'),q++}p.rows[j].insertBefore(g,k),WPTB_RecalculateIndexes(p)}}}}},glueTableHorizontally:function(h){if(h){for(var f=_toConsumableArray(h.getElementsByTagName("td")),k=0;k<f.length;k++){if(f[k].hasAttribute("data-same-cell-before-division")){for(var c=f[k].dataset.sameCellBeforeDivision,g=h.querySelectorAll('[data-same-cell-before-division="'+c+'"]'),j=0;j<g.length;j++){if(g[j]&&g[j+1]&&g[j].parentNode&&g[j+1].parentNode&&!g[j].parentNode.classList.contains("wptb-row-moving")&&!g[j+1].parentNode.classList.contains("wptb-row-moving")&&g[j+1].dataset.yIndex==parseInt(g[j].dataset.yIndex)+parseInt(g[j].rowSpan)){g[j].rowSpan+=g[j+1].rowSpan;for(var b=_toConsumableArray(g[j+1].children),d=0;d<b.length;d++){g[j].appendChild(b[d])}g[j+1].parentNode.removeChild(g[j+1])}}}}WPTB_RecalculateIndexes(h)}},cutTableVertically:function(m,w){for(var h=0;h<w.rows.length;h++){if(m<w.maxCols&&0!=m&&!w.rows[h].querySelector('[data-x-index="'+m+'"]')){for(var v,b,g,j=w.rows[h].children,k=void 0,x=j.length,u=void 0,q=0;x>q;q++){if(1<j[q].colSpan&&parseInt(j[q].dataset.xIndex)<m&&parseInt(j[q].dataset.xIndex)+parseInt(j[q].colSpan)>m){k=w.hasOwnProperty("wptbCell")?(k=new w.wptbCell(w.mark)).getDOMElement():document.createElement("td"),v=j[q].rowSpan,b=j[q].colSpan,j[q].colSpan=m-j[q].dataset.xIndex,g=b-j[q].colSpan,j[q].dataset.sameCellBeforeDivision||(j[q].dataset.sameCellBeforeDivision="r"+h+"c"+q);var f=j[q].getAttribute("style");k.setAttribute("style",f),f=w.querySelector('[data-x-index="'+m+'"]'),f&&(k.style.width=f.style.width),f=w.querySelector('[data-y-index="'+h+'"]'),f&&(k.style.height=f.style.height),u=j[q+1]||null,w.rows[h].insertBefore(k,u),k.colSpan=g,k.rowSpan=v,k.dataset.sameCellBeforeDivision=j[q].dataset.sameCellBeforeDivision,h+=v-1;break}}}WPTB_RecalculateIndexes(w)}},glueTableVertically:function(h){if(h){for(var k=_toConsumableArray(h.getElementsByTagName("td")),d=0;d<k.length;d++){if(k[d].hasAttribute("data-same-cell-before-division")){for(var j=k[d].dataset.sameCellBeforeDivision,b=_toConsumableArray(h.querySelectorAll('[data-same-cell-before-division="'+j+'"]')),c=null,f=0;f<b.length;f++){if(b[f]&&b[f+1]&&!b[f].classList.contains("wptb-column-moving")&&!b[f+1].classList.contains("wptb-column-moving")&&b[f+1].dataset.xIndex==parseInt(b[f].dataset.xIndex)+parseInt(b[f].colSpan)){b[c=null==c?f:c].colSpan+=b[f+1].colSpan;for(var g=_toConsumableArray(b[f+1].children),m=0;m<g.length;m++){b[c].appendChild(g[m])}b[f+1].parentNode.removeChild(b[f+1])}}}}WPTB_RecalculateIndexes(h)}}},WPTB_DropHandle=function(M,A){function F(a){return"".concat(a,"px")}var Q,C,E,H,I,B,O=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("td_relative"===WPTB_Helper.getDragRelativeType()){var N=document.querySelector(".wptb-cell-related-drop-handle");if(O&&N){return void (N.style.display="none")}null===N&&((z=document.createRange()).setStart(document.body,0),G=z.createContextualFragment('<div class="wptb-cell-related-drop-handle">Add to cell</div>').children[0],document.body.appendChild(G),N=G.children[0]);var D=WPTB_Helper.getParentOfType("td",M).getBoundingClientRect(),O=D.top,z=D.left,G=D.width,D=D.height;return N?(N.style.display="flex",N.style.top=F(O),N.style.width=F(G),N.style.height=F(D),void (N.style.left=F(z))):void 0}if(0==document.getElementsByClassName("wptb-drop-handle").length?((Q=document.createElement("div")).classList.add("wptb-drop-handle"),(C=document.createElement("div")).classList.add("wptb-drop-border-marker"),E=document.createElement("div"),H=document.createElement("div"),I=document.createElement("div"),B=document.createElement("div"),E.classList.add("wptb-drop-border-marker-top"),H.classList.add("wptb-drop-border-marker-right"),I.classList.add("wptb-drop-border-marker-bottom"),B.classList.add("wptb-drop-border-marker-left"),C.appendChild(E),C.appendChild(H),C.appendChild(I),C.appendChild(B),0<(x=document.getElementsByTagName("body")).length&&(x[0].appendChild(Q),x[0].appendChild(C)),Q.ondragenter=function(){return A.target.classList.contains("wptb-empty")?(A.preventDefault(),!1):void 0},Q.ondragover=function(a){a.preventDefault()},Q.ondragleave=function(){},Q.ondrop=function(a){var c;a.preventDefault(),a.dataTransfer.getData("wptbElement")?c=(c=WPTB_Helper.newElementProxy(a.dataTransfer.getData("wptbElement"))).getDOMElement():((c=document.getElementsByClassName(a.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),c.classList.remove("wptb-moving-into-same-elem"),c.wptbMovingMode=1),"Drop Here"==Q.dataset.text?"td"==(M=Q.getDOMParentElement()).nodeName.toLowerCase()&&((b=Q.getDOMParentElement()).appendChild(c),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",c)):(b=(a=Q.getDOMParentElement()).parentNode,"Above Element"==Q.dataset.text?(b.insertBefore(c,a),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",c)):"Below Element"==Q.dataset.text&&(a=a.nextSibling,b.insertBefore(c,a),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",c)));var b=b.parentNode;!WPTB_Helper.rowIsTop(b)||(b=WPTB_Helper.findAncestor(b,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(b),Q.style.display="none",C.style.display="none",WPTB_innerElementSet(c),c.classList.contains("wptb-image-container")&&1!=c.wptbMovingMode||((new WPTB_TableStateSaveManager).tableStateSet(),c.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){Q.style.display="none",C.style.display="none"}):(Q=document.getElementsByClassName("wptb-drop-handle")[0],C=document.getElementsByClassName("wptb-drop-border-marker")[0]),!(M&&"td"==M.nodeName.toLowerCase()&&0!=M.getElementsByClassName("wptb-ph-element").length||M&&"td"==M.nodeName.toLowerCase()&&M.classList.contains("wptb-empty"))){if("td"==M.localName?j=M.parentNode:"div"==M.localName&&M.classList.contains("wptb-ph-element")&&(j=M.parentNode.parentNode),WPTB_Helper.rowIsTop(j)&&WPTB_Helper.findAncestor(j,"wptb-preview-table").classList.contains("wptb-table-preview-head")){for(var P=A.dataTransfer.types,K=!1,k=0;k<P.length;k++){var L=P[k].match(/wptbelindic-([a-z]+)/i);if(L&&"text"!=L[1]){K=!0;break}}if(K){return}}Q.style.width=M.offsetWidth+"px";var q,J,z=M.offsetHeight,x=M.getBoundingClientRect(),j=parseFloat(x.left);Q.style.left=j+"px",-1!=A.dataTransfer.types.indexOf("wptb-moving-mode")&&(q=document.getElementsByClassName("wptb-moving-mode")[0],M==q?(Q.classList.add("wptb-moving-into-same-elem"),C.classList.add("wptb-moving-into-same-elem")):(Q.classList.remove("wptb-moving-into-same-elem"),C.classList.remove("wptb-moving-into-same-elem"))),Q.getDOMParentElement=function(){return M},Q.style.display="block",C.style.display="block","td"!=M.nodeName.toLowerCase()?(q=null==A.offsetY?A.layerY:A.offsetY,J=parseFloat(x.top)-parseFloat(11),Q.dataset.text="Above Element",q>z/2&&(J=parseFloat(x.top)+z-1,Q.dataset.text="Below Element")):(Q.dataset.text="Drop Here",J=parseFloat(x.top)+z/2-5),Q.style.top=J+"px",C.style.top=x.top+"px",C.style.left=x.left+"px",(E=C.querySelector(".wptb-drop-border-marker-top")).style.width=parseFloat(M.offsetWidth)-parseFloat(1)+"px",(H=C.querySelector(".wptb-drop-border-marker-right")).style.height=parseFloat(x.bottom)-parseFloat(x.top)-1+"px",H.style.left=E.style.width,(I=C.querySelector(".wptb-drop-border-marker-bottom")).style.width=E.style.width,I.style.top=H.style.height,(B=C.querySelector(".wptb-drop-border-marker-left")).style.height=H.style.height}},ElementCounters=function(){var a=[];return a.text=0,a.image=0,a.list=0,a.button=0,this.increment=function(b){b in a&&a[b]++},this.nextIndex=function(b){return b in a?a[b]+1:void 0},this};!function(a){(self||global).WPTB_ElementIdProvider=a()}(function(){return new function(){var a={};this.getNewId=function(c){var f,b,d;return void 0===a[c]&&(a[c]=(f=c,b=Array.from(document.querySelectorAll(".wptb-ph-element")),d=new RegExp("wptb-element-".concat(f,"-(\\d+)"),"i"),b.reduce(function(h,g){return g=d.exec(g.className),null!==g&&void 0!==g[1]?Math.max(h,Number.parseInt(g[1],10)):h},0))),++a[c]}}});var WPTB_ElementObject=function(g){var d,i,c,f;g.elemProt?((d=g.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered"),(f=g.elemProt.className.match(/wptb-element-((.+-)\d+)/i))&&Array.isArray(f)&&(i=f[1]),c=!0,g.tinyMceClear&&(d=WPTB_Helper.elementClearFromTinyMce(d))):(i=void 0,c=!1,(d=document.createElement("div")).classList.add("wptb-"+g.kind+"-container","wptb-ph-element"),f="wptb-"+g.kind+"-content",f=wp.template(f),g.node=d,f=(f=f(g)).replace(/\r|\n|\t/g,"").trim(),d.innerHTML=f);var h=d.querySelectorAll(".wptb-in-element");if(0<h.length){for(var b=0;b<h.length;b++){!function(j){var a={getDOMElement:function(){return h[j]}};applyGenericItemSettings(a)}(b)}}return window.addEventListener("item:onmouseenter",function(a){},!1),this.kind=g.kind,this.getDOMElement=function(){return d},applyGenericItemSettings(this,i,c),this},WPTB_ElementOptions=function(b,a,c){b.getDOMElement().addEventListener("click",function(){WPTB_Helper.elementOptionsSet(b.kind,this)},{capture:!0})};!function(b,a,c){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=c():a[b]=c()}("WPTB_ExtraStyles",self||global,function(){return new function(){function f(i,a){var a=a.replaceAll(/(\r?\n)|(\/\*.+?\*\/)|(\s*!important)/g,"").replaceAll(";"," !important;").split("}"),j=[];return a.map(function(l){var k=new RegExp(/(.+?)\{/g).exec(l);k&&j.push(l.replace(k[1],"".concat(i," ").concat(k[1])))}),"".concat(j.join("}"),"}")}function c(j){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=document.createElement("style");i.type="text/css",i.id="wptb-general-styles",k?k.insertAdjacentElement("beforebegin",i):(d.currentMode===d.modes.block?d.baseDocument:d.baseDocument.querySelector("head")).appendChild(i),k=f(j.parentPrefix,j.styles),i.appendChild(document.createTextNode(k))}function h(r){var k,q,j,m,p=r.dataset.wptbExtraStyles;p&&(m=atob(p),q=r.getAttribute("class").match(/wptb-element-main-table_setting-(?:startedid-)?(\d+)/),k="wptb-extra-styles-"+(j=_slicedToArray(q,2)[1]),(q=null==(p=d.baseDocument.querySelector("head"))?void 0:p.querySelector("#".concat(k)))||((q=document.createElement("style")).type="text/css",q.id=k,r.dataset.disableThemeStyles&&d.currentMode===d.modes.frontEnd||d.currentMode===d.modes.block?(r.insertAdjacentElement("beforebegin",q),d.currentMode===d.modes.frontEnd&&d.generalStyles&&c(d.generalStyles,r)):p.appendChild(q)),j=".wptb-element-main-table_setting-".concat(j),m=f(j,m),q.innerHTML="",q.appendChild(document.createTextNode(m)))}var b,d=this;this.modes={builder:"builder",frontEnd:"frontEnd",block:"block"},this.baseDocument=document,this.currentMode=this.modes.builder,this.generalStyles="";var g=(_defineProperty(b={},this.modes.builder,".wptb-table-setup .wptb-preview-table"),_defineProperty(b,this.modes.block,".wptb-block-table-setup .wptb-preview-table"),_defineProperty(b,this.modes.frontEnd,".wptb-table-container .wptb-preview-table"),b);this.applyStyles=function(){var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:d.modes.frontEnd,j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;d.baseDocument=i,d.currentMode=k,d.generalStyles=j,i=Array.from(d.baseDocument.querySelectorAll(g[k])),i&&i.map(h),k!==d.modes.frontEnd&&k!==d.modes.block||!j||c(j)}}});var WPTB_GetDirectionAfterReconstruction=function(h,k,d,j,b){var c=0,f=h.maxCols,g={},m=[];return b&&b.getDirective(h)?g["switch"]=function(l){var n=b.getDirective(h),o="desktop";return l&&l.detail&&(o=l.detail.sizeRangeId),m=[k,1],"desktop"!==o?n.hasOwnProperty("modeOptions")&&(l=n.responsiveMode,(l=n.modeOptions[l]).hasOwnProperty("topRowAsHeader")&&l.topRowAsHeader.hasOwnProperty(o)&&l.topRowAsHeader[o]?l.hasOwnProperty("cellStackDirection")&&l.cellStackDirection.hasOwnProperty(o)&&("row"===l.cellStackDirection[o]?(m=[d,2],c=f-1):"column"===l.cellStackDirection[o]&&l.hasOwnProperty("cellsPerRow")&&(c=l.cellsPerRow[o])):c=0):c=0,{type:m,itemsPerHeader:c}}:g["switch"]=function(l){if(m=[k,1],h.classList.contains("wptb-mobile-view-active")){h.classList.contains("wptb-table-preview-head")&&(m=[d,2])===j&&(c=f-1);var a=h.parentNode.parentNode.querySelector(".wptb-preview-table-mobile");return{type:m,itemsPerHeader:c,newTable:a}}return{type:m,itemsPerHeader:c}},g},WPTB_HeaderToolbox=function(b){function a(){var f=0<arguments.length&&void 0!==arguments[0]&&arguments[0],d=c.element.getBoundingClientRect().height;f&&(d=0),c.element.style.top="calc( 100% - ".concat(d+c.topMargin,"px)")}var c=this;return this.wrapperQuery=b,this.element=document.querySelector(b),this.topMargin=2,{init:function(){Array.from(c.element.querySelectorAll("[data-button-type]")).map(function(d){d.addEventListener("click",function(f){f.preventDefault(),f.stopPropagation(),WPTB_Helper.activateSection(f.target.dataset.buttonType)})}),document.addEventListener("wptb:table:generated",function(){c.element.style.display="flex";var f=c.element.getBoundingClientRect().width;c.element.style.left="calc( 50% - ".concat(f/2,"px)");var d=["table_responsive_menu","manage_cells","cell_settings"];document.addEventListener("wptbSectionChanged",function(g){g=g.detail,a(!d.includes(g))}),f=WPTB_Helper.currentSection,a(!d.includes(f))})}}},WPTB_Helper={hexToRgb:function(a){return a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),a?"rgb(".concat(parseInt(a[1],16),",").concat(parseInt(a[2],16),",").concat(parseInt(a[3],16),")"):null},rgbToHex:function(b){if(b){if(WPTB_Helper.isHex(b)){return b}var a=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?((?:[0-9]*[.])?[0-9]+)[\s+]?\)/i);return a&&5===a.length?"#".concat("0".concat(parseInt(a[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(a[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(a[3],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(Math.round(255*parseFloat(a[4],10)).toString(16).toUpperCase()).slice(-2)):(a=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#".concat("0".concat(parseInt(a[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(a[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(a[3],10).toString(16).toUpperCase()).slice(-2)):""}return""},isHex:function(a){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}(?:[0-9]?){1,2}$").test(a)},getElementIcon:function(b){"".concat(location.protocol,"//").concat(location.hostname);var a=document.createElement("img");return a.src=b,a},elementDragEndClear:function(){var f=document.getElementsByClassName("wptb-moving-mode");if(0<f.length){for(var c=0;c<f.length;c++){f[c].classList.remove("wptb-moving-mode")}}var h=document.getElementsByClassName("wptb-drop-handle");if(0<h.length){for(var b=0;b<h.length;b++){h[b].style.display="none"}}var d=document.getElementsByClassName("wptb-drop-border-marker");if(0<d.length){for(var g=0;g<d.length;g++){d[g].style.display="none"}}},linkHttpCheckChange:function(d){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(d){if(d.match(/^(javascript:)(.+)$/)){return d}if(d.match(/^\/([\S]+)$/)){if(c){var f=document.location.origin;return f.match(/^(.+)\/$/)&&(f=f.slice(-1)),"".concat(f).concat(d)}return d}if(-1!=d.indexOf("http://")||-1!=d.indexOf("https://")){return d}var b,f=d.split("/");return Array.isArray(f)&&0<f.length&&(b=f[f.length-1]),"".concat(document.location.protocol,"//").concat(b)}return""},dataTitleColumnSet:function(a){},findAncestor:function(b,a){for(;(b=b.parentElement)&&!b.classList.contains(a);){}return b},rowIsTop:function(a){return a.parentNode.children[0]==a},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var a=document.getElementById("element-options-group");a&&(a.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(a){"external"==a.originalEvent.type?(new WPTB_TableStateSaveManager).tableStateSet():WPTB_Helper.findAncestor(a.target,"wp-picker-container")&&("square"!=a.originalEvent.type&&"strip"!=a.originalEvent.type||((a=document.getElementsByTagName("body")[0]).removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),a.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)))},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(f,c){var h;c?(h=[document.getElementById(f)]).length=1:h=document.getElementsByClassName(f);for(var b=0;b<h.length;b++){var d,g=WPTB_Helper.findAncestor(h[b],"wp-picker-container");g&&((d=g.parentNode).removeChild(g),g=document.createElement("input"),c?g.setAttribute("id",f):g.classList.add("wptb-element-property",f),g.value="",d.appendChild(g))}},detectMode:function(){var a=window.location.href,a=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(a);return !!a&&(a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"")},getTableId:function(){return WPTB_Helper.detectMode()||"startedid-0"},getColumnWidth:function(f,c){for(var h=c.dataset.xIndex,b=f.querySelectorAll('[data-x-index="'.concat(h,'"]')),d=c.getCellDimensions().width,g=0;g<b.length;g++){d>b[g].getCellDimensions().width&&(d=b[g].getCellDimensions().width)}return d},getRowHeight:function(f,c){for(var h=c.dataset.yIndex,b=f.querySelectorAll('[data-y-index="'.concat(h,'"]')),d=c.getCellDimensions().height,g=0;g<b.length;g++){d>b[g].getCellDimensions().height&&(d=b[g].getCellDimensions().height)}return d},newElementProxy:function(a){return a?new WPTB_ElementObject({kind:a}):void 0},wpColorPickerChange:function(j,p){var f=p?p.color.toString():"",m=WPTB_Helper.findAncestor(j.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0],p=m.dataset.element.match(/wptb-options-(.+)-(\d+)/i),j=p[1],p=p[2],p=document.getElementsByClassName("wptb-element-".concat(j,"-").concat(p))[0];if("button"==j){"button-text-color"==m.dataset.type?p.getElementsByClassName("wptb-button")[0].style.color=f:p.getElementsByClassName("wptb-button")[0].style.backgroundColor=f}else{if("list"==j){var b=p.querySelectorAll("p");if(0<b.length){for(var d=0;d<b.length;d++){b[d].style.color=f}}}else{if("star_rating"==j){if("star-color"==m.dataset.type){for(var g=p.querySelectorAll("li"),h=0;h<g.length;h++){for(var q=g[h].getElementsByTagName("span"),k=0;k<q.length;k++){q[k].style.fill=f}}}else{"numeral-rating-color"==m.dataset.type&&(p.querySelector(".wptb-number-rating").style.color=f)}}else{p.style.color=f}}}},numberImputSize:function(b,a,c){b.onkeydown=function(){var d=this.value;0==(d=String(d))[0]?this.value="":(d=d.substring(0,a),this.value=d)},b.onkeyup=function(){var d=this.value;parseInt(d,10)>parseInt(c,10)&&(this.value=c),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},wptbDocumentEventGenerate:function(b,a,c){b&&a&&(c=c||!0,c=new CustomEvent(b,{detail:c,bubbles:!0}),a.dispatchEvent(c))},elementStartScript:function(b,a){var c;a||(c=b.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(c)&&(a=c[1]),a&&a in WPTB_ElementsScriptsLauncher&&(c=(c=b.getAttribute("class").match(/(wptb-element-\D+-\d+\b)/))?c[0]:null,WPTB_ElementsScriptsLauncher[a](b,c))},deleteEventHandlers:function(b){if(b){jQuery(b).off();var a=b.children;if(a){for(var c=0;c<a.length;c++){WPTB_Helper.deleteEventHandlers(a[c])}}}},replaceAll:function(b,a,c){return b.split(a).join(c)},elementClearFromTinyMce:function(m){var y=m.querySelectorAll(".mce-content-body");if(0<y.length){for(var h=0;h<y.length;h++){y[h].classList.remove("mce-content-body")}}var w=m.querySelectorAll("[data-mce-style]");if(0<w.length){for(var b=0;b<w.length;b++){w[b].removeAttribute("data-mce-style")}}var g=m.querySelectorAll(".mce-edit-focus");if(0<g.length){for(var j=0;j<g.length;j++){g[j].classList.remove("mce-edit-focus")}}var k=m.querySelectorAll("[contenteditable]");if(0<k.length){for(var z=0;z<k.length;z++){k[z].removeAttribute("contenteditable")}}var v=m.querySelectorAll("[spellcheck]");if(0<v.length){for(var q=0;q<v.length;q++){v[q].removeAttribute("spellcheck")}}var f=m.querySelectorAll("[id^=mce_]");if(0<f.length){for(var x=0;x<f.length;x++){f[x].removeAttribute("id")}}return m},elementOptionContainerCustomClassSet:function(b,a){b&&a&&(b=WPTB_Helper.findAncestor(b,"wptb-element-option"))&&b.classList.add(a)},elementOptionContainerAdditionalStyles:function(f,c){function h(i,a){i&&(containerStyleStrArr=i.split(":"),containerStyleStrArr&&Array.isArray(containerStyleStrArr)&&(a.style[containerStyleStrArr[0]]=containerStyleStrArr[1]))}if(f&&c){var b=WPTB_Helper.findAncestor(f,"wptb-element-option"),d=c.split(";");if(b&&d){if(d&&Array.isArray(d)){for(var g=0;g<d.length;g++){d[g]&&h(d[g],b)}}else{h(d,b)}}}},controlsInclude:function(b,a){var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];b&&"object"===_typeof(b)&&"function"==typeof a&&b.addEventListener("element:controls:active",function(){b.hasOwnProperty("controlConnectFunctionsName")&&Array.isArray(b.controlConnectFunctionsName)&&-1!=b.controlConnectFunctionsName.indexOf(a.name)||function(){var f,h=b.className.match(/wptb-element-(.+)-(\d+)/i);if(f=h&&Array.isArray(h)?h[1]:f){var j=b.optionsGroupIds;if(j&&Array.isArray(j)){for(var d=0;d<j.length;d++){var g=j[d],g=document.getElementById(g).querySelectorAll(".wptb-element-property");(g=_toConsumableArray(g)).map(function(n){var p,k=new RegExp("wptb-el-".concat(f,"-(\\d+)-([a-zA-Z0-9_-]+)"),"i"),m=n.className.match(k);m&&Array.isArray(m)&&(p=m[0],b.addEventListener("wptb-control:".concat(p),function(o){var u={},i=m[2],q=document.getElementsByClassName(p);0<q.length&&i&&(q=WPTB_Helper.targetControlValueGet(q),u[i]=c?{targetValue:q,eventValue:o.detail.value}:q),a(u,b)},!1))})}}b.controlConnectFunctionsName||Array.isArray(b.controlConnectFunctionsName)||(b.controlConnectFunctionsName=[]),b.controlConnectFunctionsName.push(a.name)}}()},!1)},oneControlInclude:function(f,c,h){if(!f||"object"!==_typeof(f)||"function"!=typeof c||"string"!=typeof h){return !1}var b,d,g=f.className.match(/wptb-element-((.+-)\d+)/i);g&&Array.isArray(g)&&(b=g[1].split("-")[0],b="wptb-".concat(b,"-control-stack"),b=wp.template(b)({container:".".concat(g[0])}),(b=JSON.parse(b))&&"object"===_typeof(b)&&b.hasOwnProperty(h)&&(d="wptb-el-".concat(g[1],"-").concat(h),f.addEventListener("wptb-control:".concat(d),function(j){var i=document.getElementsByClassName(d);0<i.length&&(i=WPTB_Helper.targetControlValueGet(i),c(i,f))},!1)))},innerElementCopyIncludeHandler:function(b,a){b&&"object"===_typeof(b)&&"function"==typeof a&&b.addEventListener("wptb-inner-element:copy",function(c){c=c.detail,c&&(WPTB_Helper.elementClearFromTinyMce(c),a(c,b))},!1)},valueDependOnControl:function(g,d,i,c,f){function h(u,w,m){"string"==typeof u&&(u=[u]);var v,j,k,p=w.match(/wptb-el-((.+-)\d+)-(.+)/i),q={},x=[];return p&&Array.isArray(p)&&(v=p[3],k={},Array.isArray(m)&&(Array.isArray(m[0])?m.map(function(a){k[a[0]]=[a[1],a[2]]}):k[m[0]]=[m[1],m[2]]),u.map(function(a){var l=w.replace(v,a);l&&0<(j=document.getElementsByClassName(l)).length&&j[0].type&&(q[a]=j[0].value,a in k&&("integer"===k[a][1]?q[a]=parseInt(q[a])+parseInt(k[a][0]):"string"===k[a][1]&&(q[a]=q[a]+k[a][0])),x.push(j[0]))})),[q,x]}var b=h(g,d,i);WPTB_Helper.elementOptionsSet(c,f,b[0],d),Object.keys(b[0]).forEach(function(a){var j=f.className.match(/wptb-element-((.+-)\d+)/i),a="wptb-el-".concat(j[1],"-").concat([a]);f.addEventListener("wptb-control:".concat(a),function(k){var m=h(g,d,i);WPTB_Helper.elementOptionsSet(c,f,m[0],d)},!1)})},appearDependOnControl:function(m,w){function h(i,d){var l,c="block";Object.keys(d).map(function(a){Object.prototype.hasOwnProperty.call(d,a)&&!1===d[a][0]&&(c="none",d[a][2][3]&&(l=d[a][2][3]))}),i.style.display!==c&&("none"===(i.style.display=c)&&l?(f[0].dataset.controlActiveVal=WPTB_Helper.targetControlValueGet(f),WPTB_Helper.targetControlValueGet(f,l)):"block"===c&&f[0].dataset.controlActiveVal&&WPTB_Helper.targetControlValueGet(f,f[0].dataset.controlActiveVal))}function v(z,s){for(var B=WPTB_Helper.targetControlValueGet(z),d=!1,y=1;2>=y;y++){if(s[y]&&Array.isArray(s[y])){for(var A=void 0,c=!1,p=0;p<s[y].length;p++){if("string"==typeof s[y][p]&&-1!==s[y][p].indexOf("numberAny >")){if(c=!0,!(parseInt(s[y][p].match(/\d+/))<B)){A=!1;break}A=!0}else{if("string"==typeof s[y][p]&&-1!==s[y][p].indexOf("numberAny <")){if(c=!0,!(B<parseInt(s[y][p].match(/\d+/)))){A=!1;break}A=!0}else{if(s[y][p]===B&&(A=!0,!c)){break}}}}if(A&&1===y){d=!0;break}if(A&&2===y){d=!1;break}}}return d}if(Array.isArray(m)){if("string"==typeof m[0]){m=[m]}else{if(!Array.isArray(m[0])){return}}for(var b={},g=0;g<m.length;g++){var j=m[g],k=j[0],x=w.match(/wptb-el-((.+-)\d+)-(.+)/i);x&&Array.isArray(x)&&(x=x[3],!(k=w.replace(x,k))||0<(k=document.getElementsByClassName(k)).length&&(b[j[0]]=[v(k,j),k,j]))}var u,q,f=document.getElementsByClassName(w);0<f.length&&(u=f[0],(q=WPTB_Helper.findAncestor(u,"wptb-element-option"))&&(h(q,b),Object.keys(b).map(function(a){Object.prototype.hasOwnProperty.call(b,a)&&b[a][1][0].addEventListener("change",function(d){var i=b[a][2],c=b[a][1];b[i[0]]=[v(c,i),c,i],h(q,b)},!1)})))}},toggleSwitch:function(d,c){var f,b;Array.isArray(d)&&d[1]&&"object"===_typeof(d[1])&&(f=function(){var a=document.getElementsByClassName(c);a.length&&WPTB_Helper.targetControlValueGet(a)!==d[0]&&("unchecked"===d[0]?a[0].checked=!1:"checked"===d[0]&&(a[0].checked=!0),void 0!==d[2]&&!0!==d[2]||WPTB_Helper.wptbDocumentEventGenerate("change",a[0],{eventType:"toggleSwitch"}))},b=d[1],Object.keys(b).map(function(g){var a=b[g],h=c.match(/wptb-el-((.+-)\d+)-(.+)/i);h&&Array.isArray(h)&&(h=h[3],!(h=c.replace(h,g))||0<(g=document.getElementsByClassName(h)).length&&g[0].addEventListener("change",function(j,i){!j||0<(j=document.getElementsByClassName(j)).length&&WPTB_Helper.targetControlValueGet(j)===i&&f()}.bind(null,h,a),!1))}))},controlsStateManager:function(k,u){var g=document.getElementsByClassName(k);if(0<g.length){var q=k.match(/wptb-el-((.+-)\d+)-(.+)/i);if(q&&Array.isArray(q)&&document.querySelector(".wptb-element-".concat(q[1]))){var b,f={},h=document.getElementsByClassName("wptb-element-datas");if(0==h.length||""==h[0].innerHTML){var j=WPTB_Helper.targetControlValueGet(g);f["data-".concat(k)]=j,(b={})["tmpl-wptb-el-datas-".concat(q[1])]=f,b=JSON.stringify(b),0==h.length?((h=document.createElement("script")).setAttribute("type","text/html"),h.setAttribute("class","wptb-element-datas")):h=h[0],h.innerHTML=b,document.getElementsByTagName("body")[0].appendChild(h)}else{if(h=h[0],b=h.innerHTML,b&&(b=b.trim(),(b=JSON.parse(b))&&"object"===_typeof(b))){if(u){var v=WPTB_Helper.targetControlValueGet(g);"tmpl-wptb-el-datas-".concat(q[1]) in b&&"object"===_typeof(b["tmpl-wptb-el-datas-".concat(q[1])])||(b["tmpl-wptb-el-datas-".concat(q[1])]={}),b["tmpl-wptb-el-datas-".concat(q[1])]["data-".concat(k)]=v,h.innerHTML=JSON.stringify(b)}else{if("tmpl-wptb-el-datas-".concat(q[1]) in b&&"object"===_typeof(b["tmpl-wptb-el-datas-".concat(q[1])])&&"data-".concat(k) in b["tmpl-wptb-el-datas-".concat(q[1])]){if("tmpl-wptb-el-datas-".concat(q[1]) in b&&"object"===_typeof(b["tmpl-wptb-el-datas-".concat(q[1])])&&"data-".concat(k) in b["tmpl-wptb-el-datas-".concat(q[1])]){for(var p,m=0;m<g.length;m++){"checkbox"==g[m].type?(p=void 0,"checked"==(p=g[m].name?b["tmpl-wptb-el-datas-".concat(q[1])]["data-".concat(k)][g[m].name]:b["tmpl-wptb-el-datas-".concat(q[1])]["data-".concat(k)])?g[m].checked=!0:"unchecked"==p&&(g[m].checked=!1)):g[m].value=b["tmpl-wptb-el-datas-".concat(q[1])]["data-".concat(k)]}}}else{v=WPTB_Helper.targetControlValueGet(g),"tmpl-wptb-el-datas-".concat(q[1]) in b&&"object"===_typeof(b["tmpl-wptb-el-datas-".concat(q[1])])||(b["tmpl-wptb-el-datas-".concat(q[1])]={}),b["tmpl-wptb-el-datas-".concat(q[1])]["data-".concat(k)]=v,h.innerHTML=JSON.stringify(b)}}}}}}},targetControlValueGet:function(d,c){for(var f,b=0;b<d.length;b++){"checkbox"==d[b].type&&d[b].name?c?"checked"===c?d[b].checked=!0:"unchecked"===c&&(d[b].checked=!1):(f=f||{},1==d[b].checked?f[d[b].name]="checked":f[d[b].name]="unchecked"):"checkbox"==d[b].type?c?"checked"===c?d[b].checked=!0:"unchecked"===c&&(d[b].checked=!1):f=1==d[b].checked?"checked":"unchecked":d[b].type?c?d[b].value=c:f=d[b].value:d[b].dataset.alignmentValue&&d[b].classList.contains("selected")&&(c?d[b].dataset.alignmentValue=c:f=d[b].dataset.alignmentValue)}return f},elementControlsStateCopy:function(f,c){var h,b,d,g;f&&c&&(f=f.className.match(/wptb-element-((.+-)\d+)/i),c=c.className.match(/wptb-element-((.+-)\d+)/i),f&&Array.isArray(f)&&c&&Array.isArray(c)&&(h=f[1],b=c[1],0<(f=document.getElementsByClassName("wptb-element-datas")).length&&(c=(f=f[0]).innerHTML)&&(c=c.trim(),!(c=JSON.parse(c))||"object"!==_typeof(c)||(d=c["tmpl-wptb-el-datas-".concat(h)])&&"object"===_typeof(d)&&(g={},Object.keys(d).forEach(function(i){var a=d[i],i=i.replace(h,b);g[i]=a}),0<Object.keys(g).length&&(c["tmpl-wptb-el-datas-".concat(b)]=g,c=JSON.stringify(c),f.innerHTML=c)))))},elementControlsStateDelete:function(f,c){var g=f.className.match(/wptb-element-(.+)-(\d+)/i),b=document.getElementsByTagName("body")[0],d=b.getElementsByClassName("wptb-element-datas");g&&Array.isArray(g)&&0<d.length&&(f=(d=d[0]).innerHTML)&&(f=f.trim(),(f=JSON.parse(f))&&"object"===_typeof(f)&&"tmpl-wptb-el-datas-".concat(g[1],"-").concat(g[2]) in f&&(c?f["tmpl-wptb-el-datas-".concat(g[1],"-").concat(g[2])]&&"object"===_typeof(f["tmpl-wptb-el-datas-".concat(g[1],"-").concat(g[2])])&&"data-wptb-el-".concat(g[1],"-").concat(g[2],"-").concat(c) in f["tmpl-wptb-el-datas-".concat(g[1],"-").concat(g[2])]&&delete f["tmpl-wptb-el-datas-".concat(g[1],"-").concat(g[2])]["data-wptb-el-".concat(g[1],"-").concat(g[2],"-").concat(c)]:delete f["tmpl-wptb-el-datas-".concat(g[1],"-").concat(g[2])],0==Object.keys(f).length?b.removeChild(d):(f=JSON.stringify(f),d.innerHTML=f)))},activeElement:null,elementOptionsSet:function(ad,K,V,ah){var N,U,Y=K.getAttribute("class").match(_wrapRegExp(/(wptb\x2Delement\x2D.+\x2D[0-9]+)/,{elementId:1})),Z=K.getAttribute("id"),L=null;if(K.getAttribute("class").includes("wptb-cell")&&(N=(U=K.dataset).xIndex,U=U.yIndex,L="cell_".concat(N,"-").concat(U)),L=(Y?Y.groups.elementId:null)||Z||L||null,L&&this.activeElement!==L){this.activeElement=L,WPTB_Helper.wptbDocumentEventGenerate("element:controls:prepare",K);var af,ae,R,I,X,ag,ab,D,L="wptb-".concat(ad,"-control-stack"),L=wp.template(L),ac=K.className.match(/wptb-element-((.+-)\d+)/i);if(ac?(WPTB_Helper.editActionClassRemove(),K.classList.add("edit-active")):(D=(D=WPTB_Helper.detectMode())||"startedid-0",K.classList.contains("wptb-preview-table")?K.classList.add("wptb-element-main-table_setting-".concat(D)):K.classList.contains("wptb-cell")?document.querySelector(".wptb-element-table_cell_setting-".concat(K.dataset.xIndex,"-").concat(K.dataset.yIndex))||K.classList.add("wptb-element-table_cell_setting-".concat(K.dataset.xIndex,"-").concat(K.dataset.yIndex)):K.classList.contains("wptb-responsive")&&(D.startsWith("wptb_team")&&(D="startedid-0"),K.classList.add("wptb-element-table_responsive_setting-".concat(D))),ac=K.className.match(/wptb-element-((.+-)\d+)/i)),af={container:".".concat(ac[0]),valueDependOnControl:{}},V&&Object.keys(V).forEach(function(a){af.valueDependOnControl[a]=V[a]}),!ah||(D=ah.match(/wptb-el-((.+-)\d+)-(.+)/i))&&Array.isArray(D)&&(ab=D[3]),ae=ac[0],R=ac[1],!K.classList.contains("wptb-preview-table")){if(K.classList.contains("wptb-cell")){this.activateSection("cell_settings")}else{if(K.classList.contains("wptb-responsive")){elementOptionsGroupId="table-responsive-group",wptbelementOptionClass="wptb-element-option"}else{for(var G=document.getElementById("element-options-group").childNodes,aa=0;aa<G.length;aa++){G[aa].style&&(G[aa].style.display="none")}this.activateSection("options_group")}}}var L=L(af),H=JSON.parse(L),q=[],k={},ai={},M={},Q=[],O=[],J=[];ab&&((L={})[ab]=H[ab],H=L),Object.keys(H).forEach(function(u){var a=H[u];a.controlKey=u;var d=wp.template("wptb-".concat(a.type,"-control"));a.elemContainer=ae,a.elementControlTargetUnicClass="wptb-el-".concat(R,"-").concat(a.controlKey),Object.keys(a).map(function(b){Object.prototype.hasOwnProperty.call(a,b)&&"control_param_calculate_value"===a[b]&&(a[b]=WPTB_Helper.controlParamCalculateValue(a.elementControlTargetUnicClass,b))});var f,g,v,h,u=d(a);if("appearDependOnControl" in a&&Array.isArray(a.appearDependOnControl)&&Q.push([a.appearDependOnControl,a.elementControlTargetUnicClass]),"toggleSwitch" in a&&Array.isArray(a.toggleSwitch)&&O.push([a.toggleSwitch,a.elementControlTargetUnicClass]),"valueDependOnControl" in a&&!V&&!ah&&(h="",a.valueDependOnControlCorrect&&(h=a.valueDependOnControlCorrect),J.push([a.valueDependOnControl,a.elementControlTargetUnicClass,h])),-1==q.indexOf(a.elementOptionsGroupId)&&!ab){q.push(a.elementOptionsGroupId),I=document.getElementById(a.elementOptionsGroupId);for(var n=_toConsumableArray(I.children),m=0;m<n.length;m++){I.removeChild(n[m])}k[a.elementOptionsGroupId]=I}X=k[a.elementOptionsGroupId],"true"!==a.elementOptionsContainerOn||ab||(f=a.elementOptionsGroupId,(g=ai)[f]||((v=document.createElement("div")).classList.add("wptb-element-options","wptb-options-".concat(ac[1])),document.getElementById(f).appendChild(v),g[f]=v),X=g[f]),"true"===a.elementOptionContainerOn&&((p=document.createElement("div")).classList.add(a.elementOptionClass,"wptb-settings-items"),a.customClassForContainer&&p.classList.add(a.customClassForContainer),a.containerAdditionalStyles&&p.setAttribute("style",a.containerAdditionalStyles),ah?0<(d=document.getElementsByClassName(ah)).length&&(d=d[0],(h=WPTB_Helper.findAncestor(d,"wptb-element-option"))&&((d=h.parentNode).insertBefore(p,h),d.removeChild(h))):X.appendChild(p),X=p),X.innerHTML+=u;var p=X.getElementsByTagName("wptb-template-script");0<p.length&&(u=(p=p[0]).innerText,X.removeChild(p),(p=document.createElement("script")).setAttribute("type","text/javascript"),p.setAttribute("id","".concat(ad,"-").concat(a.controlKey)),p.innerHTML=u.replace(/\r|\n|\t/g,"").trim(),M[a.elementOptionsGroupId]&&Array.isArray(M[a.elementOptionsGroupId])||(M[a.elementOptionsGroupId]=[]),M[a.elementOptionsGroupId].push(p)),0}),K.optionsGroupIds=q,Object.keys(M).forEach(function(a){ah||((ag=document.createElement("div")).classList.add("wptb-element-options-scripts","wptb-options-".concat(ac[1])),k[a].appendChild(ag));var d=M[a];if(0<d.length){for(var b,c=0;c<d.length;c++){ah?(b="".concat(ad,"-").concat(ab),b=document.getElementById(b),(ag=b.parentNode).insertBefore(d[c],b),ag.removeChild(b)):ag.appendChild(d[c])}}});for(var z=0;z<O.length;z++){WPTB_Helper.toggleSwitch(O[z][0],O[z][1])}for(var F=0;F<Q.length;F++){WPTB_Helper.appearDependOnControl(Q[F][0],Q[F][1])}WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",K);for(var j=0;j<J.length;j++){WPTB_Helper.valueDependOnControl(J[j][0],J[j][1],J[j][2],ad,K)}}},editActionClassRemove:function(){for(var b=document.querySelectorAll(".edit-active"),a=0;a<b.length;a++){b[a].classList.remove("edit-active")}},controlParamCalculateValue:function(b,a){return b=WPTB_Helper.replaceAll(b,"-","_"),window["paramCalculateValue_".concat(b,"_").concat(a)]&&"function"==typeof window["paramCalculateValue_".concat(b,"_").concat(a)]?window["paramCalculateValue_".concat(b,"_").concat(a)]():void 0},controlParamCalculateValueCreateFunction:function(f,c,g,b){var d=f.className.match(/wptb-element-((.+-)\d+)/i),c="wptb-el-".concat(d[1],"-").concat(c),c=WPTB_Helper.replaceAll(c,"-","_");window["paramCalculateValue_".concat(c,"_").concat(g)]=function(){return b(f)}},managerExternalCssStyles:function(w,C,j,A){var f=w.match(/wptb-element-main(.+)-(\d+)/i);f&&Array.isArray(f)||0<(f=document.getElementsByClassName("wptb-preview-table")).length&&(f=(f=f[0]).className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(f)&&(C=".".concat(f[0]," ").concat(C));var h=document.head;if(h){var q=h.querySelector("#styles-".concat(w));if(q){var v=q.innerHTML;if(v){var D=v.split("}");D.pop();for(var y=!1,x=0;x<D.length;x++){var g=D[x].split("{");if(g[0]===C){var B=g[1].split(";");B.pop();for(var k=!1,z=0;z<B.length;z++){if(B[z].split(":")[0]===j){A?B[z]="".concat(j,":").concat(A):B.splice(z,1),g[1]=B.join(";")?"".concat(B.join(";"),";"):"",k=!0;break}}k||A&&(g[1]+="".concat(j,":").concat(A,";")),g[1]?D[x]="".concat(g[0],"{").concat(g[1]):D.splice(x,1),D.join("}")?q.innerHTML="".concat(D.join("}"),"}"):h.removeChild(q),y=!0;break}}y||(q.innerHTML=A?"".concat(v+C,"{").concat(j,":").concat(A,";}"):v)}else{A?q.innerHTML="".concat(C,"{").concat(j,":").concat(A,";}"):h.removeChild(q)}}else{A&&((v=document.createElement("style")).setAttribute("id","styles-".concat(w)),v.classList.add("styles-wptb-elements"),v.innerHTML="".concat(C,"{").concat(j,":").concat(A,";}"),h.appendChild(v))}}},registerSections:function(b){var a=this;this.sections={},this.previousSection=null,this.currentSection=null,(b=Array.isArray(b)?b:[b]).map(function(c){var d=document.querySelector("[data-wptb-section=".concat(c,"]"));d&&(a.sections[c]=d)})},activateSection:function(d){var c=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"block";this.previousSection=this.currentSection,this.currentSection=d,this.triggerSectionEvent(d);var b=document.querySelector("#wptb_builder");b&&(b.dataset.wptbActiveSection=this.currentSection),Object.keys(this.sections).map(function(g){var h;Object.prototype.hasOwnProperty.call(c.sections,g)&&(h=d===g?f:"none",c.sections[g].style="display: ".concat(h," !important"))})},getCurrentSection:function(){return this.currentSection},getPreviousSection:function(){return this.previousSection},getSectionFromUrl:function(){var a=new URL(window.location.href).searchParams.get("wptb-builder-section");a&&Object.keys(this.sections).some(function(b){return b===a})&&this.activateSection(a)},setupSectionButtons:function(){var b=Array.from(document.querySelectorAll("[data-wptb-section-button]")),a=this;b.map(function(c){var d=c.dataset.wptbSectionButton;c.addEventListener("click",function(){var f=c.dataset.wptbSectionDisplayType;a.activateSection(d,f),WPTB_Helper.editActionClassRemove()}),document.addEventListener("wptbSectionChanged",function(f){f.detail===d?(c.classList.remove("disabled"),c.classList.add("active")):(c.classList.remove("active"),c.classList.add("disabled"))})})},setupPanelToggleButtons:function(){var a=jQuery;a(".wptb-panel-toggle-group").each(function(){var b=a(this);a(this).find(".toggle-icon").click(function(){b.find(".wptb-panel-toggle-target").slideToggle(),b.toggleClass("wptb-panel-toggle-content")})})},triggerSectionEvent:function(a){a=new CustomEvent("wptbSectionChanged",{detail:a}),document.dispatchEvent(a)},setupSidebarToggle:function(a){a=document.querySelector(a),a&&a.addEventListener("click",function(b){b.preventDefault(),document.body.classList.toggle("collapsed")})},externalCssStylesDelete:function(b){var a=document.head;!a||(b=a.querySelector("#styles-".concat(b)))&&a.removeChild(b)},externalCssStylesCopy:function(f,c){var g,b,d;!f||(d=f.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(d)&&(g=d[0],!(b=document.head)||(f=b.querySelector("#styles-".concat(g)))&&((d=f.cloneNode(!0)).removeAttribute("id","styles-".concat(g)),(c=c.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(c)&&(d.setAttribute("id","styles-".concat(c[0])),f=f.innerHTML,c=WPTB_Helper.replaceAll(f,g,c[0]),d.innerHTML=c,b.appendChild(d))))},elementsStylesConvertToObject:function(){for(var d=document.head.querySelectorAll(".styles-wptb-elements"),c={},f=0;f<d.length;f++){var b=d[f].getAttribute("id");b&&d[f].innerHTML&&(c[b]=d[f].innerHTML)}return 0!=Object.keys(c).length?JSON.stringify(c):""},elementsStylesSetFromObject:function(f){var c,g=document.head;if(g){if(0<(b=g.querySelectorAll(".styles-wptb-elements")).length){for(var b=_toConsumableArray(b),d=0;d<b.length;d++){g.removeChild(b[d])}}f&&(c=JSON.parse(f),0!=Object.keys(c).length&&Object.keys(c).forEach(function(j){var h=c[j],i=document.createElement("style");i.setAttribute("id",j),i.classList.add("styles-wptb-elements"),i.innerHTML=h,g.appendChild(i)}))}},saveTable:function(v,A,h){WPTB_Helper.tableSaveIndicator(!0),h||A||!v.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,v.target.dataset.wptbTableStateNumberSave),h||(w=document.querySelector(".wptb-edit-bar"))&&w.classList.contains("visible")&&(document.getElementsByClassName("wptb-preview-table")[0],WPTB_Helper.toggleTableEditMode()),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document),WPTB_Helper.tableClean();var y,b,g=new XMLHttpRequest,k="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=save_table"),q=document.getElementById("wptb-setup-name").value.trim();B=document.getElementsByClassName("wptb-preview-table"),((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(b=rs);var B,x,w,f,z=!1;B=0<B.length?(x=(B=B[0]).cloneNode(!0),b&&x.classList.contains("wptb-element-main-table_setting-startedid-0")&&(x.classList.remove("wptb-element-main-table_setting-startedid-0"),x.classList.add("wptb-element-main-table_setting-".concat(b)),(w=document.querySelector(".wptb-table-setup"))&&(w.innerHTML="",w.appendChild(x),WPTB_Table()),z=!0),x.columns=B.columns,(B=WPTB_Stringifier(x)).outerHTML):"",h||(f="",0<(j=document.getElementsByClassName("wptb-element-datas")).length&&j[0].innerHTML&&(f=j[0].innerHTML,z&&(f=WPTB_Helper.replaceAll(f,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-".concat(b)),f=WPTB_Helper.replaceAll(f,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-".concat(b)))));var j=WPTB_Helper.elementsStylesConvertToObject();return z&&(j=WPTB_Helper.replaceAll(j,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-".concat(b))),""===q&&""===B?(z="",""===q&&(z+="You must assign a name to the table before saving it.</br>"),""===B&&(z+="Table wasn't created"),(y=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '.concat(z,"</div>"),y.classList.add("wptb-warning"),void setTimeout(function(){y.removeChild(y.firstChild)},4000)):(j={title:q,content:B,elements_datas:f,elements_styles:j,security_code:wptb_admin_object.security_code},h&&(j.preview_saving=h),b&&(j.id=b),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document,j),j=JSON.stringify(j),g.open("POST",k,!0),g.setRequestHeader("Content-type","application/json; charset=utf-8"),g.onreadystatechange=function(u){if(4==this.readyState&&(WPTB_Helper.tableSaveIndicator(!1),200==this.status)){var m=JSON.parse(g.responseText);if(y=document.getElementById("wptb-messaging-area"),"saved"!=m[0]){if("edited"==m[0]&&A){document.wptbId=m[1],y.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(q,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(q," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(m[1],"]"),document.querySelector(".wptb-preview-table");var a=document.getElementsByClassName("wptb-preview-btn");0<a.length&&((a=a[0]).classList.remove("wptb-button-disable"),i=(i=a.dataset.previewHref).replace("empty",m[1]),a.setAttribute("href",i)),v.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var i=document.getElementsByClassName("wptb-save-btn");0<i.length&&((i=i[0]).classList.add("wptb-save-disabled"),i.classList.remove("active"))}else{if("edited"==m[0]){y.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(q,'" was successfully updated.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(q," was successfully updated.")}),v.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var p=document.getElementsByClassName("wptb-save-btn");0<p.length&&((p=p[0]).classList.add("wptb-save-disabled"),p.classList.remove("active"))}else{if("preview_edited"==m[0]){return}y.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}}y.classList.add("wptb-success"),setTimeout(function(){y.removeChild(y.firstChild)},4000)}else{i=document.location.href.replace("#",""),p=new RegExp("&table=(.+)","i"),i=i.replace(p,""),window.history.pushState(null,null,"".concat(i,"&table=").concat(m[1])),document.wptbId=m[1],y.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(q,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(q," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(m[1],"]"),document.querySelector(".wptb-preview-table"),i=document.getElementsByClassName("wptb-preview-btn"),0<i.length&&((i=i[0]).classList.remove("wptb-button-disable"),o=(o=i.dataset.previewHref).replace("empty",m[1]),i.setAttribute("href",o)),v.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var o=document.getElementsByClassName("wptb-save-btn");0<o.length&&((o=o[0]).classList.add("wptb-save-disabled"),o.classList.remove("active"))}}},g.send(j),void 0)},clickOnFreeSpace:function(){var a;WPTB_Helper.editActionClassRemove(),"table_responsive_menu"!==this.getCurrentSection()&&((a=document.querySelector("#wptb-cell_mode_background"))&&a.classList.contains("visible")||(this.activateSection("elements"),(a=document.getElementById("wpcd_fixed_toolbar")).hasAttribute("data-toolbar-active-id")&&document.getElementById(a.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active"),(a=document.querySelector(".wptb-preview-table"))&&WPTB_Helper.elementOptionsSet("table_setting",a)))},elementAjax:function(f,c){var h=new XMLHttpRequest,b="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=wptb_element_ajax"),d=c.className.match(/wptb-element-(.+)-(\d+)/i),g={element_ajax_data:f,element_name:g=d&&Array.isArray(d)?d[1]:g,security_code:wptb_admin_object.security_code},g=JSON.stringify(g);h.open("POST",b,!0),h.setRequestHeader("Content-type","application/json; charset=utf-8"),h.onreadystatechange=function(j){var i;4==this.readyState&&200==this.status&&(i=(i=JSON.parse(h.responseText))&&Array.isArray(i)&&"element_ajax_responce"==i[0]?{value:i[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",c,i))},h.send(g)},toggleTableEditMode:function(){var k=0<arguments.length&&void 0!==arguments[0]&&arguments[0],u=document.getElementsByClassName("wptb-edit-bar"),g=document.getElementById("wptb-cell_mode_background"),q=document.getElementById("wptb-left-scroll-panel-curtain"),b=document.getElementById("wptb-left-scroll-panel-cell-settings"),f=document.getElementsByClassName("wptb-preview-table");0<f.length&&(f=f[0]);var h=document.querySelector(".wptb-builder-panel");if(0<u.length){for(var j="",v=0;v<u.length;v++){if(k){document.select.deactivateMultipleSelectMode(),u[v].classList.remove("visible"),g.classList.remove("visible"),q.classList.remove("visible"),b.classList.remove("visible"),f.parentNode.classList.remove("wptb-preview-table-manage-cells");var p=f.getElementsByTagName("td");if(0<p.length){for(var m=0;m<p.length;m++){p[m].classList.remove("wptb-highlighted")}}j="closed",h.dataset.manageCellsActive=!1}else{k||(document.select.activateMultipleSelectMode(),u[v].classList.add("visible"),g.classList.add("visible"),q.classList.add("visible"),f.parentNode.classList.add("wptb-preview-table-manage-cells"),j="opened",h.dataset.manageCellsActive=!0)}}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-edit-mode/".concat(j),f)}},checkingDimensionValue:function(b,a){if(b=String(b),a=String(a),b&&a){var c=b.indexOf(a);return -1!=c&&c==b.length-a.length?!0:!1}return !1},checkSetGetStyleSizeValue:function(f,c,g,b){var d=f.style[c];if((d=String(d))&&!b||WPTB_Helper.checkingDimensionValue(d,b)){if(!b){return d}}else{if(d=window.getComputedStyle(f),g&&d.getPropertyValue(g)&&b&&!WPTB_Helper.checkingDimensionValue(d.getPropertyValue(g),b)){if(!b){return !1}f.style[c]=null}else{if(!b){return d.getPropertyValue(g)}f.style[c]=d.getPropertyValue(g)}}return f.style[c]},checkSetGetStyleColorValue:function(f,c,h){var b=3<arguments.length&&void 0!==arguments[3]&&arguments[3],d=f.style[c];if(d){if(!b){return d}}else{var g=window.getComputedStyle(f,null);if(g&&g.getPropertyValue(h)){if(!b){return g.getPropertyValue(h)}d=WPTB_Helper.rgbToHex(g.getPropertyValue(h)),WPTB_Helper.isHex(d)?f.style[c]=d:f.style[c]=""}else{if(!b){return""}f.style[c]=""}}},checkSetGetStyleValue:function(f,c,g){var b=3<arguments.length&&void 0!==arguments[3]&&arguments[3],d=f.style[c];if(d){if(!b){return d}}else{if(d=window.getComputedStyle(f,null),d&&d.getPropertyValue(g)){if(!b){return d.getPropertyValue(g)}f.style[c]=d.getPropertyValue(g)}else{if(!b){return""}}}},getValueMaxCountSameElementsInArray:function(f){if(f&&Array.isArray(f)){for(var c,h,b={},d=0,g=0;g<f.length;g++){f[g]?b[f[g]]?b[f[g]]++:b[f[g]]=1:d++}for(h in b){(!c||b[c]<b[h])&&(c=h)}return b[c]>=d?c:""}},recalculateIndexes:function(a){WPTB_RecalculateIndexes(a)},tableRowsColorsReinstall:function(d){var c,f,b;!d.rows.length||(c=d.className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(c)&&(d="",d="0"==c[c.length-1]?"startedid-0":c[c.length-1],(c=document.querySelector(".wptb-el-main-table_setting-".concat(d,"-tableHeaderBackground")))&&(f={value:c.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",c,f)),(f=document.querySelector(".wptb-el-main-table_setting-".concat(d,"-tableEvenRowBackground")))&&(b={value:f.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",f,b)),(b=document.querySelector(".wptb-el-main-table_setting-".concat(d,"-tableOddRowBackground")))&&(d={value:b.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",b,d)))},getParentOfType:function(b,a){return a.nodeName===b.toUpperCase()?a:WPTB_Helper.getParentOfType(b,a.parentElement)},dragRelativeType:"",setDragRelativeType:function(a){this.dragRelativeType=a},getDragRelativeType:function(){return this.dragRelativeType},getElementColorStylesHex:function(b,a){return a=b.style[a],a=WPTB_Helper.rgbToHex(a),a=WPTB_Helper.isHex(a)?a:""},showControlsOnElementMount:function(){document.addEventListener("element:mounted:dom",function(a){a.target.click()})},showElementsListOnRemove:function(){document.addEventListener("element:removed:dom",function(){WPTB_Helper.activateSection("elements")})},blockTinyMCE:function(){function b(d){var c=document.createElement("div");c.classList.add("wptb-plugin-blocker-element");var f=0<d.childNodes.length;d.appendChild(c),f||d.classList.add("wptb-plugin-blocker-element-empty")}function a(d){var c=d.querySelector(".wptb-plugin-blocker-element");c&&c.remove(),d.classList.remove("wptb-plugin-blocker-element-empty")}document.addEventListener("wptbSectionChanged",function(d){var c=d.detail,d=document.querySelector(".wptb-table-setup table.wptb-preview-table");d&&((d=Array.from(d.querySelectorAll("td"))).map(a),["manage_cells","cell_settings","background_menu"].includes(c)&&d.map(b))}),document.addEventListener("wptb:save:before",function(){var c=document.querySelector(".wptb-table-setup table.wptb-preview-table");Array.from(c.querySelectorAll("td")).map(a)})},calledByBlock:function(){new URL(window.location.href).searchParams.get("gutenberg")&&document.querySelector(".wptb-plugin-header-close a").addEventListener("click",function(b){b.preventDefault(),b.stopPropagation();var a=document.querySelector(".wptb-save-disabled"),b=new URL(window.location.href).searchParams.get("table");(a||window.confirm(wptb_admin_object.strings.dirtyConfirmation))&&WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,b)},{capture:!0})},tableClean:function(){Array.from(document.querySelectorAll(".wptb-directlyhovered")).map(function(a){a.classList.remove("wptb-directlyhovered")}),Array.from(document.querySelectorAll(".wptb-text-container p")).map(function(a){a.removeAttribute("data-placeholder")})},tableSaveIndicator:function(b){var a=document.querySelector("#wptb_builder");a&&(b?a.dataset.wptbSaving=!0:delete a.dataset.wptbSaving)}},WPTB_Initializer=function(){var a=document.body;columnsDecrementButton=a.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=a.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=a.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=a.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),WPTB_Helper.registerSections(["elements","table_settings","cell_settings","options_group","table_responsive_menu","manage_cells","background_menu"]),WPTB_Helper.setupSectionButtons(),WPTB_Helper.activateSection("elements"),WPTB_Helper.setupSidebarToggle(".wptb-panel-toggle-section .wptb-panel-drawer-icon"),WPTB_Helper.setupPanelToggleButtons(),new WptbResponsive("table_responsive_menu","wptbResponsiveApp",".wptb-builder-content"),WPTB_Helper.getSectionFromUrl(),WPTB_Helper.showControlsOnElementMount(),WPTB_Helper.showElementsListOnRemove(),WPTB_Helper.blockTinyMCE(),new WPTB_HeaderToolbox(".wptb-plugin-header-toolbar").init(),document.addEventListener("wp-table-builder/table-edit-mode/closed",function(){WPTB_Helper.activateSection("elements")}),WPTB_Helper.calledByBlock(),WPTB_ControlsManager.callControlScript("WhatIsNew"),WPTB_NotificationManager.init(),document.addEventListener("wptb:table:generated",function(){WPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder),WPTB_ControlsManager.subscribeToControl("extraStyles","extraTableStyles",function(){WPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder)},!0)})},WPTB_LeftPanel=function(){for(var b=document.getElementsByClassName("wptb-preview-table")[0],a=document.getElementsByClassName("wptb-element"),c=0;c<a.length;c++){a[c].ondragstart=function(d){d.dataTransfer.setData("wptbElement",this.dataset.wptbElement),d.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)}}b&&(document.querySelector("#wptb-left-scroll-panel-curtain .wptb-table-edit-mode-close").addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)}),document.addEventListener("wptbSectionChanged",function(d){"manage_cells"===d.detail&&Array.from(document.querySelectorAll(".wptb-management_table_container .wptb-table-edit-mode-close")).map(function(f){f.addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)})})})),document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(d){d.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(d.target,"wptb-ph-element")||d.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(d.target,"wptb-fixed-toolbar")||"manage_cells"!==WPTB_Helper.currentSection&&WPTB_Helper.clickOnFreeSpace()},b=document.getElementsByClassName("wptb-header"),(b=0<b.length?b[0]:b).onclick=function(){WPTB_Helper.clickOnFreeSpace()}};!function(b,a,c){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=c():a[b]=c()}("WPTB_Logger",self||global,function(){var a={normal:"#48BB78"};return{prepareMessage:function(b){return"%c WP Table Builder %c {message} ".replace("{message}",b)},prepareMessageStyle:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"normal";return"background-color: {bgColor} ; padding: 3px; color: #FFF; border-radius: 0 5px 5px 0;".replace("{bgColor}",a[a[b]?b:"normal"])},log:function(b){console.log(this.prepareMessage(b),"border-radius:5px 0 0 5px; background-color: #3299D1; padding: 3px; color: #FFF; font-weight: bold;",this.prepareMessageStyle("normal"))}}});var MultipleSelect=function(){var b=[],a=!1;return this.activateMultipleSelectMode=function(){b=[];for(var d=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),c=0;c<d.length;c++){d[c].classList.remove("wptb-highlighted")}a=!0},this.deactivateMultipleSelectMode=function(){a=!1},this.isActivated=function(){return a},this.pushSelectedCell=function(c){a&&(b.push(c),c.classList.add("wptb-highlighted"))},this.selectedCells=function(){return b},this.flushSelectedCells=function(){b=[]},this.getFirst=function(){for(var d,g=1000,c=1000,f=b.length-1;f>=0;f--){g>=b[f].dataset.xIndex&&c>=b[f].dataset.yIndex&&(d=b[f],g=b[f].dataset.xIndex,c=b[f].dataset.yIndex)}return d},this.getLast=function(){for(var d,g=-1,c=-1,f=b.length-1;f>=0;f--){g<=b[f].dataset.xIndex&&c<=b[f].dataset.yIndex&&(d=b[f],g=b[f].dataset.xIndex,c=b[f].dataset.yIndex)}return d},this.removeAllButFirst=function(){for(var c=this.getFirst(),d=1;d<b.length;d++){b[d].classList.add("wptb-fused-cell-"+c.dataset.xIndex+"-"+c.dataset.yIndex)}},this},_this=this;!function(a){(self||global).WPTB_NotificationManager=a()}(function(){var a=!1;return _this.store=null,new function(){var c,d=this;this.types={};var b=null===(c=(self||global).wptb_admin_object)||void 0===c?void 0:c.notificationManager;this.sendNotification=function(h){var g,f;d.store.dispatch("addNotification",(g=h,f=d.store.getters.defaults,h=Object.keys(g).reduce(function(i,j){return Object.prototype.hasOwnProperty.call(g,j)&&f[j]&&(i[j]=g[j]),i},{}),_objectSpread(_objectSpread({},f),h)))},this.init=function(){a||(WPTB_ControlsManager.setControlData("NotificationManager",b),WPTB_ControlsManager.callControlScript("NotificationManager","NotificationManager"),d.notificationTypes=d.store.getters.notificationTypes,d.queueTypes=d.store.getters.queueTypes,d.revealTypes=d.store.getters.revealTypes,d.revealTypes=d.store.getters.revealTypes,d.dismissTypes=d.store.getters.dismissTypes,a=!0)}}});var WPTB_Parser=function(f){var c=document.createElement("div");c.innerHTML=f;for(var c=c.children[0],h=_toConsumableArray(c.querySelectorAll(".wptb-column-title-mobile-container")),b=0;b<h.length;b++){h[b].parentNode.removeChild(h[b])}for(var d=c.querySelectorAll("td"),g=0;g<d.length;g++){d[g].classList.add("wptb-droppable"),d[g].classList.remove("wptb-column-title-mobile-not-elements")}return c};Object.keys||(Object.keys=function(){var d=Object.prototype.hasOwnProperty,c=!{toString:null}.propertyIsEnumerable("toString"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=f.length;return function(h){if("object"!==_typeof(h)&&("function"!=typeof h||null===h)){throw new TypeError("Object.keys called on non-object")}var j,a,g=[];for(j in h){d.call(h,j)&&g.push(j)}if(c){for(a=0;b>a;a++){d.call(h,f[a])&&g.push(f[a])}}return g}}());var WPTB_RecalculateIndexes=function(m){for(var y,h=m.getElementsByTagName("tr"),w=0,b=0,g=[],j=0;j<h.length;j++){y=h[j].getElementsByTagName("td"),null==g[j]&&(g[j]=[]);for(var k=0,z=0;z<y.length;z++){if(null!=g[j][z]){for(var v=0;100>v;v++){if(null==g[j][k]){g[j][k]=y[z],y[z].dataset.xIndex=k;break}k++}}else{g[j][z]=y[z],y[z].dataset.xIndex=k}if(y[z].dataset.yIndex=j,1<y[z].colSpan){for(var q=1;q<y[z].colSpan;q++){k++,g[j][k]="tdDummy"}}if(1<y[z].rowSpan){for(var f=1;f<y[z].rowSpan;f++){null==g[j+f]&&(g[j+f]=[]);for(var x=0;x<y[z].colSpan;x++){g[j+f][k-y[z].colSpan+1+x]="tdDummy"}}}k++}y.length>w&&(w=y.length),0==j&&(b=k)}m.columns=w,m.maxCols=b},WPTB_Settings=function(){for(var f=document.getElementsByClassName("wptb-element"),c=0;c<f.length;c++){f[c].ondragstart=function(a){a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("wptbElement",a.target.dataset.wptbElement),a.dataTransfer.setData("wptbElIndic-"+a.target.dataset.wptbElement,"wptbElIndic-"+a.target.dataset.wptbElement),WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements||"")},f[c].ondragend=function(){WPTB_Helper.elementDragEndClear()}}var g=new WPTB_TableStateSaveManager,b=document.getElementsByClassName("wptb-undo");0<b.length&&((b=b[0]).onclick=function(h){var a;this.classList.contains("wptb-undoredo-disabled")||(g.tableStateGet(this.dataset.wptbUndoredo),0<(a=document.getElementsByClassName("wptb-undo-redo-container")).length&&((a=a[0]).onmouseleave=function(i){i.target.onmouseleave="",document.querySelector(".wptb-preview-table"),WPTB_Table()}))}),b=document.getElementsByClassName("wptb-redo"),0<b.length&&((b=b[0]).onclick=function(h){var a;this.classList.contains("wptb-undoredo-disabled")||(g.tableStateGet(this.dataset.wptbUndoredo),0<(a=document.getElementsByClassName("wptb-undo-redo-container")).length&&((a=a[0]).onmouseleave=function(i){i.target.onmouseleave="",document.querySelector(".wptb-preview-table"),WPTB_Table()}))});var d=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||d.classList.add("wptb-popup-show")},window.onbeforeunload=function(a){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){d.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){d.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(h){var a,i;this.classList.contains("wptb-button-disable")||(a=Math.floor(10000*Math.random()),(i=new URL(h.target.href)).searchParams.set("preview_id",a),h.target.href=i.toString(),WPTB_Helper.saveTable(h,!1,a))},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(a){this.classList.contains("wptb-save-disabled")||WPTB_Helper.saveTable(a)},b=document.querySelector("#wptb-setup-name"),b&&(b.onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()})};!function(b,a,c){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=c():a[b]=c()}("WPTB_SortableTable",self||global,function(){return function(){function m(l,d,s){var c,i,p;"TD"===l.target.tagName?(c=null==l.offsetX?l.layerX:l.offsetX,i=null==l.offsetY?l.layerY:l.offsetY,p=!1,(p="vertical"===d&&l.target.clientWidth-c<=35||"horizontal"===d&&35>=c?!0:p)&&(l.target.clientHeight-35)/2<i&&(l.target.clientHeight+35)/2>i?s.classList.add("sortable-hover"):s.classList.remove("sortable-hover")):s.classList.remove("sortable-hover")}function w(a){m(a,"vertical",this)}function h(a){m(a,"horizontal",this)}function v(){this.classList.remove("sortable-hover")}function b(aK,az){if(aK.target&&"TD"===aK.target.tagName&&!q.parentNode.classList.contains("wptb-preview-table-manage-cells")){var aD=aK.currentTarget,aN=!1;if("vertical"===az&&aK.target.dataset.hasOwnProperty("sortedVertical")){var aA=[],aL=[];if(this.itemsPerHeader&&this.itemsPerHeader<aD.rows.length){WPTB_RecalculateIndexes(aD);for(var aC=_toConsumableArray(aD.rows),ay=aD.querySelector("tbody")?aD.querySelector("tbody"):aD,aE=0;aE<aC.length;aE++){aE<aK.target.dataset.yIndex?(aA.push(aC[aE]),ay.removeChild(aC[aE])):aE>parseInt(aK.target.dataset.yIndex,10)+this.itemsPerHeader&&(aL.push(aC[aE]),ay.removeChild(aC[aE]))}WPTB_RecalculateIndexes(aD)}var aM,aI,au=aD.querySelectorAll('[data-x-index="'.concat(aK.target.dataset.xIndex,'"]'));(au=_toConsumableArray(au)).map(function(a){(aM=parseInt(a.rowSpan,10))||(aM=1),aI=a.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(aI,aD),aI+=aM,WPTB_CutGlueTable.cutTableHorizontally(aI,aD)});for(var aJ,aw=[],aH=0,ax=[],Y=0;Y<au.length;Y++){var s=x(aK,aD,au,Y,aH,"vertical");if(s&&s.hasOwnProperty("i")){au=s.tds,Y=s.i}else{for(var aO=(au=s?s.tds:au)[Y],ao=(ao=parseInt(aO.rowSpan,10))||1,aH=parseInt(aO.dataset.yIndex,10)+ao,s=k(aO),aq=[],ap=0;ao>ap;ap++){aq.push(aD.rows[parseInt(aO.dataset.yIndex,10)+ap]),ax.push(parseInt(aO.dataset.yIndex,10)+ap)}0<aO.dataset.yIndex?aw.push({rowsTd:aq,value:s}):aJ=aq}}var am=g(aK,"sortedVertical");if(!am){return}if(aw.length&&aw.sort(function(c,a){return j(am,c,a)}),aw.unshift({rowsTd:aJ}),aw.length<aD.rows.length){for(var ab,av=0;av<aD.rows.length;av++){-1<ax.indexOf(av)||((ab=[]).push(aD.rows[av]),aw.push({rowsTd:ab}))}}var i,ai,af,ad=aD.querySelector("tbody");ad.innerHTML="",aw.map(function(a){a.rowsTd.map(function(c){ad.appendChild(c)})}),!aA.length||(i=aD.querySelector("tbody")?aD.querySelector("tbody"):aD)&&(ai=i.querySelector("tr"),aA.map(function(a){i.insertBefore(a,ai)})),aL.length&&(af=aD.querySelector("tbody")?aD.querySelector("tbody"):aD,ad&&aL.map(function(a){af.appendChild(a)})),WPTB_RecalculateIndexes(aD),WPTB_CutGlueTable.glueTableHorizontally(aD),aN=!0}else{if("horizontal"===az&&"0"===aK.target.dataset.xIndex){var aj,ac,aF=aD.querySelectorAll('[data-y-index="'.concat(aK.target.dataset.yIndex,'"]'));(aF=_toConsumableArray(aF)).map(function(a){(aj=parseInt(a.colSpan,10))||(aj=1),ac=a.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(ac,aD),ac+=aj,WPTB_CutGlueTable.cutTableVertically(ac,aD)});for(var ae,an=[],aB=0,aG=0;aG<aF.length;aG++){var Z=x(aK,aD,aF,aG,aB,"horizontal");if(Z&&Z.hasOwnProperty("i")){aF=Z.tds,aG=Z.i}else{for(var al=(aF=Z?Z.tds:aF)[aG],ak=(ak=parseInt(al.colSpan,10))||1,aB=parseInt(al.dataset.xIndex,10)+ak,Z=k(al),l=[],at=0;ak>at;at++){var o=_toConsumableArray(aD.querySelectorAll('[data-x-index="'.concat(parseInt(al.dataset.xIndex,10)+at,'"]')));l.push(o)}0<al.dataset.xIndex?an.push({columnsTd:l,value:Z}):ae=l}}var ah=g(aK,"sortedHorizontal");if(!ah){return}if(an.length&&an.sort(function(c,a){return j(ah,c,a)}),an.unshift({columnsTd:ae}),an.length<aD.maxCols){for(var ar=aD.maxCols-an.length,aa=0;ar>aa;aa++){var ag=_toConsumableArray(aD.querySelectorAll('[data-x-index="'.concat(parseInt(aD.maxCols,10)-parseInt(ar,10)+aa,'"]')));an.push({columnsTd:[ag]})}}for(var d=0;d<aD.rows.length;d++){aD.rows[d].innerHTML=""}an.map(function(a){a.columnsTd.map(function(c){c.map(function(n){aD.rows[n.dataset.yIndex].appendChild(n)})})}),WPTB_RecalculateIndexes(aD),WPTB_CutGlueTable.glueTableVertically(aD),aN=!0}}aN&&(function(){for(var c=_toConsumableArray(aD.getElementsByTagName("td")),a=0;a<c.length;a++){c[a].hasAttribute("data-same-cell-before-division")&&c[a].removeAttribute("data-same-cell-before-division")}}(),aD.hasOwnProperty("tableSM")&&(new (aD.tableSM())).tableStateSet(),this.reassignElementsStyles("td"),this.reassignElementsStyles("tr"))}}function g(c,a){return !(!c.currentTarget||!c.currentTarget.classList.contains("wptb-preview-table")&&!c.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(c.target.dataset[a]&&"ask"!==c.target.dataset[a]?c.target.dataset[a]="ask":c.target.dataset[a]="desk",c.target.dataset[a])}function j(l,d,s){var c=0<arguments.length&&void 0!==l?l:"ask",i=1<arguments.length?d:void 0,p=2<arguments.length?s:void 0,i=i.value,p=p.value;return parseInt(i)&&parseInt(p)&&(i=parseInt(i),p=parseInt(p)),"ask"===c?p>i?-1:i===p?0:1:p>i?1:i===p?0:-1}function k(i){for(var d=i.querySelectorAll(".wptb-text-container"),d=_toConsumableArray(d),l="",c=0;c<d.length;c++){l+=d[c].innerText,c!==d.length-1&&(l+=" ")}return l}function x(M,B,G,Q,D,F){var I,J,C,O,N,E,A=G[Q],H=!1;if("vertical"===F?(J="colSpan",C="data-y-index",O="yIndex",N="xIndex",z="rowSpan",E=B.rows.length):"horizontal"===F&&(J="rowSpan",C="data-x-index",O="xIndex",N="yIndex",z="colSpan",E=B.maxCols),0<A.dataset[O]-D){for(var P=B.querySelectorAll("[".concat(C,'="').concat(D,'"]')),K=0;K<P.length;K++){if(I=(I=P[K][J])||1,P[K].dataset[N]<M.target.dataset[N]&&parseInt(P[K].dataset[N],10)+parseInt(I,10)>M.target.dataset[N]){G.splice(Q,0,P[K]),H=!0,Q--;break}}}if(H){return{tds:G,i:Q}}var z=(z=parseInt(A[z],10))||1;if(Q==G.length-1&&parseInt(A.dataset[O],10)+z<E){P=B.querySelectorAll("[".concat(C,'="').concat(parseInt(A.dataset[O],10)+z,'"]'));for(var L=0;L<P.length;L++){if(I=(I=P[L][J])||1,P[L].dataset[N]<M.target.dataset[N]&&parseInt(P[L].dataset[N],10)+parseInt(I,10)>M.target.dataset[N]){G.push(P[L]),H=!0;break}}}return !!H&&{tds:G}}var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},q=this.table=u.table;WPTB_RecalculateIndexes(q);var f=this;return this.itemsPerHeader=0,this.tableMaxCols=q.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(c,a){a&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===c?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),a?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===c&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),a?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&a?this.table=q.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!a&&(this.table=q.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(l){this.tableObjectChange();var d=this.table.querySelectorAll(l);if(d.length){for(var s=0;s<d.length;s++){var c=d[s],i=window.getComputedStyle(c,null).getPropertyValue("background-color"),p="";"td"===l?(p=c.dataset.xIndex+"-"+c.dataset.yIndex,this.cellsStylesScheme[p]={backgroundColor:i}):"tr"===l&&(p=String(s),this.rowsStylesScheme[p]={backgroundColor:i})}}this.tableObjectChange(!1)},this.reassignElementsStyles=function(z){this.tableObjectChange();var s,B=this.table.querySelectorAll(z);if("td"===z?s=this.cellsStylesScheme:"tr"===z&&(s=this.rowsStylesScheme),B.length){for(var d=0;d<B.length;d++){var y=B[d],A="";if("td"===z?A=y.dataset.xIndex+"-"+y.dataset.yIndex:"tr"===z&&(A=d),s.hasOwnProperty(A)){var c,p=s[A];for(c in p){y.style[c]=p[c]}}}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(l){var d,o,c,i;this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(d="vertical",o="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(d="horizontal",o="vertical"),d&&"string"==typeof d&&o&&"string"==typeof o&&(c=WPTB_GetDirectionAfterReconstruction(this.table,d,o,"vertical",l),"object"===_typeof(c)&&c.hasOwnProperty("switch")&&((i=function(n){var a=c["switch"](n);"object"===_typeof(a)&&(this.itemsPerHeader=a.itemsPerHeader,a.hasOwnProperty("newTable")?(n=this.table,this.table=a.newTable,this.sortModeSwitcher(a.type[0],!0),this.table=n):this.sortModeSwitcher(a.type[0],!0))}).call(f),this.table.addEventListener("table:rebuilt",function(a){i.call(f,a)},!1)))},this.sortingCellMouseMoveSwitcher=function(B,a){function y(d,c,i){d.removeEventListener("mousemove",c,!1),d.removeEventListener("mouseleave",v,!1),i&&(d.addEventListener("mousemove",c,!1),d.addEventListener("mouseleave",v,!1))}function z(d,c,i){i?d.dataset[c]&&"desk-disabled"===d.dataset[c]?d.dataset[c]="desk":d.dataset[c]="ask":"ask"===d.dataset[c]?d.dataset[c]="ask-disabled":"desk"===d.dataset[c]&&(d.dataset[c]="desk-disabled")}var A=this,E=this.table.querySelectorAll("td");if(E.length&&(E=_toConsumableArray(E)).map(function(c){y(c,w,!1),z(c,"sortedVertical",!1),y(c,h,!1),z(c,"sortedHorizontal",!1)}),a){if("vertical"===B){for(var D=this.table.rows.length,C=0;D>0;){var n=this.table.querySelectorAll('[data-y-index="'.concat(C,'"]'));(n=_toConsumableArray(n)).map(function(c){y(c,w,a),z(c,"sortedVertical",a)}),this.itemsPerHeader?(D-=this.itemsPerHeader+1,C+=this.itemsPerHeader+1):D=0}}else{"horizontal"===B&&(B=this.table.querySelectorAll('[data-x-index="0"]'),(B=_toConsumableArray(B)).map(function(c){2<A.table.querySelectorAll('[data-y-index="'.concat(c.dataset.yIndex,'"]')).length&&(y(c,h,a),z(c,"sortedHorizontal",a))}))}}},this.sortableTableVerticalStart=function(a){b.call(f,a,"vertical")},this.sortableTableHorizontalStart=function(a){b.call(f,a,"horizontal")},this}});var WPTB_Stringifier=function(L){if(L){var z=L.cloneNode(!0);z.dataset.tableColumns=L.columns,z.style.width=null,z.style.minWidth=null,z.style.maxWidth=null;var E=z.getElementsByTagName("td");if(0<E.length){for(var P=0;P<E.length;P++){E[P].removeAttribute("draggable"),E[P].classList.remove("wptb-droppable");var B=E[P].className.match(/wptb-element-((.+-)\d+)/i);B&&E[P].classList.remove(B[0]);var D=E[P].getElementsByClassName("wptb-ph-element");if(0<D.length){for(var G=0;G<D.length;G++){var H=D[G].querySelectorAll(".mce-content-body");if(0<H.length){for(var A=0;A<H.length;A++){H[A].classList.remove("mce-content-body")}}var N=D[G].querySelectorAll("[data-mce-style]");if(0<N.length){for(var M=0;M<N.length;M++){N[M].removeAttribute("data-mce-style")}}var C=D[G].querySelectorAll("[contenteditable]");if(0<C.length){for(var x=0;x<C.length;x++){C[x].removeAttribute("contenteditable")}}var F=D[G].querySelectorAll("[spellcheck]");if(0<F.length){for(var O=0;O<F.length;O++){F[O].removeAttribute("spellcheck")}}var J=D[G].querySelectorAll("[id^=mce_]");if(0<J.length){for(var j=0;j<J.length;j++){J[j].removeAttribute("id")}}for(var K=D[G].querySelectorAll(".wptb-actions"),k=K.length;k>0&&K[0]&&K[0].parentNode;){K[0].parentNode.removeChild(K[0]),k--}if(0<(I=D[G].querySelectorAll("[data-mce-bogus]")).length){for(var I=_toConsumableArray(I),q=0;q<I.length;q++){I[q]&&I[q].parentNode&&I[q].parentNode.removeChild(I[q])}}}}}}return z}},array=[],WPTB_Table=function(F,k,z){function J(N){function S(V,Y){var m=1<arguments.length&&void 0!==Y&&Y,X=m?"add":"remove";V.classList[X]("wptb-highlighted");for(var X=j(V),X=_slicedToArray(X,2),b=X[0],d=X[1],p=V.rowSpan,U=V.colSpan,Z=0;p>Z;Z++){for(var W=0;U>W;W++){array[b+Z][d+W]=m?1:0}}}var y=N.currentTarget,R=y.rowSpan,f=y.colSpan,u=document.getElementsByClassName("wptb-no-cell-action"),L=document.getElementsByClassName("wptb-single-action"),M=document.getElementsByClassName("wptb-multiple-select-action"),T=document.getElementById("wptb-left-scroll-panel-cell-settings");if((O=j(y))[0],O[1],document.select.isActivated()){O=N.shiftKey,y.className.match(/wptb-highlighted/)?1<(N=Array.from(document.querySelectorAll(".wptb-highlighted"))).length&&!O?(S(y,!0),N.map(function(a){a!==y&&S(a,!1)})):S(y,!1):(O||Array.from(document.querySelectorAll(".wptb-highlighted")).map(function(a){a!==y&&S(a,!1)}),S(y,!0));var P=document.getElementsByClassName("wptb-highlighted"),O=P.length;if(0===O){for(var g=0;g<M.length;g++){M[g].classList.remove("visible"),M[g].setAttribute("disabled","disabled")}for(g=0;g<u.length;g++){u[g].classList.add("visible"),u[g].removeAttribute("disabled")}for(g=0;g<L.length;g++){L[g].classList.remove("visible"),L[g].setAttribute("disabled","disabled")}T.classList.remove("visible")}else{if(1===O){for(g=0;g<M.length;g++){M[g].classList.remove("visible"),M[g].setAttribute("disabled","disabled")}for(g=0;g<u.length;g++){u[g].classList.remove("visible"),u[g].setAttribute("disabled","disabled")}for(g=0;g<L.length;g++){L[g].classList.add("visible"),L[g].removeAttribute("disabled")}P=P[0],WPTB_Helper.elementOptionsSet("table_cell_setting",P);var K=P.className.match(/wptb-element-((.+-)\d+)/i);["cellWidth","cellHeight"].map(function(i){var c,m,b,d="wptb-el-".concat(K[1],"-").concat(i),l="wptb-el-".concat(K[1],"-").concat(i,"Fixed");"cellWidth"!==i&&"cellHeight"!==i||(m=c="","cellWidth"===i?(c="width",m="getColumnWidth"):"cellHeight"===i&&(c="height",m="getRowHeight"),b=P.style[c],d=document.querySelectorAll("."+d),l=document.querySelector("."+l),d=_toConsumableArray(d),b||P.dataset["wptbFixed".concat(c.toUpperCase())]?(d.map(function(a){b?a.value=parseFloat(b,10):P.dataset["wptbFixed".concat(c.toUpperCase())]&&(a.value=P.dataset["wptbFixed".concat(c.toUpperCase())])}),l.checked=!0):(b=WPTB_Helper[m](D,P),d.map(function(a){a.value=b}),l.checked=!1))}),T.classList.add("visible")}else{for(g=0;g<M.length;g++){D.isSquare(array)?(M[g].classList.add("visible"),M[g].removeAttribute("disabled")):(M[g].classList.remove("visible"),M[g].setAttribute("disabled","disabled"))}for(g=0;g<u.length;g++){u[g].classList.remove("visible"),u[g].setAttribute("disabled","disabled")}for(g=0;g<L.length;g++){L[g].classList.remove("visible"),L[g].setAttribute("disabled","disabled")}T.classList.remove("visible")}}T=y.className.match(/wptb-element-table_cell_setting-((.+-)\d+)/i),T&&1<T.length&&(Q="wptb-el-table_cell_setting-".concat(T[1],"-").concat("emptyCell"),(Q=document.getElementById(Q))&&(Q.querySelector('input[type="checkbox"]').checked=y.classList.contains("wptb-empty")));var Q={countMarkedCells:O};WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/cell/mark",y,Q),Q=document.querySelector("#wptb-split-cell"),Q&&(1!==O||1===R&&1===f?(Q.classList.remove("visible"),Q.setAttribute("disabled","disabled")):(Q.classList.add("visible"),Q.removeAttribute("disabled")))}}function v(b){for(var a=0;a<b.length;a++){for(var c=0;c<b[a].length;c++){b[a][c]}}D.isSquare(b)}function x(){for(var p=document.getElementsByClassName("wptb-no-cell-action"),K=document.getElementsByClassName("wptb-single-action"),f=document.getElementsByClassName("wptb-multiple-select-action"),y=document.getElementById("wptb-left-scroll-panel-cell-settings"),b=D.getElementsByClassName("wptb-highlighted");b.length;){b[0].classList.remove("wptb-highlighted")}y.classList.remove("visible");for(var d=0;d<array.length;d++){for(var g=0;g<array[d].length;g++){array[d][g]=0}}for(var m=0;m<f.length;m++){f[m].classList.remove("visible"),f[m].setAttribute("disabled","disabled")}for(var L=0;L<p.length;L++){p[L].classList.add("visible"),p[L].removeAttribute("disabled")}for(var u=0;u<K.length;u++){K[u].classList.remove("visible"),K[u].setAttribute("disabled","disabled")}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/undo-select/active",D)}function B(){for(var g=[],f=[],p=0;p<D.rows.length;p++){for(var c=D.rows[p].getElementsByTagName("td"),m=0,b=0;b<c.length;b++){m+=c[b].colSpan}g.push(m)}H=Math.max.apply(null,g);for(var d=D.rows.length,p=0;d>p;p++){for(f[p]=[],b=0;H>b;b++){f[p].push(0)}}return v(f),f}var C,q,H,G=document.getElementsByClassName("wptb-settings-items"),w=document.getElementsByClassName("wptb-table-setup")[0],j=function(g){for(var d=[],m=0;H>m;m++){d[m]=0}for(m=0;m<D.rows.length;m++){for(var c=D.rows[m].getElementsByTagName("td"),f=cellPointer=0;H>f;f+=stepsToMove){if(stepsToMove=1,d[f]){d[f]--}else{var i=c[cellPointer++];if(i==g){return[m,f]}if(1<i.rowSpan){for(var b=0;b<i.colSpan;b++){d[f+b]=i.rowSpan-1}stepsToMove=i.colSpan}else{1<i.colSpan&&(stepsToMove=i.colSpan)}}}}};if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),F||k){for(var A=0;A<G.length;A++){"wptb-apply-inner-border"!==G[A].id&&G[A].classList.add("visible")}for((D=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),D.style.border="1px solid #d1d1d1",D.dataset.reconstraction=1,A=0;k>A;A++){(C=D.insertRow(-1)).classList.add("wptb-row");for(var I=0;F>I;I++){(q=new WPTB_Cell(J)).setCoords(A,I),q.getDOMElement().style.border="1px solid #d1d1d1",C.appendChild(q.getDOMElement())}}}else{if(!(z=z||document.querySelector(".wptb-preview-table"))){return}var D,h=(D=z).getElementsByTagName("td");if(0<h.length){for(var E=0;E<h.length;E++){WPTB_Cell(J,h[E])}}}D.mark=function(a){J(a)},D.wptbCell=function(b,a){return WPTB_Cell(b,a)},D.tableSM=function(){return WPTB_TableStateSaveManager},D.undoSelect=function(){x()},D.setMaxAmountOfCells=function(a){H=a},D.getMaxAmountOfCells=function(){return H},D.fillTableArray=B,D.recalculateIndexes=function(){WPTB_Helper.recalculateIndexes(this)},D.addColumnWidth=function(f,c){var i=D.getElementsByClassName("wptb-highlighted");if(0<i.length){for(var b=0;b<i.length;b++){var d=i[b].dataset.xIndex;d&&!function g(y,O){for(var m=D.rows,K=!1,L=[],Q=0;Q<m.length;Q++){for(var N=m[Q].children,M=0;M<N.length;M++){var o=N[M];if(o.dataset.xIndex==y){if(f){o.colSpan==O?(o.style.width=f+"px",o.removeAttribute("data-wptb-fixed-width"),K=!0):(o.style.width=null,o.dataset.wptbFixedWidth=f,Q!=m.length-1||K||g(y,O+1))}else{if(c){o.style.width=null,o.removeAttribute("data-wptb-fixed-width")}else{if(o.dataset.wptbFixedWidth){o.colSpan==O&&(o.style.width=o.dataset.wptbFixedWidth+"px",o.removeAttribute("data-wptb-fixed-width"))}else{if(o.style.width){for(var P=0;P<L.length;P++){L[P].style.width=o.style.width}L=[]}else{L.push(o)}}}}break}}}}(d,1)}D.tdDefaultWidth(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D)}},D.tdDefaultWidth=function(){for(var ae=D.rows,P=0,Y=0,ai=0,U=document.getElementsByClassName("wptb-table-setup")[0],X=U.offsetWidth,aa=[],ab=[],Q=0,ag=0,af="",W=window.getComputedStyle(D,null),O=W.getPropertyValue("border-left-width"),W=W.getPropertyValue("border-right-width"),Z=parseFloat(O,10)+parseFloat(W,10),ah=0;ah<ae.length;ah++){for(var L=ae[ah].children,ad=0;ad<L.length;ad++){var M,ac,N,K=L[ad];aa[parseFloat(K.dataset.xIndex)]||ab[parseFloat(K.dataset.xIndex)]?ab[parseFloat(K.dataset.xIndex)]?K.dataset.wptbFixedWidth||(K.dataset.wptbCssTdAutoWidth=!0):aa[parseFloat(K.dataset.xIndex)]&&K.removeAttribute("data-wptb-css-td-auto-width"):(K.style.width?(aa[parseFloat(K.dataset.xIndex)]=parseFloat(K.style.width),K.removeAttribute("data-wptb-css-td-auto-width")):K.dataset.wptbFixedWidth||(ab[parseFloat(K.dataset.xIndex)]=D.dataset.wptbTdWidthAuto?parseFloat(D.dataset.wptbTdWidthAuto,10):100,K.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(K,null)&&(M=(N=window.getComputedStyle(K,null)).getPropertyValue("padding-left"),ac=N.getPropertyValue("padding-right"),Q=parseFloat(M,10)+parseFloat(ac,10),ac=N.getPropertyValue("border-left-width"),N=N.getPropertyValue("border-right-width"),ag=parseFloat(ac,10)+parseFloat(N,10),ag/=2,aa[parseFloat(K.dataset.xIndex)]?(aa[parseFloat(K.dataset.xIndex)]+=Q,aa[parseFloat(K.dataset.xIndex)]+=ag,0==ad&&Z/2<=parseFloat(ac,10)?aa[parseFloat(K.dataset.xIndex)]+=parseFloat(ac,10)/2:0==ad&&Z/2>parseFloat(ac,10)&&(aa[parseFloat(K.dataset.xIndex)]+=Z/2-parseFloat(N,10)/2),ad==L.length-1&&Z/2<=parseFloat(N,10)?aa[parseFloat(K.dataset.xIndex)]+=parseFloat(N,10)/2:ad==L.length-1&&Z/2>parseFloat(N,10)&&(aa[parseFloat(K.dataset.xIndex)]+=Z/2-parseFloat(N,10)/2)):ab[parseFloat(K.dataset.xIndex)]&&(ab[parseFloat(K.dataset.xIndex)]+=Q,ab[parseFloat(K.dataset.xIndex)]+=ag,0==ad&&Z/2<=parseFloat(ac,10)?ab[parseFloat(K.dataset.xIndex)]+=parseFloat(ac,10)/2:0==ad&&Z/2>parseFloat(ac,10)&&(ab[parseFloat(K.dataset.xIndex)]+=Z/2-parseFloat(ac,10)/2),ad==L.length-1&&Z/2<=parseFloat(N,10)?ab[parseFloat(K.dataset.xIndex)]+=parseFloat(N,10)/2:ad==L.length-1&&Z/2>parseFloat(N,10)&&(ab[parseFloat(K.dataset.xIndex)]+=Z/2-parseFloat(ac,10)/2))))}}for(var g=0;g<aa.length;g++){aa[g]&&(Y+=aa[g])}for(var aj=0,R=0;R<ab.length;R++){ab[R]&&(ai+=ab[R],aj++)}P=Y+ai,D.dataset.wptbTableTdsSumMaxWidth=P,aj?(D.dataset.wptbCellsWidthAutoCount=aj,D.mergingellsHorizontally?D.dataset.wptbFixedWidthSize=Y:D.removeAttribute("data-wptb-fixed-width-size")):(D.removeAttribute("data-wptb-fixed-width-size"),D.removeAttribute("data-wptb-cells-width-auto-count"));var V,W=!1;X>P?aj?(D.style.minWidth="100%",D.mergingellsHorizontally?(D.style.width="auto",V=(V=(X-Y)/aj)-Q-ag,W=!0):D.style.width="100%"):(D.style.width="auto",D.style.minWidth=null,D.style.maxWidth=null):(D.style.maxWidth=null,D.style.minWidth=P+"px",D.style.width="auto",V=D.dataset.wptbTdWidthAuto||"100",W=!0),X=document.head,!X||(P=X.querySelector('style[data-wptb-td-auto-width="true"]'))&&X.removeChild(P),W&&((af=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),af.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+V+"px}",X&&X.appendChild(af)),D.dataset.wptbTableAlignment?(af=D.dataset.wptbTableAlignment,U.offsetWidth<D.offsetWidth?D.style["float"]=null:D.style["float"]="center"==af?null:af,U.style["float"]="center"==af?null:af,V&&D.dataset.wptbTableContainerMaxWidth&&D.offsetWidth<D.dataset.wptbTableContainerMaxWidth&&(D.style.width="100%")):D.style["float"]=null},D.addRowHeight=function(f,c){var i=D.getElementsByClassName("wptb-highlighted");if(0<i.length){for(var b=0;b<i.length;b++){var d=i[b].dataset.yIndex;d&&!function g(y,O){for(var m=D.rows,K=!1,L=[],Q=0;Q<m.length;Q++){for(var N=m[Q].children,M=0;M<N.length;M++){var o=N[M];if(o.dataset.yIndex==y){if(f){o.rowSpan!=O?(o.style.height=null,o.dataset.wptbFixedHeight=f,M!=N.length-1||K||g(y,O+1)):(o.style.height=f+"px",o.removeAttribute("data-wptb-fixed-heidht"),K=!0)}else{if(c){o.style.height=null,o.removeAttribute("data-wptb-fixed-heidht")}else{if(o.dataset.wptbFixedHeight){(o.rowSpan=O)&&(o.style.height=o.dataset.wptbFixedHeight+"px",o.removeAttribute("data-wptb-fixed-width"))}else{if(o.style.height){for(var P=0;P<L.length;P++){L[P].style.height=o.style.height}L=[]}else{L.push(o)}}}}}}}}(d,1)}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D)}},D.reconstraction=function(){var b=D.getElementsByTagName("td");D.mergingellsHorizontally=!1,D.mergingCellsVertically=!1,D.dataset.reconstraction=1;for(var a=0,c=0;c<b.length&&(1<b[c].colSpan&&(D.dataset.reconstraction=0,D.mergingellsHorizontally=!0,a++),1<b[c].rowSpan&&(D.dataset.reconstraction=0,D.mergingCellsVertically=!0,a++),2!=a);c++){}},D.addColumnEnd=function(){var d,b,f,c=document.getElementsByClassName("wptb-preview-table");(b=0<c.length?c[0].querySelector("td"):b)&&(f=b.getAttribute("style"));for(var a=0;a<D.rows.length;a++){d=new WPTB_Cell(J),f&&(d.getDOMElement().setAttribute("style",f),d.getDOMElement().style.width=null,d.getDOMElement().style.height=null,d.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),D.rows[a].appendChild(d.getDOMElement()),array[a].push(0)}H++,D.recalculateIndexes(),D.tdDefaultWidth(),D.addRowHeight(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()},D.addColumnStart=function(){var f,c,g,d,a=document.getElementsByClassName("wptb-preview-table");(g=0<a.length?a[0].querySelector("td"):g)&&(d=g.getAttribute("style"));for(var b=0;b<D.rows.length;b++){f=new WPTB_Cell(J),d&&(f.getDOMElement().setAttribute("style",d),f.getDOMElement().style.width=null,f.getDOMElement().style.height=null,f.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),(c=D.rows[b].getElementsByTagName("td")[0])?D.rows[b].insertBefore(f.getDOMElement(),c):D.rows[b].appendChild(f.getDOMElement()),array[b].push(0)}H++,D.recalculateIndexes(),D.tdDefaultWidth(),D.addRowHeight(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()},D.addColumnAfter=function(K){function O(d){var b=new WPTB_Cell(J);return d&&(b.getDOMElement().setAttribute("style",d),b.getDOMElement().style.width=null,b.getDOMElement().style.height=null),b.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor"),b}var c,o,r,P=D.rows;if(null!=K&&"number"==typeof K?(r=K,c=document.querySelector('[data-x-index="'+r+'"]')):(c=document.querySelector(".wptb-highlighted"),r=j(c)[1]),c){if(o=c.getAttribute("style"),H-r-c.colSpan+1==1){D.addColumnEnd()}else{for(var L=0;L<P.length;L++){for(var a=P[L].children,g=0;g<a.length;g++){if(parseInt(a[g].dataset.xIndex)<=r){if(parseInt(a[g].dataset.xIndex)+a[g].colSpan==r+c.colSpan){var N=O(o),M=a[g].nextSibling;M?P[L].insertBefore(N.getDOMElement(),M):P[L].appendChild(N.getDOMElement());break}if(parseInt(a[g].dataset.xIndex)+a[g].colSpan>r+c.colSpan){a[g].colSpan++,1<a[g].rowSpan&&(L+=a[g].rowSpan-1);break}}else{if(parseInt(a[g].dataset.xIndex)>r){N=O(o),P[L].insertBefore(N.getDOMElement(),a[g]);break}}}}for(var u=0;u<array.length;u++){array[u].push(0)}H++,v(array),D.recalculateIndexes(),D.addColumnWidth(),D.addRowHeight(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()}}},D.addColumnBefore=function(){var a=document.querySelector(".wptb-highlighted"),a=j(a)[1];0===a?D.addColumnStart():D.addColumnAfter(a-1)},D.addRowToTheEnd=function(){var f,c=D.insertRow(-1),g=document.getElementsByClassName("wptb-preview-table");if(c.classList.add("wptb-row"),0<g.length){for(var g=g[0],a=0;H>a;a++){var b=new WPTB_Cell(J),d=g.querySelector('[data-x-index="'+a+'"]');d&&(d=d.getAttribute("style"),b.getDOMElement().setAttribute("style",d),b.getDOMElement().style.height=null),c.appendChild(b.getDOMElement())}f=Array.from(array[0]),array.push(f),v(array),D.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(D),D.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()}},D.addRowToTheStart=function(){var f,c=D.insertRow(0),g=document.getElementsByClassName("wptb-preview-table");if(c.classList.add("wptb-row"),0<g.length){for(var g=g[0],a=0;H>a;a++){var b=new WPTB_Cell(J),d=g.querySelector('[data-x-index="'+a+'"]');d&&(d=d.getAttribute("style"),b.getDOMElement().setAttribute("style",d),b.getDOMElement().style.height=null),c.appendChild(b.getDOMElement())}f=Array.from(array[0]),array.push(f),v(array),D.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(D),D.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()}},D.addRowBefore=function(){for(var m,f=document.querySelector(".wptb-highlighted"),s=f.getAttribute("style"),c=j(f)[0],g=(c=0===c?-1:c)-1;g>=0;g--){var p=D.rows[g].children,b=p.length;if(b>0){for(var d=0;b>d;d++){if(1==p[d].rowSpan){c=g,m=!0;break}}}if(m){break}}-1===c?D.addRowToTheStart():D.addRowAfter(c,s)},D.addRowAfter=function(L,R){var b,o=null!=L&&"number"==typeof L||null!=R?L:(R=(b=document.querySelector(".wptb-highlighted")).getAttribute("style"),(L=j(b)[0])+b.rowSpan-1),r=0;if(o<D.rows.length-1){for(var S=0;o>=S;S++){var N=D.rows[S].children,M=N.length;if(M>0){for(var a=0;M>a;a++){o<N[a].rowSpan-1+S&&N[a].rowSpan++}}}var g=D.rows[o+1].children,O=g.length;if(O>0){for(var K=0;O>K;K++){r+=g[K].colSpan}}}else{r=array[0].length}var P=D.insertRow(o+1);for(P.classList.add("wptb-row"),I=0;r>I;I++){var u=new WPTB_Cell(J),Q=D.querySelector('[data-x-index="'+I+'"]');Q&&(Q=Q.getAttribute("style"),u.getDOMElement().setAttribute("style",Q),u.getDOMElement().style.height=null),P.appendChild(u.getDOMElement())}b=Array.from(array[0]),array.push(b),v(array),D.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(D),D.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after"),(new WPTB_TableStateSaveManager).tableStateSet()},D.isSquare=function(p){for(var K,f,y=-1,b=-1,d=-1,g=-1,m=0,L=0;L<p.length;L++){for(var u=0;u<p[L].length;u++){1==p[L][u]&&((b>u||-1==b)&&(b=u),(y>L||-1==y)&&(y=L))}}for(L=p.length-1;L>-1;L--){for(u=p[L].length-1;u>-1;u--){1==p[L][u]&&(u>g&&(g=u),L>d&&(d=L))}}for(L=y;d>L;L++){for(u=b;g>u;u++){if(0==p[L][u]||null==p[L][u]){return !1}}}for(L=0;L<p.length;L++){for(u=0;u<p[L].length;u++){1==p[L][u]&&m++}}return(K=d-y+1)*(f=g-b+1)===m&&[K,f]},D.mergeCells=function(){for(var o=D.isSquare(array),K=o[0],o=o[1],f=document.querySelector(".wptb-highlighted"),y=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),b=[],g=0;g<y.length;g++){var m=y[g].getElementsByClassName("wptb-ph-element");if(0<m.length){for(var L=m.length,u=0;L>u;u++){b.push(m[u])}}y[g].parentNode.removeChild(y[g])}if(0<b.length){for(var p=0;p<b.length;p++){f.appendChild(b[p])}}f.colSpan=o,f.rowSpan=K,D.recalculateIndexes(),D.reconstraction(),o=f.style.width,K=f.dataset.wptbFixedWidth,o?D.addColumnWidth(parseFloat(o,10)):K?D.addColumnWidth():D.addColumnWidth(!1,!0),o=f.style.height,K=f.dataset.wptbFixedHeight,o?D.addRowHeight(parseFloat(o,10)):K?D.addRowHeight():D.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()},D.splitCell=function(){var O=document.getElementsByClassName("wptb-highlighted")[0],V=O.rowSpan,o=O.colSpan,a=O.getAttribute("style"),K=j(O)[0],L=D.rows[K],W=O.dataset.xIndex;O.rowSpan=1;for(var Q=O.colSpan=1;o>Q;Q++){var P=new WPTB_Cell(J);P.getDOMElement().setAttribute("style",a),P.getDOMElement().classList.add("wptb-highlighted"),O.nextSibling?L.insertBefore(P.getDOMElement(),O.nextSibling):L.appendChild(P.getDOMElement())}if(V>1){for(var g=1;V>g;g++){var u=void 0,S=D.rows[K+g],R=S.children,N=R.length;if(N>0){for(var T=0;N>T;T++){if(Number(R[T].dataset.xIndex)>Number(W)){u=R[T];break}}}for(var M=0;o>M;M++){var U=new WPTB_Cell(J);U.getDOMElement().setAttribute("style",a),null!=u?S.insertBefore(U.getDOMElement(),u):S.appendChild(U.getDOMElement())}}}D.recalculateIndexes(),D.reconstraction(),D.addColumnWidth(),D.addRowHeight(),WPTB_Helper.dataTitleColumnSet(D),x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()},D.findRowspannedCells=function(f){var c=[];if(actualPoints=function(m){for(var l=D.rows[m].getElementsByTagName("td"),o=0,i=0;i<l.length;i++){o+=l[i].colSpan}return o}(f),actualPoints===H){return[]}for(var g=H-actualPoints,b=f-1;b>=0&&g;b--){for(var d=D.rows[b].getElementsByTagName("td"),b=0;b<d.length;b++){1<d[b].rowSpan&&(c.push(d[b]),g-=d[b].colSpan)}}return c},D.addLackingCells=function(){for(var f=[],c=0;c<D.rows.length;c++){f.push(0)}for(c=0;c<D.rows.length;c++){for(var m=D.rows[c].getElementsByTagName("td"),d=0;d<m.length;d++){if(1<m[d].rowSpan){for(var g=1;g<m[d].rowSpan;g++){f[c+g]++}}}}for(c=0;c<D.rows.length;c++){for(var m=D.rows[c].getElementsByTagName("td"),a=0,d=0;d<m.length;d++){a+=m[d].colSpan}for(a+=f[c],difference=H-a,d=0;d<difference;d++){var b=new WPTB_Cell(J);D.rows[c].appendChild(b.getDOMElement())}}},D.deleteRow=function(){var V=document.querySelector(".wptb-highlighted"),u=V.getAttribute("style"),N=V.rowSpan,P=j(V)[0];null==N&&(N=1);for(var Q=0;N>Q;Q++){var K=D.rows[P].children,X=D.rows[P+1],W=void 0,O=[];if(null!=X){for(var Y=(W=X.children).length,o=0;o<K.length;o++){if(1<K[o].rowSpan){var U=new WPTB_Cell(J);U.getDOMElement().setAttribute("style",u),U.getDOMElement().colSpan=K[o].colSpan,U.getDOMElement().rowSpan=K[o].rowSpan-1;for(var p=void 0,R=0;Y>R;R++){if(Number(W[R].dataset.xIndex)>Number(K[o].dataset.xIndex)){p=W[R];break}}p?O.push([U,p]):O.push([U])}}if(0<O.length){for(var r=0;r<O.length;r++){null!=O[r][1]?X.insertBefore(O[r][0].getDOMElement(),O[r][1]):X.appendChild(O[r][0].getDOMElement())}}}var g,a=D.rows;if(0<a.length){for(var Z=0;P>Z;Z++){var L=a[Z].children;if(0<L.length){for(var M=0;M<L.length;M++){L[M].rowSpan-1>=P-Z&&L[M].rowSpan--}}}}g=Array.from(array[0]),array.pop(g),v(array),D.getElementsByTagName("tbody")[0].removeChild(D.rows[P]),0==D.rows.length?(WPTB_Helper.toggleTableEditMode(),w.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(g=document.getElementsByClassName("wptb-save-btn")).length&&((g=g[0]).classList.add("wptb-save-disabled"),g.classList.remove("active"))):(D.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(D),WPTB_Helper.dataTitleColumnSet(D),D.reconstraction())}x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()},D.deleteColumn=function(){for(var m=document.querySelector(".wptb-highlighted"),K=m.dataset.xIndex,c=m.colSpan,p=0;c>p;p++){for(var b=0;b<D.rows.length;b++){var f=D.rows[b].children,g=f.length;if(g>0){for(var L=g-1;L>=0;L--){if(Number(f[L].dataset.xIndex)==Number(K)){1<f[L].colSpan?f[L].colSpan--:D.rows[b].removeChild(f[L]);break}if(Number(f[L].dataset.xIndex)<Number(K)&&Number(f[L].dataset.xIndex)+Number(f[L].colSpan-1)>=K){1<f[L].colSpan&&f[L].colSpan--;break}}}}for(var o,y=0;y<D.rows.length;y++){null!=array[y]&&array[y].pop()}H--,0==D.querySelectorAll("td").length?(WPTB_Helper.toggleTableEditMode(),w.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(o=document.getElementsByClassName("wptb-save-btn")).length&&((o=o[0]).classList.add("wptb-save-disabled"),o.classList.remove("active"))):(D.recalculateIndexes(),D.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(D),D.reconstraction())}x(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",D),(new WPTB_TableStateSaveManager).tableStateSet()},array=B(),x(),v(array),w.appendChild(D),D.recalculateIndexes(!0),D.reconstraction(),D.tdDefaultWidth(),w.onresize=function(){D.tdDefaultWidth()},WPTB_LeftPanel(),WPTB_Helper.wptbDocumentEventGenerate("wptb:table:generated",document),WPTB_Helper.elementStartScript(D,"table_setting"),WPTB_Helper.elementOptionsSet("table_setting",D)},WPTB_TableSettingsData={borderColor:"",setTableSetting:function(b,a){this[b]=a},getTableSetting:function(a){return this[a]}},WPTB_TableStateSaveManager=function(){this.tableStateSet=function(y){if(!(y&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var E=document.getElementsByClassName("wptb-table-setup"),k="";0<E.length?k=(E=E[0]).querySelector(".wptb-preview-table"):E="",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));var C="";if(E){for(var f=(C=E.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),j=0;j<f.length;j++){f[j].classList.remove("wptb-highlighted")}for(var v=C.getElementsByClassName("wptb-directlyhovered"),w=0;w<v.length;w++){v[w].classList.remove("wptb-directlyhovered")}var F=C.querySelectorAll(".mce-content-body");if(0<F.length){for(var A=0;A<F.length;A++){F[A].classList.remove("mce-content-body")}}var z=C.querySelectorAll("[data-mce-style]");if(0<z.length){for(var h=0;h<z.length;h++){z[h].removeAttribute("data-mce-style")}}var D=C.querySelectorAll("[id^=mce_]");if(0<D.length){for(var q=0;q<D.length;q++){D[q].removeAttribute("id")}}}y="",E=document.head,!E||(B=E.querySelector('style[data-wptb-td-auto-width="true"]'))&&(y=B.innerHTML);var E="",B=document.getElementById("wptb-setup-name");B&&(E=B.value),window.wptbTableStateSaving.push([C,y,E]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,0<window.wptbTableStateSaving.length-1&&0<(x=document.getElementsByClassName("wptb-undo")).length&&(x=x[0]).classList.remove("wptb-undoredo-disabled");var x=document.getElementsByClassName("wptb-redo");0<x.length&&(x=x[0]).classList.add("wptb-undoredo-disabled"),x=document.getElementsByClassName("wptb-save-btn"),0<x.length&&(!(x=x[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==x.dataset.wptbTableStateNumberSave||!k?(x.classList.add("wptb-save-disabled"),x.classList.remove("active")):(x.classList.remove("wptb-save-disabled"),x.classList.add("active")))}},this.tableStateGet=function(b){if(b&&window.wptbTableStateSaving&&0<window.wptbTableStateSaving.length){if("undo"==b){if(!(0<window.wptbTableStateNumberShow)){return !1}window.wptbTableStateNumberShow--}else{if("redo"==b){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length)){return !1}window.wptbTableStateNumberShow++}}var a=document.getElementsByClassName("wptb-undo");0<a.length&&(a=a[0],0==window.wptbTableStateNumberShow?a&&a.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&a&&a.classList.remove("wptb-undoredo-disabled")),b=document.getElementsByClassName("wptb-redo"),0<b.length&&(b=b[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?b&&b.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&b&&b.classList.remove("wptb-undoredo-disabled")),a=document.getElementsByClassName("wptb-save-btn"),0<a.length&&(!(a=a[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==a.dataset.wptbTableStateNumberSave?(a.classList.add("wptb-save-disabled"),a.classList.remove("active")):(a.classList.add("active"),a.classList.remove("wptb-save-disabled")));var c,b=document.getElementsByClassName("wptb-table-setup");0<b.length&&(b=b[0],window.wptbTableStateSaving[window.wptbTableStateNumberShow]&&(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML" in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(b.outerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML),(b=document.querySelector(".wptb-table-setup"))&&0==b.children.length&&(a.classList.add("wptb-save-disabled"),a.classList.remove("active")),(b=document.head)&&((a=b.querySelector('style[data-wptb-td-auto-width="true"]'))&&b.removeChild(a),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]&&((c=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),c.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],b.appendChild(c))),c=document.getElementById("wptb-setup-name"),void 0!==window.wptbTableStateSaving[window.wptbTableStateNumberShow][2]&&c&&(c.value=window.wptbTableStateSaving[window.wptbTableStateNumberShow][2])),0<(c=document.getElementsByTagName("body")).length&&(c=c[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel(),(c=document.getElementById("wptb-left-scroll-panel-cell-settings"))&&c.classList.remove("visible"))}},this.tableStateClear=function(){delete window.wptbTableStateSaving,delete window.wptbTableStateNumberShow;var a=document.getElementsByClassName("wptb-save-btn");0<a.length&&(a=a[0]).removeAttribute("data-wptb-table-state-number-save"),a=document.getElementsByClassName("wptb-undo"),0<a.length&&(a=a[0]).classList.add("wptb-undoredo-disabled"),a=document.getElementsByClassName("wptb-redo"),0<a.length&&(a=a[0]).classList.add("wptb-undoredo-disabled")}};!function(){var b,a;wptb_admin_object.upsells&&!wptb_admin_object.upsells.pro&&(b=document.querySelector('.wptb-panel-toggle-group[id="pro"] .wptb-panel-toggle-target'),(a=document.createElement("div")).classList.add("wptb-upsells-pro-overlay"),a.innerHTML=wptb_admin_object.upsells.elements.leftPanel,b.style.position="relative",b.appendChild(a))}();var WPTB_innerElementSet=function t(a){a.ondragenter=function(b){-1==b.dataTransfer.types.indexOf("wptbelement")&&-1==b.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,b),a.classList.add("wptb-ondragenter"))},a.ondragover=function(b){b.preventDefault(),WPTB_DropHandle(this,b)},a.ondragleave=function(b){WPTB_DropHandle(this,b,!0)},a.ondrop=function(f){var h,c,d,g;if(this.classList.remove("wptb-ondragenter"),f.preventDefault(),f.stopPropagation(),f.dataTransfer.getData("wptbElement")||f.dataTransfer.getData("node")){if(0<document.getElementsByClassName("wptb-drop-handle").length&&(c=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(d=document.getElementsByClassName("wptb-drop-border-marker")[0]),h=f.dataTransfer.getData("wptbElement")?(h=WPTB_Helper.newElementProxy(f.dataTransfer.getData("wptbElement"))).getDOMElement():(g=f.dataTransfer.getData("node"),document.getElementsByClassName(g)[0]),"td_relative"===WPTB_Helper.getDragRelativeType()){WPTB_DropHandle(this,f,!0),WPTB_Helper.getParentOfType("td",f.target).appendChild(h),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",h)}else{if("block"!=c.style.display){return}"Drop Here"==c.dataset.text?((b=c.getDOMParentElement()).appendChild(h),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",h)):(b=(g=c.getDOMParentElement()).parentNode,"Above Element"==c.dataset.text?(b.insertBefore(h,g),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",h)):"Below Element"==c.dataset.text&&(g=g.nextSibling,b.insertBefore(h,g),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",h)));var b=b.parentNode;!WPTB_Helper.rowIsTop(b)||(b=WPTB_Helper.findAncestor(b,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(b),h.className.match(/wptb-element-(.+)-(\d+)/i)[1],f.dataTransfer.getData("wptbElement")}return c&&(c.style.display="none",d.style.display="none"),t(h),h.classList.contains("wptb-image-container")&&!h.classList.contains("wptb-moving-mode")||(h.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet()),!0}},a.onmouseover=function(b){a.classList.remove("wptb-ondragenter")}},applyGenericItemSettings=function(j,p){var f,m=2<arguments.length&&void 0!==arguments[2]&&arguments[2],b=j.getDOMElement();if(b.classList.contains("wptb-ph-element")){if(null==p||1==m){if(f=WPTB_ElementIdProvider.getNewId(j.kind),m){for(var d,g,h=_toConsumableArray(b.attributes),q=0;q<h.length;q++){h[q]&&"object"===_typeof(h[q])&&h[q].nodeName&&(d=new RegExp("data-wptb-el-"+j.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),(g=h[q].nodeName.match(d))&&Array.isArray(g)&&(d=h[q].nodeName.replace(j.kind+"-"+g[1],j.kind+"-"+f),g=h[q].nodeValue,b.removeAttribute(h[q].nodeName),b.setAttribute(d,g)))}}}else{p&&!m&&(f=(k=p.split("-"))[k.length-1])}var k=b.className.match(/wptb-element-(.+)-(\d+)/i);k&&b.classList.remove(k[0]),b.classList.contains("wptb-ph-element")||b.classList.add("wptb-ph-element"),b.classList.contains("wptb-element-"+j.kind+"-"+f)||b.classList.add("wptb-element-"+j.kind+"-"+f),WPTB_Helper.elementStartScript(j.getDOMElement()),new WPTB_ElementOptions(j,f,p),document.counter.increment(j.kind)}b.onmouseenter=function(c){var a;c.target.classList.contains("wptb-text-container")&&(1!==b.children.length||1===(a=b.children[0].lastChild).children.length&&"<br>"===a.innerHTML&&(a.innerHTML="")),c.target.classList.contains("wptb-moving-mode")||((c=new WPTB_ActionsField).addActionField(1,b),c.setParameters(b),b.classList.remove("wptb-ondragenter"))},b.onmouseleave=function(a){(new WPTB_ActionsField).leaveFromField(a,b)}};!function(a){(self||global).WPTB_IconManager=a()}(function(){return(self||global).wptb_admin_object?new function(d){function c(i){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,j=2<arguments.length&&void 0!==arguments[2]&&arguments[2],g=document.createElement("div");return h&&(h=Array.isArray(h)?h:[h]).map(function(a){g.classList.add(a)}),g.innerHTML=i,j?g.outerHTML:g}if(!d){throw new Error("no icon list is defined for WPTB_IconManager instance")}var f=d,b={};this.getIconList=function(){return f},this.getIcon=function(g){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,h=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(function(j,k){var m=function(l){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return b[l]?c(b[l],o,i):null}(g,a,h);return m?j(m):f[g]?fetch(f[g]).then(function(i){if(i.ok){return i.text()}throw new Error("an error occurred while fetching icon [".concat(g,"]"))}).then(function(o){if(o.error){throw new Error("an error occurred while fetching icon [".concat(g,"]"))}var l;return l=o,b[g]=l,j(c(o,a,h))})["catch"](function(i){return k(new Error(i))}):k(new Error("no icon found with the given name of [".concat(g,"]")))})},this.getIconUrl=function(g){var a=null;return a=f[g]?f[g]:a}}(wptb_admin_object.iconManager):null});