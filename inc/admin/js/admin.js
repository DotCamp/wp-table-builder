function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_ActionsField=function l(){var o=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(e,t){var a=document.getElementsByTagName("body")[0],n=document.getElementsByClassName("wptb-actions");if(0!=n.length){var r=n[0].activeElem;for(r&&r.classList.remove("wptb-directlyhovered");0!=n.length;)n[0].parentNode.removeChild(n[0])}1==e&&(r=document.createElement("span"),e=document.createElement("span"),(n=document.createElement("div")).classList.add("wptb-actions"),r.classList.add("dashicons","dashicons-trash","wptb-delete-action"),e.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),n.appendChild(e),n.appendChild(r),a.appendChild(n),n.activeElem=t,n.type=1,r.onclick=function(e){var t=e.target.parentNode.activeElem,e=t.parentNode;t.className.match(/wptb-element-(.+)-(\d+)/i);t&&e.removeChild(t),t&&"object"===_typeof(t)&&t.hasOwnProperty("kind")&&"text"==t.kind&&(e=e.parentNode,!WPTB_Helper.rowIsTop(e)||(e=WPTB_Helper.findAncestor(e,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(e)),(new l).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.wptbDocumentEventGenerate("element:removed:dom",document,t)},e.onclick=function(e){var t,a,n=e.target.parentNode.activeElem,r=n.parentNode,e=n.className.match(/wptb-element-(.+)-(\d+)/i);e&&Array.isArray(e)?(e=e[1],(t={}).kind=e,t.elemProt=n,t.tinyMceClear=!0,(t=new WPTB_ElementObject(t)).getDOMElement().classList.remove("edit-active"),r.insertBefore(t.getDOMElement(),n.nextSibling)):(t={},(a=n.cloneNode(!0)).classList.remove("wptb-directlyhovered"),t.getDOMElement=function(){return a},applyGenericItemSettings(t),r.insertBefore(t.getDOMElement(),n.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",n,t.getDOMElement())),WPTB_innerElementSet(t.getDOMElement()),(new l).setParameters(n),(new WPTB_TableStateSaveManager).tableStateSet()},t.classList.contains("wptb-ph-element")&&((t=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),t.draggable=!0,n.appendChild(t),t.ondragstart=function(e){var t,a=wp.template("wptb-element-icons-directories")({}),n=JSON.parse(a),r=e.target.parentNode.activeElem,l=r.className.match(/wptb-element-(.+)-(\d+)/i);l&&Array.isArray(l)?(a=l[1],r.classList.add("wptb-moving-mode"),n&&"object"===_typeof(n)&&n[a]&&(t=WPTB_Helper.getElementIcon(n[a])),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.setData("node","wptb-element-"+l[1]+"-"+l[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+l[1]+"-"+l[2]),e.dataTransfer.setData("wptbElIndic-"+l[1],"wptbElIndic-"+l[1]),"text"==(e=e.target.parentNode.activeElem).kind&&(e=e.parentNode.parentNode,!WPTB_Helper.rowIsTop(e)||(e=WPTB_Helper.findAncestor(e,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(e))):o.style.display="none",o.actionsHide()},t.ondragend=function(e){WPTB_Helper.elementDragEndClear()}),n.style.display="flex",o.wptbActions=n),WPTB_Helper.wptbDocumentEventGenerate("wptb:actionfield:generated",document)},this.setParameters=function(t){var e,a;o.wptbActions||(0<(a=document.getElementsByClassName("wptb-actions")).length?o.wptbActions=a[0]:o.wptbActions=!1),o.wptbActions&&o.wptbActions.classList.contains("wptb-actions")&&(o.wptbActions.style.display="flex",e=t.getBoundingClientRect(),a=document.getElementsByClassName("wptb-container")[0],o.wptbActions.style.top=parseFloat(e.top)-15+"px",o.wptbActions.style.left=parseFloat(e.right)-parseFloat(o.wptbActions.clientWidth)+1+"px",o.wptbActions.style.display="flex",t.classList.add("wptb-directlyhovered"),a.onscroll=function(){var e=t.getBoundingClientRect();o.wptbActions.style.top=parseFloat(e.top)-15+"px"})},this.leaveFromField=function(e,t,a){var n;if(o.wptbActions||(0<(n=document.getElementsByClassName("wptb-actions")).length?o.wptbActions=n[0]:o.wptbActions=!1),o.wptbActions){if(e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-actions")||e.relatedTarget.classList.contains("wptb-move-action")||e.relatedTarget.classList.contains("wptb-duplicate-action")||e.relatedTarget.classList.contains("wptb-delete-action")||e.relatedTarget.classList.contains("wptb-prebuilt-mark-action")))return o.wptbActions||(o.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void(o.wptbActions.onmouseleave=function(e){null!=e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&e.relatedTarget!=o.wptbActions.activeElem&&(WPTB_Helper.findAncestor(e.relatedTarget,"wptb-directlyhovered"),o.wptbActions.activeElem),(new l).leaveFromField(e,e.relatedTarget.parentNode.parentNode),e.target.activeElem.classList.remove("wptb-directlyhovered")});t.classList.remove("wptb-directlyhovered"),o.wptbActions.style.display="none",e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&(o.addActionField(1,e.relatedTarget.parentNode),o.setParameters(e.relatedTarget.parentNode))}},this.actionsRemove=function(){var e;o.wptbActions||0<(e=document.getElementsByClassName("wptb-actions")).length&&(o.wptbActions=e[0]),o.wptbActions&&o.wptbActions.parentNode.removeChild(o.wptbActions)},this.actionsHide=function(){var e;o.wptbActions||0<(e=document.getElementsByClassName("wptb-actions")).length&&(o.wptbActions=e[0]),o.wptbActions&&(o.wptbActions.style.opacity=0)}};!function(){var e=window.location.href;new RegExp("[?&]page=wptb-builder").exec(e)&&document.addEventListener("DOMContentLoaded",function(){var n,e,r=WPTB_Helper.detectMode();r?(n=new XMLHttpRequest,e=ajaxurl+"?action=get_table&id="+r,n.open("GET",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(e){var t,a;4==this.readyState&&200==this.status&&(a=JSON.parse(n.responseText),document.getElementById("wptb-setup-name").value=a[0],a[1]?((t=document.getElementsByClassName("wptb-table-setup")[0]).appendChild(WPTB_Parser(a[1])),document.getElementsByTagName("body")[0],WPTB_Table(),(a=document.querySelector(".wptb-preview-table"))&&(a.className.match(/wptb-element-((.+-)\d+)/i)||a.classList.add("wptb-element-main-table_setting-"+r),a.dataset.wptbTableContainerMaxWidth&&(t.style.maxWidth=a.dataset.wptbTableContainerMaxWidth+"px",a.tdDefaultWidth())),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()):document.getElementsByClassName("wptb-table-generator")[0].style.display="table")},n.send(null)):(new WPTB_TableStateSaveManager).tableStateSet(),document.counter=new ElementCounters,document.select=new MultipleSelect;WPTB_Initializer();settings=WPTB_Settings()})}();var WPTB_Cell=function(e,a){var t;a||((a=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px",""!=(t=jQuery("#wptb-table-inner-border-number").val())&&0!=parseInt(t)&&(a.style.border=t+"px solid "+jQuery("#wptb-table-border-color").val()),a.classList.add("wptb-droppable","wptb-cell"),t=(t=WPTB_Helper.newElementProxy("text")).getDOMElement(),a.appendChild(t)),a.draggable=!1,e&&(a.onclick=e),a.ondblclick=function(e){e.stopPropagation();var t=document.querySelector(".wptb-table-setup");!t||t.classList.contains("wptb-preview-table-manage-cells")||"0"===e.target.dataset.yIndex&&"1"===t.dataset.wptbSortableTable||e.target!=e.currentTarget||(WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",e.target),e=(e=WPTB_Helper.newElementProxy("text")).getDOMElement(),a.appendChild(e),WPTB_innerElementSet(e))},WPTB_innerElementSet(a),WPTB_Helper.elementStartScript(a,"table_cell_setting");var l=a.getElementsByClassName("wptb-ph-element");if(0<l.length){function n(n){l[n].getDOMElement=function(){return l[n]},WPTB_innerElementSet(l[n]);var r=l[n].className.match(/wptb-element-((.+-)\d+)/i);r&&Array.isArray(r)&&function(){var e=r[1].split("-");l[n].kind=e[0],applyGenericItemSettings(l[n],r[1]);var a=l[n].getElementsByClassName("wptb-in-element");if(0<a.length)for(var t=0;t<a.length;t++)!function(e){var t={getDOMElement:function(){return a[e]}};applyGenericItemSettings(t)}(t)}()}for(var r=0;r<l.length;r++)n(r)}return this.getDOMElement=function(){return a},this.setCoords=function(e,t){var a=this.getDOMElement();a.dataset.yIndex=e,a.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},a.getCellDimensions=function(){var e=window.getComputedStyle(this,null),t=e.getPropertyValue("padding-left"),a=e.getPropertyValue("padding-right"),n=e.getPropertyValue("border-left-width"),r=e.getPropertyValue("border-right-width"),l=e.getPropertyValue("padding-top"),o=e.getPropertyValue("padding-bottom"),s=e.getPropertyValue("border-top-width"),i=e.getPropertyValue("border-bottom-width"),c=parseInt(this.offsetWidth,10)-parseInt(t,10)-parseInt(a,10),d=parseInt(this.offsetHeight,10)-parseInt(l,10)-parseInt(o,10),p=WPTB_Helper.findAncestor(this,"wptb-preview-table");return p&&("collapse"===p.style.borderCollapse?(c=c-parseInt(n,10)/2-parseInt(r,10)/2,d=d-parseInt(s,10)/2-parseInt(i,10)/2,t=(e=window.getComputedStyle(p,null)).getPropertyValue("border-left-width"),a=e.getPropertyValue("border-right-width"),l=e.getPropertyValue("border-top-width"),o=e.getPropertyValue("border-bottom-width"),(e=this.parentNode)&&"tr"===e.nodeName.toLowerCase()&&(e.firstChild&&e.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(t,10)>parseInt(n,10)&&(c+=-(parseInt(t,10)-parseInt(n,10))/2),e.lastChild&&e.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(a,10)>parseInt(r,10)&&(c+=-(parseInt(a,10)-parseInt(r,10))/2),(e=e.parentNode)&&"body"===e.nodeName.toLowerCase()&&(e.firstChild&&e.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(l,10)>parseInt(s,10)&&(d+=(parseInt(l,10)-parseInt(s,10))/2),e.lastChild&&e.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(o,10)>parseInt(i,10)&&(d+=(parseInt(o,10)-parseInt(i,10))/2)))):"separate"===p.style.borderCollapse&&(c=c-parseInt(n,10)-parseInt(r,10),d=d-parseInt(s,10)-parseInt(i,10))),{width:parseInt(c),height:parseInt(d)}},this};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var a=0;a<e;a++)for(var n=t.rows[a].children,r=0;r<n.length;r++)if(1<n[r].rowSpan&&n[r].rowSpan>e-a){var l=n[r].rowSpan-e+a;n[r].rowSpan=e-a,n[r].dataset.sameCellBeforeDivision||(n[r].dataset.sameCellBeforeDivision="r"+a+"c"+r);var o=void 0,o=t.hasOwnProperty("wptbCell")?(o=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),s=n[r].getAttribute("style");o.setAttribute("style",s),o.colSpan=n[r].colSpan,o.rowSpan=l,o.dataset.sameCellBeforeDivision=n[r].dataset.sameCellBeforeDivision;for(var l=n[r].dataset.xIndex,i=parseInt(l)+parseInt(n[r].colSpan),c=void 0;!c&&i<t.maxCols;)c=t.rows[e].querySelector('[data-x-index="'+i+'"]'),i++;t.rows[e].insertBefore(o,c),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var n=t[a].dataset.sameCellBeforeDivision,r=e.querySelectorAll('[data-same-cell-before-division="'+n+'"]'),l=0;l<r.length;l++)if(r[l]&&r[l+1]&&r[l].parentNode&&r[l+1].parentNode&&!r[l].parentNode.classList.contains("wptb-row-moving")&&!r[l+1].parentNode.classList.contains("wptb-row-moving")&&r[l+1].dataset.yIndex==parseInt(r[l].dataset.yIndex)+parseInt(r[l].rowSpan)){r[l].rowSpan+=r[l+1].rowSpan;for(var o=_toConsumableArray(r[l+1].children),s=0;s<o.length;s++)r[l].appendChild(o[s]);r[l+1].parentNode.removeChild(r[l+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var a=0;a<t.rows.length;a++){if(e<t.maxCols&&0!=e&&!t.rows[a].querySelector('[data-x-index="'+e+'"]'))for(var n,r,l,o=t.rows[a].children,s=void 0,i=o.length,c=void 0,d=0;d<i;d++)if(1<o[d].colSpan&&parseInt(o[d].dataset.xIndex)<e&&parseInt(o[d].dataset.xIndex)+parseInt(o[d].colSpan)>e){s=t.hasOwnProperty("wptbCell")?(s=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),n=o[d].rowSpan,r=o[d].colSpan,o[d].colSpan=e-o[d].dataset.xIndex,l=r-o[d].colSpan,o[d].dataset.sameCellBeforeDivision||(o[d].dataset.sameCellBeforeDivision="r"+a+"c"+d);var p=o[d].getAttribute("style");s.setAttribute("style",p);p=t.querySelector('[data-x-index="'+e+'"]');p&&(s.style.width=p.style.width);p=t.querySelector('[data-y-index="'+a+'"]');p&&(s.style.height=p.style.height),c=o[d+1]||null,t.rows[a].insertBefore(s,c),s.colSpan=l,s.rowSpan=n,s.dataset.sameCellBeforeDivision=o[d].dataset.sameCellBeforeDivision,a+=n-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var n=t[a].dataset.sameCellBeforeDivision,r=_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+n+'"]')),l=null,o=0;o<r.length;o++)if(r[o]&&r[o+1]&&!r[o].classList.contains("wptb-column-moving")&&!r[o+1].classList.contains("wptb-column-moving")&&r[o+1].dataset.xIndex==parseInt(r[o].dataset.xIndex)+parseInt(r[o].colSpan)){null==l&&(l=o),r[l].colSpan+=r[o+1].colSpan;for(var s=_toConsumableArray(r[o+1].children),i=0;i<s.length;i++)r[l].appendChild(s[i]);r[o+1].parentNode.removeChild(r[o+1])}WPTB_RecalculateIndexes(e)}}},WPTB_DropHandle=function(n,e,t){var r,l,a,o,s,i,c=2<arguments.length&&void 0!==t&&t;function d(e){return"".concat(e,"px")}if("td_relative"===WPTB_Helper.getDragRelativeType()){var p=document.querySelector(".wptb-cell-related-drop-handle");if(c&&p)return void(p.style.display="none");null===p&&((m=document.createRange()).setStart(document.body,0),b=m.createContextualFragment('<div class="wptb-cell-related-drop-handle">Add to cell</div>').children[0],document.body.appendChild(b),p=b.children[0]);var u=WPTB_Helper.getParentOfType("td",n).getBoundingClientRect(),c=u.top,m=u.left,b=u.width,u=u.height;return p?(p.style.display="flex",p.style.top=d(c),p.style.width=d(b),p.style.height=d(u),void(p.style.left=d(m))):void 0}if(0==document.getElementsByClassName("wptb-drop-handle").length?((r=document.createElement("div")).classList.add("wptb-drop-handle"),(l=document.createElement("div")).classList.add("wptb-drop-border-marker"),a=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),a.classList.add("wptb-drop-border-marker-top"),o.classList.add("wptb-drop-border-marker-right"),s.classList.add("wptb-drop-border-marker-bottom"),i.classList.add("wptb-drop-border-marker-left"),l.appendChild(a),l.appendChild(o),l.appendChild(s),l.appendChild(i),0<(S=document.getElementsByTagName("body")).length&&(S[0].appendChild(r),S[0].appendChild(l)),r.ondragenter=function(){if(e.target.classList.contains("wptb-empty"))return e.preventDefault(),!1},r.ondragover=function(e){e.preventDefault()},r.ondragleave=function(){},r.ondrop=function(e){var t;e.preventDefault(),e.dataTransfer.getData("wptbElement")?t=(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():((t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),t.classList.remove("wptb-moving-into-same-elem"),t.wptbMovingMode=1),"Drop Here"==r.dataset.text?"td"==(n=r.getDOMParentElement()).nodeName.toLowerCase()&&((a=r.getDOMParentElement()).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):(a=(e=r.getDOMParentElement()).parentNode,"Above Element"==r.dataset.text?(a.insertBefore(t,e),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):"Below Element"==r.dataset.text&&(e=e.nextSibling,a.insertBefore(t,e),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)));var a=a.parentNode;!WPTB_Helper.rowIsTop(a)||(a=WPTB_Helper.findAncestor(a,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(a),r.style.display="none",l.style.display="none",WPTB_innerElementSet(t),t.classList.contains("wptb-image-container")&&1!=t.wptbMovingMode||((new WPTB_TableStateSaveManager).tableStateSet(),t.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){r.style.display="none",l.style.display="none"}):(r=document.getElementsByClassName("wptb-drop-handle")[0],l=document.getElementsByClassName("wptb-drop-border-marker")[0]),!(n&&"td"==n.nodeName.toLowerCase()&&0!=n.getElementsByClassName("wptb-ph-element").length||n&&"td"==n.nodeName.toLowerCase()&&n.classList.contains("wptb-empty"))){if("td"==n.localName?T=n.parentNode:"div"==n.localName&&n.classList.contains("wptb-ph-element")&&(T=n.parentNode.parentNode),WPTB_Helper.rowIsTop(T))if(WPTB_Helper.findAncestor(T,"wptb-preview-table").classList.contains("wptb-table-preview-head")){for(var g=e.dataTransfer.types,y=!1,w=0;w<g.length;w++){var h=g[w].match(/wptbelindic-([a-z]+)/i);if(h&&"text"!=h[1]){y=!0;break}}if(y)return}r.style.width=n.offsetWidth+"px";var f,v,m=n.offsetHeight,S=n.getBoundingClientRect(),T=parseFloat(S.left);r.style.left=T+"px",-1!=e.dataTransfer.types.indexOf("wptb-moving-mode")&&(f=document.getElementsByClassName("wptb-moving-mode")[0],n==f?(r.classList.add("wptb-moving-into-same-elem"),l.classList.add("wptb-moving-into-same-elem")):(r.classList.remove("wptb-moving-into-same-elem"),l.classList.remove("wptb-moving-into-same-elem"))),r.getDOMParentElement=function(){return n},r.style.display="block",l.style.display="block","td"!=n.nodeName.toLowerCase()?(f=null==e.offsetY?e.layerY:e.offsetY,v=parseFloat(S.top)-parseFloat(11),r.dataset.text="Above Element",m/2<f&&(v=parseFloat(S.top)+m-1,r.dataset.text="Below Element")):(r.dataset.text="Drop Here",v=parseFloat(S.top)+m/2-5),r.style.top=v+"px",l.style.top=S.top+"px",l.style.left=S.left+"px",(a=l.querySelector(".wptb-drop-border-marker-top")).style.width=parseFloat(n.offsetWidth)-parseFloat(1)+"px",(o=l.querySelector(".wptb-drop-border-marker-right")).style.height=parseFloat(S.bottom)-parseFloat(S.top)-1+"px",o.style.left=a.style.width,(s=l.querySelector(".wptb-drop-border-marker-bottom")).style.width=a.style.width,s.style.top=o.style.height,(i=l.querySelector(".wptb-drop-border-marker-left")).style.height=o.style.height}},ElementCounters=function(){var t=[];return t.text=0,t.image=0,t.list=0,t.button=0,this.increment=function(e){e in t&&t[e]++},this.nextIndex=function(e){if(e in t)return t[e]+1},this};!function(e,t,a){t[e]=a()}("WPTB_ElementIdProvider",self||global,function(){return new function(){var r={};this.getNewId=function(e){var t,a,n;return void 0===r[e]&&(r[e]=(t=e,a=Array.from(document.querySelectorAll(".wptb-ph-element")),n=new RegExp("wptb-element-".concat(t,"-(\\d.+)"),"i"),a.reduce(function(e,t){t=n.exec(t.className);return null!==t&&void 0!==t[1]?Math.max(e,Number.parseInt(t[1],10)):e},0))),++r[e]}}});var WPTB_ElementObject=function(e){var t,a,n,r;e.elemProt?((t=e.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered"),(r=e.elemProt.className.match(/wptb-element-((.+-)\d+)/i))&&Array.isArray(r)&&(a=r[1]),n=!0,e.tinyMceClear&&(t=WPTB_Helper.elementClearFromTinyMce(t))):(a=void 0,n=!1,(t=document.createElement("div")).classList.add("wptb-"+e.kind+"-container","wptb-ph-element"),r="wptb-"+e.kind+"-content",r=wp.template(r),e.node=t,r=(r=r(e)).replace(/\r|\n|\t/g,"").trim(),t.innerHTML=r);var l=t.querySelectorAll(".wptb-in-element");if(0<l.length)for(var o=0;o<l.length;o++)!function(e){var t={getDOMElement:function(){return l[e]}};applyGenericItemSettings(t)}(o);return window.addEventListener("item:onmouseenter",function(e){},!1),this.kind=e.kind,this.getDOMElement=function(){return t},applyGenericItemSettings(this,a,n),this},WPTB_ElementOptions=function(e){e.getDOMElement().addEventListener("click",function(){WPTB_Helper.elementOptionsSet(e.kind,this)},{capture:!0})},WPTB_GetDirectionAfterReconstruction=function(n,r,l,a,o){var s=0,i=n.maxCols,e={},c=[];return o&&o.getDirective(n)?e.switch=function(e){var t=o.getDirective(n),a="desktop";return e&&e.detail&&(a=e.detail.sizeRangeId),c=[r,1],"desktop"!==a?t.hasOwnProperty("modeOptions")&&(e=t.responsiveMode,(e=t.modeOptions[e]).hasOwnProperty("topRowAsHeader")&&e.topRowAsHeader.hasOwnProperty(a)&&e.topRowAsHeader[a]?e.hasOwnProperty("cellStackDirection")&&e.cellStackDirection.hasOwnProperty(a)&&("row"===e.cellStackDirection[a]?(c=[l,2],s=i-1):"column"===e.cellStackDirection[a]&&e.hasOwnProperty("cellsPerRow")&&(s=e.cellsPerRow[a])):s=0):s=0,{type:c,itemsPerHeader:s}}:e.switch=function(e){if(c=[r,1],n.classList.contains("wptb-mobile-view-active")){n.classList.contains("wptb-table-preview-head")&&(c=[l,2])===a&&(s=i-1);var t=n.parentNode.parentNode.querySelector(".wptb-preview-table-mobile");return{type:c,itemsPerHeader:s,newTable:t}}return{type:c,itemsPerHeader:s}},e},WPTB_HeaderToolbox=function(e){var n=this;this.wrapperQuery=e,this.element=document.querySelector(e),this.topMargin=2;function t(e){var t=0<arguments.length&&void 0!==e&&e,a=n.element.getBoundingClientRect().height;t&&(a=0),n.element.style.top="calc( 100% - ".concat(a+n.topMargin,"px)")}return{init:function(){var e;(e=n.element.querySelector('[data-button-type="table_settings_menu"]'))&&e.addEventListener("click",function(){WPTB_Helper.activateSection("manage_cells")},!0),document.addEventListener("wptb:table:generated",function(){n.element.style.display="unset";var e=n.element.getBoundingClientRect().width;n.element.style.left="calc( 50% - ".concat(e/2,"px)"),document.addEventListener("wptbSectionChanged",function(e){e=e.detail;t("manage_cells"!==e&&"table_responsive_menu"!==e&&"cell_settings"!==e)});e=WPTB_Helper.currentSection;t("manage_cells"!==e&&"table_responsive_menu"!==e&&"cell_settings"!==e)})}}};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_Helper={hexToRgb:function(e){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?"rgb(".concat(parseInt(e[1],16),",").concat(parseInt(e[2],16),",").concat(parseInt(e[3],16),")"):null},rgbToHex:function(e){if(e){if(WPTB_Helper.isHex(e))return e;var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?((?:[0-9]*[.])?[0-9]+)[\s+]?\)/i);return t&&5===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(Math.round(255*parseFloat(t[4],10)).toString(16).toUpperCase()).slice(-2)):(t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)):""}return""},isHex:function(e){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}(?:[0-9]?){1,2}$").test(e)},getElementIcon:function(e){"".concat(location.protocol,"//").concat(location.hostname);var t=document.createElement("img");return t.src=e,t},elementDragEndClear:function(){var e=document.getElementsByClassName("wptb-moving-mode");if(0<e.length)for(var t=0;t<e.length;t++)e[t].classList.remove("wptb-moving-mode");var a=document.getElementsByClassName("wptb-drop-handle");if(0<a.length)for(var n=0;n<a.length;n++)a[n].style.display="none";var r=document.getElementsByClassName("wptb-drop-border-marker");if(0<r.length)for(var l=0;l<r.length;l++)r[l].style.display="none"},linkHttpCheckChange:function(e,t){var a=1<arguments.length&&void 0!==t&&t;if(e){if(e.match(/^(javascript:)(.+)$/))return e;if(e.match(/^\/([\S]+)$/)){if(a){var n=document.location.origin;return n.match(/^(.+)\/$/)&&(n=n.slice(-1)),"".concat(n).concat(e)}return e}if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))return e;var r,n=e.split("/");return Array.isArray(n)&&0<n.length&&(r=n[n.length-1]),"".concat(document.location.protocol,"//").concat(r)}return""},dataTitleColumnSet:function(){},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},rowIsTop:function(e){return e.parentNode.children[0]==e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){"external"==e.originalEvent.type?(new WPTB_TableStateSaveManager).tableStateSet():WPTB_Helper.findAncestor(e.target,"wp-picker-container")&&("square"!=e.originalEvent.type&&"strip"!=e.originalEvent.type||((e=document.getElementsByTagName("body")[0]).removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),e.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)))},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(e,t){var a;t?(a=[document.getElementById(e)]).length=1:a=document.getElementsByClassName(e);for(var n=0;n<a.length;n++){var r,l=WPTB_Helper.findAncestor(a[n],"wp-picker-container");l&&((r=l.parentNode).removeChild(l),l=document.createElement("input"),t?l.setAttribute("id",e):l.classList.add("wptb-element-property",e),l.value="",r.appendChild(l))}},detectMode:function(){var e=window.location.href,e=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!e&&(e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"")},getTableId:function(){return WPTB_Helper.detectMode()||"startedid-0"},getColumnWidth:function(e,t){for(var a=t.dataset.xIndex,n=e.querySelectorAll('[data-x-index="'.concat(a,'"]')),r=t.getCellDimensions().width,l=0;l<n.length;l++)r>n[l].getCellDimensions().width&&(r=n[l].getCellDimensions().width);return r},getRowHeight:function(e,t){for(var a=t.dataset.yIndex,n=e.querySelectorAll('[data-y-index="'.concat(a,'"]')),r=t.getCellDimensions().height,l=0;l<n.length;l++)r>n[l].getCellDimensions().height&&(r=n[l].getCellDimensions().height);return r},newElementProxy:function(e){if(e)return new WPTB_ElementObject({kind:e})},wpColorPickerChange:function(e,t){var a=t?t.color.toString():"",n=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0],t=n.dataset.element.match(/wptb-options-(.+)-(\d+)/i),e=t[1],t=t[2],t=document.getElementsByClassName("wptb-element-".concat(e,"-").concat(t))[0];if("button"==e)"button-text-color"==n.dataset.type?t.getElementsByClassName("wptb-button")[0].style.color=a:t.getElementsByClassName("wptb-button")[0].style.backgroundColor=a;else if("list"==e){var r=t.querySelectorAll("p");if(0<r.length)for(var l=0;l<r.length;l++)r[l].style.color=a}else if("star_rating"==e)if("star-color"==n.dataset.type)for(var o=t.querySelectorAll("li"),s=0;s<o.length;s++)for(var i=o[s].getElementsByTagName("span"),c=0;c<i.length;c++)i[c].style.fill=a;else"numeral-rating-color"==n.dataset.type&&(t.querySelector(".wptb-number-rating").style.color=a);else t.style.color=a},numberImputSize:function(e,t,a){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;parseInt(e,10)>parseInt(a,10)&&(this.value=a),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wptbDocumentEventGenerate:function(e,t,a){e&&t&&(a=a||!0,a=new CustomEvent(e,{detail:a,bubbles:!0}),t.dispatchEvent(a))},elementStartScript:function(e,t){var a;t||(a=e.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(a)&&(t=a[1]),t&&t in WPTB_ElementsScriptsLauncher&&WPTB_ElementsScriptsLauncher[t](e)},deleteEventHandlers:function(e){if(e){jQuery(e).off();var t=e.children;if(t)for(var a=0;a<t.length;a++)WPTB_Helper.deleteEventHandlers(t[a])}},replaceAll:function(e,t,a){return e.split(t).join(a)},elementClearFromTinyMce:function(e){var t=e.querySelectorAll(".mce-content-body");if(0<t.length)for(var a=0;a<t.length;a++)t[a].classList.remove("mce-content-body");var n=e.querySelectorAll("[data-mce-style]");if(0<n.length)for(var r=0;r<n.length;r++)n[r].removeAttribute("data-mce-style");var l=e.querySelectorAll(".mce-edit-focus");if(0<l.length)for(var o=0;o<l.length;o++)l[o].classList.remove("mce-edit-focus");var s=e.querySelectorAll("[contenteditable]");if(0<s.length)for(var i=0;i<s.length;i++)s[i].removeAttribute("contenteditable");var c=e.querySelectorAll("[spellcheck]");if(0<c.length)for(var d=0;d<c.length;d++)c[d].removeAttribute("spellcheck");var p=e.querySelectorAll("[id^=mce_]");if(0<p.length)for(var u=0;u<p.length;u++)p[u].removeAttribute("id");return e},elementOptionContainerCustomClassSet:function(e,t){e&&t&&((e=WPTB_Helper.findAncestor(e,"wptb-element-option"))&&e.classList.add(t))},elementOptionContainerAdditionalStyles:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option"),n=t.split(";");if(a&&n){function r(e,t){e&&(containerStyleStrArr=e.split(":"),containerStyleStrArr&&Array.isArray(containerStyleStrArr)&&(t.style[containerStyleStrArr[0]]=containerStyleStrArr[1]))}if(n&&Array.isArray(n))for(var l=0;l<n.length;l++)n[l]&&r(n[l],a);else r(n,a)}}},controlsInclude:function(o,s,e){var i=2<arguments.length&&void 0!==e&&e;o&&"object"===_typeof(o)&&"function"==typeof s&&o.addEventListener("element:controls:active",function(){o.hasOwnProperty("controlConnectFunctionsName")&&Array.isArray(o.controlConnectFunctionsName)&&-1!=o.controlConnectFunctionsName.indexOf(s.name)||function(){var a,e=o.className.match(/wptb-element-(.+)-(\d+)/i);if(e&&Array.isArray(e)&&(a=e[1]),a){var t=o.optionsGroupIds;if(t&&Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n],r=document.getElementById(r).querySelectorAll(".wptb-element-property");(r=_toConsumableArray(r)).map(function(e){var r,t=new RegExp("wptb-el-".concat(a,"-(\\d+)-([a-zA-Z0-9_-]+)"),"i"),l=e.className.match(t);l&&Array.isArray(l)&&(r=l[0],o.addEventListener("wptb-control:".concat(r),function(e){var t={},a=l[2],n=document.getElementsByClassName(r);0<n.length&&a&&(n=WPTB_Helper.targetControlValueGet(n),t[a]=i?{targetValue:n,eventValue:e.detail.value}:n),s(t,o)},!1))})}o.controlConnectFunctionsName||Array.isArray(o.controlConnectFunctionsName)||(o.controlConnectFunctionsName=[]),o.controlConnectFunctionsName.push(s.name)}}()},!1)},oneControlInclude:function(a,n,e){if(!a||"object"!==_typeof(a)||"function"!=typeof n||"string"!=typeof e)return!1;var t,r,l=a.className.match(/wptb-element-((.+-)\d+)/i);l&&Array.isArray(l)&&(t=l[1].split("-")[0],t="wptb-".concat(t,"-control-stack"),t=wp.template(t)({container:".".concat(l[0])}),(t=JSON.parse(t))&&"object"===_typeof(t)&&t.hasOwnProperty(e)&&(r="wptb-el-".concat(l[1],"-").concat(e),a.addEventListener("wptb-control:".concat(r),function(e){var t=document.getElementsByClassName(r);0<t.length&&(t=WPTB_Helper.targetControlValueGet(t),n(t,a))},!1)))},innerElementCopyIncludeHandler:function(t,a){t&&"object"===_typeof(t)&&"function"==typeof a&&t.addEventListener("wptb-inner-element:copy",function(e){e=e.detail;e&&(WPTB_Helper.elementClearFromTinyMce(e),a(e,t))},!1)},valueDependOnControl:function(a,n,r,l,o){function s(e,a,t){"string"==typeof e&&(e=[e]);var n,r,l,o=a.match(/wptb-el-((.+-)\d+)-(.+)/i),s={},i=[];return o&&Array.isArray(o)&&(n=o[3],l={},Array.isArray(t)&&(Array.isArray(t[0])?t.map(function(e){l[e[0]]=[e[1],e[2]]}):l[t[0]]=[t[1],t[2]]),e.map(function(e){var t=a.replace(n,e);t&&0<(r=document.getElementsByClassName(t)).length&&r[0].type&&(s[e]=r[0].value,e in l&&("integer"===l[e][1]?s[e]=parseInt(s[e])+parseInt(l[e][0]):"string"===l[e][1]&&(s[e]=s[e]+l[e][0])),i.push(r[0]))})),[s,i]}var e=s(a,n,r);WPTB_Helper.elementOptionsSet(l,o,e[0],n),Object.keys(e[0]).forEach(function(e){var t=o.className.match(/wptb-element-((.+-)\d+)/i),e="wptb-el-".concat(t[1],"-").concat([e]);o.addEventListener("wptb-control:".concat(e),function(e){var t=s(a,n,r);WPTB_Helper.elementOptionsSet(l,o,t[0],n)},!1)})},appearDependOnControl:function(e,t){if(Array.isArray(e)){function r(e,t){var a,n="block";Object.keys(t).map(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!1===t[e][0]&&(n="none",t[e][2][3]&&(a=t[e][2][3]))}),e.style.display!==n&&("none"===(e.style.display=n)&&a?(p[0].dataset.controlActiveVal=WPTB_Helper.targetControlValueGet(p),WPTB_Helper.targetControlValueGet(p,a)):"block"===n&&p[0].dataset.controlActiveVal&&WPTB_Helper.targetControlValueGet(p,p[0].dataset.controlActiveVal))}function l(e,t){for(var a=WPTB_Helper.targetControlValueGet(e),n=!1,r=1;r<=2;r++)if(t[r]&&Array.isArray(t[r])){for(var l=void 0,o=!1,s=0;s<t[r].length;s++)if("string"==typeof t[r][s]&&-1!==t[r][s].indexOf("numberAny >")){o=!0;if(!(parseInt(t[r][s].match(/\d+/))<a)){l=!1;break}l=!0}else if("string"==typeof t[r][s]&&-1!==t[r][s].indexOf("numberAny <")){if(o=!0,!(a<parseInt(t[r][s].match(/\d+/)))){l=!1;break}l=!0}else if(t[r][s]===a&&(l=!0,!o))break;if(l&&1===r){n=!0;break}if(l&&2===r){n=!1;break}}return n}if("string"==typeof e[0])e=[e];else if(!Array.isArray(e[0]))return;for(var o={},a=0;a<e.length;a++){var n=e[a],s=n[0],i=t.match(/wptb-el-((.+-)\d+)-(.+)/i);i&&Array.isArray(i)&&(i=i[3],!(s=t.replace(i,s))||0<(s=document.getElementsByClassName(s)).length&&(o[n[0]]=[l(s,n),s,n]))}var c,d,p=document.getElementsByClassName(t);0<p.length&&(c=p[0],(d=WPTB_Helper.findAncestor(c,"wptb-element-option"))&&(r(d,o),Object.keys(o).map(function(n){Object.prototype.hasOwnProperty.call(o,n)&&o[n][1][0].addEventListener("change",function(e){var t=o[n][2],a=o[n][1];o[t[0]]=[l(a,t),a,t],r(d,o)},!1)})))}},toggleSwitch:function(t,n){var r,l;Array.isArray(t)&&t[1]&&"object"===_typeof(t[1])&&(r=function(){var e=document.getElementsByClassName(n);e.length&&WPTB_Helper.targetControlValueGet(e)!==t[0]&&("unchecked"===t[0]?e[0].checked=!1:"checked"===t[0]&&(e[0].checked=!0),void 0!==t[2]&&!0!==t[2]||WPTB_Helper.wptbDocumentEventGenerate("change",e[0],{eventType:"toggleSwitch"}))},l=t[1],Object.keys(l).map(function(e){var t=l[e],a=n.match(/wptb-el-((.+-)\d+)-(.+)/i);a&&Array.isArray(a)&&(a=a[3],!(a=n.replace(a,e))||0<(e=document.getElementsByClassName(a)).length&&e[0].addEventListener("change",function(e,t){!e||0<(e=document.getElementsByClassName(e)).length&&WPTB_Helper.targetControlValueGet(e)===t&&r()}.bind(null,a,t),!1))}))},controlsStateManager:function(e,t){var a=document.getElementsByClassName(e);if(0<a.length){var n=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(n&&Array.isArray(n))if(document.querySelector(".wptb-element-".concat(n[1]))){var r,l={},o=document.getElementsByClassName("wptb-element-datas");if(0==o.length||""==o[0].innerHTML){var s=WPTB_Helper.targetControlValueGet(a);l["data-".concat(e)]=s,(r={})["tmpl-wptb-el-datas-".concat(n[1])]=l,r=JSON.stringify(r),0==o.length?((o=document.createElement("script")).setAttribute("type","text/html"),o.setAttribute("class","wptb-element-datas")):o=o[0],o.innerHTML=r,document.getElementsByTagName("body")[0].appendChild(o)}else if(o=o[0],r=o.innerHTML,r&&(r=r.trim(),(r=JSON.parse(r))&&"object"===_typeof(r)))if(t){var i=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-".concat(n[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(n[1])])||(r["tmpl-wptb-el-datas-".concat(n[1])]={}),r["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)]=i,o.innerHTML=JSON.stringify(r)}else if("tmpl-wptb-el-datas-".concat(n[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(n[1])])&&"data-".concat(e)in r["tmpl-wptb-el-datas-".concat(n[1])]){if("tmpl-wptb-el-datas-".concat(n[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(n[1])])&&"data-".concat(e)in r["tmpl-wptb-el-datas-".concat(n[1])])for(var c,d=0;d<a.length;d++)"checkbox"==a[d].type?(c=void 0,"checked"==(c=a[d].name?r["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)][a[d].name]:r["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)])?a[d].checked=!0:"unchecked"==c&&(a[d].checked=!1)):a[d].value=r["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)]}else{i=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-".concat(n[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(n[1])])||(r["tmpl-wptb-el-datas-".concat(n[1])]={}),r["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)]=i,o.innerHTML=JSON.stringify(r)}}}},targetControlValueGet:function(e,t){for(var a,n=0;n<e.length;n++)"checkbox"==e[n].type&&e[n].name?t?"checked"===t?e[n].checked=!0:"unchecked"===t&&(e[n].checked=!1):(a=a||{},1==e[n].checked?a[e[n].name]="checked":a[e[n].name]="unchecked"):"checkbox"==e[n].type?t?"checked"===t?e[n].checked=!0:"unchecked"===t&&(e[n].checked=!1):a=1==e[n].checked?"checked":"unchecked":e[n].type?t?e[n].value=t:a=e[n].value:e[n].dataset.alignmentValue&&e[n].classList.contains("selected")&&(t?e[n].dataset.alignmentValue=t:a=e[n].dataset.alignmentValue);return a},elementControlsStateCopy:function(e,t){var a,n,r,l;e&&t&&(e=e.className.match(/wptb-element-((.+-)\d+)/i),t=t.className.match(/wptb-element-((.+-)\d+)/i),e&&Array.isArray(e)&&t&&Array.isArray(t)&&(a=e[1],n=t[1],0<(e=document.getElementsByClassName("wptb-element-datas")).length&&((t=(e=e[0]).innerHTML)&&(t=t.trim(),!(t=JSON.parse(t))||"object"!==_typeof(t)||(r=t["tmpl-wptb-el-datas-".concat(a)])&&"object"===_typeof(r)&&(l={},Object.keys(r).forEach(function(e){var t=r[e],e=e.replace(a,n);l[e]=t}),0<Object.keys(l).length&&(t["tmpl-wptb-el-datas-".concat(n)]=l,t=JSON.stringify(t),e.innerHTML=t))))))},elementControlsStateDelete:function(e,t){var a=e.className.match(/wptb-element-(.+)-(\d+)/i),n=document.getElementsByTagName("body")[0],r=n.getElementsByClassName("wptb-element-datas");a&&Array.isArray(a)&&0<r.length&&((e=(r=r[0]).innerHTML)&&(e=e.trim(),(e=JSON.parse(e))&&"object"===_typeof(e)&&"tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])in e&&(t?e["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])]&&"object"===_typeof(e["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])])&&"data-wptb-el-".concat(a[1],"-").concat(a[2],"-").concat(t)in e["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])]&&delete e["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])]["data-wptb-el-".concat(a[1],"-").concat(a[2],"-").concat(t)]:delete e["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])],0==Object.keys(e).length?n.removeChild(r):(e=JSON.stringify(e),r.innerHTML=e))))},elementOptionsSet:function(d,e,p,u){var t,m,b,g,y,r,w,a,n="wptb-".concat(d,"-control-stack"),n=wp.template(n),h=e.className.match(/wptb-element-((.+-)\d+)/i);if(h?(WPTB_Helper.editActionClassRemove(),e.classList.add("edit-active")):(a=(a=WPTB_Helper.detectMode())||"startedid-0",e.classList.contains("wptb-preview-table")?e.classList.add("wptb-element-main-table_setting-".concat(a)):e.classList.contains("wptb-cell")?document.querySelector(".wptb-element-table_cell_setting-".concat(e.dataset.xIndex,"-").concat(e.dataset.yIndex))||e.classList.add("wptb-element-table_cell_setting-".concat(e.dataset.xIndex,"-").concat(e.dataset.yIndex)):e.classList.contains("wptb-responsive")&&(a.startsWith("wptb_team")&&(a="startedid-0"),e.classList.add("wptb-element-table_responsive_setting-".concat(a))),h=e.className.match(/wptb-element-((.+-)\d+)/i)),t={container:".".concat(h[0]),valueDependOnControl:{}},p&&Object.keys(p).forEach(function(e){t.valueDependOnControl[e]=p[e]}),!u||(a=u.match(/wptb-el-((.+-)\d+)-(.+)/i))&&Array.isArray(a)&&(w=a[3]),m=h[0],b=h[1],!e.classList.contains("wptb-preview-table"))if(e.classList.contains("wptb-cell"))this.activateSection("cell_settings");else if(e.classList.contains("wptb-responsive"))elementOptionsGroupId="table-responsive-group",wptbelementOptionClass="wptb-element-option";else{for(var l=document.getElementById("element-options-group").childNodes,o=0;o<l.length;o++)l[o].style&&(l[o].style.display="none");this.activateSection("options_group")}var n=n(t),f=JSON.parse(n),v=[],S={},T={},_={},C=[],B=[],A=[];w&&((n={})[w]=f[w],f=n);Object.keys(f).forEach(function(e){var t=f[e];t.controlKey=e;var a=wp.template("wptb-".concat(t.type,"-control"));t.elemContainer=m,t.elementControlTargetUnicClass="wptb-el-".concat(b,"-").concat(t.controlKey),Object.keys(t).map(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"control_param_calculate_value"===t[e]&&(t[e]=WPTB_Helper.controlParamCalculateValue(t.elementControlTargetUnicClass,e))});var n,r,l,o,e=a(t);if("appearDependOnControl"in t&&Array.isArray(t.appearDependOnControl)&&C.push([t.appearDependOnControl,t.elementControlTargetUnicClass]),"toggleSwitch"in t&&Array.isArray(t.toggleSwitch)&&B.push([t.toggleSwitch,t.elementControlTargetUnicClass]),"valueDependOnControl"in t&&!p&&!u&&(o="",t.valueDependOnControlCorrect&&(o=t.valueDependOnControlCorrect),A.push([t.valueDependOnControl,t.elementControlTargetUnicClass,o])),-1==v.indexOf(t.elementOptionsGroupId)&&!w){v.push(t.elementOptionsGroupId),g=document.getElementById(t.elementOptionsGroupId);for(var s=_toConsumableArray(g.children),i=0;i<s.length;i++)g.removeChild(s[i]);S[t.elementOptionsGroupId]=g}y=S[t.elementOptionsGroupId],"true"!==t.elementOptionsContainerOn||w||(n=t.elementOptionsGroupId,(r=T)[n]||((l=document.createElement("div")).classList.add("wptb-element-options","wptb-options-".concat(h[1])),document.getElementById(n).appendChild(l),r[n]=l),y=r[n]),"true"===t.elementOptionContainerOn&&((c=document.createElement("div")).classList.add(t.elementOptionClass,"wptb-settings-items"),t.customClassForContainer&&c.classList.add(t.customClassForContainer),t.containerAdditionalStyles&&c.setAttribute("style",t.containerAdditionalStyles),u?0<(a=document.getElementsByClassName(u)).length&&(a=a[0],(o=WPTB_Helper.findAncestor(a,"wptb-element-option"))&&((a=o.parentNode).insertBefore(c,o),a.removeChild(o))):y.appendChild(c),y=c),y.innerHTML+=e;var c=y.getElementsByTagName("wptb-template-script");0<c.length&&(e=(c=c[0]).innerText,y.removeChild(c),(c=document.createElement("script")).setAttribute("type","text/javascript"),c.setAttribute("id","".concat(d,"-").concat(t.controlKey)),c.innerHTML=e.replace(/\r|\n|\t/g,"").trim(),_[t.elementOptionsGroupId]&&Array.isArray(_[t.elementOptionsGroupId])||(_[t.elementOptionsGroupId]=[]),_[t.elementOptionsGroupId].push(c)),0}),e.optionsGroupIds=v,Object.keys(_).forEach(function(e){u||((r=document.createElement("div")).classList.add("wptb-element-options-scripts","wptb-options-".concat(h[1])),S[e].appendChild(r));var t=_[e];if(0<t.length)for(var a,n=0;n<t.length;n++)u?(a="".concat(d,"-").concat(w),a=document.getElementById(a),(r=a.parentNode).insertBefore(t[n],a),r.removeChild(a)):r.appendChild(t[n])});for(var s=0;s<B.length;s++)WPTB_Helper.toggleSwitch(B[s][0],B[s][1]);for(var i=0;i<C.length;i++)WPTB_Helper.appearDependOnControl(C[i][0],C[i][1]);WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",e);for(var c=0;c<A.length;c++)WPTB_Helper.valueDependOnControl(A[c][0],A[c][1],A[c][2],d,e)},editActionClassRemove:function(){for(var e=document.querySelectorAll(".edit-active"),t=0;t<e.length;t++)e[t].classList.remove("edit-active")},controlParamCalculateValue:function(e,t){e=WPTB_Helper.replaceAll(e,"-","_");if(window["paramCalculateValue_".concat(e,"_").concat(t)]&&"function"==typeof window["paramCalculateValue_".concat(e,"_").concat(t)])return window["paramCalculateValue_".concat(e,"_").concat(t)]()},controlParamCalculateValueCreateFunction:function(e,t,a,n){var r=e.className.match(/wptb-element-((.+-)\d+)/i),t="wptb-el-".concat(r[1],"-").concat(t),t=WPTB_Helper.replaceAll(t,"-","_");window["paramCalculateValue_".concat(t,"_").concat(a)]=function(){return n(e)}},managerExternalCssStyles:function(e,t,a,n){var r=e.match(/wptb-element-main(.+)-(\d+)/i);r&&Array.isArray(r)||0<(r=document.getElementsByClassName("wptb-preview-table")).length&&((r=(r=r[0]).className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(r)&&(t=".".concat(r[0]," ").concat(t)));var l=document.head;if(l){var o=l.querySelector("#styles-".concat(e));if(o){var s=o.innerHTML;if(s){var i=s.split("}");i.pop();for(var c=!1,d=0;d<i.length;d++){var p=i[d].split("{");if(p[0]===t){var u=p[1].split(";");u.pop();for(var m=!1,b=0;b<u.length;b++)if(u[b].split(":")[0]===a){n?u[b]="".concat(a,":").concat(n):u.splice(b,1),p[1]=u.join(";")?"".concat(u.join(";"),";"):"",m=!0;break}m||n&&(p[1]+="".concat(a,":").concat(n,";")),p[1]?i[d]="".concat(p[0],"{").concat(p[1]):i.splice(d,1),i.join("}")?o.innerHTML="".concat(i.join("}"),"}"):l.removeChild(o),c=!0;break}}c||(o.innerHTML=n?"".concat(s+t,"{").concat(a,":").concat(n,";}"):s)}else n?o.innerHTML="".concat(t,"{").concat(a,":").concat(n,";}"):l.removeChild(o)}else n&&((s=document.createElement("style")).setAttribute("id","styles-".concat(e)),s.classList.add("styles-wptb-elements"),s.innerHTML="".concat(t,"{").concat(a,":").concat(n,";}"),l.appendChild(s))}},registerSections:function(e){var a=this;this.sections={},this.currentSection="",Array.isArray(e)||(e=[e]),e.map(function(e){var t=document.querySelector("[data-wptb-section=".concat(e,"]"));t&&(a.sections[e]=t)})},activateSection:function(a,e){var n=this,r=1<arguments.length&&void 0!==e?e:"block";this.currentSection=a,this.triggerSectionEvent(a),Object.keys(this.sections).map(function(e){var t;Object.prototype.hasOwnProperty.call(n.sections,e)&&(t=a===e?r:"none",n.sections[e].style="display: ".concat(t," !important"))})},getCurrentSection:function(){return this.currentSection},getSectionFromUrl:function(){var t=new URL(window.location.href).searchParams.get("wptb-builder-section");t&&Object.keys(this.sections).some(function(e){return e===t})&&this.activateSection(t)},setupSectionButtons:function(){var e=Array.from(document.querySelectorAll("[data-wptb-section-button]")),n=this;e.map(function(t){var a=t.dataset.wptbSectionButton;t.addEventListener("click",function(){var e=t.dataset.wptbSectionDisplayType;n.activateSection(a,e),WPTB_Helper.editActionClassRemove()}),document.addEventListener("wptbSectionChanged",function(e){e.detail===a?(t.classList.remove("disabled"),t.classList.add("active")):(t.classList.remove("active"),t.classList.add("disabled"))})})},setupPanelToggleButtons:function(){var t=jQuery;t(".wptb-panel-toggle-group").each(function(){var e=t(this);t(this).find(".toggle-icon").click(function(){e.find(".wptb-panel-toggle-target").slideToggle(),e.toggleClass("wptb-panel-toggle-content")})})},triggerSectionEvent:function(e){e=new CustomEvent("wptbSectionChanged",{detail:e});document.dispatchEvent(e)},setupSidebarToggle:function(e){e=document.querySelector(e);e&&e.addEventListener("click",function(e){e.preventDefault(),document.body.classList.toggle("collapsed")})},externalCssStylesDelete:function(e){var t=document.head;!t||(e=t.querySelector("#styles-".concat(e)))&&t.removeChild(e)},externalCssStylesCopy:function(e,t){var a,n,r;!e||(r=e.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(r)&&(a=r[0],!(n=document.head)||(e=n.querySelector("#styles-".concat(a)))&&((r=e.cloneNode(!0)).removeAttribute("id","styles-".concat(a)),(t=t.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)&&(r.setAttribute("id","styles-".concat(t[0])),e=e.innerHTML,t=WPTB_Helper.replaceAll(e,a,t[0]),r.innerHTML=t,n.appendChild(r))))},elementsStylesConvertToObject:function(){for(var e=document.head.querySelectorAll(".styles-wptb-elements"),t={},a=0;a<e.length;a++){var n=e[a].getAttribute("id");n&&e[a].innerHTML&&(t[n]=e[a].innerHTML)}return 0!=Object.keys(t).length?JSON.stringify(t):""},elementsStylesSetFromObject:function(e){var n=document.head;if(n){var r,t=n.querySelectorAll(".styles-wptb-elements");if(0<t.length){t=_toConsumableArray(t);for(var a=0;a<t.length;a++)n.removeChild(t[a])}e&&(r=JSON.parse(e),0!=Object.keys(r).length&&Object.keys(r).forEach(function(e){var t=r[e],a=document.createElement("style");a.setAttribute("id",e),a.classList.add("styles-wptb-elements"),a.innerHTML=t,n.appendChild(a)}))}},saveTable:function(o,s,e){WPTB_Helper.tableSaveIndicator(!0),e||s||!o.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,o.target.dataset.wptbTableStateNumberSave),e||(p=document.querySelector(".wptb-edit-bar"))&&p.classList.contains("visible")&&(document.getElementsByClassName("wptb-preview-table")[0],WPTB_Helper.toggleTableEditMode()),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document),WPTB_Helper.tableClean();var i,t,a,c=new XMLHttpRequest,n="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=save_table"),d=document.getElementById("wptb-setup-name").value.trim(),r=document.getElementsByClassName("wptb-preview-table");((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(a=rs);var l,p,u=!1;r=0<r.length?(l=(r=r[0]).cloneNode(!0),a&&l.classList.contains("wptb-element-main-table_setting-startedid-0")&&(l.classList.remove("wptb-element-main-table_setting-startedid-0"),l.classList.add("wptb-element-main-table_setting-".concat(a)),(p=document.querySelector(".wptb-table-setup"))&&(p.innerHTML="",p.appendChild(l),WPTB_Table()),u=!0),l.columns=r.columns,(r=WPTB_Stringifier(l)).outerHTML):"",e||(t="",0<(m=document.getElementsByClassName("wptb-element-datas")).length&&m[0].innerHTML&&(t=m[0].innerHTML,u&&(t=WPTB_Helper.replaceAll(t,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-".concat(a)),t=WPTB_Helper.replaceAll(t,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-".concat(a)))));var m=WPTB_Helper.elementsStylesConvertToObject();if(u&&(m=WPTB_Helper.replaceAll(m,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-".concat(a))),""===d&&""===r){u="";return""===d&&(u+="You must assign a name to the table before saving it.</br>"),""===r&&(u+="Table wasn't created"),(i=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '.concat(u,"</div>"),i.classList.add("wptb-warning"),void setTimeout(function(){i.removeChild(i.firstChild)},4e3)}m={title:d,content:r,elements_datas:t,elements_styles:m,security_code:wptb_admin_object.security_code};e&&(m.preview_saving=e),a&&(m.id=a),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document,m),m=JSON.stringify(m),c.open("POST",n,!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),c.onreadystatechange=function(e){if(4==this.readyState&&(WPTB_Helper.tableSaveIndicator(!1),200==this.status)){var t=JSON.parse(c.responseText);if(i=document.getElementById("wptb-messaging-area"),"saved"!=t[0]){if("edited"==t[0]&&s){document.wptbId=t[1],i.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(d," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(t[1],"]");document.querySelector(".wptb-preview-table");var a=document.getElementsByClassName("wptb-preview-btn");0<a.length&&((a=a[0]).classList.remove("wptb-button-disable"),n=(n=a.dataset.previewHref).replace("empty",t[1]),a.setAttribute("href",n)),o.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var n=document.getElementsByClassName("wptb-save-btn");0<n.length&&((n=n[0]).classList.add("wptb-save-disabled"),n.classList.remove("active"))}else if("edited"==t[0]){i.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully updated.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(d," was successfully updated.")}),o.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var r=document.getElementsByClassName("wptb-save-btn");0<r.length&&((r=r[0]).classList.add("wptb-save-disabled"),r.classList.remove("active"))}else{if("preview_edited"==t[0])return;i.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}i.classList.add("wptb-success"),setTimeout(function(){i.removeChild(i.firstChild)},4e3)}else{n=document.location.href.replace("#",""),r=new RegExp("&table=(.+)","i"),n=n.replace(r,"");window.history.pushState(null,null,"".concat(n,"&table=").concat(t[1])),document.wptbId=t[1],i.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(d," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(t[1],"]");document.querySelector(".wptb-preview-table");n=document.getElementsByClassName("wptb-preview-btn");0<n.length&&((n=n[0]).classList.remove("wptb-button-disable"),l=(l=n.dataset.previewHref).replace("empty",t[1]),n.setAttribute("href",l)),o.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var l=document.getElementsByClassName("wptb-save-btn");0<l.length&&((l=l[0]).classList.add("wptb-save-disabled"),l.classList.remove("active"))}}},c.send(m)},clickOnFreeSpace:function(){var e;WPTB_Helper.editActionClassRemove(),"table_responsive_menu"!==this.getCurrentSection()&&((e=document.querySelector("#wptb-cell_mode_background"))&&e.classList.contains("visible")||(this.activateSection("elements"),(e=document.getElementById("wpcd_fixed_toolbar")).hasAttribute("data-toolbar-active-id")&&document.getElementById(e.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active"),(e=document.querySelector(".wptb-preview-table"))&&WPTB_Helper.elementOptionsSet("table_setting",e)))},elementAjax:function(e,a){var n=new XMLHttpRequest,t="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=wptb_element_ajax"),r=a.className.match(/wptb-element-(.+)-(\d+)/i);r&&Array.isArray(r)&&(l=r[1]);var l={element_ajax_data:e,element_name:l,security_code:wptb_admin_object.security_code},l=JSON.stringify(l);n.open("POST",t,!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onreadystatechange=function(e){var t;4==this.readyState&&200==this.status&&(t=(t=JSON.parse(n.responseText))&&Array.isArray(t)&&"element_ajax_responce"==t[0]?{value:t[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",a,t))},n.send(l)},toggleTableEditMode:function(e){var t=0<arguments.length&&void 0!==e&&e,a=document.getElementsByClassName("wptb-edit-bar"),n=document.getElementById("wptb-cell_mode_background"),r=document.getElementById("wptb-left-scroll-panel-curtain"),l=document.getElementById("wptb-left-scroll-panel-cell-settings"),o=document.getElementsByClassName("wptb-preview-table");0<o.length&&(o=o[0]);var s=document.querySelector(".wptb-builder-panel");if(0<a.length){for(var i="",c=0;c<a.length;c++)if(t){document.select.deactivateMultipleSelectMode(),a[c].classList.remove("visible"),n.classList.remove("visible"),r.classList.remove("visible"),l.classList.remove("visible"),o.parentNode.classList.remove("wptb-preview-table-manage-cells");var d=o.getElementsByTagName("td");if(0<d.length)for(var p=0;p<d.length;p++)d[p].classList.remove("wptb-highlighted");i="closed",s.dataset.manageCellsActive=!1}else t||(document.select.activateMultipleSelectMode(),a[c].classList.add("visible"),n.classList.add("visible"),r.classList.add("visible"),o.parentNode.classList.add("wptb-preview-table-manage-cells"),i="opened",s.dataset.manageCellsActive=!0);WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-edit-mode/".concat(i),o)}},checkingDimensionValue:function(e,t){if(e=String(e),t=String(t),e&&t){var a=e.indexOf(t);return-1!=a&&a==e.length-t.length?!0:!1}return!1},checkSetGetStyleSizeValue:function(e,t,a,n){var r=e.style[t];if((r=String(r))&&!n||WPTB_Helper.checkingDimensionValue(r,n)){if(!n)return r}else{r=window.getComputedStyle(e);if(a&&r.getPropertyValue(a)&&n&&!WPTB_Helper.checkingDimensionValue(r.getPropertyValue(a),n)){if(!n)return!1;e.style[t]=null}else{if(!n)return r.getPropertyValue(a);e.style[t]=r.getPropertyValue(a)}}return e.style[t]},checkSetGetStyleColorValue:function(e,t,a,n){var r=3<arguments.length&&void 0!==n&&n,l=e.style[t];if(l){if(!r)return l}else{var o=window.getComputedStyle(e,null);if(o&&o.getPropertyValue(a)){if(!r)return o.getPropertyValue(a);l=WPTB_Helper.rgbToHex(o.getPropertyValue(a)),WPTB_Helper.isHex(l)?e.style[t]=l:e.style[t]=""}else{if(!r)return"";e.style[t]=""}}},checkSetGetStyleValue:function(e,t,a,n){var r=3<arguments.length&&void 0!==n&&n,l=e.style[t];if(l){if(!r)return l}else{l=window.getComputedStyle(e,null);if(l&&l.getPropertyValue(a)){if(!r)return l.getPropertyValue(a);e.style[t]=l.getPropertyValue(a)}else if(!r)return""}},getValueMaxCountSameElementsInArray:function(e){if(e&&Array.isArray(e)){for(var t,a,n={},r=0,l=0;l<e.length;l++)e[l]?n[e[l]]?n[e[l]]++:n[e[l]]=1:r++;for(a in n)(!t||n[t]<n[a])&&(t=a);return n[t]>=r?t:""}},recalculateIndexes:function(e){WPTB_RecalculateIndexes(e)},tableRowsColorsReinstall:function(e){var t,a,n;!e.rows.length||(t=e.className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(t)&&(e="",e="0"==t[t.length-1]?"startedid-0":t[t.length-1],(t=document.querySelector(".wptb-el-main-table_setting-".concat(e,"-tableHeaderBackground")))&&(a={value:t.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",t,a)),(a=document.querySelector(".wptb-el-main-table_setting-".concat(e,"-tableEvenRowBackground")))&&(n={value:a.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",a,n)),(n=document.querySelector(".wptb-el-main-table_setting-".concat(e,"-tableOddRowBackground")))&&(e={value:n.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",n,e)))},getParentOfType:function(e,t){return t.nodeName===e.toUpperCase()?t:WPTB_Helper.getParentOfType(e,t.parentElement)},dragRelativeType:"",setDragRelativeType:function(e){this.dragRelativeType=e},getDragRelativeType:function(){return this.dragRelativeType},getElementColorStylesHex:function(e,t){t=e.style[t],t=WPTB_Helper.rgbToHex(t);return WPTB_Helper.isHex(t)||(t=""),t},showControlsOnElementMount:function(){document.addEventListener("element:mounted:dom",function(e){e.target.click()})},showElementsListOnRemove:function(){document.addEventListener("element:removed:dom",function(){WPTB_Helper.activateSection("elements")})},blockTinyMCEManageCells:function(){function a(e){var t=document.createElement("div");t.classList.add("wptb-plugin-blocker-element");var a=0<e.childNodes.length;e.appendChild(t),a||e.classList.add("wptb-plugin-blocker-element-empty")}function n(e){var t=e.querySelector(".wptb-plugin-blocker-element");t&&t.remove(),e.classList.remove("wptb-plugin-blocker-element-empty")}document.addEventListener("wptbSectionChanged",function(e){var t=e.detail,e=document.querySelector(".wptb-table-setup table.wptb-preview-table");e&&((e=Array.from(e.querySelectorAll("td"))).map(n),"manage_cells"!==t&&"cell_settings"!==t||e.map(a))}),document.addEventListener("wptb:save:before",function(){var e=document.querySelector(".wptb-table-setup table.wptb-preview-table");Array.from(e.querySelectorAll("td")).map(n)})},calledByBlock:function(){new URL(window.location.href).searchParams.get("gutenberg")&&document.querySelector(".wptb-plugin-header-close a").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=document.querySelector(".wptb-save-disabled"),e=new URL(window.location.href).searchParams.get("table");(t||window.confirm(wptb_admin_object.strings.dirtyConfirmation))&&WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,e)},{capture:!0})},tableClean:function(){Array.from(document.querySelectorAll(".wptb-directlyhovered")).map(function(e){e.classList.remove("wptb-directlyhovered")}),Array.from(document.querySelectorAll(".wptb-text-container p")).map(function(e){e.removeAttribute("data-placeholder")})},tableSaveIndicator:function(e){var t=document.querySelector("#wptb_builder");t&&(e?t.dataset.wptbSaving=!0:delete t.dataset.wptbSaving)}},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),WPTB_Helper.registerSections(["elements","table_settings","cell_settings","options_group","table_responsive_menu","manage_cells"]),WPTB_Helper.setupSectionButtons(),WPTB_Helper.activateSection("elements"),WPTB_Helper.setupSidebarToggle(".wptb-panel-toggle-section .wptb-panel-drawer-icon"),WPTB_Helper.setupPanelToggleButtons(),new WptbResponsive("table_responsive_menu","wptbResponsiveApp",".wptb-builder-content"),WPTB_Helper.getSectionFromUrl(),WPTB_Helper.showControlsOnElementMount(),WPTB_Helper.showElementsListOnRemove(),WPTB_Helper.blockTinyMCEManageCells(),new WPTB_HeaderToolbox(".wptb-plugin-header-toolbar").init(),document.addEventListener("wp-table-builder/table-edit-mode/closed",function(){WPTB_Helper.activateSection("elements")}),WPTB_Helper.calledByBlock(),WPTB_NotificationManager.init()},WPTB_LeftPanel=function(){for(var e=document.getElementsByClassName("wptb-preview-table")[0],t=document.getElementsByClassName("wptb-element"),a=0;a<t.length;a++)t[a].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};e&&(document.querySelector("#wptb-left-scroll-panel-curtain .wptb-table-edit-mode-close").addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)}),document.addEventListener("wptbSectionChanged",function(e){"manage_cells"===e.detail&&Array.from(document.querySelectorAll(".wptb-management_table_container .wptb-table-edit-mode-close")).map(function(e){e.addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)})})})),document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||"manage_cells"!==WPTB_Helper.currentSection&&WPTB_Helper.clickOnFreeSpace()};e=document.getElementsByClassName("wptb-header");0<e.length&&(e=e[0]),e.onclick=function(){WPTB_Helper.clickOnFreeSpace()}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,a){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=a():t[e]=a()}("WPTB_Logger",self||global,function(){var a={normal:"#48BB78"};return{prepareMessage:function(e){return"%c WP Table Builder %c {message} ".replace("{message}",e)},prepareMessageStyle:function(e){var t=0<arguments.length&&void 0!==e?e:"normal";return"background-color: {bgColor} ; padding: 3px; color: #FFF; border-radius: 0 5px 5px 0;".replace("{bgColor}",a[a[t]?t:"normal"])},log:function(e){console.log(this.prepareMessage(e),"border-radius:5px 0 0 5px; background-color: #3299D1; padding: 3px; color: #FFF; font-weight: bold;",this.prepareMessageStyle("normal"))}}});var MultipleSelect=function(){var r=[],a=!1;return this.activateMultipleSelectMode=function(){r=[];for(var e=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),t=0;t<e.length;t++)e[t].classList.remove("wptb-highlighted");a=!0},this.deactivateMultipleSelectMode=function(){a=!1},this.isActivated=function(){return a},this.pushSelectedCell=function(e){a&&(r.push(e),e.classList.add("wptb-highlighted"))},this.selectedCells=function(){return r},this.flushSelectedCells=function(){r=[]},this.getFirst=function(){for(var e,t=1e3,a=1e3,n=r.length-1;0<=n;n--)t>=r[n].dataset.xIndex&&a>=r[n].dataset.yIndex&&(e=r[n],t=r[n].dataset.xIndex,a=r[n].dataset.yIndex);return e},this.getLast=function(){for(var e,t=-1,a=-1,n=r.length-1;0<=n;n--)t<=r[n].dataset.xIndex&&a<=r[n].dataset.yIndex&&(e=r[n],t=r[n].dataset.xIndex,a=r[n].dataset.yIndex);return e},this.removeAllButFirst=function(){for(var e=this.getFirst(),t=1;t<r.length;t++)r[t].classList.add("wptb-fused-cell-"+e.dataset.xIndex+"-"+e.dataset.yIndex)},this},_this=this;function ownKeys(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}!function(e,t,a){t[e]=a()}("WPTB_NotificationManager",self||global,function(){var n=!1;_this.store=null;return new function(){var e,t=this;this.types={};var a=null===(e=(self||global).wptb_admin_object)||void 0===e?void 0:e.notificationManager;this.sendNotification=function(e){var a,n;t.store.dispatch("addNotification",(a=e,n=t.store.getters.defaults,e=Object.keys(a).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(a,t)&&n[t]&&(e[t]=a[t]),e},{}),_objectSpread(_objectSpread({},n),e)))},this.init=function(){n||(WPTB_ControlsManager.setControlData("NotificationManager",a),WPTB_ControlsManager.callControlScript("NotificationManager","NotificationManager"),t.notificationTypes=t.store.getters.notificationTypes,t.queueTypes=t.store.getters.queueTypes,t.revealTypes=t.store.getters.revealTypes,t.revealTypes=t.store.getters.revealTypes,t.dismissTypes=t.store.getters.dismissTypes,n=!0)}}});var WPTB_Parser=function(e){var t=document.createElement("div");t.innerHTML=e;for(var t=t.children[0],a=_toConsumableArray(t.querySelectorAll(".wptb-column-title-mobile-container")),n=0;n<a.length;n++)a[n].parentNode.removeChild(a[n]);for(var r=t.querySelectorAll("td"),l=0;l<r.length;l++)r[l].classList.add("wptb-droppable"),r[l].classList.remove("wptb-column-title-mobile-not-elements");return t};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.keys||(Object.keys=function(){"use strict";var r=Object.prototype.hasOwnProperty,l=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=o.length;return function(e){if("object"!==_typeof(e)&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,a,n=[];for(t in e)r.call(e,t)&&n.push(t);if(l)for(a=0;a<s;a++)r.call(e,o[a])&&n.push(o[a]);return n}}());var WPTB_RecalculateIndexes=function(e){for(var t,a=e.getElementsByTagName("tr"),n=0,r=0,l=[],o=0;o<a.length;o++){t=a[o].getElementsByTagName("td"),null==l[o]&&(l[o]=[]);for(var s=0,i=0;i<t.length;i++){if(null!=l[o][i])for(var c=0;c<100;c++){if(null==l[o][s]){l[o][s]=t[i],t[i].dataset.xIndex=s;break}s++}else l[o][i]=t[i],t[i].dataset.xIndex=s;if(t[i].dataset.yIndex=o,1<t[i].colSpan)for(var d=1;d<t[i].colSpan;d++)s++,l[o][s]="tdDummy";if(1<t[i].rowSpan)for(var p=1;p<t[i].rowSpan;p++){null==l[o+p]&&(l[o+p]=[]);for(var u=0;u<t[i].colSpan;u++)l[o+p][s-t[i].colSpan+1+u]="tdDummy"}s++}t.length>n&&(n=t.length),0==o&&(r=s)}e.columns=n,e.maxCols=r};function WptbResponsive(e,t,a){var n=this;this.sectionName=e,this.responsiveWrapperId=t,this.responsiveTable=null,this.loaded=!1,this.addContainerToDom=function(){if(!document.querySelector("#".concat(n.responsiveWrapperId))){var e=document.querySelector(a);if(!e)throw new Error("[WPTB_Responsive]: no parent container is found with the given query of [".concat(a,"]"));var t=document.createRange();t.setStart(e,0);t=t.createContextualFragment('<div class="wptb-responsive" id="'.concat(n.responsiveWrapperId,'">responsive element</div>'));e.appendChild(t),n.loaded=!0}n.responsiveTable=document.querySelector("#".concat(n.responsiveWrapperId))},this.load=function(){n.loaded||(n.addContainerToDom(),WPTB_Helper.elementStartScript(n.responsiveTable,"table_responsive_menu"),WPTB_Helper.elementOptionsSet("table_responsive_menu",n.responsiveTable),WPTB_ControlsManager.callControlScript("ResponsiveTable",n.responsiveWrapperId))},this.startUp=function(){document.addEventListener("wptbSectionChanged",function(e){var t=document.querySelector(".wptb-table-setup .wptb-preview-table");e.detail===n.sectionName&&t&&n.load()}),document.addEventListener("wptb:table:generated",function(){"table_responsive_menu"===WPTB_Helper.getCurrentSection()&&n.load()})},this.startUp()}var WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement),WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements||"")},e[t].ondragend=function(){WPTB_Helper.elementDragEndClear()};var a=new WPTB_TableStateSaveManager,n=document.getElementsByClassName("wptb-undo");0<n.length&&((n=n[0]).onclick=function(e){var t;this.classList.contains("wptb-undoredo-disabled")||(a.tableStateGet(this.dataset.wptbUndoredo),0<(t=document.getElementsByClassName("wptb-undo-redo-container")).length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()}))});n=document.getElementsByClassName("wptb-redo");0<n.length&&((n=n[0]).onclick=function(e){var t;this.classList.contains("wptb-undoredo-disabled")||(a.tableStateGet(this.dataset.wptbUndoredo),0<(t=document.getElementsByClassName("wptb-undo-redo-container")).length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()}))});var r=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||r.classList.add("wptb-popup-show")},window.onbeforeunload=function(e){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){r.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){r.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){var t,a;this.classList.contains("wptb-button-disable")||(t=Math.floor(1e4*Math.random()),(a=new URL(e.target.href)).searchParams.set("preview_id",t),e.target.href=a.toString(),WPTB_Helper.saveTable(e,!1,t))},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(e){this.classList.contains("wptb-save-disabled")||WPTB_Helper.saveTable(e)};n=document.querySelector("#wptb-setup-name");n&&(n.onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()})};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}!function(e,t,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=a():t[e]=a()}("WPTB_SortableTable",self||global,function(){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},J=this.table=e.table;WPTB_RecalculateIndexes(J);var l=this;function t(e,t,a){var n,r,l;"TD"===e.target.tagName?(n=null==e.offsetX?e.layerX:e.offsetX,r=null==e.offsetY?e.layerY:e.offsetY,l=!1,("vertical"===t&&e.target.clientWidth-n<=35||"horizontal"===t&&n<=35)&&(l=!0),l&&(e.target.clientHeight-35)/2<r&&(e.target.clientHeight+35)/2>r?a.classList.add("sortable-hover"):a.classList.remove("sortable-hover")):a.classList.remove("sortable-hover")}function c(e){t(e,"vertical",this)}function d(e){t(e,"horizontal",this)}function p(){this.classList.remove("sortable-hover")}function a(e,t){if(e.target&&"TD"===e.target.tagName&&!J.parentNode.classList.contains("wptb-preview-table-manage-cells")){var a=e.currentTarget,n=!1;if("vertical"===t&&e.target.dataset.hasOwnProperty("sortedVertical")){var r=[],l=[];if(this.itemsPerHeader&&this.itemsPerHeader<a.rows.length){WPTB_RecalculateIndexes(a);for(var o=_toConsumableArray(a.rows),s=a.querySelector("tbody")?a.querySelector("tbody"):a,i=0;i<o.length;i++)i<e.target.dataset.yIndex?(r.push(o[i]),s.removeChild(o[i])):i>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(l.push(o[i]),s.removeChild(o[i]));WPTB_RecalculateIndexes(a)}var c,d,p=a.querySelectorAll('[data-x-index="'.concat(e.target.dataset.xIndex,'"]'));(p=_toConsumableArray(p)).map(function(e){(c=parseInt(e.rowSpan,10))||(c=1),d=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(d,a),d+=c,WPTB_CutGlueTable.cutTableHorizontally(d,a)});for(var u,m=[],b=0,g=[],y=0;y<p.length;y++){var w=Y(e,a,p,y,b,"vertical");if(w&&w.hasOwnProperty("i"))p=w.tds,y=w.i;else{w&&(p=w.tds);for(var h=p[y],f=(f=parseInt(h.rowSpan,10))||1,b=parseInt(h.dataset.yIndex,10)+f,w=K(h),v=[],S=0;S<f;S++)v.push(a.rows[parseInt(h.dataset.yIndex,10)+S]),g.push(parseInt(h.dataset.yIndex,10)+S);0<h.dataset.yIndex?m.push({rowsTd:v,value:w}):u=v}}var T=$(e,"sortedVertical");if(!T)return;if(m.length&&m.sort(function(e,t){return Q(T,e,t)}),m.unshift({rowsTd:u}),m.length<a.rows.length)for(var _,C=0;C<a.rows.length;C++)-1<g.indexOf(C)||((_=[]).push(a.rows[C]),m.push({rowsTd:_}));var B,A,E,P=a.querySelector("tbody");P.innerHTML="",m.map(function(e){e.rowsTd.map(function(e){P.appendChild(e)})}),!r.length||(B=a.querySelector("tbody")?a.querySelector("tbody"):a)&&(A=B.querySelector("tr"),r.map(function(e){B.insertBefore(e,A)})),l.length&&(E=a.querySelector("tbody")?a.querySelector("tbody"):a,P&&l.map(function(e){E.appendChild(e)})),WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableHorizontally(a),n=!0}else if("horizontal"===t&&"0"===e.target.dataset.xIndex){var x,W,I=a.querySelectorAll('[data-y-index="'.concat(e.target.dataset.yIndex,'"]'));(I=_toConsumableArray(I)).map(function(e){(x=parseInt(e.colSpan,10))||(x=1),W=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(W,a),W+=x,WPTB_CutGlueTable.cutTableVertically(W,a)});for(var L,N=[],H=0,O=0;O<I.length;O++){var M=Y(e,a,I,O,H,"horizontal");if(M&&M.hasOwnProperty("i"))I=M.tds,O=M.i;else{M&&(I=M.tds);for(var k=I[O],D=(D=parseInt(k.colSpan,10))||1,H=parseInt(k.dataset.xIndex,10)+D,M=K(k),q=[],j=0;j<D;j++){var F=_toConsumableArray(a.querySelectorAll('[data-x-index="'.concat(parseInt(k.dataset.xIndex,10)+j,'"]')));q.push(F)}0<k.dataset.xIndex?N.push({columnsTd:q,value:M}):L=q}}var R=$(e,"sortedHorizontal");if(!R)return;if(N.length&&N.sort(function(e,t){return Q(R,e,t)}),N.unshift({columnsTd:L}),N.length<a.maxCols)for(var G=a.maxCols-N.length,V=0;V<G;V++){var z=_toConsumableArray(a.querySelectorAll('[data-x-index="'.concat(parseInt(a.maxCols,10)-parseInt(G,10)+V,'"]')));N.push({columnsTd:[z]})}for(var U=0;U<a.rows.length;U++)a.rows[U].innerHTML="";N.map(function(e){e.columnsTd.map(function(e){e.map(function(e){a.rows[e.dataset.yIndex].appendChild(e)})})}),WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableVertically(a),n=!0}n&&(function(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),a=0;a<t.length;a++)t[a].hasAttribute("data-same-cell-before-division")&&t[a].removeAttribute("data-same-cell-before-division")}(a),a.hasOwnProperty("tableSM")&&(new(a.tableSM())).tableStateSet(),this.reassignElementsStyles("td"),this.reassignElementsStyles("tr"))}}function $(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function Q(e,t,a){var n=0<arguments.length&&void 0!==e?e:"ask",r=2<arguments.length?a:void 0,l=(1<arguments.length?t:void 0).value,r=r.value;return parseInt(l)&&parseInt(r)&&(l=parseInt(l),r=parseInt(r)),"ask"===n?l<r?-1:l===r?0:1:l<r?1:l===r?0:-1}function K(e){for(var t=e.querySelectorAll(".wptb-text-container"),t=_toConsumableArray(t),a="",n=0;n<t.length;n++)a+=t[n].innerText,n!==t.length-1&&(a+=" ");return a}function Y(e,t,a,n,r,l){var o,s,i,c,d,p,u,m=a[n],b=!1;if("vertical"===l?(i="colSpan",c="data-y-index",d="yIndex",p="xIndex",y="rowSpan",u=t.rows.length):"horizontal"===l&&(i="rowSpan",c="data-x-index",d="xIndex",p="yIndex",y="colSpan",u=t.maxCols),0<m.dataset[d]-r){o=t.querySelectorAll("[".concat(c,'="').concat(r,'"]'));for(var g=0;g<o.length;g++)if(s=(s=o[g][i])||1,o[g].dataset[p]<e.target.dataset[p]&&parseInt(o[g].dataset[p],10)+parseInt(s,10)>e.target.dataset[p]){a.splice(n,0,o[g]),b=!0,n--;break}}if(b)return{tds:a,i:n};var y=(y=parseInt(m[y],10))||1;if(n==a.length-1&&parseInt(m.dataset[d],10)+y<u){o=t.querySelectorAll("[".concat(c,'="').concat(parseInt(m.dataset[d],10)+y,'"]'));for(var w=0;w<o.length;w++)if(s=(s=o[w][i])||1,o[w].dataset[p]<e.target.dataset[p]&&parseInt(o[w].dataset[p],10)+parseInt(s,10)>e.target.dataset[p]){a.push(o[w]),b=!0;break}}return!!b&&{tds:a}}return this.itemsPerHeader=0,this.tableMaxCols=J.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=J.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=J.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var a=0;a<t.length;a++){var n=t[a],r=window.getComputedStyle(n,null).getPropertyValue("background-color"),l="";"td"===e?(l=n.dataset.xIndex+"-"+n.dataset.yIndex,this.cellsStylesScheme[l]={backgroundColor:r}):"tr"===e&&(l=String(a),this.rowsStylesScheme[l]={backgroundColor:r})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t,a=this.table.querySelectorAll(e);if("td"===e?t=this.cellsStylesScheme:"tr"===e&&(t=this.rowsStylesScheme),a.length)for(var n=0;n<a.length;n++){var r=a[n],l="";if("td"===e?l=r.dataset.xIndex+"-"+r.dataset.yIndex:"tr"===e&&(l=n),t.hasOwnProperty(l)){var o,s=t[l];for(o in s)r.style[o]=s[o]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(e){var t,a,n,r;this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(t="vertical",a="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(t="horizontal",a="vertical"),t&&"string"==typeof t&&a&&"string"==typeof a&&(n=WPTB_GetDirectionAfterReconstruction(this.table,t,a,"vertical",e),"object"===_typeof(n)&&n.hasOwnProperty("switch")&&((r=function(e){var t=n.switch(e);"object"===_typeof(t)&&(this.itemsPerHeader=t.itemsPerHeader,t.hasOwnProperty("newTable")?(e=this.table,this.table=t.newTable,this.sortModeSwitcher(t.type[0],!0),this.table=e):this.sortModeSwitcher(t.type[0],!0))}).call(l),this.table.addEventListener("table:rebuilt",function(e){r.call(l,e)},!1)))},this.sortingCellMouseMoveSwitcher=function(e,t){var a=this;function n(e,t,a){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",p,!1),a&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",p,!1))}function r(e,t,a){a?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var l=this.table.querySelectorAll("td");if(l.length&&(l=_toConsumableArray(l)).map(function(e){n(e,c,!1),r(e,"sortedVertical",!1),n(e,d,!1),r(e,"sortedHorizontal",!1)}),t)if("vertical"===e)for(var o=this.table.rows.length,s=0;0<o;){var i=this.table.querySelectorAll('[data-y-index="'.concat(s,'"]'));(i=_toConsumableArray(i)).map(function(e){n(e,c,t),r(e,"sortedVertical",t)}),this.itemsPerHeader?(o-=this.itemsPerHeader+1,s+=this.itemsPerHeader+1):o=0}else"horizontal"===e&&(e=this.table.querySelectorAll('[data-x-index="0"]'),(e=_toConsumableArray(e)).map(function(e){2<a.table.querySelectorAll('[data-y-index="'.concat(e.dataset.yIndex,'"]')).length&&(n(e,d,t),r(e,"sortedHorizontal",t))}))},this.sortableTableVerticalStart=function(e){a.call(l,e,"vertical")},this.sortableTableHorizontalStart=function(e){a.call(l,e,"horizontal")},this}});var WPTB_Stringifier=function(e){if(e){var t=e.cloneNode(!0);t.dataset.tableColumns=e.columns,t.style.width=null,t.style.minWidth=null,t.style.maxWidth=null;var a=t.getElementsByTagName("td");if(0<a.length)for(var n=0;n<a.length;n++){a[n].removeAttribute("draggable"),a[n].classList.remove("wptb-droppable");var r=a[n].className.match(/wptb-element-((.+-)\d+)/i);r&&a[n].classList.remove(r[0]);var l=a[n].getElementsByClassName("wptb-ph-element");if(0<l.length)for(var o=0;o<l.length;o++){var s=l[o].querySelectorAll(".mce-content-body");if(0<s.length)for(var i=0;i<s.length;i++)s[i].classList.remove("mce-content-body");var c=l[o].querySelectorAll("[data-mce-style]");if(0<c.length)for(var d=0;d<c.length;d++)c[d].removeAttribute("data-mce-style");var p=l[o].querySelectorAll("[contenteditable]");if(0<p.length)for(var u=0;u<p.length;u++)p[u].removeAttribute("contenteditable");var m=l[o].querySelectorAll("[spellcheck]");if(0<m.length)for(var b=0;b<m.length;b++)m[b].removeAttribute("spellcheck");var g=l[o].querySelectorAll("[id^=mce_]");if(0<g.length)for(var y=0;y<g.length;y++)g[y].removeAttribute("id");for(var w=l[o].querySelectorAll(".wptb-actions"),h=w.length;0<h&&w[0]&&w[0].parentNode;)w[0].parentNode.removeChild(w[0]),h--;var f=l[o].querySelectorAll("[data-mce-bogus]");if(0<f.length){f=_toConsumableArray(f);for(var v=0;v<f.length;v++)f[v]&&f[v].parentNode&&f[v].parentNode.removeChild(f[v])}}}return t}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw l}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var array=[],WPTB_Table=function(e,t,a){function v(e){var t=e.currentTarget,a=t.rowSpan,n=t.colSpan,r=document.getElementsByClassName("wptb-no-cell-action"),l=document.getElementsByClassName("wptb-single-action"),o=document.getElementsByClassName("wptb-multiple-select-action"),s=document.getElementById("wptb-left-scroll-panel-cell-settings");function i(e,t){var a=1<arguments.length&&void 0!==t&&t,n=a?"add":"remove";e.classList[n]("wptb-highlighted");for(var n=_slicedToArray(C(e),2),r=n[0],l=n[1],o=e.rowSpan,s=e.colSpan,i=0;i<o;i++)for(var c=0;c<s;c++)array[r+i][l+c]=a?1:0}if((d=C(t))[0],d[1],document.select.isActivated()){d=e.shiftKey;t.className.match(/wptb-highlighted/)?!(1<(e=Array.from(document.querySelectorAll(".wptb-highlighted"))).length)||d?i(t,!1):(i(t,!0),e.map(function(e){e!==t&&i(e,!1)})):(d||Array.from(document.querySelectorAll(".wptb-highlighted")).map(function(e){e!==t&&i(e,!1)}),i(t,!0));var c=document.getElementsByClassName("wptb-highlighted"),d=c.length;if(0===d){for(var p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.add("visible"),r[p].removeAttribute("disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");s.classList.remove("visible")}else if(1===d){for(p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.add("visible"),l[p].removeAttribute("disabled");c=c[0],WPTB_Helper.elementOptionsSet("table_cell_setting",c);var u=c.className.match(/wptb-element-((.+-)\d+)/i);["cellWidth","cellHeight"].map(function(e){var t,a,n,r="wptb-el-".concat(u[1],"-").concat(e),l="wptb-el-".concat(u[1],"-").concat(e,"Fixed");"cellWidth"!==e&&"cellHeight"!==e||(a=t="","cellWidth"===e?(t="width",a="getColumnWidth"):"cellHeight"===e&&(t="height",a="getRowHeight"),n=c.style[t],r=document.querySelectorAll("."+r),l=document.querySelector("."+l),r=_toConsumableArray(r),n||c.dataset["wptbFixed".concat(t.toUpperCase())]?(r.map(function(e){n?e.value=parseFloat(n,10):c.dataset["wptbFixed".concat(t.toUpperCase())]&&(e.value=c.dataset["wptbFixed".concat(t.toUpperCase())])}),l.checked=!0):(n=WPTB_Helper[a](B,c),r.map(function(e){e.value=n}),l.checked=!1))}),s.classList.add("visible")}else{for(p=0;p<o.length;p++)B.isSquare(array)?(o[p].classList.add("visible"),o[p].removeAttribute("disabled")):(o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled"));for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");s.classList.remove("visible")}s=t.className.match(/wptb-element-table_cell_setting-((.+-)\d+)/i);s&&1<s.length&&(m="wptb-el-table_cell_setting-".concat(s[1],"-").concat("emptyCell"),(m=document.getElementById(m))&&(m.querySelector('input[type="checkbox"]').checked=t.classList.contains("wptb-empty")));var m={countMarkedCells:d};WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/cell/mark",t,m);m=document.querySelector("#wptb-split-cell");m&&(1===d&&(1!==a||1!==n)?(m.classList.add("visible"),m.removeAttribute("disabled")):(m.classList.remove("visible"),m.setAttribute("disabled","disabled")))}}function S(e){for(var t=0;t<e.length;t++){for(var a=0;a<e[t].length;a++)e[t][a];0}B.isSquare(e)}function T(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),a=document.getElementsByClassName("wptb-multiple-select-action"),n=document.getElementById("wptb-left-scroll-panel-cell-settings"),r=B.getElementsByClassName("wptb-highlighted");r.length;)r[0].classList.remove("wptb-highlighted");n.classList.remove("visible");for(var l=0;l<array.length;l++)for(var o=0;o<array[l].length;o++)array[l][o]=0;for(var s=0;s<a.length;s++)a[s].classList.remove("visible"),a[s].setAttribute("disabled","disabled");for(var i=0;i<e.length;i++)e[i].classList.add("visible"),e[i].removeAttribute("disabled");for(var c=0;c<t.length;c++)t[c].classList.remove("visible"),t[c].setAttribute("disabled","disabled");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/undo-select/active",B)}function n(){for(var e=[],t=[],a=0;a<B.rows.length;a++){for(var n=B.rows[a].getElementsByTagName("td"),r=0,l=0;l<n.length;l++)r+=n[l].colSpan;e.push(r)}u=Math.max.apply(null,e);for(var o=B.rows.length,a=0;a<o;a++){t[a]=[];for(l=0;l<u;l++)t[a].push(0)}return S(t),t}var B,r,l,u,o=document.getElementsByClassName("wptb-settings-items"),_=document.getElementsByClassName("wptb-table-setup")[0],C=function(e){for(var t=[],a=0;a<u;a++)t[a]=0;for(a=0;a<B.rows.length;a++)for(var n=B.rows[a].getElementsByTagName("td"),r=cellPointer=0;r<u;r+=stepsToMove)if(stepsToMove=1,t[r])t[r]--;else{var l=n[cellPointer++];if(l==e)return[a,r];if(1<l.rowSpan){for(var o=0;o<l.colSpan;o++)t[r+o]=l.rowSpan-1;stepsToMove=l.colSpan}else 1<l.colSpan&&(stepsToMove=l.colSpan)}};if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var s=0;s<o.length;s++)"wptb-apply-inner-border"!==o[s].id&&o[s].classList.add("visible");(B=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),B.style.border="1px solid #d1d1d1",B.dataset.reconstraction=1;for(s=0;s<t;s++){(r=B.insertRow(-1)).classList.add("wptb-row");for(var g=0;g<e;g++)(l=new WPTB_Cell(v)).setCoords(s,g),l.getDOMElement().style.border="1px solid #d1d1d1",r.appendChild(l.getDOMElement())}}else{if(!(a=a||document.querySelector(".wptb-preview-table")))return;var i=(B=a).getElementsByTagName("td");if(0<i.length)for(var c=0;c<i.length;c++)WPTB_Cell(v,i[c])}B.mark=function(e){v(e)},B.wptbCell=function(e,t){return WPTB_Cell(e,t)},B.tableSM=function(){return WPTB_TableStateSaveManager},B.undoSelect=function(){T()},B.setMaxAmountOfCells=function(e){u=e},B.getMaxAmountOfCells=function(){return u},B.fillTableArray=n,B.recalculateIndexes=function(){WPTB_Helper.recalculateIndexes(this)},B.addColumnWidth=function(p,u){var e=B.getElementsByClassName("wptb-highlighted");if(0<e.length){for(var t=0;t<e.length;t++){var a=e[t].dataset.xIndex;a&&!function e(t,a){for(var n=B.rows,r=!1,l=[],o=0;o<n.length;o++)for(var s=n[o].children,i=0;i<s.length;i++){var c=s[i];if(c.dataset.xIndex==t){if(p)c.colSpan==a?(c.style.width=p+"px",c.removeAttribute("data-wptb-fixed-width"),r=!0):(c.style.width=null,c.dataset.wptbFixedWidth=p,o!=n.length-1||r||e(t,a+1));else if(u)c.style.width=null,c.removeAttribute("data-wptb-fixed-width");else if(c.dataset.wptbFixedWidth)c.colSpan==a&&(c.style.width=c.dataset.wptbFixedWidth+"px",c.removeAttribute("data-wptb-fixed-width"));else if(c.style.width){for(var d=0;d<l.length;d++)l[d].style.width=c.style.width;l=[]}else l.push(c);break}}}(a,1)}B.tdDefaultWidth(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B)}},B.tdDefaultWidth=function(){for(var e=B.rows,t=0,a=0,n=0,r=document.getElementsByClassName("wptb-table-setup")[0],l=r.offsetWidth,o=[],s=[],i=0,c=0,d="",p=window.getComputedStyle(B,null),u=p.getPropertyValue("border-left-width"),p=p.getPropertyValue("border-right-width"),m=parseFloat(u,10)+parseFloat(p,10),b=0;b<e.length;b++)for(var g=e[b].children,y=0;y<g.length;y++){var w,h,f,v=g[y];o[parseFloat(v.dataset.xIndex)]||s[parseFloat(v.dataset.xIndex)]?s[parseFloat(v.dataset.xIndex)]?v.dataset.wptbFixedWidth||(v.dataset.wptbCssTdAutoWidth=!0):o[parseFloat(v.dataset.xIndex)]&&v.removeAttribute("data-wptb-css-td-auto-width"):(v.style.width?(o[parseFloat(v.dataset.xIndex)]=parseFloat(v.style.width),v.removeAttribute("data-wptb-css-td-auto-width")):v.dataset.wptbFixedWidth||(s[parseFloat(v.dataset.xIndex)]=B.dataset.wptbTdWidthAuto?parseFloat(B.dataset.wptbTdWidthAuto,10):100,v.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(v,null)&&(w=(f=window.getComputedStyle(v,null)).getPropertyValue("padding-left"),h=f.getPropertyValue("padding-right"),i=parseFloat(w,10)+parseFloat(h,10),h=f.getPropertyValue("border-left-width"),f=f.getPropertyValue("border-right-width"),c=parseFloat(h,10)+parseFloat(f,10),c/=2,o[parseFloat(v.dataset.xIndex)]?(o[parseFloat(v.dataset.xIndex)]+=i,o[parseFloat(v.dataset.xIndex)]+=c,0==y&&m/2<=parseFloat(h,10)?o[parseFloat(v.dataset.xIndex)]+=parseFloat(h,10)/2:0==y&&m/2>parseFloat(h,10)&&(o[parseFloat(v.dataset.xIndex)]+=m/2-parseFloat(f,10)/2),y==g.length-1&&m/2<=parseFloat(f,10)?o[parseFloat(v.dataset.xIndex)]+=parseFloat(f,10)/2:y==g.length-1&&m/2>parseFloat(f,10)&&(o[parseFloat(v.dataset.xIndex)]+=m/2-parseFloat(f,10)/2)):s[parseFloat(v.dataset.xIndex)]&&(s[parseFloat(v.dataset.xIndex)]+=i,s[parseFloat(v.dataset.xIndex)]+=c,0==y&&m/2<=parseFloat(h,10)?s[parseFloat(v.dataset.xIndex)]+=parseFloat(h,10)/2:0==y&&m/2>parseFloat(h,10)&&(s[parseFloat(v.dataset.xIndex)]+=m/2-parseFloat(h,10)/2),y==g.length-1&&m/2<=parseFloat(f,10)?s[parseFloat(v.dataset.xIndex)]+=parseFloat(f,10)/2:y==g.length-1&&m/2>parseFloat(f,10)&&(s[parseFloat(v.dataset.xIndex)]+=m/2-parseFloat(h,10)/2))))}for(var S=0;S<o.length;S++)o[S]&&(a+=o[S]);for(var T=0,_=0;_<s.length;_++)s[_]&&(n+=s[_],T++);t=a+n,B.dataset.wptbTableTdsSumMaxWidth=t,T?(B.dataset.wptbCellsWidthAutoCount=T,B.mergingellsHorizontally?B.dataset.wptbFixedWidthSize=a:B.removeAttribute("data-wptb-fixed-width-size")):(B.removeAttribute("data-wptb-fixed-width-size"),B.removeAttribute("data-wptb-cells-width-auto-count"));var C,p=!1;t<l?T?(B.style.minWidth="100%",B.mergingellsHorizontally?(B.style.width="auto",C=(C=(l-a)/T)-i-c,p=!0):B.style.width="100%"):(B.style.width="auto",B.style.minWidth=null,B.style.maxWidth=null):(B.style.maxWidth=null,B.style.minWidth=t+"px",B.style.width="auto",C=B.dataset.wptbTdWidthAuto||"100",p=!0);l=document.head;!l||(t=l.querySelector('style[data-wptb-td-auto-width="true"]'))&&l.removeChild(t),p&&((d=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),d.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+C+"px}",l&&l.appendChild(d)),B.dataset.wptbTableAlignment?(d=B.dataset.wptbTableAlignment,r.offsetWidth<B.offsetWidth?B.style.float=null:B.style.float="center"==d?null:d,r.style.float="center"==d?null:d,C&&B.dataset.wptbTableContainerMaxWidth&&B.offsetWidth<B.dataset.wptbTableContainerMaxWidth&&(B.style.width="100%")):B.style.float=null},B.addRowHeight=function(p,u){var e=B.getElementsByClassName("wptb-highlighted");if(0<e.length){for(var t=0;t<e.length;t++){var a=e[t].dataset.yIndex;a&&!function e(t,a){for(var n=B.rows,r=!1,l=[],o=0;o<n.length;o++)for(var s=n[o].children,i=0;i<s.length;i++){var c=s[i];if(c.dataset.yIndex==t)if(p)c.rowSpan!=a?(c.style.height=null,c.dataset.wptbFixedHeight=p,i!=s.length-1||r||e(t,a+1)):(c.style.height=p+"px",c.removeAttribute("data-wptb-fixed-heidht"),r=!0);else if(u)c.style.height=null,c.removeAttribute("data-wptb-fixed-heidht");else if(c.dataset.wptbFixedHeight)(c.rowSpan=a)&&(c.style.height=c.dataset.wptbFixedHeight+"px",c.removeAttribute("data-wptb-fixed-width"));else if(c.style.height){for(var d=0;d<l.length;d++)l[d].style.height=c.style.height;l=[]}else l.push(c)}}(a,1)}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B)}},B.reconstraction=function(){var e=B.getElementsByTagName("td");B.mergingellsHorizontally=!1,B.mergingCellsVertically=!1,B.dataset.reconstraction=1;for(var t=0,a=0;a<e.length&&(1<e[a].colSpan&&(B.dataset.reconstraction=0,B.mergingellsHorizontally=!0,t++),1<e[a].rowSpan&&(B.dataset.reconstraction=0,B.mergingCellsVertically=!0,t++),2!=t);a++);},B.addColumnEnd=function(){var e,t,a,n=document.getElementsByClassName("wptb-preview-table");0<n.length&&(t=n[0].querySelector("td")),t&&(a=t.getAttribute("style"));for(var r=0;r<B.rows.length;r++)e=new WPTB_Cell(v),a&&(e.getDOMElement().setAttribute("style",a),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),B.rows[r].appendChild(e.getDOMElement()),array[r].push(0);u++,B.recalculateIndexes(),B.tdDefaultWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.addColumnStart=function(){var e,t,a,n,r=document.getElementsByClassName("wptb-preview-table");0<r.length&&(a=r[0].querySelector("td")),a&&(n=a.getAttribute("style"));for(var l=0;l<B.rows.length;l++)e=new WPTB_Cell(v),n&&(e.getDOMElement().setAttribute("style",n),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),(t=B.rows[l].getElementsByTagName("td")[0])?B.rows[l].insertBefore(e.getDOMElement(),t):B.rows[l].appendChild(e.getDOMElement()),array[l].push(0);u++,B.recalculateIndexes(),B.tdDefaultWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.addColumnAfter=function(e){var t,a,n,r=B.rows;if(null!=e&&"number"==typeof e?(n=e,t=document.querySelector('[data-x-index="'+n+'"]')):(t=document.querySelector(".wptb-highlighted"),n=C(t)[1]),t)if(a=t.getAttribute("style"),u-n-t.colSpan+1==1)B.addColumnEnd();else{function l(e){var t=new WPTB_Cell(v);return e&&(t.getDOMElement().setAttribute("style",e),t.getDOMElement().style.width=null,t.getDOMElement().style.height=null),t.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor"),t}for(var o=0;o<r.length;o++)for(var s=r[o].children,i=0;i<s.length;i++)if(parseInt(s[i].dataset.xIndex)<=n){if(parseInt(s[i].dataset.xIndex)+s[i].colSpan==n+t.colSpan){var c=l(a),d=s[i].nextSibling;d?r[o].insertBefore(c.getDOMElement(),d):r[o].appendChild(c.getDOMElement());break}if(parseInt(s[i].dataset.xIndex)+s[i].colSpan>n+t.colSpan){s[i].colSpan++,1<s[i].rowSpan&&(o+=s[i].rowSpan-1);break}}else if(parseInt(s[i].dataset.xIndex)>n){c=l(a);r[o].insertBefore(c.getDOMElement(),s[i]);break}for(var p=0;p<array.length;p++)array[p].push(0);u++,S(array),B.recalculateIndexes(),B.addColumnWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()}},B.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),e=C(e)[1];0===e?B.addColumnStart():B.addColumnAfter(e-1)},B.addRowToTheEnd=function(){var e,t,a=B.insertRow(-1),n=document.getElementsByClassName("wptb-preview-table");if(a.classList.add("wptb-row"),0<n.length){n=n[0];for(var r=0;r<u;r++){e=new WPTB_Cell(v);var l=n.querySelector('[data-x-index="'+r+'"]');l&&(l=l.getAttribute("style"),e.getDOMElement().setAttribute("style",l),e.getDOMElement().style.height=null),a.appendChild(e.getDOMElement())}t=Array.from(array[0]),array.push(t),S(array),B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),B.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()}},B.addRowToTheStart=function(){var e,t,a=B.insertRow(0),n=document.getElementsByClassName("wptb-preview-table");if(a.classList.add("wptb-row"),0<n.length){n=n[0];for(var r=0;r<u;r++){e=new WPTB_Cell(v);var l=n.querySelector('[data-x-index="'+r+'"]');l&&(l=l.getAttribute("style"),e.getDOMElement().setAttribute("style",l),e.getDOMElement().style.height=null),a.appendChild(e.getDOMElement())}t=Array.from(array[0]),array.push(t),S(array),B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),B.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()}},B.addRowBefore=function(){var e,t=document.querySelector(".wptb-highlighted"),a=t.getAttribute("style"),n=C(t)[0];0===n&&(n=-1);for(var r=n-1;0<=r;r--){var l=B.rows[r].children,o=l.length;if(0<o)for(var s=0;s<o;s++)if(1==l[s].rowSpan){n=r,e=!0;break}if(e)break}-1===n?B.addRowToTheStart():B.addRowAfter(n,a)},B.addRowAfter=function(e,t){var a,n=null!=e&&"number"==typeof e||null!=t?e:(t=(a=document.querySelector(".wptb-highlighted")).getAttribute("style"),(e=C(a)[0])+a.rowSpan-1),r=0;if(n<B.rows.length-1){for(var l=0;l<=n;l++){var o=B.rows[l].children,s=o.length;if(0<s)for(var i=0;i<s;i++)n<o[i].rowSpan-1+l&&o[i].rowSpan++}var c=B.rows[n+1].children,d=c.length;if(0<d)for(var p=0;p<d;p++)r+=c[p].colSpan}else r=array[0].length;var u=B.insertRow(n+1);for(u.classList.add("wptb-row"),g=0;g<r;g++){var m=new WPTB_Cell(v),b=B.querySelector('[data-x-index="'+g+'"]');b&&(b=b.getAttribute("style"),m.getDOMElement().setAttribute("style",b),m.getDOMElement().style.height=null),u.appendChild(m.getDOMElement())}a=Array.from(array[0]),array.push(a),S(array),B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),B.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after"),(new WPTB_TableStateSaveManager).tableStateSet()},B.isSquare=function(e){for(var t,a,n=-1,r=-1,l=-1,o=-1,s=0,i=0;i<e.length;i++)for(var c=0;c<e[i].length;c++)1==e[i][c]&&((c<r||-1==r)&&(r=c),(i<n||-1==n)&&(n=i));for(i=e.length-1;-1<i;i--)for(c=e[i].length-1;-1<c;c--)1==e[i][c]&&(o<c&&(o=c),l<i&&(l=i));for(i=n;i<l;i++)for(c=r;c<o;c++)if(0==e[i][c]||null==e[i][c])return!1;for(i=0;i<e.length;i++)for(c=0;c<e[i].length;c++)1==e[i][c]&&s++;return(t=l-n+1)*(a=o-r+1)===s&&[t,a]},B.mergeCells=function(){for(var e=B.isSquare(array),t=e[0],e=e[1],a=document.querySelector(".wptb-highlighted"),n=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),r=[],l=0;l<n.length;l++){var o=n[l].getElementsByClassName("wptb-ph-element");if(0<o.length)for(var s=o.length,i=0;i<s;i++)r.push(o[i]);n[l].parentNode.removeChild(n[l])}if(0<r.length)for(var c=0;c<r.length;c++)a.appendChild(r[c]);a.colSpan=e,a.rowSpan=t,B.recalculateIndexes(),B.reconstraction();e=a.style.width,t=a.dataset.wptbFixedWidth;e?B.addColumnWidth(parseFloat(e,10)):t?B.addColumnWidth():B.addColumnWidth(!1,!0);e=a.style.height,t=a.dataset.wptbFixedHeight;e?B.addRowHeight(parseFloat(e,10)):t?B.addRowHeight():B.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,a=e.colSpan,n=e.getAttribute("style"),r=C(e)[0],l=B.rows[r],o=e.dataset.xIndex;e.rowSpan=1;for(var s=e.colSpan=1;s<a;s++){var i=new WPTB_Cell(v);i.getDOMElement().setAttribute("style",n),i.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?l.insertBefore(i.getDOMElement(),e.nextSibling):l.appendChild(i.getDOMElement())}if(1<t)for(var c=1;c<t;c++){var d=void 0,p=B.rows[r+c],u=p.children,m=u.length;if(0<m)for(var b=0;b<m;b++)if(Number(u[b].dataset.xIndex)>Number(o)){d=u[b];break}for(var g=0;g<a;g++){var y=new WPTB_Cell(v);y.getDOMElement().setAttribute("style",n),null!=d?p.insertBefore(y.getDOMElement(),d):p.appendChild(y.getDOMElement())}}B.recalculateIndexes(),B.reconstraction(),B.addColumnWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.findRowspannedCells=function(e){var t,a=[];if(actualPoints=function(e){for(var t=B.rows[e].getElementsByTagName("td"),a=0,n=0;n<t.length;n++)a+=t[n].colSpan;return a}(e),actualPoints===u)return[];t=u-actualPoints;for(var n=e-1;0<=n&&t;n--)for(var r=B.rows[n].getElementsByTagName("td"),n=0;n<r.length;n++)1<r[n].rowSpan&&(a.push(r[n]),t-=r[n].colSpan);return a},B.addLackingCells=function(){for(var e=[],t=0;t<B.rows.length;t++)e.push(0);for(t=0;t<B.rows.length;t++)for(var a=B.rows[t].getElementsByTagName("td"),n=0;n<a.length;n++)if(1<a[n].rowSpan)for(var r=1;r<a[n].rowSpan;r++)e[t+r]++;for(t=0;t<B.rows.length;t++){for(var a=B.rows[t].getElementsByTagName("td"),l=0,n=0;n<a.length;n++)l+=a[n].colSpan;l+=e[t],difference=u-l;for(n=0;n<difference;n++){var o=new WPTB_Cell(v);B.rows[t].appendChild(o.getDOMElement())}}},B.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=e.rowSpan,n=C(e)[0];null==a&&(a=1);for(var r=0;r<a;r++){var l,o,s=B.rows[n].children,i=B.rows[n+1],c=[];if(null!=i){o=(l=i.children).length;for(var d=0;d<s.length;d++)if(1<s[d].rowSpan){var p=new WPTB_Cell(v);p.getDOMElement().setAttribute("style",t),p.getDOMElement().colSpan=s[d].colSpan,p.getDOMElement().rowSpan=s[d].rowSpan-1;for(var u=void 0,m=0;m<o;m++)if(Number(l[m].dataset.xIndex)>Number(s[d].dataset.xIndex)){u=l[m];break}u?c.push([p,u]):c.push([p])}if(0<c.length)for(var b=0;b<c.length;b++)null!=c[b][1]?i.insertBefore(c[b][0].getDOMElement(),c[b][1]):i.appendChild(c[b][0].getDOMElement())}var g,y=B.rows;if(0<y.length)for(var w=0;w<n;w++){var h=y[w].children;if(0<h.length)for(var f=0;f<h.length;f++)h[f].rowSpan-1>=n-w&&h[f].rowSpan--}g=Array.from(array[0]),array.pop(g),S(array),B.getElementsByTagName("tbody")[0].removeChild(B.rows[n]),0==B.rows.length?(WPTB_Helper.toggleTableEditMode(),_.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(g=document.getElementsByClassName("wptb-save-btn")).length&&((g=g[0]).classList.add("wptb-save-disabled"),g.classList.remove("active"))):(B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),WPTB_Helper.dataTitleColumnSet(B),B.reconstraction())}T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,a=e.colSpan,n=0;n<a;n++){for(var r=0;r<B.rows.length;r++){var l=B.rows[r].children,o=l.length;if(0<o)for(var s=o-1;0<=s;s--){if(Number(l[s].dataset.xIndex)==Number(t)){1<l[s].colSpan?l[s].colSpan--:B.rows[r].removeChild(l[s]);break}if(Number(l[s].dataset.xIndex)<Number(t)&&Number(l[s].dataset.xIndex)+Number(l[s].colSpan-1)>=t){1<l[s].colSpan&&l[s].colSpan--;break}}}for(var i,c=0;c<B.rows.length;c++)null!=array[c]&&array[c].pop();u--,0==B.querySelectorAll("td").length?(WPTB_Helper.toggleTableEditMode(),_.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(i=document.getElementsByClassName("wptb-save-btn")).length&&((i=i[0]).classList.add("wptb-save-disabled"),i.classList.remove("active"))):(B.recalculateIndexes(),B.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(B),B.reconstraction())}T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},array=n(),T(),S(array),_.appendChild(B),B.recalculateIndexes(!0),B.reconstraction(),B.tdDefaultWidth(),_.onresize=function(){B.tdDefaultWidth()},WPTB_LeftPanel(),WPTB_Helper.wptbDocumentEventGenerate("wptb:table:generated",document),WPTB_Helper.elementStartScript(B,"table_setting"),WPTB_Helper.elementOptionsSet("table_setting",B)},WPTB_TableSettingsData={borderColor:"",setTableSetting:function(e,t){this[e]=t},getTableSetting:function(e){return this[e]}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_TableStateSaveManager=function(){this.tableStateSet=function(e){if(!(e&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var t=document.getElementsByClassName("wptb-table-setup"),a="";0<t.length?a=(t=t[0]).querySelector(".wptb-preview-table"):t="",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));var n="";if(t){for(var r=(n=t.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),l=0;l<r.length;l++)r[l].classList.remove("wptb-highlighted");for(var o=n.getElementsByClassName("wptb-directlyhovered"),s=0;s<o.length;s++)o[s].classList.remove("wptb-directlyhovered");var i=n.querySelectorAll(".mce-content-body");if(0<i.length)for(var c=0;c<i.length;c++)i[c].classList.remove("mce-content-body");var d=n.querySelectorAll("[data-mce-style]");if(0<d.length)for(var p=0;p<d.length;p++)d[p].removeAttribute("data-mce-style");var u=n.querySelectorAll("[id^=mce_]");if(0<u.length)for(var m=0;m<u.length;m++)u[m].removeAttribute("id")}e="",t=document.head;!t||(b=t.querySelector('style[data-wptb-td-auto-width="true"]'))&&(e=b.innerHTML);var t="",b=document.getElementById("wptb-setup-name");b&&(t=b.value),window.wptbTableStateSaving.push([n,e,t]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,0<window.wptbTableStateSaving.length-1&&(0<(g=document.getElementsByClassName("wptb-undo")).length&&(g=g[0]).classList.remove("wptb-undoredo-disabled"));var g=document.getElementsByClassName("wptb-redo");0<g.length&&(g=g[0]).classList.add("wptb-undoredo-disabled");g=document.getElementsByClassName("wptb-save-btn");0<g.length&&(!(g=g[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==g.dataset.wptbTableStateNumberSave||!a?(g.classList.add("wptb-save-disabled"),g.classList.remove("active")):(g.classList.remove("wptb-save-disabled"),g.classList.add("active")))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&0<window.wptbTableStateSaving.length){if("undo"==e){if(!(0<window.wptbTableStateNumberShow))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length))return!1;window.wptbTableStateNumberShow++}var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0],0==window.wptbTableStateNumberShow?t&&t.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&t&&t.classList.remove("wptb-undoredo-disabled"));e=document.getElementsByClassName("wptb-redo");0<e.length&&(e=e[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?e&&e.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&e&&e.classList.remove("wptb-undoredo-disabled"));t=document.getElementsByClassName("wptb-save-btn");0<t.length&&(!(t=t[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==t.dataset.wptbTableStateNumberSave?(t.classList.add("wptb-save-disabled"),t.classList.remove("active")):(t.classList.add("active"),t.classList.remove("wptb-save-disabled")));var a,e=document.getElementsByClassName("wptb-table-setup");0<e.length&&(e=e[0],window.wptbTableStateSaving[window.wptbTableStateNumberShow]&&(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML"in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(e.outerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML),(e=document.querySelector(".wptb-table-setup"))&&0==e.children.length&&(t.classList.add("wptb-save-disabled"),t.classList.remove("active")),(e=document.head)&&((t=e.querySelector('style[data-wptb-td-auto-width="true"]'))&&e.removeChild(t),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]&&((a=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),a.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],e.appendChild(a))),a=document.getElementById("wptb-setup-name"),void 0!==window.wptbTableStateSaving[window.wptbTableStateNumberShow][2]&&a&&(a.value=window.wptbTableStateSaving[window.wptbTableStateNumberShow][2])),0<(a=document.getElementsByTagName("body")).length&&(a=a[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel(),(a=document.getElementById("wptb-left-scroll-panel-cell-settings"))&&a.classList.remove("visible"))}},this.tableStateClear=function(){delete window.wptbTableStateSaving,delete window.wptbTableStateNumberShow;var e=document.getElementsByClassName("wptb-save-btn");0<e.length&&(e=e[0]).removeAttribute("data-wptb-table-state-number-save");e=document.getElementsByClassName("wptb-undo");0<e.length&&(e=e[0]).classList.add("wptb-undoredo-disabled");e=document.getElementsByClassName("wptb-redo");0<e.length&&(e=e[0]).classList.add("wptb-undoredo-disabled")}};document.addEventListener("wptb:table:generated",function(){Array.from(document.querySelectorAll(".wptb-left-panel .wptb-upsells-anchor")).map(function(e){e&&(e.style.display="unset")})});var WPTB_innerElementSet=function o(t){t.ondragenter=function(e){-1==e.dataTransfer.types.indexOf("wptbelement")&&-1==e.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,e),t.classList.add("wptb-ondragenter"))},t.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},t.ondragleave=function(e){WPTB_DropHandle(this,e,!0)},t.ondrop=function(e){var t,a,n,r;if(this.classList.remove("wptb-ondragenter"),e.preventDefault(),e.stopPropagation(),e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node")){if(0<document.getElementsByClassName("wptb-drop-handle").length&&(a=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(n=document.getElementsByClassName("wptb-drop-border-marker")[0]),t=e.dataTransfer.getData("wptbElement")?(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():(r=e.dataTransfer.getData("node"),document.getElementsByClassName(r)[0]),"td_relative"===WPTB_Helper.getDragRelativeType())WPTB_DropHandle(this,e,!0),WPTB_Helper.getParentOfType("td",e.target).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t);else{if("block"!=a.style.display)return;"Drop Here"==a.dataset.text?((l=a.getDOMParentElement()).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):(l=(r=a.getDOMParentElement()).parentNode,"Above Element"==a.dataset.text?(l.insertBefore(t,r),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):"Below Element"==a.dataset.text&&(r=r.nextSibling,l.insertBefore(t,r),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)));var l=l.parentNode;!WPTB_Helper.rowIsTop(l)||(l=WPTB_Helper.findAncestor(l,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(l);t.className.match(/wptb-element-(.+)-(\d+)/i)[1];e.dataTransfer.getData("wptbElement")}return a&&(a.style.display="none",n.style.display="none"),o(t),t.classList.contains("wptb-image-container")&&!t.classList.contains("wptb-moving-mode")||(t.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet()),!0}},t.onmouseover=function(e){t.classList.remove("wptb-ondragenter")}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var applyGenericItemSettings=function(e,t,a){var n,r=2<arguments.length&&void 0!==a&&a,l=e.getDOMElement();if(l.classList.contains("wptb-ph-element")){if(null==t||1==r){if(n=WPTB_ElementIdProvider.getNewId(e.kind),r)for(var o,s,i=_toConsumableArray(l.attributes),c=0;c<i.length;c++)i[c]&&"object"===_typeof(i[c])&&i[c].nodeName&&(o=new RegExp("data-wptb-el-"+e.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),(s=i[c].nodeName.match(o))&&Array.isArray(s)&&(o=i[c].nodeName.replace(e.kind+"-"+s[1],e.kind+"-"+n),s=i[c].nodeValue,l.removeAttribute(i[c].nodeName),l.setAttribute(o,s)))}else t&&!r&&(n=(d=t.split("-"))[d.length-1]);var d=l.className.match(/wptb-element-(.+)-(\d+)/i);d&&l.classList.remove(d[0]),l.classList.contains("wptb-ph-element")||l.classList.add("wptb-ph-element"),l.classList.contains("wptb-element-"+e.kind+"-"+n)||l.classList.add("wptb-element-"+e.kind+"-"+n),WPTB_Helper.elementStartScript(e.getDOMElement()),new WPTB_ElementOptions(e,n,t),document.counter.increment(e.kind)}l.onmouseenter=function(e){var t;e.target.classList.contains("wptb-text-container")&&(1!==l.children.length||1===(t=l.children[0].lastChild).children.length&&"<br>"===t.innerHTML&&(t.innerHTML="")),e.target.classList.contains("wptb-moving-mode")||((e=new WPTB_ActionsField).addActionField(1,l),e.setParameters(l),l.classList.remove("wptb-ondragenter"))},l.onmouseleave=function(e){(new WPTB_ActionsField).leaveFromField(e,l)}};
//# sourceMappingURL=admin.js.map
