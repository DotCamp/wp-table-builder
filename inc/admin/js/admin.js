function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_ActionsField=function e(){var t=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(a,n){var r=document.getElementsByTagName("body")[0],l=document.getElementsByClassName("wptb-actions");if(0!=l.length){var o=l[0].activeElem;for(o&&o.classList.remove("wptb-directlyhovered");0!=l.length;)l[0].parentNode.removeChild(l[0])}if(1==a){var i,s,c;if(i=document.createElement("span"),s=document.createElement("span"),(l=document.createElement("div")).classList.add("wptb-actions"),i.classList.add("dashicons","dashicons-trash","wptb-delete-action"),s.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),l.appendChild(s),l.appendChild(i),r.appendChild(l),l.activeElem=n,l.type=1,i.onclick=function(t){var a=t.target.parentNode.activeElem,n=a.parentNode;a.className.match(/wptb-element-(.+)-(\d+)/i);if(a&&n.removeChild(a),a&&"object"===_typeof(a)&&a.hasOwnProperty("kind")&&"text"==a.kind){var r=n.parentNode;if(WPTB_Helper.rowIsTop(r)){var l=WPTB_Helper.findAncestor(r,"wptb-preview-table");l.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(l)}}(new e).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.wptbDocumentEventGenerate("element:removed:dom",document,a)},s.onclick=function(t){var a,n,r,l=t.target.parentNode.activeElem,o=l.parentNode;if((n=l.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(n)){r=n[1];var i={};i.kind=r,i.elemProt=l,i.tinyMceClear=!0,(a=new WPTB_ElementObject(i)).getDOMElement().classList.remove("edit-active"),o.insertBefore(a.getDOMElement(),l.nextSibling)}else{a={};var s=l.cloneNode(!0);s.classList.remove("wptb-directlyhovered"),a.getDOMElement=function(){return s},applyGenericItemSettings(a),o.insertBefore(a.getDOMElement(),l.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",l,a.getDOMElement())}WPTB_innerElementSet(a.getDOMElement()),new e(1,l).setParameters(l),(new WPTB_TableStateSaveManager).tableStateSet()},n.classList.contains("wptb-ph-element"))(c=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),c.draggable=!0,l.appendChild(c),c.ondragstart=function(e){var a,n,r,l=wp.template("wptb-element-icons-directories")({}),o=JSON.parse(l),i=e.target.parentNode.activeElem;if((n=i.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(n)){r=n[1],i.classList.add("wptb-moving-mode"),o&&"object"===_typeof(o)&&o[r]&&(a=WPTB_Helper.getElementIcon(o[r])),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(a,0,0),e.dataTransfer.setData("node","wptb-element-"+n[1]+"-"+n[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+n[1]+"-"+n[2]),e.dataTransfer.setData("wptbElIndic-"+n[1],"wptbElIndic-"+n[1]);var s=e.target.parentNode.activeElem;if("text"==s.kind){var c=s.parentNode.parentNode;if(WPTB_Helper.rowIsTop(c)){var d=WPTB_Helper.findAncestor(c,"wptb-preview-table");d.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(d)}}}else t.style.display="none";t.actionsHide()},c.ondragend=function(e){WPTB_Helper.elementDragEndClear()};l.style.display="flex",t.wptbActions=l}WPTB_Helper.wptbDocumentEventGenerate("wptb:actionfield:generated",document)},this.setParameters=function(e){if(!t.wptbActions){var a=document.getElementsByClassName("wptb-actions");a.length>0?t.wptbActions=a[0]:t.wptbActions=!1}if(t.wptbActions&&t.wptbActions.classList.contains("wptb-actions")){t.wptbActions.style.display="flex";var n=e.getBoundingClientRect(),r=document.getElementsByClassName("wptb-container")[0];t.wptbActions.style.top=parseFloat(n.top)-15+"px",t.wptbActions.style.left=parseFloat(n.right)-parseFloat(t.wptbActions.clientWidth)+1+"px",t.wptbActions.style.display="flex",e.classList.add("wptb-directlyhovered"),r.onscroll=function(){var a=e.getBoundingClientRect();t.wptbActions.style.top=parseFloat(a.top)-15+"px"}}},this.leaveFromField=function(a,n,r){if(!t.wptbActions){var l=document.getElementsByClassName("wptb-actions");l.length>0?t.wptbActions=l[0]:t.wptbActions=!1}if(t.wptbActions){if(a.relatedTarget&&(a.relatedTarget.classList.contains("wptb-actions")||a.relatedTarget.classList.contains("wptb-move-action")||a.relatedTarget.classList.contains("wptb-duplicate-action")||a.relatedTarget.classList.contains("wptb-delete-action")||a.relatedTarget.classList.contains("wptb-prebuilt-mark-action")))return t.wptbActions||(t.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void(t.wptbActions.onmouseleave=function(a){null!=a.relatedTarget&&(a.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(a.relatedTarget,"wptb-ph-element"))&&a.relatedTarget!=t.wptbActions.activeElem&&(WPTB_Helper.findAncestor(a.relatedTarget,"wptb-directlyhovered"),t.wptbActions.activeElem),(new e).leaveFromField(a,a.relatedTarget.parentNode.parentNode),a.target.activeElem.classList.remove("wptb-directlyhovered")});n.classList.remove("wptb-directlyhovered"),t.wptbActions.style.display="none",a.relatedTarget&&(a.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(a.relatedTarget,"wptb-ph-element"))&&(t.addActionField(1,a.relatedTarget.parentNode),t.setParameters(a.relatedTarget.parentNode))}},this.actionsRemove=function(){if(!t.wptbActions){var e=document.getElementsByClassName("wptb-actions");e.length>0&&(t.wptbActions=e[0])}t.wptbActions&&t.wptbActions.parentNode.removeChild(t.wptbActions)},this.actionsHide=function(){if(!t.wptbActions){var e=document.getElementsByClassName("wptb-actions");e.length>0&&(t.wptbActions=e[0])}t.wptbActions&&(t.wptbActions.style.opacity=0)}};!function(){var e=window.location.href;new RegExp("[?&]page=wptb-builder").exec(e)&&document.addEventListener("DOMContentLoaded",(function(){var e=WPTB_Helper.detectMode();if(e){var t=new XMLHttpRequest,a=ajaxurl+"?action=get_table&id="+e;t.open("GET",a,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(a){if(4!=this.readyState||200!=this.status);else{var n=JSON.parse(t.responseText);if(document.getElementById("wptb-setup-name").value=n[0],n[1]){var r=document.getElementsByClassName("wptb-table-setup")[0];r.appendChild(WPTB_Parser(n[1]));document.getElementsByTagName("body")[0];WPTB_Table();var l=document.querySelector(".wptb-preview-table");if(l)l.className.match(/wptb-element-((.+-)\d+)/i)||l.classList.add("wptb-element-main-table_setting-"+e),l.dataset.wptbTableContainerMaxWidth&&(r.style.maxWidth=l.dataset.wptbTableContainerMaxWidth+"px",l.tdDefaultWidth());WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()}else document.getElementsByClassName("wptb-table-generator")[0].style.display="table"}},t.send(null)}else{(new WPTB_TableStateSaveManager).tableStateSet()}document.counter=new ElementCounters,document.select=new MultipleSelect;WPTB_Initializer();settings=WPTB_Settings()}))}();var WPTB_Cell=function(e,t){if(!t){(t=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px";var a=jQuery("#wptb-table-inner-border-number").val();""!=a&&0!=parseInt(a)&&(t.style.border=a+"px solid "+jQuery("#wptb-table-border-color").val()),t.classList.add("wptb-droppable","wptb-cell")}t.draggable=!1,e&&(t.onclick=e),t.ondblclick=function(e){e.stopPropagation();var a=document.querySelector(".wptb-table-setup");if(a&&!a.classList.contains("wptb-preview-table-manage-cells")&&("0"!==e.target.dataset.yIndex||"1"!==a.dataset.wptbSortableTable)&&e.target==e.currentTarget){WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",e.target);var n=WPTB_Helper.newElementProxy("text");n=n.getDOMElement(),t.appendChild(n),WPTB_innerElementSet(n)}},WPTB_innerElementSet(t),WPTB_Helper.elementStartScript(t,"table_cell_setting");var n=t.getElementsByClassName("wptb-ph-element");if(n.length>0)for(var r=function(e){n[e].getDOMElement=function(){return n[e]},WPTB_innerElementSet(n[e]);var t=n[e].className.match(/wptb-element-((.+-)\d+)/i);t&&Array.isArray(t)&&function(){var a=t[1].split("-");n[e].kind=a[0],applyGenericItemSettings(n[e],t[1]);var r=n[e].getElementsByClassName("wptb-in-element");if(r.length>0)for(var l=function(e){var t={getDOMElement:function(){return r[e]}};applyGenericItemSettings(t)},o=0;o<r.length;o++)l(o)}()},l=0;l<n.length;l++)r(l);return this.getDOMElement=function(){return t},this.setCoords=function(e,t){var a=this.getDOMElement();a.dataset.yIndex=e,a.dataset.xIndex=t},this.getCoords=function(){var e=this.getDOMElement();(void 0).x=e.dataset.xIndex,(void 0).y=e.dataset.yIndex},this.appendElement=function(e){getDOMElement().appendChild(e)},t.getCellDimensions=function(){var e=window.getComputedStyle(this,null),t=e.getPropertyValue("padding-left"),a=e.getPropertyValue("padding-right"),n=e.getPropertyValue("border-left-width"),r=e.getPropertyValue("border-right-width"),l=e.getPropertyValue("padding-top"),o=e.getPropertyValue("padding-bottom"),i=e.getPropertyValue("border-top-width"),s=e.getPropertyValue("border-bottom-width"),c=parseInt(this.offsetWidth,10)-parseInt(t,10)-parseInt(a,10),d=parseInt(this.offsetHeight,10)-parseInt(l,10)-parseInt(o,10),p=WPTB_Helper.findAncestor(this,"wptb-preview-table");if(p)if("collapse"===p.style.borderCollapse){c=c-parseInt(n,10)/2-parseInt(r,10)/2,d=d-parseInt(i,10)/2-parseInt(s,10)/2;var u=window.getComputedStyle(p,null),m=u.getPropertyValue("border-left-width"),b=u.getPropertyValue("border-right-width"),f=u.getPropertyValue("border-top-width"),v=u.getPropertyValue("border-bottom-width"),w=this.parentNode;if(w&&"tr"===w.nodeName.toLowerCase()){w.firstChild&&w.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(m,10)>parseInt(n,10)&&(c+=-(parseInt(m,10)-parseInt(n,10))/2),w.lastChild&&w.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(b,10)>parseInt(r,10)&&(c+=-(parseInt(b,10)-parseInt(r,10))/2);var g=w.parentNode;g&&"body"===g.nodeName.toLowerCase()&&(g.firstChild&&g.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(f,10)>parseInt(i,10)&&(d+=(parseInt(f,10)-parseInt(i,10))/2),g.lastChild&&g.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(v,10)>parseInt(s,10)&&(d+=(parseInt(v,10)-parseInt(s,10))/2))}}else"separate"===p.style.borderCollapse&&(c=c-parseInt(n,10)-parseInt(r,10),d=d-parseInt(i,10)-parseInt(s,10));return{width:parseInt(c),height:parseInt(d)}},this};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var a=0;a<e;a++)for(var n=t.rows[a].children,r=0;r<n.length;r++)if(n[r].rowSpan>1&&n[r].rowSpan>e-a){var l=n[r].rowSpan-e+a;n[r].rowSpan=e-a,n[r].dataset.sameCellBeforeDivision||(n[r].dataset.sameCellBeforeDivision="r"+a+"c"+r);var o=void 0;o=t.hasOwnProperty("wptbCell")?(o=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td");var i=n[r].getAttribute("style");o.setAttribute("style",i),o.colSpan=n[r].colSpan,o.rowSpan=l,o.dataset.sameCellBeforeDivision=n[r].dataset.sameCellBeforeDivision;for(var s=n[r].dataset.xIndex,c=parseInt(s)+parseInt(n[r].colSpan),d=void 0;!d&&c<t.maxCols;)d=t.rows[e].querySelector('[data-x-index="'+c+'"]'),c++;t.rows[e].insertBefore(o,d),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var n=t[a].dataset.sameCellBeforeDivision,r=e.querySelectorAll('[data-same-cell-before-division="'+n+'"]'),l=0;l<r.length;l++)if(r[l]&&r[l+1]&&r[l].parentNode&&r[l+1].parentNode&&!r[l].parentNode.classList.contains("wptb-row-moving")&&!r[l+1].parentNode.classList.contains("wptb-row-moving")&&r[l+1].dataset.yIndex==parseInt(r[l].dataset.yIndex)+parseInt(r[l].rowSpan)){r[l].rowSpan+=r[l+1].rowSpan;for(var o=_toConsumableArray(r[l+1].children),i=0;i<o.length;i++)r[l].appendChild(o[i]);r[l+1].parentNode.removeChild(r[l+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var a=0;a<t.rows.length;a++){if(e<t.maxCols&&0!=e&&!t.rows[a].querySelector('[data-x-index="'+e+'"]'))for(var n=t.rows[a].children,r=void 0,l=n.length,o=void 0,i=void 0,s=void 0,c=void 0,d=0;d<l;d++)if(n[d].colSpan>1&&parseInt(n[d].dataset.xIndex)<e&&parseInt(n[d].dataset.xIndex)+parseInt(n[d].colSpan)>e){r=t.hasOwnProperty("wptbCell")?(r=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),i=n[d].rowSpan,s=n[d].colSpan,n[d].colSpan=e-n[d].dataset.xIndex,c=s-n[d].colSpan,n[d].dataset.sameCellBeforeDivision||(n[d].dataset.sameCellBeforeDivision="r"+a+"c"+d);var p=n[d].getAttribute("style");r.setAttribute("style",p);var u=t.querySelector('[data-x-index="'+e+'"]');u&&(r.style.width=u.style.width);var m=t.querySelector('[data-y-index="'+a+'"]');m&&(r.style.height=m.style.height),o=n[d+1]?n[d+1]:null,t.rows[a].insertBefore(r,o),r.colSpan=c,r.rowSpan=i,r.dataset.sameCellBeforeDivision=n[d].dataset.sameCellBeforeDivision,a+=i-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var n=t[a].dataset.sameCellBeforeDivision,r=_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+n+'"]')),l=null,o=0;o<r.length;o++)if(r[o]&&r[o+1]&&!r[o].classList.contains("wptb-column-moving")&&!r[o+1].classList.contains("wptb-column-moving")&&r[o+1].dataset.xIndex==parseInt(r[o].dataset.xIndex)+parseInt(r[o].colSpan)){null==l&&(l=o),r[l].colSpan+=r[o+1].colSpan;for(var i=_toConsumableArray(r[o+1].children),s=0;s<i.length;s++)r[l].appendChild(i[s]);r[o+1].parentNode.removeChild(r[o+1])}WPTB_RecalculateIndexes(e)}}};function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var DataTableManagerStatic=function(){var e=null;function t(e,t,a,n){var r=this;this.sectionName=e,this.wrapperId=t,this.parentContainerQuery=a,this.loaded=!1,this.dataTableElement=null,this.elementsMessageComtainer=null;var l=document.querySelector('div[data-wptb-section-button="data_table_menu"]');this.addMountPointToDom=function(){var e=document.querySelector(a),n=document.querySelector("#".concat(t));if(!n){var l=document.createRange();l.setStart(e,0);var o='<div class="wptb-datatable" id="'.concat(t,'">data table</div>');n=_slicedToArray(l.createContextualFragment(o).children,1)[0]}r.dataTableElement=n,e.appendChild(r.dataTableElement)},this.cleanUp=function(){r.elementsMessageComtainer&&r.elementsMessageComtainer.remove()},this.addMessageWrapperToElementsSection=function(){var e=document.querySelector(".wptb-builder-panel");if(e){var t=document.createRange();t.setStart(document,0);var a=_slicedToArray(t.createContextualFragment('<div id="wptbDataTableElementsTarget" ></div>').childNodes,1);r.elementsMessageContainer=a[0],e.appendChild(r.elementsMessageContainer)}};var o=function(){return document.querySelector(".wptb-management_table_container .wptb-table-setup .wptb-preview-table")};this.load=function(){if(!r.loaded){r.addMountPointToDom(),l.style.display="unset",r.addMessageWrapperToElementsSection();var e=document.querySelector(".wptb-builder-header").getBoundingClientRect().height;WPTB_ControlsManager.setControlData("dataTableData",_objectSpread({headerHeight:e},n,{dataTableOptions:(t=o(),a=null,t&&(a=t.dataset.wptbDataTableOptions)&&(a=JSON.parse(atob(a))),a)})),WPTB_ControlsManager.callControlScript("DataTable",r.wrapperId),r.loaded=!0}var t,a};this.init=function(){document.addEventListener("wptb:table:generated",(function(){var e;(e=o())&&e.dataset.wptbDataTable&&r.load()}))},this.forceLoad=function(){r.load()},this.markTableAsDataTable=function(){document.addEventListener("wptb:table:generated",(function(){var e=document.querySelector(".wptb-management_table_container .wptb-table-setup .wptb-preview-table");e&&(e.dataset.wptbDataTable=!0)})),document.addEventListener("wptb:save:before",(function(e){e.detail.wptbDataTable=!0}))},this.init()}return{getInstance:function(a,n,r,l){return e||(e=new t(a,n,r,l)),e}}}(),WPTB_DropHandle=function(e,t){var a,n,r,l,o,i,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function c(e){return"".concat(e,"px")}if("td_relative"===WPTB_Helper.getDragRelativeType()){var d=document.querySelector(".wptb-cell-related-drop-handle");if(s&&d)return void(d.style.display="none");if(null===d){var p=document.createRange();p.setStart(document.body,0);var u=p.createContextualFragment('<div class="wptb-cell-related-drop-handle">Add to cell</div>').children[0];document.body.appendChild(u),d=u.children[0]}var m=WPTB_Helper.getParentOfType("td",e),b=m.getBoundingClientRect(),f=b.top,v=b.left,w=b.width,g=b.height;if(!d)return;return d.style.display="flex",d.style.top=c(f),d.style.width=c(w),d.style.height=c(g),void(d.style.left=c(v))}if(0==document.getElementsByClassName("wptb-drop-handle").length){(a=document.createElement("div")).classList.add("wptb-drop-handle"),(n=document.createElement("div")).classList.add("wptb-drop-border-marker"),r=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),r.classList.add("wptb-drop-border-marker-top"),l.classList.add("wptb-drop-border-marker-right"),o.classList.add("wptb-drop-border-marker-bottom"),i.classList.add("wptb-drop-border-marker-left"),n.appendChild(r),n.appendChild(l),n.appendChild(o),n.appendChild(i);var y=document.getElementsByTagName("body");y.length>0&&(y[0].appendChild(a),y[0].appendChild(n)),a.ondragenter=function(){if(t.target.classList.contains("wptb-empty"))return t.preventDefault(),!1},a.ondragover=function(e){e.preventDefault()},a.ondragleave=function(){},a.ondrop=function(t){var r,l;if(t.preventDefault(),t.dataTransfer.getData("wptbElement")?r=(r=WPTB_Helper.newElementProxy(t.dataTransfer.getData("wptbElement"))).getDOMElement():((r=document.getElementsByClassName(t.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),r.classList.remove("wptb-moving-into-same-elem"),r.wptbMovingMode=1),"Drop Here"==a.dataset.text)"td"==(e=a.getDOMParentElement()).nodeName.toLowerCase()&&((l=a.getDOMParentElement()).appendChild(r),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",r));else{var o=a.getDOMParentElement();if(l=o.parentNode,"Above Element"==a.dataset.text)l.insertBefore(r,o),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",r);else if("Below Element"==a.dataset.text){var i=o.nextSibling;l.insertBefore(r,i),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",r)}}var s=l.parentNode;if(WPTB_Helper.rowIsTop(s)){var c=WPTB_Helper.findAncestor(s,"wptb-preview-table");c.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(c)}(a.style.display="none",n.style.display="none",WPTB_innerElementSet(r),r.classList.contains("wptb-image-container")&&1!=r.wptbMovingMode)||((new WPTB_TableStateSaveManager).tableStateSet(),r.wptbMovingMode)};var h=document.querySelector(".wptb-container");h.onscroll=function(){a.style.display="none",n.style.display="none"}}else a=document.getElementsByClassName("wptb-drop-handle")[0],n=document.getElementsByClassName("wptb-drop-border-marker")[0];if(!(e&&"td"==e.nodeName.toLowerCase()&&0!=e.getElementsByClassName("wptb-ph-element").length||e&&"td"==e.nodeName.toLowerCase()&&e.classList.contains("wptb-empty"))){var S;if("td"==e.localName?S=e.parentNode:"div"==e.localName&&e.classList.contains("wptb-ph-element")&&(S=e.parentNode.parentNode),WPTB_Helper.rowIsTop(S)){var T=WPTB_Helper.findAncestor(S,"wptb-preview-table");if(T.classList.contains("wptb-table-preview-head")){for(var _=t.dataTransfer.types,C=!1,A=0;A<_.length;A++){var B=_[A].match(/wptbelindic-([a-z]+)/i);if(B&&"text"!=B[1]){C=!0;break}}if(C)return}}a.style.width=e.offsetWidth+"px";var E,P=e.offsetHeight,x=e.getBoundingClientRect(),W=parseFloat(x.left);if(a.style.left=W+"px",-1!=t.dataTransfer.types.indexOf("wptb-moving-mode")){var I=document.getElementsByClassName("wptb-moving-mode")[0];e==I?(a.classList.add("wptb-moving-into-same-elem"),n.classList.add("wptb-moving-into-same-elem")):(a.classList.remove("wptb-moving-into-same-elem"),n.classList.remove("wptb-moving-into-same-elem"))}if(a.getDOMParentElement=function(){return e},a.style.display="block",n.style.display="block","td"!=e.nodeName.toLowerCase()){var L=null==t.offsetY?t.layerY:t.offsetY;E=parseFloat(x.top)-parseFloat(11),a.dataset.text="Above Element",L>P/2&&(E=parseFloat(x.top)+P-1,a.dataset.text="Below Element")}else a.dataset.text="Drop Here",E=parseFloat(x.top)+P/2-5;a.style.top=E+"px",n.style.top=x.top+"px",n.style.left=x.left+"px",(r=n.querySelector(".wptb-drop-border-marker-top")).style.width=parseFloat(e.offsetWidth)-parseFloat(1)+"px",(l=n.querySelector(".wptb-drop-border-marker-right")).style.height=parseFloat(x.bottom)-parseFloat(x.top)-1+"px",l.style.left=r.style.width,(o=n.querySelector(".wptb-drop-border-marker-bottom")).style.width=r.style.width,o.style.top=l.style.height,(i=n.querySelector(".wptb-drop-border-marker-left")).style.height=l.style.height}},ElementCounters=function(){var e=[];return e.text=0,e.image=0,e.list=0,e.button=0,this.increment=function(t){t in e&&e[t]++},this.nextIndex=function(t){if(t in e)return e[t]+1},this},WPTB_ElementObject=function(e){var t,a,n;if(e.elemProt){(t=e.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered");var r=e.elemProt.className.match(/wptb-element-((.+-)\d+)/i);r&&Array.isArray(r)&&(a=r[1]),n=!0,e.tinyMceClear&&(t=WPTB_Helper.elementClearFromTinyMce(t))}else{a=void 0,n=!1,(t=document.createElement("div")).classList.add("wptb-"+e.kind+"-container","wptb-ph-element");var l="wptb-"+e.kind+"-content",o=wp.template(l);e.node=t;var i=o(e);i=i.replace(/\r|\n|\t/g,"").trim(),t.innerHTML=i}var s=t.querySelectorAll(".wptb-in-element");if(s.length>0)for(var c=function(e){var t={getDOMElement:function(){return s[e]}};applyGenericItemSettings(t)},d=0;d<s.length;d++)c(d);return window.addEventListener("item:onmouseenter",(function(e){}),!1),this.kind=e.kind,this.getDOMElement=function(){return t},applyGenericItemSettings(this,a,n),this},WPTB_ElementOptions=function(e,t,a){e.getDOMElement().addEventListener("click",(function(){WPTB_Helper.elementOptionsSet(e.kind,this)}),{capture:!0})},WPTB_HeaderToolbox=function(e){var t=this;this.wrapperQuery=e,this.element=document.querySelector(e),this.topMargin=2;return{init:function(){var e;(e=t.element.querySelector('[data-button-type="table_settings_menu"]'))&&e.addEventListener("click",(function(){WPTB_Helper.activateSection("manage_cells")})),document.addEventListener("wptb:table:generated",(function(){t.element.style.display="unset";var e=t.element.getBoundingClientRect().width;t.element.style.left="calc( 50% - ".concat(e/2,"px)"),document.addEventListener("wptbSectionChanged",(function(e){var a=e.detail;!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t.element.getBoundingClientRect(),n=a.height;e&&(n=0),t.element.style.top="calc( 100% - ".concat(n+t.topMargin,"px)")}("manage_cells"!==a&&"table_responsive_menu"!==a&&"cell_settings"!==a&&"data_table_menu"!==a)}))}))}}};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_Helper={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb(".concat(parseInt(t[1],16),",").concat(parseInt(t[2],16),",").concat(parseInt(t[3],16),")"):null},rgbToHex:function(e){if(e){if(WPTB_Helper.isHex(e))return e;var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?((?:[0-9]*[.])?[0-9]+)[\s+]?\)/i);return t&&5===t.length?"#".concat("0".concat(Math.round(255*parseFloat(t[4],10)).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)):(t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)):""}return""},isHex:function(e){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}$").test(e)},getElementIcon:function(e){"".concat(location.protocol,"//").concat(location.hostname);var t=document.createElement("img");return t.src=e,t},elementDragEndClear:function(){var e=document.getElementsByClassName("wptb-moving-mode");if(e.length>0)for(var t=0;t<e.length;t++)e[t].classList.remove("wptb-moving-mode");var a=document.getElementsByClassName("wptb-drop-handle");if(a.length>0)for(var n=0;n<a.length;n++)a[n].style.display="none";var r=document.getElementsByClassName("wptb-drop-border-marker");if(r.length>0)for(var l=0;l<r.length;l++)r[l].style.display="none"},linkHttpCheckChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){if(e.match(/^(javascript:)(.+)$/))return e;if(e.match(/^\/([\S]+)$/)){if(t){var a=document.location,n=a.origin;return n.match(/^(.+)\/$/)&&(n=n.slice(-1)),"".concat(n).concat(e)}return e}if(-1==e.indexOf("http://")&&-1==e.indexOf("https://")){var r,l=e.split("/");return Array.isArray(l)&&l.length>0&&(r=l[l.length-1]),"".concat(document.location.protocol,"//").concat(r)}return e}return""},dataTitleColumnSet:function(e){},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},rowIsTop:function(e){return e.parentNode.children[0]==e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){if("external"==e.originalEvent.type)(new WPTB_TableStateSaveManager).tableStateSet();else if(WPTB_Helper.findAncestor(e.target,"wp-picker-container")&&("square"==e.originalEvent.type||"strip"==e.originalEvent.type)){var t=document.getElementsByTagName("body")[0];t.removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),t.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)}},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(e,t){var a;t?(a=[document.getElementById(e)]).length=1:a=document.getElementsByClassName(e);for(var n=0;n<a.length;n++){var r=WPTB_Helper.findAncestor(a[n],"wp-picker-container");if(r){var l=r.parentNode;l.removeChild(r);var o=document.createElement("input");t?o.setAttribute("id",e):o.classList.add("wptb-element-property",e),o.value="",l.appendChild(o)}}},detectMode:function(){var e=window.location.href,t=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!t&&(t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"")},getTableId:function(){var e=WPTB_Helper.detectMode();return e||(e="startedid-0"),e},getColumnWidth:function(e,t){for(var a=t.dataset.xIndex,n=e.querySelectorAll('[data-x-index="'.concat(a,'"]')),r=t.getCellDimensions().width,l=0;l<n.length;l++)r>n[l].getCellDimensions().width&&(r=n[l].getCellDimensions().width);return r},getRowHeight:function(e,t){for(var a=t.dataset.yIndex,n=e.querySelectorAll('[data-y-index="'.concat(a,'"]')),r=t.getCellDimensions().height,l=0;l<n.length;l++)r>n[l].getCellDimensions().height&&(r=n[l].getCellDimensions().height);return r},newElementProxy:function(e){if(e)return new WPTB_ElementObject({kind:e})},wpColorPickerChange:function(e,t){var a;a=t?t.color.toString():"";var n,r,l,o=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0];r=(n=o.dataset.element.match(/wptb-options-(.+)-(\d+)/i))[1],l=n[2];var i=document.getElementsByClassName("wptb-element-".concat(r,"-").concat(l))[0];if("button"==r)"button-text-color"==o.dataset.type?i.getElementsByClassName("wptb-button")[0].style.color=a:i.getElementsByClassName("wptb-button")[0].style.backgroundColor=a;else if("list"==r){var s=i.querySelectorAll("p");if(s.length>0)for(var c=0;c<s.length;c++)s[c].style.color=a}else if("star_rating"==r){if("star-color"==o.dataset.type)for(var d=i.querySelectorAll("li"),p=0;p<d.length;p++)for(var u=d[p].getElementsByTagName("span"),m=0;m<u.length;m++)u[m].style.fill=a;else if("numeral-rating-color"==o.dataset.type){i.querySelector(".wptb-number-rating").style.color=a}}else i.style.color=a},numberImputSize:function(e,t,a){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;parseInt(e,10)>parseInt(a,10)&&(this.value=a),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wptbDocumentEventGenerate:function(e,t,a){if(e&&t){a||(a=!0);var n=new CustomEvent(e,{detail:a,bubbles:!0});t.dispatchEvent(n)}},elementStartScript:function(e,t){if(!t){var a=e.className.match(/wptb-element-(.+)-(\d+)/i);a&&Array.isArray(a)&&(t=a[1])}t&&t in WPTB_ElementsScriptsLauncher&&WPTB_ElementsScriptsLauncher[t](e)},deleteEventHandlers:function(e){if(e){jQuery(e).off();var t=e.children;if(t)for(var a=0;a<t.length;a++)WPTB_Helper.deleteEventHandlers(t[a])}},replaceAll:function(e,t,a){return e.split(t).join(a)},elementClearFromTinyMce:function(e){var t=e.querySelectorAll(".mce-content-body");if(t.length>0)for(var a=0;a<t.length;a++)t[a].classList.remove("mce-content-body");var n=e.querySelectorAll("[data-mce-style]");if(n.length>0)for(var r=0;r<n.length;r++)n[r].removeAttribute("data-mce-style");var l=e.querySelectorAll(".mce-edit-focus");if(l.length>0)for(var o=0;o<l.length;o++)l[o].classList.remove("mce-edit-focus");var i=e.querySelectorAll("[contenteditable]");if(i.length>0)for(var s=0;s<i.length;s++)i[s].removeAttribute("contenteditable");var c=e.querySelectorAll("[spellcheck]");if(c.length>0)for(var d=0;d<c.length;d++)c[d].removeAttribute("spellcheck");var p=e.querySelectorAll("[id^=mce_]");if(p.length>0)for(var u=0;u<p.length;u++)p[u].removeAttribute("id");return e},elementOptionContainerCustomClassSet:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option");a&&a.classList.add(t)}},elementOptionContainerAdditionalStyles:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option"),n=t.split(";");if(a&&n){var r=function(e,t){e&&(containerStyleStrArr=e.split(":"),containerStyleStrArr&&Array.isArray(containerStyleStrArr)&&(t.style[containerStyleStrArr[0]]=containerStyleStrArr[1]))};if(n&&Array.isArray(n))for(var l=0;l<n.length;l++)n[l]&&r(n[l],a);else r(n,a)}}},controlsInclude:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&"object"===_typeof(e)&&"function"==typeof t&&e.addEventListener("element:controls:active",(function(){e.hasOwnProperty("controlConnectFunctionsName")&&Array.isArray(e.controlConnectFunctionsName)&&-1!=e.controlConnectFunctionsName.indexOf(t.name)||function(){var n,r=e.className.match(/wptb-element-(.+)-(\d+)/i);if(r&&Array.isArray(r)&&(n=r[1]),n){var l=e.optionsGroupIds;if(l&&Array.isArray(l))for(var o=0;o<l.length;o++){var i=l[o],s=document.getElementById(i).querySelectorAll(".wptb-element-property");(s=_toConsumableArray(s)).map((function(r){var l=new RegExp("wptb-el-".concat(n,"-(\\d+)-([a-zA-Z0-9_-]+)"),"i"),o=r.className.match(l);if(o&&Array.isArray(o)){var i=o[0];e.addEventListener("wptb-control:".concat(i),(function(n){var r={},l=o[2],s=document.getElementsByClassName(i);if(s.length>0&&l){var c=WPTB_Helper.targetControlValueGet(s);r[l]=a?{targetValue:c,eventValue:n.detail.value}:c}t(r,e)}),!1)}}))}e.controlConnectFunctionsName||Array.isArray(e.controlConnectFunctionsName)||(e.controlConnectFunctionsName=[]),e.controlConnectFunctionsName.push(t.name)}}()}),!1)},oneControlInclude:function(e,t,a){if(!e||"object"!==_typeof(e)||"function"!=typeof t||"string"!=typeof a)return!1;var n,r=e.className.match(/wptb-element-((.+-)\d+)/i);if(r&&Array.isArray(r)){n=r[1].split("-")[0];var l="wptb-".concat(n,"-control-stack"),o=wp.template(l)({container:".".concat(r[0])}),i=JSON.parse(o);if(i&&"object"===_typeof(i)&&i.hasOwnProperty(a)){var s="wptb-el-".concat(r[1],"-").concat(a);e.addEventListener("wptb-control:".concat(s),(function(a){var n=document.getElementsByClassName(s);if(n.length>0){var r=WPTB_Helper.targetControlValueGet(n);t(r,e)}}),!1)}}},innerElementCopyIncludeHandler:function(e,t){e&&"object"===_typeof(e)&&"function"==typeof t&&e.addEventListener("wptb-inner-element:copy",(function(a){var n=a.detail;n&&(WPTB_Helper.elementClearFromTinyMce(n),t(n,e))}),!1)},valueDependOnControl:function(e,t,a,n,r){function l(e,t,a){"string"==typeof e&&(e=[e]);var n=t.match(/wptb-el-((.+-)\d+)-(.+)/i),r={},l=[];if(n&&Array.isArray(n)){var o,i=n[3],s={};Array.isArray(a)&&(Array.isArray(a[0])?a.map((function(e){s[e[0]]=[e[1],e[2]]})):s[a[0]]=[a[1],a[2]]),e.map((function(e){var a=t.replace(i,e);a&&(o=document.getElementsByClassName(a)).length>0&&o[0].type&&(r[e]=o[0].value,e in s&&("integer"===s[e][1]?r[e]=parseInt(r[e])+parseInt(s[e][0]):"string"===s[e][1]&&(r[e]=r[e]+s[e][0])),l.push(o[0]))}))}return[r,l]}var o=l(e,t,a);WPTB_Helper.elementOptionsSet(n,r,o[0],t),Object.keys(o[0]).forEach((function(o){var i=r.className.match(/wptb-element-((.+-)\d+)/i),s="wptb-el-".concat(i[1],"-").concat([o]);r.addEventListener("wptb-control:".concat(s),(function(o){var i=l(e,t,a);WPTB_Helper.elementOptionsSet(n,r,i[0],t)}),!1)}))},appearDependOnControl:function(e,t){if(Array.isArray(e)){var a=function(e,t){var a,n="block";Object.keys(t).map((function(e){Object.prototype.hasOwnProperty.call(t,e)&&!1===t[e][0]&&(n="none",t[e][2][3]&&(a=t[e][2][3]))})),e.style.display!==n&&(e.style.display=n,"none"===n&&a?(u[0].dataset.controlActiveVal=WPTB_Helper.targetControlValueGet(u),WPTB_Helper.targetControlValueGet(u,a)):"block"===n&&u[0].dataset.controlActiveVal&&WPTB_Helper.targetControlValueGet(u,u[0].dataset.controlActiveVal))},n=function(e,t){for(var a=WPTB_Helper.targetControlValueGet(e),n=!1,r=1;r<=2;r++)if(t[r]&&Array.isArray(t[r])){for(var l=void 0,o=!1,i=0;i<t[r].length;i++)if("string"==typeof t[r][i]&&-1!==t[r][i].indexOf("numberAny >")){if(o=!0,!(a>parseInt(t[r][i].match(/\d+/)))){l=!1;break}l=!0}else if("string"==typeof t[r][i]&&-1!==t[r][i].indexOf("numberAny <")){if(o=!0,!(a<parseInt(t[r][i].match(/\d+/)))){l=!1;break}l=!0}else if(t[r][i]===a&&(l=!0,!o))break;if(l&&1===r){n=!0;break}if(l&&2===r){n=!1;break}}return n};if("string"==typeof e[0])e=[e];else if(!Array.isArray(e[0]))return;for(var r={},l=0;l<e.length;l++){var o=e[l],i=o[0],s=t.match(/wptb-el-((.+-)\d+)-(.+)/i);if(s&&Array.isArray(s)){var c=s[3],d=t.replace(c,i);if(d){var p=document.getElementsByClassName(d);p.length>0&&(r[o[0]]=[n(p,o),p,o])}}}var u=document.getElementsByClassName(t);if(u.length>0){var m=u[0],b=WPTB_Helper.findAncestor(m,"wptb-element-option");b&&(a(b,r),Object.keys(r).map((function(e){Object.prototype.hasOwnProperty.call(r,e)&&r[e][1][0].addEventListener("change",(function(t){var l=r[e][2],o=r[e][1];r[l[0]]=[n(o,l),o,l],a(b,r)}),!1)})))}}},toggleSwitch:function(e,t){if(Array.isArray(e)&&e[1]&&"object"===_typeof(e[1])){var a=function(e,t){if(e){var a=document.getElementsByClassName(e);if(a.length>0)WPTB_Helper.targetControlValueGet(a)===t&&n()}},n=function(){var a=document.getElementsByClassName(t);a.length&&WPTB_Helper.targetControlValueGet(a)!==e[0]&&("unchecked"===e[0]?a[0].checked=!1:"checked"===e[0]&&(a[0].checked=!0),WPTB_Helper.wptbDocumentEventGenerate("change",a[0],{eventType:"toggleSwitch"}))},r=e[1];Object.keys(r).map((function(e){var n=r[e],l=t.match(/wptb-el-((.+-)\d+)-(.+)/i);if(l&&Array.isArray(l)){var o=l[3],i=t.replace(o,e);if(i){var s=document.getElementsByClassName(i);if(s.length>0)s[0].addEventListener("change",a.bind(null,i,n),!1)}}}))}},controlsStateManager:function(e,t){var a=document.getElementsByClassName(e);if(a.length>0){var n=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(n&&Array.isArray(n))if(document.querySelector(".wptb-element-".concat(n[1]))){var r,l,o={};if(0==(r=document.getElementsByClassName("wptb-element-datas")).length||""==r[0].innerHTML){var i=WPTB_Helper.targetControlValueGet(a);o["data-".concat(e)]=i,(l={})["tmpl-wptb-el-datas-".concat(n[1])]=o,l=JSON.stringify(l),0==r.length?((r=document.createElement("script")).setAttribute("type","text/html"),r.setAttribute("class","wptb-element-datas")):r=r[0],r.innerHTML=l,document.getElementsByTagName("body")[0].appendChild(r)}else if((l=(r=r[0]).innerHTML)&&(l=l.trim(),(l=JSON.parse(l))&&"object"===_typeof(l)))if(t){var s=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-".concat(n[1])in l&&"object"===_typeof(l["tmpl-wptb-el-datas-".concat(n[1])])||(l["tmpl-wptb-el-datas-".concat(n[1])]={}),l["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)]=s,r.innerHTML=JSON.stringify(l)}else if("tmpl-wptb-el-datas-".concat(n[1])in l&&"object"===_typeof(l["tmpl-wptb-el-datas-".concat(n[1])])&&"data-".concat(e)in l["tmpl-wptb-el-datas-".concat(n[1])]){if("tmpl-wptb-el-datas-".concat(n[1])in l&&"object"===_typeof(l["tmpl-wptb-el-datas-".concat(n[1])])&&"data-".concat(e)in l["tmpl-wptb-el-datas-".concat(n[1])])for(var c=0;c<a.length;c++)if("checkbox"==a[c].type){var d=void 0;"checked"==(d=a[c].name?l["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)][a[c].name]:l["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)])?a[c].checked=!0:"unchecked"==d&&(a[c].checked=!1)}else a[c].value=l["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)]}else{var p=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-".concat(n[1])in l&&"object"===_typeof(l["tmpl-wptb-el-datas-".concat(n[1])])||(l["tmpl-wptb-el-datas-".concat(n[1])]={}),l["tmpl-wptb-el-datas-".concat(n[1])]["data-".concat(e)]=p,r.innerHTML=JSON.stringify(l)}}}},targetControlValueGet:function(e,t){for(var a,n=0;n<e.length;n++)"checkbox"==e[n].type&&e[n].name?t?"checked"===t?e[n].checked=!0:"unchecked"===t&&(e[n].checked=!1):(a||(a={}),1==e[n].checked?a[e[n].name]="checked":a[e[n].name]="unchecked"):"checkbox"==e[n].type?t?"checked"===t?e[n].checked=!0:"unchecked"===t&&(e[n].checked=!1):a=1==e[n].checked?"checked":"unchecked":e[n].type?t?e[n].value=t:a=e[n].value:e[n].dataset.alignmentValue&&e[n].classList.contains("selected")&&(t?e[n].dataset.alignmentValue=t:a=e[n].dataset.alignmentValue);return a},elementControlsStateCopy:function(e,t){if(e&&t){var a=e.className.match(/wptb-element-((.+-)\d+)/i),n=t.className.match(/wptb-element-((.+-)\d+)/i);if(a&&Array.isArray(a)&&n&&Array.isArray(n)){var r=a[1],l=n[1],o=document.getElementsByClassName("wptb-element-datas");if(o.length>0){var i=(o=o[0]).innerHTML;if(i&&(i=i.trim(),(i=JSON.parse(i))&&"object"===_typeof(i))){var s=i["tmpl-wptb-el-datas-".concat(r)];if(s&&"object"===_typeof(s)){var c={};Object.keys(s).forEach((function(e){var t=s[e],a=e.replace(r,l);c[a]=t})),Object.keys(c).length>0&&(i["tmpl-wptb-el-datas-".concat(l)]=c,i=JSON.stringify(i),o.innerHTML=i)}}}}}},elementControlsStateDelete:function(e,t){var a=e.className.match(/wptb-element-(.+)-(\d+)/i),n=document.getElementsByTagName("body")[0],r=n.getElementsByClassName("wptb-element-datas");if(a&&Array.isArray(a)&&r.length>0){var l=(r=r[0]).innerHTML;l&&(l=l.trim(),(l=JSON.parse(l))&&"object"===_typeof(l)&&"tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])in l&&(t?l["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])]&&"object"===_typeof(l["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])])&&"data-wptb-el-".concat(a[1],"-").concat(a[2],"-").concat(t)in l["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])]&&delete l["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])]["data-wptb-el-".concat(a[1],"-").concat(a[2],"-").concat(t)]:delete l["tmpl-wptb-el-datas-".concat(a[1],"-").concat(a[2])],0==Object.keys(l).length?n.removeChild(r):(l=JSON.stringify(l),r.innerHTML=l)))}},elementOptionsSet:function(e,t,a,n){var r,l,o,i,s,c,d,p="wptb-".concat(e,"-control-stack"),u=wp.template(p),m=t.className.match(/wptb-element-((.+-)\d+)/i);if(m)WPTB_Helper.editActionClassRemove(),t.classList.add("edit-active");else{var b=WPTB_Helper.detectMode();if(b||(b="startedid-0"),t.classList.contains("wptb-preview-table"))t.classList.add("wptb-element-main-table_setting-".concat(b));else if(t.classList.contains("wptb-cell")){document.querySelector(".wptb-element-table_cell_setting-".concat(t.dataset.xIndex,"-").concat(t.dataset.yIndex))||t.classList.add("wptb-element-table_cell_setting-".concat(t.dataset.xIndex,"-").concat(t.dataset.yIndex))}else t.classList.contains("wptb-responsive")?(b.startsWith("wptb_team")&&(b="startedid-0"),t.classList.add("wptb-element-table_responsive_setting-".concat(b))):t.classList.contains("wptb-datatable")&&t.classList.add("wptb-element-table_datatable_setting-".concat(b));m=t.className.match(/wptb-element-((.+-)\d+)/i)}if((r={container:".".concat(m[0])}).valueDependOnControl={},a&&Object.keys(a).forEach((function(e){r.valueDependOnControl[e]=a[e]})),n){var f=n.match(/wptb-el-((.+-)\d+)-(.+)/i);f&&Array.isArray(f)&&(d=f[3])}if(l=m[0],o=m[1],t.classList.contains("wptb-preview-table"));else if(t.classList.contains("wptb-cell"))this.activateSection("cell_settings");else if(t.classList.contains("wptb-responsive"))elementOptionsGroupId="table-responsive-group",wptbelementOptionClass="wptb-element-option";else if(t.classList.contains("wptb-datatable"))elementOptionsGroupId="table-datatable-group",wptbelementOptionClass="wptb-element-option";else{for(var v=document.getElementById("element-options-group").childNodes,w=0;w<v.length;w++)v[w].style&&"beforeElementOptions"!==v[w].getAttribute("id")&&(v[w].style.display="none");this.activateSection("options_group")}var g=u(r),y=JSON.parse(g),h=[],S={},T={},_={},C=[],A=[],B=[];if(d){var E={};E[d]=y[d],y=E}Object.keys(y).forEach((function(t){var r=y[t];r.controlKey=t;var c=wp.template("wptb-".concat(r.type,"-control"));r.elemContainer=l,r.elementControlTargetUnicClass="wptb-el-".concat(o,"-").concat(r.controlKey),Object.keys(r).map((function(e){Object.prototype.hasOwnProperty.call(r,e)&&"control_param_calculate_value"===r[e]&&(r[e]=WPTB_Helper.controlParamCalculateValue(r.elementControlTargetUnicClass,e))}));var p=c(r);if("appearDependOnControl"in r&&Array.isArray(r.appearDependOnControl)&&C.push([r.appearDependOnControl,r.elementControlTargetUnicClass]),"toggleSwitch"in r&&Array.isArray(r.toggleSwitch)&&A.push([r.toggleSwitch,r.elementControlTargetUnicClass]),"valueDependOnControl"in r&&!a&&!n){var u="";r.valueDependOnControlCorrect&&(u=r.valueDependOnControlCorrect),B.push([r.valueDependOnControl,r.elementControlTargetUnicClass,u])}if(-1==h.indexOf(r.elementOptionsGroupId)&&!d){h.push(r.elementOptionsGroupId),i=document.getElementById(r.elementOptionsGroupId);for(var b=_toConsumableArray(i.children),f=0;f<b.length;f++)"beforeElementOptions"!==b[f].getAttribute("id")&&i.removeChild(b[f]);S[r.elementOptionsGroupId]=i}if(s=S[r.elementOptionsGroupId],"true"!==r.elementOptionsContainerOn||d||(s=function(e,t){if(!t[e]){var a=document.createElement("div");a.classList.add("wptb-element-options","wptb-options-".concat(m[1])),document.getElementById(e).appendChild(a),t[e]=a}return t[e]}(r.elementOptionsGroupId,T)),"true"===r.elementOptionContainerOn){var v=document.createElement("div");if(v.classList.add(r.elementOptionClass,"wptb-settings-items"),r.customClassForContainer&&v.classList.add(r.customClassForContainer),r.containerAdditionalStyles&&v.setAttribute("style",r.containerAdditionalStyles),n){var w=document.getElementsByClassName(n);if(w.length>0){w=w[0];var g=WPTB_Helper.findAncestor(w,"wptb-element-option");if(g){var E=g.parentNode;E.insertBefore(v,g),E.removeChild(g)}}}else s.appendChild(v);s=v}s.innerHTML+=p;var P=s.getElementsByTagName("wptb-template-script");if(P.length>0){var x=(P=P[0]).innerText;s.removeChild(P);var W=document.createElement("script");W.setAttribute("type","text/javascript"),W.setAttribute("id","".concat(e,"-").concat(r.controlKey)),W.innerHTML=x.replace(/\r|\n|\t/g,"").trim(),_[r.elementOptionsGroupId]&&Array.isArray(_[r.elementOptionsGroupId])||(_[r.elementOptionsGroupId]=[]),_[r.elementOptionsGroupId].push(W)}0})),t.optionsGroupIds=h,Object.keys(_).forEach((function(t){n||((c=document.createElement("div")).classList.add("wptb-element-options-scripts","wptb-options-".concat(m[1])),S[t].appendChild(c));var a=_[t];if(a.length>0)for(var r=0;r<a.length;r++)if(n){var l="".concat(e,"-").concat(d),o=document.getElementById(l);(c=o.parentNode).insertBefore(a[r],o),c.removeChild(o)}else c.appendChild(a[r])}));for(var P=0;P<A.length;P++)WPTB_Helper.toggleSwitch(A[P][0],A[P][1]);for(var x=0;x<C.length;x++)WPTB_Helper.appearDependOnControl(C[x][0],C[x][1]);WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",t),WPTB_Helper.wptbDocumentEventGenerate("element:controls:active:global",document,t);for(var W=0;W<B.length;W++)WPTB_Helper.valueDependOnControl(B[W][0],B[W][1],B[W][2],e,t)},editActionClassRemove:function(){for(var e=document.querySelectorAll(".edit-active"),t=0;t<e.length;t++)e[t].classList.remove("edit-active")},controlParamCalculateValue:function(e,t){var a=WPTB_Helper.replaceAll(e,"-","_");if(window["paramCalculateValue_".concat(a,"_").concat(t)]&&"function"==typeof window["paramCalculateValue_".concat(a,"_").concat(t)])return window["paramCalculateValue_".concat(a,"_").concat(t)]()},controlParamCalculateValueCreateFunction:function(e,t,a,n){var r=e.className.match(/wptb-element-((.+-)\d+)/i),l="wptb-el-".concat(r[1],"-").concat(t),o=WPTB_Helper.replaceAll(l,"-","_");window["paramCalculateValue_".concat(o,"_").concat(a)]=function(){return n(e)}},managerExternalCssStyles:function(e,t,a,n){var r=e.match(/wptb-element-main(.+)-(\d+)/i);if(!r||!Array.isArray(r)){var l=document.getElementsByClassName("wptb-preview-table");if(l.length>0){var o=(l=l[0]).className.match(/wptb-element-main(.+)-(\d+)/i);o&&Array.isArray(o)&&(t=".".concat(o[0]," ").concat(t))}}var i=document.head;if(i){var s=i.querySelector("#styles-".concat(e));if(s){var c=s.innerHTML;if(c){var d=c.split("}");d.pop();for(var p=!1,u=0;u<d.length;u++){var m=d[u].split("{");if(m[0]===t){var b=m[1].split(";");b.pop();for(var f=!1,v=0;v<b.length;v++){if(b[v].split(":")[0]===a){n?b[v]="".concat(a,":").concat(n):b.splice(v,1),m[1]=b.join(";")?"".concat(b.join(";"),";"):"",f=!0;break}}f||n&&(m[1]+="".concat(a,":").concat(n,";")),m[1]?d[u]="".concat(m[0],"{").concat(m[1]):d.splice(u,1),d.join("}")?s.innerHTML="".concat(d.join("}"),"}"):i.removeChild(s),p=!0;break}}p||(s.innerHTML=n?"".concat(c+t,"{").concat(a,":").concat(n,";}"):c)}else n?s.innerHTML="".concat(t,"{").concat(a,":").concat(n,";}"):i.removeChild(s)}else if(n){var w=document.createElement("style");w.setAttribute("id","styles-".concat(e)),w.classList.add("styles-wptb-elements"),w.innerHTML="".concat(t,"{").concat(a,":").concat(n,";}"),i.appendChild(w)}}},registerSections:function(e){var t=this;this.sections={},this.currentSection="",Array.isArray(e)||(e=[e]),e.map((function(e){var a=document.querySelector("[data-wptb-section=".concat(e,"]"));a&&(t.sections[e]=a)}))},activateSection:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";this.currentSection=e,this.triggerSectionEvent(e),Object.keys(this.sections).map((function(n){if(Object.prototype.hasOwnProperty.call(t.sections,n)){var r=e===n?a:"none";t.sections[n].style="display: ".concat(r," !important")}}))},getCurrentSection:function(){return this.currentSection},getSectionFromUrl:function(){var e=new URL(window.location.href).searchParams.get("wptb-builder-section");e&&Object.keys(this.sections).some((function(t){return t===e}))&&this.activateSection(e)},setupSectionButtons:function(){var e=Array.from(document.querySelectorAll("[data-wptb-section-button]")),t=this;e.map((function(e){var a=e.dataset.wptbSectionButton;e.addEventListener("click",(function(){var n=e.dataset.wptbSectionDisplayType;t.activateSection(a,n),WPTB_Helper.editActionClassRemove()})),document.addEventListener("wptbSectionChanged",(function(t){t.detail===a?(e.classList.remove("disabled"),e.classList.add("active")):(e.classList.remove("active"),e.classList.add("disabled"))}))}))},setupPanelToggleButtons:function(){var e=jQuery;e(".wptb-panel-toggle-group").each((function(){var t=e(this);e(this).find(".toggle-icon").click((function(){t.find(".wptb-panel-toggle-target").slideToggle(),t.toggleClass("wptb-panel-toggle-content")}))}))},triggerSectionEvent:function(e){var t=new CustomEvent("wptbSectionChanged",{detail:e});document.dispatchEvent(t)},setupSidebarToggle:function(e){var t=document.querySelector(e);t&&t.addEventListener("click",(function(e){e.preventDefault(),document.body.classList.toggle("collapsed")}))},externalCssStylesDelete:function(e){var t=document.head;if(t){var a=t.querySelector("#styles-".concat(e));a&&t.removeChild(a)}},externalCssStylesCopy:function(e,t){if(e){var a=e.className.match(/wptb-element-(.+)-(\d+)/i);if(a&&Array.isArray(a)){var n=a[0],r=document.head;if(r){var l=r.querySelector("#styles-".concat(n));if(l){var o=l.cloneNode(!0);o.removeAttribute("id","styles-".concat(n));var i=t.className.match(/wptb-element-(.+)-(\d+)/i);if(i&&Array.isArray(i)){o.setAttribute("id","styles-".concat(i[0]));var s=l.innerHTML,c=WPTB_Helper.replaceAll(s,n,i[0]);o.innerHTML=c,r.appendChild(o)}}}}}},elementsStylesConvertToObject:function(){for(var e=document.head.querySelectorAll(".styles-wptb-elements"),t={},a=0;a<e.length;a++){var n=e[a].getAttribute("id");n&&e[a].innerHTML&&(t[n]=e[a].innerHTML)}return 0!=Object.keys(t).length?JSON.stringify(t):""},elementsStylesSetFromObject:function(e){var t=document.head;if(t){var a=t.querySelectorAll(".styles-wptb-elements");if(a.length>0){a=_toConsumableArray(a);for(var n=0;n<a.length;n++)t.removeChild(a[n])}if(e){var r=JSON.parse(e);0!=Object.keys(r).length&&Object.keys(r).forEach((function(e){var a=r[e],n=document.createElement("style");n.setAttribute("id",e),n.classList.add("styles-wptb-elements"),n.innerHTML=a,t.appendChild(n)}))}}},saveTable:function(e,t,a){if(WPTB_Helper.tableSaveIndicator(!0),a||t||!e.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,e.target.dataset.wptbTableStateNumberSave),!a){var n=document.querySelector(".wptb-edit-bar");if(n&&n.classList.contains("visible")){document.getElementsByClassName("wptb-preview-table")[0];WPTB_Helper.toggleTableEditMode()}}WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document),WPTB_Helper.tableClean();var r,l,o,i,s=new XMLHttpRequest,c="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=save_table"),d=document.getElementById("wptb-setup-name").value.trim();l=document.getElementsByClassName("wptb-preview-table"),((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(i=rs);var p=!1;if(l.length>0){var u=(l=l[0]).cloneNode(!0);if(i&&u.classList.contains("wptb-element-main-table_setting-startedid-0")){u.classList.remove("wptb-element-main-table_setting-startedid-0"),u.classList.add("wptb-element-main-table_setting-".concat(i));var m=document.querySelector(".wptb-table-setup");m&&(m.innerHTML="",m.appendChild(u),WPTB_Table()),p=!0}u.columns=l.columns,l=(l=WPTB_Stringifier(u)).outerHTML}else l="";if(!a){o="";var b=document.getElementsByClassName("wptb-element-datas");b.length>0&&b[0].innerHTML&&(o=b[0].innerHTML,p&&(o=WPTB_Helper.replaceAll(o,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-".concat(i)),o=WPTB_Helper.replaceAll(o,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-".concat(i))))}var f=WPTB_Helper.elementsStylesConvertToObject();if(p&&(f=WPTB_Helper.replaceAll(f,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-".concat(i))),""===d&&""===l){var v="";return""===d&&(v+="You must assign a name to the table before saving it.</br>"),""===l&&(v+="Table wasn't created"),(r=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '.concat(v,"</div>"),r.classList.add("wptb-warning"),void setTimeout((function(){r.removeChild(r.firstChild)}),4e3)}var w={title:d,content:l,elements_datas:o,elements_styles:f,security_code:wptb_admin_object.security_code};a&&(w.preview_saving=a),i&&(w.id=i),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document,w),w=JSON.stringify(w),s.open("POST",c,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=function(a){if(4==this.readyState&&(WPTB_Helper.tableSaveIndicator(!1),200==this.status)){var n=JSON.parse(s.responseText);if(r=document.getElementById("wptb-messaging-area"),"saved"==n[0]){WPTB_Helper.wptbDocumentEventGenerate("wptb:saved:response:data",document,n[2]);var l=document.location.href.replace("#",""),o=new RegExp("&table=(.+)","i");l=l.replace(o,""),window.history.pushState(null,null,"".concat(l,"&table=").concat(n[1])),document.wptbId=n[1],r.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully saved.</div>'),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(n[1],"]");document.querySelector(".wptb-preview-table");var i=document.getElementsByClassName("wptb-preview-btn");if(i.length>0){(i=i[0]).classList.remove("wptb-button-disable");var c=i.dataset.previewHref;c=c.replace("empty",n[1]),i.setAttribute("href",c)}e.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var p=document.getElementsByClassName("wptb-save-btn");return void(p.length>0&&((p=p[0]).classList.add("wptb-save-disabled"),p.classList.remove("active")))}if("edited"==n[0]&&t){WPTB_Helper.wptbDocumentEventGenerate("wptb:saved:response:data",document,n[2]),document.wptbId=n[1],r.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully saved.</div>'),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(n[1],"]");document.querySelector(".wptb-preview-table");var u=document.getElementsByClassName("wptb-preview-btn");if(u.length>0){(u=u[0]).classList.remove("wptb-button-disable");var m=u.dataset.previewHref;m=m.replace("empty",n[1]),u.setAttribute("href",m)}e.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var b=document.getElementsByClassName("wptb-save-btn");b.length>0&&((b=b[0]).classList.add("wptb-save-disabled"),b.classList.remove("active"))}else if("edited"==n[0]){WPTB_Helper.wptbDocumentEventGenerate("wptb:saved:response:data",document,n[2]),r.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully updated.</div>'),e.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var f=document.getElementsByClassName("wptb-save-btn");f.length>0&&((f=f[0]).classList.add("wptb-save-disabled"),f.classList.remove("active"))}else{if("preview_edited"==n[0])return;r.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}r.classList.add("wptb-success"),setTimeout((function(){r.removeChild(r.firstChild)}),4e3)}},s.send(w)},clickOnFreeSpace:function(){WPTB_Helper.editActionClassRemove();var e=this.getCurrentSection();if("table_responsive_menu"!==e&&"data_table_menu"!==e){var t=document.querySelector("#wptb-cell_mode_background");if(!t||!t.classList.contains("visible")){this.activateSection("elements");var a=document.getElementById("wpcd_fixed_toolbar");a.hasAttribute("data-toolbar-active-id")&&document.getElementById(a.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active");var n=document.querySelector(".wptb-preview-table");n&&WPTB_Helper.elementOptionsSet("table_setting",n)}}},elementAjax:function(e,t){var a,n=new XMLHttpRequest,r="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=wptb_element_ajax"),l=t.className.match(/wptb-element-(.+)-(\d+)/i);l&&Array.isArray(l)&&(a=l[1]);var o={element_ajax_data:e,element_name:a,security_code:wptb_admin_object.security_code};o=JSON.stringify(o),n.open("POST",r,!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var a,r=JSON.parse(n.responseText);a=r&&Array.isArray(r)&&"element_ajax_responce"==r[0]?{value:r[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",t,a)}},n.send(o)},toggleTableEditMode:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.getElementsByClassName("wptb-edit-bar"),a=document.getElementById("wptb-cell_mode_background"),n=document.getElementById("wptb-left-scroll-panel-curtain"),r=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=document.getElementsByClassName("wptb-preview-table");if(l.length>0&&(l=l[0]),t.length>0){for(var o="",i=0;i<t.length;i++)if(t[i].classList.contains("visible")){document.select.deactivateMultipleSelectMode(),t[i].classList.remove("visible"),a.classList.remove("visible"),n.classList.remove("visible"),r.classList.remove("visible"),l.parentNode.classList.remove("wptb-preview-table-manage-cells");var s=l.getElementsByTagName("td");if(s.length>0)for(var c=0;c<s.length;c++)s[c].classList.remove("wptb-highlighted");o="closed",WPTB_Helper.activateSection("elements")}else e||(document.select.activateMultipleSelectMode(),t[i].classList.add("visible"),a.classList.add("visible"),n.classList.add("visible"),l.parentNode.classList.add("wptb-preview-table-manage-cells"),o="opened");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-edit-mode/".concat(o),l)}},checkingDimensionValue:function(e,t){if(e=String(e),t=String(t),e&&t){var a=e.indexOf(t);return-1!=a&&a==e.length-t.length}return!1},checkSetGetStyleSizeValue:function(e,t,a,n){var r=e.style[t];if((r=String(r))&&!n||WPTB_Helper.checkingDimensionValue(r,n)){if(!n)return r}else{var l=window.getComputedStyle(e);if(a&&l.getPropertyValue(a)&&n&&!WPTB_Helper.checkingDimensionValue(l.getPropertyValue(a),n)){if(!n)return!1;e.style[t]=null}else{if(!n)return l.getPropertyValue(a);e.style[t]=l.getPropertyValue(a)}}return e.style[t]},checkSetGetStyleColorValue:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!n)return r}else{var l=window.getComputedStyle(e,null);if(l&&l.getPropertyValue(a)){if(!n)return l.getPropertyValue(a);r=WPTB_Helper.rgbToHex(l.getPropertyValue(a)),WPTB_Helper.isHex(r)?e.style[t]=r:e.style[t]=""}else{if(!n)return"";e.style[t]=""}}},checkSetGetStyleValue:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!n)return r}else{var l=window.getComputedStyle(e,null);if(l&&l.getPropertyValue(a)){if(!n)return l.getPropertyValue(a);e.style[t]=l.getPropertyValue(a)}else if(!n)return""}},getValueMaxCountSameElementsInArray:function(e){if(e&&Array.isArray(e)){for(var t,a={},n=0,r=0;r<e.length;r++)e[r]?a[e[r]]?a[e[r]]++:a[e[r]]=1:n++;for(var l in a)t?a[t]<a[l]&&(t=l):t=l;return a[t]>=n?t:""}},recalculateIndexes:function(e){WPTB_RecalculateIndexes(e)},tableRowsColorsReinstall:function(e){var t=e.className.match(/wptb-element-main(.+)-(\d+)/i);if(t&&Array.isArray(t)){var a="";a="0"==t[t.length-1]?"startedid-0":t[t.length-1];var n=document.querySelector(".wptb-el-main-table_setting-".concat(a,"-tableHeaderBackground"));if(n){var r={value:n.value};WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",n,r)}var l=document.querySelector(".wptb-el-main-table_setting-".concat(a,"-tableEvenRowBackground"));if(l){var o={value:l.value};WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",l,o)}var i=document.querySelector(".wptb-el-main-table_setting-".concat(a,"-tableOddRowBackground"));if(i){var s={value:i.value};WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",i,s)}}},getParentOfType:function(e,t){return t.nodeName===e.toUpperCase()?t:WPTB_Helper.getParentOfType(e,t.parentElement)},dragRelativeType:"",setDragRelativeType:function(e){this.dragRelativeType=e},getDragRelativeType:function(){return this.dragRelativeType},getElementColorStylesHex:function(e,t){var a=e.style[t];return a=WPTB_Helper.rgbToHex(a),WPTB_Helper.isHex(a)||(a=""),a},showControlsOnElementMount:function(){document.addEventListener("element:mounted:dom",(function(e){e.target.click()}))},showElementsListOnRemove:function(){document.addEventListener("element:removed:dom",(function(){WPTB_Helper.activateSection("elements")}))},blockTinyMCEManageCells:function(){var e=function(e){var t=document.createElement("div");t.classList.add("wptb-plugin-blocker-element");var a=e.childNodes.length>0;e.appendChild(t),a||e.classList.add("wptb-plugin-blocker-element-empty")},t=function(e){var t=e.querySelector(".wptb-plugin-blocker-element");t&&t.remove(),e.classList.remove("wptb-plugin-blocker-element-empty")};document.addEventListener("wptbSectionChanged",(function(a){var n=a.detail,r=document.querySelector(".wptb-table-setup table.wptb-preview-table");if(r){var l=Array.from(r.querySelectorAll("td"));l.map(t),"manage_cells"!==n&&"cell_settings"!==n||l.map(e)}})),document.addEventListener("wptb:save:before",(function(){var e=document.querySelector(".wptb-table-setup table.wptb-preview-table");Array.from(e.querySelectorAll("td")).map(t)}))},calledByBlock:function(){new URL(window.location.href).searchParams.get("gutenberg")&&document.querySelector(".wptb-plugin-header-close a").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var t=document.querySelector(".wptb-save-disabled"),a=new URL(window.location.href).searchParams.get("table");t?WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,a):window.confirm(wptb_admin_object.strings.dirtyConfirmation)&&WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,a)}),{capture:!0})},tableClean:function(){Array.from(document.querySelectorAll(".wptb-directlyhovered")).map((function(e){e.classList.remove("wptb-directlyhovered")}))},tableSaveIndicator:function(e){var t=document.querySelector("#wptb_builder");t&&(e?t.dataset.wptbSaving=!0:delete t.dataset.wptbSaving)}},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),WPTB_Helper.registerSections(["elements","table_settings","cell_settings","options_group","table_responsive_menu","manage_cells","data_table_menu"]),WPTB_Helper.setupSectionButtons(),WPTB_Helper.activateSection("elements"),WPTB_Helper.setupSidebarToggle(".wptb-panel-toggle-section .wptb-panel-drawer-icon"),WPTB_Helper.setupPanelToggleButtons(),new WptbResponsive("table_responsive_menu","wptbResponsiveApp",".wptb-builder-content"),DataTableManagerStatic.getInstance("data_table_menu","wptbDataTableApp",".wptb-builder-panel",wptb_admin_object.dataTable),WPTB_Helper.getSectionFromUrl(),WPTB_Helper.showControlsOnElementMount(),WPTB_Helper.showElementsListOnRemove(),WPTB_Helper.blockTinyMCEManageCells(),new WPTB_HeaderToolbox(".wptb-plugin-header-toolbar").init(),document.addEventListener("wp-table-builder/table-edit-mode/closed",(function(){WPTB_Helper.activateSection("elements")})),WPTB_Helper.calledByBlock()},WPTB_LeftPanel=function(){for(var e=document.getElementsByClassName("wptb-preview-table")[0],t=document.getElementsByClassName("wptb-element"),a=0;a<t.length;a++)t[a].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};if(e)for(var n=document.getElementsByClassName("wptb-table-edit-mode-close"),r=0;r<n.length;r++)n[r].onclick=WPTB_Helper.toggleTableEditMode;document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||WPTB_Helper.clickOnFreeSpace()};var l=document.getElementsByClassName("wptb-header");l.length>0&&(l=l[0]),l.onclick=function(){WPTB_Helper.clickOnFreeSpace()}},MultipleSelect=function(){var e=[],t=!1;return this.activateMultipleSelectMode=function(){e=[];for(var a=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),n=0;n<a.length;n++)a[n].classList.remove("wptb-highlighted");t=!0},this.deactivateMultipleSelectMode=function(){t=!1},this.isActivated=function(){return t},this.pushSelectedCell=function(a){t&&(e.push(a),a.classList.add("wptb-highlighted"))},this.selectedCells=function(){return e},this.flushSelectedCells=function(){e=[]},this.getFirst=function(){for(var t,a=1e3,n=1e3,r=e.length-1;r>=0;r--)a>=e[r].dataset.xIndex&&n>=e[r].dataset.yIndex&&(t=e[r],a=e[r].dataset.xIndex,n=e[r].dataset.yIndex);return t},this.getLast=function(){for(var t,a=-1,n=-1,r=e.length-1;r>=0;r--)a<=e[r].dataset.xIndex&&n<=e[r].dataset.yIndex&&(t=e[r],a=e[r].dataset.xIndex,n=e[r].dataset.yIndex);return t},this.removeAllButFirst=function(){for(var t=this.getFirst(),a=1;a<e.length;a++)e[a].classList.add("wptb-fused-cell-"+t.dataset.xIndex+"-"+t.dataset.yIndex)},this};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var WPTB_Parser=function(e){var t=document.createElement("div");t.innerHTML=e;for(var a=t.children[0],n=_toConsumableArray(a.querySelectorAll(".wptb-column-title-mobile-container")),r=0;r<n.length;r++){n[r].parentNode.removeChild(n[r])}for(var l=a.querySelectorAll("td"),o=0;o<l.length;o++)l[o].classList.add("wptb-droppable"),l[o].classList.remove("wptb-column-title-mobile-not-elements");return a};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=a.length;return function(r){if("object"!==_typeof(r)&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var l,o,i=[];for(l in r)e.call(r,l)&&i.push(l);if(t)for(o=0;o<n;o++)e.call(r,a[o])&&i.push(a[o]);return i}}());var WPTB_RecalculateIndexes=function(e){for(var t,a=e.getElementsByTagName("tr"),n=0,r=0,l=[],o=0;o<a.length;o++){t=a[o].getElementsByTagName("td"),null==l[o]&&(l[o]=[]);for(var i=0,s=0;s<t.length;s++){if(null!=l[o][s])for(var c=0;c<100;c++){if(null==l[o][i]){l[o][i]=t[s],t[s].dataset.xIndex=i;break}i++}else l[o][s]=t[s],t[s].dataset.xIndex=i;if(t[s].dataset.yIndex=o,t[s].colSpan>1)for(var d=1;d<t[s].colSpan;d++)i++,l[o][i]="tdDummy";if(t[s].rowSpan>1)for(var p=1;p<t[s].rowSpan;p++){null==l[o+p]&&(l[o+p]=[]);for(var u=0;u<t[s].colSpan;u++)l[o+p][i-t[s].colSpan+1+u]="tdDummy"}i++}t.length>n&&(n=t.length),0==o&&(r=i)}e.columns=n,e.maxCols=r};function WptbResponsive(e,t,a){var n=this;this.sectionName=e,this.responsiveWrapperId=t,this.responsiveTable=null,this.loaded=!1,this.addContainerToDom=function(){if(!document.querySelector("#".concat(n.responsiveWrapperId))){var e=document.querySelector(a);if(!e)throw new Error("[WPTB_Responsive]: no parent container is found with the given query of [".concat(a,"]"));var t=document.createRange();t.setStart(e,0);var r=t.createContextualFragment('<div class="wptb-responsive" id="'.concat(n.responsiveWrapperId,'">responsive element</div>'));e.appendChild(r),n.loaded=!0}n.responsiveTable=document.querySelector("#".concat(n.responsiveWrapperId))},this.load=function(){n.loaded||(n.addContainerToDom(),WPTB_Helper.elementStartScript(n.responsiveTable,"table_responsive_menu"),WPTB_Helper.elementOptionsSet("table_responsive_menu",n.responsiveTable),WPTB_ControlsManager.callControlScript("ResponsiveTable",n.responsiveWrapperId))},this.startUp=function(){document.addEventListener("wptbSectionChanged",(function(e){var t=document.querySelector(".wptb-table-setup .wptb-preview-table");e.detail===n.sectionName&&t&&n.load()})),document.addEventListener("wptb:table:generated",(function(){"table_responsive_menu"===WPTB_Helper.getCurrentSection()&&n.load()}))},this.startUp()}var WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement),WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements||"")},e[t].ondragend=function(){WPTB_Helper.elementDragEndClear()};var a=new WPTB_TableStateSaveManager,n=document.getElementsByClassName("wptb-undo");n.length>0&&((n=n[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){a.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");t.length>0&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()})}});var r=document.getElementsByClassName("wptb-redo");r.length>0&&((r=r[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){a.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");t.length>0&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()})}});var l=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||l.classList.add("wptb-popup-show")},window.onbeforeunload=function(e){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){l.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){l.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){if(!this.classList.contains("wptb-button-disable")){var t=Math.floor(1e4*Math.random()),a=new URL(e.target.href);a.searchParams.set("preview_id",t),e.target.href=a.toString(),WPTB_Helper.saveTable(e,!1,t)}},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(e){this.classList.contains("wptb-save-disabled")||WPTB_Helper.saveTable(e)};var o=document.querySelector("#wptb-setup-name");o&&(o.onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()})};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}!function(e,t,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=a():t[e]=a()}("WPTB_SortableTable",self||global,(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.table=e.table;WPTB_RecalculateIndexes(t);var a=this;function n(e,t,a){if("TD"===e.target.tagName){var n=null==e.offsetX?e.layerX:e.offsetX,r=null==e.offsetY?e.layerY:e.offsetY,l=!1;("vertical"===t&&e.target.clientWidth-n<=35||"horizontal"===t&&n<=35)&&(l=!0),l&&(e.target.clientHeight-35)/2<r&&(e.target.clientHeight+35)/2>r?a.classList.add("sortable-hover"):a.classList.remove("sortable-hover")}else a.classList.remove("sortable-hover")}function r(e){n(e,"vertical",this)}function l(e){n(e,"horizontal",this)}function o(){this.classList.remove("sortable-hover")}function i(e,a){if(e.target&&"TD"===e.target.tagName&&!t.parentNode.classList.contains("wptb-preview-table-manage-cells")){var n=e.currentTarget,r=!1;if("vertical"===a&&e.target.dataset.hasOwnProperty("sortedVertical")){var l=[],o=[];if(this.itemsPerHeader&&this.itemsPerHeader<n.rows.length){WPTB_RecalculateIndexes(n);for(var i=_toConsumableArray(n.rows),m=n.querySelector("tbody")?n.querySelector("tbody"):n,b=0;b<i.length;b++)b<e.target.dataset.yIndex?(l.push(i[b]),m.removeChild(i[b])):b>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(o.push(i[b]),m.removeChild(i[b]));WPTB_RecalculateIndexes(n)}var f,v,w=n.querySelectorAll('[data-x-index="'.concat(e.target.dataset.xIndex,'"]'));(w=_toConsumableArray(w)).map((function(e){(f=parseInt(e.rowSpan,10))||(f=1),v=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(v,n),v+=f,WPTB_CutGlueTable.cutTableHorizontally(v,n)}));for(var g,y=[],h=0,S=[],T=0;T<w.length;T++){var _=p(e,n,w,T,h,"vertical");if(_&&_.hasOwnProperty("i"))w=_.tds,T=_.i;else{_&&(w=_.tds);var C=w[T],A=parseInt(C.rowSpan,10);A||(A=1),h=parseInt(C.dataset.yIndex,10)+A;for(var B=d(C),E=[],P=0;P<A;P++)E.push(n.rows[parseInt(C.dataset.yIndex,10)+P]),S.push(parseInt(C.dataset.yIndex,10)+P);C.dataset.yIndex>0?y.push({rowsTd:E,value:B}):g=E}}var x=s(e,"sortedVertical");if(!x)return;if(y.length&&y.sort((function(e,t){return c(x,e,t)})),y.unshift({rowsTd:g}),y.length<n.rows.length)for(var W=0;W<n.rows.length;W++)if(!(S.indexOf(W)>-1)){var I=[];I.push(n.rows[W]),y.push({rowsTd:I})}var L=n.querySelector("tbody");if(L.innerHTML="",y.map((function(e){e.rowsTd.map((function(e){L.appendChild(e)}))})),l.length){var H=n.querySelector("tbody")?n.querySelector("tbody"):n;if(H){var N=H.querySelector("tr");l.map((function(e){H.insertBefore(e,N)}))}}if(o.length){var O=n.querySelector("tbody")?n.querySelector("tbody"):n;L&&o.map((function(e){O.appendChild(e)}))}WPTB_RecalculateIndexes(n),WPTB_CutGlueTable.glueTableHorizontally(n),r=!0}else if("horizontal"===a&&"0"===e.target.dataset.xIndex){var M,k,D=n.querySelectorAll('[data-y-index="'.concat(e.target.dataset.yIndex,'"]'));(D=_toConsumableArray(D)).map((function(e){(M=parseInt(e.colSpan,10))||(M=1),k=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(k,n),k+=M,WPTB_CutGlueTable.cutTableVertically(k,n)}));for(var q,j=[],F=0,R=0;R<D.length;R++){var G=p(e,n,D,R,F,"horizontal");if(G&&G.hasOwnProperty("i"))D=G.tds,R=G.i;else{G&&(D=G.tds);var V=D[R],z=parseInt(V.colSpan,10);z||(z=1),F=parseInt(V.dataset.xIndex,10)+z;for(var U=d(V),J=[],$=0;$<z;$++){var Q=_toConsumableArray(n.querySelectorAll('[data-x-index="'.concat(parseInt(V.dataset.xIndex,10)+$,'"]')));J.push(Q)}V.dataset.xIndex>0?j.push({columnsTd:J,value:U}):q=J}}var K=s(e,"sortedHorizontal");if(!K)return;if(j.length&&j.sort((function(e,t){return c(K,e,t)})),j.unshift({columnsTd:q}),j.length<n.maxCols)for(var Y=n.maxCols-j.length,X=0;X<Y;X++){var Z=_toConsumableArray(n.querySelectorAll('[data-x-index="'.concat(parseInt(n.maxCols,10)-parseInt(Y,10)+X,'"]')));j.push({columnsTd:[Z]})}for(var ee=0;ee<n.rows.length;ee++)n.rows[ee].innerHTML="";j.map((function(e){e.columnsTd.map((function(e){e.map((function(e){n.rows[e.dataset.yIndex].appendChild(e)}))}))})),WPTB_RecalculateIndexes(n),WPTB_CutGlueTable.glueTableVertically(n),r=!0}if(r){if(u(n),n.hasOwnProperty("tableSM"))(new(n.tableSM())).tableStateSet();this.reassignElementsStyles("td"),this.reassignElementsStyles("tr")}}}function s(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ask",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=t.value,r=a.value;return parseInt(n)&&parseInt(r)&&(n=parseInt(n),r=parseInt(r)),"ask"===e?n<r?-1:n===r?0:1:n<r?1:n===r?0:-1}function d(e){var t=e.querySelectorAll(".wptb-text-container");t=_toConsumableArray(t);for(var a="",n=0;n<t.length;n++){a+=t[n].querySelector("p").innerText,n!==t.length-1&&(a+=" ")}return a}function p(e,t,a,n,r,l){var o,i,s,c,d,p,u,m,b=a[n],f=!1;if("vertical"===l?(s="colSpan",c="data-y-index",d="yIndex",p="xIndex",u="rowSpan",m=t.rows.length):"horizontal"===l&&(s="rowSpan",c="data-x-index",d="xIndex",p="yIndex",u="colSpan",m=t.maxCols),b.dataset[d]-r>0){o=t.querySelectorAll("[".concat(c,'="').concat(r,'"]'));for(var v=0;v<o.length;v++)if((i=o[v][s])||(i=1),o[v].dataset[p]<e.target.dataset[p]&&parseInt(o[v].dataset[p],10)+parseInt(i,10)>e.target.dataset[p]){a.splice(n,0,o[v]),f=!0,n--;break}}if(f)return{tds:a,i:n};var w=parseInt(b[u],10);if(w||(w=1),n==a.length-1&&parseInt(b.dataset[d],10)+w<m){o=t.querySelectorAll("[".concat(c,'="').concat(parseInt(b.dataset[d],10)+w,'"]'));for(var g=0;g<o.length;g++)if((i=o[g][s])||(i=1),o[g].dataset[p]<e.target.dataset[p]&&parseInt(o[g].dataset[p],10)+parseInt(i,10)>e.target.dataset[p]){a.push(o[g]),f=!0;break}}return!!f&&{tds:a}}function u(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),a=0;a<t.length;a++)t[a].hasAttribute("data-same-cell-before-division")&&t[a].removeAttribute("data-same-cell-before-division")}return this.itemsPerHeader=0,this.tableMaxCols=t.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=t.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=t.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var a=0;a<t.length;a++){var n=t[a],r=window.getComputedStyle(n,null).getPropertyValue("background-color"),l="";"td"===e?(l=n.dataset.xIndex+"-"+n.dataset.yIndex,this.cellsStylesScheme[l]={backgroundColor:r}):"tr"===e&&(l=String(a),this.rowsStylesScheme[l]={backgroundColor:r})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t,a=this.table.querySelectorAll(e);if("td"===e?t=this.cellsStylesScheme:"tr"===e&&(t=this.rowsStylesScheme),a.length)for(var n=0;n<a.length;n++){var r=a[n],l="";if("td"===e?l=r.dataset.xIndex+"-"+r.dataset.yIndex:"tr"===e&&(l=n),t.hasOwnProperty(l)){var o=t[l];for(var i in o)r.style[i]=o[i]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(e){var t,n,r="";this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(t="vertical",n="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(t="horizontal",n="vertical");var l={};e&&e.getDirective(this.table)?l.switch=function(a){var l=e.getDirective(this.table),o="desktop";if(a&&a.detail&&(o=a.detail.sizeRangeId),r=t,"desktop"!==o){if(l.hasOwnProperty("modeOptions")){var i=l.responsiveMode,s=l.modeOptions[i];s.hasOwnProperty("topRowAsHeader")&&s.topRowAsHeader.hasOwnProperty(o)&&s.topRowAsHeader[o]?s.hasOwnProperty("cellStackDirection")&&s.cellStackDirection.hasOwnProperty(o)&&("row"===s.cellStackDirection[o]?(r=n,this.itemsPerHeader=this.tableMaxCols-1):"column"===s.cellStackDirection[o]&&s.hasOwnProperty("cellsPerRow")&&(this.itemsPerHeader=s.cellsPerRow[o])):this.itemsPerHeader=0}}else this.itemsPerHeader=0;this.sortModeSwitcher(r,!0)}:l.switch=function(e){var a=t;if(this.table.classList.contains("wptb-mobile-view-active")){this.table.classList.contains("wptb-table-preview-head")&&"vertical"===(a=n)&&(this.itemsPerHeader=this.tableMaxCols-1);var r=this.table;return this.table=r.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"),this.sortModeSwitcher(a,!0),void(this.table=r)}this.sortModeSwitcher(a,!0)},l.switch.call(a),this.table.addEventListener("table:rebuilt",(function(e){l.switch.call(a,e)}),!1)},this.sortingCellMouseMoveSwitcher=function(e,t){var a=this;function n(e,t,a){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",o,!1),a&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",o,!1))}function i(e,t,a){a?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var s=this.table.querySelectorAll("td");if(s.length&&(s=_toConsumableArray(s)).map((function(e){n(e,r,!1),i(e,"sortedVertical",!1),n(e,l,!1),i(e,"sortedHorizontal",!1)})),t)if("vertical"===e)for(var c=this.table.rows.length,d=0;c>0;){var p=this.table.querySelectorAll('[data-y-index="'.concat(d,'"]'));(p=_toConsumableArray(p)).map((function(e){n(e,r,t),i(e,"sortedVertical",t)})),this.itemsPerHeader?(c-=this.itemsPerHeader+1,d+=this.itemsPerHeader+1):c=0}else if("horizontal"===e){var u=this.table.querySelectorAll('[data-x-index="0"]');(u=_toConsumableArray(u)).map((function(e){a.table.querySelectorAll('[data-y-index="'.concat(e.dataset.yIndex,'"]')).length>2&&(n(e,l,t),i(e,"sortedHorizontal",t))}))}},this.sortableTableVerticalStart=function(e){i.call(a,e,"vertical")},this.sortableTableHorizontalStart=function(e){i.call(a,e,"horizontal")},this}}));var WPTB_Stringifier=function(e){if(e){var t=e.cloneNode(!0);t.dataset.tableColumns=e.columns,t.style.width=null,t.style.minWidth=null,t.style.maxWidth=null;var a=t.getElementsByTagName("td");if(a.length>0)for(var n=0;n<a.length;n++){a[n].removeAttribute("draggable"),a[n].classList.remove("wptb-droppable");var r=a[n].className.match(/wptb-element-((.+-)\d+)/i);r&&a[n].classList.remove(r[0]);var l=a[n].getElementsByClassName("wptb-ph-element");if(l.length>0)for(var o=0;o<l.length;o++){var i=l[o].querySelectorAll(".mce-content-body");if(i.length>0)for(var s=0;s<i.length;s++)i[s].classList.remove("mce-content-body");var c=l[o].querySelectorAll("[data-mce-style]");if(c.length>0)for(var d=0;d<c.length;d++)c[d].removeAttribute("data-mce-style");var p=l[o].querySelectorAll("[contenteditable]");if(p.length>0)for(var u=0;u<p.length;u++)p[u].removeAttribute("contenteditable");var m=l[o].querySelectorAll("[spellcheck]");if(m.length>0)for(var b=0;b<m.length;b++)m[b].removeAttribute("spellcheck");var f=l[o].querySelectorAll("[id^=mce_]");if(f.length>0)for(var v=0;v<f.length;v++)f[v].removeAttribute("id");for(var w=l[o].querySelectorAll(".wptb-actions"),g=w.length;g>0&&w[0]&&w[0].parentNode;)w[0].parentNode.removeChild(w[0]),g--;var y=l[o].querySelectorAll("[data-mce-bogus]");if(y.length>0){y=_toConsumableArray(y);for(var h=0;h<y.length;h++)y[h]&&y[h].parentNode&&y[h].parentNode.removeChild(y[h])}}}return t}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var array=[],WPTB_Table=function(e,t,a){var n,r,l,o,i=document.getElementsByClassName("wptb-settings-items"),s=document.getElementsByClassName("wptb-table-setup")[0],c=function(e){var t=e.currentTarget,a=t.rowSpan,r=t.colSpan,l=document.getElementsByClassName("wptb-no-cell-action"),o=document.getElementsByClassName("wptb-single-action"),i=document.getElementsByClassName("wptb-multiple-select-action"),s=document.getElementById("wptb-left-scroll-panel-cell-settings"),c=m(t);c[0],c[1];function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?"add":"remove";e.classList[a]("wptb-highlighted");for(var n=m(e),r=_slicedToArray(n,2),l=r[0],o=r[1],i=e.rowSpan,s=e.colSpan,c=0;c<i;c++)for(var d=0;d<s;d++)array[l+c][o+d]=t?1:0}if(document.select.isActivated()){var p=e.shiftKey;if(t.className.match(/wptb-highlighted/)){var u=Array.from(document.querySelectorAll(".wptb-highlighted"));u.length>1?p?d(t,!1):(d(t,!0),u.map((function(e){e!==t&&d(e,!1)}))):d(t,!1)}else p||Array.from(document.querySelectorAll(".wptb-highlighted")).map((function(e){e!==t&&d(e,!1)})),d(t,!0);var b=document.getElementsByClassName("wptb-highlighted"),f=b.length;if(0===f){for(var v=0;v<i.length;v++)i[v].classList.remove("visible"),i[v].setAttribute("disabled","disabled");for(v=0;v<l.length;v++)l[v].classList.add("visible"),l[v].removeAttribute("disabled");for(v=0;v<o.length;v++)o[v].classList.remove("visible"),o[v].setAttribute("disabled","disabled");s.classList.remove("visible")}else if(1===f){for(v=0;v<i.length;v++)i[v].classList.remove("visible"),i[v].setAttribute("disabled","disabled");for(v=0;v<l.length;v++)l[v].classList.remove("visible"),l[v].setAttribute("disabled","disabled");for(v=0;v<o.length;v++)o[v].classList.add("visible"),o[v].removeAttribute("disabled");b=b[0],WPTB_Helper.elementOptionsSet("table_cell_setting",b);var w=b.className.match(/wptb-element-((.+-)\d+)/i);["cellWidth","cellHeight"].map((function(e){var t="wptb-el-".concat(w[1],"-").concat(e),a="wptb-el-".concat(w[1],"-").concat(e,"Fixed");if("cellWidth"===e||"cellHeight"===e){var r="",l="";"cellWidth"===e?(r="width",l="getColumnWidth"):"cellHeight"===e&&(r="height",l="getRowHeight");var o=b.style[r],i=document.querySelectorAll("."+t),s=document.querySelector("."+a);i=_toConsumableArray(i),o||b.dataset["wptbFixed".concat(r.toUpperCase())]?(i.map((function(e){o?e.value=parseFloat(o,10):b.dataset["wptbFixed".concat(r.toUpperCase())]&&(e.value=b.dataset["wptbFixed".concat(r.toUpperCase())])})),s.checked=!0):(o=WPTB_Helper[l](n,b),i.map((function(e){e.value=o})),s.checked=!1)}})),s.classList.add("visible")}else{for(v=0;v<i.length;v++)n.isSquare(array)?(i[v].classList.add("visible"),i[v].removeAttribute("disabled")):(i[v].classList.remove("visible"),i[v].setAttribute("disabled","disabled"));for(v=0;v<l.length;v++)l[v].classList.remove("visible"),l[v].setAttribute("disabled","disabled");for(v=0;v<o.length;v++)o[v].classList.remove("visible"),o[v].setAttribute("disabled","disabled");s.classList.remove("visible")}var g=t.className.match(/wptb-element-table_cell_setting-((.+-)\d+)/i);if(g&&g.length>1){var y="wptb-el-table_cell_setting-".concat(g[1],"-").concat("emptyCell"),h=document.getElementById(y);h&&(h.querySelector('input[type="checkbox"]').checked=t.classList.contains("wptb-empty"))}var S={countMarkedCells:f};WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/cell/mark",t,S);var T=document.querySelector("#wptb-split-cell");if(T)1===f&&(1!==a||1!==r)?(T.classList.add("visible"),T.removeAttribute("disabled")):(T.classList.remove("visible"),T.setAttribute("disabled","disabled"))}},d=function(e){for(var t=0;t<e.length;t++){for(var a=0;a<e[t].length;a++)" "+e[t][a];"\n"}n.isSquare(e)},p=function(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),a=document.getElementsByClassName("wptb-multiple-select-action"),r=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=n.getElementsByClassName("wptb-highlighted");l.length;)l[0].classList.remove("wptb-highlighted");r.classList.remove("visible");for(var o=0;o<array.length;o++)for(var i=0;i<array[o].length;i++)array[o][i]=0;for(var s=0;s<a.length;s++)a[s].classList.remove("visible"),a[s].setAttribute("disabled","disabled");for(var c=0;c<e.length;c++)e[c].classList.add("visible"),e[c].removeAttribute("disabled");for(var d=0;d<t.length;d++)t[d].classList.remove("visible"),t[d].setAttribute("disabled","disabled");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/undo-select/active",n)},u=function(){for(var e=[],t=[],a=0;a<n.rows.length;a++){for(var r=n.rows[a].getElementsByTagName("td"),l=0,i=0;i<r.length;i++)l+=r[i].colSpan;e.push(l)}o=Math.max.apply(null,e);var s=n.rows.length;for(a=0;a<s;a++){t[a]=[];for(i=0;i<o;i++)t[a].push(0)}return d(t),t},m=function(e){for(var t=[],a=0;a<o;a++)t[a]=0;for(a=0;a<n.rows.length;a++){var r=n.rows[a].getElementsByTagName("td");cellPointer=0;for(var l=0;l<o;l+=stepsToMove)if(stepsToMove=1,t[l])t[l]--;else{var i=r[cellPointer++];if(i==e)return[a,l];if(i.rowSpan>1){for(var s=0;s<i.colSpan;s++)t[l+s]=i.rowSpan-1;stepsToMove=i.colSpan}else i.colSpan>1&&(stepsToMove=i.colSpan)}}};if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var b=0;b<i.length;b++)"wptb-apply-inner-border"!==i[b].id&&i[b].classList.add("visible");(n=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),n.style.border="0px solid",n.dataset.reconstraction=1;for(b=0;b<t;b++){(r=n.insertRow(-1)).classList.add("wptb-row");for(var f=0;f<e;f++)(l=new WPTB_Cell(c)).setCoords(b,f),l.getDOMElement().style.borderWidth="1px",r.appendChild(l.getDOMElement())}}else{if(a||(a=document.querySelector(".wptb-preview-table")),!a)return;var v=(n=a).getElementsByTagName("td");if(v.length>0)for(var w=0;w<v.length;w++)WPTB_Cell(c,v[w])}n.mark=function(e){c(e)},n.wptbCell=function(e,t){return WPTB_Cell(e,t)},n.tableSM=function(){return WPTB_TableStateSaveManager},n.undoSelect=function(){p()},n.setMaxAmountOfCells=function(e){o=e},n.getMaxAmountOfCells=function(){return o},n.fillTableArray=function(){return u()},n.recalculateIndexes=function(){WPTB_Helper.recalculateIndexes(this)},n.addColumnWidth=function(e,t){var a=n.getElementsByClassName("wptb-highlighted");if(a.length>0){for(var r=0;r<a.length;r++){var l=a[r].dataset.xIndex;l&&function a(r,l){for(var o=n.rows,i=!1,s=[],c=0;c<o.length;c++)for(var d=o[c].children,p=0;p<d.length;p++){var u=d[p];if(u.dataset.xIndex==r){if(e)u.colSpan==l?(u.style.width=e+"px",u.removeAttribute("data-wptb-fixed-width"),i=!0):(u.style.width=null,u.dataset.wptbFixedWidth=e,c!=o.length-1||i||a(r,l+1));else if(t)u.style.width=null,u.removeAttribute("data-wptb-fixed-width");else if(u.dataset.wptbFixedWidth)u.colSpan==l&&(u.style.width=u.dataset.wptbFixedWidth+"px",u.removeAttribute("data-wptb-fixed-width"));else if(u.style.width){for(var m=0;m<s.length;m++)s[m].style.width=u.style.width;s=[]}else s.push(u);break}}}(l,1)}n.tdDefaultWidth(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n)}},n.tdDefaultWidth=function(){for(var e,t=n.rows,a=0,r=0,l=document.getElementsByClassName("wptb-table-setup")[0],o=l.offsetWidth,i=[],s=[],c=0,d=0,p="",u=window.getComputedStyle(n,null),m=u.getPropertyValue("border-left-width"),b=u.getPropertyValue("border-right-width"),f=parseFloat(m,10)+parseFloat(b,10),v=0;v<t.length;v++)for(var w=t[v].children,g=0;g<w.length;g++){var y=w[g];if(i[parseFloat(y.dataset.xIndex)]||s[parseFloat(y.dataset.xIndex)])s[parseFloat(y.dataset.xIndex)]?y.dataset.wptbFixedWidth||(y.dataset.wptbCssTdAutoWidth=!0):i[parseFloat(y.dataset.xIndex)]&&y.removeAttribute("data-wptb-css-td-auto-width");else if(y.style.width?(i[parseFloat(y.dataset.xIndex)]=parseFloat(y.style.width),y.removeAttribute("data-wptb-css-td-auto-width")):y.dataset.wptbFixedWidth||(s[parseFloat(y.dataset.xIndex)]=n.dataset.wptbTdWidthAuto?parseFloat(n.dataset.wptbTdWidthAuto,10):100,y.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(y,null)){var h=window.getComputedStyle(y,null),S=h.getPropertyValue("padding-left"),T=h.getPropertyValue("padding-right");c=parseFloat(S,10)+parseFloat(T,10);var _=h.getPropertyValue("border-left-width"),C=h.getPropertyValue("border-right-width");d=parseFloat(_,10)+parseFloat(C,10),d/=2,i[parseFloat(y.dataset.xIndex)]?(i[parseFloat(y.dataset.xIndex)]+=c,i[parseFloat(y.dataset.xIndex)]+=d,0==g&&f/2<=parseFloat(_,10)?i[parseFloat(y.dataset.xIndex)]+=parseFloat(_,10)/2:0==g&&f/2>parseFloat(_,10)&&(i[parseFloat(y.dataset.xIndex)]+=f/2-parseFloat(C,10)/2),g==w.length-1&&f/2<=parseFloat(C,10)?i[parseFloat(y.dataset.xIndex)]+=parseFloat(C,10)/2:g==w.length-1&&f/2>parseFloat(C,10)&&(i[parseFloat(y.dataset.xIndex)]+=f/2-parseFloat(C,10)/2)):s[parseFloat(y.dataset.xIndex)]&&(s[parseFloat(y.dataset.xIndex)]+=c,s[parseFloat(y.dataset.xIndex)]+=d,0==g&&f/2<=parseFloat(_,10)?s[parseFloat(y.dataset.xIndex)]+=parseFloat(_,10)/2:0==g&&f/2>parseFloat(_,10)&&(s[parseFloat(y.dataset.xIndex)]+=f/2-parseFloat(_,10)/2),g==w.length-1&&f/2<=parseFloat(C,10)?s[parseFloat(y.dataset.xIndex)]+=parseFloat(C,10)/2:g==w.length-1&&f/2>parseFloat(C,10)&&(s[parseFloat(y.dataset.xIndex)]+=f/2-parseFloat(_,10)/2))}}for(var A=0;A<i.length;A++)i[A]&&(a+=i[A]);for(var B=0,E=0;E<s.length;E++)s[E]&&(r+=s[E],B++);e=a+r,n.dataset.wptbTableTdsSumMaxWidth=e,B?(n.dataset.wptbCellsWidthAutoCount=B,n.mergingellsHorizontally?n.dataset.wptbFixedWidthSize=a:n.removeAttribute("data-wptb-fixed-width-size")):(n.removeAttribute("data-wptb-fixed-width-size"),n.removeAttribute("data-wptb-cells-width-auto-count"));var P,x=!1;e<o?B?(n.style.minWidth="100%",n.mergingellsHorizontally?(n.style.width="auto",P=(P=(o-a)/B)-c-d,x=!0):n.style.width="100%"):(n.style.width="auto",n.style.minWidth=null,n.style.maxWidth=null):(n.style.maxWidth=null,n.style.minWidth=e+"px",n.style.width="auto",P=n.dataset.wptbTdWidthAuto?n.dataset.wptbTdWidthAuto:"100",x=!0);var W=document.head;if(W){var I=W.querySelector('style[data-wptb-td-auto-width="true"]');I&&W.removeChild(I)}if(x&&((p=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),p.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+P+"px}",W&&W.appendChild(p)),n.dataset.wptbTableAlignment){var L=n.dataset.wptbTableAlignment;l.offsetWidth<n.offsetWidth?n.style.float=null:n.style.float="center"==L?null:L,l.style.float="center"==L?null:L,P&&n.dataset.wptbTableContainerMaxWidth&&n.offsetWidth<n.dataset.wptbTableContainerMaxWidth&&(n.style.width="100%")}else n.style.float=null},n.addRowHeight=function(e,t){var a=n.getElementsByClassName("wptb-highlighted");if(a.length>0){for(var r=0;r<a.length;r++){var l=a[r].dataset.yIndex;l&&function a(r,l){for(var o=n.rows,i=!1,s=[],c=0;c<o.length;c++)for(var d=o[c].children,p=0;p<d.length;p++){var u=d[p];if(u.dataset.yIndex==r)if(e){if(u.rowSpan==l){u.style.height=e+"px",u.removeAttribute("data-wptb-fixed-heidht"),i=!0;continue}u.style.height=null,u.dataset.wptbFixedHeight=e,p!=d.length-1||i||a(r,l+1)}else if(t)u.style.height=null,u.removeAttribute("data-wptb-fixed-heidht");else if(u.dataset.wptbFixedHeight)(u.rowSpan=l)&&(u.style.height=u.dataset.wptbFixedHeight+"px",u.removeAttribute("data-wptb-fixed-width"));else if(u.style.height){for(var m=0;m<s.length;m++)s[m].style.height=u.style.height;s=[]}else s.push(u)}}(l,1)}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n)}},n.reconstraction=function(){var e=n.getElementsByTagName("td");n.mergingellsHorizontally=!1,n.mergingCellsVertically=!1,n.dataset.reconstraction=1;for(var t=0,a=0;a<e.length&&(e[a].colSpan>1&&(n.dataset.reconstraction=0,n.mergingellsHorizontally=!0,t++),e[a].rowSpan>1&&(n.dataset.reconstraction=0,n.mergingCellsVertically=!0,t++),2!=t);a++);},n.addColumnEnd=function(){var e,t,a,r=document.getElementsByClassName("wptb-preview-table");r.length>0&&(t=r[0].querySelector("td")),t&&(a=t.getAttribute("style"));for(var l=0;l<n.rows.length;l++)e=new WPTB_Cell(c),a&&(e.getDOMElement().setAttribute("style",a),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),n.rows[l].appendChild(e.getDOMElement()),array[l].push(0);o++,n.recalculateIndexes(),n.tdDefaultWidth(),n.addRowHeight(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()},n.addColumnStart=function(){var e,t,a,r,l=document.getElementsByClassName("wptb-preview-table");l.length>0&&(a=l[0].querySelector("td")),a&&(r=a.getAttribute("style"));for(var i=0;i<n.rows.length;i++)e=new WPTB_Cell(c),r&&(e.getDOMElement().setAttribute("style",r),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),(t=n.rows[i].getElementsByTagName("td")[0])?n.rows[i].insertBefore(e.getDOMElement(),t):n.rows[i].appendChild(e.getDOMElement()),array[i].push(0);o++,n.recalculateIndexes(),n.tdDefaultWidth(),n.addRowHeight(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()},n.addColumnAfter=function(e){var t,a,r,l=n.rows;if(null!=e&&"number"==typeof e?(r=e,t=document.querySelector('[data-x-index="'+r+'"]')):(t=document.querySelector(".wptb-highlighted"),r=m(t)[1]),t)if(a=t.getAttribute("style"),o-r-t.colSpan+1==1)n.addColumnEnd();else{for(var i=function(e){var t=new WPTB_Cell(c);return e&&(t.getDOMElement().setAttribute("style",e),t.getDOMElement().style.width=null,t.getDOMElement().style.height=null),t.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor"),t},s=0;s<l.length;s++)for(var u=l[s].children,b=0;b<u.length;b++)if(parseInt(u[b].dataset.xIndex)<=r){if(parseInt(u[b].dataset.xIndex)+u[b].colSpan==r+t.colSpan){var f=i(a),v=u[b].nextSibling;v?l[s].insertBefore(f.getDOMElement(),v):l[s].appendChild(f.getDOMElement());break}if(parseInt(u[b].dataset.xIndex)+u[b].colSpan>r+t.colSpan){u[b].colSpan++,u[b].rowSpan>1&&(s+=u[b].rowSpan-1);break}}else if(parseInt(u[b].dataset.xIndex)>r){var w=i(a);l[s].insertBefore(w.getDOMElement(),u[b]);break}for(var g=0;g<array.length;g++)array[g].push(0);o++,d(array),n.recalculateIndexes(),n.addColumnWidth(),n.addRowHeight(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()}},n.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),t=m(e)[1];0===t?n.addColumnStart():n.addColumnAfter(t-1)},n.addRowToTheEnd=function(){var e,t,a=n.insertRow(-1),r=document.getElementsByClassName("wptb-preview-table");if(a.classList.add("wptb-row"),r.length>0){r=r[0];for(var l=0;l<o;l++){e=new WPTB_Cell(c);var i=r.querySelector('[data-x-index="'+l+'"]');if(i){var s=i.getAttribute("style");e.getDOMElement().setAttribute("style",s),e.getDOMElement().style.height=null}a.appendChild(e.getDOMElement())}t=Array.from(array[0]),array.push(t),d(array),n.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(n),n.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()}},n.addRowToTheStart=function(){var e,t,a=n.insertRow(0),r=document.getElementsByClassName("wptb-preview-table");if(a.classList.add("wptb-row"),r.length>0){r=r[0];for(var l=0;l<o;l++){e=new WPTB_Cell(c);var i=r.querySelector('[data-x-index="'+l+'"]');if(i){var s=i.getAttribute("style");e.getDOMElement().setAttribute("style",s),e.getDOMElement().style.height=null}a.appendChild(e.getDOMElement())}t=Array.from(array[0]),array.push(t),d(array),n.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(n),n.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()}},n.addRowBefore=function(){var e,t=document.querySelector(".wptb-highlighted"),a=t.getAttribute("style"),r=m(t)[0];0===r&&(r=-1);for(var l=r-1;l>=0;l--){var o=n.rows[l].children,i=o.length;if(i>0)for(var s=0;s<i;s++)if(1==o[s].rowSpan){r=l,e=!0;break}if(e)break}-1===r?n.addRowToTheStart():n.addRowAfter(r,a)},n.addRowAfter=function(e,t){var a,r;if(null!=e&&"number"==typeof e||null!=t)a=e;else{var l=document.querySelector(".wptb-highlighted");t=l.getAttribute("style"),a=(e=m(l)[0])+l.rowSpan-1}var o=0;if(a<n.rows.length-1){for(var i=0;i<=a;i++){var s=n.rows[i].children,u=s.length;if(u>0)for(var b=0;b<u;b++){s[b].rowSpan-1+i>a&&s[b].rowSpan++}}var v=n.rows[a+1].children,w=v.length;if(w>0)for(var g=0;g<w;g++)o+=v[g].colSpan}else o=array[0].length;var y=n.insertRow(a+1);for(y.classList.add("wptb-row"),f=0;f<o;f++){var h=new WPTB_Cell(c),S=n.querySelector('[data-x-index="'+f+'"]');if(S){var T=S.getAttribute("style");h.getDOMElement().setAttribute("style",T),h.getDOMElement().style.height=null}y.appendChild(h.getDOMElement())}r=Array.from(array[0]),array.push(r),d(array),n.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(n),n.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after"),(new WPTB_TableStateSaveManager).tableStateSet()},n.isSquare=function(e){for(var t,a,n=-1,r=-1,l=-1,o=-1,i=0,s=0;s<e.length;s++)for(var c=0;c<e[s].length;c++)1==e[s][c]&&((c<r||-1==r)&&(r=c),(s<n||-1==n)&&(n=s));for(s=e.length-1;s>-1;s--)for(c=e[s].length-1;c>-1;c--)1==e[s][c]&&(c>o&&(o=c),s>l&&(l=s));for(s=n;s<l;s++)for(c=r;c<o;c++)if(0==e[s][c]||null==e[s][c])return!1;for(s=0;s<e.length;s++)for(c=0;c<e[s].length;c++)1==e[s][c]&&i++;return(t=l-n+1)*(a=o-r+1)===i&&[t,a]},n.mergeCells=function(){for(var e=n.isSquare(array),t=e[0],a=e[1],r=document.querySelector(".wptb-highlighted"),l=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),o=[],i=0;i<l.length;i++){var s=l[i].getElementsByClassName("wptb-ph-element");if(s.length>0)for(var c=s.length,d=0;d<c;d++)o.push(s[d]);l[i].parentNode.removeChild(l[i])}if(o.length>0)for(var u=0;u<o.length;u++)r.appendChild(o[u]);r.colSpan=a,r.rowSpan=t,n.recalculateIndexes(),n.reconstraction();var m=r.style.width,b=r.dataset.wptbFixedWidth;m?n.addColumnWidth(parseFloat(m,10)):b?n.addColumnWidth():n.addColumnWidth(!1,!0);var f=r.style.height,v=r.dataset.wptbFixedHeight;f?n.addRowHeight(parseFloat(f,10)):v?n.addRowHeight():n.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()},n.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,a=e.colSpan,r=e.getAttribute("style"),l=m(e)[0],o=n.rows[l],i=e.dataset.xIndex;e.rowSpan=1,e.colSpan=1;for(var s=1;s<a;s++){var d=new WPTB_Cell(c);d.getDOMElement().setAttribute("style",r),d.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?o.insertBefore(d.getDOMElement(),e.nextSibling):o.appendChild(d.getDOMElement())}if(t>1)for(var u=1;u<t;u++){var b=void 0,f=n.rows[l+u],v=f.children,w=v.length;if(w>0)for(var g=0;g<w;g++)if(Number(v[g].dataset.xIndex)>Number(i)){b=v[g];break}for(var y=0;y<a;y++){var h=new WPTB_Cell(c);h.getDOMElement().setAttribute("style",r),null!=b?f.insertBefore(h.getDOMElement(),b):f.appendChild(h.getDOMElement())}}n.recalculateIndexes(),n.reconstraction(),n.addColumnWidth(),n.addRowHeight(),WPTB_Helper.dataTitleColumnSet(n),p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()},n.findRowspannedCells=function(e){var t,a=[];if(actualPoints=function(e){for(var t=n.rows[e].getElementsByTagName("td"),a=0,r=0;r<t.length;r++)a+=t[r].colSpan;return a}(e),actualPoints===o)return[];t=o-actualPoints;for(var r=e-1;r>=0&&t;r--){var l=n.rows[r].getElementsByTagName("td");for(r=0;r<l.length;r++)l[r].rowSpan>1&&(a.push(l[r]),t-=l[r].colSpan)}return a},n.addLackingCells=function(){for(var e=[],t=0;t<n.rows.length;t++)e.push(0);for(t=0;t<n.rows.length;t++)for(var a=n.rows[t].getElementsByTagName("td"),r=0;r<a.length;r++)if(a[r].rowSpan>1)for(var l=1;l<a[r].rowSpan;l++)e[t+l]++;for(t=0;t<n.rows.length;t++){a=n.rows[t].getElementsByTagName("td");var i=0;for(r=0;r<a.length;r++)i+=a[r].colSpan;i+=e[t],difference=o-i;for(r=0;r<difference;r++){var s=new WPTB_Cell(c);n.rows[t].appendChild(s.getDOMElement())}}},n.deleteRow=function(){var e,t=document.querySelector(".wptb-highlighted"),a=t.getAttribute("style"),r=t.rowSpan,l=m(t)[0];null==r&&(r=1);for(var o=0;o<r;o++){var i=n.rows[l].children,u=n.rows[l+1],b=void 0,f=void 0,v=[];if(null!=u){f=(b=u.children).length;for(var w=0;w<i.length;w++)if(i[w].rowSpan>1){var g=new WPTB_Cell(c);g.getDOMElement().setAttribute("style",a),g.getDOMElement().colSpan=i[w].colSpan,g.getDOMElement().rowSpan=i[w].rowSpan-1;for(var y=void 0,h=0;h<f;h++)if(Number(b[h].dataset.xIndex)>Number(i[w].dataset.xIndex)){y=b[h];break}y?v.push([g,y]):v.push([g])}if(v.length>0)for(var S=0;S<v.length;S++)null!=v[S][1]?u.insertBefore(v[S][0].getDOMElement(),v[S][1]):u.appendChild(v[S][0].getDOMElement())}var T=n.rows;if(T.length>0)for(var _=0;_<l;_++){var C=T[_].children;if(C.length>0)for(var A=0;A<C.length;A++)C[A].rowSpan-1>=l-_&&C[A].rowSpan--}if(e=Array.from(array[0]),array.pop(e),d(array),n.getElementsByTagName("tbody")[0].removeChild(n.rows[l]),0==n.rows.length){WPTB_Helper.toggleTableEditMode(),s.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table";var B=document.getElementsByClassName("wptb-save-btn");B.length>0&&((B=B[0]).classList.add("wptb-save-disabled"),B.classList.remove("active"))}else n.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(n),WPTB_Helper.dataTitleColumnSet(n),n.reconstraction()}p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()},n.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,a=e.colSpan,r=0;r<a;r++){for(var l=0;l<n.rows.length;l++){var i=n.rows[l].children,c=i.length;if(c>0)for(var d=c-1;d>=0;d--){if(Number(i[d].dataset.xIndex)==Number(t)){i[d].colSpan>1?i[d].colSpan--:n.rows[l].removeChild(i[d]);break}if(Number(i[d].dataset.xIndex)<Number(t)&&Number(i[d].dataset.xIndex)+Number(i[d].colSpan-1)>=t){i[d].colSpan>1&&i[d].colSpan--;break}}}for(var u=0;u<n.rows.length;u++)null!=array[u]&&array[u].pop();if(o--,0==n.querySelectorAll("td").length){WPTB_Helper.toggleTableEditMode(),s.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table";var m=document.getElementsByClassName("wptb-save-btn");m.length>0&&((m=m[0]).classList.add("wptb-save-disabled"),m.classList.remove("active"))}else n.recalculateIndexes(),n.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(n),n.reconstraction()}p(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",n),(new WPTB_TableStateSaveManager).tableStateSet()},array=u(),p(),d(array),s.appendChild(n),n.recalculateIndexes(!0),n.reconstraction(),n.tdDefaultWidth(),s.onresize=function(){n.tdDefaultWidth()},WPTB_LeftPanel(),WPTB_Helper.wptbDocumentEventGenerate("wptb:table:generated",document),WPTB_Helper.elementStartScript(n,"table_setting"),WPTB_Helper.elementOptionsSet("table_setting",n)},WPTB_TableSettingsData={borderColor:"",setTableSetting:function(e,t){this[e]=t},getTableSetting:function(e){return this[e]}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_TableStateSaveManager=function(){this.tableStateSet=function(e){if(!(e&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var t=document.getElementsByClassName("wptb-table-setup"),a="";t.length>0?a=(t=t[0]).querySelector(".wptb-preview-table"):t="",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));var n="";if(t){for(var r=(n=t.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),l=0;l<r.length;l++)r[l].classList.remove("wptb-highlighted");for(var o=n.getElementsByClassName("wptb-directlyhovered"),i=0;i<o.length;i++)o[i].classList.remove("wptb-directlyhovered");var s=n.querySelectorAll(".mce-content-body");if(s.length>0)for(var c=0;c<s.length;c++)s[c].classList.remove("mce-content-body");var d=n.querySelectorAll("[data-mce-style]");if(d.length>0)for(var p=0;p<d.length;p++)d[p].removeAttribute("data-mce-style");var u=n.querySelectorAll("[id^=mce_]");if(u.length>0)for(var m=0;m<u.length;m++)u[m].removeAttribute("id")}var b="",f=document.head;if(f){var v=f.querySelector('style[data-wptb-td-auto-width="true"]');v&&(b=v.innerHTML)}var w="",g=document.getElementById("wptb-setup-name");if(g&&(w=g.value),window.wptbTableStateSaving.push([n,b,w]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,window.wptbTableStateSaving.length-1>0){var y=document.getElementsByClassName("wptb-undo");y.length>0&&(y=y[0]).classList.remove("wptb-undoredo-disabled")}var h=document.getElementsByClassName("wptb-redo");h.length>0&&(h=h[0]).classList.add("wptb-undoredo-disabled");var S=document.getElementsByClassName("wptb-save-btn");S.length>0&&(!(S=S[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==S.dataset.wptbTableStateNumberSave||!a?(S.classList.add("wptb-save-disabled"),S.classList.remove("active")):(S.classList.remove("wptb-save-disabled"),S.classList.add("active")))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&window.wptbTableStateSaving.length>0){if("undo"==e){if(!(window.wptbTableStateNumberShow>0))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length))return!1;window.wptbTableStateNumberShow++}var t=document.getElementsByClassName("wptb-undo");t.length>0&&(t=t[0],0==window.wptbTableStateNumberShow?t&&t.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow>0&&t&&t.classList.remove("wptb-undoredo-disabled"));var a=document.getElementsByClassName("wptb-redo");a.length>0&&(a=a[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?a&&a.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&a&&a.classList.remove("wptb-undoredo-disabled"));var n=document.getElementsByClassName("wptb-save-btn");n.length>0&&(!(n=n[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==n.dataset.wptbTableStateNumberSave?(n.classList.add("wptb-save-disabled"),n.classList.remove("active")):(n.classList.add("active"),n.classList.remove("wptb-save-disabled")));var r=document.getElementsByClassName("wptb-table-setup");if(r.length>0){if(r=r[0],window.wptbTableStateSaving[window.wptbTableStateNumberShow]){window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML"in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(r.outerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML);var l=document.querySelector(".wptb-table-setup");l&&0==l.children.length&&(n.classList.add("wptb-save-disabled"),n.classList.remove("active"));var o=document.head;if(o){var i=o.querySelector('style[data-wptb-td-auto-width="true"]');if(i&&o.removeChild(i),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]){var s=document.createElement("style");s.setAttribute("data-wptb-td-auto-width",!0),s.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],o.appendChild(s)}}var c=document.getElementById("wptb-setup-name");void 0!==window.wptbTableStateSaving[window.wptbTableStateNumberShow][2]&&c&&(c.value=window.wptbTableStateSaving[window.wptbTableStateNumberShow][2])}var d=document.getElementsByTagName("body");d.length>0&&(d=d[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel();var p=document.getElementById("wptb-left-scroll-panel-cell-settings");p&&p.classList.remove("visible")}}},this.tableStateClear=function(){delete window.wptbTableStateSaving,delete window.wptbTableStateNumberShow;var e=document.getElementsByClassName("wptb-save-btn");e.length>0&&(e=e[0]).removeAttribute("data-wptb-table-state-number-save");var t=document.getElementsByClassName("wptb-undo");t.length>0&&(t=t[0]).classList.add("wptb-undoredo-disabled");var a=document.getElementsByClassName("wptb-redo");a.length>0&&(a=a[0]).classList.add("wptb-undoredo-disabled")}};document.addEventListener("wptb:table:generated",(function(){Array.from(document.querySelectorAll(".wptb-left-panel .wptb-upsells-anchor")).map((function(e){e&&(e.style.display="unset")}))}));var WPTB_innerElementSet=function e(t){t.ondragenter=function(e){-1==e.dataTransfer.types.indexOf("wptbelement")&&-1==e.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,e),t.classList.add("wptb-ondragenter"))},t.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},t.ondragleave=function(e){WPTB_DropHandle(this,e,!0)},t.ondrop=function(t){var a,n;if(this.classList.remove("wptb-ondragenter"),t.preventDefault(),t.stopPropagation(),t.dataTransfer.getData("wptbElement")||t.dataTransfer.getData("node")){var r,l;if(document.getElementsByClassName("wptb-drop-handle").length>0&&(r=document.getElementsByClassName("wptb-drop-handle")[0]),document.getElementsByClassName("wptb-drop-border-marker").length>0&&(l=document.getElementsByClassName("wptb-drop-border-marker")[0]),t.dataTransfer.getData("wptbElement")?a=(a=WPTB_Helper.newElementProxy(t.dataTransfer.getData("wptbElement"))).getDOMElement():(n=t.dataTransfer.getData("node"),a=document.getElementsByClassName(n)[0]),"td_relative"===WPTB_Helper.getDragRelativeType()){WPTB_DropHandle(this,t,!0),WPTB_Helper.getParentOfType("td",t.target).appendChild(a),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",a)}else{if("block"!=r.style.display)return;var o;if("Drop Here"==r.dataset.text)(o=r.getDOMParentElement()).appendChild(a),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",a);else{var i=r.getDOMParentElement();if(o=i.parentNode,"Above Element"==r.dataset.text)o.insertBefore(a,i),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",a);else if("Below Element"==r.dataset.text){var s=i.nextSibling;o.insertBefore(a,s),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",a)}}var c=o.parentNode;if(WPTB_Helper.rowIsTop(c)){var d=WPTB_Helper.findAncestor(c,"wptb-preview-table");d.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(d)}a.className.match(/wptb-element-(.+)-(\d+)/i)[1];t.dataTransfer.getData("wptbElement")}if(r&&(r.style.display="none",l.style.display="none"),e(a),!a.classList.contains("wptb-image-container")||a.classList.contains("wptb-moving-mode"))a.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet();return!0}},t.onmouseover=function(e){t.classList.remove("wptb-ondragenter")}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var applyGenericItemSettings=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.getDOMElement();if(r.classList.contains("wptb-ph-element")){if(null==t||1==n){for(var l=document.getElementsByClassName("wptb-ph-element"),o=[],i=0;i<l.length;i++){var s=new RegExp("wptb-element-"+e.kind+"-(\\d+)","i"),c=l[i].className.match(s);c&&o.push(c[1])}if(o.length>0){var d=Math.max.apply(Math,o);a=d+1}else a=1;if(n)for(var p=_toConsumableArray(r.attributes),u=0;u<p.length;u++)if(p[u]&&"object"===_typeof(p[u])&&p[u].nodeName){var m=new RegExp("data-wptb-el-"+e.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),b=p[u].nodeName.match(m);if(b&&Array.isArray(b)){var f=p[u].nodeName.replace(e.kind+"-"+b[1],e.kind+"-"+a),v=p[u].nodeValue;r.removeAttribute(p[u].nodeName),r.setAttribute(f,v)}}}else if(t&&!n){var w=t.split("-");a=w[w.length-1]}var g=r.className.match(/wptb-element-(.+)-(\d+)/i);g&&r.classList.remove(g[0]),r.classList.contains("wptb-ph-element")||r.classList.add("wptb-ph-element"),r.classList.contains("wptb-element-"+e.kind+"-"+a)||r.classList.add("wptb-element-"+e.kind+"-"+a),WPTB_Helper.elementStartScript(e.getDOMElement()),new WPTB_ElementOptions(e,a,t),document.counter.increment(e.kind)}r.onmouseenter=function(e){if(!e.target.classList.contains("wptb-moving-mode")){var t=new WPTB_ActionsField;t.addActionField(1,r),t.setParameters(r),r.classList.remove("wptb-ondragenter")}},r.onmouseleave=function(e){(new WPTB_ActionsField).leaveFromField(e,r)}};
//# sourceMappingURL=admin.js.map
