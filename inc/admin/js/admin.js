var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var applyGenericItemSettings=function(e,t){var a,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e.getDOMElement();if(r.classList.contains("wptb-ph-element")){if(null==t||1==n){for(var l=document.getElementsByClassName("wptb-ph-element"),o=[],s=0;s<l.length;s++){var i=new RegExp("wptb-element-"+e.kind+"-(\\d+)","i"),d=l[s].className.match(i);d&&o.push(d[1])}if(0<o.length)a=Math.max.apply(Math,o)+1;else a=1;if(n)for(var c=[].concat(_toConsumableArray(r.attributes)),p=0;p<c.length;p++)if(c[p]&&"object"===_typeof(c[p])&&c[p].nodeName){var m=new RegExp("data-wptb-el-"+e.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),u=c[p].nodeName.match(m);if(u&&Array.isArray(u)){var b=c[p].nodeName.replace(e.kind+"-"+u[1],e.kind+"-"+a),v=c[p].nodeValue;r.removeAttribute(c[p].nodeName),r.setAttribute(b,v)}}}else if(t&&!n){var w=t.split("-");a=w[w.length-1]}var g=r.className.match(/wptb-element-(.+)-(\d+)/i);g&&r.classList.remove(g[0]),r.classList.contains("wptb-ph-element")||r.classList.add("wptb-ph-element"),r.classList.contains("wptb-element-"+e.kind+"-"+a)||r.classList.add("wptb-element-"+e.kind+"-"+a),WPTB_Helper.elementStartScript(e.getDOMElement()),new WPTB_ElementOptions(e,a,t),document.counter.increment(e.kind)}r.onmouseenter=function(e){if(!e.target.classList.contains("wptb-moving-mode")){var t=new WPTB_ActionsField;t.addActionField(1,r),t.setParameters(r),r.classList.remove("wptb-ondragenter")}},r.onmouseleave=function(e){(new WPTB_ActionsField).leaveFromField(e,r)}},WPTB_ActionsField=(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},function i(){var c=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(e,t){var a=document.getElementsByTagName("body")[0],n=document.getElementsByClassName("wptb-actions");if(0!=n.length){var r=n[0].activeElem;for(r&&r.classList.remove("wptb-directlyhovered");0!=n.length;)n[0].parentNode.removeChild(n[0])}if(1==e){var l=void 0,o=void 0;if(l=document.createElement("span"),o=document.createElement("span"),(n=document.createElement("div")).classList.add("wptb-actions"),l.classList.add("dashicons","dashicons-trash","wptb-delete-action"),o.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),n.appendChild(o),n.appendChild(l),a.appendChild(n),n.activeElem=t,n.type=1,l.onclick=function(e){var t=e.target.parentNode.activeElem,a=t.parentNode;t.className.match(/wptb-element-(.+)-(\d+)/i);if(t&&a.removeChild(t),t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.hasOwnProperty("kind")&&"text"==t.kind){var n=a.parentNode;if(WPTB_Helper.rowIsTop(n)){var r=WPTB_Helper.findAncestor(n,"wptb-preview-table");r.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(r)}}(new i).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.wptbDocumentEventGenerate("element:removed:dom",document,t)},o.onclick=function(e){var t,a=void 0,n=void 0,r=e.target.parentNode.activeElem,l=r.parentNode;if((t=r.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)){n=t[1];var o={};o.kind=n,o.elemProt=r,o.tinyMceClear=!0,(a=new WPTB_ElementObject(o)).getDOMElement().classList.remove("edit-active"),l.insertBefore(a.getDOMElement(),r.nextSibling)}else{a={};var s=r.cloneNode(!0);s.classList.remove("wptb-directlyhovered"),a.getDOMElement=function(){return s},applyGenericItemSettings(a),l.insertBefore(a.getDOMElement(),r.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",r,a.getDOMElement())}WPTB_innerElementSet(a.getDOMElement()),new i(1,r).setParameters(r),(new WPTB_TableStateSaveManager).tableStateSet()},t.classList.contains("wptb-ph-element")){var s=void 0;(s=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),s.draggable=!0,n.appendChild(s),s.ondragstart=function(e){var t,a=wp.template("wptb-element-icons-directories")({}),n=JSON.parse(a),r=void 0,l=e.target.parentNode.activeElem,o=void 0;if((t=l.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)){o=t[1],l.classList.add("wptb-moving-mode"),n&&"object"===(void 0===n?"undefined":_typeof(n))&&n[o]&&(r=WPTB_Helper.getElementIcon(n[o])),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(r,0,0),e.dataTransfer.setData("node","wptb-element-"+t[1]+"-"+t[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+t[1]+"-"+t[2]),e.dataTransfer.setData("wptbElIndic-"+t[1],"wptbElIndic-"+t[1]);var s=e.target.parentNode.activeElem;if("text"==s.kind){var i=s.parentNode.parentNode;if(WPTB_Helper.rowIsTop(i)){var d=WPTB_Helper.findAncestor(i,"wptb-preview-table");d.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(d)}}}else c.style.display="none";c.actionsHide()},s.ondragend=function(e){WPTB_Helper.elementDragEndClear()}}n.style.display="flex",c.wptbActions=n}WPTB_Helper.wptbDocumentEventGenerate("wptb:actionfield:generated",document)},this.setParameters=function(t){if(!c.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length?c.wptbActions=e[0]:c.wptbActions=!1}if(c.wptbActions&&c.wptbActions.classList.contains("wptb-actions")){c.wptbActions.style.display="flex";var a=t.getBoundingClientRect(),n=document.getElementsByClassName("wptb-container")[0];c.wptbActions.style.top=parseFloat(a.top)-15+"px",c.wptbActions.style.left=parseFloat(a.right)-parseFloat(c.wptbActions.clientWidth)+1+"px",c.wptbActions.style.display="flex",t.classList.add("wptb-directlyhovered"),n.onscroll=function(){var e=t.getBoundingClientRect();c.wptbActions.style.top=parseFloat(e.top)-15+"px"}}},this.leaveFromField=function(e,t,a){if(!c.wptbActions){var n=document.getElementsByClassName("wptb-actions");0<n.length?c.wptbActions=n[0]:c.wptbActions=!1}if(c.wptbActions){if(e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-actions")||e.relatedTarget.classList.contains("wptb-move-action")||e.relatedTarget.classList.contains("wptb-duplicate-action")||e.relatedTarget.classList.contains("wptb-delete-action")||e.relatedTarget.classList.contains("wptb-prebuilt-mark-action")))return c.wptbActions||(c.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void(c.wptbActions.onmouseleave=function(e){null!=e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&e.relatedTarget!=c.wptbActions.activeElem&&(WPTB_Helper.findAncestor(e.relatedTarget,"wptb-directlyhovered"),c.wptbActions.activeElem),(new i).leaveFromField(e,e.relatedTarget.parentNode.parentNode),e.target.activeElem.classList.remove("wptb-directlyhovered")});t.classList.remove("wptb-directlyhovered"),c.wptbActions.style.display="none",e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&(c.addActionField(1,e.relatedTarget.parentNode),c.setParameters(e.relatedTarget.parentNode))}},this.actionsRemove=function(){if(!c.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(c.wptbActions=e[0])}c.wptbActions&&c.wptbActions.parentNode.removeChild(c.wptbActions)},this.actionsHide=function(){if(!c.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(c.wptbActions=e[0])}c.wptbActions&&(c.wptbActions.style.opacity=0)}});!function(){var e=window.location.href;new RegExp("[?&]page=wptb-builder").exec(e)&&document.addEventListener("DOMContentLoaded",function(){var r=WPTB_Helper.detectMode();if(r){var l=new XMLHttpRequest,e=ajaxurl+"?action=get_table&id="+r;l.open("GET",e,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onreadystatechange=function(e){if(4!=this.readyState||200!=this.status);else{var t=JSON.parse(l.responseText);if(document.getElementById("wptb-setup-name").value=t[0],t[1]){var a=document.getElementsByClassName("wptb-table-setup")[0];a.appendChild(WPTB_Parser(t[1])),document.getElementsByTagName("body")[0],WPTB_Table();var n=document.querySelector(".wptb-preview-table");n&&(n.className.match(/wptb-element-((.+-)\d+)/i)||n.classList.add("wptb-element-main-table_setting-"+r),n.dataset.wptbTableContainerMaxWidth&&(a.style.maxWidth=n.dataset.wptbTableContainerMaxWidth+"px",n.tdDefaultWidth())),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()}else document.getElementsByClassName("wptb-table-generator")[0].style.display="table"}},l.send(null)}else(new WPTB_TableStateSaveManager).tableStateSet();document.counter=new ElementCounters,document.select=new MultipleSelect;WPTB_Initializer();settings=WPTB_Settings()})}();var WPTB_Cell=function(e,n){if(!n){(n=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px";var t=jQuery("#wptb-table-inner-border-number").val();""!=t&&0!=parseInt(t)&&(n.style.border=t+"px solid "+jQuery("#wptb-table-border-color").val()),n.classList.add("wptb-droppable","wptb-cell")}n.draggable=!1,e&&(n.onclick=e),n.ondblclick=function(e){e.stopPropagation();var t=document.querySelector(".wptb-table-setup");if(t&&!t.classList.contains("wptb-preview-table-manage-cells")&&("0"!==e.target.dataset.yIndex||"1"!==t.dataset.wptbSortableTable)&&e.target==e.currentTarget){WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",e.target);var a=WPTB_Helper.newElementProxy("text");a=a.getDOMElement(),n.appendChild(a),WPTB_innerElementSet(a)}},WPTB_innerElementSet(n),WPTB_Helper.elementStartScript(n,"table_cell_setting");var o=n.getElementsByClassName("wptb-ph-element");if(0<o.length)for(var a=function(r){o[r].getDOMElement=function(){return o[r]},WPTB_innerElementSet(o[r]);var l=o[r].className.match(/wptb-element-((.+-)\d+)/i);l&&Array.isArray(l)&&function(){var e=l[1].split("-");o[r].kind=e[0],applyGenericItemSettings(o[r],l[1]);var a=o[r].getElementsByClassName("wptb-in-element");if(0<a.length)for(var t=function(e){var t={getDOMElement:function(){return a[e]}};applyGenericItemSettings(t)},n=0;n<a.length;n++)t(n)}()},r=0;r<o.length;r++)a(r);return this.getDOMElement=function(){return n},this.setCoords=function(e,t){var a=this.getDOMElement();a.dataset.yIndex=e,a.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},n.getCellDimensions=function(){var e=window.getComputedStyle(this,null),t=e.getPropertyValue("padding-left"),a=e.getPropertyValue("padding-right"),n=e.getPropertyValue("border-left-width"),r=e.getPropertyValue("border-right-width"),l=e.getPropertyValue("padding-top"),o=e.getPropertyValue("padding-bottom"),s=e.getPropertyValue("border-top-width"),i=e.getPropertyValue("border-bottom-width"),d=parseInt(this.offsetWidth,10)-parseInt(t,10)-parseInt(a,10),c=parseInt(this.offsetHeight,10)-parseInt(l,10)-parseInt(o,10),p=WPTB_Helper.findAncestor(this,"wptb-preview-table");if(p)if("collapse"===p.style.borderCollapse){d=d-parseInt(n,10)/2-parseInt(r,10)/2,c=c-parseInt(s,10)/2-parseInt(i,10)/2;var m=window.getComputedStyle(p,null),u=m.getPropertyValue("border-left-width"),b=m.getPropertyValue("border-right-width"),v=m.getPropertyValue("border-top-width"),w=m.getPropertyValue("border-bottom-width"),g=this.parentNode;if(g&&"tr"===g.nodeName.toLowerCase()){g.firstChild&&g.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(u,10)>parseInt(n,10)&&(d+=-(parseInt(u,10)-parseInt(n,10))/2),g.lastChild&&g.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(b,10)>parseInt(r,10)&&(d+=-(parseInt(b,10)-parseInt(r,10))/2);var f=g.parentNode;f&&"body"===f.nodeName.toLowerCase()&&(f.firstChild&&f.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(v,10)>parseInt(s,10)&&(c+=(parseInt(v,10)-parseInt(s,10))/2),f.lastChild&&f.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(w,10)>parseInt(i,10)&&(c+=(parseInt(w,10)-parseInt(i,10))/2))}}else"separate"===p.style.borderCollapse&&(d=d-parseInt(n,10)-parseInt(r,10),c=c-parseInt(s,10)-parseInt(i,10));return{width:parseInt(d),height:parseInt(c)}},this};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var a=0;a<e;a++)for(var n=t.rows[a].children,r=0;r<n.length;r++)if(1<n[r].rowSpan&&n[r].rowSpan>e-a){var l=n[r].rowSpan-e+a;n[r].rowSpan=e-a,n[r].dataset.sameCellBeforeDivision||(n[r].dataset.sameCellBeforeDivision="r"+a+"c"+r);var o=void 0;o=t.hasOwnProperty("wptbCell")?(o=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td");var s=n[r].getAttribute("style");o.setAttribute("style",s),o.colSpan=n[r].colSpan,o.rowSpan=l,o.dataset.sameCellBeforeDivision=n[r].dataset.sameCellBeforeDivision;for(var i=n[r].dataset.xIndex,d=parseInt(i)+parseInt(n[r].colSpan),c=void 0;!c&&d<t.maxCols;)c=t.rows[e].querySelector('[data-x-index="'+d+'"]'),d++;t.rows[e].insertBefore(o,c),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=[].concat(_toConsumableArray(e.getElementsByTagName("td"))),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var n=t[a].dataset.sameCellBeforeDivision,r=e.querySelectorAll('[data-same-cell-before-division="'+n+'"]'),l=0;l<r.length;l++)if(r[l]&&r[l+1]&&r[l].parentNode&&r[l+1].parentNode&&!r[l].parentNode.classList.contains("wptb-row-moving")&&!r[l+1].parentNode.classList.contains("wptb-row-moving")&&r[l+1].dataset.yIndex==parseInt(r[l].dataset.yIndex)+parseInt(r[l].rowSpan)){r[l].rowSpan+=r[l+1].rowSpan;for(var o=[].concat(_toConsumableArray(r[l+1].children)),s=0;s<o.length;s++)r[l].appendChild(o[s]);r[l+1].parentNode.removeChild(r[l+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var a=0;a<t.rows.length;a++){if(e<t.maxCols&&0!=e&&!t.rows[a].querySelector('[data-x-index="'+e+'"]'))for(var n=t.rows[a].children,r=void 0,l=n.length,o=void 0,s=void 0,i=void 0,d=void 0,c=0;c<l;c++)if(1<n[c].colSpan&&parseInt(n[c].dataset.xIndex)<e&&parseInt(n[c].dataset.xIndex)+parseInt(n[c].colSpan)>e){r=t.hasOwnProperty("wptbCell")?(r=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),s=n[c].rowSpan,i=n[c].colSpan,n[c].colSpan=e-n[c].dataset.xIndex,d=i-n[c].colSpan,n[c].dataset.sameCellBeforeDivision||(n[c].dataset.sameCellBeforeDivision="r"+a+"c"+c);var p=n[c].getAttribute("style");r.setAttribute("style",p);var m=t.querySelector('[data-x-index="'+e+'"]');m&&(r.style.width=m.style.width);var u=t.querySelector('[data-y-index="'+a+'"]');u&&(r.style.height=u.style.height),o=n[c+1]?n[c+1]:null,t.rows[a].insertBefore(r,o),r.colSpan=d,r.rowSpan=s,r.dataset.sameCellBeforeDivision=n[c].dataset.sameCellBeforeDivision,a+=s-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=[].concat(_toConsumableArray(e.getElementsByTagName("td"))),a=0;a<t.length;a++)if(t[a].hasAttribute("data-same-cell-before-division"))for(var n=t[a].dataset.sameCellBeforeDivision,r=[].concat(_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+n+'"]'))),l=null,o=0;o<r.length;o++)if(r[o]&&r[o+1]&&!r[o].classList.contains("wptb-column-moving")&&!r[o+1].classList.contains("wptb-column-moving")&&r[o+1].dataset.xIndex==parseInt(r[o].dataset.xIndex)+parseInt(r[o].colSpan)){null==l&&(l=o),r[l].colSpan+=r[o+1].colSpan;for(var s=[].concat(_toConsumableArray(r[o+1].children)),i=0;i<s.length;i++)r[l].appendChild(s[i]);r[o+1].parentNode.removeChild(r[o+1])}WPTB_RecalculateIndexes(e)}}},WPTB_DropHandle=function(s,e){var t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=void 0,d=void 0,a=void 0,n=void 0,r=void 0,l=void 0;function o(e){return e+"px"}if("td_relative"===WPTB_Helper.getDragRelativeType()){var c=document.querySelector(".wptb-cell-related-drop-handle");if(t&&c)return void(c.style.display="none");if(null===c){var p=document.createRange();p.setStart(document.body,0);var m=p.createContextualFragment('<div class="wptb-cell-related-drop-handle">Add to cell</div>').children[0];document.body.appendChild(m),c=m.children[0]}var u=WPTB_Helper.getParentOfType("td",s).getBoundingClientRect(),b=u.top,v=u.left,w=u.width,g=u.height;if(!c)return;return c.style.display="flex",c.style.top=o(b),c.style.width=o(w),c.style.height=o(g),void(c.style.left=o(v))}if(0==document.getElementsByClassName("wptb-drop-handle").length){(i=document.createElement("div")).classList.add("wptb-drop-handle"),(d=document.createElement("div")).classList.add("wptb-drop-border-marker"),a=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),a.classList.add("wptb-drop-border-marker-top"),n.classList.add("wptb-drop-border-marker-right"),r.classList.add("wptb-drop-border-marker-bottom"),l.classList.add("wptb-drop-border-marker-left"),d.appendChild(a),d.appendChild(n),d.appendChild(r),d.appendChild(l);var f=document.getElementsByTagName("body");0<f.length&&(f[0].appendChild(i),f[0].appendChild(d)),i.ondragenter=function(){if(e.target.classList.contains("wptb-empty"))return e.preventDefault(),!1},i.ondragover=function(e){e.preventDefault()},i.ondragleave=function(){},i.ondrop=function(e){e.preventDefault();var t=void 0;e.dataTransfer.getData("wptbElement")?t=(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():((t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),t.classList.remove("wptb-moving-into-same-elem"),t.wptbMovingMode=1);var a=void 0;if("Drop Here"==i.dataset.text)"td"==(s=i.getDOMParentElement()).nodeName.toLowerCase()&&((a=i.getDOMParentElement()).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t));else{var n=i.getDOMParentElement();if(a=n.parentNode,"Above Element"==i.dataset.text)a.insertBefore(t,n),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t);else if("Below Element"==i.dataset.text){var r=n.nextSibling;a.insertBefore(t,r),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)}}var l=a.parentNode;if(WPTB_Helper.rowIsTop(l)){var o=WPTB_Helper.findAncestor(l,"wptb-preview-table");o.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(o)}(i.style.display="none",d.style.display="none",WPTB_innerElementSet(t),t.classList.contains("wptb-image-container")&&1!=t.wptbMovingMode)||((new WPTB_TableStateSaveManager).tableStateSet(),t.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){i.style.display="none",d.style.display="none"}}else i=document.getElementsByClassName("wptb-drop-handle")[0],d=document.getElementsByClassName("wptb-drop-border-marker")[0];if(!(s&&"td"==s.nodeName.toLowerCase()&&0!=s.getElementsByClassName("wptb-ph-element").length||s&&"td"==s.nodeName.toLowerCase()&&s.classList.contains("wptb-empty"))){var h=void 0;if("td"==s.localName?h=s.parentNode:"div"==s.localName&&s.classList.contains("wptb-ph-element")&&(h=s.parentNode.parentNode),WPTB_Helper.rowIsTop(h))if(WPTB_Helper.findAncestor(h,"wptb-preview-table").classList.contains("wptb-table-preview-head")){for(var y=e.dataTransfer.types,S=!1,T=0;T<y.length;T++){var C=y[T].match(/wptbelindic-([a-z]+)/i);if(C&&"text"!=C[1]){S=!0;break}}if(S)return}i.style.width=s.offsetWidth+"px";var B=s.offsetHeight,E=s.getBoundingClientRect(),_=parseFloat(E.left),x=void 0;if(i.style.left=_+"px",-1!=e.dataTransfer.types.indexOf("wptb-moving-mode")){var A=document.getElementsByClassName("wptb-moving-mode")[0];s==A?(i.classList.add("wptb-moving-into-same-elem"),d.classList.add("wptb-moving-into-same-elem")):(i.classList.remove("wptb-moving-into-same-elem"),d.classList.remove("wptb-moving-into-same-elem"))}if(i.getDOMParentElement=function(){return s},i.style.display="block",d.style.display="block","td"!=s.nodeName.toLowerCase()){var P=null==e.offsetY?e.layerY:e.offsetY;x=parseFloat(E.top)-parseFloat(11),i.dataset.text="Above Element",B/2<P&&(x=parseFloat(E.top)+B-1,i.dataset.text="Below Element")}else i.dataset.text="Drop Here",x=parseFloat(E.top)+B/2-5;i.style.top=x+"px",d.style.top=E.top+"px",d.style.left=E.left+"px",(a=d.querySelector(".wptb-drop-border-marker-top")).style.width=parseFloat(s.offsetWidth)-parseFloat(1)+"px",(n=d.querySelector(".wptb-drop-border-marker-right")).style.height=parseFloat(E.bottom)-parseFloat(E.top)-1+"px",n.style.left=a.style.width,(r=d.querySelector(".wptb-drop-border-marker-bottom")).style.width=a.style.width,r.style.top=n.style.height,(l=d.querySelector(".wptb-drop-border-marker-left")).style.height=n.style.height}},ElementCounters=function(){var t=[];return t.text=0,t.image=0,t.list=0,t.button=0,this.increment=function(e){e in t&&t[e]++},this.nextIndex=function(e){if(e in t)return t[e]+1},this},WPTB_ElementObject=function(e){var t=void 0,a=void 0,n=void 0;if(e.elemProt){(t=e.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered");var r=e.elemProt.className.match(/wptb-element-((.+-)\d+)/i);r&&Array.isArray(r)&&(a=r[1]),n=!0,e.tinyMceClear&&(t=WPTB_Helper.elementClearFromTinyMce(t))}else{a=void 0,n=!1,(t=document.createElement("div")).classList.add("wptb-"+e.kind+"-container","wptb-ph-element");var l="wptb-"+e.kind+"-content",o=wp.template(l);e.node=t;var s=o(e);s=s.replace(/\r|\n|\t/g,"").trim(),t.innerHTML=s}var i=t.querySelectorAll(".wptb-in-element");if(0<i.length)for(var d=function(e){var t={getDOMElement:function(){return i[e]}};applyGenericItemSettings(t)},c=0;c<i.length;c++)d(c);return window.addEventListener("item:onmouseenter",function(e){},!1),this.kind=e.kind,this.getDOMElement=function(){return t},applyGenericItemSettings(this,a,n),this},WPTB_ElementOptions=function(e,t,a){e.getDOMElement().addEventListener("click",function(){WPTB_Helper.elementOptionsSet(e.kind,this)},{capture:!0})},WPTB_HeaderToolbox=function(e){var a=this;this.wrapperQuery=e,this.element=document.querySelector(e),this.topMargin=2;return{init:function(){var e;(e=a.element.querySelector('[data-button-type="table_settings_menu"]'))&&e.addEventListener("click",function(){WPTB_Helper.activateSection("manage_cells")}),document.addEventListener("wptb:table:generated",function(){a.element.style.display="unset";var e=a.element.getBoundingClientRect().width;a.element.style.left="calc( 50% - "+e/2+"px)",document.addEventListener("wptbSectionChanged",function(e){var t=e.detail;!function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=a.element.getBoundingClientRect().height;e&&(t=0),a.element.style.top="calc( 100% - "+(t+a.topMargin)+"px)"}("manage_cells"!==t&&"table_responsive_menu"!==t&&"cell_settings"!==t)})})}}};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Helper={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":null},rgbToHex:function(e){if(e){if(WPTB_Helper.isHex(e))return e;var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?((?:[0-9]*[.])?[0-9]+)[\s+]?\)/i);return t&&5===t.length?"#"+("0"+Math.round(255*parseFloat(t[4],10)).toString(16).toUpperCase()).slice(-2)+("0"+parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)+("0"+parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)+("0"+parseInt(t[3],10).toString(16).toUpperCase()).slice(-2):(t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)+("0"+parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)+("0"+parseInt(t[3],10).toString(16).toUpperCase()).slice(-2):""}return""},isHex:function(e){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}$").test(e)},getElementIcon:function(e){location.protocol,location.hostname;var t=document.createElement("img");return t.src=e,t},elementDragEndClear:function(){var e=document.getElementsByClassName("wptb-moving-mode");if(0<e.length)for(var t=0;t<e.length;t++)e[t].classList.remove("wptb-moving-mode");var a=document.getElementsByClassName("wptb-drop-handle");if(0<a.length)for(var n=0;n<a.length;n++)a[n].style.display="none";var r=document.getElementsByClassName("wptb-drop-border-marker");if(0<r.length)for(var l=0;l<r.length;l++)r[l].style.display="none"},linkHttpCheckChange:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){if(e.match(/^(javascript:)(.+)$/))return e;if(e.match(/^\/([\S]+)$/)){if(t){var a=document.location.origin;return a.match(/^(.+)\/$/)&&(a=a.slice(-1)),""+a+e}return e}if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))return e;var n=e.split("/"),r=void 0;return Array.isArray(n)&&0<n.length&&(r=n[n.length-1]),document.location.protocol+"//"+r}return""},dataTitleColumnSet:function(e){},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},rowIsTop:function(e){return e.parentNode.children[0]==e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){if("external"==e.originalEvent.type)(new WPTB_TableStateSaveManager).tableStateSet();else if(WPTB_Helper.findAncestor(e.target,"wp-picker-container")&&("square"==e.originalEvent.type||"strip"==e.originalEvent.type)){var t=document.getElementsByTagName("body")[0];t.removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),t.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)}},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(e,t){var a=void 0;t?(a=[document.getElementById(e)]).length=1:a=document.getElementsByClassName(e);for(var n=0;n<a.length;n++){var r=WPTB_Helper.findAncestor(a[n],"wp-picker-container");if(r){var l=r.parentNode;l.removeChild(r);var o=document.createElement("input");t?o.setAttribute("id",e):o.classList.add("wptb-element-property",e),o.value="",l.appendChild(o)}}},detectMode:function(){var e=window.location.href,t=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!t&&(t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"")},getTableId:function(){var e=WPTB_Helper.detectMode();return e||(e="startedid-0"),e},getColumnWidth:function(e,t){for(var a=t.dataset.xIndex,n=e.querySelectorAll('[data-x-index="'+a+'"]'),r=t.getCellDimensions().width,l=0;l<n.length;l++)r>n[l].getCellDimensions().width&&(r=n[l].getCellDimensions().width);return r},getRowHeight:function(e,t){for(var a=t.dataset.yIndex,n=e.querySelectorAll('[data-y-index="'+a+'"]'),r=t.getCellDimensions().height,l=0;l<n.length;l++)r>n[l].getCellDimensions().height&&(r=n[l].getCellDimensions().height);return r},newElementProxy:function(e){if(e)return new WPTB_ElementObject({kind:e})},wpColorPickerChange:function(e,t){var a=void 0;a=t?t.color.toString():"";var n,r,l,o=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0];r=(n=o.dataset.element.match(/wptb-options-(.+)-(\d+)/i))[1],l=n[2];var s=document.getElementsByClassName("wptb-element-"+r+"-"+l)[0];if("button"==r)"button-text-color"==o.dataset.type?s.getElementsByClassName("wptb-button")[0].style.color=a:s.getElementsByClassName("wptb-button")[0].style.backgroundColor=a;else if("list"==r){var i=s.querySelectorAll("p");if(0<i.length)for(var d=0;d<i.length;d++)i[d].style.color=a}else if("star_rating"==r){if("star-color"==o.dataset.type)for(var c=s.querySelectorAll("li"),p=0;p<c.length;p++)for(var m=c[p].getElementsByTagName("span"),u=0;u<m.length;u++)m[u].style.fill=a;else if("numeral-rating-color"==o.dataset.type){s.querySelector(".wptb-number-rating").style.color=a}}else s.style.color=a},numberImputSize:function(e,t,a){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;parseInt(e,10)>parseInt(a,10)&&(this.value=a),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wptbDocumentEventGenerate:function(e,t,a){if(e&&t){a||(a=!0);var n=new CustomEvent(e,{detail:a,bubbles:!0});t.dispatchEvent(n)}},elementStartScript:function(e,t){if(!t){var a=e.className.match(/wptb-element-(.+)-(\d+)/i);a&&Array.isArray(a)&&(t=a[1])}t&&t in WPTB_ElementsScriptsLauncher&&WPTB_ElementsScriptsLauncher[t](e)},deleteEventHandlers:function(e){if(e){jQuery(e).off();var t=e.children;if(t)for(var a=0;a<t.length;a++)WPTB_Helper.deleteEventHandlers(t[a])}},replaceAll:function(e,t,a){return e.split(t).join(a)},elementClearFromTinyMce:function(e){var t=e.querySelectorAll(".mce-content-body");if(0<t.length)for(var a=0;a<t.length;a++)t[a].classList.remove("mce-content-body");var n=e.querySelectorAll("[data-mce-style]");if(0<n.length)for(var r=0;r<n.length;r++)n[r].removeAttribute("data-mce-style");var l=e.querySelectorAll(".mce-edit-focus");if(0<l.length)for(var o=0;o<l.length;o++)l[o].classList.remove("mce-edit-focus");var s=e.querySelectorAll("[contenteditable]");if(0<s.length)for(var i=0;i<s.length;i++)s[i].removeAttribute("contenteditable");var d=e.querySelectorAll("[spellcheck]");if(0<d.length)for(var c=0;c<d.length;c++)d[c].removeAttribute("spellcheck");var p=e.querySelectorAll("[id^=mce_]");if(0<p.length)for(var m=0;m<p.length;m++)p[m].removeAttribute("id");return e},elementOptionContainerCustomClassSet:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option");a&&a.classList.add(t)}},elementOptionContainerAdditionalStyles:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option"),n=t.split(";");if(a&&n){var r=function(e,t){e&&(containerStyleStrArr=e.split(":"),containerStyleStrArr&&Array.isArray(containerStyleStrArr)&&(t.style[containerStyleStrArr[0]]=containerStyleStrArr[1]))};if(n&&Array.isArray(n))for(var l=0;l<n.length;l++)n[l]&&r(n[l],a);else r(n,a)}}},controlsInclude:function(s,i){var d=2<arguments.length&&void 0!==arguments[2]&&arguments[2];s&&"object"===(void 0===s?"undefined":_typeof(s))&&"function"==typeof i&&s.addEventListener("element:controls:active",function(){s.hasOwnProperty("controlConnectFunctionsName")&&Array.isArray(s.controlConnectFunctionsName)&&-1!=s.controlConnectFunctionsName.indexOf(i.name)||function(){var e=s.className.match(/wptb-element-(.+)-(\d+)/i),a=void 0;if(e&&Array.isArray(e)&&(a=e[1]),a){var t=s.optionsGroupIds;if(t&&Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n],l=document.getElementById(r).querySelectorAll(".wptb-element-property");(l=[].concat(_toConsumableArray(l))).map(function(e){var t=new RegExp("wptb-el-"+a+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),l=e.className.match(t);if(l&&Array.isArray(l)){var o=l[0];s.addEventListener("wptb-control:"+o,function(e){var t={},a=l[2],n=document.getElementsByClassName(o);if(0<n.length&&a){var r=WPTB_Helper.targetControlValueGet(n);t[a]=d?{targetValue:r,eventValue:e.detail.value}:r}i(t,s)},!1)}})}s.controlConnectFunctionsName||Array.isArray(s.controlConnectFunctionsName)||(s.controlConnectFunctionsName=[]),s.controlConnectFunctionsName.push(i.name)}}()},!1)},oneControlInclude:function(n,r,e){if(!n||"object"!==(void 0===n?"undefined":_typeof(n))||"function"!=typeof r||"string"!=typeof e)return!1;var t=n.className.match(/wptb-element-((.+-)\d+)/i);if(t&&Array.isArray(t)){var a="wptb-"+t[1].split("-")[0]+"-control-stack",l=wp.template(a)({container:"."+t[0]}),o=JSON.parse(l);if(o&&"object"===(void 0===o?"undefined":_typeof(o))&&o.hasOwnProperty(e)){var s="wptb-el-"+t[1]+"-"+e;n.addEventListener("wptb-control:"+s,function(e){var t=document.getElementsByClassName(s);if(0<t.length){var a=WPTB_Helper.targetControlValueGet(t);r(a,n)}},!1)}}},innerElementCopyIncludeHandler:function(a,n){a&&"object"===(void 0===a?"undefined":_typeof(a))&&"function"==typeof n&&a.addEventListener("wptb-inner-element:copy",function(e){var t=e.detail;t&&(WPTB_Helper.elementClearFromTinyMce(t),n(t,a))},!1)},valueDependOnControl:function(a,n,r,l,o){function s(e,a,t){"string"==typeof e&&(e=[e]);var n=a.match(/wptb-el-((.+-)\d+)-(.+)/i),r={},l=[];if(n&&Array.isArray(n)){var o=n[3],s=void 0,i={};Array.isArray(t)&&(Array.isArray(t[0])?t.map(function(e){i[e[0]]=[e[1],e[2]]}):i[t[0]]=[t[1],t[2]]),e.map(function(e){var t=a.replace(o,e);t&&0<(s=document.getElementsByClassName(t)).length&&s[0].type&&(r[e]=s[0].value,e in i&&("integer"===i[e][1]?r[e]=parseInt(r[e])+parseInt(i[e][0]):"string"===i[e][1]&&(r[e]=r[e]+i[e][0])),l.push(s[0]))})}return[r,l]}var e=s(a,n,r);WPTB_Helper.elementOptionsSet(l,o,e[0],n),Object.keys(e[0]).forEach(function(e){var t="wptb-el-"+o.className.match(/wptb-element-((.+-)\d+)/i)[1]+"-"+[e];o.addEventListener("wptb-control:"+t,function(e){var t=s(a,n,r);WPTB_Helper.elementOptionsSet(l,o,t[0],n)},!1)})},appearDependOnControl:function(e,t){if(Array.isArray(e)){var l=function(e,t){var a="block";Object.keys(t).map(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!1===t[e][0]&&(a="none")}),e.style.display=a},o=function(e,t){var a=WPTB_Helper.targetControlValueGet(e);return!(!t[1]||!Array.isArray(t[1])||-1===t[1].indexOf(a))||(!t[2]||!Array.isArray(t[2])||-1===t[2].indexOf(a))&&void 0};if("string"==typeof e[0])e=[e];else if(!Array.isArray(e[0]))return;for(var a={},n=0;n<e.length;n++){var r=e[n],s=r[0],i=t.match(/wptb-el-((.+-)\d+)-(.+)/i);if(i&&Array.isArray(i)){var d=i[3],c=t.replace(d,s);if(c){var p=document.getElementsByClassName(c);0<p.length&&(a[r[0]]=[o(p,r),p,r])}}}var m=document.getElementsByClassName(t);if(0<m.length){m=m[0];var u=WPTB_Helper.findAncestor(m,"wptb-element-option");u&&(l(u,a),Object.keys(a).map(function(e){Object.prototype.hasOwnProperty.call(a,e)&&a[e][1][0].addEventListener("change",function(e,t,a){var n=t[a][2],r=t[a][1];t[n[0]]=[o(r,n),r,n],l(e,t)}.bind(null,u,a,e),!1)}))}}},controlsStateManager:function(e,t){var a=document.getElementsByClassName(e);if(0<a.length){var n=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(n&&Array.isArray(n)){if(document.querySelector(".wptb-element-"+n[1])){var r=void 0,l={},o=void 0;if(0==(r=document.getElementsByClassName("wptb-element-datas")).length||""==r[0].innerHTML){var s=WPTB_Helper.targetControlValueGet(a);l["data-"+e]=s,(o={})["tmpl-wptb-el-datas-"+n[1]]=l,o=JSON.stringify(o),0==r.length?((r=document.createElement("script")).setAttribute("type","text/html"),r.setAttribute("class","wptb-element-datas")):r=r[0],r.innerHTML=o,document.getElementsByTagName("body")[0].appendChild(r)}else if((o=(r=r[0]).innerHTML)&&(o=o.trim(),(o=JSON.parse(o))&&"object"===(void 0===o?"undefined":_typeof(o))))if(t){var i=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])||(o["tmpl-wptb-el-datas-"+n[1]]={}),o["tmpl-wptb-el-datas-"+n[1]]["data-"+e]=i,r.innerHTML=JSON.stringify(o)}else if("tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])&&"data-"+e in o["tmpl-wptb-el-datas-"+n[1]]){if("tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])&&"data-"+e in o["tmpl-wptb-el-datas-"+n[1]])for(var d=0;d<a.length;d++)if("checkbox"==a[d].type){var c=void 0;"checked"==(c=a[d].name?o["tmpl-wptb-el-datas-"+n[1]]["data-"+e][a[d].name]:o["tmpl-wptb-el-datas-"+n[1]]["data-"+e])?a[d].checked=!0:"unchecked"==c&&(a[d].checked=!1)}else a[d].value=o["tmpl-wptb-el-datas-"+n[1]]["data-"+e]}else{var p=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])||(o["tmpl-wptb-el-datas-"+n[1]]={}),o["tmpl-wptb-el-datas-"+n[1]]["data-"+e]=p,r.innerHTML=JSON.stringify(o)}}}}},targetControlValueGet:function(e){for(var t=void 0,a=0;a<e.length;a++)"checkbox"==e[a].type&&e[a].name?(t||(t={}),1==e[a].checked?t[e[a].name]="checked":t[e[a].name]="unchecked"):"checkbox"==e[a].type?t=1==e[a].checked?"checked":"unchecked":e[a].type?t=e[a].value:e[a].dataset.alignmentValue&&e[a].classList.contains("selected")&&(t=e[a].dataset.alignmentValue);return t},elementControlsStateCopy:function(e,t){if(e&&t){var a=e.className.match(/wptb-element-((.+-)\d+)/i),n=t.className.match(/wptb-element-((.+-)\d+)/i);if(a&&Array.isArray(a)&&n&&Array.isArray(n)){var r=a[1],l=n[1],o=document.getElementsByClassName("wptb-element-datas");if(0<o.length){var s=(o=o[0]).innerHTML;if(s&&(s=s.trim(),(s=JSON.parse(s))&&"object"===(void 0===s?"undefined":_typeof(s)))){var i=s["tmpl-wptb-el-datas-"+r];if(i&&"object"===(void 0===i?"undefined":_typeof(i))){var d={};Object.keys(i).forEach(function(e){var t=i[e],a=e.replace(r,l);d[a]=t}),0<Object.keys(d).length&&(s["tmpl-wptb-el-datas-"+l]=d,s=JSON.stringify(s),o.innerHTML=s)}}}}}},elementControlsStateDelete:function(e,t){var a=e.className.match(/wptb-element-(.+)-(\d+)/i),n=document.getElementsByTagName("body")[0],r=n.getElementsByClassName("wptb-element-datas");if(a&&Array.isArray(a)&&0<r.length){var l=(r=r[0]).innerHTML;l&&(l=l.trim(),(l=JSON.parse(l))&&"object"===(void 0===l?"undefined":_typeof(l))&&"tmpl-wptb-el-datas-"+a[1]+"-"+a[2]in l&&(t?l["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]]&&"object"===_typeof(l["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]])&&"data-wptb-el-"+a[1]+"-"+a[2]+"-"+t in l["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]]&&delete l["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]]["data-wptb-el-"+a[1]+"-"+a[2]+"-"+t]:delete l["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]],0==Object.keys(l).length?n.removeChild(r):(l=JSON.stringify(l),r.innerHTML=l)))}},elementOptionsSet:function(b,e,v,w){var g,f,t="wptb-"+b+"-control-stack",a=wp.template(t),n=void 0,h=void 0,y=void 0,l=void 0,S=e.className.match(/wptb-element-((.+-)\d+)/i);if(S)WPTB_Helper.editActionClassRemove(),e.classList.add("edit-active");else{var r=WPTB_Helper.detectMode();if(r||(r="startedid-0"),e.classList.contains("wptb-preview-table"))e.classList.add("wptb-element-main-table_setting-"+r);else if(e.classList.contains("wptb-cell")){document.querySelector(".wptb-element-table_cell_setting-"+e.dataset.xIndex+"-"+e.dataset.yIndex)||e.classList.add("wptb-element-table_cell_setting-"+e.dataset.xIndex+"-"+e.dataset.yIndex)}else e.classList.contains("wptb-responsive")&&(r.startsWith("wptb_team")&&(r="startedid-0"),e.classList.add("wptb-element-table_responsive_setting-"+r));S=e.className.match(/wptb-element-((.+-)\d+)/i)}n={container:"."+S[0]};var T=void 0;if(n.valueDependOnControl={},v&&Object.keys(v).forEach(function(e){n.valueDependOnControl[e]=v[e]}),w){var o=w.match(/wptb-el-((.+-)\d+)-(.+)/i);o&&Array.isArray(o)&&(T=o[3])}if(g=S[0],f=S[1],e.classList.contains("wptb-preview-table"));else if(e.classList.contains("wptb-cell"))this.activateSection("cell_settings");else if(e.classList.contains("wptb-responsive"))elementOptionsGroupId="table-responsive-group",wptbelementOptionClass="wptb-element-option";else{for(var s=document.getElementById("element-options-group").childNodes,i=0;i<s.length;i++)s[i].style&&(s[i].style.display="none");this.activateSection("options_group")}var d=a(n),C=JSON.parse(d),B=[],E={},_={},x={},A=[],P=[];if(T){var c={};c[T]=C[T],C=c}Object.keys(C).forEach(function(e){var t=C[e];t.controlKey=e;var a=wp.template("wptb-"+t.type+"-control");t.elemContainer=g,t.elementControlTargetUnicClass="wptb-el-"+f+"-"+t.controlKey,Object.keys(t).map(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"control_param_calculate_value"===t[e]&&(t[e]=WPTB_Helper.controlParamCalculateValue(t.elementControlTargetUnicClass,e))});var n=a(t);if("appearDependOnControl"in t&&Array.isArray(t.appearDependOnControl)&&A.push([t.appearDependOnControl,t.elementControlTargetUnicClass]),"valueDependOnControl"in t&&!v&&!w){var r="";t.valueDependOnControlCorrect&&(r=t.valueDependOnControlCorrect),P.push([t.valueDependOnControl,t.elementControlTargetUnicClass,r])}if(-1==B.indexOf(t.elementOptionsGroupId)&&!T){B.push(t.elementOptionsGroupId),h=document.getElementById(t.elementOptionsGroupId);for(var l=[].concat(_toConsumableArray(h.children)),o=0;o<l.length;o++)h.removeChild(l[o]);E[t.elementOptionsGroupId]=h}if(y=E[t.elementOptionsGroupId],"true"!==t.elementOptionsContainerOn||T||(y=function(e,t){if(!t[e]){var a=document.createElement("div");a.classList.add("wptb-element-options","wptb-options-"+S[1]),document.getElementById(e).appendChild(a),t[e]=a}return t[e]}(t.elementOptionsGroupId,_)),"true"===t.elementOptionContainerOn){var s=document.createElement("div");if(s.classList.add(t.elementOptionClass,"wptb-settings-items"),t.customClassForContainer&&s.classList.add(t.customClassForContainer),t.containerAdditionalStyles&&s.setAttribute("style",t.containerAdditionalStyles),w){var i=document.getElementsByClassName(w);if(0<i.length){i=i[0];var d=WPTB_Helper.findAncestor(i,"wptb-element-option");if(d){var c=d.parentNode;c.insertBefore(s,d),c.removeChild(d)}}}else y.appendChild(s);y=s}y.innerHTML=y.innerHTML+n;var p=y.getElementsByTagName("wptb-template-script");if(0<p.length){var m=(p=p[0]).innerText;y.removeChild(p);var u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("id",b+"-"+t.controlKey),u.innerHTML=m.replace(/\r|\n|\t/g,"").trim(),x[t.elementOptionsGroupId]&&Array.isArray(x[t.elementOptionsGroupId])||(x[t.elementOptionsGroupId]=[]),x[t.elementOptionsGroupId].push(u)}0}),e.optionsGroupIds=B,Object.keys(x).forEach(function(e){w||((l=document.createElement("div")).classList.add("wptb-element-options-scripts","wptb-options-"+S[1]),E[e].appendChild(l));var t=x[e];if(0<t.length)for(var a=0;a<t.length;a++)if(w){var n=b+"-"+T,r=document.getElementById(n);(l=r.parentNode).insertBefore(t[a],r),l.removeChild(r)}else l.appendChild(t[a])});for(var p=0;p<A.length;p++)WPTB_Helper.appearDependOnControl(A[p][0],A[p][1]);WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",e);for(var m=0;m<P.length;m++)WPTB_Helper.valueDependOnControl(P[m][0],P[m][1],P[m][2],b,e)},editActionClassRemove:function(){for(var e=document.querySelectorAll(".edit-active"),t=0;t<e.length;t++)e[t].classList.remove("edit-active")},controlParamCalculateValue:function(e,t){var a=WPTB_Helper.replaceAll(e,"-","_");if(window["paramCalculateValue_"+a+"_"+t]&&"function"==typeof window["paramCalculateValue_"+a+"_"+t])return window["paramCalculateValue_"+a+"_"+t]()},controlParamCalculateValueCreateFunction:function(e,t,a,n){var r="wptb-el-"+e.className.match(/wptb-element-((.+-)\d+)/i)[1]+"-"+t,l=WPTB_Helper.replaceAll(r,"-","_");window["paramCalculateValue_"+l+"_"+a]=function(){return n(e)}},managerExternalCssStyles:function(e,t,a,n){var r=e.match(/wptb-element-main(.+)-(\d+)/i);if(!r||!Array.isArray(r)){var l=document.getElementsByClassName("wptb-preview-table");if(0<l.length){var o=(l=l[0]).className.match(/wptb-element-main(.+)-(\d+)/i);o&&Array.isArray(o)&&(t="."+o[0]+" "+t)}}var s=document.head;if(s){var i=s.querySelector("#styles-"+e);if(i){var d=i.innerHTML;if(d){var c=d.split("}");c.pop();for(var p=!1,m=0;m<c.length;m++){var u=c[m].split("{");if(u[0]===t){var b=u[1].split(";");b.pop();for(var v=!1,w=0;w<b.length;w++){if(b[w].split(":")[0]===a){n?b[w]=a+":"+n:b.splice(w,1),u[1]=b.join(";")?b.join(";")+";":"",v=!0;break}}v||n&&(u[1]+=a+":"+n+";"),u[1]?c[m]=u[0]+"{"+u[1]:c.splice(m,1),c.join("}")?i.innerHTML=c.join("}")+"}":s.removeChild(i),p=!0;break}}p||(i.innerHTML=n?d+t+"{"+a+":"+n+";}":d)}else n?i.innerHTML=t+"{"+a+":"+n+";}":s.removeChild(i)}else if(n){var g=document.createElement("style");g.setAttribute("id","styles-"+e),g.classList.add("styles-wptb-elements"),g.innerHTML=t+"{"+a+":"+n+";}",s.appendChild(g)}}},registerSections:function(e){var a=this;this.sections={},this.currentSection="",Array.isArray(e)||(e=[e]),e.map(function(e){var t=document.querySelector("[data-wptb-section="+e+"]");t&&(a.sections[e]=t)})},activateSection:function(a){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"block";this.currentSection=a,this.triggerSectionEvent(a),Object.keys(this.sections).map(function(e){if(Object.prototype.hasOwnProperty.call(n.sections,e)){var t=a===e?r:"none";n.sections[e].style="display: "+t+" !important"}})},getCurrentSection:function(){return this.currentSection},getSectionFromUrl:function(){var t=new URL(window.location.href).searchParams.get("wptb-builder-section");t&&Object.keys(this.sections).some(function(e){return e===t})&&this.activateSection(t)},setupSectionButtons:function(){var e=Array.from(document.querySelectorAll("[data-wptb-section-button")),n=this;e.map(function(t){var a=t.dataset.wptbSectionButton;t.addEventListener("click",function(){var e=t.dataset.wptbSectionDisplayType;n.activateSection(a,e),WPTB_Helper.editActionClassRemove()}),document.addEventListener("wptbSectionChanged",function(e){e.detail===a?(t.classList.remove("disabled"),t.classList.add("active")):(t.classList.remove("active"),t.classList.add("disabled"))})})},setupPanelToggleButtons:function(){var t=jQuery;t(".wptb-panel-toggle-group").each(function(){var e=t(this);t(this).find(".toggle-icon").click(function(){e.find(".wptb-panel-toggle-target").slideToggle(),e.toggleClass("wptb-panel-toggle-content")})})},triggerSectionEvent:function(e){var t=new CustomEvent("wptbSectionChanged",{detail:e});document.dispatchEvent(t)},setupSidebarToggle:function(e){var t=document.querySelector(e);t&&t.addEventListener("click",function(e){e.preventDefault(),document.body.classList.toggle("collapsed")})},externalCssStylesDelete:function(e){var t=document.head;if(t){var a=t.querySelector("#styles-"+e);a&&t.removeChild(a)}},externalCssStylesCopy:function(e,t){if(e){var a=e.className.match(/wptb-element-(.+)-(\d+)/i);if(a&&Array.isArray(a)){var n=a[0],r=document.head;if(r){var l=r.querySelector("#styles-"+n);if(l){var o=l.cloneNode(!0);o.removeAttribute("id","styles-"+n);var s=t.className.match(/wptb-element-(.+)-(\d+)/i);if(s&&Array.isArray(s)){o.setAttribute("id","styles-"+s[0]);var i=l.innerHTML,d=WPTB_Helper.replaceAll(i,n,s[0]);o.innerHTML=d,r.appendChild(o)}}}}}},elementsStylesConvertToObject:function(){for(var e=document.head.querySelectorAll(".styles-wptb-elements"),t={},a=0;a<e.length;a++){var n=e[a].getAttribute("id");n&&e[a].innerHTML&&(t[n]=e[a].innerHTML)}return 0!=Object.keys(t).length?JSON.stringify(t):""},elementsStylesSetFromObject:function(e){var n=document.head;if(n){var t=n.querySelectorAll(".styles-wptb-elements");if(0<t.length){t=[].concat(_toConsumableArray(t));for(var a=0;a<t.length;a++)n.removeChild(t[a])}if(e){var r=JSON.parse(e);0!=Object.keys(r).length&&Object.keys(r).forEach(function(e){var t=r[e],a=document.createElement("style");a.setAttribute("id",e),a.classList.add("styles-wptb-elements"),a.innerHTML=t,n.appendChild(a)})}}},saveTable:function(p,m,e){if(e||m||!p.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,p.target.dataset.wptbTableStateNumberSave),!e){var t=document.querySelector(".wptb-edit-bar");if(t&&t.classList.contains("visible")){document.getElementsByClassName("wptb-preview-table")[0];WPTB_Helper.toggleTableEditMode()}}WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document);var u=new XMLHttpRequest,a=(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl)+"?action=save_table",b=document.getElementById("wptb-setup-name").value.trim(),v=void 0,n=void 0,r=void 0;n=document.getElementsByClassName("wptb-preview-table");var l=void 0;((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(l=rs);var o=!1;if(0<n.length){var s=(n=n[0]).cloneNode(!0);if(l&&s.classList.contains("wptb-element-main-table_setting-startedid-0")){s.classList.remove("wptb-element-main-table_setting-startedid-0"),s.classList.add("wptb-element-main-table_setting-"+l);var i=document.querySelector(".wptb-table-setup");i&&(i.innerHTML="",i.appendChild(s),WPTB_Table()),o=!0}s.columns=n.columns,n=(n=WPTB_Stringifier(s)).outerHTML}else n="";if(!e){r="";var d=document.getElementsByClassName("wptb-element-datas");0<d.length&&d[0].innerHTML&&(r=d[0].innerHTML,o&&(r=WPTB_Helper.replaceAll(r,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-"+l),r=WPTB_Helper.replaceAll(r,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-"+l)))}var c=WPTB_Helper.elementsStylesConvertToObject();if(o&&(c=WPTB_Helper.replaceAll(c,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-"+l)),""===b&&""===n){var w="";return""===b&&(w+="You must assign a name to the table before saving it.</br>"),""===n&&(w+="Table wasn't created"),(v=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '+w+"</div>",v.classList.add("wptb-warning"),void setTimeout(function(){v.removeChild(v.firstChild)},4e3)}var g={title:b,content:n,elements_datas:r,elements_styles:c,security_code:wptb_admin_object.security_code};e&&(g.preview_saving=e),l&&(g.id=l),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document,g),g=JSON.stringify(g),u.open("POST",a,!0),u.setRequestHeader("Content-type","application/json; charset=utf-8"),u.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(u.responseText);if(v=document.getElementById("wptb-messaging-area"),"saved"==t[0]){var a=document.location.href.replace("#",""),n=new RegExp("&table=(.+)","i");a=a.replace(n,""),window.history.pushState(null,null,a+"&table="+t[1]),document.wptbId=t[1],v.innerHTML='<div class="wptb-success wptb-message">Table "'+b+'" was successfully saved.</div>',document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id="+t[1]+"]";document.querySelector(".wptb-preview-table");var r=document.getElementsByClassName("wptb-preview-btn");if(0<r.length){(r=r[0]).classList.remove("wptb-button-disable");var l=r.dataset.previewHref;l=l.replace("empty",t[1]),r.setAttribute("href",l)}p.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var o=document.getElementsByClassName("wptb-save-btn");return void(0<o.length&&((o=o[0]).classList.add("wptb-save-disabled"),o.classList.remove("active")))}if("edited"==t[0]&&m){document.wptbId=t[1],v.innerHTML='<div class="wptb-success wptb-message">Table "'+b+'" was successfully saved.</div>',document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id="+t[1]+"]";document.querySelector(".wptb-preview-table");var s=document.getElementsByClassName("wptb-preview-btn");if(0<s.length){(s=s[0]).classList.remove("wptb-button-disable");var i=s.dataset.previewHref;i=i.replace("empty",t[1]),s.setAttribute("href",i)}p.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var d=document.getElementsByClassName("wptb-save-btn");0<d.length&&((d=d[0]).classList.add("wptb-save-disabled"),d.classList.remove("active"))}else if("edited"==t[0]){v.innerHTML='<div class="wptb-success wptb-message">Table "'+b+'" was successfully updated.</div>',p.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var c=document.getElementsByClassName("wptb-save-btn");0<c.length&&((c=c[0]).classList.add("wptb-save-disabled"),c.classList.remove("active"))}else{if("preview_edited"==t[0])return;v.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}v.classList.add("wptb-success"),setTimeout(function(){v.removeChild(v.firstChild)},4e3)}},u.send(g)},clickOnFreeSpace:function(){if(WPTB_Helper.editActionClassRemove(),"table_responsive_menu"!==this.getCurrentSection()){var e=document.querySelector("#wptb-cell_mode_background");if(!e||!e.classList.contains("visible")){this.activateSection("elements");var t=document.getElementById("wpcd_fixed_toolbar");t.hasAttribute("data-toolbar-active-id")&&document.getElementById(t.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active");var a=document.querySelector(".wptb-preview-table");a&&WPTB_Helper.elementOptionsSet("table_setting",a)}}},elementAjax:function(e,n){var r=new XMLHttpRequest,t=(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl)+"?action=wptb_element_ajax",a=void 0,l=n.className.match(/wptb-element-(.+)-(\d+)/i);l&&Array.isArray(l)&&(a=l[1]);var o={element_ajax_data:e,element_name:a,security_code:wptb_admin_object.security_code};o=JSON.stringify(o),r.open("POST",t,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(r.responseText),a=void 0;a=t&&Array.isArray(t)&&"element_ajax_responce"==t[0]?{value:t[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",n,a)}},r.send(o)},toggleTableEditMode:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.getElementsByClassName("wptb-edit-bar"),a=document.getElementById("wptb-cell_mode_background"),n=document.getElementById("wptb-left-scroll-panel-curtain"),r=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=document.getElementsByClassName("wptb-preview-table");if(0<l.length&&(l=l[0]),0<t.length){for(var o="",s=0;s<t.length;s++)if(t[s].classList.contains("visible")){document.select.deactivateMultipleSelectMode(),t[s].classList.remove("visible"),a.classList.remove("visible"),n.classList.remove("visible"),r.classList.remove("visible"),l.parentNode.classList.remove("wptb-preview-table-manage-cells");var i=l.getElementsByTagName("td");if(0<i.length)for(var d=0;d<i.length;d++)i[d].classList.remove("wptb-highlighted");o="closed",WPTB_Helper.activateSection("elements")}else e||(document.select.activateMultipleSelectMode(),t[s].classList.add("visible"),a.classList.add("visible"),n.classList.add("visible"),l.parentNode.classList.add("wptb-preview-table-manage-cells"),o="opened");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-edit-mode/"+o,l)}},checkingDimensionValue:function(e,t){if(e=String(e),t=String(t),e&&t){var a=e.indexOf(t);return-1!=a&&a==e.length-t.length}return!1},checkSetGetStyleSizeValue:function(e,t,a,n){var r=e.style[t];if((r=String(r))&&!n||WPTB_Helper.checkingDimensionValue(r,n)){if(!n)return r}else{var l=window.getComputedStyle(e);if(a&&l.getPropertyValue(a)&&n&&!WPTB_Helper.checkingDimensionValue(l.getPropertyValue(a),n)){if(!n)return!1;e.style[t]=null}else{if(!n)return l.getPropertyValue(a);e.style[t]=l.getPropertyValue(a)}}return e.style[t]},checkSetGetStyleColorValue:function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!n)return r}else{var l=window.getComputedStyle(e,null);if(l&&l.getPropertyValue(a)){if(!n)return l.getPropertyValue(a);r=WPTB_Helper.rgbToHex(l.getPropertyValue(a)),WPTB_Helper.isHex(r)?e.style[t]=r:e.style[t]=""}else{if(!n)return"";e.style[t]=""}}},checkSetGetStyleValue:function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!n)return r}else{var l=window.getComputedStyle(e,null);if(l&&l.getPropertyValue(a)){if(!n)return l.getPropertyValue(a);e.style[t]=l.getPropertyValue(a)}else if(!n)return""}},getValueMaxCountSameElementsInArray:function(e){if(e&&Array.isArray(e)){for(var t={},a=0,n=0;n<e.length;n++)e[n]?t[e[n]]?t[e[n]]++:t[e[n]]=1:a++;var r=void 0;for(var l in t)r?t[r]<t[l]&&(r=l):r=l;return t[r]>=a?r:""}},recalculateIndexes:function(e){WPTB_RecalculateIndexes(e)},tableRowsColorsReinstall:function(e){var t=e.className.match(/wptb-element-main(.+)-(\d+)/i);if(t&&Array.isArray(t)){var a="";a="0"==t[t.length-1]?"startedid-0":t[t.length-1];var n=document.querySelector(".wptb-el-main-table_setting-"+a+"-tableHeaderBackground");if(n){var r={value:n.value};WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",n,r)}var l=document.querySelector(".wptb-el-main-table_setting-"+a+"-tableEvenRowBackground");if(l){var o={value:l.value};WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",l,o)}var s=document.querySelector(".wptb-el-main-table_setting-"+a+"-tableOddRowBackground");if(s){var i={value:s.value};WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",s,i)}}},getParentOfType:function(e,t){return t.nodeName===e.toUpperCase()?t:WPTB_Helper.getParentOfType(e,t.parentElement)},dragRelativeType:"",setDragRelativeType:function(e){this.dragRelativeType=e},getDragRelativeType:function(){return this.dragRelativeType},getElementColorStylesHex:function(e,t){var a=e.style[t];return a=WPTB_Helper.rgbToHex(a),WPTB_Helper.isHex(a)||(a=""),a},showControlsOnElementMount:function(){document.addEventListener("element:mounted:dom",function(e){e.target.click()})},showElementsListOnRemove:function(){document.addEventListener("element:removed:dom",function(){WPTB_Helper.activateSection("elements")})},blockTinyMCEManageCells:function(){var r=function(e){var t=document.createElement("div");t.classList.add("wptb-plugin-blocker-element");var a=0<e.childNodes.length;e.appendChild(t),a||e.classList.add("wptb-plugin-blocker-element-empty")},l=function(e){var t=e.querySelector(".wptb-plugin-blocker-element");t&&t.remove(),e.classList.remove("wptb-plugin-blocker-element-empty")};document.addEventListener("wptbSectionChanged",function(e){var t=e.detail,a=document.querySelector(".wptb-table-setup table.wptb-preview-table");if(a){var n=Array.from(a.querySelectorAll("td"));n.map(l),"manage_cells"!==t&&"cell_settings"!==t||n.map(r)}}),document.addEventListener("wptb:save:before",function(){var e=document.querySelector(".wptb-table-setup table.wptb-preview-table");Array.from(e.querySelectorAll("td")).map(l)})},calledByBlock:function(){new URL(window.location.href).searchParams.get("gutenberg")&&document.querySelector(".wptb-plugin-header-close a").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=new URL(window.location.href).searchParams.get("table");WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,t)},{capture:!0})}},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),WPTB_Helper.registerSections(["elements","table_settings","cell_settings","options_group","table_responsive_menu","manage_cells"]),WPTB_Helper.setupSectionButtons(),WPTB_Helper.activateSection("elements"),WPTB_Helper.setupSidebarToggle(".wptb-panel-toggle-section .wptb-panel-drawer-icon"),WPTB_Helper.setupPanelToggleButtons(),new WptbResponsive("table_responsive_menu","wptbResponsiveApp",".wptb-builder-content"),WPTB_Helper.getSectionFromUrl(),WPTB_Helper.showControlsOnElementMount(),WPTB_Helper.showElementsListOnRemove(),WPTB_Helper.blockTinyMCEManageCells(),new WPTB_HeaderToolbox(".wptb-plugin-header-toolbar").init(),document.addEventListener("wp-table-builder/table-edit-mode/closed",function(){WPTB_Helper.activateSection("elements")}),WPTB_Helper.calledByBlock()},WPTB_innerElementSet=function c(t){t.ondragenter=function(e){-1==e.dataTransfer.types.indexOf("wptbelement")&&-1==e.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,e),t.classList.add("wptb-ondragenter"))},t.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},t.ondragleave=function(e){WPTB_DropHandle(this,e,!0)},t.ondrop=function(e){this.classList.remove("wptb-ondragenter");var t=void 0,a=void 0;if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node")){var n=void 0,r=void 0;if(0<document.getElementsByClassName("wptb-drop-handle").length&&(n=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(r=document.getElementsByClassName("wptb-drop-border-marker")[0]),t=e.dataTransfer.getData("wptbElement")?(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():(a=e.dataTransfer.getData("node"),document.getElementsByClassName(a)[0]),"td_relative"===WPTB_Helper.getDragRelativeType()){WPTB_DropHandle(this,e,!0),WPTB_Helper.getParentOfType("td",e.target).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)}else{if("block"!=n.style.display)return;var l=void 0;if("Drop Here"==n.dataset.text)(l=n.getDOMParentElement()).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t);else{var o=n.getDOMParentElement();if(l=o.parentNode,"Above Element"==n.dataset.text)l.insertBefore(t,o),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t);else if("Below Element"==n.dataset.text){var s=o.nextSibling;l.insertBefore(t,s),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)}}var i=l.parentNode;if(WPTB_Helper.rowIsTop(i)){var d=WPTB_Helper.findAncestor(i,"wptb-preview-table");d.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(d)}t.className.match(/wptb-element-(.+)-(\d+)/i)[1];e.dataTransfer.getData("wptbElement")}if(n&&(n.style.display="none",r.style.display="none"),c(t),!t.classList.contains("wptb-image-container")||t.classList.contains("wptb-moving-mode"))t.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet();return!0}},t.onmouseover=function(e){t.classList.remove("wptb-ondragenter")}},WPTB_LeftPanel=function(){for(var e=document.getElementsByClassName("wptb-preview-table")[0],t=document.getElementsByClassName("wptb-element"),a=0;a<t.length;a++)t[a].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};if(e)for(var n=document.getElementsByClassName("wptb-table-edit-mode-close"),r=0;r<n.length;r++)n[r].onclick=WPTB_Helper.toggleTableEditMode;document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||WPTB_Helper.clickOnFreeSpace()};var l=document.getElementsByClassName("wptb-header");0<l.length&&(l=l[0]),l.onclick=function(){WPTB_Helper.clickOnFreeSpace()}},MultipleSelect=function(){var r=[],a=!1;return this.activateMultipleSelectMode=function(){r=[];for(var e=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),t=0;t<e.length;t++)e[t].classList.remove("wptb-highlighted");a=!0},this.deactivateMultipleSelectMode=function(){a=!1},this.isActivated=function(){return a},this.pushSelectedCell=function(e){a&&(r.push(e),e.classList.add("wptb-highlighted"))},this.selectedCells=function(){return r},this.flushSelectedCells=function(){r=[]},this.getFirst=function(){for(var e,t=1e3,a=1e3,n=r.length-1;0<=n;n--)t>=r[n].dataset.xIndex&&a>=r[n].dataset.yIndex&&(e=r[n],t=r[n].dataset.xIndex,a=r[n].dataset.yIndex);return e},this.getLast=function(){for(var e,t=-1,a=-1,n=r.length-1;0<=n;n--)t<=r[n].dataset.xIndex&&a<=r[n].dataset.yIndex&&(e=r[n],t=r[n].dataset.xIndex,a=r[n].dataset.yIndex);return e},this.removeAllButFirst=function(){for(var e=this.getFirst(),t=1;t<r.length;t++)r[t].classList.add("wptb-fused-cell-"+e.dataset.xIndex+"-"+e.dataset.yIndex)},this};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Parser=function(e){var t=document.createElement("div");t.innerHTML=e;for(var a=t.children[0],n=[].concat(_toConsumableArray(a.querySelectorAll(".wptb-column-title-mobile-container"))),r=0;r<n.length;r++){n[r].parentNode.removeChild(n[r])}for(var l=a.querySelectorAll("td"),o=0;o<l.length;o++)l[o].classList.add("wptb-droppable"),l[o].classList.remove("wptb-column-title-mobile-not-elements");return a};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.keys||(Object.keys=function(){"use strict";var r=Object.prototype.hasOwnProperty,l=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=o.length;return function(e){if("object"!==(void 0===e?"undefined":_typeof(e))&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,a,n=[];for(t in e)r.call(e,t)&&n.push(t);if(l)for(a=0;a<s;a++)r.call(e,o[a])&&n.push(o[a]);return n}}());var WPTB_RecalculateIndexes=function(e){for(var t=e.getElementsByTagName("tr"),a=void 0,n=0,r=0,l=[],o=0;o<t.length;o++){a=t[o].getElementsByTagName("td"),null==l[o]&&(l[o]=[]);for(var s=0,i=0;i<a.length;i++){if(null!=l[o][i])for(var d=0;d<100;d++){if(null==l[o][s]){l[o][s]=a[i],a[i].dataset.xIndex=s;break}s++}else l[o][i]=a[i],a[i].dataset.xIndex=s;if(a[i].dataset.yIndex=o,1<a[i].colSpan)for(var c=1;c<a[i].colSpan;c++)s++,l[o][s]="tdDummy";if(1<a[i].rowSpan)for(var p=1;p<a[i].rowSpan;p++){null==l[o+p]&&(l[o+p]=[]);for(var m=0;m<a[i].colSpan;m++)l[o+p][s-a[i].colSpan+1+m]="tdDummy"}s++}a.length>n&&(n=a.length),0==o&&(r=s)}e.columns=n,e.maxCols=r};function WptbResponsive(e,t,n){var r=this;this.sectionName=e,this.responsiveWrapperId=t,this.responsiveTable=null,this.loaded=!1,this.addContainerToDom=function(){if(!document.querySelector("#"+r.responsiveWrapperId)){var e=document.querySelector(n);if(!e)throw new Error("[WPTB_Responsive]: no parent container is found with the given query of ["+n+"]");var t=document.createRange();t.setStart(e,0);var a=t.createContextualFragment('<div class="wptb-responsive" id="'+r.responsiveWrapperId+'">responsive element</div>');e.appendChild(a),r.loaded=!0}r.responsiveTable=document.querySelector("#"+r.responsiveWrapperId)},this.load=function(){r.loaded||(r.addContainerToDom(),WPTB_Helper.elementStartScript(r.responsiveTable,"table_responsive_menu"),WPTB_Helper.elementOptionsSet("table_responsive_menu",r.responsiveTable),WPTB_ControlsManager.callControlScript("ResponsiveTable",r.responsiveWrapperId))},this.startUp=function(){document.addEventListener("wptbSectionChanged",function(e){var t=document.querySelector(".wptb-table-setup .wptb-preview-table");e.detail===r.sectionName&&t&&r.load()}),document.addEventListener("wptb:table:generated",function(){"table_responsive_menu"===WPTB_Helper.getCurrentSection()&&r.load()})},this.startUp()}var WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement),WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements||"")},e[t].ondragend=function(){WPTB_Helper.elementDragEndClear()};var a=new WPTB_TableStateSaveManager,n=document.getElementsByClassName("wptb-undo");0<n.length&&((n=n[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){a.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");0<t.length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()})}});var r=document.getElementsByClassName("wptb-redo");0<r.length&&((r=r[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){a.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");0<t.length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()})}});var l=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||l.classList.add("wptb-popup-show")},window.onbeforeunload=function(e){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){l.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){l.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){if(!this.classList.contains("wptb-button-disable")){var t=Math.floor(1e4*Math.random()),a=new URL(e.target.href);a.searchParams.set("preview_id",t),e.target.href=a.toString(),WPTB_Helper.saveTable(e,!1,t)}},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(e){this.classList.contains("wptb-save-disabled")||WPTB_Helper.saveTable(e)};var o=document.querySelector("#wptb-setup-name");o&&(o.onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()})};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}!function(e,t,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=a():t[e]=a()}("WPTB_SortableTable",self||global,function(){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Y=this.table=e.table;WPTB_RecalculateIndexes(Y);var a=this;function t(e,t,a){if("TD"===e.target.tagName){var n=null==e.offsetX?e.layerX:e.offsetX,r=null==e.offsetY?e.layerY:e.offsetY,l=!1;("vertical"===t&&e.target.clientWidth-n<=35||"horizontal"===t&&n<=35)&&(l=!0),l&&(e.target.clientHeight-35)/2<r&&(e.target.clientHeight+35)/2>r?a.classList.add("sortable-hover"):a.classList.remove("sortable-hover")}else a.classList.remove("sortable-hover")}function c(e){t(e,"vertical",this)}function p(e){t(e,"horizontal",this)}function m(){this.classList.remove("sortable-hover")}function n(e,t){if(e.target&&"TD"===e.target.tagName&&!Y.parentNode.classList.contains("wptb-preview-table-manage-cells")){var a=e.currentTarget,n=!1;if("vertical"===t&&e.target.dataset.hasOwnProperty("sortedVertical")){var r=[],l=[];if(this.itemsPerHeader&&this.itemsPerHeader<a.rows.length){WPTB_RecalculateIndexes(a);for(var o=[].concat(_toConsumableArray(a.rows)),s=a.querySelector("tbody")?a.querySelector("tbody"):a,i=0;i<o.length;i++)i<e.target.dataset.yIndex?(r.push(o[i]),s.removeChild(o[i])):i>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(l.push(o[i]),s.removeChild(o[i]));WPTB_RecalculateIndexes(a)}var d=a.querySelectorAll('[data-x-index="'+e.target.dataset.xIndex+'"]');d=[].concat(_toConsumableArray(d));var c=void 0,p=void 0;d.map(function(e){(c=parseInt(e.rowSpan,10))||(c=1),p=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(p,a),p+=c,WPTB_CutGlueTable.cutTableHorizontally(p,a)});for(var m=[],u=void 0,b=0,v=[],w=0;w<d.length;w++){var g=Z(e,a,d,w,b,"vertical");if(g&&g.hasOwnProperty("i"))d=g.tds,w=g.i;else{g&&(d=g.tds);var f=d[w],h=parseInt(f.rowSpan,10);h||(h=1),b=parseInt(f.dataset.yIndex,10)+h;for(var y=K(f),S=[],T=0;T<h;T++)S.push(a.rows[parseInt(f.dataset.yIndex,10)+T]),v.push(parseInt(f.dataset.yIndex,10)+T);0<f.dataset.yIndex?m.push({rowsTd:S,value:y}):u=S}}var C=X(e,"sortedVertical");if(!C)return;if(m.length&&m.sort(function(e,t){return $(C,e,t)}),m.unshift({rowsTd:u}),m.length<a.rows.length)for(var B=0;B<a.rows.length;B++)if(!(-1<v.indexOf(B))){var E=[];E.push(a.rows[B]),m.push({rowsTd:E})}var _=a.querySelector("tbody");if(_.innerHTML="",m.map(function(e){e.rowsTd.map(function(e){_.appendChild(e)})}),r.length){var x=a.querySelector("tbody")?a.querySelector("tbody"):a;if(x){var A=x.querySelector("tr");r.map(function(e){x.insertBefore(e,A)})}}if(l.length){var P=a.querySelector("tbody")?a.querySelector("tbody"):a;_&&l.map(function(e){P.appendChild(e)})}WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableHorizontally(a),n=!0}else if("horizontal"===t&&"0"===e.target.dataset.xIndex){var W=a.querySelectorAll('[data-y-index="'+e.target.dataset.yIndex+'"]');W=[].concat(_toConsumableArray(W));var N=void 0,L=void 0;W.map(function(e){(N=parseInt(e.colSpan,10))||(N=1),L=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(L,a),L+=N,WPTB_CutGlueTable.cutTableVertically(L,a)});for(var H=[],I=void 0,M=0,O=0;O<W.length;O++){var D=Z(e,a,W,O,M,"horizontal");if(D&&D.hasOwnProperty("i"))W=D.tds,O=D.i;else{D&&(W=D.tds);var k=W[O],q=parseInt(k.colSpan,10);q||(q=1),M=parseInt(k.dataset.xIndex,10)+q;for(var F=K(k),R=[],j=0;j<q;j++){var G=[].concat(_toConsumableArray(a.querySelectorAll('[data-x-index="'+(parseInt(k.dataset.xIndex,10)+j)+'"]')));R.push(G)}0<k.dataset.xIndex?H.push({columnsTd:R,value:F}):I=R}}var V=X(e,"sortedHorizontal");if(!V)return;if(H.length&&H.sort(function(e,t){return $(V,e,t)}),H.unshift({columnsTd:I}),H.length<a.maxCols)for(var z=a.maxCols-H.length,U=0;U<z;U++){var J=[].concat(_toConsumableArray(a.querySelectorAll('[data-x-index="'+(parseInt(a.maxCols,10)-parseInt(z,10)+U)+'"]')));H.push({columnsTd:[J]})}for(var Q=0;Q<a.rows.length;Q++)a.rows[Q].innerHTML="";H.map(function(e){e.columnsTd.map(function(e){e.map(function(e){a.rows[e.dataset.yIndex].appendChild(e)})})}),WPTB_RecalculateIndexes(a),WPTB_CutGlueTable.glueTableVertically(a),n=!0}n&&(function(e){for(var t=[].concat(_toConsumableArray(e.getElementsByTagName("td"))),a=0;a<t.length;a++)t[a].hasAttribute("data-same-cell-before-division")&&t[a].removeAttribute("data-same-cell-before-division")}(a),a.hasOwnProperty("tableSM")&&(new(a.tableSM())).tableStateSet(),this.reassignElementsStyles("td"),this.reassignElementsStyles("tr"))}}function X(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function $(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ask",t=arguments[1],a=arguments[2],n=t.value,r=a.value;return parseInt(n)&&parseInt(r)&&(n=parseInt(n),r=parseInt(r)),"ask"===e?n<r?-1:n===r?0:1:n<r?1:n===r?0:-1}function K(e){var t=e.querySelectorAll(".wptb-text-container");t=[].concat(_toConsumableArray(t));for(var a="",n=0;n<t.length;n++)a+=t[n].querySelector("p").innerText,n!==t.length-1&&(a+=" ");return a}function Z(e,t,a,n,r,l){var o=a[n],s=!1,i=void 0,d=void 0,c=void 0,p=void 0,m=void 0,u=void 0,b=void 0,v=void 0;if("vertical"===l?(c="colSpan",p="data-y-index",m="yIndex",u="xIndex",b="rowSpan",v=t.rows.length):"horizontal"===l&&(c="rowSpan",p="data-x-index",m="xIndex",u="yIndex",b="colSpan",v=t.maxCols),0<o.dataset[m]-r){i=t.querySelectorAll("["+p+'="'+r+'"]');for(var w=0;w<i.length;w++)if((d=i[w][c])||(d=1),i[w].dataset[u]<e.target.dataset[u]&&parseInt(i[w].dataset[u],10)+parseInt(d,10)>e.target.dataset[u]){a.splice(n,0,i[w]),s=!0,n--;break}}if(s)return{tds:a,i:n};var g=parseInt(o[b],10);if(g||(g=1),n==a.length-1&&parseInt(o.dataset[m],10)+g<v){i=t.querySelectorAll("["+p+'="'+(parseInt(o.dataset[m],10)+g)+'"]');for(var f=0;f<i.length;f++)if((d=i[f][c])||(d=1),i[f].dataset[u]<e.target.dataset[u]&&parseInt(i[f].dataset[u],10)+parseInt(d,10)>e.target.dataset[u]){a.push(i[f]),s=!0;break}}return!!s&&{tds:a}}return this.itemsPerHeader=0,this.tableMaxCols=Y.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=Y.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=Y.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var a=0;a<t.length;a++){var n=t[a],r=window.getComputedStyle(n,null).getPropertyValue("background-color"),l="";"td"===e?(l=n.dataset.xIndex+"-"+n.dataset.yIndex,this.cellsStylesScheme[l]={backgroundColor:r}):"tr"===e&&(l=String(a),this.rowsStylesScheme[l]={backgroundColor:r})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e),a=void 0;if("td"===e?a=this.cellsStylesScheme:"tr"===e&&(a=this.rowsStylesScheme),t.length)for(var n=0;n<t.length;n++){var r=t[n],l="";if("td"===e?l=r.dataset.xIndex+"-"+r.dataset.yIndex:"tr"===e&&(l=n),a.hasOwnProperty(l)){var o=a[l];for(var s in o)r.style[s]=o[s]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(l){var o="",s=void 0,i=void 0;this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(s="vertical",i="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(s="horizontal",i="vertical");var t={};l&&l.getDirective(this.table)?t.switch=function(e){var t=l.getDirective(this.table),a="desktop";if(e&&e.detail&&(a=e.detail.sizeRangeId),o=s,"desktop"!==a){if(t.hasOwnProperty("modeOptions")){var n=t.responsiveMode,r=t.modeOptions[n];r.hasOwnProperty("topRowAsHeader")&&r.topRowAsHeader.hasOwnProperty(a)&&r.topRowAsHeader[a]?r.hasOwnProperty("cellStackDirection")&&r.cellStackDirection.hasOwnProperty(a)&&("row"===r.cellStackDirection[a]?(o=i,this.itemsPerHeader=this.tableMaxCols-1):"column"===r.cellStackDirection[a]&&r.hasOwnProperty("cellsPerRow")&&(this.itemsPerHeader=r.cellsPerRow[a])):this.itemsPerHeader=0}}else this.itemsPerHeader=0;this.sortModeSwitcher(o,!0)}:t.switch=function(e){var t=s;if(this.table.classList.contains("wptb-mobile-view-active")){this.table.classList.contains("wptb-table-preview-head")&&"vertical"===(t=i)&&(this.itemsPerHeader=this.tableMaxCols-1);var a=this.table;return this.table=a.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"),this.sortModeSwitcher(t,!0),void(this.table=a)}this.sortModeSwitcher(t,!0)},t.switch.call(a),this.table.addEventListener("table:rebuilt",function(e){t.switch.call(a,e)},!1)},this.sortingCellMouseMoveSwitcher=function(e,t){var a=this;function n(e,t,a){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",m,!1),a&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",m,!1))}function r(e,t,a){a?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var l=this.table.querySelectorAll("td");if(l.length&&(l=[].concat(_toConsumableArray(l))).map(function(e){n(e,c,!1),r(e,"sortedVertical",!1),n(e,p,!1),r(e,"sortedHorizontal",!1)}),t)if("vertical"===e)for(var o=this.table.rows.length,s=0;0<o;){var i=this.table.querySelectorAll('[data-y-index="'+s+'"]');(i=[].concat(_toConsumableArray(i))).map(function(e){n(e,c,t),r(e,"sortedVertical",t)}),this.itemsPerHeader?(o-=this.itemsPerHeader+1,s+=this.itemsPerHeader+1):o=0}else if("horizontal"===e){var d=this.table.querySelectorAll('[data-x-index="0"]');(d=[].concat(_toConsumableArray(d))).map(function(e){2<a.table.querySelectorAll('[data-y-index="'+e.dataset.yIndex+'"]').length&&(n(e,p,t),r(e,"sortedHorizontal",t))})}},this.sortableTableVerticalStart=function(e){n.call(a,e,"vertical")},this.sortableTableHorizontalStart=function(e){n.call(a,e,"horizontal")},this}});var WPTB_Stringifier=function(e){if(e){var t=e.cloneNode(!0);t.dataset.tableColumns=e.columns,t.style.width=null,t.style.minWidth=null,t.style.maxWidth=null;var a=t.getElementsByTagName("td");if(0<a.length)for(var n=0;n<a.length;n++){a[n].removeAttribute("draggable"),a[n].classList.remove("wptb-droppable");var r=a[n].className.match(/wptb-element-((.+-)\d+)/i);r&&a[n].classList.remove(r[0]);var l=a[n].getElementsByClassName("wptb-ph-element");if(0<l.length)for(var o=0;o<l.length;o++){var s=l[o].querySelectorAll(".mce-content-body");if(0<s.length)for(var i=0;i<s.length;i++)s[i].classList.remove("mce-content-body");var d=l[o].querySelectorAll("[data-mce-style]");if(0<d.length)for(var c=0;c<d.length;c++)d[c].removeAttribute("data-mce-style");var p=l[o].querySelectorAll("[contenteditable]");if(0<p.length)for(var m=0;m<p.length;m++)p[m].removeAttribute("contenteditable");var u=l[o].querySelectorAll("[spellcheck]");if(0<u.length)for(var b=0;b<u.length;b++)u[b].removeAttribute("spellcheck");var v=l[o].querySelectorAll("[id^=mce_]");if(0<v.length)for(var w=0;w<v.length;w++)v[w].removeAttribute("id");for(var g=l[o].querySelectorAll(".wptb-actions"),f=g.length;0<f&&g[0]&&g[0].parentNode;)g[0].parentNode.removeChild(g[0]),f--;var h=l[o].querySelectorAll("[data-mce-bogus]");if(0<h.length){h=[].concat(_toConsumableArray(h));for(var y=0;y<h.length;y++)h[y]&&h[y].parentNode&&h[y].parentNode.removeChild(h[y])}}}return t}};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var array=[],WPTB_Table=function(e,t,a){var L,n,r,u,l=document.getElementsByClassName("wptb-settings-items"),S=document.getElementsByClassName("wptb-table-setup")[0],T=function(e){var t=e.currentTarget,a=t.rowSpan,n=t.colSpan,r=document.getElementsByClassName("wptb-no-cell-action"),l=document.getElementsByClassName("wptb-single-action"),o=document.getElementsByClassName("wptb-multiple-select-action"),s=document.getElementById("wptb-left-scroll-panel-cell-settings"),i=E(t),d=i[0],c=i[1];if(document.select.isActivated()){if(t.className.match(/wptb-highlighted/)){t.classList.remove("wptb-highlighted");for(var p=0;p<a;p++)for(var m=0;m<n;m++)array[d+p][c+m]=0}else{t.classList.add("wptb-highlighted");for(p=0;p<a;p++)for(m=0;m<n;m++)array[d+p][c+m]=1}var u=document.getElementsByClassName("wptb-highlighted"),b=u.length;if(0===b){for(p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.add("visible"),r[p].removeAttribute("disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");s.classList.remove("visible")}else if(1===b){for(p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.add("visible"),l[p].removeAttribute("disabled");u=u[0],WPTB_Helper.elementOptionsSet("table_cell_setting",u);var v=u.className.match(/wptb-element-((.+-)\d+)/i);["cellWidth","cellHeight"].map(function(e){var t="wptb-el-"+v[1]+"-"+e,a="wptb-el-"+v[1]+"-"+e+"Fixed";if("cellWidth"===e||"cellHeight"===e){var n="",r="";"cellWidth"===e?(n="width",r="getColumnWidth"):"cellHeight"===e&&(n="height",r="getRowHeight");var l=u.style[n],o=document.querySelectorAll("."+t),s=document.querySelector("."+a);o=[].concat(_toConsumableArray(o)),l||u.dataset["wptbFixed"+n.toUpperCase()]?(o.map(function(e){l?e.value=parseFloat(l,10):u.dataset["wptbFixed"+n.toUpperCase()]&&(e.value=u.dataset["wptbFixed"+n.toUpperCase()])}),s.checked=!0):(l=WPTB_Helper[r](L,u),o.map(function(e){e.value=l}),s.checked=!1)}}),s.classList.add("visible")}else{for(p=0;p<o.length;p++)L.isSquare(array)?(o[p].classList.add("visible"),o[p].removeAttribute("disabled")):(o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled"));for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");s.classList.remove("visible")}var w=t.className.match(/wptb-element-table_cell_setting-((.+-)\d+)/i);if(w&&1<w.length){var g="wptb-el-table_cell_setting-"+w[1]+"-emptyCell",f=document.getElementById(g);f&&(f.querySelector('input[type="checkbox"]').checked=t.classList.contains("wptb-empty"))}var h={countMarkedCells:b};WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/cell/mark",t,h)}},C=function(e){for(var t=0;t<e.length;t++){for(var a=0;a<e[t].length;a++)" "+e[t][a];"\n"}L.isSquare(e)},B=function(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),a=document.getElementsByClassName("wptb-multiple-select-action"),n=document.getElementById("wptb-left-scroll-panel-cell-settings"),r=L.getElementsByClassName("wptb-highlighted");r.length;)r[0].classList.remove("wptb-highlighted");n.classList.remove("visible");for(var l=0;l<array.length;l++)for(var o=0;o<array[l].length;o++)array[l][o]=0;for(var s=0;s<a.length;s++)a[s].classList.remove("visible"),a[s].setAttribute("disabled","disabled");for(var i=0;i<e.length;i++)e[i].classList.add("visible"),e[i].removeAttribute("disabled");for(var d=0;d<t.length;d++)t[d].classList.remove("visible"),t[d].setAttribute("disabled","disabled");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/undo-select/active",L)},o=function(){for(var e=[],t=[],a=0;a<L.rows.length;a++){for(var n=L.rows[a].getElementsByTagName("td"),r=0,l=0;l<n.length;l++)r+=n[l].colSpan;e.push(r)}u=Math.max.apply(null,e);var o=L.rows.length;for(a=0;a<o;a++){t[a]=[];for(l=0;l<u;l++)t[a].push(0)}return C(t),t},E=function(e){for(var t=[],a=0;a<u;a++)t[a]=0;for(a=0;a<L.rows.length;a++)for(var n=L.rows[a].getElementsByTagName("td"),r=cellPointer=0;r<u;r+=stepsToMove)if(stepsToMove=1,t[r])t[r]--;else{var l=n[cellPointer++];if(l==e)return[a,r];if(1<l.rowSpan){for(var o=0;o<l.colSpan;o++)t[r+o]=l.rowSpan-1;stepsToMove=l.colSpan}else 1<l.colSpan&&(stepsToMove=l.colSpan)}};if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var s=0;s<l.length;s++)"wptb-apply-inner-border"!==l[s].id&&l[s].classList.add("visible");(L=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),L.style.border="0px solid",L.dataset.reconstraction=1;for(s=0;s<t;s++){(n=L.insertRow(-1)).classList.add("wptb-row");for(var g=0;g<e;g++)(r=new WPTB_Cell(T)).setCoords(s,g),r.getDOMElement().style.borderWidth="1px",n.appendChild(r.getDOMElement())}}else{if(a||(a=document.querySelector(".wptb-preview-table")),!a)return;var i=(L=a).getElementsByTagName("td");if(0<i.length)for(var d=0;d<i.length;d++)WPTB_Cell(T,i[d])}L.mark=function(e){T(e)},L.wptbCell=function(e,t){return WPTB_Cell(e,t)},L.tableSM=function(){return WPTB_TableStateSaveManager},L.undoSelect=function(){B()},L.setMaxAmountOfCells=function(e){u=e},L.getMaxAmountOfCells=function(){return u},L.fillTableArray=function(){return o()},L.recalculateIndexes=function(){WPTB_Helper.recalculateIndexes(this)},L.addColumnWidth=function(p,m){var e=L.getElementsByClassName("wptb-highlighted");if(0<e.length){for(var t=0;t<e.length;t++){var a=e[t].dataset.xIndex;a&&function e(t,a){for(var n=L.rows,r=!1,l=[],o=0;o<n.length;o++)for(var s=n[o].children,i=0;i<s.length;i++){var d=s[i];if(d.dataset.xIndex==t){if(p)d.colSpan==a?(d.style.width=p+"px",d.removeAttribute("data-wptb-fixed-width"),r=!0):(d.style.width=null,d.dataset.wptbFixedWidth=p,o!=n.length-1||r||e(t,a+1));else if(m)d.style.width=null,d.removeAttribute("data-wptb-fixed-width");else if(d.dataset.wptbFixedWidth)d.colSpan==a&&(d.style.width=d.dataset.wptbFixedWidth+"px",d.removeAttribute("data-wptb-fixed-width"));else if(d.style.width){for(var c=0;c<l.length;c++)l[c].style.width=d.style.width;l=[]}else l.push(d);break}}}(a,1)}L.tdDefaultWidth(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L)}},L.tdDefaultWidth=function(){for(var e,t=L.rows,a=0,n=0,r=document.getElementsByClassName("wptb-table-setup")[0],l=r.offsetWidth,o=[],s=[],i=0,d=0,c="",p=window.getComputedStyle(L,null),m=p.getPropertyValue("border-left-width"),u=p.getPropertyValue("border-right-width"),b=parseFloat(m,10)+parseFloat(u,10),v=0;v<t.length;v++)for(var w=t[v].children,g=0;g<w.length;g++){var f=w[g];if(o[parseFloat(f.dataset.xIndex)]||s[parseFloat(f.dataset.xIndex)])s[parseFloat(f.dataset.xIndex)]?f.dataset.wptbFixedWidth||(f.dataset.wptbCssTdAutoWidth=!0):o[parseFloat(f.dataset.xIndex)]&&f.removeAttribute("data-wptb-css-td-auto-width");else if(f.style.width?(o[parseFloat(f.dataset.xIndex)]=parseFloat(f.style.width),f.removeAttribute("data-wptb-css-td-auto-width")):f.dataset.wptbFixedWidth||(s[parseFloat(f.dataset.xIndex)]=L.dataset.wptbTdWidthAuto?parseFloat(L.dataset.wptbTdWidthAuto,10):100,f.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(f,null)){var h=window.getComputedStyle(f,null),y=h.getPropertyValue("padding-left"),S=h.getPropertyValue("padding-right");i=parseFloat(y,10)+parseFloat(S,10);var T=h.getPropertyValue("border-left-width"),C=h.getPropertyValue("border-right-width");d=parseFloat(T,10)+parseFloat(C,10),d/=2,o[parseFloat(f.dataset.xIndex)]?(o[parseFloat(f.dataset.xIndex)]+=i,o[parseFloat(f.dataset.xIndex)]+=d,0==g&&b/2<=parseFloat(T,10)?o[parseFloat(f.dataset.xIndex)]+=parseFloat(T,10)/2:0==g&&b/2>parseFloat(T,10)&&(o[parseFloat(f.dataset.xIndex)]+=b/2-parseFloat(C,10)/2),g==w.length-1&&b/2<=parseFloat(C,10)?o[parseFloat(f.dataset.xIndex)]+=parseFloat(C,10)/2:g==w.length-1&&b/2>parseFloat(C,10)&&(o[parseFloat(f.dataset.xIndex)]+=b/2-parseFloat(C,10)/2)):s[parseFloat(f.dataset.xIndex)]&&(s[parseFloat(f.dataset.xIndex)]+=i,s[parseFloat(f.dataset.xIndex)]+=d,0==g&&b/2<=parseFloat(T,10)?s[parseFloat(f.dataset.xIndex)]+=parseFloat(T,10)/2:0==g&&b/2>parseFloat(T,10)&&(s[parseFloat(f.dataset.xIndex)]+=b/2-parseFloat(T,10)/2),g==w.length-1&&b/2<=parseFloat(C,10)?s[parseFloat(f.dataset.xIndex)]+=parseFloat(C,10)/2:g==w.length-1&&b/2>parseFloat(C,10)&&(s[parseFloat(f.dataset.xIndex)]+=b/2-parseFloat(T,10)/2))}}for(var B=0;B<o.length;B++)o[B]&&(a+=o[B]);for(var E=0,_=0;_<s.length;_++)s[_]&&(n+=s[_],E++);e=a+n,L.dataset.wptbTableTdsSumMaxWidth=e,E?(L.dataset.wptbCellsWidthAutoCount=E,L.mergingellsHorizontally?L.dataset.wptbFixedWidthSize=a:L.removeAttribute("data-wptb-fixed-width-size")):(L.removeAttribute("data-wptb-fixed-width-size"),L.removeAttribute("data-wptb-cells-width-auto-count"));var x=!1,A=void 0;e<l?E?(L.style.minWidth="100%",L.mergingellsHorizontally?(L.style.width="auto",A=(A=(l-a)/E)-i-d,x=!0):L.style.width="100%"):(L.style.width="auto",L.style.minWidth=null,L.style.maxWidth=null):(L.style.maxWidth=null,L.style.minWidth=e+"px",L.style.width="auto",A=L.dataset.wptbTdWidthAuto?L.dataset.wptbTdWidthAuto:"100",x=!0);var P=document.head;if(P){var W=P.querySelector('style[data-wptb-td-auto-width="true"]');W&&P.removeChild(W)}if(x&&((c=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),c.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+A+"px}",P&&P.appendChild(c)),L.dataset.wptbTableAlignment){var N=L.dataset.wptbTableAlignment;r.offsetWidth<L.offsetWidth?L.style.float=null:L.style.float="center"==N?null:N,r.style.float="center"==N?null:N,A&&L.dataset.wptbTableContainerMaxWidth&&L.offsetWidth<L.dataset.wptbTableContainerMaxWidth&&(L.style.width="100%")}else L.style.float=null},L.addRowHeight=function(p,m){var e=L.getElementsByClassName("wptb-highlighted");if(0<e.length){for(var t=0;t<e.length;t++){var a=e[t].dataset.yIndex;a&&function e(t,a){for(var n=L.rows,r=!1,l=[],o=0;o<n.length;o++)for(var s=n[o].children,i=0;i<s.length;i++){var d=s[i];if(d.dataset.yIndex==t)if(p){if(d.rowSpan==a){d.style.height=p+"px",d.removeAttribute("data-wptb-fixed-heidht"),r=!0;continue}d.style.height=null,d.dataset.wptbFixedHeight=p,i!=s.length-1||r||e(t,a+1)}else if(m)d.style.height=null,d.removeAttribute("data-wptb-fixed-heidht");else if(d.dataset.wptbFixedHeight)(d.rowSpan=a)&&(d.style.height=d.dataset.wptbFixedHeight+"px",d.removeAttribute("data-wptb-fixed-width"));else if(d.style.height){for(var c=0;c<l.length;c++)l[c].style.height=d.style.height;l=[]}else l.push(d)}}(a,1)}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L)}},L.reconstraction=function(){var e=L.getElementsByTagName("td");L.mergingellsHorizontally=!1,L.mergingCellsVertically=!1,L.dataset.reconstraction=1;for(var t=0,a=0;a<e.length&&(1<e[a].colSpan&&(L.dataset.reconstraction=0,L.mergingellsHorizontally=!0,t++),1<e[a].rowSpan&&(L.dataset.reconstraction=0,L.mergingCellsVertically=!0,t++),2!=t);a++);},L.addColumnEnd=function(){var e=void 0,t=document.getElementsByClassName("wptb-preview-table"),a=void 0,n=void 0;0<t.length&&(a=t[0].querySelector("td")),a&&(n=a.getAttribute("style"));for(var r=0;r<L.rows.length;r++)e=new WPTB_Cell(T),n&&(e.getDOMElement().setAttribute("style",n),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),L.rows[r].appendChild(e.getDOMElement()),array[r].push(0);u++,L.recalculateIndexes(),L.tdDefaultWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()},L.addColumnStart=function(){var e=void 0,t=void 0,a=document.getElementsByClassName("wptb-preview-table"),n=void 0,r=void 0;0<a.length&&(n=a[0].querySelector("td")),n&&(r=n.getAttribute("style"));for(var l=0;l<L.rows.length;l++)e=new WPTB_Cell(T),r&&(e.getDOMElement().setAttribute("style",r),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),(t=L.rows[l].getElementsByTagName("td")[0])?L.rows[l].insertBefore(e.getDOMElement(),t):L.rows[l].appendChild(e.getDOMElement()),array[l].push(0);u++,L.recalculateIndexes(),L.tdDefaultWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()},L.addColumnAfter=function(e){var t=L.rows,a=void 0,n=void 0,r=void 0;if(null!=e&&"number"==typeof e?(r=e,a=document.querySelector('[data-x-index="'+r+'"]')):(a=document.querySelector(".wptb-highlighted"),r=E(a)[1]),a)if(n=a.getAttribute("style"),u-r-a.colSpan+1==1)L.addColumnEnd();else{for(var l=function(e){var t=new WPTB_Cell(T);return e&&(t.getDOMElement().setAttribute("style",e),t.getDOMElement().style.width=null,t.getDOMElement().style.height=null),t.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor"),t},o=0;o<t.length;o++)for(var s=t[o].children,i=0;i<s.length;i++)if(parseInt(s[i].dataset.xIndex)<=r){if(parseInt(s[i].dataset.xIndex)+s[i].colSpan==r+a.colSpan){var d=l(n),c=s[i].nextSibling;c?t[o].insertBefore(d.getDOMElement(),c):t[o].appendChild(d.getDOMElement());break}if(parseInt(s[i].dataset.xIndex)+s[i].colSpan>r+a.colSpan){s[i].colSpan++,1<s[i].rowSpan&&(o+=s[i].rowSpan-1);break}}else if(parseInt(s[i].dataset.xIndex)>r){var p=l(n);t[o].insertBefore(p.getDOMElement(),s[i]);break}for(var m=0;m<array.length;m++)array[m].push(0);u++,C(array),L.recalculateIndexes(),L.addColumnWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()}},L.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),t=E(e)[1];0===t?L.addColumnStart():L.addColumnAfter(t-1)},L.addRowToTheEnd=function(){var e=L.insertRow(-1),t=void 0,a=void 0,n=document.getElementsByClassName("wptb-preview-table");if(e.classList.add("wptb-row"),0<n.length){n=n[0];for(var r=0;r<u;r++){t=new WPTB_Cell(T);var l=n.querySelector('[data-x-index="'+r+'"]');if(l){var o=l.getAttribute("style");t.getDOMElement().setAttribute("style",o),t.getDOMElement().style.height=null}e.appendChild(t.getDOMElement())}a=Array.from(array[0]),array.push(a),C(array),L.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(L),L.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()}},L.addRowToTheStart=function(){var e=L.insertRow(0),t=void 0,a=void 0,n=document.getElementsByClassName("wptb-preview-table");if(e.classList.add("wptb-row"),0<n.length){n=n[0];for(var r=0;r<u;r++){t=new WPTB_Cell(T);var l=n.querySelector('[data-x-index="'+r+'"]');if(l){var o=l.getAttribute("style");t.getDOMElement().setAttribute("style",o),t.getDOMElement().style.height=null}e.appendChild(t.getDOMElement())}a=Array.from(array[0]),array.push(a),C(array),L.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(L),L.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()}},L.addRowBefore=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=E(e)[0],n=void 0;0===a&&(a=-1);for(var r=a-1;0<=r;r--){var l=L.rows[r].children,o=l.length;if(0<o)for(var s=0;s<o;s++)if(1==l[s].rowSpan){a=r,n=!0;break}if(n)break}-1===a?L.addRowToTheStart():L.addRowAfter(a,t)},L.addRowAfter=function(e,t){var a,n=void 0;if(null!=e&&"number"==typeof e||null!=t)n=e;else{var r=document.querySelector(".wptb-highlighted");t=r.getAttribute("style"),n=(e=E(r)[0])+r.rowSpan-1}var l=0;if(n<L.rows.length-1){for(var o=0;o<=n;o++){var s=L.rows[o].children,i=s.length;if(0<i)for(var d=0;d<i;d++){n<s[d].rowSpan-1+o&&s[d].rowSpan++}}var c=L.rows[n+1].children,p=c.length;if(0<p)for(var m=0;m<p;m++)l+=c[m].colSpan}else l=array[0].length;var u=L.insertRow(n+1);for(u.classList.add("wptb-row"),g=0;g<l;g++){var b=new WPTB_Cell(T),v=L.querySelector('[data-x-index="'+g+'"]');if(v){var w=v.getAttribute("style");b.getDOMElement().setAttribute("style",w),b.getDOMElement().style.height=null}u.appendChild(b.getDOMElement())}a=Array.from(array[0]),array.push(a),C(array),L.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(L),L.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after"),(new WPTB_TableStateSaveManager).tableStateSet()},L.isSquare=function(e){for(var t,a,n=-1,r=-1,l=-1,o=-1,s=0,i=0;i<e.length;i++)for(var d=0;d<e[i].length;d++)1==e[i][d]&&((d<r||-1==r)&&(r=d),(i<n||-1==n)&&(n=i));for(i=e.length-1;-1<i;i--)for(d=e[i].length-1;-1<d;d--)1==e[i][d]&&(o<d&&(o=d),l<i&&(l=i));for(i=n;i<l;i++)for(d=r;d<o;d++)if(0==e[i][d]||null==e[i][d])return!1;for(i=0;i<e.length;i++)for(d=0;d<e[i].length;d++)1==e[i][d]&&s++;return(t=l-n+1)*(a=o-r+1)===s&&[t,a]},L.mergeCells=function(){for(var e=L.isSquare(array),t=e[0],a=e[1],n=document.querySelector(".wptb-highlighted"),r=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),l=[],o=0;o<r.length;o++){var s=r[o].getElementsByClassName("wptb-ph-element");if(0<s.length)for(var i=s.length,d=0;d<i;d++)l.push(s[d]);r[o].parentNode.removeChild(r[o])}if(0<l.length)for(var c=0;c<l.length;c++)n.appendChild(l[c]);n.colSpan=a,n.rowSpan=t,L.recalculateIndexes(),L.reconstraction();var p=n.style.width,m=n.dataset.wptbFixedWidth;p?L.addColumnWidth(parseFloat(p,10)):m?L.addColumnWidth():L.addColumnWidth(!1,!0);var u=n.style.height,b=n.dataset.wptbFixedHeight;u?L.addRowHeight(parseFloat(u,10)):b?L.addRowHeight():L.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()},L.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,a=e.colSpan,n=e.getAttribute("style"),r=E(e)[0],l=L.rows[r],o=e.dataset.xIndex;e.rowSpan=1;for(var s=e.colSpan=1;s<a;s++){var i=new WPTB_Cell(T);i.getDOMElement().setAttribute("style",n),i.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?l.insertBefore(i.getDOMElement(),e.nextSibling):l.appendChild(i.getDOMElement())}if(1<t)for(var d=1;d<t;d++){var c=void 0,p=L.rows[r+d],m=p.children,u=m.length;if(0<u)for(var b=0;b<u;b++)if(Number(m[b].dataset.xIndex)>Number(o)){c=m[b];break}for(var v=0;v<a;v++){var w=new WPTB_Cell(T);w.getDOMElement().setAttribute("style",n),null!=c?p.insertBefore(w.getDOMElement(),c):p.appendChild(w.getDOMElement())}}L.recalculateIndexes(),L.reconstraction(),L.addColumnWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()},L.findRowspannedCells=function(e){var t,a=[];if(actualPoints=function(e){for(var t=L.rows[e].getElementsByTagName("td"),a=0,n=0;n<t.length;n++)a+=t[n].colSpan;return a}(e),actualPoints===u)return[];t=u-actualPoints;for(var n=e-1;0<=n&&t;n--){var r=L.rows[n].getElementsByTagName("td");for(n=0;n<r.length;n++)1<r[n].rowSpan&&(a.push(r[n]),t-=r[n].colSpan)}return a},L.addLackingCells=function(){for(var e=[],t=0;t<L.rows.length;t++)e.push(0);for(t=0;t<L.rows.length;t++)for(var a=L.rows[t].getElementsByTagName("td"),n=0;n<a.length;n++)if(1<a[n].rowSpan)for(var r=1;r<a[n].rowSpan;r++)e[t+r]++;for(t=0;t<L.rows.length;t++){a=L.rows[t].getElementsByTagName("td");var l=0;for(n=0;n<a.length;n++)l+=a[n].colSpan;l+=e[t],difference=u-l;for(n=0;n<difference;n++){var o=new WPTB_Cell(T);L.rows[t].appendChild(o.getDOMElement())}}},L.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=e.rowSpan,n=E(e)[0],r=void 0;null==a&&(a=1);for(var l=0;l<a;l++){var o=L.rows[n].children,s=L.rows[n+1],i=void 0,d=void 0,c=[];if(null!=s){d=(i=s.children).length;for(var p=0;p<o.length;p++)if(1<o[p].rowSpan){var m=new WPTB_Cell(T);m.getDOMElement().setAttribute("style",t),m.getDOMElement().colSpan=o[p].colSpan,m.getDOMElement().rowSpan=o[p].rowSpan-1;for(var u=void 0,b=0;b<d;b++)if(Number(i[b].dataset.xIndex)>Number(o[p].dataset.xIndex)){u=i[b];break}u?c.push([m,u]):c.push([m])}if(0<c.length)for(var v=0;v<c.length;v++)null!=c[v][1]?s.insertBefore(c[v][0].getDOMElement(),c[v][1]):s.appendChild(c[v][0].getDOMElement())}var w=L.rows;if(0<w.length)for(var g=0;g<n;g++){var f=w[g].children;if(0<f.length)for(var h=0;h<f.length;h++)f[h].rowSpan-1>=n-g&&f[h].rowSpan--}if(r=Array.from(array[0]),array.pop(r),C(array),L.getElementsByTagName("tbody")[0].removeChild(L.rows[n]),0==L.rows.length){WPTB_Helper.toggleTableEditMode(),S.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table";var y=document.getElementsByClassName("wptb-save-btn");0<y.length&&((y=y[0]).classList.add("wptb-save-disabled"),y.classList.remove("active"))}else L.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(L),WPTB_Helper.dataTitleColumnSet(L),L.reconstraction()}B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()},L.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,a=e.colSpan,n=0;n<a;n++){for(var r=0;r<L.rows.length;r++){var l=L.rows[r].children,o=l.length;if(0<o)for(var s=o-1;0<=s;s--){if(Number(l[s].dataset.xIndex)==Number(t)){1<l[s].colSpan?l[s].colSpan--:L.rows[r].removeChild(l[s]);break}if(Number(l[s].dataset.xIndex)<Number(t)&&Number(l[s].dataset.xIndex)+Number(l[s].colSpan-1)>=t){1<l[s].colSpan&&l[s].colSpan--;break}}}for(var i=0;i<L.rows.length;i++)null!=array[i]&&array[i].pop();if(u--,0==L.querySelectorAll("td").length){WPTB_Helper.toggleTableEditMode(),S.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table";var d=document.getElementsByClassName("wptb-save-btn");0<d.length&&((d=d[0]).classList.add("wptb-save-disabled"),d.classList.remove("active"))}else L.recalculateIndexes(),L.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(L),L.reconstraction()}B(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",L),(new WPTB_TableStateSaveManager).tableStateSet()},array=o(),B(),C(array),S.appendChild(L),L.recalculateIndexes(!0),L.reconstraction(),L.tdDefaultWidth(),S.onresize=function(){L.tdDefaultWidth()},WPTB_LeftPanel(),WPTB_Helper.wptbDocumentEventGenerate("wptb:table:generated",document),WPTB_Helper.elementStartScript(L,"table_setting"),WPTB_Helper.elementOptionsSet("table_setting",L)},WPTB_TableSettingsData={borderColor:"",setTableSetting:function(e,t){this[e]=t},getTableSetting:function(e){return this[e]}},WPTB_TableStateSaveManager=(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},function(){this.tableStateSet=function(e){if(!(e&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var t=document.getElementsByClassName("wptb-table-setup"),a="";0<t.length?a=(t=t[0]).querySelector(".wptb-preview-table"):t="",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));var n="";if(t){for(var r=(n=t.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),l=0;l<r.length;l++)r[l].classList.remove("wptb-highlighted");for(var o=n.getElementsByClassName("wptb-directlyhovered"),s=0;s<o.length;s++)o[s].classList.remove("wptb-directlyhovered");var i=n.querySelectorAll(".mce-content-body");if(0<i.length)for(var d=0;d<i.length;d++)i[d].classList.remove("mce-content-body");var c=n.querySelectorAll("[data-mce-style]");if(0<c.length)for(var p=0;p<c.length;p++)c[p].removeAttribute("data-mce-style");var m=n.querySelectorAll("[id^=mce_]");if(0<m.length)for(var u=0;u<m.length;u++)m[u].removeAttribute("id")}var b="",v=document.head;if(v){var w=v.querySelector('style[data-wptb-td-auto-width="true"]');w&&(b=w.innerHTML)}var g="",f=document.getElementById("wptb-setup-name");if(f&&(g=f.value),window.wptbTableStateSaving.push([n,b,g]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,0<window.wptbTableStateSaving.length-1){var h=document.getElementsByClassName("wptb-undo");0<h.length&&(h=h[0]).classList.remove("wptb-undoredo-disabled")}var y=document.getElementsByClassName("wptb-redo");0<y.length&&(y=y[0]).classList.add("wptb-undoredo-disabled");var S=document.getElementsByClassName("wptb-save-btn");0<S.length&&(!(S=S[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==S.dataset.wptbTableStateNumberSave||!a?(S.classList.add("wptb-save-disabled"),S.classList.remove("active")):(S.classList.remove("wptb-save-disabled"),S.classList.add("active")))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&0<window.wptbTableStateSaving.length){if("undo"==e){if(!(0<window.wptbTableStateNumberShow))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length))return!1;window.wptbTableStateNumberShow++}var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0],0==window.wptbTableStateNumberShow?t&&t.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&t&&t.classList.remove("wptb-undoredo-disabled"));var a=document.getElementsByClassName("wptb-redo");0<a.length&&(a=a[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?a&&a.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&a&&a.classList.remove("wptb-undoredo-disabled"));var n=document.getElementsByClassName("wptb-save-btn");0<n.length&&(!(n=n[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==n.dataset.wptbTableStateNumberSave?(n.classList.add("wptb-save-disabled"),n.classList.remove("active")):(n.classList.add("active"),n.classList.remove("wptb-save-disabled")));var r=document.getElementsByClassName("wptb-table-setup");if(0<r.length){if(r=r[0],window.wptbTableStateSaving[window.wptbTableStateNumberShow]){window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML"in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(r.outerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML);var l=document.querySelector(".wptb-table-setup");l&&0==l.children.length&&(n.classList.add("wptb-save-disabled"),n.classList.remove("active"));var o=document.head;if(o){var s=o.querySelector('style[data-wptb-td-auto-width="true"]');if(s&&o.removeChild(s),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]){var i=document.createElement("style");i.setAttribute("data-wptb-td-auto-width",!0),i.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],o.appendChild(i)}}var d=document.getElementById("wptb-setup-name");void 0!==window.wptbTableStateSaving[window.wptbTableStateNumberShow][2]&&d&&(d.value=window.wptbTableStateSaving[window.wptbTableStateNumberShow][2])}var c=document.getElementsByTagName("body");0<c.length&&(c=c[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel();var p=document.getElementById("wptb-left-scroll-panel-cell-settings");p&&p.classList.remove("visible")}}},this.tableStateClear=function(){delete window.wptbTableStateSaving,delete window.wptbTableStateNumberShow;var e=document.getElementsByClassName("wptb-save-btn");0<e.length&&(e=e[0]).removeAttribute("data-wptb-table-state-number-save");var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0]).classList.add("wptb-undoredo-disabled");var a=document.getElementsByClassName("wptb-redo");0<a.length&&(a=a[0]).classList.add("wptb-undoredo-disabled")}});
//# sourceMappingURL=admin.js.map
