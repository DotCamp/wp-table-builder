function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_ActionsField=function(){var o=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(e,t){var n=document.getElementsByTagName("body")[0],a=document.getElementsByClassName("wptb-actions");if(0!=a.length){var r=a[0].activeElem;for(r&&r.classList.remove("wptb-directlyhovered");0!=a.length;)a[0].parentNode.removeChild(a[0])}1==e&&(r=document.createElement("span"),e=document.createElement("span"),(a=document.createElement("div")).classList.add("wptb-actions"),r.classList.add("dashicons","dashicons-trash","wptb-delete-action"),e.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),a.appendChild(e),a.appendChild(r),n.appendChild(a),a.activeElem=t,a.type=1,r.onclick=function(e){var e=e.target.parentNode.activeElem,t=e.parentNode;e.className.match(/wptb-element-(.+)-(\d+)/i);e&&t.removeChild(e),e&&"object"===_typeof(e)&&e.hasOwnProperty("kind")&&"text"==e.kind&&(t=t.parentNode,WPTB_Helper.rowIsTop(t))&&(t=WPTB_Helper.findAncestor(t,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(t),(new WPTB_ActionsField).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.wptbDocumentEventGenerate("element:removed:dom",document,e)},e.onclick=function(e){var t,n,e=e.target.parentNode.activeElem,a=e.parentNode,r=e.className.match(/wptb-element-(.+)-(\d+)/i);r&&Array.isArray(r)?(r=r[1],(t={}).kind=r,t.elemProt=e,t.tinyMceClear=!0,(t=new WPTB_ElementObject(t)).getDOMElement().classList.remove("edit-active"),a.insertBefore(t.getDOMElement(),e.nextSibling)):(t={},(n=e.cloneNode(!0)).classList.remove("wptb-directlyhovered"),t.getDOMElement=function(){return n},applyGenericItemSettings(t),a.insertBefore(t.getDOMElement(),e.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",e,t.getDOMElement())),WPTB_innerElementSet(t.getDOMElement()),new WPTB_ActionsField(1,e).setParameters(e),(new WPTB_TableStateSaveManager).tableStateSet()},t.classList.contains("wptb-ph-element")&&((n=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),n.draggable=!0,a.appendChild(n),n.ondragstart=function(e){var t,n,a=wp.template("wptb-element-icons-directories")({}),a=JSON.parse(a),r=e.target.parentNode.activeElem,l=r.className.match(/wptb-element-(.+)-(\d+)/i);l&&Array.isArray(l)?(n=l[1],r.classList.add("wptb-moving-mode"),a&&"object"===_typeof(a)&&a[n]&&(t=WPTB_Helper.getElementIcon(a[n])),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.setData("node","wptb-element-"+l[1]+"-"+l[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+l[1]+"-"+l[2]),e.dataTransfer.setData("wptbElIndic-"+l[1],"wptbElIndic-"+l[1]),"text"==(r=e.target.parentNode.activeElem).kind&&(a=r.parentNode.parentNode,WPTB_Helper.rowIsTop(a))&&(n=WPTB_Helper.findAncestor(a,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(n)):o.style.display="none",o.actionsHide()},n.ondragend=function(e){WPTB_Helper.elementDragEndClear()}),a.style.display="flex",o.wptbActions=a),WPTB_Helper.wptbDocumentEventGenerate("wptb:actionfield:generated",document)},this.setParameters=function(t){var e,n;o.wptbActions||(0<(e=document.getElementsByClassName("wptb-actions")).length?o.wptbActions=e[0]:o.wptbActions=!1),o.wptbActions&&o.wptbActions.classList.contains("wptb-actions")&&(o.wptbActions.style.display="flex",e=t.getBoundingClientRect(),n=document.getElementsByClassName("wptb-container")[0],o.wptbActions.style.top=parseFloat(e.top)-15+"px",o.wptbActions.style.left=parseFloat(e.right)-parseFloat(o.wptbActions.clientWidth)+1+"px",o.wptbActions.style.display="flex",t.classList.add("wptb-directlyhovered"),n.onscroll=function(){var e=t.getBoundingClientRect();o.wptbActions.style.top=parseFloat(e.top)-15+"px"})},this.leaveFromField=function(e,t,n){var a;o.wptbActions||(0<(a=document.getElementsByClassName("wptb-actions")).length?o.wptbActions=a[0]:o.wptbActions=!1),o.wptbActions&&(e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-actions")||e.relatedTarget.classList.contains("wptb-move-action")||e.relatedTarget.classList.contains("wptb-duplicate-action")||e.relatedTarget.classList.contains("wptb-delete-action")||e.relatedTarget.classList.contains("wptb-prebuilt-mark-action"))?(o.wptbActions||(o.wptbActions=document.getElementsByClassName("wptb-actions")[0]),o.wptbActions.onmouseleave=function(e){null!=e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&e.relatedTarget!=o.wptbActions.activeElem&&(WPTB_Helper.findAncestor(e.relatedTarget,"wptb-directlyhovered"),o.wptbActions.activeElem),(new WPTB_ActionsField).leaveFromField(e,e.relatedTarget.parentNode.parentNode),e.target.activeElem.classList.remove("wptb-directlyhovered")}):(t.classList.remove("wptb-directlyhovered"),o.wptbActions.style.display="none",e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&(o.addActionField(1,e.relatedTarget.parentNode),o.setParameters(e.relatedTarget.parentNode))))},this.actionsRemove=function(){var e;o.wptbActions||0<(e=document.getElementsByClassName("wptb-actions")).length&&(o.wptbActions=e[0]),o.wptbActions&&o.wptbActions.parentNode.removeChild(o.wptbActions)},this.actionsHide=function(){var e;o.wptbActions||0<(e=document.getElementsByClassName("wptb-actions")).length&&(o.wptbActions=e[0]),o.wptbActions&&(o.wptbActions.style.opacity=0)}};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],s=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return i}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(e,t,n){t[e]=n()}("WPTB_BackgroundMenu",self||global,function(){var e=new function(){function n(){return document.querySelector(".wptb-bg-color-selectors")}function a(){Array.from(u().querySelectorAll("td")).map(function(e){e.classList.remove("wptb-highlighted")})}function r(){var a,n,e=(t=u().getBoundingClientRect()).width,t=t.height,r=(l=document.querySelector(".wptb-bg-color-selectors .wptb-bg-column-rail")).getBoundingClientRect().height;l.style.top="-".concat(r,"px"),l.style.width="".concat(e,"px"),a=l,Array.from(a.querySelectorAll(".wptb-bg-rail-mark")).map(function(e){e.remove()}),r=u(),r=Array.from(r.querySelectorAll("tr")).reduce(function(e,t){var n;return null===e||(n=t.querySelectorAll("td").length,e.querySelectorAll("td").length<n)?t:e},null),Array.from(r.querySelectorAll("td")).map(function(e){e=e.getBoundingClientRect();return{cellX:e.x,cellWidth:e.width}}).map(function(e,t){var n=v();n.style.width="".concat(e.cellWidth,"px"),n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),p.commit("updateHoveredCellElement",{element:null,index:t})}),a.appendChild(n)});var l=(e=document.querySelector(".wptb-bg-color-selectors .wptb-bg-row-rail")).getBoundingClientRect().width;e.style.left="-".concat(l,"px"),e.style.height="".concat(t,"px"),n=e,Array.from(n.querySelectorAll(".wptb-bg-rail-mark")).map(function(e){e.remove()}),Array.from(u().querySelectorAll("tr")).map(function(e){var t=e.getBoundingClientRect();return{element:e,rowHeight:t.height}}).map(function(t){var e=v();e.style.height="".concat(t.rowHeight,"px"),e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),p.commit("updateHoveredRowElement",t.element)}),n.appendChild(e)})}function l(){var e=document.createElement("div"),t=(e.classList.add("wptb-bg-color-selectors"),document.createElement("div")),n=(t.classList.add("wptb-bg-row-rail"),document.createElement("div")),a=(n.classList.add("wptb-row-selection","wptb-bg-selection-item"),n.title="Select row",document.createElement("div")),r=(a.classList.add("wptb-bg-selection-item-inner-wrapper"),n.appendChild(a),WPTB_IconManager.getIcon("arrow-alt-circle-right","wptb-selector-icon-wrapper").then(function(e){a.appendChild(e)}),document.createElement("div")),l=(r.classList.add("wptb-bg-column-rail"),document.createElement("div")),o=(l.classList.add("wptb-col-selection","wptb-bg-selection-item"),l.title="Select column",document.createElement("div"));o.classList.add("wptb-bg-selection-item-inner-wrapper"),l.appendChild(o),WPTB_IconManager.getIcon("arrow-alt-circle-down","wptb-selector-icon-wrapper").then(function(e){o.appendChild(e)}),l.addEventListener("click",function(e){var t;e.preventDefault(),e.stopPropagation(),null!==(e=p.getters.hoveredCell.index)&&(t=(e=_toArray(h(e)))[0],e=e.slice(1),b(t),e.map(function(e){b(e,!0)}),p.commit("setMenuSelectedTableElement",{type:p.getters.types.selected.column,item:[t].concat(_toConsumableArray(e))}))}),t.appendChild(n),r.appendChild(l),e.appendChild(r),e.appendChild(t),document.querySelector(".wptb-builder-content .wptb-table-setup").appendChild(e)}function o(){y().addEventListener("click",function(e){var t,n;e.preventDefault(),e.stopPropagation(),(e=p.getters.hoveredRow)&&(t=(n=_toArray(Array.from(e.querySelectorAll("td"))))[0],n=n.slice(1),b(t),n.map(function(e){b(e,!0)}),p.commit("setMenuSelectedTableElement",{type:p.getters.types.selected.row,item:e}))}),Array.from(u().querySelectorAll("tr")).map(function(e){e.addEventListener("mouseenter",f)})}function i(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];n()&&(n().dataset.visible=t),WPTB_Store.get("proStatus")||(e=document.querySelector(".wptb-table-setup"))&&(e.dataset.overflowVisible=t)}function s(){Array.from(u().querySelectorAll("td")).map(function(e){e.addEventListener("click",m),e.addEventListener("mouseenter",w)})}function c(){Array.from(u().querySelectorAll("td")).map(function(e){e.removeEventListener("click",m),e.removeEventListener("mouseenter",w)}),g().classList.remove("wptb-bg-selection-visible"),Array.from(u().querySelectorAll("tr")).map(function(e){e.removeEventListener("mouseenter",f)}),p.commit("updateHoveredRowElement",null),a(),p.dispatch("clearSelection"),p.dispatch("clearHoverStates")}function t(e){e.subscribe(function(e){var t,n,a,r,l=e.type,o=e.payload;switch(l){case"updateHoveredRowElement":o&&(t=o,n=document.querySelector(".wptb-table-setup").getBoundingClientRect().y,t=t.getBoundingClientRect(),a=t.height,t=t.y,(r=y()).classList.add("wptb-bg-selection-visible"),r.style.height="".concat(a,"px"),r.style.top="".concat(t-n,"px"));break;case"updateHoveredCellElement":a=o.index,0<(a=h(a)).length&&(r=g(),a=a.reduce(function(e,t){return e.offsetWidth>t.offsetWidth?t:e},a[0]),t=document.querySelector(".wptb-table-setup").getBoundingClientRect().x,n=(a=a.getBoundingClientRect()).width,a=a.x,r.classList.add("wptb-bg-selection-visible"),r.style.left="".concat(a-t,"px"),r.style.width="".concat(n,"px"))}})}var d=this,p=(this.initialized=!1,null),u=function(){return document.querySelector(".wptb-table-setup .wptb-preview-table")},b=(this.applyOptions=function(){var e,t,n,r,l,a,o,i,s,c,d=((0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||{row:{headerBg:(d=u()).dataset.wptbHeaderBackgroundColor,evenBg:d.dataset.wptbEvenRowBackgroundColor,oddBg:d.dataset.wptbOddRowBackgroundColor,headerHoverBg:d.dataset.wptbHeaderHoverBackgroundColor,evenHoverBg:d.dataset.wptbEvenRowHoverBackgroundColor,oddHoverBg:d.dataset.wptbOddRowHoverBackgroundColor}}).row;n=(e=d).headerBg,r=e.evenBg,l=e.oddBg,a=e.headerHoverBg,o=e.evenHoverBg,i=e.oddHoverBg,e=u(),e=_toArray(Array.from(e.querySelectorAll("tr"))),s=e[0],e=e.slice(1),c="wptb-row-has-hover",t=s,""===(n=n)||null===n?t.style.removeProperty("background-color"):t.style.backgroundColor=n,a?(s.classList.add(c),s.style.setProperty("--hover-bg-color",a)):s.classList.remove(c),e.map(function(e,t){var n=["",null,void 0],a=e.dataset.wptbBgColor,n=!n.includes(a);e.style.backgroundColor=n?a:t%2==0?r:l,t%2==0?(o?e.classList.add(c):e.classList.remove(c),e.style.setProperty("--hover-bg-color",o)):(i?e.classList.add(c):e.classList.remove(c),e.style.setProperty("--hover-bg-color",i))})},function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.nodeName.toLowerCase();t||a(),(e="td"!==n?e.parentNode:e).classList.add("wptb-highlighted")}),m=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.nodeName.toLowerCase(),n=e.target;"td"!==t&&(n=e.target.parentNode),b(n),p.commit("setMenuSelectedTableElement",{type:p.state.types.selected.cell,item:n})},g=function(){return document.querySelector(".wptb-col-selection")},y=function(){return document.querySelector(".wptb-row-selection")},f=function(e){p.commit("updateHoveredRowElement",e.target)},w=function(e){var a=e.target,e=Array.from(a.parentNode.querySelectorAll("td")).reduce(function(e,t,n){return t===a?n:e},-1);p.commit("updateHoveredCellElement",{element:a,index:e})},h=function(e){var t="number"==typeof e?e:Number.parseInt(e,10),n=[];return isNaN(t)||Array.from(u().querySelectorAll("tr")).map(function(e){e=Array.from(e.querySelectorAll("td")).splice(t,1),e=_slicedToArray(e,1)[0];e&&n.push(e)}),n},v=function(){var e=document.createElement("div");return e.classList.add("wptb-bg-rail-mark"),e};this.init=function(){document.addEventListener("wptbSectionChanged",function(e){var t,e=e.detail;d.initialized||"background_menu"!==e||(WPTB_ControlsManager.callControlScript("BackgroundMenu","wptb-background-menu"),d.initialized=!0),"background_menu"!==WPTB_Helper.getPreviousSection()&&"background_menu"===e&&(n()||l(),i(!0),WPTB_Store.get("proStatus")&&s(),s(),o(),t=u(),Array.from(t.querySelectorAll(".edit-active")).map(function(e){e.classList.remove("edit-active")}),(t=document.querySelector(".wptb-actions"))&&(t.style.display="none"),r(),p.commit("updateHoveredCellElement",{element:null,index:0}),p.commit("updateHoveredRowElement",u().querySelector("tr"))),"background_menu"===WPTB_Helper.getPreviousSection()&&"background_menu"!==e&&(i(!1),c())}),document.addEventListener("wp-table-builder/table-changed/after",function(){d.applyOptions()})},this.addStore=function(e){p||t(p=e)}};return e.init(),e}),function(){var e=window.location.href;new RegExp("[?&]page=wptb-builder").exec(e)&&document.addEventListener("DOMContentLoaded",function(){var a,e,r=WPTB_Helper.detectMode();r?(a=new XMLHttpRequest,e=ajaxurl+"?action=get_table&id="+r,a.open("GET",e,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(e){var t,n;4==this.readyState&&200==this.status&&(n=JSON.parse(a.responseText),document.getElementById("wptb-setup-name").value=n[0],n[1]?((t=document.getElementsByClassName("wptb-table-setup")[0]).appendChild(WPTB_Parser(n[1])),document.getElementsByTagName("body")[0],WPTB_Table(),(n=document.querySelector(".wptb-preview-table"))&&(n.className.match(/wptb-element-((.+-)\d+)/i)||n.classList.add("wptb-element-main-table_setting-"+r),n.dataset.wptbTableContainerMaxWidth)&&(t.style.maxWidth=n.dataset.wptbTableContainerMaxWidth+"px",n.tdDefaultWidth()),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()):document.getElementsByClassName("wptb-table-generator")[0].style.display="table")},a.send(null)):(new WPTB_TableStateSaveManager).tableStateSet(),document.counter=new ElementCounters,document.select=new MultipleSelect,WPTB_Initializer();settings=WPTB_Settings()})}();var WPTB_Cell=function(e,n){n||((n=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px",""!=(t=jQuery("#wptb-table-inner-border-number").val())&&0!=parseInt(t)&&(n.style.border=t+"px solid "+jQuery("#wptb-table-border-color").val()),n.classList.add("wptb-droppable","wptb-cell"),t=(t=WPTB_Helper.newElementProxy("text")).getDOMElement(),n.appendChild(t)),n.draggable=!1,e&&(n.onclick=e),n.ondblclick=function(e){e.stopPropagation();var t=document.querySelector(".wptb-table-setup");!t||t.classList.contains("wptb-preview-table-manage-cells")||"0"===e.target.dataset.yIndex&&"1"===t.dataset.wptbSortableTable||e.target!=e.currentTarget||(WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",e.target),t=(t=WPTB_Helper.newElementProxy("text")).getDOMElement(),n.appendChild(t),WPTB_innerElementSet(t))},WPTB_innerElementSet(n),WPTB_Helper.elementStartScript(n,"table_cell_setting");var t,l=n.getElementsByClassName("wptb-ph-element");if(0<l.length){function a(e){l[e].getDOMElement=function(){return l[e]},WPTB_innerElementSet(l[e]);var t=l[e].className.match(/wptb-element-((.+-)\d+)/i);if(t&&Array.isArray(t)){var n=t[1].split("-"),a=(l[e].kind=n[0],applyGenericItemSettings(l[e],t[1]),l[e].getElementsByClassName("wptb-in-element"));if(0<a.length)for(var r=0;r<a.length;r++)!function(e){var t={getDOMElement:function(){return a[e]}};applyGenericItemSettings(t)}(r)}}for(var r=0;r<l.length;r++)a(r)}return this.getDOMElement=function(){return n},this.setCoords=function(e,t){var n=this.getDOMElement();n.dataset.yIndex=e,n.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},n.getCellDimensions=function(){var e,t,n,a,r=window.getComputedStyle(this,null),l=r.getPropertyValue("padding-left"),o=r.getPropertyValue("padding-right"),i=r.getPropertyValue("border-left-width"),s=r.getPropertyValue("border-right-width"),c=r.getPropertyValue("padding-top"),d=r.getPropertyValue("padding-bottom"),p=r.getPropertyValue("border-top-width"),r=r.getPropertyValue("border-bottom-width"),l=parseInt(this.offsetWidth,10)-parseInt(l,10)-parseInt(o,10),o=parseInt(this.offsetHeight,10)-parseInt(c,10)-parseInt(d,10),c=WPTB_Helper.findAncestor(this,"wptb-preview-table");return c&&("collapse"===c.style.borderCollapse?(l=l-parseInt(i,10)/2-parseInt(s,10)/2,o=o-parseInt(p,10)/2-parseInt(r,10)/2,a=(d=window.getComputedStyle(c,null)).getPropertyValue("border-left-width"),e=d.getPropertyValue("border-right-width"),t=d.getPropertyValue("border-top-width"),d=d.getPropertyValue("border-bottom-width"),(n=this.parentNode)&&"tr"===n.nodeName.toLowerCase()&&(n.firstChild&&n.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(a,10)>parseInt(i,10)&&(l+=-(parseInt(a,10)-parseInt(i,10))/2),n.lastChild&&n.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(e,10)>parseInt(s,10)&&(l+=-(parseInt(e,10)-parseInt(s,10))/2),a=n.parentNode)&&"body"===a.nodeName.toLowerCase()&&(a.firstChild&&a.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(t,10)>parseInt(p,10)&&(o+=(parseInt(t,10)-parseInt(p,10))/2),a.lastChild)&&a.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(d,10)>parseInt(r,10)&&(o+=(parseInt(d,10)-parseInt(r,10))/2)):"separate"===c.style.borderCollapse&&(l=l-parseInt(i,10)-parseInt(s,10),o=o-parseInt(p,10)-parseInt(r,10))),{width:parseInt(l),height:parseInt(o)}},this};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var n=0;n<e;n++)for(var a=t.rows[n].children,r=0;r<a.length;r++)if(1<a[r].rowSpan&&a[r].rowSpan>e-n){for(var l=a[r].rowSpan-e+n,o=(a[r].rowSpan=e-n,a[r].dataset.sameCellBeforeDivision||(a[r].dataset.sameCellBeforeDivision="r"+n+"c"+r),void 0),o=t.hasOwnProperty("wptbCell")?(o=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),i=a[r].getAttribute("style"),i=(o.setAttribute("style",i),o.colSpan=a[r].colSpan,o.rowSpan=l,o.dataset.sameCellBeforeDivision=a[r].dataset.sameCellBeforeDivision,a[r].dataset.xIndex),s=parseInt(i)+parseInt(a[r].colSpan),c=void 0;!c&&s<t.maxCols;)c=t.rows[e].querySelector('[data-x-index="'+s+'"]'),s++;t.rows[e].insertBefore(o,c),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),n=0;n<t.length;n++)if(t[n].hasAttribute("data-same-cell-before-division"))for(var a=t[n].dataset.sameCellBeforeDivision,r=e.querySelectorAll('[data-same-cell-before-division="'+a+'"]'),l=0;l<r.length;l++)if(r[l]&&r[l+1]&&r[l].parentNode&&r[l+1].parentNode&&!r[l].parentNode.classList.contains("wptb-row-moving")&&!r[l+1].parentNode.classList.contains("wptb-row-moving")&&r[l+1].dataset.yIndex==parseInt(r[l].dataset.yIndex)+parseInt(r[l].rowSpan)){r[l].rowSpan+=r[l+1].rowSpan;for(var o=_toConsumableArray(r[l+1].children),i=0;i<o.length;i++)r[l].appendChild(o[i]);r[l+1].parentNode.removeChild(r[l+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var n=0;n<t.rows.length;n++){if(e<t.maxCols&&0!=e&&!t.rows[n].querySelector('[data-x-index="'+e+'"]'))for(var a,r,l=t.rows[n].children,o=void 0,i=l.length,s=void 0,c=0;c<i;c++)if(1<l[c].colSpan&&parseInt(l[c].dataset.xIndex)<e&&parseInt(l[c].dataset.xIndex)+parseInt(l[c].colSpan)>e){o=t.hasOwnProperty("wptbCell")?(o=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),a=l[c].rowSpan,r=l[c].colSpan,l[c].colSpan=e-l[c].dataset.xIndex,r=r-l[c].colSpan,l[c].dataset.sameCellBeforeDivision||(l[c].dataset.sameCellBeforeDivision="r"+n+"c"+c);var d=l[c].getAttribute("style"),d=(o.setAttribute("style",d),t.querySelector('[data-x-index="'+e+'"]')),d=(d&&(o.style.width=d.style.width),t.querySelector('[data-y-index="'+n+'"]'));d&&(o.style.height=d.style.height),s=l[c+1]||null,t.rows[n].insertBefore(o,s),o.colSpan=r,o.rowSpan=a,o.dataset.sameCellBeforeDivision=l[c].dataset.sameCellBeforeDivision,n+=a-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),n=0;n<t.length;n++)if(t[n].hasAttribute("data-same-cell-before-division"))for(var a=t[n].dataset.sameCellBeforeDivision,r=_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+a+'"]')),l=null,o=0;o<r.length;o++)if(r[o]&&r[o+1]&&!r[o].classList.contains("wptb-column-moving")&&!r[o+1].classList.contains("wptb-column-moving")&&r[o+1].dataset.xIndex==parseInt(r[o].dataset.xIndex)+parseInt(r[o].colSpan)){r[l=null==l?o:l].colSpan+=r[o+1].colSpan;for(var i=_toConsumableArray(r[o+1].children),s=0;s<i.length;s++)r[l].appendChild(i[s]);r[o+1].parentNode.removeChild(r[o+1])}WPTB_RecalculateIndexes(e)}}},WPTB_DropHandle=function(a,e){var r,l,t,n,o,i,s,c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];function d(e){return"".concat(e,"px")}if("td_relative"===WPTB_Helper.getDragRelativeType()){var p=document.querySelector(".wptb-cell-related-drop-handle");if(c&&p)return void(p.style.display="none");null===p&&((c=document.createRange()).setStart(document.body,0),c=c.createContextualFragment('<div class="wptb-cell-related-drop-handle">Add to cell</div>').children[0],document.body.appendChild(c),p=c.children[0]);var c=WPTB_Helper.getParentOfType("td",a).getBoundingClientRect(),u=c.top,b=c.left,m=c.width,c=c.height;return p?(p.style.display="flex",p.style.top=d(u),p.style.width=d(m),p.style.height=d(c),void(p.style.left=d(b))):void 0}if(0==document.getElementsByClassName("wptb-drop-handle").length?((r=document.createElement("div")).classList.add("wptb-drop-handle"),(l=document.createElement("div")).classList.add("wptb-drop-border-marker"),t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),t.classList.add("wptb-drop-border-marker-top"),n.classList.add("wptb-drop-border-marker-right"),o.classList.add("wptb-drop-border-marker-bottom"),i.classList.add("wptb-drop-border-marker-left"),l.appendChild(t),l.appendChild(n),l.appendChild(o),l.appendChild(i),0<(u=document.getElementsByTagName("body")).length&&(u[0].appendChild(r),u[0].appendChild(l)),r.ondragenter=function(){if(e.target.classList.contains("wptb-empty"))return e.preventDefault(),!1},r.ondragover=function(e){e.preventDefault()},r.ondragleave=function(){},r.ondrop=function(e){e.preventDefault(),e.dataTransfer.getData("wptbElement")?t=(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():((t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),t.classList.remove("wptb-moving-into-same-elem"),t.wptbMovingMode=1),"Drop Here"==r.dataset.text?"td"==(a=r.getDOMParentElement()).nodeName.toLowerCase()&&((n=r.getDOMParentElement()).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):(n=(e=r.getDOMParentElement()).parentNode,"Above Element"==r.dataset.text?(n.insertBefore(t,e),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):"Below Element"==r.dataset.text&&(e=e.nextSibling,n.insertBefore(t,e),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)));var t,n,e=n.parentNode;WPTB_Helper.rowIsTop(e)&&(n=WPTB_Helper.findAncestor(e,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(n),r.style.display="none",l.style.display="none",WPTB_innerElementSet(t),t.classList.contains("wptb-image-container")&&1!=t.wptbMovingMode||((new WPTB_TableStateSaveManager).tableStateSet(),t.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){r.style.display="none",l.style.display="none"}):(r=document.getElementsByClassName("wptb-drop-handle")[0],l=document.getElementsByClassName("wptb-drop-border-marker")[0]),!(a&&"td"==a.nodeName.toLowerCase()&&0!=a.getElementsByClassName("wptb-ph-element").length||a&&"td"==a.nodeName.toLowerCase()&&a.classList.contains("wptb-empty"))){if("td"==a.localName?s=a.parentNode:"div"==a.localName&&a.classList.contains("wptb-ph-element")&&(s=a.parentNode.parentNode),WPTB_Helper.rowIsTop(s))if(WPTB_Helper.findAncestor(s,"wptb-preview-table").classList.contains("wptb-table-preview-head")){for(var g=e.dataTransfer.types,y=!1,f=0;f<g.length;f++){var w=g[f].match(/wptbelindic-([a-z]+)/i);if(w&&"text"!=w[1]){y=!0;break}}if(y)return}r.style.width=a.offsetWidth+"px";var h,m=a.offsetHeight,c=a.getBoundingClientRect(),p=parseFloat(c.left);r.style.left=p+"px",-1!=e.dataTransfer.types.indexOf("wptb-moving-mode")&&(b=document.getElementsByClassName("wptb-moving-mode")[0],a==b?(r.classList.add("wptb-moving-into-same-elem"),l.classList.add("wptb-moving-into-same-elem")):(r.classList.remove("wptb-moving-into-same-elem"),l.classList.remove("wptb-moving-into-same-elem"))),r.getDOMParentElement=function(){return a},r.style.display="block",l.style.display="block","td"!=a.nodeName.toLowerCase()?(u=null==e.offsetY?e.layerY:e.offsetY,h=parseFloat(c.top)-parseFloat(11),r.dataset.text="Above Element",m/2<u&&(h=parseFloat(c.top)+m-1,r.dataset.text="Below Element")):(r.dataset.text="Drop Here",h=parseFloat(c.top)+m/2-5),r.style.top=h+"px",l.style.top=c.top+"px",l.style.left=c.left+"px",(t=l.querySelector(".wptb-drop-border-marker-top")).style.width=parseFloat(a.offsetWidth)-parseFloat(1)+"px",(n=l.querySelector(".wptb-drop-border-marker-right")).style.height=parseFloat(c.bottom)-parseFloat(c.top)-1+"px",n.style.left=t.style.width,(o=l.querySelector(".wptb-drop-border-marker-bottom")).style.width=t.style.width,o.style.top=n.style.height,(i=l.querySelector(".wptb-drop-border-marker-left")).style.height=n.style.height}},ElementCounters=function(){var t=[];return t.text=0,t.image=0,t.list=0,t.button=0,this.increment=function(e){e in t&&t[e]++},this.nextIndex=function(e){if(e in t)return t[e]+1},this},WPTB_ElementObject=(!function(e,t,n){t[e]=n()}("WPTB_ElementIdProvider",self||global,function(){return new function(){var r={};this.getNewId=function(e){var t,n,a;return void 0===r[e]&&(r[e]=(t=e,n=Array.from(document.querySelectorAll(".wptb-ph-element")),a=new RegExp("wptb-element-".concat(t,"-(\\d+)"),"i"),n.reduce(function(e,t){t=a.exec(t.className);return null!==t&&void 0!==t[1]?Math.max(e,Number.parseInt(t[1],10)):e},0))),++r[e]}}}),function(e){e.elemProt?((t=e.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered"),(a=e.elemProt.className.match(/wptb-element-((.+-)\d+)/i))&&Array.isArray(a)&&(n=a[1]),a=!0,e.tinyMceClear&&(t=WPTB_Helper.elementClearFromTinyMce(t))):(n=void 0,a=!1,(t=document.createElement("div")).classList.add("wptb-"+e.kind+"-container","wptb-ph-element"),r="wptb-"+e.kind+"-content",r=wp.template(r),e.node=t,r=(r=r(e)).replace(/\r|\n|\t/g,"").trim(),t.innerHTML=r);var t,n,a,r,l=t.querySelectorAll(".wptb-in-element");if(0<l.length)for(var o=0;o<l.length;o++)!function(e){var t={getDOMElement:function(){return l[e]}};applyGenericItemSettings(t)}(o);return window.addEventListener("item:onmouseenter",function(e){},!1),this.kind=e.kind,this.getDOMElement=function(){return t},applyGenericItemSettings(this,n,a),this}),WPTB_ElementOptions=function(e,t,n){e.getDOMElement().addEventListener("click",function(){WPTB_Helper.elementOptionsSet(e.kind,this)},{capture:!0})};function EmojiConversionDisabler(e){var t=WPTB_Helper.getPluginTables();e&&t&&!Array.isArray(t)&&new MutationObserver(function(e){e.map(function(e){e=e.addedNodes;Array.from(e).map(function(e){"p"===e.nodeName.toLowerCase()&&e.classList.add("wp-exclude-emoji")})})}).observe(t,{childList:!0,subtree:!0})}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],s=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}document.addEventListener("wptb:table:generated",function(){EmojiConversionDisabler(WPTB_Store.getters.getSetting("emojiConversionDisablerStatus"))}),function(e,t,n){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t[e]=n()}("WPTB_ExtraStyles",self||global,function(){return new function(){function a(e){var t,n,a,r,l=e.dataset.wptbExtraStyles;l&&(l=atob(l),t=e.getAttribute("class").match(/wptb-element-main-table_setting-(?:startedid-)?(\d+)/),r="wptb-extra-styles-"+(t=_slicedToArray(t,2)[1]),(a=null==(n=o.baseDocument.querySelector("head"))?void 0:n.querySelector("#".concat(r)))||((a=document.createElement("style")).type="text/css",a.id=r,e.dataset.disableThemeStyles&&o.currentMode===o.modes.frontEnd||o.currentMode===o.modes.block?(e.insertAdjacentElement("beforebegin",a),o.currentMode===o.modes.frontEnd&&o.generalStyles&&s(o.generalStyles,e)):n.appendChild(a)),r=".wptb-element-main-table_setting-".concat(t),e=i(r,l),a.innerHTML="",a.appendChild(document.createTextNode(e)))}var o=this,r=(this.modes={builder:"builder",frontEnd:"frontEnd",block:"block"},this.baseDocument=document,this.currentMode=this.modes.builder,this.generalStyles="",_defineProperty(_defineProperty(_defineProperty({},this.modes.builder,".wptb-table-setup .wptb-preview-table"),this.modes.block,".wptb-block-table-setup .wptb-preview-table"),this.modes.frontEnd,".wptb-table-container .wptb-preview-table")),t=function(e){return e.replaceAll(/(\r?\n)|(\/\*.+?\*\/)|(\s*!important)/g,"").replaceAll(";"," !important;")},i=function(n,e){var e=t(e).split("}"),a=[];return e.map(function(e){var t=new RegExp(/(.+?)\{/g).exec(e);t&&(n===t[1].trim()?a.push(e):a.push(e.replace(t[1],"".concat(n," ").concat(t[1]))))}),"".concat(a.join("}"),"}")},s=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("style"),t=(n.type="text/css",n.id="wptb-general-styles",t?t.insertAdjacentElement("beforebegin",n):(o.currentMode===o.modes.block?o.baseDocument:o.baseDocument.querySelector("head")).appendChild(n),i(e.parentPrefix,e.styles));n.appendChild(document.createTextNode(t))};this.applyStyles=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.modes.frontEnd,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,n=(o.baseDocument=n,o.currentMode=e,o.generalStyles=t,Array.from(o.baseDocument.querySelectorAll(r[e])));n&&n.map(a),e!==o.modes.frontEnd&&e!==o.modes.block||!t||s(t)}}});var WPTB_GetDirectionAfterReconstruction=function(a,r,l,n,o){var i=0,s=a.maxCols,e={},c=[];return o&&o.getDirective(a)?e.switch=function(e){var t=o.getDirective(a),n="desktop";return e&&e.detail&&(n=e.detail.sizeRangeId),c=[r,1],"desktop"!==n?t.hasOwnProperty("modeOptions")&&(e=t.responsiveMode,(t=t.modeOptions[e]).hasOwnProperty("topRowAsHeader")&&t.topRowAsHeader.hasOwnProperty(n)&&t.topRowAsHeader[n]?t.hasOwnProperty("cellStackDirection")&&t.cellStackDirection.hasOwnProperty(n)&&("row"===t.cellStackDirection[n]?(c=[l,2],i=s-1):"column"===t.cellStackDirection[n]&&t.hasOwnProperty("cellsPerRow")&&(i=t.cellsPerRow[n])):i=0):i=0,{type:c,itemsPerHeader:i}}:e.switch=function(e){var t;return c=[r,1],a.classList.contains("wptb-mobile-view-active")?(a.classList.contains("wptb-table-preview-head")&&(c=[l,2])===n&&(i=s-1),t=a.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"),{type:c,itemsPerHeader:i,newTable:t}):{type:c,itemsPerHeader:i}},e},WPTB_HeaderToolbox=function(e){var n=this,t=(this.wrapperQuery=e,this.element=document.querySelector(e),this.topMargin=2,function(){Array.from(n.element.querySelectorAll("[data-button-type]")).map(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),WPTB_Helper.activateSection(e.target.dataset.buttonType)})})}),a=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=n.element.getBoundingClientRect().height;n.element.style.top="calc( 100% - ".concat((t=e?0:t)+n.topMargin,"px)")};return{init:function(){t(),document.addEventListener("wptb:table:generated",function(){n.element.style.display="flex";var e=n.element.getBoundingClientRect().width,t=(n.element.style.left="calc( 50% - ".concat(e/2,"px)"),["table_responsive_menu","manage_cells","cell_settings"]);document.addEventListener("wptbSectionChanged",function(e){e=e.detail;a(!t.includes(e))});e=WPTB_Helper.currentSection;a(!t.includes(e))})}}};function _wrapRegExp(){_wrapRegExp=function(e,t){return new a(e,void 0,t)};var r=RegExp.prototype,o=new WeakMap;function a(e,t,n){t=RegExp(e,t);return o.set(t,n||o.get(e)),_setPrototypeOf(t,a.prototype)}function l(r,e){var l=o.get(e);return Object.keys(l).reduce(function(e,t){var n=l[t];if("number"==typeof n)e[t]=r[n];else{for(var a=0;void 0===r[n[a]]&&a+1<n.length;)a++;e[t]=r[n[a]]}return e},Object.create(null))}return _inherits(a,RegExp),a.prototype.exec=function(e){var t,e=r.exec.call(this,e);return e&&(e.groups=l(e,this),t=e.indices)&&(t.groups=l(t,this)),e},a.prototype[Symbol.replace]=function(e,t){var n,a;return"string"==typeof t?(n=o.get(this),r[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){t=n[t];return"$"+(Array.isArray(t)?t.join("$"):t)}))):"function"==typeof t?(a=this,r[Symbol.replace].call(this,e,function(){var e=arguments;return"object"!=_typeof(e[e.length-1])&&(e=[].slice.call(e)).push(l(e,a)),t.apply(this,e)})):r[Symbol.replace].call(this,e,t)},_wrapRegExp.apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_Helper={hexToRgb:function(e){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?"rgb(".concat(parseInt(e[1],16),",").concat(parseInt(e[2],16),",").concat(parseInt(e[3],16),")"):null},rgbToHex:function(e){var t;return e?WPTB_Helper.isHex(e)?e:(t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?((?:[0-9]*[.])?[0-9]+)[\s+]?\)/i))&&5===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(Math.round(255*parseFloat(t[4],10)).toString(16).toUpperCase()).slice(-2)):(t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)):"":""},isHex:function(e){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}(?:[0-9]?){1,2}$").test(e)},getElementIcon:function(e){"".concat(location.protocol,"//").concat(location.hostname);var t=document.createElement("img");return t.src=e,t},elementDragEndClear:function(){var e=document.getElementsByClassName("wptb-moving-mode");if(0<e.length)for(var t=0;t<e.length;t++)e[t].classList.remove("wptb-moving-mode");var n=document.getElementsByClassName("wptb-drop-handle");if(0<n.length)for(var a=0;a<n.length;a++)n[a].style.display="none";var r=document.getElementsByClassName("wptb-drop-border-marker");if(0<r.length)for(var l=0;l<r.length;l++)r[l].style.display="none"},linkHttpCheckChange:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e?e.match(/^(javascript:)(.+)$/)?e:e.match(/^\/([\S]+)$/)?n?((n=document.location.origin).match(/^(.+)\/$/)&&(n=n.slice(-1)),"".concat(n).concat(e)):e:-1==e.indexOf("http://")&&-1==e.indexOf("https://")?(n=e.split("/"),Array.isArray(n)&&0<n.length&&(t=n[n.length-1]),"".concat(document.location.protocol,"//").concat(t)):e:""},dataTitleColumnSet:function(e){},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},rowIsTop:function(e){return e.parentNode.children[0]==e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){"external"==e.originalEvent.type?(new WPTB_TableStateSaveManager).tableStateSet():!WPTB_Helper.findAncestor(e.target,"wp-picker-container")||"square"!=e.originalEvent.type&&"strip"!=e.originalEvent.type||((e=document.getElementsByTagName("body")[0]).removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),e.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1))},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(e,t){var n;t?(n=[document.getElementById(e)]).length=1:n=document.getElementsByClassName(e);for(var a=0;a<n.length;a++){var r,l=WPTB_Helper.findAncestor(n[a],"wp-picker-container");l&&((r=l.parentNode).removeChild(l),l=document.createElement("input"),t?l.setAttribute("id",e):l.classList.add("wptb-element-property",e),l.value="",r.appendChild(l))}},detectMode:function(){var e=window.location.href,e=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!e&&(e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"")},getTableId:function(){return WPTB_Helper.detectMode()||"startedid-0"},getColumnWidth:function(e,t){for(var n=t.dataset.xIndex,a=e.querySelectorAll('[data-x-index="'.concat(n,'"]')),r=t.getCellDimensions().width,l=0;l<a.length;l++)r>a[l].getCellDimensions().width&&(r=a[l].getCellDimensions().width);return r},getRowHeight:function(e,t){for(var n=t.dataset.yIndex,a=e.querySelectorAll('[data-y-index="'.concat(n,'"]')),r=t.getCellDimensions().height,l=0;l<a.length;l++)r>a[l].getCellDimensions().height&&(r=a[l].getCellDimensions().height);return r},newElementProxy:function(e){if(e)return new WPTB_ElementObject({kind:e})},wpColorPickerChange:function(e,t){var n=t?t.color.toString():"",t=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0],e=t.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=e[1],e=e[2],e=document.getElementsByClassName("wptb-element-".concat(a,"-").concat(e))[0];if("button"==a)"button-text-color"==t.dataset.type?e.getElementsByClassName("wptb-button")[0].style.color=n:e.getElementsByClassName("wptb-button")[0].style.backgroundColor=n;else if("list"==a){var r=e.querySelectorAll("p");if(0<r.length)for(var l=0;l<r.length;l++)r[l].style.color=n}else if("star_rating"==a)if("star-color"==t.dataset.type)for(var o=e.querySelectorAll("li"),i=0;i<o.length;i++)for(var s=o[i].getElementsByTagName("span"),c=0;c<s.length;c++)s[c].style.fill=n;else"numeral-rating-color"==t.dataset.type&&(e.querySelector(".wptb-number-rating").style.color=n);else e.style.color=n},numberImputSize:function(e,t,n){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;parseInt(e,10)>parseInt(n,10)&&(this.value=n),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wptbDocumentEventGenerate:function(e,t,n){e&&t&&(n=n||!0,e=new CustomEvent(e,{detail:n,bubbles:!0}),t.dispatchEvent(e))},elementStartScript:function(e,t){var n;t||(n=e.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(n)&&(t=n[1]),t&&t in WPTB_ElementsScriptsLauncher&&(n=(n=e.getAttribute("class").match(/(wptb-element-\D+-\d+\b)/))?n[0]:null,WPTB_ElementsScriptsLauncher[t](e,n))},deleteEventHandlers:function(e){if(e){jQuery(e).off();var t=e.children;if(t)for(var n=0;n<t.length;n++)WPTB_Helper.deleteEventHandlers(t[n])}},replaceAll:function(e,t,n){return e.split(t).join(n)},elementClearFromTinyMce:function(e){var t=e.querySelectorAll(".mce-content-body");if(0<t.length)for(var n=0;n<t.length;n++)t[n].classList.remove("mce-content-body");var a=e.querySelectorAll("[data-mce-style]");if(0<a.length)for(var r=0;r<a.length;r++)a[r].removeAttribute("data-mce-style");var l=e.querySelectorAll(".mce-edit-focus");if(0<l.length)for(var o=0;o<l.length;o++)l[o].classList.remove("mce-edit-focus");var i=e.querySelectorAll("[contenteditable]");if(0<i.length)for(var s=0;s<i.length;s++)i[s].removeAttribute("contenteditable");var c=e.querySelectorAll("[spellcheck]");if(0<c.length)for(var d=0;d<c.length;d++)c[d].removeAttribute("spellcheck");var p=e.querySelectorAll("[id^=mce_]");if(0<p.length)for(var u=0;u<p.length;u++)p[u].removeAttribute("id");return e},elementOptionContainerCustomClassSet:function(e,t){e&&t&&(e=WPTB_Helper.findAncestor(e,"wptb-element-option"))&&e.classList.add(t)},elementOptionContainerAdditionalStyles:function(e,t){if(e&&t){var n=WPTB_Helper.findAncestor(e,"wptb-element-option"),a=t.split(";");if(n&&a){function r(e,t){e&&(containerStyleStrArr=e.split(":"))&&Array.isArray(containerStyleStrArr)&&(t.style[containerStyleStrArr[0]]=containerStyleStrArr[1])}if(a&&Array.isArray(a))for(var l=0;l<a.length;l++)a[l]&&r(a[l],n);else r(a,n)}}},controlsInclude:function(o,i){var s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];o&&"object"===_typeof(o)&&"function"==typeof i&&o.addEventListener("element:controls:active",function(){if(!o.hasOwnProperty("controlConnectFunctionsName")||!Array.isArray(o.controlConnectFunctionsName)||-1==o.controlConnectFunctionsName.indexOf(i.name)){var n,e=o.className.match(/wptb-element-(.+)-(\d+)/i);if(n=e&&Array.isArray(e)?e[1]:n){var t=o.optionsGroupIds;if(t&&Array.isArray(t))for(var a=0;a<t.length;a++){var r=t[a],r=document.getElementById(r).querySelectorAll(".wptb-element-property");(r=_toConsumableArray(r)).map(function(e){var r,t=new RegExp("wptb-el-".concat(n,"-(\\d+)-([a-zA-Z0-9_-]+)"),"i"),l=e.className.match(t);l&&Array.isArray(l)&&(r=l[0],o.addEventListener("wptb-control:".concat(r),function(e){var t={},n=l[2],a=document.getElementsByClassName(r);0<a.length&&n&&(a=WPTB_Helper.targetControlValueGet(a),t[n]=s?{targetValue:a,eventValue:e.detail.value}:a),i(t,o)},!1))})}o.controlConnectFunctionsName||Array.isArray(o.controlConnectFunctionsName)||(o.controlConnectFunctionsName=[]),o.controlConnectFunctionsName.push(i.name)}}},!1)},oneControlInclude:function(n,a,e){if(!n||"object"!==_typeof(n)||"function"!=typeof a||"string"!=typeof e)return!1;var t,r,l=n.className.match(/wptb-element-((.+-)\d+)/i);l&&Array.isArray(l)&&(t=l[1].split("-")[0],t="wptb-".concat(t,"-control-stack"),t=wp.template(t)({container:".".concat(l[0])}),t=JSON.parse(t))&&"object"===_typeof(t)&&t.hasOwnProperty(e)&&(r="wptb-el-".concat(l[1],"-").concat(e),n.addEventListener("wptb-control:".concat(r),function(e){var t=document.getElementsByClassName(r);0<t.length&&(t=WPTB_Helper.targetControlValueGet(t),a(t,n))},!1))},innerElementCopyIncludeHandler:function(t,n){t&&"object"===_typeof(t)&&"function"==typeof n&&t.addEventListener("wptb-inner-element:copy",function(e){e=e.detail;e&&(WPTB_Helper.elementClearFromTinyMce(e),n(e,t))},!1)},valueDependOnControl:function(n,a,r,l,o){function i(e,n,t){"string"==typeof e&&(e=[e]);var a,r,l,o=n.match(/wptb-el-((.+-)\d+)-(.+)/i),i={},s=[];return o&&Array.isArray(o)&&(a=o[3],l={},Array.isArray(t)&&(Array.isArray(t[0])?t.map(function(e){l[e[0]]=[e[1],e[2]]}):l[t[0]]=[t[1],t[2]]),e.map(function(e){var t=n.replace(a,e);t&&0<(r=document.getElementsByClassName(t)).length&&r[0].type&&(i[e]=r[0].value,e in l&&("integer"===l[e][1]?i[e]=parseInt(i[e])+parseInt(l[e][0]):"string"===l[e][1]&&(i[e]=i[e]+l[e][0])),s.push(r[0]))})),[i,s]}var e=i(n,a,r);WPTB_Helper.elementOptionsSet(l,o,e[0],a),Object.keys(e[0]).forEach(function(e){var t=o.className.match(/wptb-element-((.+-)\d+)/i),t="wptb-el-".concat(t[1],"-").concat([e]);o.addEventListener("wptb-control:".concat(t),function(e){var t=i(n,a,r);WPTB_Helper.elementOptionsSet(l,o,t[0],a)},!1)})},appearDependOnControl:function(e,t){if(Array.isArray(e)){function r(e,t){var n,a="block";Object.keys(t).map(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!1===t[e][0]&&(a="none",t[e][2][3])&&(n=t[e][2][3])}),e.style.display!==a&&("none"===(e.style.display=a)&&n?(p[0].dataset.controlActiveVal=WPTB_Helper.targetControlValueGet(p),WPTB_Helper.targetControlValueGet(p,n)):"block"===a&&p[0].dataset.controlActiveVal&&WPTB_Helper.targetControlValueGet(p,p[0].dataset.controlActiveVal))}function l(e,t){for(var n=WPTB_Helper.targetControlValueGet(e),a=!1,r=1;r<=2;r++)if(t[r]&&Array.isArray(t[r])){for(var l=void 0,o=!1,i=0;i<t[r].length;i++)if("string"==typeof t[r][i]&&-1!==t[r][i].indexOf("numberAny >")){o=!0;if(!(parseInt(t[r][i].match(/\d+/))<n)){l=!1;break}l=!0}else if("string"==typeof t[r][i]&&-1!==t[r][i].indexOf("numberAny <")){if(o=!0,!(n<parseInt(t[r][i].match(/\d+/)))){l=!1;break}l=!0}else if(t[r][i]===n&&(l=!0,!o))break;if(l&&1===r){a=!0;break}if(l&&2===r){a=!1;break}}return a}if("string"==typeof e[0])e=[e];else if(!Array.isArray(e[0]))return;for(var o={},n=0;n<e.length;n++){var a=e[n],i=a[0],s=t.match(/wptb-el-((.+-)\d+)-(.+)/i);s&&Array.isArray(s)&&(s=s[3],s=t.replace(s,i))&&0<(i=document.getElementsByClassName(s)).length&&(o[a[0]]=[l(i,a),i,a])}var c,d,p=document.getElementsByClassName(t);0<p.length&&(c=p[0],d=WPTB_Helper.findAncestor(c,"wptb-element-option"))&&(r(d,o),Object.keys(o).map(function(a){Object.prototype.hasOwnProperty.call(o,a)&&o[a][1][0].addEventListener("change",function(e){var t=o[a][2],n=o[a][1];o[t[0]]=[l(n,t),n,t],r(d,o)},!1)}))}},toggleSwitch:function(t,a){var r,l;Array.isArray(t)&&t[1]&&"object"===_typeof(t[1])&&(r=function(){var e=document.getElementsByClassName(a);e.length&&WPTB_Helper.targetControlValueGet(e)!==t[0]&&("unchecked"===t[0]?e[0].checked=!1:"checked"===t[0]&&(e[0].checked=!0),void 0!==t[2]&&!0!==t[2]||WPTB_Helper.wptbDocumentEventGenerate("change",e[0],{eventType:"toggleSwitch"}))},l=t[1],Object.keys(l).map(function(e){var t=l[e],n=a.match(/wptb-el-((.+-)\d+)-(.+)/i);n&&Array.isArray(n)&&(n=n[3],n=a.replace(n,e))&&0<(e=document.getElementsByClassName(n)).length&&e[0].addEventListener("change",function(e,t){e&&0<(e=document.getElementsByClassName(e)).length&&WPTB_Helper.targetControlValueGet(e)===t&&r()}.bind(null,n,t),!1)}))},switchThirdToggleIf:function(r,a){var l,o,i;Array.isArray(r)&&(l=r[0],o=document.querySelector(".".concat(a)),r[1])&&"object"===_typeof(r[1])&&(i=r[1],Object.keys(i).map(function(e){var t=i[e],n=a.match(/wptb-el-((.+-)\d+)-(.+)/i);n&&Array.isArray(n)&&(n=n[3],n=a.replace(n,e))&&0<(e=document.getElementsByClassName(n)).length&&(n=e[0],console.log(n),o.addEventListener("change",function(e,t,n,a){"checked"in n&&(!0===e.checked&&"checked"===t||!1===e.checked&&"unchecked"===t)&&("checked"===a?n.checked=!0:"unchecked"===a&&(n.checked=!1),void 0!==r[2]&&!0!==r[2]||WPTB_Helper.wptbDocumentEventGenerate("change",n,{eventType:"switchThirdToggleIf"}))}.bind(null,o,l,n,t),!1))}))},controlsStateManager:function(e,t){var n=document.getElementsByClassName(e);if(0<n.length){var a=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(a&&Array.isArray(a))if(document.querySelector(".wptb-element-".concat(a[1]))){var r,l={},o=document.getElementsByClassName("wptb-element-datas");if(0==o.length||""==o[0].innerHTML){var i=WPTB_Helper.targetControlValueGet(n);l["data-".concat(e)]=i,(r={})["tmpl-wptb-el-datas-".concat(a[1])]=l,r=JSON.stringify(r),0==o.length?((o=document.createElement("script")).setAttribute("type","text/html"),o.setAttribute("class","wptb-element-datas")):o=o[0],o.innerHTML=r,document.getElementsByTagName("body")[0].appendChild(o)}else if((r=(o=o[0]).innerHTML)&&(r=r.trim(),r=JSON.parse(r))&&"object"===_typeof(r))if(t){i=WPTB_Helper.targetControlValueGet(n);"tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])||(r["tmpl-wptb-el-datas-".concat(a[1])]={}),r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)]=i,o.innerHTML=JSON.stringify(r)}else if("tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])&&"data-".concat(e)in r["tmpl-wptb-el-datas-".concat(a[1])]){if("tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])&&"data-".concat(e)in r["tmpl-wptb-el-datas-".concat(a[1])])for(var s,c=0;c<n.length;c++)"checkbox"==n[c].type?(s=void 0,"checked"==(s=n[c].name?r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)][n[c].name]:r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)])?n[c].checked=!0:"unchecked"==s&&(n[c].checked=!1)):n[c].value=r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)]}else{l=WPTB_Helper.targetControlValueGet(n);"tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])||(r["tmpl-wptb-el-datas-".concat(a[1])]={}),r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)]=l,o.innerHTML=JSON.stringify(r)}}}},targetControlValueGet:function(e,t){for(var n,a=0;a<e.length;a++)"checkbox"==e[a].type&&e[a].name?t?"checked"===t?e[a].checked=!0:"unchecked"===t&&(e[a].checked=!1):(n=n||{},1==e[a].checked?n[e[a].name]="checked":n[e[a].name]="unchecked"):"checkbox"==e[a].type?t?"checked"===t?e[a].checked=!0:"unchecked"===t&&(e[a].checked=!1):n=1==e[a].checked?"checked":"unchecked":e[a].type?t?e[a].value=t:n=e[a].value:e[a].dataset.alignmentValue&&e[a].classList.contains("selected")&&(t?e[a].dataset.alignmentValue=t:n=e[a].dataset.alignmentValue);return n},elementControlsStateCopy:function(e,t){var n,a,r,l;e&&t&&(e=e.className.match(/wptb-element-((.+-)\d+)/i),t=t.className.match(/wptb-element-((.+-)\d+)/i),e)&&Array.isArray(e)&&t&&Array.isArray(t)&&(n=e[1],a=t[1],0<(e=document.getElementsByClassName("wptb-element-datas")).length)&&(t=(e=e[0]).innerHTML)&&(t=t.trim(),t=JSON.parse(t))&&"object"===_typeof(t)&&(r=t["tmpl-wptb-el-datas-".concat(n)])&&"object"===_typeof(r)&&(l={},Object.keys(r).forEach(function(e){var t=r[e],e=e.replace(n,a);l[e]=t}),0<Object.keys(l).length)&&(t["tmpl-wptb-el-datas-".concat(a)]=l,t=JSON.stringify(t),e.innerHTML=t)},elementControlsStateDelete:function(e,t){var n,e=e.className.match(/wptb-element-(.+)-(\d+)/i),a=document.getElementsByTagName("body")[0],r=a.getElementsByClassName("wptb-element-datas");e&&Array.isArray(e)&&0<r.length&&(n=(r=r[0]).innerHTML)&&(n=n.trim(),n=JSON.parse(n))&&"object"===_typeof(n)&&"tmpl-wptb-el-datas-".concat(e[1],"-").concat(e[2])in n&&(t?n["tmpl-wptb-el-datas-".concat(e[1],"-").concat(e[2])]&&"object"===_typeof(n["tmpl-wptb-el-datas-".concat(e[1],"-").concat(e[2])])&&"data-wptb-el-".concat(e[1],"-").concat(e[2],"-").concat(t)in n["tmpl-wptb-el-datas-".concat(e[1],"-").concat(e[2])]&&delete n["tmpl-wptb-el-datas-".concat(e[1],"-").concat(e[2])]["data-wptb-el-".concat(e[1],"-").concat(e[2],"-").concat(t)]:delete n["tmpl-wptb-el-datas-".concat(e[1],"-").concat(e[2])],0==Object.keys(n).length?a.removeChild(r):(n=JSON.stringify(n),r.innerHTML=n))},activeElement:null,elementOptionsSet:function(c,e,d,p){var t=e.getAttribute("class").match(_wrapRegExp(/(wptb\x2Delement\x2D.+\x2D\d+)/,{elementId:1})),n=e.getAttribute("id"),a=null;e.getAttribute("class").includes("wptb-cell")&&(r=(i=e.dataset).xIndex,i=i.yIndex,a="cell_".concat(r,"-").concat(i));var r=(t?t.groups.elementId:null)||n||a||null;if(r&&this.activeElement!==r){this.activeElement=r,WPTB_Helper.wptbDocumentEventGenerate("element:controls:prepare",e);var l,u,b,m,g,o,y,i="wptb-".concat(c,"-control-stack"),t=wp.template(i),f=e.className.match(/wptb-element-((.+-)\d+)/i);if(f?(WPTB_Helper.editActionClassRemove(),e.classList.add("edit-active")):(n=(n=WPTB_Helper.detectMode())||"startedid-0",e.classList.contains("wptb-preview-table")?e.classList.add("wptb-element-main-table_setting-".concat(n)):e.classList.contains("wptb-cell")?document.querySelector(".wptb-element-table_cell_setting-".concat(e.dataset.xIndex,"-").concat(e.dataset.yIndex))||e.classList.add("wptb-element-table_cell_setting-".concat(e.dataset.xIndex,"-").concat(e.dataset.yIndex)):e.classList.contains("wptb-responsive")&&(n.startsWith("wptb_team")&&(n="startedid-0"),e.classList.add("wptb-element-table_responsive_setting-".concat(n))),f=e.className.match(/wptb-element-((.+-)\d+)/i)),l={container:".".concat(f[0]),valueDependOnControl:{}},d&&Object.keys(d).forEach(function(e){l.valueDependOnControl[e]=d[e]}),p&&(a=p.match(/wptb-el-((.+-)\d+)-(.+)/i))&&Array.isArray(a)&&(y=a[3]),u=f[0],b=f[1],!e.classList.contains("wptb-preview-table"))if(e.classList.contains("wptb-cell"))this.activateSection("cell_settings");else if(e.classList.contains("wptb-responsive"))elementOptionsGroupId="table-responsive-group",wptbelementOptionClass="wptb-element-option";else{for(var s=document.getElementById("element-options-group").childNodes,w=0;w<s.length;w++)s[w].style&&(s[w].style.display="none");this.activateSection("options_group")}var r=t(l),h=JSON.parse(r),v=[],S={},T={},_={},C=[],B=[],A=[],E=[];y&&((i={})[y]=h[y],h=i);Object.keys(h).forEach(function(e){var t,n,a,r=h[e],e=(r.controlKey=e,wp.template("wptb-".concat(r.type,"-control"))),e=(r.elemContainer=u,r.elementControlTargetUnicClass="wptb-el-".concat(b,"-").concat(r.controlKey),Object.keys(r).map(function(e){Object.prototype.hasOwnProperty.call(r,e)&&"control_param_calculate_value"===r[e]&&(r[e]=WPTB_Helper.controlParamCalculateValue(r.elementControlTargetUnicClass,e))}),e(r));if("appearDependOnControl"in r&&Array.isArray(r.appearDependOnControl)&&C.push([r.appearDependOnControl,r.elementControlTargetUnicClass]),"toggleSwitch"in r&&Array.isArray(r.toggleSwitch)&&B.push([r.toggleSwitch,r.elementControlTargetUnicClass]),"switchThirdToggleIf"in r&&Array.isArray(r.switchThirdToggleIf)&&A.push([r.switchThirdToggleIf,r.elementControlTargetUnicClass]),"valueDependOnControl"in r&&!d&&!p&&(t="",r.valueDependOnControlCorrect&&(t=r.valueDependOnControlCorrect),E.push([r.valueDependOnControl,r.elementControlTargetUnicClass,t])),-1==v.indexOf(r.elementOptionsGroupId)&&!y){v.push(r.elementOptionsGroupId),m=document.getElementById(r.elementOptionsGroupId);for(var l=_toConsumableArray(m.children),o=0;o<l.length;o++)m.removeChild(l[o]);S[r.elementOptionsGroupId]=m}g=S[r.elementOptionsGroupId],"true"!==r.elementOptionsContainerOn||y||(t=r.elementOptionsGroupId,(a=T)[t]||((n=document.createElement("div")).classList.add("wptb-element-options","wptb-options-".concat(f[1])),document.getElementById(t).appendChild(n),a[t]=n),g=a[t]),"true"===r.elementOptionContainerOn&&((n=document.createElement("div")).classList.add(r.elementOptionClass,"wptb-settings-items"),r.customClassForContainer&&n.classList.add(r.customClassForContainer),r.containerAdditionalStyles&&n.setAttribute("style",r.containerAdditionalStyles),p?0<(a=document.getElementsByClassName(p)).length&&(a=a[0],i=WPTB_Helper.findAncestor(a,"wptb-element-option"))&&((s=i.parentNode).insertBefore(n,i),s.removeChild(i)):g.appendChild(n),g=n),g.innerHTML+=e;var i,s=g.getElementsByTagName("wptb-template-script");0<s.length&&(i=(s=s[0]).innerText,g.removeChild(s),(e=document.createElement("script")).setAttribute("type","text/javascript"),e.setAttribute("id","".concat(c,"-").concat(r.controlKey)),e.innerHTML=i.replace(/\r|\n|\t/g,"").trim(),_[r.elementOptionsGroupId]&&Array.isArray(_[r.elementOptionsGroupId])||(_[r.elementOptionsGroupId]=[]),_[r.elementOptionsGroupId].push(e)),0}),e.optionsGroupIds=v,Object.keys(_).forEach(function(e){p||((o=document.createElement("div")).classList.add("wptb-element-options-scripts","wptb-options-".concat(f[1])),S[e].appendChild(o));var t=_[e];if(0<t.length)for(var n,a=0;a<t.length;a++)p?(n="".concat(c,"-").concat(y),n=document.getElementById(n),(o=n.parentNode).insertBefore(t[a],n),o.removeChild(n)):o.appendChild(t[a])});for(var P=0;P<B.length;P++)WPTB_Helper.toggleSwitch(B[P][0],B[P][1]);for(var x=0;x<A.length;x++)WPTB_Helper.switchThirdToggleIf(A[x][0],A[x][1]);for(var W=0;W<C.length;W++)WPTB_Helper.appearDependOnControl(C[W][0],C[W][1]);WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",e);for(var L=0;L<E.length;L++)WPTB_Helper.valueDependOnControl(E[L][0],E[L][1],E[L][2],c,e)}},editActionClassRemove:function(){for(var e=document.querySelectorAll(".edit-active"),t=0;t<e.length;t++)e[t].classList.remove("edit-active")},controlParamCalculateValue:function(e,t){e=WPTB_Helper.replaceAll(e,"-","_");if(window["paramCalculateValue_".concat(e,"_").concat(t)]&&"function"==typeof window["paramCalculateValue_".concat(e,"_").concat(t)])return window["paramCalculateValue_".concat(e,"_").concat(t)]()},controlParamCalculateValueCreateFunction:function(e,t,n,a){var r=e.className.match(/wptb-element-((.+-)\d+)/i),r="wptb-el-".concat(r[1],"-").concat(t),t=WPTB_Helper.replaceAll(r,"-","_");window["paramCalculateValue_".concat(t,"_").concat(n)]=function(){return a(e)}},managerExternalCssStyles:function(e,t,n,a){var r=e.match(/wptb-element-main(.+)-(\d+)/i);r&&Array.isArray(r)||0<(r=document.getElementsByClassName("wptb-preview-table")).length&&(r=(r=r[0]).className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(r)&&(t=".".concat(r[0]," ").concat(t));var l=document.head;if(l){var o=l.querySelector("#styles-".concat(e));if(o){var r=o.innerHTML;if(r){for(var i=r.split("}"),s=(i.pop(),!1),c=0;c<i.length;c++){var d=i[c].split("{");if(d[0]===t){for(var p=d[1].split(";"),u=(p.pop(),!1),b=0;b<p.length;b++)if(p[b].split(":")[0]===n){a?p[b]="".concat(n,":").concat(a):p.splice(b,1),d[1]=p.join(";")?"".concat(p.join(";"),";"):"",u=!0;break}u||a&&(d[1]+="".concat(n,":").concat(a,";")),d[1]?i[c]="".concat(d[0],"{").concat(d[1]):i.splice(c,1),i.join("}")?o.innerHTML="".concat(i.join("}"),"}"):l.removeChild(o),s=!0;break}}s||(o.innerHTML=a?"".concat(r+t,"{").concat(n,":").concat(a,";}"):r)}else a?o.innerHTML="".concat(t,"{").concat(n,":").concat(a,";}"):l.removeChild(o)}else a&&((r=document.createElement("style")).setAttribute("id","styles-".concat(e)),r.classList.add("styles-wptb-elements"),r.innerHTML="".concat(t,"{").concat(n,":").concat(a,";}"),l.appendChild(r))}},registerSections:function(e){var n=this;this.sections={},this.previousSection=null,this.currentSection=null,(e=Array.isArray(e)?e:[e]).map(function(e){var t=document.querySelector("[data-wptb-section=".concat(e,"]"));t&&(n.sections[e]=t)})},activateSection:function(t){var n=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"block",e=(this.previousSection=this.currentSection,this.currentSection=t,this.triggerSectionEvent(t),document.querySelector("#wptb_builder"));e&&(e.dataset.wptbActiveSection=this.currentSection),Object.keys(this.sections).map(function(e){Object.prototype.hasOwnProperty.call(n.sections,e)&&(n.sections[e].style="display: ".concat(t===e?a:"none"," !important"))})},getCurrentSection:function(){return this.currentSection},getPreviousSection:function(){return this.previousSection},getSectionFromUrl:function(){var t=new URL(window.location.href).searchParams.get("wptb-builder-section");t&&Object.keys(this.sections).some(function(e){return e===t})&&this.activateSection(t)},setupSectionButtons:function(){var e=Array.from(document.querySelectorAll("[data-wptb-section-button]")),a=this;e.map(function(t){var n=t.dataset.wptbSectionButton;t.addEventListener("click",function(){var e=t.dataset.wptbSectionDisplayType;a.activateSection(n,e),WPTB_Helper.editActionClassRemove()}),document.addEventListener("wptbSectionChanged",function(e){e.detail===n?(t.classList.remove("disabled"),t.classList.add("active")):(t.classList.remove("active"),t.classList.add("disabled"))})})},setupPanelToggleButtons:function(){var t=jQuery;t(".wptb-panel-toggle-group").each(function(){var e=t(this);t(this).find(".toggle-icon").click(function(){e.find(".wptb-panel-toggle-target").slideToggle(),e.toggleClass("wptb-panel-toggle-content")})})},triggerSectionEvent:function(e){e=new CustomEvent("wptbSectionChanged",{detail:e});document.dispatchEvent(e)},setupSidebarToggle:function(e){e=document.querySelector(e);e&&e.addEventListener("click",function(e){e.preventDefault(),document.body.classList.toggle("collapsed")})},externalCssStylesDelete:function(e){var t=document.head;t&&(e=t.querySelector("#styles-".concat(e)))&&t.removeChild(e)},externalCssStylesCopy:function(e,t){var n,a,r;e&&(e=e.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(e)&&(e=e[0],n=document.head)&&(r=n.querySelector("#styles-".concat(e)))&&((a=r.cloneNode(!0)).removeAttribute("id","styles-".concat(e)),t=t.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)&&(a.setAttribute("id","styles-".concat(t[0])),r=r.innerHTML,r=WPTB_Helper.replaceAll(r,e,t[0]),a.innerHTML=r,n.appendChild(a))},elementsStylesConvertToObject:function(){for(var e=document.head.querySelectorAll(".styles-wptb-elements"),t={},n=0;n<e.length;n++){var a=e[n].getAttribute("id");a&&e[n].innerHTML&&(t[a]=e[n].innerHTML)}return 0!=Object.keys(t).length?JSON.stringify(t):""},elementsStylesSetFromObject:function(e){var a,r=document.head;if(r){if(0<(t=r.querySelectorAll(".styles-wptb-elements")).length)for(var t=_toConsumableArray(t),n=0;n<t.length;n++)r.removeChild(t[n]);e&&(a=JSON.parse(e),0!=Object.keys(a).length)&&Object.keys(a).forEach(function(e){var t=a[e],n=document.createElement("style");n.setAttribute("id",e),n.classList.add("styles-wptb-elements"),n.innerHTML=t,r.appendChild(n)})}},sanitizeXSS:function(){document.querySelectorAll(".wptb-custom-html-wrapper").forEach(function(e){e.innerHTML=DOMPurify.sanitize(e.innerHTML)})},saveTable:function(r,l,e){WPTB_Helper.tableSaveIndicator(!0),e||l||!r.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,r.target.dataset.wptbTableStateNumberSave),e||(c=document.querySelector(".wptb-edit-bar"))&&c.classList.contains("visible")&&(document.getElementsByClassName("wptb-preview-table")[0],WPTB_Helper.toggleTableEditMode()),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document),WPTB_Helper.sanitizeXSS(),WPTB_Helper.tableClean();var o,t,n,a,i,s=new XMLHttpRequest,c="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=save_table"),d=document.getElementById("wptb-setup-name").value.trim(),p=(n=document.getElementsByClassName("wptb-preview-table"),(rs=(rs=WPTB_Helper.detectMode())||document.wptbId)&&(t=rs),!1),u=(n=0<n.length?(u=(n=n[0]).cloneNode(!0),t&&u.classList.contains("wptb-element-main-table_setting-startedid-0")&&(u.classList.remove("wptb-element-main-table_setting-startedid-0"),u.classList.add("wptb-element-main-table_setting-".concat(t)),(i=document.querySelector(".wptb-table-setup"))&&(i.innerHTML="",i.appendChild(u),WPTB_Table()),p=!0),u.columns=n.columns,WPTB_Stringifier(u)):"",e||(a="",0<(i=document.getElementsByClassName("wptb-element-datas")).length&&i[0].innerHTML&&(a=i[0].innerHTML,p)&&(a=WPTB_Helper.replaceAll(a,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-".concat(t)),a=WPTB_Helper.replaceAll(a,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-".concat(t)))),WPTB_Helper.elementsStylesConvertToObject());p&&(u=WPTB_Helper.replaceAll(u,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-".concat(t))),""===d&&""===n?((i="")===d&&(i+="You must assign a name to the table before saving it.</br>"),""===n&&(i+="Table wasn't created"),(o=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '.concat(i,"</div>"),o.classList.add("wptb-warning"),setTimeout(function(){o.removeChild(o.firstChild)},4e3)):(p={title:d,content:n,elements_datas:a,elements_styles:u,security_code:wptb_admin_object.security_code},e&&(p.preview_saving=e),t&&(p.id=t),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document,p),p=JSON.stringify(p),s.open("POST",c,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=function(e){if(4==this.readyState&&(WPTB_Helper.tableSaveIndicator(!1),200==this.status)){var t=JSON.parse(s.responseText);if(o=document.getElementById("wptb-messaging-area"),"saved"==t[0])a=document.location.href.replace("#",""),n=new RegExp("&table=(.+)","i"),a=a.replace(n,""),window.history.pushState(null,null,"".concat(a,"&table=").concat(t[1])),document.wptbId=t[1],o.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(d," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),WPTB_Store.commit("setTableId",t[1]),(new WPTB_TableStateSaveManager).tableStateClear(),document.querySelector(".wptb-preview-table"),0<(n=document.getElementsByClassName("wptb-preview-btn")).length&&((n=n[0]).classList.remove("wptb-button-disable"),a=(a=n.dataset.previewHref).replace("empty",t[1]),n.setAttribute("href",a)),r.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow,0<(n=document.getElementsByClassName("wptb-save-btn")).length&&((n=n[0]).classList.add("wptb-save-disabled"),n.classList.remove("active"));else{if("edited"==t[0]&&l){document.wptbId=t[1],o.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(d," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(t[1],"]");document.querySelector(".wptb-preview-table");var n,a=document.getElementsByClassName("wptb-preview-btn"),a=(0<a.length&&((a=a[0]).classList.remove("wptb-button-disable"),n=(n=a.dataset.previewHref).replace("empty",t[1]),a.setAttribute("href",n)),r.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow,document.getElementsByClassName("wptb-save-btn"));0<a.length&&((a=a[0]).classList.add("wptb-save-disabled"),a.classList.remove("active"))}else if("edited"==t[0])o.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(d,'" was successfully updated.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(d," was successfully updated.")}),r.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow,(new WPTB_TableStateSaveManager).tableStateClear();else{if("preview_edited"==t[0])return;o.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}o.classList.add("wptb-success"),setTimeout(function(){o.removeChild(o.firstChild)},4e3)}}},s.send(p))},clickOnFreeSpace:function(){var e;WPTB_Helper.editActionClassRemove(),"table_responsive_menu"===this.getCurrentSection()||(e=document.querySelector("#wptb-cell_mode_background"))&&e.classList.contains("visible")||(this.activateSection("elements"),(e=document.getElementById("wpcd_fixed_toolbar")).hasAttribute("data-toolbar-active-id")&&document.getElementById(e.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active"),!(e=document.querySelector(".wptb-preview-table")))||WPTB_Helper.elementOptionsSet("table_setting",e)},elementAjax:function(e,n){var t,a=new XMLHttpRequest,r="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=wptb_element_ajax"),l=n.className.match(/wptb-element-(.+)-(\d+)/i),e={element_ajax_data:e,element_name:t=l&&Array.isArray(l)?l[1]:t,security_code:wptb_admin_object.security_code},e=JSON.stringify(e);a.open("POST",r,!0),a.setRequestHeader("Content-type","application/json; charset=utf-8"),a.onreadystatechange=function(e){var t;4==this.readyState&&200==this.status&&(t=(t=JSON.parse(a.responseText))&&Array.isArray(t)&&"element_ajax_responce"==t[0]?{value:t[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",n,t))},a.send(e)},toggleTableEditMode:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.getElementsByClassName("wptb-edit-bar"),n=document.getElementById("wptb-cell_mode_background"),a=document.getElementById("wptb-left-scroll-panel-curtain"),r=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=document.getElementsByClassName("wptb-preview-table"),o=(0<l.length&&(l=l[0]),document.querySelector(".wptb-builder-panel"));if(0<t.length){for(var i="",s=0;s<t.length;s++)if(e){document.select.deactivateMultipleSelectMode(),t[s].classList.remove("visible"),n.classList.remove("visible"),a.classList.remove("visible"),r.classList.remove("visible"),l.parentNode.classList.remove("wptb-preview-table-manage-cells");var c=l.getElementsByTagName("td");if(0<c.length)for(var d=0;d<c.length;d++)c[d].classList.remove("wptb-highlighted");o.dataset.manageCellsActive=!(i="closed")}else document.select.activateMultipleSelectMode(),t[s].classList.add("visible"),n.classList.add("visible"),a.classList.add("visible"),l.parentNode.classList.add("wptb-preview-table-manage-cells"),i="opened",o.dataset.manageCellsActive=!0;WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-edit-mode/".concat(i),l)}},checkingDimensionValue:function(e,t){var n;return e=String(e),t=String(t),!(!e||!t)&&-1!=(n=e.indexOf(t))&&n==e.length-t.length},checkSetGetStyleSizeValue:function(e,t,n,a){var r=e.style[t];if((r=String(r))&&!a||WPTB_Helper.checkingDimensionValue(r,a)){if(!a)return r}else{r=window.getComputedStyle(e);if(n&&r.getPropertyValue(n)&&a&&!WPTB_Helper.checkingDimensionValue(r.getPropertyValue(n),a)){if(!a)return!1;e.style[t]=null}else{if(!a)return r.getPropertyValue(n);e.style[t]=r.getPropertyValue(n)}}return e.style[t]},checkSetGetStyleColorValue:function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!a)return r}else{var l=window.getComputedStyle(e,null);if(l&&l.getPropertyValue(n)){if(!a)return l.getPropertyValue(n);r=WPTB_Helper.rgbToHex(l.getPropertyValue(n)),WPTB_Helper.isHex(r)?e.style[t]=r:e.style[t]=""}else{if(!a)return"";e.style[t]=""}}},checkSetGetStyleValue:function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!a)return r}else{r=window.getComputedStyle(e,null);if(r&&r.getPropertyValue(n)){if(!a)return r.getPropertyValue(n);e.style[t]=r.getPropertyValue(n)}else if(!a)return""}},getValueMaxCountSameElementsInArray:function(e){if(e&&Array.isArray(e)){for(var t,n,a={},r=0,l=0;l<e.length;l++)e[l]?a[e[l]]?a[e[l]]++:a[e[l]]=1:r++;for(n in a)(!t||a[t]<a[n])&&(t=n);return r<=a[t]?t:""}},recalculateIndexes:function(e){WPTB_RecalculateIndexes(e)},tableRowsColorsReinstall:function(e){var t,n;e.rows.length&&(e=e.className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(e)&&(t="",t="0"==e[e.length-1]?"startedid-0":e[e.length-1],(e=document.querySelector(".wptb-el-main-table_setting-".concat(t,"-tableHeaderBackground")))&&(n={value:e.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",e,n)),(e=document.querySelector(".wptb-el-main-table_setting-".concat(t,"-tableEvenRowBackground")))&&(n={value:e.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",e,n)),e=document.querySelector(".wptb-el-main-table_setting-".concat(t,"-tableOddRowBackground")))&&(n={value:e.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",e,n))},getParentOfType:function(e,t){return t.nodeName===e.toUpperCase()?t:WPTB_Helper.getParentOfType(e,t.parentElement)},dragRelativeType:"",setDragRelativeType:function(e){this.dragRelativeType=e},getDragRelativeType:function(){return this.dragRelativeType},getElementColorStylesHex:function(e,t){e=e.style[t],e=WPTB_Helper.rgbToHex(e);return e=WPTB_Helper.isHex(e)?e:""},showControlsOnElementMount:function(){document.addEventListener("element:mounted:dom",function(e){e.target.click()})},showElementsListOnRemove:function(){document.addEventListener("element:removed:dom",function(){WPTB_Helper.activateSection("elements")})},blockTinyMCE:function(){function n(e){var t=document.createElement("div"),n=(t.classList.add("wptb-plugin-blocker-element"),0<e.childNodes.length);e.appendChild(t),n||e.classList.add("wptb-plugin-blocker-element-empty")}function a(e){var t=e.querySelector(".wptb-plugin-blocker-element");t&&t.remove(),e.classList.remove("wptb-plugin-blocker-element-empty")}document.addEventListener("wptbSectionChanged",function(e){var e=e.detail,t=document.querySelector(".wptb-table-setup table.wptb-preview-table");t&&((t=Array.from(t.querySelectorAll("td"))).map(a),["manage_cells","cell_settings","background_menu"].includes(e))&&t.map(n)}),document.addEventListener("wptb:save:before",function(){var e=document.querySelector(".wptb-table-setup table.wptb-preview-table");Array.from(e.querySelectorAll("td")).map(a)})},calledByBlock:function(){new URL(window.location.href).searchParams.get("gutenberg")&&document.querySelector(".wptb-plugin-header-close a").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var e=!WPTB_Store.getters.getTableDirtyStatus,t=new URL(window.location.href).searchParams.get("table");(e||window.confirm(WPTB_Store.getTranslation("dirtyConfirmation")))&&WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,t)},{capture:!0})},tableClean:function(){Array.from(document.querySelectorAll(".wptb-directlyhovered")).map(function(e){e.classList.remove("wptb-directlyhovered")}),Array.from(document.querySelectorAll(".wptb-text-container p")).map(function(e){e.removeAttribute("data-placeholder")})},tableSaveIndicator:function(e){var t=document.querySelector("#wptb_builder");t&&(e?t.dataset.wptbSaving=!0:delete t.dataset.wptbSaving)},getPluginTables:function(){var e=Array.from(document.querySelectorAll("table.wptb-preview-table"));return 1===e.length?e[0]:0===e.length?null:e}},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),WPTB_Helper.registerSections(["elements","table_settings","cell_settings","options_group","table_responsive_menu","manage_cells","background_menu"]),WPTB_Helper.setupSectionButtons(),WPTB_Helper.activateSection("elements"),WPTB_Helper.setupSidebarToggle(".wptb-panel-toggle-section .wptb-panel-drawer-icon"),WPTB_Helper.setupPanelToggleButtons(),new WptbResponsive("table_responsive_menu","wptbResponsiveApp",".wptb-builder-content"),WPTB_Helper.getSectionFromUrl(),WPTB_Helper.showControlsOnElementMount(),WPTB_Helper.showElementsListOnRemove(),WPTB_Helper.blockTinyMCE(),new WPTB_HeaderToolbox(".wptb-plugin-header-toolbar").init(),document.addEventListener("wp-table-builder/table-edit-mode/closed",function(){WPTB_Helper.activateSection("elements")}),WPTB_Helper.calledByBlock(),WPTB_ControlsManager.callControlScript("WhatIsNew"),WPTB_NotificationManager.init(),WPTB_ControlsManager.callControlScript("TableEmbed","wptb-embed-modal"),document.addEventListener("wptb:table:generated",function(){WPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder),WPTB_ControlsManager.subscribeToControl("extraStyles","extraTableStyles",function(){WPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder)},!0)}),WPTB_ControlsManager.callControlScript("SaveButton","saveButton")},WPTB_LeftPanel=function(){for(var e=document.getElementsByClassName("wptb-preview-table")[0],t=document.getElementsByClassName("wptb-element"),n=0;n<t.length;n++)t[n].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};e&&(document.querySelector("#wptb-left-scroll-panel-curtain .wptb-table-edit-mode-close").addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)}),document.addEventListener("wptbSectionChanged",function(e){"manage_cells"===e.detail&&Array.from(document.querySelectorAll(".wptb-management_table_container .wptb-table-edit-mode-close")).map(function(e){e.addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)})})}));document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||"manage_cells"!==WPTB_Helper.currentSection&&WPTB_Helper.clickOnFreeSpace()};e=document.getElementsByClassName("wptb-header");(e=0<e.length?e[0]:e).onclick=function(){WPTB_Helper.clickOnFreeSpace()}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,n){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t[e]=n()}("WPTB_Logger",self||global,function(){var t={normal:"#48BB78"};return{prepareMessage:function(e){return"%c WP Table Builder %c {message} ".replace("{message}",e)},prepareMessageStyle:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"normal",e=t[e]?e:"normal";return"background-color: {bgColor} ; padding: 3px; color: #FFF; border-radius: 0 5px 5px 0;".replace("{bgColor}",t[e])},log:function(e){console.log(this.prepareMessage(e),"border-radius:5px 0 0 5px; background-color: #3299D1; padding: 3px; color: #FFF; font-weight: bold;",this.prepareMessageStyle("normal"))}}});var MultipleSelect=function(){var r=[],n=!1;return this.activateMultipleSelectMode=function(){r=[];for(var e=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),t=0;t<e.length;t++)e[t].classList.remove("wptb-highlighted");n=!0},this.deactivateMultipleSelectMode=function(){n=!1},this.isActivated=function(){return n},this.pushSelectedCell=function(e){n&&(r.push(e),e.classList.add("wptb-highlighted"))},this.selectedCells=function(){return r},this.flushSelectedCells=function(){r=[]},this.getFirst=function(){for(var e,t=1e3,n=1e3,a=r.length-1;0<=a;a--)t>=r[a].dataset.xIndex&&n>=r[a].dataset.yIndex&&(e=r[a],t=r[a].dataset.xIndex,n=r[a].dataset.yIndex);return e},this.getLast=function(){for(var e,t=-1,n=-1,a=r.length-1;0<=a;a--)t<=r[a].dataset.xIndex&&n<=r[a].dataset.yIndex&&(e=r[a],t=r[a].dataset.xIndex,n=r[a].dataset.yIndex);return e},this.removeAllButFirst=function(){for(var e=this.getFirst(),t=1;t<r.length;t++)r[t].classList.add("wptb-fused-cell-"+e.dataset.xIndex+"-"+e.dataset.yIndex)},this};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _this=this;function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}!function(e,t,n){t[e]=n()}("WPTB_NotificationManager",self||global,function(){var a=!1;_this.store=null;return new function(){var e,t=this,n=(this.types={},null==(e=(self||global).wptb_admin_object)?void 0:e.notificationManager);this.sendNotification=function(e){var n,a;t.store.dispatch("addNotification",(n=e,a=t.store.getters.defaults,e=Object.keys(n).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(n,t)&&a[t]&&(e[t]=n[t]),e},{}),_objectSpread(_objectSpread({},a),e)))},this.init=function(){a||(WPTB_ControlsManager.setControlData("NotificationManager",n),WPTB_ControlsManager.callControlScript("NotificationManager","NotificationManager"),t.notificationTypes=t.store.getters.notificationTypes,t.queueTypes=t.store.getters.queueTypes,t.revealTypes=t.store.getters.revealTypes,t.dismissTypes=t.store.getters.dismissTypes,a=!0)}}});var WPTB_Parser=function(e){for(var t=document.createElement("div"),e=(t.innerHTML=e,t.children[0]),n=_toConsumableArray(e.querySelectorAll(".wptb-column-title-mobile-container")),a=0;a<n.length;a++)n[a].parentNode.removeChild(n[a]);for(var r=e.querySelectorAll("td"),l=0;l<r.length;l++)r[l].classList.add("wptb-droppable"),r[l].classList.remove("wptb-column-title-mobile-not-elements");return e};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.keys||(Object.keys=function(){"use strict";var r=Object.prototype.hasOwnProperty,l=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=o.length;return function(e){if("object"!==_typeof(e)&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,a=[];for(t in e)r.call(e,t)&&a.push(t);if(l)for(n=0;n<i;n++)r.call(e,o[n])&&a.push(o[n]);return a}}());var WPTB_RecalculateIndexes=function(e){for(var t,n=e.getElementsByTagName("tr"),a=0,r=0,l=[],o=0;o<n.length;o++){t=n[o].getElementsByTagName("td"),null==l[o]&&(l[o]=[]);for(var i=0,s=0;s<t.length;s++){if(null!=l[o][s])for(var c=0;c<100;c++){if(null==l[o][i]){l[o][i]=t[s],t[s].dataset.xIndex=i;break}i++}else l[o][s]=t[s],t[s].dataset.xIndex=i;if(t[s].dataset.yIndex=o,1<t[s].colSpan)for(var d=1;d<t[s].colSpan;d++)l[o][++i]="tdDummy";if(1<t[s].rowSpan)for(var p=1;p<t[s].rowSpan;p++){null==l[o+p]&&(l[o+p]=[]);for(var u=0;u<t[s].colSpan;u++)l[o+p][i-t[s].colSpan+1+u]="tdDummy"}i++}t.length>a&&(a=t.length),0==o&&(r=i)}e.columns=a,e.maxCols=r};function WptbResponsive(e,t,n){var a=this;this.sectionName=e,this.responsiveWrapperId=t,this.responsiveTable=null,this.loaded=!1,this.addContainerToDom=function(){if(!document.querySelector("#".concat(a.responsiveWrapperId))){var e=document.querySelector(n);if(!e)throw new Error("[WPTB_Responsive]: no parent container is found with the given query of [".concat(n,"]"));var t=document.createRange(),t=(t.setStart(e,0),t.createContextualFragment('<div class="wptb-responsive" id="'.concat(a.responsiveWrapperId,'">responsive element</div>')));e.appendChild(t),a.loaded=!0}a.responsiveTable=document.querySelector("#".concat(a.responsiveWrapperId))},this.load=function(){a.loaded||(a.addContainerToDom(),WPTB_Helper.elementStartScript(a.responsiveTable,"table_responsive_menu"),WPTB_Helper.elementOptionsSet("table_responsive_menu",a.responsiveTable),WPTB_ControlsManager.callControlScript("ResponsiveTable",a.responsiveWrapperId))},this.startUp=function(){document.addEventListener("wptbSectionChanged",function(e){var t=document.querySelector(".wptb-table-setup .wptb-preview-table");e.detail===a.sectionName&&t&&a.load()}),document.addEventListener("wptb:table:generated",function(){"table_responsive_menu"===WPTB_Helper.getCurrentSection()&&a.load()})},this.startUp()}var WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement),WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements||"")},e[t].ondragend=function(){WPTB_Helper.elementDragEndClear()};var n=new WPTB_TableStateSaveManager,a=document.getElementsByClassName("wptb-undo"),a=(0<a.length&&((a=a[0]).onclick=function(e){var t;this.classList.contains("wptb-undoredo-disabled")||(n.tableStateGet(this.dataset.wptbUndoredo),0<(t=document.getElementsByClassName("wptb-undo-redo-container")).length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()}))}),document.getElementsByClassName("wptb-redo")),a=(0<a.length&&((a=a[0]).onclick=function(e){var t;this.classList.contains("wptb-undoredo-disabled")||(n.tableStateGet(this.dataset.wptbUndoredo),0<(t=document.getElementsByClassName("wptb-undo-redo-container")).length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="";document.querySelector(".wptb-preview-table");WPTB_Table()}))}),document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||WPTB_Store.commit("embed/showModal")},window.onbeforeunload=function(e){return!!WPTB_Store.getters.getTableDirtyStatus||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){shortcodePopupWindow.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){var t,n;this.classList.contains("wptb-button-disable")||(t=Math.floor(1e4*Math.random()),(n=new URL(e.target.href)).searchParams.set("preview_id",t),e.target.href=n.toString(),WPTB_Helper.saveTable(e,!1,t))},document.querySelector("#wptb-setup-name"));a&&(a.onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()})};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=n():t[e]=n()}("WPTB_SortableTable",self||global,function(){return function(){var K=this.table=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).table,l=(WPTB_RecalculateIndexes(K),this);function t(e,t,n){var a,r,l;"TD"===e.target.tagName&&(a=null==e.offsetX?e.layerX:e.offsetX,r=null==e.offsetY?e.layerY:e.offsetY,l=!1,l="vertical"===t&&e.target.clientWidth-a<=35||"horizontal"===t&&a<=35||l)&&(e.target.clientHeight-35)/2<r&&(e.target.clientHeight+35)/2>r?n.classList.add("sortable-hover"):n.classList.remove("sortable-hover")}function c(e){t(e,"vertical",this)}function d(e){t(e,"horizontal",this)}function p(){this.classList.remove("sortable-hover")}function n(e,t){if(e.target&&"TD"===e.target.tagName&&!K.parentNode.classList.contains("wptb-preview-table-manage-cells")){var n=e.currentTarget,a=!1;if("vertical"===t&&e.target.dataset.hasOwnProperty("sortedVertical")){var r=[],l=[];if(this.itemsPerHeader&&this.itemsPerHeader<n.rows.length){WPTB_RecalculateIndexes(n);for(var o=_toConsumableArray(n.rows),i=n.querySelector("tbody")?n.querySelector("tbody"):n,s=0;s<o.length;s++)s<e.target.dataset.yIndex?(r.push(o[s]),i.removeChild(o[s])):s>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(l.push(o[s]),i.removeChild(o[s]));WPTB_RecalculateIndexes(n)}var c,d,p=n.querySelectorAll('[data-x-index="'.concat(e.target.dataset.xIndex,'"]'));(p=_toConsumableArray(p)).map(function(e){c=(c=parseInt(e.rowSpan,10))||1,d=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(d,n),d+=c,WPTB_CutGlueTable.cutTableHorizontally(d,n)});for(var M,u=[],O=0,D=[],b=0;b<p.length;b++){var m=Z(e,n,p,b,O,"vertical");if(m&&m.hasOwnProperty("i"))p=m.tds,b=m.i;else{for(var g=(p=m?m.tds:p)[b],y=(y=parseInt(g.rowSpan,10))||1,O=parseInt(g.dataset.yIndex,10)+y,m=Q(g),f=[],w=0;w<y;w++)f.push(n.rows[parseInt(g.dataset.yIndex,10)+w]),D.push(parseInt(g.dataset.yIndex,10)+w);0<g.dataset.yIndex?u.push({rowsTd:f,value:m}):M=f}}var q=X(e,"sortedVertical");if(!q)return;if(u.length&&u.sort(function(e,t){return Y(q,e,t)}),u.unshift({rowsTd:M}),u.length<n.rows.length)for(var R,h=0;h<n.rows.length;h++)-1<D.indexOf(h)||((R=[]).push(n.rows[h]),u.push({rowsTd:R}));var v,j,F,S=n.querySelector("tbody");S.innerHTML="",u.map(function(e){e.rowsTd.map(function(e){S.appendChild(e)})}),r.length&&(v=n.querySelector("tbody")?n.querySelector("tbody"):n)&&(j=v.querySelector("tr"),r.map(function(e){v.insertBefore(e,j)})),l.length&&(F=n.querySelector("tbody")?n.querySelector("tbody"):n,S)&&l.map(function(e){F.appendChild(e)}),WPTB_RecalculateIndexes(n),WPTB_CutGlueTable.glueTableHorizontally(n),a=!0}else if("horizontal"===t&&"0"===e.target.dataset.xIndex){var T,_,C=n.querySelectorAll('[data-y-index="'.concat(e.target.dataset.yIndex,'"]'));(C=_toConsumableArray(C)).map(function(e){T=(T=parseInt(e.colSpan,10))||1,_=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(_,n),_+=T,WPTB_CutGlueTable.cutTableVertically(_,n)});for(var z,B=[],V=0,A=0;A<C.length;A++){var E=Z(e,n,C,A,V,"horizontal");if(E&&E.hasOwnProperty("i"))C=E.tds,A=E.i;else{for(var P=(C=E?E.tds:C)[A],x=(x=parseInt(P.colSpan,10))||1,V=parseInt(P.dataset.xIndex,10)+x,E=Q(P),W=[],L=0;L<x;L++){var G=_toConsumableArray(n.querySelectorAll('[data-x-index="'.concat(parseInt(P.dataset.xIndex,10)+L,'"]')));W.push(G)}0<P.dataset.xIndex?B.push({columnsTd:W,value:E}):z=W}}var U=X(e,"sortedHorizontal");if(!U)return;if(B.length&&B.sort(function(e,t){return Y(U,e,t)}),B.unshift({columnsTd:z}),B.length<n.maxCols)for(var J=n.maxCols-B.length,I=0;I<J;I++){var $=_toConsumableArray(n.querySelectorAll('[data-x-index="'.concat(parseInt(n.maxCols,10)-parseInt(J,10)+I,'"]')));B.push({columnsTd:[$]})}for(var H=0;H<n.rows.length;H++)n.rows[H].innerHTML="";B.map(function(e){e.columnsTd.map(function(e){e.map(function(e){n.rows[e.dataset.yIndex].appendChild(e)})})}),WPTB_RecalculateIndexes(n),WPTB_CutGlueTable.glueTableVertically(n),a=!0}if(a){for(var N=_toConsumableArray(n.getElementsByTagName("td")),k=0;k<N.length;k++)N[k].hasAttribute("data-same-cell-before-division")&&N[k].removeAttribute("data-same-cell-before-division");n.hasOwnProperty("tableSM")&&(new(n.tableSM())).tableStateSet(),this.reassignElementsStyles("td"),this.reassignElementsStyles("tr")}}}function X(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function Y(e,t,n){var a=0<arguments.length&&void 0!==e?e:"ask",r=(1<arguments.length?t:void 0).value,l=(2<arguments.length?n:void 0).value;return parseInt(r)&&parseInt(l)&&(r=parseInt(r),l=parseInt(l)),"ask"===a?r<l?-1:r===l?0:1:r<l?1:r===l?0:-1}function Q(e){for(var t=e.querySelectorAll(".wptb-text-container"),t=_toConsumableArray(t),n="",a=0;a<t.length;a++)n+=t[a].innerText,a!==t.length-1&&(n+=" ");return n}function Z(e,t,n,a,r,l){var o,i,s,c,d,p,u,b=n[a],m=!1;if("vertical"===l?(i="colSpan",s="data-y-index",c="yIndex",d="xIndex",p="rowSpan",u=t.rows.length):"horizontal"===l&&(i="rowSpan",s="data-x-index",c="xIndex",d="yIndex",p="colSpan",u=t.maxCols),0<b.dataset[c]-r)for(var g=t.querySelectorAll("[".concat(s,'="').concat(r,'"]')),y=0;y<g.length;y++)if(o=(o=g[y][i])||1,g[y].dataset[d]<e.target.dataset[d]&&parseInt(g[y].dataset[d],10)+parseInt(o,10)>e.target.dataset[d]){n.splice(a,0,g[y]),m=!0,a--;break}if(m)return{tds:n,i:a};l=(l=parseInt(b[p],10))||1;if(a==n.length-1&&parseInt(b.dataset[c],10)+l<u){g=t.querySelectorAll("[".concat(s,'="').concat(parseInt(b.dataset[c],10)+l,'"]'));for(var f=0;f<g.length;f++)if(o=(o=g[f][i])||1,g[f].dataset[d]<e.target.dataset[d]&&parseInt(g[f].dataset[d],10)+parseInt(o,10)>e.target.dataset[d]){n.push(g[f]),m=!0;break}}return!!m&&{tds:n}}return this.itemsPerHeader=0,this.tableMaxCols=K.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=K.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=K.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var n=0;n<t.length;n++){var a=t[n],r=window.getComputedStyle(a,null).getPropertyValue("background-color"),l="";"td"===e?(l=a.dataset.xIndex+"-"+a.dataset.yIndex,this.cellsStylesScheme[l]={backgroundColor:r}):"tr"===e&&(l=String(n),this.rowsStylesScheme[l]={backgroundColor:r})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t,n=this.table.querySelectorAll(e);if("td"===e?t=this.cellsStylesScheme:"tr"===e&&(t=this.rowsStylesScheme),n.length)for(var a=0;a<n.length;a++){var r=n[a],l="";if("td"===e?l=r.dataset.xIndex+"-"+r.dataset.yIndex:"tr"===e&&(l=a),t.hasOwnProperty(l)){var o,i=t[l];for(o in i)r.style[o]=i[o]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(e){var t,n,a,r;this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(t="vertical",n="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(t="horizontal",n="vertical"),t&&"string"==typeof t&&n&&"string"==typeof n&&(a=WPTB_GetDirectionAfterReconstruction(this.table,t,n,"vertical",e),"object"===_typeof(a))&&a.hasOwnProperty("switch")&&((r=function(e){var t,e=a.switch(e);"object"===_typeof(e)&&(this.itemsPerHeader=e.itemsPerHeader,e.hasOwnProperty("newTable")?(t=this.table,this.table=e.newTable,this.sortModeSwitcher(e.type[0],!0),this.table=t):this.sortModeSwitcher(e.type[0],!0))}).call(l),this.table.addEventListener("table:rebuilt",function(e){r.call(l,e)},!1))},this.sortingCellMouseMoveSwitcher=function(e,t){var n=this;function a(e,t,n){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",p,!1),n&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",p,!1))}function r(e,t,n){n?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var l=this.table.querySelectorAll("td");if(l.length&&(l=_toConsumableArray(l)).map(function(e){a(e,c,!1),r(e,"sortedVertical",!1),a(e,d,!1),r(e,"sortedHorizontal",!1)}),t)if("vertical"===e)for(var o=this.table.rows.length,i=0;0<o;){var s=this.table.querySelectorAll('[data-y-index="'.concat(i,'"]'));(s=_toConsumableArray(s)).map(function(e){a(e,c,t),r(e,"sortedVertical",t)}),this.itemsPerHeader?(o-=this.itemsPerHeader+1,i+=this.itemsPerHeader+1):o=0}else"horizontal"===e&&(l=this.table.querySelectorAll('[data-x-index="0"]'),(l=_toConsumableArray(l)).map(function(e){2<n.table.querySelectorAll('[data-y-index="'.concat(e.dataset.yIndex,'"]')).length&&(a(e,d,t),r(e,"sortedHorizontal",t))}))},this.sortableTableVerticalStart=function(e){n.call(l,e,"vertical")},this.sortableTableHorizontalStart=function(e){n.call(l,e,"horizontal")},this}});var WPTB_Stringifier=function(e){var t,n,a,r,l,o;if(e)return t=e.dataset,n=(null==(n=e.querySelector("tbody"))?void 0:n.dataset)||{},l=e.style,a=e.querySelector("td"),r=e.querySelectorAll("tr"),l={alignment:t.wptbTableAlignment||"center",enableMaxWidth:!!t.wptbApplyTableContainerMaxWidth&&1,maxWidth:t.wptbTableContainerMaxWidth||"700",cellMinWidth:t.wptbTdWidthAuto||"120",sortHorizontal:"1"==t.wptbSortableTableHorizontal&&1,sortVertical:"1"==t.wptbSortableTableVertical&&1,borderCollapse:l.borderCollapse,tableSpacingX:t.borderSpacingColumns||"3",tableSpacingY:t.borderSpacingRows||"3",cols:t.tableColumns,cellsWidthAutoCount:t.wptbCellsWidthAutoCount,tdSumMaxWidth:t.wptbTableTdsSumMaxWidth,fontColor:n.globalFontColor||"#000000",linkColor:n.globalLinkColor||"#000000",fontSize:n.globalFontSize||"15",tableBorder:l.border,headerInnerBorder:null==a?void 0:a.style.border,scrollX:t.wptbHorizontalScrollStatus,disableThemeStyles:"1"===t.wptbDisableThemeStyles&&1,extraStyles:t.wptbExtraStyles||"",stickyFirstColumn:t.wptbFirstColumnSticky,stickyTopRow:"true"===(null==(n=e.querySelector("tr"))||null==(n=n.dataset)?void 0:n.wptbStickyRow),paginationEnable:"true"===t.wptbPaginationEnable&&"true",paginationTopRowAsHeader:("true"===t.wptbProPaginationTopRowHeader).toString(),rowsPerPage:t.wptbRowsPerPage||"10",rowsChangeable:"true"===t.wptbRowsChangeable&&"true",searchEnable:"true"===t.wptbSearchEnable&&"true",searchKeepHeader:("true"===t.wptbProSearchTopRowHeader).toString(),searchPosition:t.wptbSearchbarPosition||"left",role:e.getAttribute("role")||"table",directives:t.wptbTableDirectives,responsiveDirectives:t.wptbResponsiveDirectives,headerBg:t.wptbHeaderBackgroundColor,evenRowBg:t.wptbEvenRowBackgroundColor,oddRowBg:t.wptbOddRowBackgroundColor,hoverHeaderBg:t.wptbHeaderHoverBackgroundColor,hoverEvenRowBg:t.wptbEvenRowHoverBackgroundColor,hoverOddRowBg:t.wptbOddRowHoverBackgroundColor},o=[],Array.from(r).forEach(function(e){var t=e.className.match(/wptb-row-highlighted-([0-9]+)/),r={props:{hightLighted:t?"wptb-row-highlighted-".concat(t[1]):void 0,background:e.style.backgroundColor},cells:[]};Array.from(e.children).forEach(function(e){var t=e.dataset,n=e.className.match(/wptb-col-highlighted-([0-9]+)/),a={props:{width:e.style.width,autoWidth:"true"===t.wptbCssTdAutoWidth&&"true",height:e.style.height,autoHeight:"true"===t.wptbCssTdAutoHeight&&"true",padding:e.style.padding,background:e.style.backgroundColor,ownBgColor:t.wptbOwnBgColor,border:e.style.border,borderWidth:e.style.borderWidth,borderColor:e.style.borderColor,borderStyle:e.style.borderStyle,borderRadius:e.style.borderRadius,vAlign:t.wptbCellVerticalAlign||"center",isEmpty:e.classList.contains("wptb-empty"),highlighted:"wptb-col-highlighted-".concat((null==n?void 0:n[1])||"none"),xIndex:t.xIndex,yIndex:t.yIndex,xSort:t.sortedVertical,ySort:t.sortedHorizontal},blocks:[]};Array.from(e.children).forEach(function(e){e=WPTB_BlockSerializer.text(e)||WPTB_BlockSerializer.image(e)||WPTB_BlockSerializer.button(e)||WPTB_BlockSerializer.list(e)||WPTB_BlockSerializer.starRating(e)||WPTB_BlockSerializer.html(e)||WPTB_BlockSerializer.shortCode(e)||WPTB_BlockSerializer.circleRating(e)||WPTB_BlockSerializer.icon(e)||WPTB_BlockSerializer.ribbon(e)||WPTB_BlockSerializer.styledList(e)||WPTB_BlockSerializer.textIcon(e)||WPTB_BlockSerializer.progressBar(e)||WPTB_BlockSerializer.badge(e);e&&a.blocks.push(e)}),r.cells.push(a)}),o.push(r)}),JSON.stringify({props:l,rows:o})},WPTB_BlockSerializer={text:function(e){var t;if(e.classList.contains("wptb-text-container"))return t="",Array.from(e.querySelectorAll("p")).forEach(function(e){t+=e.outerHTML}),{type:"text",props:{text:t,color:e.style.color,fontSize:e.style.fontSize,padding:e.style.padding,margin:e.style.margin,elementId:null==(e=e.className.match("wptb-element-text-([0-9]+)"))?void 0:e[1]}}},image:function(e){var t,n;if(e.classList.contains("wptb-image-container"))return t=e.querySelector("img"),n=e.querySelector(".wptb-link-target"),{type:"image",props:{src:null==t?void 0:t.src,alignment:e.dataset.wptbImageAlignment||"center",altText:null==t?void 0:t.getAttribute("alt"),imgHeight:null==t?void 0:t.getAttribute("height"),imgWidth:null==t?void 0:t.getAttribute("width"),sizeRelativeTo:e.dataset.wptbImageSizeRelative||"container",size:t.dataset.wptbSize,width:null==n?void 0:n.style.width,url:null==n?void 0:n.href,linkRel:null==n?void 0:n.getAttribute("rel"),linkTarget:null==n?void 0:n.getAttribute("target"),convertToAbsolute:"true"===(null==n?void 0:n.dataset.wptbLinkEnableConvertRelative)&&"true",padding:e.style.padding,margin:e.style.margin}}},button:function(e){var t,n,a,r,l,o;if(e.classList.contains("wptb-button-container"))return n=e.querySelector(".wptb-button-wrapper"),a=e.querySelector(".wptb-link-target"),r=e.querySelector(".wptb-button"),l=e.querySelector(".wptb-button-icon"),o=e.querySelector(".wptb-button-label"),{type:"button",props:{text:e.querySelector("p").innerHTML,size:(null==(t=n.className.match(/wptb-size-(s|m|l|xl)/))?void 0:t[1])||"m",width:null==a?void 0:a.style.width,borderRadius:null==r?void 0:r.style.borderRadius,background:null==r?void 0:r.dataset.wptbElementBgColor,color:null==r?void 0:r.dataset.wptbElementColor,buttonAlignment:null==n?void 0:n.style.justifyContent,contentAlignment:null==r?void 0:r.style.justifyContent,id:null==a?void 0:a.id,url:null==a?void 0:a.href,linkRel:null==a?void 0:a.getAttribute("rel"),linkTarget:null==a?void 0:a.getAttribute("target"),convertToAbsolute:"true"===(null==a?void 0:a.dataset.wptbLinkEnableConvertRelative),hoverBg:null==r?void 0:r.dataset.wptbElementHoverBgColor,hoverColor:null==r?void 0:r.dataset.wptbElementHoverTextColor,hoverScale:null==r?void 0:r.dataset.wptbElementHoverScale,icon:(null==l?void 0:l.dataset.wptbButtonIconSrc)||"",iconPosition:null!=r&&r.classList.contains("wptb-plugin-button-order-right")?"right":"left",iconSize:null==l?void 0:l.style.height,hasLabel:n.classList.contains("wptb-button-has-label"),labelBg:null==o?void 0:o.style.backgroundColor,labelColor:null==o?void 0:o.style.color,labelText:null==o?void 0:o.innerHTML,padding:e.style.padding,margin:e.style.margin}}},list:function(e){var t,n,a,r;if(e.classList.contains("wptb-list-container"))return a=null==(a=(n=null==(t=e.querySelector("li"))?void 0:t.querySelector("p")).className.match(/wptb-list-style-type-(none|circle|square|disc)/))?void 0:a[0],r=[],Array.from(e.querySelectorAll("li")).forEach(function(e){var t=e.querySelector(".wptb-m-tooltip"),n=(null==(n=e.className.match(/wptb-tooltip-(top|bottom|left|right)/))?void 0:n[0])||"top",e=e.querySelector("p"),a=(null==e?void 0:e.style.textAlign)||"left";r.push({text:e.innerHTML,alignment:a,toolTip:(null==t?void 0:t.innerHTML)||"",tooltipPosision:n,toolTipStyle:(null==t?void 0:t.getAttribute("style"))||""})}),{type:"list",props:{type:a?"unordered":"ordered",listIcon:a||"disc",color:null==n?void 0:n.style.color,fontSize:null==n?void 0:n.style.fontSize,itemSpacing:null==t?void 0:t.style.marginBottom,padding:e.style.padding,margin:e.style.margin},items:r}},starRating:function(e){var t,n,a;if(e.classList.contains("wptb-star_rating-container"))return t=e.querySelector("li"),a=null==(n=e.querySelector(".wptb-number-rating-box"))?void 0:n.firstElementChild,{type:"starRating",props:{starSize:null==t?void 0:t.style.height,starColor:null==t||null==(t=t.querySelector("svg"))?void 0:t.style.fill,starCount:e.dataset.starCount,alignment:e.style.textAlign,showRating:"none"!==(null==n?void 0:n.style.display),fontSize:null==a?void 0:a.style.fontSize,color:null==a?void 0:a.style.color,value:Number((null==a||null==(t=a.textContent.split("/"))?void 0:t[0].trim())||0),padding:e.style.padding,margin:e.style.margin}}},html:function(e){if(e.classList.contains("wptb-custom_html-container"))return{type:"customHtml",props:{html:e.firstElementChild.innerHTML,padding:e.style.padding,margin:e.style.margin}}},shortCode:function(e){var t;if(e.classList.contains("wptb-shortcode-container"))return{type:"shortcode",props:{shortcode:null==(t=e.querySelector("div"))?void 0:t.innerHTML,padding:e.style.padding,margin:e.style.margin}}},circleRating:function(e){var t,n;if(e.classList.contains("wptb-circle_rating-container"))return t=e.querySelector(".wptb-rating-circle-wrapper"),n=e.querySelector(".wptb-rating-circle-bar"),{type:"circleRating",props:{size:null==t?void 0:t.style.fontSize,color:null==n?void 0:n.style.borderColor,ratingType:"number"===e.dataset.wptbRatingType?"number":"percent",value:e.dataset.percentageCount||"37",total:e.dataset.wptbTotalNumber||"10",padding:e.style.padding,margin:e.style.margin}}},icon:function(e){var t,n,a;if(e.classList.contains("wptb-icon-container"))return t=e.querySelector(".wptb-icon-wrapper"),n=e.querySelector(".wptb-icon-link-target-1"),a=[],Array.from(t.children).forEach(function(e){var t=e.firstElementChild;a.push({icon:(null==t?void 0:t.dataset.wptbIconSrc)||"star",url:null==e?void 0:e.href,linkRel:null==e?void 0:e.getAttribute("rel"),linkTarget:null==e?void 0:e.getAttribute("target"),convertToAbsolute:"true"===(null==e?void 0:e.dataset.wptbLinkEnableConvertRelative)})}),{type:"icon",props:{count:e.dataset.wptbIconNumber,size:null==n||null==(n=n.firstElementChild)?void 0:n.style.width,alignment:null==t?void 0:t.style.textAlign,padding:e.style.padding,margin:e.style.margin},icons:a}},ribbon:function(e){var t,n,a,r,l;if(e.classList.contains("wptb-ribbon_element-container"))return n=e.querySelector(".wptb-element-ribbon-inner"),a=e.querySelector(".wptb-element-ribbon-color-dump"),r=null==n?void 0:n.querySelector("p"),l=e.querySelector("#wptbRibbonIconDump"),{type:"ribbon",props:{type:e.dataset.wptbRibbonType,modifications:e.dataset.wptbRibbonModifications,side:e.dataset.wptbRibbonSide,xOffset:e.dataset.wptbRibbonXOffset,yOffset:e.dataset.wptbRibbonYOffset,width:e.dataset.wptbRibbonWidth,style:e.getAttribute("style"),background:null==(t=a||n)?void 0:t.style.backgroundColor,borderColor:null==(t=a||n)?void 0:t.style.borderColor,color:e.style.color,fontSize:null==r?void 0:r.style.fontSize,text:null==r?void 0:r.innerHTML,icon:null==l?void 0:l.dataset.wptbRibbonIconSrc,enableAnimation:"1"===(null==l?void 0:l.dataset.enableAnimation)&&"1",animationType:null==l?void 0:l.dataset.wptbRibbonIconAnimationType}}},styledList:function(e){var t,n,a,r;if(e.classList.contains("wptb-styled_list-container"))return n=null==(t=e.querySelector("li"))?void 0:t.querySelector("p"),a=e.querySelector(".wptb-styled-list-icon"),r=[],Array.from(e.querySelectorAll("li")).forEach(function(e){var t=e.querySelector(".wptb-m-tooltip"),n=(null==(n=e.className.match(/wptb-tooltip-(top|bottom|left|right)/))?void 0:n[0])||"top",a=e.querySelector("p"),e=(null==(e=e.firstElementChild)?void 0:e.dataset.wptbStyledListAlignment)||"left";r.push({text:a.innerHTML,alignment:e,toolTip:(null==t?void 0:t.innerHTML)||"",tooltipPosision:n,toolTipStyle:(null==t?void 0:t.getAttribute("style"))||""})}),{type:"styledList",props:{icon:null==a?void 0:a.dataset.wptbStyledListIconSrc,iconSize:null==a?void 0:a.style.height,iconColor:null==a?void 0:a.style.fill,iconSpacing:null==n?void 0:n.style.marginLeft,color:null==n?void 0:n.style.color,fontSize:null==n?void 0:n.style.fontSize,itemSpacing:null==t?void 0:t.style.marginBottom,padding:e.style.padding,margin:e.style.margin},items:r}},textIcon:function(e){var t,n,a;if(e.classList.contains("wptb-text_icon_element-container"))return t=e.dataset,n=e.querySelector("p"),a=e.querySelector(".wptb-text-icon-icon-wrapper"),{type:"textIcon",props:{spaceBetween:t.wptbTextIconSpaceBetween,alignment:t.wptbTextIconAlignment,fontSize:e.style.fontSize,color:null==n?void 0:n.parentElement.style.color,text:null==n?void 0:n.innerHTML,icon:null==a?void 0:a.dataset.wptbTextIconIconSrc,iconLocation:t.wptbTextIconIconLocation,iconSize:null==a?void 0:a.style.height,iconColor:null==a?void 0:a.style.color,padding:e.style.padding,margin:e.style.margin}}},progressBar:function(e){var t,n,a;if(e.classList.contains("wptb-progress_bar-container"))return n=e.querySelector(".wptb-progress-bar-label"),a=e.querySelector(".wptb-progress-bar-trail"),{type:"progressBar",props:{value:parseInt((null==n?void 0:n.textContent)||"0"),thickness:null==a?void 0:a.style.strokeWidth,primaryColor:null==(t=e.querySelector(".wptb-progress-bar-path"))?void 0:t.getAttribute("stroke"),secondaryColor:null==a?void 0:a.getAttribute("stroke"),labelColor:null==n?void 0:n.style.color,padding:e.style.padding,margin:e.style.margin}}},badge:function(e){var t;if(e.classList.contains("wptb-badge-container"))return{type:"badge",props:{fontSize:null==(t=e.querySelector(".wptb-badge-wrapper"))?void 0:t.style.fontSize,color:null==t?void 0:t.style.color,background:null==t?void 0:t.style.backgroundColor,alignment:e.style.justifyContent,text:null==t||null==(t=t.firstElementChild)?void 0:t.innerHTML,padding:e.style.padding,margin:e.style.margin}}}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],s=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var array=[],WPTB_Table=function(e,t,n){function v(e){var t=e.currentTarget,n=t.rowSpan,a=t.colSpan,r=document.getElementsByClassName("wptb-no-cell-action"),l=document.getElementsByClassName("wptb-single-action"),o=document.getElementsByClassName("wptb-multiple-select-action"),i=document.getElementById("wptb-left-scroll-panel-cell-settings");function s(e,t){for(var n=1<arguments.length&&void 0!==t&&t,a=(e.classList[n?"add":"remove"]("wptb-highlighted"),_(e)),a=_slicedToArray(a,2),r=a[0],l=a[1],o=e.rowSpan,i=e.colSpan,s=0;s<o;s++)for(var c=0;c<i;c++)array[r+s][l+c]=n?1:0}if((c=_(t))[0],c[1],document.select.isActivated()){var c=e.shiftKey,d=(t.className.match(/wptb-highlighted/)?!(1<(e=Array.from(document.querySelectorAll(".wptb-highlighted"))).length)||c?s(t,!1):(s(t,!0),e.map(function(e){e!==t&&s(e,!1)})):(c||Array.from(document.querySelectorAll(".wptb-highlighted")).map(function(e){e!==t&&s(e,!1)}),s(t,!0)),document.getElementsByClassName("wptb-highlighted")),e=d.length;if(0===e){for(var p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.add("visible"),r[p].removeAttribute("disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");i.classList.remove("visible")}else if(1===e){for(p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.add("visible"),l[p].removeAttribute("disabled");d=d[0],WPTB_Helper.elementOptionsSet("table_cell_setting",d);var u=d.className.match(/wptb-element-((.+-)\d+)/i);["cellWidth","cellHeight"].map(function(e){var t,n,a,r="wptb-el-".concat(u[1],"-").concat(e),l="wptb-el-".concat(u[1],"-").concat(e,"Fixed");"cellWidth"!==e&&"cellHeight"!==e||(n=t="","cellWidth"===e?(t="width",n="getColumnWidth"):"cellHeight"===e&&(t="height",n="getRowHeight"),a=d.style[t],e=document.querySelectorAll("."+r),r=document.querySelector("."+l),e=_toConsumableArray(e),a||d.dataset["wptbFixed".concat(t.toUpperCase())]?(e.map(function(e){a?e.value=parseFloat(a,10):d.dataset["wptbFixed".concat(t.toUpperCase())]&&(e.value=d.dataset["wptbFixed".concat(t.toUpperCase())])}),r.checked=!0):(a=WPTB_Helper[n](B,d),e.map(function(e){e.value=a}),r.checked=!1))}),i.classList.add("visible")}else{for(p=0;p<o.length;p++)B.isSquare(array)?(o[p].classList.add("visible"),o[p].removeAttribute("disabled")):(o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled"));for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");i.classList.remove("visible")}var b=t.className.match(/wptb-element-table_cell_setting-((.+-)\d+)/i);if(b&&1<b.length){var m,g=["emptyCell","highlightRow","highlightColumn"];for(m in g){var y,f,w,h="wptb-el-table_cell_setting-".concat(b[1],"-").concat(g[m]),h=document.getElementById(h);h&&("emptyCell"==g[m]?h.querySelector('input[type="checkbox"]').checked=t.classList.contains("wptb-empty"):"highlightRow"==g[m]?-1<(f=t.parentElement.classList[1]||"").indexOf("wptb-row-highlighted-")&&-1==t.parentElement.getAttribute("class").indexOf("wptb-row-highlighted-none")&&(f=f.substr(21),y=i.querySelectorAll(".wptb-el-table_cell_setting-".concat(b[1],"-rowTransformScale")),h.querySelector('input[type="checkbox"]').click(),y[0].value=f,y[1].value=f):"highlightColumn"==g[m]&&-1<(y=t.getAttribute("class")).indexOf("wptb-col-highlighted")&&-1==y.indexOf("wptb-col-highlighted-none")&&(_toConsumableArray(t.classList).pop(),f=t.classList[0].substr(21),w=document.querySelectorAll(".wptb-el-table_cell_setting-".concat(b[1],"-columnTransformScale")),h.querySelector('input[type="checkbox"]').click(),w[0].value=f,w[1].value=f))}}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/cell/mark",t,{countMarkedCells:e});c=document.querySelector("#wptb-split-cell");c&&(1===e&&(1!==n||1!==a)?(c.classList.add("visible"),c.removeAttribute("disabled")):(c.classList.remove("visible"),c.setAttribute("disabled","disabled")))}}function S(e){for(var t=0;t<e.length;t++){for(var n=0;n<e[t].length;n++)e[t][n];0}B.isSquare(e)}function T(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),n=document.getElementsByClassName("wptb-multiple-select-action"),a=document.getElementById("wptb-left-scroll-panel-cell-settings"),r=B.getElementsByClassName("wptb-highlighted");r.length;)r[0].classList.remove("wptb-highlighted");a.classList.remove("visible");for(var l=0;l<array.length;l++)for(var o=0;o<array[l].length;o++)array[l][o]=0;for(var i=0;i<n.length;i++)n[i].classList.remove("visible"),n[i].setAttribute("disabled","disabled");for(var s=0;s<e.length;s++)e[s].classList.add("visible"),e[s].removeAttribute("disabled");for(var c=0;c<t.length;c++)t[c].classList.remove("visible"),t[c].setAttribute("disabled","disabled");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/undo-select/active",B)}function a(){for(var e=[],t=[],n=0;n<B.rows.length;n++){for(var a=B.rows[n].getElementsByTagName("td"),r=0,l=0;l<a.length;l++)r+=a[l].colSpan;e.push(r)}u=Math.max.apply(null,e);for(var o=B.rows.length,n=0;n<o;n++){t[n]=[];for(l=0;l<u;l++)t[n].push(0)}return S(t),t}function _(e){for(var t=[],n=0;n<u;n++)t[n]=0;for(n=0;n<B.rows.length;n++)for(var a=B.rows[n].getElementsByTagName("td"),r=cellPointer=0;r<u;r+=stepsToMove)if(stepsToMove=1,t[r])t[r]--;else{var l=a[cellPointer++];if(l==e)return[n,r];if(1<l.rowSpan){for(var o=0;o<l.colSpan;o++)t[r+o]=l.rowSpan-1;stepsToMove=l.colSpan}else 1<l.colSpan&&(stepsToMove=l.colSpan)}}var r,l,u,o=document.getElementsByClassName("wptb-settings-items"),C=document.getElementsByClassName("wptb-table-setup")[0];if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var i=0;i<o.length;i++)"wptb-apply-inner-border"!==o[i].id&&o[i].classList.add("visible");(B=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),B.style.border="1px solid #d1d1d1",B.dataset.reconstraction=1;for(i=0;i<t;i++){(r=B.insertRow(-1)).classList.add("wptb-row");for(var g=0;g<e;g++)(l=new WPTB_Cell(v)).setCoords(i,g),l.getDOMElement().style.border="1px solid #d1d1d1",r.appendChild(l.getDOMElement())}}else{if(!(n=n||document.querySelector(".wptb-preview-table")))return;var B,s=(B=n).getElementsByTagName("td");if(0<s.length)for(var c=0;c<s.length;c++)WPTB_Cell(v,s[c])}B.mark=function(e){v(e)},B.wptbCell=function(e,t){return WPTB_Cell(e,t)},B.tableSM=function(){return WPTB_TableStateSaveManager},B.undoSelect=function(){T()},B.setMaxAmountOfCells=function(e){u=e},B.getMaxAmountOfCells=function(){return u},B.fillTableArray=a,B.recalculateIndexes=function(){WPTB_Helper.recalculateIndexes(this)},B.addColumnWidth=function(p,u){var t=B.getElementsByClassName("wptb-highlighted");if(0<t.length){for(var n=0;n<t.length;n++)!function(){var d,e=t[n].dataset.xIndex;e&&(d=function(e,t){for(var n=B.rows,a=!1,r=[],l=0;l<n.length;l++)for(var o=n[l].children,i=0;i<o.length;i++){var s=o[i];if(s.dataset.xIndex==e){if(p)s.colSpan==t?(s.style.width=p+"px",s.removeAttribute("data-wptb-fixed-width"),a=!0):(s.style.width=null,s.dataset.wptbFixedWidth=p,l!=n.length-1||a||d(e,t+1));else if(u)s.style.width=null,s.removeAttribute("data-wptb-fixed-width");else if(s.dataset.wptbFixedWidth)s.colSpan==t&&(s.style.width=s.dataset.wptbFixedWidth+"px",s.removeAttribute("data-wptb-fixed-width"));else if(s.style.width){for(var c=0;c<r.length;c++)r[c].style.width=s.style.width;r=[]}else r.push(s);break}}})(e,1)}();B.tdDefaultWidth(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B)}},B.tdDefaultWidth=function(){for(var e=B.rows,t=0,n=0,a=document.getElementsByClassName("wptb-table-setup")[0],r=a.offsetWidth,l=[],o=[],i=0,s=0,c="",d=window.getComputedStyle(B,null),p=d.getPropertyValue("border-left-width"),d=d.getPropertyValue("border-right-width"),u=parseFloat(p,10)+parseFloat(d,10),b=0;b<e.length;b++)for(var m=e[b].children,g=0;g<m.length;g++){var y,f,w,h=m[g];l[parseFloat(h.dataset.xIndex)]||o[parseFloat(h.dataset.xIndex)]?o[parseFloat(h.dataset.xIndex)]?h.dataset.wptbFixedWidth||(h.dataset.wptbCssTdAutoWidth=!0):l[parseFloat(h.dataset.xIndex)]&&h.removeAttribute("data-wptb-css-td-auto-width"):(h.style.width?(l[parseFloat(h.dataset.xIndex)]=parseFloat(h.style.width),h.removeAttribute("data-wptb-css-td-auto-width")):h.dataset.wptbFixedWidth||(o[parseFloat(h.dataset.xIndex)]=B.dataset.wptbTdWidthAuto?parseFloat(B.dataset.wptbTdWidthAuto,10):100,h.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(h,null)&&(f=(y=window.getComputedStyle(h,null)).getPropertyValue("padding-left"),w=y.getPropertyValue("padding-right"),i=parseFloat(f,10)+parseFloat(w,10),f=y.getPropertyValue("border-left-width"),w=y.getPropertyValue("border-right-width"),s=parseFloat(f,10)+parseFloat(w,10),s/=2,l[parseFloat(h.dataset.xIndex)]?(l[parseFloat(h.dataset.xIndex)]+=i,l[parseFloat(h.dataset.xIndex)]+=s,0==g&&u/2<=parseFloat(f,10)?l[parseFloat(h.dataset.xIndex)]+=parseFloat(f,10)/2:0==g&&u/2>parseFloat(f,10)&&(l[parseFloat(h.dataset.xIndex)]+=u/2-parseFloat(w,10)/2),g==m.length-1&&u/2<=parseFloat(w,10)?l[parseFloat(h.dataset.xIndex)]+=parseFloat(w,10)/2:g==m.length-1&&u/2>parseFloat(w,10)&&(l[parseFloat(h.dataset.xIndex)]+=u/2-parseFloat(w,10)/2)):o[parseFloat(h.dataset.xIndex)]&&(o[parseFloat(h.dataset.xIndex)]+=i,o[parseFloat(h.dataset.xIndex)]+=s,0==g&&u/2<=parseFloat(f,10)?o[parseFloat(h.dataset.xIndex)]+=parseFloat(f,10)/2:0==g&&u/2>parseFloat(f,10)&&(o[parseFloat(h.dataset.xIndex)]+=u/2-parseFloat(f,10)/2),g==m.length-1&&u/2<=parseFloat(w,10)?o[parseFloat(h.dataset.xIndex)]+=parseFloat(w,10)/2:g==m.length-1&&u/2>parseFloat(w,10)&&(o[parseFloat(h.dataset.xIndex)]+=u/2-parseFloat(f,10)/2))))}for(var v=0;v<l.length;v++)l[v]&&(t+=l[v]);for(var S=0,T=0;T<o.length;T++)o[T]&&(n+=o[T],S++);B.dataset.wptbTableTdsSumMaxWidth=p=t+n,S?(B.dataset.wptbCellsWidthAutoCount=S,B.mergingСellsHorizontally?B.dataset.wptbFixedWidthSize=t:B.removeAttribute("data-wptb-fixed-width-size")):(B.removeAttribute("data-wptb-fixed-width-size"),B.removeAttribute("data-wptb-cells-width-auto-count"));var _,d=!1,r=(p<r?S?(B.style.minWidth="100%",B.mergingСellsHorizontally?(B.style.width="auto",_=(_=(r-t)/S)-i-s,d=!0):B.style.width="100%"):(B.style.width="auto",B.style.minWidth=null,B.style.maxWidth=null):(B.style.maxWidth=null,B.style.minWidth=p+"px",B.style.width="auto",_=B.dataset.wptbTdWidthAuto||"100",d=!0),document.head);r&&(p=r.querySelector('style[data-wptb-td-auto-width="true"]'))&&r.removeChild(p),d&&((c=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),c.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+_+"px}",r)&&r.appendChild(c),B.dataset.wptbTableAlignment?(p=B.dataset.wptbTableAlignment,a.offsetWidth<B.offsetWidth?B.style.float=null:B.style.float="center"==p?null:p,a.style.float="center"==p?null:p,_&&B.dataset.wptbTableContainerMaxWidth&&B.offsetWidth<B.dataset.wptbTableContainerMaxWidth&&(B.style.width="100%")):B.style.float=null},B.addRowHeight=function(p,u){var t=B.getElementsByClassName("wptb-highlighted");if(0<t.length){for(var n=0;n<t.length;n++)!function(){var d,e=t[n].dataset.yIndex;e&&(d=function(e,t){for(var n=B.rows,a=!1,r=[],l=0;l<n.length;l++)for(var o=n[l].children,i=0;i<o.length;i++){var s=o[i];if(s.dataset.yIndex==e)if(p)s.rowSpan==t?(s.style.height=p+"px",s.removeAttribute("data-wptb-fixed-heidht"),a=!0):(s.style.height=null,s.dataset.wptbFixedHeight=p,i!=o.length-1||a||d(e,t+1));else if(u)s.style.height=null,s.removeAttribute("data-wptb-fixed-heidht");else if(s.dataset.wptbFixedHeight)(s.rowSpan=t)&&(s.style.height=s.dataset.wptbFixedHeight+"px",s.removeAttribute("data-wptb-fixed-width"));else if(s.style.height){for(var c=0;c<r.length;c++)r[c].style.height=s.style.height;r=[]}else r.push(s)}})(e,1)}();WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B)}},B.reconstraction=function(){for(var e=B.getElementsByTagName("td"),t=(B.mergingСellsHorizontally=!1,B.mergingCellsVertically=!1,B.dataset.reconstraction=1,0),n=0;n<e.length&&(1<e[n].colSpan&&(B.dataset.reconstraction=0,B.mergingСellsHorizontally=!0,t++),1<e[n].rowSpan&&(B.dataset.reconstraction=0,B.mergingCellsVertically=!0,t++),2!=t);n++);},B.addColumnEnd=function(){var e,t,n,a=document.getElementsByClassName("wptb-preview-table");(t=0<a.length?a[0].querySelector("td"):t)&&(n=t.getAttribute("style"));for(var r=0;r<B.rows.length;r++)e=new WPTB_Cell(v),n&&(e.getDOMElement().setAttribute("style",n),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),B.rows[r].appendChild(e.getDOMElement()),array[r].push(0);u++,B.recalculateIndexes(),B.tdDefaultWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.addColumnStart=function(){var e,t,n,a,r=document.getElementsByClassName("wptb-preview-table");(n=0<r.length?r[0].querySelector("td"):n)&&(a=n.getAttribute("style"));for(var l=0;l<B.rows.length;l++)e=new WPTB_Cell(v),a&&(e.getDOMElement().setAttribute("style",a),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),(t=B.rows[l].getElementsByTagName("td")[0])?B.rows[l].insertBefore(e.getDOMElement(),t):B.rows[l].appendChild(e.getDOMElement()),array[l].push(0);u++,B.recalculateIndexes(),B.tdDefaultWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.addColumnAfter=function(e){var t,n,a,r=B.rows;if(null!=e&&"number"==typeof e?(a=e,t=document.querySelector('[data-x-index="'+a+'"]')):(t=document.querySelector(".wptb-highlighted"),a=_(t)[1]),t)if(n=t.getAttribute("style"),u-a-t.colSpan+1==1)B.addColumnEnd();else{function l(e){var t=new WPTB_Cell(v);return e&&(t.getDOMElement().setAttribute("style",e),t.getDOMElement().style.width=null,t.getDOMElement().style.height=null),t.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor"),t}for(var o=0;o<r.length;o++)for(var i=r[o].children,s=0;s<i.length;s++)if(parseInt(i[s].dataset.xIndex)<=a){if(parseInt(i[s].dataset.xIndex)+i[s].colSpan==a+t.colSpan){var c=l(n),d=i[s].nextSibling;d?r[o].insertBefore(c.getDOMElement(),d):r[o].appendChild(c.getDOMElement());break}if(parseInt(i[s].dataset.xIndex)+i[s].colSpan>a+t.colSpan){i[s].colSpan++,1<i[s].rowSpan&&(o+=i[s].rowSpan-1);break}}else if(parseInt(i[s].dataset.xIndex)>a){d=l(n);r[o].insertBefore(d.getDOMElement(),i[s]);break}for(var p=0;p<array.length;p++)array[p].push(0);u++,S(array),B.recalculateIndexes(),B.addColumnWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()}},B.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),e=_(e)[1];0===e?B.addColumnStart():B.addColumnAfter(e-1)},B.addRowToTheEnd=function(){var e,t=B.insertRow(-1),n=document.getElementsByClassName("wptb-preview-table");if(t.classList.add("wptb-row"),0<n.length){for(var n=n[0],a=0;a<u;a++){var r=new WPTB_Cell(v),l=n.querySelector('[data-x-index="'+a+'"]');l&&(l=l.getAttribute("style"),r.getDOMElement().setAttribute("style",l),r.getDOMElement().style.height=null),t.appendChild(r.getDOMElement())}e=Array.from(array[0]),array.push(e),S(array),B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),B.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()}},B.addRowToTheStart=function(){var e,t=B.insertRow(0),n=document.getElementsByClassName("wptb-preview-table");if(t.classList.add("wptb-row"),0<n.length){for(var n=n[0],a=0;a<u;a++){var r=new WPTB_Cell(v),l=n.querySelector('[data-x-index="'+a+'"]');l&&(l=l.getAttribute("style"),r.getDOMElement().setAttribute("style",l),r.getDOMElement().style.height=null),t.appendChild(r.getDOMElement())}e=Array.from(array[0]),array.push(e),S(array),B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),B.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()}},B.addRowBefore=function(){for(var e,t=document.querySelector(".wptb-highlighted"),n=t.getAttribute("style"),a=_(t)[0],r=(a=0===a?-1:a)-1;0<=r;r--){var l=B.rows[r].children,o=l.length;if(0<o)for(var i=0;i<o;i++)if(1==l[i].rowSpan){a=r,e=!0;break}if(e)break}-1===a?B.addRowToTheStart():B.addRowAfter(a,n)},B.addRowAfter=function(e,t){var n,a=null!=e&&"number"==typeof e||null!=t?e:(t=(n=document.querySelector(".wptb-highlighted")).getAttribute("style"),(e=_(n)[0])+n.rowSpan-1),r=0;if(a<B.rows.length-1){for(var l=0;l<=a;l++){var o=B.rows[l].children,i=o.length;if(0<i)for(var s=0;s<i;s++)a<o[s].rowSpan-1+l&&o[s].rowSpan++}var c=B.rows[a+1].children,d=c.length;if(0<d)for(var p=0;p<d;p++)r+=c[p].colSpan}else r=array[0].length;var u=B.insertRow(a+1);for(u.classList.add("wptb-row"),g=0;g<r;g++){var b=new WPTB_Cell(v),m=B.querySelector('[data-x-index="'+g+'"]');m&&(m=m.getAttribute("style"),b.getDOMElement().setAttribute("style",m),b.getDOMElement().style.height=null),u.appendChild(b.getDOMElement())}t=Array.from(array[0]),array.push(t),S(array),B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),B.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after"),(new WPTB_TableStateSaveManager).tableStateSet()},B.isSquare=function(e){for(var t,n,a=-1,r=-1,l=-1,o=-1,i=0,s=0;s<e.length;s++)for(var c=0;c<e[s].length;c++)1==e[s][c]&&((c<r||-1==r)&&(r=c),s<a||-1==a)&&(a=s);for(s=e.length-1;-1<s;s--)for(c=e[s].length-1;-1<c;c--)1==e[s][c]&&(o<c&&(o=c),l<s)&&(l=s);for(s=a;s<l;s++)for(c=r;c<o;c++)if(0==e[s][c]||null==e[s][c])return!1;for(s=0;s<e.length;s++)for(c=0;c<e[s].length;c++)1==e[s][c]&&i++;return(t=l-a+1)*(n=o-r+1)===i&&[t,n]},B.mergeCells=function(){for(var e=B.isSquare(array),t=e[0],e=e[1],n=document.querySelector(".wptb-highlighted"),a=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),r=[],l=0;l<a.length;l++){var o=a[l].getElementsByClassName("wptb-ph-element");if(0<o.length)for(var i=o.length,s=0;s<i;s++)r.push(o[s]);a[l].parentNode.removeChild(a[l])}if(0<r.length)for(var c=0;c<r.length;c++)n.appendChild(r[c]);n.colSpan=e,n.rowSpan=t,B.recalculateIndexes(),B.reconstraction();e=n.style.width,t=n.dataset.wptbFixedWidth,e?B.addColumnWidth(parseFloat(e,10)):t?B.addColumnWidth():B.addColumnWidth(!1,!0),e=n.style.height,t=n.dataset.wptbFixedHeight;e?B.addRowHeight(parseFloat(e,10)):t?B.addRowHeight():B.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,n=e.colSpan,a=e.getAttribute("style"),r=_(e)[0],l=B.rows[r],o=e.dataset.xIndex;e.rowSpan=1;for(var i=e.colSpan=1;i<n;i++){var s=new WPTB_Cell(v);s.getDOMElement().setAttribute("style",a),s.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?l.insertBefore(s.getDOMElement(),e.nextSibling):l.appendChild(s.getDOMElement())}if(1<t)for(var c=1;c<t;c++){var d=void 0,p=B.rows[r+c],u=p.children,b=u.length;if(0<b)for(var m=0;m<b;m++)if(Number(u[m].dataset.xIndex)>Number(o)){d=u[m];break}for(var g=0;g<n;g++){var y=new WPTB_Cell(v);y.getDOMElement().setAttribute("style",a),null!=d?p.insertBefore(y.getDOMElement(),d):p.appendChild(y.getDOMElement())}}B.recalculateIndexes(),B.reconstraction(),B.addColumnWidth(),B.addRowHeight(),WPTB_Helper.dataTitleColumnSet(B),T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.findRowspannedCells=function(e){var t=[];if((actualPoints=function(e){for(var t=B.rows[e].getElementsByTagName("td"),n=0,a=0;a<t.length;a++)n+=t[a].colSpan;return n}(e))===u)return[];for(var n=u-actualPoints,a=e-1;0<=a&&n;a--)for(var r=B.rows[a].getElementsByTagName("td"),a=0;a<r.length;a++)1<r[a].rowSpan&&(t.push(r[a]),n-=r[a].colSpan);return t},B.addLackingCells=function(){for(var e=[],t=0;t<B.rows.length;t++)e.push(0);for(t=0;t<B.rows.length;t++)for(var n=B.rows[t].getElementsByTagName("td"),a=0;a<n.length;a++)if(1<n[a].rowSpan)for(var r=1;r<n[a].rowSpan;r++)e[t+r]++;for(t=0;t<B.rows.length;t++){for(var n=B.rows[t].getElementsByTagName("td"),l=0,a=0;a<n.length;a++)l+=n[a].colSpan;difference=u-(l+=e[t]);for(a=0;a<difference;a++){var o=new WPTB_Cell(v);B.rows[t].appendChild(o.getDOMElement())}}},B.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),n=e.rowSpan,a=_(e)[0];null==n&&(n=1);for(var r=0;r<n;r++){var l=B.rows[a].children,o=B.rows[a+1],i=[];if(null!=o){for(var s,c=(s=o.children).length,d=0;d<l.length;d++)if(1<l[d].rowSpan){for(var p=new WPTB_Cell(v),u=(p.getDOMElement().setAttribute("style",t),p.getDOMElement().colSpan=l[d].colSpan,p.getDOMElement().rowSpan=l[d].rowSpan-1,void 0),b=0;b<c;b++)if(Number(s[b].dataset.xIndex)>Number(l[d].dataset.xIndex)){u=s[b];break}i.push(u?[p,u]:[p])}if(0<i.length)for(var m=0;m<i.length;m++)null!=i[m][1]?o.insertBefore(i[m][0].getDOMElement(),i[m][1]):o.appendChild(i[m][0].getDOMElement())}var g,y=B.rows;if(0<y.length)for(var f=0;f<a;f++){var w=y[f].children;if(0<w.length)for(var h=0;h<w.length;h++)w[h].rowSpan-1>=a-f&&w[h].rowSpan--}g=Array.from(array[0]),array.pop(g),S(array),B.getElementsByTagName("tbody")[0].removeChild(B.rows[a]),0==B.rows.length?(WPTB_Helper.toggleTableEditMode(),C.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(g=document.getElementsByClassName("wptb-save-btn")).length&&((g=g[0]).classList.add("wptb-save-disabled"),g.classList.remove("active"))):(B.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(B),WPTB_Helper.dataTitleColumnSet(B),B.reconstraction())}T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},B.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,n=e.colSpan,a=0;a<n;a++){for(var r=0;r<B.rows.length;r++){var l=B.rows[r].children,o=l.length;if(0<o)for(var i=o-1;0<=i;i--){if(Number(l[i].dataset.xIndex)==Number(t)){1<l[i].colSpan?l[i].colSpan--:B.rows[r].removeChild(l[i]);break}if(Number(l[i].dataset.xIndex)<Number(t)&&Number(l[i].dataset.xIndex)+Number(l[i].colSpan-1)>=t){1<l[i].colSpan&&l[i].colSpan--;break}}}for(var s,c=0;c<B.rows.length;c++)null!=array[c]&&array[c].pop();u--,0==B.querySelectorAll("td").length?(WPTB_Helper.toggleTableEditMode(),C.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(s=document.getElementsByClassName("wptb-save-btn")).length&&((s=s[0]).classList.add("wptb-save-disabled"),s.classList.remove("active"))):(B.recalculateIndexes(),B.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(B),B.reconstraction())}T(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",B),(new WPTB_TableStateSaveManager).tableStateSet()},array=a(),T(),S(array),C.appendChild(B),B.recalculateIndexes(!0),B.reconstraction(),B.tdDefaultWidth(),C.onresize=function(){B.tdDefaultWidth()},WPTB_LeftPanel(),WPTB_Helper.wptbDocumentEventGenerate("wptb:table:generated",document),WPTB_Helper.elementStartScript(B,"table_setting"),WPTB_Helper.elementOptionsSet("table_setting",B)},WPTB_TableSettingsData={borderColor:"",setTableSetting:function(e,t){this[e]=t},getTableSetting:function(e){return this[e]}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WPTB_TableStateSaveManager=function(){this.tableStateSet=function(e){if(!(e&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var e=document.getElementsByClassName("wptb-table-setup"),t="",n=(0<e.length?t=(e=e[0]).querySelector(".wptb-preview-table"):e="",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1)),"");if(e){for(var a=(n=e.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),r=0;r<a.length;r++)a[r].classList.remove("wptb-highlighted");for(var l=n.getElementsByClassName("wptb-directlyhovered"),o=0;o<l.length;o++)l[o].classList.remove("wptb-directlyhovered");var i=n.querySelectorAll(".mce-content-body");if(0<i.length)for(var s=0;s<i.length;s++)i[s].classList.remove("mce-content-body");var c=n.querySelectorAll("[data-mce-style]");if(0<c.length)for(var d=0;d<c.length;d++)c[d].removeAttribute("data-mce-style");var p=n.querySelectorAll("[id^=mce_]");if(0<p.length)for(var u=0;u<p.length;u++)p[u].removeAttribute("id")}var e="",b=document.head,b=(b&&(b=b.querySelector('style[data-wptb-td-auto-width="true"]'))&&(e=b.innerHTML),""),m=document.getElementById("wptb-setup-name"),n=(m&&(b=m.value),window.wptbTableStateSaving.push([n,e,b]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,0<window.wptbTableStateSaving.length-1&&0<(m=document.getElementsByClassName("wptb-undo")).length&&(m=m[0]).classList.remove("wptb-undoredo-disabled"),document.getElementsByClassName("wptb-redo")),e=(0<n.length&&(n=n[0]).classList.add("wptb-undoredo-disabled"),document.querySelector(".main-save-button-wrapper .save-btn"));e&&(!e.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==e.dataset.wptbTableStateNumberSave||!t?WPTB_Store.commit("setTableClean"):WPTB_Store.commit("setTableDirty"))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&0<window.wptbTableStateSaving.length){if("undo"==e){if(!(0<window.wptbTableStateNumberShow))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length))return!1;window.wptbTableStateNumberShow++}var t,e=document.getElementsByClassName("wptb-undo"),e=(0<e.length&&(e=e[0],0==window.wptbTableStateNumberShow?e&&e.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&e&&e.classList.remove("wptb-undoredo-disabled")),document.getElementsByClassName("wptb-redo")),e=(0<e.length&&(e=e[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?e&&e.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&e&&e.classList.remove("wptb-undoredo-disabled")),document.querySelector(".main-save-button-wrapper .save-btn")),e=(e&&(!e.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==e.dataset.wptbTableStateNumberSave?WPTB_Store.commit("setTableClean"):WPTB_Store.commit("setTableDirty")),document.getElementsByClassName("wptb-table-setup"));0<e.length&&(e=e[0],window.wptbTableStateSaving[window.wptbTableStateNumberShow]&&(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML"in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(e.outerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML),(e=document.querySelector(".wptb-table-setup"))&&0==e.children.length&&WPTB_Store.commit("setTableClean"),(e=document.head)&&((t=e.querySelector('style[data-wptb-td-auto-width="true"]'))&&e.removeChild(t),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1])&&((t=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),t.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],e.appendChild(t)),e=document.getElementById("wptb-setup-name"),void 0!==window.wptbTableStateSaving[window.wptbTableStateNumberShow][2])&&e&&(e.value=window.wptbTableStateSaving[window.wptbTableStateNumberShow][2]),0<(t=document.getElementsByTagName("body")).length&&(t=t[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel(),e=document.getElementById("wptb-left-scroll-panel-cell-settings"))&&e.classList.remove("visible")}},this.tableStateClear=function(){window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,1),window.wptbTableStateNumberShow=0;var e=document.querySelector(".main-save-button-wrapper .save-btn"),e=(e&&e.removeAttribute("data-wptb-table-state-number-save"),document.getElementsByClassName("wptb-undo")),e=(0<e.length&&(e=e[0]).classList.add("wptb-undoredo-disabled"),document.getElementsByClassName("wptb-redo"));0<e.length&&(e=e[0]).classList.add("wptb-undoredo-disabled"),WPTB_Store.commit("setTableClean")}},WPTB_innerElementSet=(!function(){var e,t;WPTB_Store.getters.proStatus||(e="manageCellsMoveUpsells",(t=document.createElement("div")).setAttribute("id",e),document.body.appendChild(t),WPTB_ControlsManager.callControlScript("ManageCellsMoveUpsells",e))}(),function(t){t.ondragenter=function(e){-1==e.dataTransfer.types.indexOf("wptbelement")&&-1==e.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,e),t.classList.add("wptb-ondragenter"))},t.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},t.ondragleave=function(e){WPTB_DropHandle(this,e,!0)},t.ondrop=function(e){var t,n,a;if(this.classList.remove("wptb-ondragenter"),e.preventDefault(),e.stopPropagation(),e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node")){if(0<document.getElementsByClassName("wptb-drop-handle").length&&(n=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(a=document.getElementsByClassName("wptb-drop-border-marker")[0]),t=e.dataTransfer.getData("wptbElement")?(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():(l=e.dataTransfer.getData("node"),document.getElementsByClassName(l)[0]),"td_relative"===WPTB_Helper.getDragRelativeType())WPTB_DropHandle(this,e,!0),WPTB_Helper.getParentOfType("td",e.target).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t);else{if("block"!=n.style.display)return;"Drop Here"==n.dataset.text?((r=n.getDOMParentElement()).appendChild(t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):(r=(l=n.getDOMParentElement()).parentNode,"Above Element"==n.dataset.text?(r.insertBefore(t,l),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)):"Below Element"==n.dataset.text&&(l=l.nextSibling,r.insertBefore(t,l),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",t)));var r,l=r.parentNode;WPTB_Helper.rowIsTop(l)&&(r=WPTB_Helper.findAncestor(l,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(r);t.className.match(/wptb-element-(.+)-(\d+)/i)[1];e.dataTransfer.getData("wptbElement")}return n&&(n.style.display="none",a.style.display="none"),WPTB_innerElementSet(t),t.classList.contains("wptb-image-container")&&!t.classList.contains("wptb-moving-mode")||(t.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet()),!0}},t.onmouseover=function(e){t.classList.remove("wptb-ondragenter")}});function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var applyGenericItemSettings=function(e,t){var n,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e.getDOMElement();if(r.classList.contains("wptb-ph-element")){if(null==t||1==a){if(n=WPTB_ElementIdProvider.getNewId(e.kind),a)for(var l,o,i=_toConsumableArray(r.attributes),s=0;s<i.length;s++)i[s]&&"object"===_typeof(i[s])&&i[s].nodeName&&(l=new RegExp("data-wptb-el-"+e.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),l=i[s].nodeName.match(l))&&Array.isArray(l)&&(l=i[s].nodeName.replace(e.kind+"-"+l[1],e.kind+"-"+n),o=i[s].nodeValue,r.removeAttribute(i[s].nodeName),r.setAttribute(l,o))}else t&&!a&&(n=(a=t.split("-"))[a.length-1]);a=r.className.match(/wptb-element-(.+)-(\d+)/i);a&&r.classList.remove(a[0]),r.classList.contains("wptb-ph-element")||r.classList.add("wptb-ph-element"),r.classList.contains("wptb-element-"+e.kind+"-"+n)||r.classList.add("wptb-element-"+e.kind+"-"+n),WPTB_Helper.elementStartScript(e.getDOMElement()),new WPTB_ElementOptions(e,n,t),document.counter.increment(e.kind)}r.onmouseenter=function(e){var t;e.target.classList.contains("wptb-text-container")&&1===r.children.length&&1===(t=r.children[0].lastChild).children.length&&"<br>"===t.innerHTML&&(t.innerHTML=""),e.target.classList.contains("wptb-moving-mode")||((t=new WPTB_ActionsField).addActionField(1,r),t.setParameters(r),r.classList.remove("wptb-ondragenter"))},r.onmouseleave=function(e){(new WPTB_ActionsField).leaveFromField(e,r)}};!function(e,t,n){t[e]=n()}("WPTB_IconManager",self||global,function(){function e(e){if(!e)throw new Error("no icon list is defined for WPTB_IconManager instance");var o=e,i={},s=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=document.createElement("div");return t&&(t=Array.isArray(t)?t:[t]).map(function(e){a.classList.add(e)}),a.innerHTML=e,n?a.outerHTML:a};this.getIconList=function(){return o},this.getIcon=function(a){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,l=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(function(t,n){var e=function(e){return i[e]?s(i[e],1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,2<arguments.length&&void 0!==arguments[2]&&arguments[2]):null}(a,r,l);return e?t(e):o[a]?fetch(o[a]).then(function(e){if(e.ok)return e.text();throw new Error("an error occurred while fetching icon [".concat(a,"]"))}).then(function(e){if(e.error)throw new Error("an error occurred while fetching icon [".concat(a,"]"));return i[a]=e,t(s(e,r,l))}).catch(function(e){return n(new Error(e))}):n(new Error("no icon found with the given name of [".concat(a,"]")))})},this.getIconUrl=function(e){var t=null;return t=o[e]?o[e]:t}}return(self||global).wptb_admin_object?new e(wptb_admin_object.iconManager):null});
//# sourceMappingURL=admin.js.map
