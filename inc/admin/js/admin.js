function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i["return"]||i["return"]()}finally{if(r)throw o}}return n}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithHoles(e){return Array.isArray(e)?e:void 0}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i["return"]||i["return"]()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){return Array.isArray(e)?e:void 0}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _wrapRegExp(e,t){function n(e,t,n){return t=r.call(this,e,t),l.set(t,n||l.get(e)),t}function a(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,a){return t[a]=e[n[a]],t},Object.create(null))}_wrapRegExp=function(e,t){return new n(e,void 0,t)};var r=_wrapNativeSuper(RegExp),o=RegExp.prototype,l=new WeakMap;return _inherits(n,r),n.prototype.exec=function(e){return e=o.exec.call(this,e),e&&(e.groups=a(e,this)),e},n.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=l.get(this);return o[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"!=typeof t)return o[Symbol.replace].call(this,e,t);var r=this;return o[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==_typeof(e[e.length-1])&&e.push(a(e,r)),t.apply(this,e)})},_wrapRegExp.apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var a=[null];return a.push.apply(a,t),a=new(Function.bind.apply(e,a)),n&&_setPrototypeOf(a,n.prototype),a}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)),a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WptbResponsive(e,t,n){var a=this;this.sectionName=e,this.responsiveWrapperId=t,this.responsiveTable=null,this.loaded=!1,this.addContainerToDom=function(){if(!document.querySelector("#".concat(a.responsiveWrapperId))){var e=document.querySelector(n);if(!e)throw new Error("[WPTB_Responsive]: no parent container is found with the given query of [".concat(n,"]"));var t=document.createRange();t.setStart(e,0),t=t.createContextualFragment('<div class="wptb-responsive" id="'.concat(a.responsiveWrapperId,'">responsive element</div>')),e.appendChild(t),a.loaded=!0}a.responsiveTable=document.querySelector("#".concat(a.responsiveWrapperId))},this.load=function(){a.loaded||(a.addContainerToDom(),WPTB_Helper.elementStartScript(a.responsiveTable,"table_responsive_menu"),WPTB_Helper.elementOptionsSet("table_responsive_menu",a.responsiveTable),WPTB_ControlsManager.callControlScript("ResponsiveTable",a.responsiveWrapperId))},this.startUp=function(){document.addEventListener("wptbSectionChanged",function(e){var t=document.querySelector(".wptb-table-setup .wptb-preview-table");e.detail===a.sectionName&&t&&a.load()}),document.addEventListener("wptb:table:generated",function(){"table_responsive_menu"===WPTB_Helper.getCurrentSection()&&a.load()})},this.startUp()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i["return"]||i["return"]()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){return Array.isArray(e)?e:void 0}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);t>n;n++)a[n]=e[n];return a}function copyToClipboard(){var e=jQuery("<input>");jQuery("body").append(e),e.val(jQuery("#wptb-embed-shortcode").val()).select(),document.execCommand("copy"),e.remove()}var WPTB_ActionsField=function e(){var t=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(n,a){var r=document.getElementsByTagName("body")[0],o=document.getElementsByClassName("wptb-actions");if(0!=o.length){var l=o[0].activeElem;for(l&&l.classList.remove("wptb-directlyhovered");0!=o.length;)o[0].parentNode.removeChild(o[0])}1==n&&(l=document.createElement("span"),n=document.createElement("span"),(o=document.createElement("div")).classList.add("wptb-actions"),l.classList.add("dashicons","dashicons-trash","wptb-delete-action"),n.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),o.appendChild(n),o.appendChild(l),r.appendChild(o),o.activeElem=a,o.type=1,l.onclick=function(t){var n=t.target.parentNode.activeElem,t=n.parentNode;n.className.match(/wptb-element-(.+)-(\d+)/i),n&&t.removeChild(n),n&&"object"===_typeof(n)&&n.hasOwnProperty("kind")&&"text"==n.kind&&(t=t.parentNode,!WPTB_Helper.rowIsTop(t)||(t=WPTB_Helper.findAncestor(t,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(t)),(new e).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.wptbDocumentEventGenerate("element:removed:dom",document,n)},n.onclick=function(t){var n,a,r=t.target.parentNode.activeElem,o=r.parentNode,t=r.className.match(/wptb-element-(.+)-(\d+)/i);t&&Array.isArray(t)?(t=t[1],(n={}).kind=t,n.elemProt=r,n.tinyMceClear=!0,(n=new WPTB_ElementObject(n)).getDOMElement().classList.remove("edit-active"),o.insertBefore(n.getDOMElement(),r.nextSibling)):(n={},(a=r.cloneNode(!0)).classList.remove("wptb-directlyhovered"),n.getDOMElement=function(){return a},applyGenericItemSettings(n),o.insertBefore(n.getDOMElement(),r.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",r,n.getDOMElement())),WPTB_innerElementSet(n.getDOMElement()),(new e).setParameters(r),(new WPTB_TableStateSaveManager).tableStateSet()},a.classList.contains("wptb-ph-element")&&((a=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),a.draggable=!0,o.appendChild(a),a.ondragstart=function(e){var n,a=wp.template("wptb-element-icons-directories")({}),r=JSON.parse(a),o=e.target.parentNode.activeElem,l=o.className.match(/wptb-element-(.+)-(\d+)/i);l&&Array.isArray(l)?(a=l[1],o.classList.add("wptb-moving-mode"),r&&"object"===_typeof(r)&&r[a]&&(n=WPTB_Helper.getElementIcon(r[a])),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(n,0,0),e.dataTransfer.setData("node","wptb-element-"+l[1]+"-"+l[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+l[1]+"-"+l[2]),e.dataTransfer.setData("wptbElIndic-"+l[1],"wptbElIndic-"+l[1]),"text"==(e=e.target.parentNode.activeElem).kind&&(e=e.parentNode.parentNode,!WPTB_Helper.rowIsTop(e)||(e=WPTB_Helper.findAncestor(e,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(e))):t.style.display="none",t.actionsHide()},a.ondragend=function(e){WPTB_Helper.elementDragEndClear()}),o.style.display="flex",t.wptbActions=o),WPTB_Helper.wptbDocumentEventGenerate("wptb:actionfield:generated",document)},this.setParameters=function(e){var n,a;t.wptbActions||(0<(a=document.getElementsByClassName("wptb-actions")).length?t.wptbActions=a[0]:t.wptbActions=!1),t.wptbActions&&t.wptbActions.classList.contains("wptb-actions")&&(t.wptbActions.style.display="flex",n=e.getBoundingClientRect(),a=document.getElementsByClassName("wptb-container")[0],t.wptbActions.style.top=parseFloat(n.top)-15+"px",t.wptbActions.style.left=parseFloat(n.right)-parseFloat(t.wptbActions.clientWidth)+1+"px",t.wptbActions.style.display="flex",e.classList.add("wptb-directlyhovered"),a.onscroll=function(){var n=e.getBoundingClientRect();t.wptbActions.style.top=parseFloat(n.top)-15+"px"})},this.leaveFromField=function(n,a,r){var o;if(t.wptbActions||(0<(o=document.getElementsByClassName("wptb-actions")).length?t.wptbActions=o[0]:t.wptbActions=!1),t.wptbActions){if(n.relatedTarget&&(n.relatedTarget.classList.contains("wptb-actions")||n.relatedTarget.classList.contains("wptb-move-action")||n.relatedTarget.classList.contains("wptb-duplicate-action")||n.relatedTarget.classList.contains("wptb-delete-action")||n.relatedTarget.classList.contains("wptb-prebuilt-mark-action")))return t.wptbActions||(t.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void(t.wptbActions.onmouseleave=function(n){null!=n.relatedTarget&&(n.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(n.relatedTarget,"wptb-ph-element"))&&n.relatedTarget!=t.wptbActions.activeElem&&(WPTB_Helper.findAncestor(n.relatedTarget,"wptb-directlyhovered"),t.wptbActions.activeElem),(new e).leaveFromField(n,n.relatedTarget.parentNode.parentNode),n.target.activeElem.classList.remove("wptb-directlyhovered")});a.classList.remove("wptb-directlyhovered"),t.wptbActions.style.display="none",n.relatedTarget&&(n.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(n.relatedTarget,"wptb-ph-element"))&&(t.addActionField(1,n.relatedTarget.parentNode),t.setParameters(n.relatedTarget.parentNode))}},this.actionsRemove=function(){var e;t.wptbActions||0<(e=document.getElementsByClassName("wptb-actions")).length&&(t.wptbActions=e[0]),t.wptbActions&&t.wptbActions.parentNode.removeChild(t.wptbActions)},this.actionsHide=function(){var e;t.wptbActions||0<(e=document.getElementsByClassName("wptb-actions")).length&&(t.wptbActions=e[0]),t.wptbActions&&(t.wptbActions.style.opacity=0)}};!function(e){(self||global).WPTB_BackgroundMenu=e()}(function(){var e=new function(){function e(){return document.querySelector(".wptb-table-setup .wptb-preview-table")}function t(){return document.querySelector(".wptb-bg-color-selectors")}function n(){Array.from(e().querySelectorAll("td")).map(function(e){e.classList.remove("wptb-highlighted")})}function a(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=e.nodeName.toLowerCase();t||n(),(e="td"!==a?e.parentNode:e).classList.add("wptb-highlighted")}function r(e){e.preventDefault(),e.stopPropagation();var t=e.target.nodeName.toLowerCase(),n=e.target;"td"!==t&&(n=e.target.parentNode),a(n),w.commit("setMenuSelectedTableElement",{type:w.state.types.selected.cell,item:n})}function o(){return document.querySelector(".wptb-col-selection")}function l(){return document.querySelector(".wptb-row-selection")}function i(e){w.commit("updateHoveredRowElement",e.target)}function s(e){var t=e.target,e=Array.from(t.parentNode.querySelectorAll("td")).reduce(function(e,n,a){return n===t?a:e},-1);w.commit("updateHoveredCellElement",{element:t,index:e})}function c(t){var n="number"==typeof t?t:Number.parseInt(t,10),a=[];return isNaN(n)||Array.from(e().querySelectorAll("tr")).map(function(e){e=Array.from(e.querySelectorAll("td")).splice(n,1),e=_slicedToArray(e,1)[0],e&&a.push(e)}),a}function d(){var e=document.createElement("div");return e.classList.add("wptb-bg-rail-mark"),e}function p(){var t=(a=e().getBoundingClientRect()).width,n=a.height,a=(o=document.querySelector(".wptb-bg-color-selectors .wptb-bg-column-rail")).getBoundingClientRect().height;o.style.top="-".concat(a,"px"),o.style.width="".concat(t,"px"),function(t){Array.from(t.querySelectorAll(".wptb-bg-rail-mark")).map(function(e){e.remove()});var n=e(),n=Array.from(n.querySelectorAll("tr")).reduce(function(e,t){if(null===e)return t;var n=t.querySelectorAll("td").length;return e.querySelectorAll("td").length<n?t:e},null);Array.from(n.querySelectorAll("td")).map(function(e){return e=e.getBoundingClientRect(),{cellX:e.x,cellWidth:e.width}}).map(function(e,n){var a=d();a.style.width="".concat(e.cellWidth,"px"),a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),w.commit("updateHoveredCellElement",{element:null,index:n})}),t.appendChild(a)})}(o);var r,o=(t=document.querySelector(".wptb-bg-color-selectors .wptb-bg-row-rail")).getBoundingClientRect().width;t.style.left="-".concat(o,"px"),t.style.height="".concat(n,"px"),r=t,Array.from(r.querySelectorAll(".wptb-bg-rail-mark")).map(function(e){e.remove()}),Array.from(e().querySelectorAll("tr")).map(function(e){var t=e.getBoundingClientRect();return{element:e,rowHeight:t.height}}).map(function(e){var t=d();t.style.height="".concat(e.rowHeight,"px"),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),w.commit("updateHoveredRowElement",e.element)}),r.appendChild(t)})}function u(){var e=document.createElement("div");e.classList.add("wptb-bg-color-selectors");var t=document.createElement("div");t.classList.add("wptb-bg-row-rail");var n=document.createElement("div");n.classList.add("wptb-row-selection","wptb-bg-selection-item"),n.title="Select row",WPTB_IconManager.getIcon("arrow-alt-circle-right","wptb-selector-icon-wrapper").then(function(e){n.appendChild(e)});var r=document.createElement("div");r.classList.add("wptb-bg-column-rail");var o=document.createElement("div");o.classList.add("wptb-col-selection","wptb-bg-selection-item"),o.title="Select column",WPTB_IconManager.getIcon("arrow-alt-circle-down","wptb-selector-icon-wrapper").then(function(e){o.appendChild(e)}),o.addEventListener("click",function(e){var t;e.preventDefault(),e.stopPropagation(),null!==(t=w.getters.hoveredCell.index)&&(t=(e=_toArray(c(t)))[0],e=e.slice(1),a(t),e.map(function(e){a(e,!0)}),w.commit("setMenuSelectedTableElement",{type:w.getters.types.selected.column,item:[t].concat(_toConsumableArray(e))}))}),t.appendChild(n),r.appendChild(o),e.appendChild(r),e.appendChild(t),document.querySelector(".wptb-builder-content .wptb-table-setup").appendChild(e)}function m(){l().addEventListener("click",function(e){var t,n;e.preventDefault(),e.stopPropagation(),(n=w.getters.hoveredRow)&&(e=(t=_toArray(Array.from(n.querySelectorAll("td"))))[0],t=t.slice(1),a(e),t.map(function(e){a(e,!0)}),w.commit("setMenuSelectedTableElement",{type:w.getters.types.selected.row,item:n}))}),Array.from(e().querySelectorAll("tr")).map(function(e){e.addEventListener("mouseenter",i)})}function b(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];t()&&(t().dataset.visible=e)}function g(){Array.from(e().querySelectorAll("td")).map(function(e){e.removeEventListener("click",r),e.removeEventListener("mouseenter",s)}),o().classList.remove("wptb-bg-selection-visible"),Array.from(e().querySelectorAll("tr")).map(function(e){e.removeEventListener("mouseenter",i)}),w.commit("updateHoveredRowElement",null),n(),w.dispatch("clearSelection"),w.dispatch("clearHoverStates")}function y(e){e.subscribe(function(e){var t,n,a,r,i=e.type,s=e.payload;switch(i){case"updateHoveredRowElement":s&&(t=s,n=document.querySelector(".wptb-table-setup").getBoundingClientRect().y,a=t.getBoundingClientRect(),r=a.height,t=a.y,(a=l()).classList.add("wptb-bg-selection-visible"),a.style.height="".concat(r,"px"),a.style.top="".concat(t-n,"px"));break;case"updateHoveredCellElement":r=s.index,0<(a=c(r)).length&&(t=o(),n=a.reduce(function(e,t){return e.offsetWidth>t.offsetWidth?t:e},a[0]),r=document.querySelector(".wptb-table-setup").getBoundingClientRect().x,n=(a=n.getBoundingClientRect()).width,a=a.x,t.classList.add("wptb-bg-selection-visible"),t.style.left="".concat(a-r,"px"),t.style.width="".concat(n,"px"))}})}var f=this;this.initialized=!1;var w=null;this.applyOptions=function(){var t,n,a,r,o=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||{row:{headerBg:(n=e()).dataset.wptbHeaderBackgroundColor,evenBg:n.dataset.wptbEvenRowBackgroundColor,oddBg:n.dataset.wptbOddRowBackgroundColor}};n=(t=o.row).headerBg,a=t.evenBg,r=t.oddBg,o=e(),o=(t=_toArray(Array.from(o.querySelectorAll("tr"))))[0],t=t.slice(1),o=o,""===(n=n)||null===n?o.style.removeProperty("background-color"):o.style.backgroundColor=n,t.map(function(e,t){var n=["",null,void 0],o=e.dataset.wptbBgColor,n=!n.includes(o);e.style.backgroundColor=n?o:t%2==0?a:r})},this.init=function(){document.addEventListener("wptbSectionChanged",function(n){var a=n.detail;f.initialized||"background_menu"!==a||(WPTB_ControlsManager.callControlScript("BackgroundMenu","wptb-background-menu"),f.initialized=!0),"background_menu"!==WPTB_Helper.getPreviousSection()&&"background_menu"===a&&(t()||u(),b(!0),WPTB_Store.get("proStatus")&&Array.from(e().querySelectorAll("td")).map(function(e){e.addEventListener("click",r),e.addEventListener("mouseenter",s)}),m(),n=e(),Array.from(n.querySelectorAll(".edit-active")).map(function(e){e.classList.remove("edit-active")}),(n=document.querySelector(".wptb-actions"))&&(n.style.display="none"),p(),w.commit("updateHoveredCellElement",{element:null,index:0}),w.commit("updateHoveredRowElement",e().querySelector("tr"))),"background_menu"===WPTB_Helper.getPreviousSection()&&"background_menu"!==a&&(b(!1),g())}),document.addEventListener("wp-table-builder/table-changed/after",function(){f.applyOptions()})},this.addStore=function(e){w||y(w=e)}};return e.init(),e}),function(){var e=window.location.href;new RegExp("[?&]page=wptb-builder").exec(e)&&document.addEventListener("DOMContentLoaded",function(){var e,t,n=WPTB_Helper.detectMode();n?(e=new XMLHttpRequest,t=ajaxurl+"?action=get_table&id="+n,e.open("GET",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(t){var a,r;4==this.readyState&&200==this.status&&(r=JSON.parse(e.responseText),document.getElementById("wptb-setup-name").value=r[0],r[1]?((a=document.getElementsByClassName("wptb-table-setup")[0]).appendChild(WPTB_Parser(r[1])),document.getElementsByTagName("body")[0],WPTB_Table(),(r=document.querySelector(".wptb-preview-table"))&&(r.className.match(/wptb-element-((.+-)\d+)/i)||r.classList.add("wptb-element-main-table_setting-"+n),r.dataset.wptbTableContainerMaxWidth&&(a.style.maxWidth=r.dataset.wptbTableContainerMaxWidth+"px",r.tdDefaultWidth())),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()):document.getElementsByClassName("wptb-table-generator")[0].style.display="table")},e.send(null)):(new WPTB_TableStateSaveManager).tableStateSet(),document.counter=new ElementCounters,
    document.select=new MultipleSelect,WPTB_Initializer(),settings=WPTB_Settings()})}();var WPTB_Cell=function(e,t){function n(e){r[e].getDOMElement=function(){return r[e]},WPTB_innerElementSet(r[e]);var t=r[e].className.match(/wptb-element-((.+-)\d+)/i);t&&Array.isArray(t)&&function(){var n=t[1].split("-");r[e].kind=n[0],applyGenericItemSettings(r[e],t[1]);var a=r[e].getElementsByClassName("wptb-in-element");if(0<a.length)for(var o=0;o<a.length;o++)!function(e){var t={getDOMElement:function(){return a[e]}};applyGenericItemSettings(t)}(o)}()}var a;t||((t=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px",""!=(a=jQuery("#wptb-table-inner-border-number").val())&&0!=parseInt(a)&&(t.style.border=a+"px solid "+jQuery("#wptb-table-border-color").val()),t.classList.add("wptb-droppable","wptb-cell"),a=(a=WPTB_Helper.newElementProxy("text")).getDOMElement(),t.appendChild(a)),t.draggable=!1,e&&(t.onclick=e),t.ondblclick=function(e){e.stopPropagation();var n=document.querySelector(".wptb-table-setup");!n||n.classList.contains("wptb-preview-table-manage-cells")||"0"===e.target.dataset.yIndex&&"1"===n.dataset.wptbSortableTable||e.target!=e.currentTarget||(WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",e.target),e=(e=WPTB_Helper.newElementProxy("text")).getDOMElement(),t.appendChild(e),WPTB_innerElementSet(e))},WPTB_innerElementSet(t),WPTB_Helper.elementStartScript(t,"table_cell_setting");var r=t.getElementsByClassName("wptb-ph-element");if(0<r.length)for(var o=0;o<r.length;o++)n(o);return this.getDOMElement=function(){return t},this.setCoords=function(e,t){var n=this.getDOMElement();n.dataset.yIndex=e,n.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},t.getCellDimensions=function(){var e=window.getComputedStyle(this,null),t=e.getPropertyValue("padding-left"),n=e.getPropertyValue("padding-right"),a=e.getPropertyValue("border-left-width"),r=e.getPropertyValue("border-right-width"),o=e.getPropertyValue("padding-top"),l=e.getPropertyValue("padding-bottom"),i=e.getPropertyValue("border-top-width"),s=e.getPropertyValue("border-bottom-width"),c=parseInt(this.offsetWidth,10)-parseInt(t,10)-parseInt(n,10),d=parseInt(this.offsetHeight,10)-parseInt(o,10)-parseInt(l,10),p=WPTB_Helper.findAncestor(this,"wptb-preview-table");return p&&("collapse"===p.style.borderCollapse?(c=c-parseInt(a,10)/2-parseInt(r,10)/2,d=d-parseInt(i,10)/2-parseInt(s,10)/2,t=(e=window.getComputedStyle(p,null)).getPropertyValue("border-left-width"),n=e.getPropertyValue("border-right-width"),o=e.getPropertyValue("border-top-width"),l=e.getPropertyValue("border-bottom-width"),(e=this.parentNode)&&"tr"===e.nodeName.toLowerCase()&&(e.firstChild&&e.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(t,10)>parseInt(a,10)&&(c+=-(parseInt(t,10)-parseInt(a,10))/2),e.lastChild&&e.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(n,10)>parseInt(r,10)&&(c+=-(parseInt(n,10)-parseInt(r,10))/2),(e=e.parentNode)&&"body"===e.nodeName.toLowerCase()&&(e.firstChild&&e.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(o,10)>parseInt(i,10)&&(d+=(parseInt(o,10)-parseInt(i,10))/2),e.lastChild&&e.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(l,10)>parseInt(s,10)&&(d+=(parseInt(l,10)-parseInt(s,10))/2)))):"separate"===p.style.borderCollapse&&(c=c-parseInt(a,10)-parseInt(r,10),d=d-parseInt(i,10)-parseInt(s,10))),{width:parseInt(c),height:parseInt(d)}},this},WPTB_CutGlueTable={cutTableHorizontally:function(e,t){if(t&&t.rows[e])for(var n=0;e>n;n++)for(var a=t.rows[n].children,r=0;r<a.length;r++)if(1<a[r].rowSpan&&a[r].rowSpan>e-n){var o=a[r].rowSpan-e+n;a[r].rowSpan=e-n,a[r].dataset.sameCellBeforeDivision||(a[r].dataset.sameCellBeforeDivision="r"+n+"c"+r);var l=void 0,l=t.hasOwnProperty("wptbCell")?(l=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),i=a[r].getAttribute("style");l.setAttribute("style",i),l.colSpan=a[r].colSpan,l.rowSpan=o,l.dataset.sameCellBeforeDivision=a[r].dataset.sameCellBeforeDivision;for(var o=a[r].dataset.xIndex,s=parseInt(o)+parseInt(a[r].colSpan),c=void 0;!c&&s<t.maxCols;)c=t.rows[e].querySelector('[data-x-index="'+s+'"]'),s++;t.rows[e].insertBefore(l,c),WPTB_RecalculateIndexes(t)}},glueTableHorizontally:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),n=0;n<t.length;n++)if(t[n].hasAttribute("data-same-cell-before-division"))for(var a=t[n].dataset.sameCellBeforeDivision,r=e.querySelectorAll('[data-same-cell-before-division="'+a+'"]'),o=0;o<r.length;o++)if(r[o]&&r[o+1]&&r[o].parentNode&&r[o+1].parentNode&&!r[o].parentNode.classList.contains("wptb-row-moving")&&!r[o+1].parentNode.classList.contains("wptb-row-moving")&&r[o+1].dataset.yIndex==parseInt(r[o].dataset.yIndex)+parseInt(r[o].rowSpan)){r[o].rowSpan+=r[o+1].rowSpan;for(var l=_toConsumableArray(r[o+1].children),i=0;i<l.length;i++)r[o].appendChild(l[i]);r[o+1].parentNode.removeChild(r[o+1])}WPTB_RecalculateIndexes(e)}},cutTableVertically:function(e,t){for(var n=0;n<t.rows.length;n++){if(e<t.maxCols&&0!=e&&!t.rows[n].querySelector('[data-x-index="'+e+'"]'))for(var a,r,o,l=t.rows[n].children,i=void 0,s=l.length,c=void 0,d=0;s>d;d++)if(1<l[d].colSpan&&parseInt(l[d].dataset.xIndex)<e&&parseInt(l[d].dataset.xIndex)+parseInt(l[d].colSpan)>e){i=t.hasOwnProperty("wptbCell")?(i=new t.wptbCell(t.mark)).getDOMElement():document.createElement("td"),a=l[d].rowSpan,r=l[d].colSpan,l[d].colSpan=e-l[d].dataset.xIndex,o=r-l[d].colSpan,l[d].dataset.sameCellBeforeDivision||(l[d].dataset.sameCellBeforeDivision="r"+n+"c"+d);var p=l[d].getAttribute("style");i.setAttribute("style",p),p=t.querySelector('[data-x-index="'+e+'"]'),p&&(i.style.width=p.style.width),p=t.querySelector('[data-y-index="'+n+'"]'),p&&(i.style.height=p.style.height),c=l[d+1]||null,t.rows[n].insertBefore(i,c),i.colSpan=o,i.rowSpan=a,i.dataset.sameCellBeforeDivision=l[d].dataset.sameCellBeforeDivision,n+=a-1;break}WPTB_RecalculateIndexes(t)}},glueTableVertically:function(e){if(e){for(var t=_toConsumableArray(e.getElementsByTagName("td")),n=0;n<t.length;n++)if(t[n].hasAttribute("data-same-cell-before-division"))for(var a=t[n].dataset.sameCellBeforeDivision,r=_toConsumableArray(e.querySelectorAll('[data-same-cell-before-division="'+a+'"]')),o=null,l=0;l<r.length;l++)if(r[l]&&r[l+1]&&!r[l].classList.contains("wptb-column-moving")&&!r[l+1].classList.contains("wptb-column-moving")&&r[l+1].dataset.xIndex==parseInt(r[l].dataset.xIndex)+parseInt(r[l].colSpan)){r[o=null==o?l:o].colSpan+=r[l+1].colSpan;for(var i=_toConsumableArray(r[l+1].children),s=0;s<i.length;s++)r[o].appendChild(i[s]);r[l+1].parentNode.removeChild(r[l+1])}WPTB_RecalculateIndexes(e)}}},WPTB_DropHandle=function(e,t){function n(e){return"".concat(e,"px")}var a,r,o,l,i,s,c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("td_relative"===WPTB_Helper.getDragRelativeType()){var d=document.querySelector(".wptb-cell-related-drop-handle");if(c&&d)return void(d.style.display="none");null===d&&((u=document.createRange()).setStart(document.body,0),m=u.createContextualFragment('<div class="wptb-cell-related-drop-handle">Add to cell</div>').children[0],document.body.appendChild(m),d=m.children[0]);var p=WPTB_Helper.getParentOfType("td",e).getBoundingClientRect(),c=p.top,u=p.left,m=p.width,p=p.height;return d?(d.style.display="flex",d.style.top=n(c),d.style.width=n(m),d.style.height=n(p),void(d.style.left=n(u))):void 0}if(0==document.getElementsByClassName("wptb-drop-handle").length?((a=document.createElement("div")).classList.add("wptb-drop-handle"),(r=document.createElement("div")).classList.add("wptb-drop-border-marker"),o=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o.classList.add("wptb-drop-border-marker-top"),l.classList.add("wptb-drop-border-marker-right"),i.classList.add("wptb-drop-border-marker-bottom"),s.classList.add("wptb-drop-border-marker-left"),r.appendChild(o),r.appendChild(l),r.appendChild(i),r.appendChild(s),0<(v=document.getElementsByTagName("body")).length&&(v[0].appendChild(a),v[0].appendChild(r)),a.ondragenter=function(){return t.target.classList.contains("wptb-empty")?(t.preventDefault(),!1):void 0},a.ondragover=function(e){e.preventDefault()},a.ondragleave=function(){},a.ondrop=function(t){var n;t.preventDefault(),t.dataTransfer.getData("wptbElement")?n=(n=WPTB_Helper.newElementProxy(t.dataTransfer.getData("wptbElement"))).getDOMElement():((n=document.getElementsByClassName(t.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),n.classList.remove("wptb-moving-into-same-elem"),n.wptbMovingMode=1),"Drop Here"==a.dataset.text?"td"==(e=a.getDOMParentElement()).nodeName.toLowerCase()&&((o=a.getDOMParentElement()).appendChild(n),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n)):(o=(t=a.getDOMParentElement()).parentNode,"Above Element"==a.dataset.text?(o.insertBefore(n,t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n)):"Below Element"==a.dataset.text&&(t=t.nextSibling,o.insertBefore(n,t),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n)));var o=o.parentNode;!WPTB_Helper.rowIsTop(o)||(o=WPTB_Helper.findAncestor(o,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(o),a.style.display="none",r.style.display="none",WPTB_innerElementSet(n),n.classList.contains("wptb-image-container")&&1!=n.wptbMovingMode||((new WPTB_TableStateSaveManager).tableStateSet(),n.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){a.style.display="none",r.style.display="none"}):(a=document.getElementsByClassName("wptb-drop-handle")[0],r=document.getElementsByClassName("wptb-drop-border-marker")[0]),!(e&&"td"==e.nodeName.toLowerCase()&&0!=e.getElementsByClassName("wptb-ph-element").length||e&&"td"==e.nodeName.toLowerCase()&&e.classList.contains("wptb-empty"))){if("td"==e.localName?S=e.parentNode:"div"==e.localName&&e.classList.contains("wptb-ph-element")&&(S=e.parentNode.parentNode),WPTB_Helper.rowIsTop(S)&&WPTB_Helper.findAncestor(S,"wptb-preview-table").classList.contains("wptb-table-preview-head")){for(var b=t.dataTransfer.types,g=!1,y=0;y<b.length;y++){var f=b[y].match(/wptbelindic-([a-z]+)/i);if(f&&"text"!=f[1]){g=!0;break}}if(g)return}a.style.width=e.offsetWidth+"px";var w,h,u=e.offsetHeight,v=e.getBoundingClientRect(),S=parseFloat(v.left);a.style.left=S+"px",-1!=t.dataTransfer.types.indexOf("wptb-moving-mode")&&(w=document.getElementsByClassName("wptb-moving-mode")[0],e==w?(a.classList.add("wptb-moving-into-same-elem"),r.classList.add("wptb-moving-into-same-elem")):(a.classList.remove("wptb-moving-into-same-elem"),r.classList.remove("wptb-moving-into-same-elem"))),a.getDOMParentElement=function(){return e},a.style.display="block",r.style.display="block","td"!=e.nodeName.toLowerCase()?(w=null==t.offsetY?t.layerY:t.offsetY,h=parseFloat(v.top)-parseFloat(11),a.dataset.text="Above Element",w>u/2&&(h=parseFloat(v.top)+u-1,a.dataset.text="Below Element")):(a.dataset.text="Drop Here",h=parseFloat(v.top)+u/2-5),a.style.top=h+"px",r.style.top=v.top+"px",r.style.left=v.left+"px",(o=r.querySelector(".wptb-drop-border-marker-top")).style.width=parseFloat(e.offsetWidth)-parseFloat(1)+"px",(l=r.querySelector(".wptb-drop-border-marker-right")).style.height=parseFloat(v.bottom)-parseFloat(v.top)-1+"px",l.style.left=o.style.width,(i=r.querySelector(".wptb-drop-border-marker-bottom")).style.width=o.style.width,i.style.top=l.style.height,(s=r.querySelector(".wptb-drop-border-marker-left")).style.height=l.style.height}},ElementCounters=function(){var e=[];return e.text=0,e.image=0,e.list=0,e.button=0,this.increment=function(t){t in e&&e[t]++},this.nextIndex=function(t){return t in e?e[t]+1:void 0},this};!function(e){(self||global).WPTB_ElementIdProvider=e()}(function(){return new function(){var e={};this.getNewId=function(t){var n,a,r;return void 0===e[t]&&(e[t]=(n=t,a=Array.from(document.querySelectorAll(".wptb-ph-element")),r=new RegExp("wptb-element-".concat(n,"-(\\d+)"),"i"),a.reduce(function(e,t){return t=r.exec(t.className),null!==t&&void 0!==t[1]?Math.max(e,Number.parseInt(t[1],10)):e},0))),++e[t]}}});var WPTB_ElementObject=function(e){var t,n,a,r;e.elemProt?((t=e.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered"),(r=e.elemProt.className.match(/wptb-element-((.+-)\d+)/i))&&Array.isArray(r)&&(n=r[1]),a=!0,e.tinyMceClear&&(t=WPTB_Helper.elementClearFromTinyMce(t))):(n=void 0,a=!1,(t=document.createElement("div")).classList.add("wptb-"+e.kind+"-container","wptb-ph-element"),r="wptb-"+e.kind+"-content",r=wp.template(r),e.node=t,r=(r=r(e)).replace(/\r|\n|\t/g,"").trim(),t.innerHTML=r);var o=t.querySelectorAll(".wptb-in-element");if(0<o.length)for(var l=0;l<o.length;l++)!function(e){var t={getDOMElement:function(){return o[e]}};applyGenericItemSettings(t)}(l);return window.addEventListener("item:onmouseenter",function(e){},!1),this.kind=e.kind,this.getDOMElement=function(){return t},applyGenericItemSettings(this,n,a),this},WPTB_ElementOptions=function(e,t,n){e.getDOMElement().addEventListener("click",function(){WPTB_Helper.elementOptionsSet(e.kind,this)},{capture:!0})};!function(e,t,n){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t[e]=n()}("WPTB_ExtraStyles",self||global,function(){return new function(){function e(e,t){var t=t.replaceAll(/(\r?\n)|(\/\*.+?\*\/)|(\s*!important)/g,"").replaceAll(";"," !important;").split("}"),n=[];return t.map(function(t){var a=new RegExp(/(.+?)\{/g).exec(t);a&&n.push(t.replace(a[1],"".concat(e," ").concat(a[1])))}),"".concat(n.join("}"),"}")}function t(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=document.createElement("style");a.type="text/css",a.id="wptb-general-styles",n?n.insertAdjacentElement("beforebegin",a):(r.currentMode===r.modes.block?r.baseDocument:r.baseDocument.querySelector("head")).appendChild(a),n=e(t.parentPrefix,t.styles),a.appendChild(document.createTextNode(n))}function n(n){var a,o,l,i,s=n.dataset.wptbExtraStyles;s&&(i=atob(s),o=n.getAttribute("class").match(/wptb-element-main-table_setting-(?:startedid-)?(\d+)/),a="wptb-extra-styles-"+(l=_slicedToArray(o,2)[1]),(o=null==(s=r.baseDocument.querySelector("head"))?void 0:s.querySelector("#".concat(a)))||((o=document.createElement("style")).type="text/css",o.id=a,n.dataset.disableThemeStyles&&r.currentMode===r.modes.frontEnd||r.currentMode===r.modes.block?(n.insertAdjacentElement("beforebegin",o),r.currentMode===r.modes.frontEnd&&r.generalStyles&&t(r.generalStyles,n)):s.appendChild(o)),l=".wptb-element-main-table_setting-".concat(l),i=e(l,i),o.innerHTML="",o.appendChild(document.createTextNode(i)))}var a,r=this;this.modes={builder:"builder",frontEnd:"frontEnd",block:"block"},this.baseDocument=document,this.currentMode=this.modes.builder,this.generalStyles="";var o=(_defineProperty(a={},this.modes.builder,".wptb-table-setup .wptb-preview-table"),_defineProperty(a,this.modes.block,".wptb-block-table-setup .wptb-preview-table"),_defineProperty(a,this.modes.frontEnd,".wptb-table-container .wptb-preview-table"),a);this.applyStyles=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.modes.frontEnd,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;r.baseDocument=l,r.currentMode=e,r.generalStyles=a,l=Array.from(r.baseDocument.querySelectorAll(o[e])),l&&l.map(n),e!==r.modes.frontEnd&&e!==r.modes.block||!a||t(a)}}});var WPTB_GetDirectionAfterReconstruction=function(e,t,n,a,r){var o=0,l=e.maxCols,i={},s=[];return r&&r.getDirective(e)?i["switch"]=function(a){var i=r.getDirective(e),c="desktop";return a&&a.detail&&(c=a.detail.sizeRangeId),s=[t,1],"desktop"!==c?i.hasOwnProperty("modeOptions")&&(a=i.responsiveMode,(a=i.modeOptions[a]).hasOwnProperty("topRowAsHeader")&&a.topRowAsHeader.hasOwnProperty(c)&&a.topRowAsHeader[c]?a.hasOwnProperty("cellStackDirection")&&a.cellStackDirection.hasOwnProperty(c)&&("row"===a.cellStackDirection[c]?(s=[n,2],o=l-1):"column"===a.cellStackDirection[c]&&a.hasOwnProperty("cellsPerRow")&&(o=a.cellsPerRow[c])):o=0):o=0,{type:s,itemsPerHeader:o}}:i["switch"]=function(r){if(s=[t,1],e.classList.contains("wptb-mobile-view-active")){e.classList.contains("wptb-table-preview-head")&&(s=[n,2])===a&&(o=l-1);var i=e.parentNode.parentNode.querySelector(".wptb-preview-table-mobile");return{type:s,itemsPerHeader:o,newTable:i}}return{type:s,itemsPerHeader:o}},i},WPTB_HeaderToolbox=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=n.element.getBoundingClientRect().height;e&&(t=0),n.element.style.top="calc( 100% - ".concat(t+n.topMargin,"px)")}var n=this;return this.wrapperQuery=e,this.element=document.querySelector(e),this.topMargin=2,{init:function(){Array.from(n.element.querySelectorAll("[data-button-type]")).map(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),WPTB_Helper.activateSection(e.target.dataset.buttonType)})}),document.addEventListener("wptb:table:generated",function(){n.element.style.display="flex";var e=n.element.getBoundingClientRect().width;n.element.style.left="calc( 50% - ".concat(e/2,"px)");var a=["table_responsive_menu","manage_cells","cell_settings"];document.addEventListener("wptbSectionChanged",function(e){e=e.detail,t(!a.includes(e))}),e=WPTB_Helper.currentSection,t(!a.includes(e))})}}},WPTB_Helper={hexToRgb:function(e){return e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),e?"rgb(".concat(parseInt(e[1],16),",").concat(parseInt(e[2],16),",").concat(parseInt(e[3],16),")"):null},rgbToHex:function(e){if(e){if(WPTB_Helper.isHex(e))return e;var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?((?:[0-9]*[.])?[0-9]+)[\s+]?\)/i);return t&&5===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(Math.round(255*parseFloat(t[4],10)).toString(16).toUpperCase()).slice(-2)):(t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#".concat("0".concat(parseInt(t[1],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[2],10).toString(16).toUpperCase()).slice(-2)).concat("0".concat(parseInt(t[3],10).toString(16).toUpperCase()).slice(-2)):""}return""},isHex:function(e){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}(?:[0-9]?){1,2}$").test(e)},getElementIcon:function(e){"".concat(location.protocol,"//").concat(location.hostname);var t=document.createElement("img");return t.src=e,t},elementDragEndClear:function(){var e=document.getElementsByClassName("wptb-moving-mode");if(0<e.length)for(var t=0;t<e.length;t++)e[t].classList.remove("wptb-moving-mode");var n=document.getElementsByClassName("wptb-drop-handle");if(0<n.length)for(var a=0;a<n.length;a++)n[a].style.display="none";var r=document.getElementsByClassName("wptb-drop-border-marker");if(0<r.length)for(var o=0;o<r.length;o++)r[o].style.display="none"},linkHttpCheckChange:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){if(e.match(/^(javascript:)(.+)$/))return e;if(e.match(/^\/([\S]+)$/)){if(t){var n=document.location.origin;return n.match(/^(.+)\/$/)&&(n=n.slice(-1)),"".concat(n).concat(e)}return e}if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))return e;var a,n=e.split("/");return Array.isArray(n)&&0<n.length&&(a=n[n.length-1]),"".concat(document.location.protocol,"//").concat(a)}return""},dataTitleColumnSet:function(e){},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},rowIsTop:function(e){return e.parentNode.children[0]==e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){"external"==e.originalEvent.type?(new WPTB_TableStateSaveManager).tableStateSet():WPTB_Helper.findAncestor(e.target,"wp-picker-container")&&("square"!=e.originalEvent.type&&"strip"!=e.originalEvent.type||((e=document.getElementsByTagName("body")[0]).removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),e.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)))},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(e,t){var n;t?(n=[document.getElementById(e)]).length=1:n=document.getElementsByClassName(e);for(var a=0;a<n.length;a++){var r,o=WPTB_Helper.findAncestor(n[a],"wp-picker-container");o&&((r=o.parentNode).removeChild(o),o=document.createElement("input"),t?o.setAttribute("id",e):o.classList.add("wptb-element-property",e),o.value="",r.appendChild(o))}},detectMode:function(){var e=window.location.href,e=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!e&&(e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"")},getTableId:function(){return WPTB_Helper.detectMode()||"startedid-0"},getColumnWidth:function(e,t){for(var n=t.dataset.xIndex,a=e.querySelectorAll('[data-x-index="'.concat(n,'"]')),r=t.getCellDimensions().width,o=0;o<a.length;o++)r>a[o].getCellDimensions().width&&(r=a[o].getCellDimensions().width);return r},getRowHeight:function(e,t){for(var n=t.dataset.yIndex,a=e.querySelectorAll('[data-y-index="'.concat(n,'"]')),r=t.getCellDimensions().height,o=0;o<a.length;o++)r>a[o].getCellDimensions().height&&(r=a[o].getCellDimensions().height);return r},newElementProxy:function(e){return e?new WPTB_ElementObject({kind:e}):void 0},wpColorPickerChange:function(e,t){var n=t?t.color.toString():"",a=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0],t=a.dataset.element.match(/wptb-options-(.+)-(\d+)/i),e=t[1],t=t[2],t=document.getElementsByClassName("wptb-element-".concat(e,"-").concat(t))[0];if("button"==e)"button-text-color"==a.dataset.type?t.getElementsByClassName("wptb-button")[0].style.color=n:t.getElementsByClassName("wptb-button")[0].style.backgroundColor=n;else if("list"==e){var r=t.querySelectorAll("p");if(0<r.length)for(var o=0;o<r.length;o++)r[o].style.color=n}else if("star_rating"==e)if("star-color"==a.dataset.type)for(var l=t.querySelectorAll("li"),i=0;i<l.length;i++)for(var s=l[i].getElementsByTagName("span"),c=0;c<s.length;c++)s[c].style.fill=n;else"numeral-rating-color"==a.dataset.type&&(t.querySelector(".wptb-number-rating").style.color=n);else t.style.color=n},numberImputSize:function(e,t,n){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;parseInt(e,10)>parseInt(n,10)&&(this.value=n),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wptbDocumentEventGenerate:function(e,t,n){e&&t&&(n=n||!0,n=new CustomEvent(e,{detail:n,bubbles:!0}),t.dispatchEvent(n))},elementStartScript:function(e,t){var n;t||(n=e.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(n)&&(t=n[1]),t&&t in WPTB_ElementsScriptsLauncher&&(n=(n=e.getAttribute("class").match(/(wptb-element-\D+-\d+\b)/))?n[0]:null,WPTB_ElementsScriptsLauncher[t](e,n))},deleteEventHandlers:function(e){if(e){jQuery(e).off();var t=e.children;if(t)for(var n=0;n<t.length;n++)WPTB_Helper.deleteEventHandlers(t[n])}},replaceAll:function(e,t,n){return e.split(t).join(n)},elementClearFromTinyMce:function(e){var t=e.querySelectorAll(".mce-content-body");if(0<t.length)for(var n=0;n<t.length;n++)t[n].classList.remove("mce-content-body");var a=e.querySelectorAll("[data-mce-style]");if(0<a.length)for(var r=0;r<a.length;r++)a[r].removeAttribute("data-mce-style");var o=e.querySelectorAll(".mce-edit-focus");if(0<o.length)for(var l=0;l<o.length;l++)o[l].classList.remove("mce-edit-focus");var i=e.querySelectorAll("[contenteditable]");if(0<i.length)for(var s=0;s<i.length;s++)i[s].removeAttribute("contenteditable");var c=e.querySelectorAll("[spellcheck]");if(0<c.length)for(var d=0;d<c.length;d++)c[d].removeAttribute("spellcheck");var p=e.querySelectorAll("[id^=mce_]");if(0<p.length)for(var u=0;u<p.length;u++)p[u].removeAttribute("id");return e},elementOptionContainerCustomClassSet:function(e,t){e&&t&&(e=WPTB_Helper.findAncestor(e,"wptb-element-option"))&&e.classList.add(t)},elementOptionContainerAdditionalStyles:function(e,t){function n(e,t){e&&(containerStyleStrArr=e.split(":"),containerStyleStrArr&&Array.isArray(containerStyleStrArr)&&(t.style[containerStyleStrArr[0]]=containerStyleStrArr[1]))}if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option"),r=t.split(";");if(a&&r)if(r&&Array.isArray(r))for(var o=0;o<r.length;o++)r[o]&&n(r[o],a);else n(r,a)}},controlsInclude:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e&&"object"===_typeof(e)&&"function"==typeof t&&e.addEventListener("element:controls:active",function(){e.hasOwnProperty("controlConnectFunctionsName")&&Array.isArray(e.controlConnectFunctionsName)&&-1!=e.controlConnectFunctionsName.indexOf(t.name)||function(){var a,r=e.className.match(/wptb-element-(.+)-(\d+)/i);if(a=r&&Array.isArray(r)?r[1]:a){var o=e.optionsGroupIds;if(o&&Array.isArray(o))for(var l=0;l<o.length;l++){var i=o[l],i=document.getElementById(i).querySelectorAll(".wptb-element-property");(i=_toConsumableArray(i)).map(function(r){var o,l=new RegExp("wptb-el-".concat(a,"-(\\d+)-([a-zA-Z0-9_-]+)"),"i"),i=r.className.match(l);i&&Array.isArray(i)&&(o=i[0],e.addEventListener("wptb-control:".concat(o),function(a){var r={},l=i[2],s=document.getElementsByClassName(o);0<s.length&&l&&(s=WPTB_Helper.targetControlValueGet(s),r[l]=n?{targetValue:s,eventValue:a.detail.value}:s),t(r,e)},!1))})}e.controlConnectFunctionsName||Array.isArray(e.controlConnectFunctionsName)||(e.controlConnectFunctionsName=[]),e.controlConnectFunctionsName.push(t.name)}}()},!1)},oneControlInclude:function(e,t,n){if(!e||"object"!==_typeof(e)||"function"!=typeof t||"string"!=typeof n)return!1;var a,r,o=e.className.match(/wptb-element-((.+-)\d+)/i);o&&Array.isArray(o)&&(a=o[1].split("-")[0],a="wptb-".concat(a,"-control-stack"),a=wp.template(a)({container:".".concat(o[0])}),(a=JSON.parse(a))&&"object"===_typeof(a)&&a.hasOwnProperty(n)&&(r="wptb-el-".concat(o[1],"-").concat(n),e.addEventListener("wptb-control:".concat(r),function(n){var a=document.getElementsByClassName(r);0<a.length&&(a=WPTB_Helper.targetControlValueGet(a),t(a,e))},!1)))},innerElementCopyIncludeHandler:function(e,t){e&&"object"===_typeof(e)&&"function"==typeof t&&e.addEventListener("wptb-inner-element:copy",function(n){n=n.detail,n&&(WPTB_Helper.elementClearFromTinyMce(n),t(n,e))},!1)},valueDependOnControl:function(e,t,n,a,r){function o(e,t,n){"string"==typeof e&&(e=[e]);var a,r,o,l=t.match(/wptb-el-((.+-)\d+)-(.+)/i),i={},s=[];return l&&Array.isArray(l)&&(a=l[3],o={},Array.isArray(n)&&(Array.isArray(n[0])?n.map(function(e){o[e[0]]=[e[1],e[2]]}):o[n[0]]=[n[1],n[2]]),e.map(function(e){var n=t.replace(a,e);n&&0<(r=document.getElementsByClassName(n)).length&&r[0].type&&(i[e]=r[0].value,e in o&&("integer"===o[e][1]?i[e]=parseInt(i[e])+parseInt(o[e][0]):"string"===o[e][1]&&(i[e]=i[e]+o[e][0])),s.push(r[0]))})),[i,s]}var l=o(e,t,n);WPTB_Helper.elementOptionsSet(a,r,l[0],t),Object.keys(l[0]).forEach(function(l){var i=r.className.match(/wptb-element-((.+-)\d+)/i),l="wptb-el-".concat(i[1],"-").concat([l]);r.addEventListener("wptb-control:".concat(l),function(l){var i=o(e,t,n);WPTB_Helper.elementOptionsSet(a,r,i[0],t)},!1)})},appearDependOnControl:function(e,t){function n(e,t){var n,a="block";Object.keys(t).map(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!1===t[e][0]&&(a="none",t[e][2][3]&&(n=t[e][2][3]))}),e.style.display!==a&&("none"===(e.style.display=a)&&n?(p[0].dataset.controlActiveVal=WPTB_Helper.targetControlValueGet(p),WPTB_Helper.targetControlValueGet(p,n)):"block"===a&&p[0].dataset.controlActiveVal&&WPTB_Helper.targetControlValueGet(p,p[0].dataset.controlActiveVal))}function a(e,t){for(var n=WPTB_Helper.targetControlValueGet(e),a=!1,r=1;2>=r;r++)if(t[r]&&Array.isArray(t[r])){for(var o=void 0,l=!1,i=0;i<t[r].length;i++)if("string"==typeof t[r][i]&&-1!==t[r][i].indexOf("numberAny >")){if(l=!0,!(parseInt(t[r][i].match(/\d+/))<n)){o=!1;break}o=!0}else if("string"==typeof t[r][i]&&-1!==t[r][i].indexOf("numberAny <")){if(l=!0,!(n<parseInt(t[r][i].match(/\d+/)))){o=!1;break}o=!0}else if(t[r][i]===n&&(o=!0,!l))break;if(o&&1===r){a=!0;break}if(o&&2===r){a=!1;break}}return a}if(Array.isArray(e)){if("string"==typeof e[0])e=[e];else if(!Array.isArray(e[0]))return;for(var r={},o=0;o<e.length;o++){var l=e[o],i=l[0],s=t.match(/wptb-el-((.+-)\d+)-(.+)/i);s&&Array.isArray(s)&&(s=s[3],!(i=t.replace(s,i))||0<(i=document.getElementsByClassName(i)).length&&(r[l[0]]=[a(i,l),i,l]))}var c,d,p=document.getElementsByClassName(t);0<p.length&&(c=p[0],(d=WPTB_Helper.findAncestor(c,"wptb-element-option"))&&(n(d,r),Object.keys(r).map(function(e){Object.prototype.hasOwnProperty.call(r,e)&&r[e][1][0].addEventListener("change",function(t){var o=r[e][2],l=r[e][1];r[o[0]]=[a(l,o),l,o],n(d,r)},!1)})))}},toggleSwitch:function(e,t){var n,a;Array.isArray(e)&&e[1]&&"object"===_typeof(e[1])&&(n=function(){var n=document.getElementsByClassName(t);n.length&&WPTB_Helper.targetControlValueGet(n)!==e[0]&&("unchecked"===e[0]?n[0].checked=!1:"checked"===e[0]&&(n[0].checked=!0),void 0!==e[2]&&!0!==e[2]||WPTB_Helper.wptbDocumentEventGenerate("change",n[0],{eventType:"toggleSwitch"}))},a=e[1],Object.keys(a).map(function(e){var r=a[e],o=t.match(/wptb-el-((.+-)\d+)-(.+)/i);o&&Array.isArray(o)&&(o=o[3],!(o=t.replace(o,e))||0<(e=document.getElementsByClassName(o)).length&&e[0].addEventListener("change",function(e,t){!e||0<(e=document.getElementsByClassName(e)).length&&WPTB_Helper.targetControlValueGet(e)===t&&n()}.bind(null,o,r),!1))}))},controlsStateManager:function(e,t){var n=document.getElementsByClassName(e);if(0<n.length){var a=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(a&&Array.isArray(a)&&document.querySelector(".wptb-element-".concat(a[1]))){var r,o={},l=document.getElementsByClassName("wptb-element-datas");if(0==l.length||""==l[0].innerHTML){var i=WPTB_Helper.targetControlValueGet(n);o["data-".concat(e)]=i,(r={})["tmpl-wptb-el-datas-".concat(a[1])]=o,r=JSON.stringify(r),0==l.length?((l=document.createElement("script")).setAttribute("type","text/html"),l.setAttribute("class","wptb-element-datas")):l=l[0],l.innerHTML=r,document.getElementsByTagName("body")[0].appendChild(l)}else if(l=l[0],r=l.innerHTML,r&&(r=r.trim(),(r=JSON.parse(r))&&"object"===_typeof(r)))if(t){var s=WPTB_Helper.targetControlValueGet(n);"tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])||(r["tmpl-wptb-el-datas-".concat(a[1])]={}),r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)]=s,l.innerHTML=JSON.stringify(r)}else if("tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])&&"data-".concat(e)in r["tmpl-wptb-el-datas-".concat(a[1])]){if("tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])&&"data-".concat(e)in r["tmpl-wptb-el-datas-".concat(a[1])])for(var c,d=0;d<n.length;d++)"checkbox"==n[d].type?(c=void 0,"checked"==(c=n[d].name?r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)][n[d].name]:r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)])?n[d].checked=!0:"unchecked"==c&&(n[d].checked=!1)):n[d].value=r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)];
    }else s=WPTB_Helper.targetControlValueGet(n),"tmpl-wptb-el-datas-".concat(a[1])in r&&"object"===_typeof(r["tmpl-wptb-el-datas-".concat(a[1])])||(r["tmpl-wptb-el-datas-".concat(a[1])]={}),r["tmpl-wptb-el-datas-".concat(a[1])]["data-".concat(e)]=s,l.innerHTML=JSON.stringify(r)}}},targetControlValueGet:function(e,t){for(var n,a=0;a<e.length;a++)"checkbox"==e[a].type&&e[a].name?t?"checked"===t?e[a].checked=!0:"unchecked"===t&&(e[a].checked=!1):(n=n||{},1==e[a].checked?n[e[a].name]="checked":n[e[a].name]="unchecked"):"checkbox"==e[a].type?t?"checked"===t?e[a].checked=!0:"unchecked"===t&&(e[a].checked=!1):n=1==e[a].checked?"checked":"unchecked":e[a].type?t?e[a].value=t:n=e[a].value:e[a].dataset.alignmentValue&&e[a].classList.contains("selected")&&(t?e[a].dataset.alignmentValue=t:n=e[a].dataset.alignmentValue);return n},elementControlsStateCopy:function(e,t){var n,a,r,o;e&&t&&(e=e.className.match(/wptb-element-((.+-)\d+)/i),t=t.className.match(/wptb-element-((.+-)\d+)/i),e&&Array.isArray(e)&&t&&Array.isArray(t)&&(n=e[1],a=t[1],0<(e=document.getElementsByClassName("wptb-element-datas")).length&&(t=(e=e[0]).innerHTML)&&(t=t.trim(),!(t=JSON.parse(t))||"object"!==_typeof(t)||(r=t["tmpl-wptb-el-datas-".concat(n)])&&"object"===_typeof(r)&&(o={},Object.keys(r).forEach(function(e){var t=r[e],e=e.replace(n,a);o[e]=t}),0<Object.keys(o).length&&(t["tmpl-wptb-el-datas-".concat(a)]=o,t=JSON.stringify(t),e.innerHTML=t)))))},elementControlsStateDelete:function(e,t){var n=e.className.match(/wptb-element-(.+)-(\d+)/i),a=document.getElementsByTagName("body")[0],r=a.getElementsByClassName("wptb-element-datas");n&&Array.isArray(n)&&0<r.length&&(e=(r=r[0]).innerHTML)&&(e=e.trim(),(e=JSON.parse(e))&&"object"===_typeof(e)&&"tmpl-wptb-el-datas-".concat(n[1],"-").concat(n[2])in e&&(t?e["tmpl-wptb-el-datas-".concat(n[1],"-").concat(n[2])]&&"object"===_typeof(e["tmpl-wptb-el-datas-".concat(n[1],"-").concat(n[2])])&&"data-wptb-el-".concat(n[1],"-").concat(n[2],"-").concat(t)in e["tmpl-wptb-el-datas-".concat(n[1],"-").concat(n[2])]&&delete e["tmpl-wptb-el-datas-".concat(n[1],"-").concat(n[2])]["data-wptb-el-".concat(n[1],"-").concat(n[2],"-").concat(t)]:delete e["tmpl-wptb-el-datas-".concat(n[1],"-").concat(n[2])],0==Object.keys(e).length?a.removeChild(r):(e=JSON.stringify(e),r.innerHTML=e)))},activeElement:null,elementOptionsSet:function(e,t,n,a){var r,o,l=t.getAttribute("class").match(_wrapRegExp(/(wptb\x2Delement\x2D.+\x2D[0-9]+)/,{elementId:1})),i=t.getAttribute("id"),s=null;if(t.getAttribute("class").includes("wptb-cell")&&(r=(o=t.dataset).xIndex,o=o.yIndex,s="cell_".concat(r,"-").concat(o)),s=(l?l.groups.elementId:null)||i||s||null,s&&this.activeElement!==s){this.activeElement=s,WPTB_Helper.wptbDocumentEventGenerate("element:controls:prepare",t);var c,d,p,u,m,b,g,y,s="wptb-".concat(e,"-control-stack"),s=wp.template(s),f=t.className.match(/wptb-element-((.+-)\d+)/i);if(f?(WPTB_Helper.editActionClassRemove(),t.classList.add("edit-active")):(y=(y=WPTB_Helper.detectMode())||"startedid-0",t.classList.contains("wptb-preview-table")?t.classList.add("wptb-element-main-table_setting-".concat(y)):t.classList.contains("wptb-cell")?document.querySelector(".wptb-element-table_cell_setting-".concat(t.dataset.xIndex,"-").concat(t.dataset.yIndex))||t.classList.add("wptb-element-table_cell_setting-".concat(t.dataset.xIndex,"-").concat(t.dataset.yIndex)):t.classList.contains("wptb-responsive")&&(y.startsWith("wptb_team")&&(y="startedid-0"),t.classList.add("wptb-element-table_responsive_setting-".concat(y))),f=t.className.match(/wptb-element-((.+-)\d+)/i)),c={container:".".concat(f[0]),valueDependOnControl:{}},n&&Object.keys(n).forEach(function(e){c.valueDependOnControl[e]=n[e]}),!a||(y=a.match(/wptb-el-((.+-)\d+)-(.+)/i))&&Array.isArray(y)&&(g=y[3]),d=f[0],p=f[1],!t.classList.contains("wptb-preview-table"))if(t.classList.contains("wptb-cell"))this.activateSection("cell_settings");else if(t.classList.contains("wptb-responsive"))elementOptionsGroupId="table-responsive-group",wptbelementOptionClass="wptb-element-option";else{for(var w=document.getElementById("element-options-group").childNodes,h=0;h<w.length;h++)w[h].style&&(w[h].style.display="none");this.activateSection("options_group")}var s=s(c),v=JSON.parse(s),S=[],T={},_={},C={},A=[],B=[],E=[];g&&((s={})[g]=v[g],v=s),Object.keys(v).forEach(function(t){var r=v[t];r.controlKey=t;var o=wp.template("wptb-".concat(r.type,"-control"));r.elemContainer=d,r.elementControlTargetUnicClass="wptb-el-".concat(p,"-").concat(r.controlKey),Object.keys(r).map(function(e){Object.prototype.hasOwnProperty.call(r,e)&&"control_param_calculate_value"===r[e]&&(r[e]=WPTB_Helper.controlParamCalculateValue(r.elementControlTargetUnicClass,e))});var l,i,s,c,t=o(r);if("appearDependOnControl"in r&&Array.isArray(r.appearDependOnControl)&&A.push([r.appearDependOnControl,r.elementControlTargetUnicClass]),"toggleSwitch"in r&&Array.isArray(r.toggleSwitch)&&B.push([r.toggleSwitch,r.elementControlTargetUnicClass]),"valueDependOnControl"in r&&!n&&!a&&(c="",r.valueDependOnControlCorrect&&(c=r.valueDependOnControlCorrect),E.push([r.valueDependOnControl,r.elementControlTargetUnicClass,c])),-1==S.indexOf(r.elementOptionsGroupId)&&!g){S.push(r.elementOptionsGroupId),u=document.getElementById(r.elementOptionsGroupId);for(var b=_toConsumableArray(u.children),y=0;y<b.length;y++)u.removeChild(b[y]);T[r.elementOptionsGroupId]=u}m=T[r.elementOptionsGroupId],"true"!==r.elementOptionsContainerOn||g||(l=r.elementOptionsGroupId,(i=_)[l]||((s=document.createElement("div")).classList.add("wptb-element-options","wptb-options-".concat(f[1])),document.getElementById(l).appendChild(s),i[l]=s),m=i[l]),"true"===r.elementOptionContainerOn&&((w=document.createElement("div")).classList.add(r.elementOptionClass,"wptb-settings-items"),r.customClassForContainer&&w.classList.add(r.customClassForContainer),r.containerAdditionalStyles&&w.setAttribute("style",r.containerAdditionalStyles),a?0<(o=document.getElementsByClassName(a)).length&&(o=o[0],(c=WPTB_Helper.findAncestor(o,"wptb-element-option"))&&((o=c.parentNode).insertBefore(w,c),o.removeChild(c))):m.appendChild(w),m=w),m.innerHTML+=t;var w=m.getElementsByTagName("wptb-template-script");0<w.length&&(t=(w=w[0]).innerText,m.removeChild(w),(w=document.createElement("script")).setAttribute("type","text/javascript"),w.setAttribute("id","".concat(e,"-").concat(r.controlKey)),w.innerHTML=t.replace(/\r|\n|\t/g,"").trim(),C[r.elementOptionsGroupId]&&Array.isArray(C[r.elementOptionsGroupId])||(C[r.elementOptionsGroupId]=[]),C[r.elementOptionsGroupId].push(w)),0}),t.optionsGroupIds=S,Object.keys(C).forEach(function(t){a||((b=document.createElement("div")).classList.add("wptb-element-options-scripts","wptb-options-".concat(f[1])),T[t].appendChild(b));var n=C[t];if(0<n.length)for(var r,o=0;o<n.length;o++)a?(r="".concat(e,"-").concat(g),r=document.getElementById(r),(b=r.parentNode).insertBefore(n[o],r),b.removeChild(r)):b.appendChild(n[o])});for(var P=0;P<B.length;P++)WPTB_Helper.toggleSwitch(B[P][0],B[P][1]);for(var x=0;x<A.length;x++)WPTB_Helper.appearDependOnControl(A[x][0],A[x][1]);WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",t);for(var W=0;W<E.length;W++)WPTB_Helper.valueDependOnControl(E[W][0],E[W][1],E[W][2],e,t)}},editActionClassRemove:function(){for(var e=document.querySelectorAll(".edit-active"),t=0;t<e.length;t++)e[t].classList.remove("edit-active")},controlParamCalculateValue:function(e,t){return e=WPTB_Helper.replaceAll(e,"-","_"),window["paramCalculateValue_".concat(e,"_").concat(t)]&&"function"==typeof window["paramCalculateValue_".concat(e,"_").concat(t)]?window["paramCalculateValue_".concat(e,"_").concat(t)]():void 0},controlParamCalculateValueCreateFunction:function(e,t,n,a){var r=e.className.match(/wptb-element-((.+-)\d+)/i),t="wptb-el-".concat(r[1],"-").concat(t),t=WPTB_Helper.replaceAll(t,"-","_");window["paramCalculateValue_".concat(t,"_").concat(n)]=function(){return a(e)}},managerExternalCssStyles:function(e,t,n,a){var r=e.match(/wptb-element-main(.+)-(\d+)/i);r&&Array.isArray(r)||0<(r=document.getElementsByClassName("wptb-preview-table")).length&&(r=(r=r[0]).className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(r)&&(t=".".concat(r[0]," ").concat(t));var o=document.head;if(o){var l=o.querySelector("#styles-".concat(e));if(l){var i=l.innerHTML;if(i){var s=i.split("}");s.pop();for(var c=!1,d=0;d<s.length;d++){var p=s[d].split("{");if(p[0]===t){var u=p[1].split(";");u.pop();for(var m=!1,b=0;b<u.length;b++)if(u[b].split(":")[0]===n){a?u[b]="".concat(n,":").concat(a):u.splice(b,1),p[1]=u.join(";")?"".concat(u.join(";"),";"):"",m=!0;break}m||a&&(p[1]+="".concat(n,":").concat(a,";")),p[1]?s[d]="".concat(p[0],"{").concat(p[1]):s.splice(d,1),s.join("}")?l.innerHTML="".concat(s.join("}"),"}"):o.removeChild(l),c=!0;break}}c||(l.innerHTML=a?"".concat(i+t,"{").concat(n,":").concat(a,";}"):i)}else a?l.innerHTML="".concat(t,"{").concat(n,":").concat(a,";}"):o.removeChild(l)}else a&&((i=document.createElement("style")).setAttribute("id","styles-".concat(e)),i.classList.add("styles-wptb-elements"),i.innerHTML="".concat(t,"{").concat(n,":").concat(a,";}"),o.appendChild(i))}},registerSections:function(e){var t=this;this.sections={},this.previousSection=null,this.currentSection=null,(e=Array.isArray(e)?e:[e]).map(function(e){var n=document.querySelector("[data-wptb-section=".concat(e,"]"));n&&(t.sections[e]=n)})},activateSection:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"block";this.previousSection=this.currentSection,this.currentSection=e,this.triggerSectionEvent(e);var a=document.querySelector("#wptb_builder");a&&(a.dataset.wptbActiveSection=this.currentSection),Object.keys(this.sections).map(function(a){var r;Object.prototype.hasOwnProperty.call(t.sections,a)&&(r=e===a?n:"none",t.sections[a].style="display: ".concat(r," !important"))})},getCurrentSection:function(){return this.currentSection},getPreviousSection:function(){return this.previousSection},getSectionFromUrl:function(){var e=new URL(window.location.href).searchParams.get("wptb-builder-section");e&&Object.keys(this.sections).some(function(t){return t===e})&&this.activateSection(e)},setupSectionButtons:function(){var e=Array.from(document.querySelectorAll("[data-wptb-section-button]")),t=this;e.map(function(e){var n=e.dataset.wptbSectionButton;e.addEventListener("click",function(){var a=e.dataset.wptbSectionDisplayType;t.activateSection(n,a),WPTB_Helper.editActionClassRemove()}),document.addEventListener("wptbSectionChanged",function(t){t.detail===n?(e.classList.remove("disabled"),e.classList.add("active")):(e.classList.remove("active"),e.classList.add("disabled"))})})},setupPanelToggleButtons:function(){var e=jQuery;e(".wptb-panel-toggle-group").each(function(){var t=e(this);e(this).find(".toggle-icon").click(function(){t.find(".wptb-panel-toggle-target").slideToggle(),t.toggleClass("wptb-panel-toggle-content")})})},triggerSectionEvent:function(e){e=new CustomEvent("wptbSectionChanged",{detail:e}),document.dispatchEvent(e)},setupSidebarToggle:function(e){e=document.querySelector(e),e&&e.addEventListener("click",function(e){e.preventDefault(),document.body.classList.toggle("collapsed")})},externalCssStylesDelete:function(e){var t=document.head;!t||(e=t.querySelector("#styles-".concat(e)))&&t.removeChild(e)},externalCssStylesCopy:function(e,t){var n,a,r;!e||(r=e.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(r)&&(n=r[0],!(a=document.head)||(e=a.querySelector("#styles-".concat(n)))&&((r=e.cloneNode(!0)).removeAttribute("id","styles-".concat(n)),(t=t.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)&&(r.setAttribute("id","styles-".concat(t[0])),e=e.innerHTML,t=WPTB_Helper.replaceAll(e,n,t[0]),r.innerHTML=t,a.appendChild(r))))},elementsStylesConvertToObject:function(){for(var e=document.head.querySelectorAll(".styles-wptb-elements"),t={},n=0;n<e.length;n++){var a=e[n].getAttribute("id");a&&e[n].innerHTML&&(t[a]=e[n].innerHTML)}return 0!=Object.keys(t).length?JSON.stringify(t):""},elementsStylesSetFromObject:function(e){var t,n=document.head;if(n){if(0<(a=n.querySelectorAll(".styles-wptb-elements")).length)for(var a=_toConsumableArray(a),r=0;r<a.length;r++)n.removeChild(a[r]);e&&(t=JSON.parse(e),0!=Object.keys(t).length&&Object.keys(t).forEach(function(e){var a=t[e],r=document.createElement("style");r.setAttribute("id",e),r.classList.add("styles-wptb-elements"),r.innerHTML=a,n.appendChild(r)}))}},saveTable:function(e,t,n){WPTB_Helper.tableSaveIndicator(!0),n||t||!e.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,e.target.dataset.wptbTableStateNumberSave),n||(d=document.querySelector(".wptb-edit-bar"))&&d.classList.contains("visible")&&(document.getElementsByClassName("wptb-preview-table")[0],WPTB_Helper.toggleTableEditMode()),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document),WPTB_Helper.tableClean();var a,r,o=new XMLHttpRequest,l="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=save_table"),i=document.getElementById("wptb-setup-name").value.trim();s=document.getElementsByClassName("wptb-preview-table"),((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(r=rs);var s,c,d,p,u=!1;s=0<s.length?(c=(s=s[0]).cloneNode(!0),r&&c.classList.contains("wptb-element-main-table_setting-startedid-0")&&(c.classList.remove("wptb-element-main-table_setting-startedid-0"),c.classList.add("wptb-element-main-table_setting-".concat(r)),(d=document.querySelector(".wptb-table-setup"))&&(d.innerHTML="",d.appendChild(c),WPTB_Table()),u=!0),c.columns=s.columns,(s=WPTB_Stringifier(c)).outerHTML):"",n||(p="",0<(m=document.getElementsByClassName("wptb-element-datas")).length&&m[0].innerHTML&&(p=m[0].innerHTML,u&&(p=WPTB_Helper.replaceAll(p,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-".concat(r)),p=WPTB_Helper.replaceAll(p,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-".concat(r)))));var m=WPTB_Helper.elementsStylesConvertToObject();return u&&(m=WPTB_Helper.replaceAll(m,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-".concat(r))),""===i&&""===s?(u="",""===i&&(u+="You must assign a name to the table before saving it.</br>"),""===s&&(u+="Table wasn't created"),(a=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '.concat(u,"</div>"),a.classList.add("wptb-warning"),void setTimeout(function(){a.removeChild(a.firstChild)},4e3)):(m={title:i,content:s,elements_datas:p,elements_styles:m,security_code:wptb_admin_object.security_code},n&&(m.preview_saving=n),r&&(m.id=r),WPTB_Helper.wptbDocumentEventGenerate("wptb:save:before",document,m),m=JSON.stringify(m),o.open("POST",l,!0),o.setRequestHeader("Content-type","application/json; charset=utf-8"),o.onreadystatechange=function(n){if(4==this.readyState&&(WPTB_Helper.tableSaveIndicator(!1),200==this.status)){var r=JSON.parse(o.responseText);if(a=document.getElementById("wptb-messaging-area"),"saved"!=r[0]){if("edited"==r[0]&&t){document.wptbId=r[1],a.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(i,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(i," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(r[1],"]"),document.querySelector(".wptb-preview-table");var l=document.getElementsByClassName("wptb-preview-btn");0<l.length&&((l=l[0]).classList.remove("wptb-button-disable"),s=(s=l.dataset.previewHref).replace("empty",r[1]),l.setAttribute("href",s)),e.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var s=document.getElementsByClassName("wptb-save-btn");0<s.length&&((s=s[0]).classList.add("wptb-save-disabled"),s.classList.remove("active"))}else if("edited"==r[0]){a.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(i,'" was successfully updated.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(i," was successfully updated.")}),e.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var c=document.getElementsByClassName("wptb-save-btn");0<c.length&&((c=c[0]).classList.add("wptb-save-disabled"),c.classList.remove("active"))}else{if("preview_edited"==r[0])return;a.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}a.classList.add("wptb-success"),setTimeout(function(){a.removeChild(a.firstChild)},4e3)}else{s=document.location.href.replace("#",""),c=new RegExp("&table=(.+)","i"),s=s.replace(c,""),window.history.pushState(null,null,"".concat(s,"&table=").concat(r[1])),document.wptbId=r[1],a.innerHTML='<div class="wptb-success wptb-message">Table "'.concat(i,'" was successfully saved.</div>'),WPTB_NotificationManager.sendNotification({message:"Table ".concat(i," was successfully saved.")}),document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id=".concat(r[1],"]"),document.querySelector(".wptb-preview-table"),s=document.getElementsByClassName("wptb-preview-btn"),0<s.length&&((s=s[0]).classList.remove("wptb-button-disable"),d=(d=s.dataset.previewHref).replace("empty",r[1]),s.setAttribute("href",d)),e.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var d=document.getElementsByClassName("wptb-save-btn");0<d.length&&((d=d[0]).classList.add("wptb-save-disabled"),d.classList.remove("active"))}}},o.send(m),void 0)},clickOnFreeSpace:function(){var e;WPTB_Helper.editActionClassRemove(),"table_responsive_menu"!==this.getCurrentSection()&&((e=document.querySelector("#wptb-cell_mode_background"))&&e.classList.contains("visible")||(this.activateSection("elements"),(e=document.getElementById("wpcd_fixed_toolbar")).hasAttribute("data-toolbar-active-id")&&document.getElementById(e.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active"),(e=document.querySelector(".wptb-preview-table"))&&WPTB_Helper.elementOptionsSet("table_setting",e)))},elementAjax:function(e,t){var n=new XMLHttpRequest,a="".concat(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl,"?action=wptb_element_ajax"),r=t.className.match(/wptb-element-(.+)-(\d+)/i),o={element_ajax_data:e,element_name:o=r&&Array.isArray(r)?r[1]:o,security_code:wptb_admin_object.security_code},o=JSON.stringify(o);n.open("POST",a,!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onreadystatechange=function(e){var a;4==this.readyState&&200==this.status&&(a=(a=JSON.parse(n.responseText))&&Array.isArray(a)&&"element_ajax_responce"==a[0]?{value:a[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",t,a))},n.send(o)},toggleTableEditMode:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.getElementsByClassName("wptb-edit-bar"),n=document.getElementById("wptb-cell_mode_background"),a=document.getElementById("wptb-left-scroll-panel-curtain"),r=document.getElementById("wptb-left-scroll-panel-cell-settings"),o=document.getElementsByClassName("wptb-preview-table");0<o.length&&(o=o[0]);var l=document.querySelector(".wptb-builder-panel");if(0<t.length){for(var i="",s=0;s<t.length;s++)if(e){document.select.deactivateMultipleSelectMode(),t[s].classList.remove("visible"),n.classList.remove("visible"),a.classList.remove("visible"),r.classList.remove("visible"),o.parentNode.classList.remove("wptb-preview-table-manage-cells");var c=o.getElementsByTagName("td");if(0<c.length)for(var d=0;d<c.length;d++)c[d].classList.remove("wptb-highlighted");i="closed",l.dataset.manageCellsActive=!1}else e||(document.select.activateMultipleSelectMode(),t[s].classList.add("visible"),n.classList.add("visible"),a.classList.add("visible"),o.parentNode.classList.add("wptb-preview-table-manage-cells"),i="opened",l.dataset.manageCellsActive=!0);WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-edit-mode/".concat(i),o)}},checkingDimensionValue:function(e,t){if(e=String(e),t=String(t),e&&t){var n=e.indexOf(t);return-1!=n&&n==e.length-t.length?!0:!1}return!1},checkSetGetStyleSizeValue:function(e,t,n,a){var r=e.style[t];if((r=String(r))&&!a||WPTB_Helper.checkingDimensionValue(r,a)){if(!a)return r}else if(r=window.getComputedStyle(e),n&&r.getPropertyValue(n)&&a&&!WPTB_Helper.checkingDimensionValue(r.getPropertyValue(n),a)){if(!a)return!1;e.style[t]=null}else{if(!a)return r.getPropertyValue(n);e.style[t]=r.getPropertyValue(n)}return e.style[t]},checkSetGetStyleColorValue:function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!a)return r}else{var o=window.getComputedStyle(e,null);if(o&&o.getPropertyValue(n)){if(!a)return o.getPropertyValue(n);r=WPTB_Helper.rgbToHex(o.getPropertyValue(n)),WPTB_Helper.isHex(r)?e.style[t]=r:e.style[t]=""}else{if(!a)return"";e.style[t]=""}}},checkSetGetStyleValue:function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.style[t];if(r){if(!a)return r}else if(r=window.getComputedStyle(e,null),r&&r.getPropertyValue(n)){if(!a)return r.getPropertyValue(n);e.style[t]=r.getPropertyValue(n)}else if(!a)return""},getValueMaxCountSameElementsInArray:function(e){if(e&&Array.isArray(e)){for(var t,n,a={},r=0,o=0;o<e.length;o++)e[o]?a[e[o]]?a[e[o]]++:a[e[o]]=1:r++;for(n in a)(!t||a[t]<a[n])&&(t=n);return a[t]>=r?t:""}},recalculateIndexes:function(e){WPTB_RecalculateIndexes(e)},tableRowsColorsReinstall:function(e){var t,n,a;!e.rows.length||(t=e.className.match(/wptb-element-main(.+)-(\d+)/i))&&Array.isArray(t)&&(e="",e="0"==t[t.length-1]?"startedid-0":t[t.length-1],(t=document.querySelector(".wptb-el-main-table_setting-".concat(e,"-tableHeaderBackground")))&&(n={value:t.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",t,n)),(n=document.querySelector(".wptb-el-main-table_setting-".concat(e,"-tableEvenRowBackground")))&&(a={value:n.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",n,a)),(a=document.querySelector(".wptb-el-main-table_setting-".concat(e,"-tableOddRowBackground")))&&(e={value:a.value},WPTB_Helper.wptbDocumentEventGenerate("controlColor:change",a,e)))},getParentOfType:function(e,t){return t.nodeName===e.toUpperCase()?t:WPTB_Helper.getParentOfType(e,t.parentElement)},dragRelativeType:"",setDragRelativeType:function(e){this.dragRelativeType=e},getDragRelativeType:function(){return this.dragRelativeType},getElementColorStylesHex:function(e,t){return t=e.style[t],t=WPTB_Helper.rgbToHex(t),t=WPTB_Helper.isHex(t)?t:""},showControlsOnElementMount:function(){document.addEventListener("element:mounted:dom",function(e){e.target.click()})},showElementsListOnRemove:function(){document.addEventListener("element:removed:dom",function(){WPTB_Helper.activateSection("elements")})},blockTinyMCE:function(){function e(e){var t=document.createElement("div");t.classList.add("wptb-plugin-blocker-element");var n=0<e.childNodes.length;e.appendChild(t),n||e.classList.add("wptb-plugin-blocker-element-empty")}function t(e){var t=e.querySelector(".wptb-plugin-blocker-element");t&&t.remove(),e.classList.remove("wptb-plugin-blocker-element-empty")}document.addEventListener("wptbSectionChanged",function(n){var a=n.detail,n=document.querySelector(".wptb-table-setup table.wptb-preview-table");n&&((n=Array.from(n.querySelectorAll("td"))).map(t),["manage_cells","cell_settings","background_menu"].includes(a)&&n.map(e))}),document.addEventListener("wptb:save:before",function(){var e=document.querySelector(".wptb-table-setup table.wptb-preview-table");Array.from(e.querySelectorAll("td")).map(t)})},calledByBlock:function(){new URL(window.location.href).searchParams.get("gutenberg")&&document.querySelector(".wptb-plugin-header-close a").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=document.querySelector(".wptb-save-disabled"),e=new URL(window.location.href).searchParams.get("table");(t||window.confirm(wptb_admin_object.strings.dirtyConfirmation))&&WPTB_Helper.wptbDocumentEventGenerate("gutenbergClose",document,e)},{capture:!0})},tableClean:function(){Array.from(document.querySelectorAll(".wptb-directlyhovered")).map(function(e){e.classList.remove("wptb-directlyhovered")}),Array.from(document.querySelectorAll(".wptb-text-container p")).map(function(e){e.removeAttribute("data-placeholder")})},tableSaveIndicator:function(e){var t=document.querySelector("#wptb_builder");t&&(e?t.dataset.wptbSaving=!0:delete t.dataset.wptbSaving)}},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),WPTB_Helper.registerSections(["elements","table_settings","cell_settings","options_group","table_responsive_menu","manage_cells","background_menu"]),WPTB_Helper.setupSectionButtons(),WPTB_Helper.activateSection("elements"),WPTB_Helper.setupSidebarToggle(".wptb-panel-toggle-section .wptb-panel-drawer-icon"),WPTB_Helper.setupPanelToggleButtons(),new WptbResponsive("table_responsive_menu","wptbResponsiveApp",".wptb-builder-content"),WPTB_Helper.getSectionFromUrl(),WPTB_Helper.showControlsOnElementMount(),WPTB_Helper.showElementsListOnRemove(),WPTB_Helper.blockTinyMCE(),new WPTB_HeaderToolbox(".wptb-plugin-header-toolbar").init(),document.addEventListener("wp-table-builder/table-edit-mode/closed",function(){WPTB_Helper.activateSection("elements")}),WPTB_Helper.calledByBlock(),WPTB_ControlsManager.callControlScript("WhatIsNew"),WPTB_NotificationManager.init(),document.addEventListener("wptb:table:generated",function(){WPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder),WPTB_ControlsManager.subscribeToControl("extraStyles","extraTableStyles",function(){WPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder)},!0)})},WPTB_LeftPanel=function(){for(var e=document.getElementsByClassName("wptb-preview-table")[0],t=document.getElementsByClassName("wptb-element"),n=0;n<t.length;n++)t[n].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};e&&(document.querySelector("#wptb-left-scroll-panel-curtain .wptb-table-edit-mode-close").addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)}),document.addEventListener("wptbSectionChanged",function(e){"manage_cells"===e.detail&&Array.from(document.querySelectorAll(".wptb-management_table_container .wptb-table-edit-mode-close")).map(function(e){e.addEventListener("click",function(){WPTB_Helper.toggleTableEditMode(!0)})})})),document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||"manage_cells"!==WPTB_Helper.currentSection&&WPTB_Helper.clickOnFreeSpace()},e=document.getElementsByClassName("wptb-header"),(e=0<e.length?e[0]:e).onclick=function(){WPTB_Helper.clickOnFreeSpace()}};!function(e,t,n){"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t[e]=n()}("WPTB_Logger",self||global,function(){var e={normal:"#48BB78"};return{prepareMessage:function(e){return"%c WP Table Builder %c {message} ".replace("{message}",e)},prepareMessageStyle:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"normal";return"background-color: {bgColor} ; padding: 3px; color: #FFF; border-radius: 0 5px 5px 0;".replace("{bgColor}",e[e[t]?t:"normal"])},log:function(e){console.log(this.prepareMessage(e),"border-radius:5px 0 0 5px; background-color: #3299D1; padding: 3px; color: #FFF; font-weight: bold;",this.prepareMessageStyle("normal"))}}});var MultipleSelect=function(){var e=[],t=!1;return this.activateMultipleSelectMode=function(){e=[];for(var n=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),a=0;a<n.length;a++)n[a].classList.remove("wptb-highlighted");t=!0},this.deactivateMultipleSelectMode=function(){t=!1},this.isActivated=function(){return t},this.pushSelectedCell=function(n){t&&(e.push(n),n.classList.add("wptb-highlighted"))},this.selectedCells=function(){return e},this.flushSelectedCells=function(){e=[]},this.getFirst=function(){for(var t,n=1e3,a=1e3,r=e.length-1;r>=0;r--)n>=e[r].dataset.xIndex&&a>=e[r].dataset.yIndex&&(t=e[r],n=e[r].dataset.xIndex,a=e[r].dataset.yIndex);return t},this.getLast=function(){for(var t,n=-1,a=-1,r=e.length-1;r>=0;r--)n<=e[r].dataset.xIndex&&a<=e[r].dataset.yIndex&&(t=e[r],n=e[r].dataset.xIndex,a=e[r].dataset.yIndex);return t},this.removeAllButFirst=function(){for(var t=this.getFirst(),n=1;n<e.length;n++)e[n].classList.add("wptb-fused-cell-"+t.dataset.xIndex+"-"+t.dataset.yIndex)},this},_this=this;!function(e){(self||global).WPTB_NotificationManager=e()}(function(){var e=!1;return _this.store=null,new function(){var t,n=this;this.types={};var a=null===(t=(self||global).wptb_admin_object)||void 0===t?void 0:t.notificationManager;this.sendNotification=function(e){var t,a;n.store.dispatch("addNotification",(t=e,a=n.store.getters.defaults,e=Object.keys(t).reduce(function(e,n){return Object.prototype.hasOwnProperty.call(t,n)&&a[n]&&(e[n]=t[n]),e},{}),_objectSpread(_objectSpread({},a),e)))},this.init=function(){e||(WPTB_ControlsManager.setControlData("NotificationManager",a),WPTB_ControlsManager.callControlScript("NotificationManager","NotificationManager"),n.notificationTypes=n.store.getters.notificationTypes,n.queueTypes=n.store.getters.queueTypes,n.revealTypes=n.store.getters.revealTypes,n.revealTypes=n.store.getters.revealTypes,n.dismissTypes=n.store.getters.dismissTypes,e=!0)}}});var WPTB_Parser=function(e){var t=document.createElement("div");t.innerHTML=e;for(var t=t.children[0],n=_toConsumableArray(t.querySelectorAll(".wptb-column-title-mobile-container")),a=0;a<n.length;a++)n[a].parentNode.removeChild(n[a]);for(var r=t.querySelectorAll("td"),o=0;o<r.length;o++)r[o].classList.add("wptb-droppable"),r[o].classList.remove("wptb-column-title-mobile-not-elements");return t};Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=n.length;return function(r){if("object"!==_typeof(r)&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var o,l,i=[];for(o in r)e.call(r,o)&&i.push(o);if(t)for(l=0;a>l;l++)e.call(r,n[l])&&i.push(n[l]);return i}}());var WPTB_RecalculateIndexes=function(e){for(var t,n=e.getElementsByTagName("tr"),a=0,r=0,o=[],l=0;l<n.length;l++){t=n[l].getElementsByTagName("td"),null==o[l]&&(o[l]=[]);for(var i=0,s=0;s<t.length;s++){if(null!=o[l][s])for(var c=0;100>c;c++){if(null==o[l][i]){o[l][i]=t[s],t[s].dataset.xIndex=i;break}i++}else o[l][s]=t[s],t[s].dataset.xIndex=i;if(t[s].dataset.yIndex=l,1<t[s].colSpan)for(var d=1;d<t[s].colSpan;d++)i++,o[l][i]="tdDummy";if(1<t[s].rowSpan)for(var p=1;p<t[s].rowSpan;p++){null==o[l+p]&&(o[l+p]=[]);for(var u=0;u<t[s].colSpan;u++)o[l+p][i-t[s].colSpan+1+u]="tdDummy"}i++}t.length>a&&(a=t.length),0==l&&(r=i)}e.columns=a,e.maxCols=r},WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),
    e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement),WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements||"")},e[t].ondragend=function(){WPTB_Helper.elementDragEndClear()};var n=new WPTB_TableStateSaveManager,a=document.getElementsByClassName("wptb-undo");0<a.length&&((a=a[0]).onclick=function(e){var t;this.classList.contains("wptb-undoredo-disabled")||(n.tableStateGet(this.dataset.wptbUndoredo),0<(t=document.getElementsByClassName("wptb-undo-redo-container")).length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="",document.querySelector(".wptb-preview-table"),WPTB_Table()}))}),a=document.getElementsByClassName("wptb-redo"),0<a.length&&((a=a[0]).onclick=function(e){var t;this.classList.contains("wptb-undoredo-disabled")||(n.tableStateGet(this.dataset.wptbUndoredo),0<(t=document.getElementsByClassName("wptb-undo-redo-container")).length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="",document.querySelector(".wptb-preview-table"),WPTB_Table()}))});var r=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||r.classList.add("wptb-popup-show")},window.onbeforeunload=function(e){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){r.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){r.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){var t,n;this.classList.contains("wptb-button-disable")||(t=Math.floor(1e4*Math.random()),(n=new URL(e.target.href)).searchParams.set("preview_id",t),e.target.href=n.toString(),WPTB_Helper.saveTable(e,!1,t))},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(e){this.classList.contains("wptb-save-disabled")||WPTB_Helper.saveTable(e)},a=document.querySelector("#wptb-setup-name"),a&&(a.onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()})};!function(e,t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=n():t[e]=n()}("WPTB_SortableTable",self||global,function(){return function(){function e(e,t,n){var a,r,o;"TD"===e.target.tagName?(a=null==e.offsetX?e.layerX:e.offsetX,r=null==e.offsetY?e.layerY:e.offsetY,o=!1,(o="vertical"===t&&e.target.clientWidth-a<=35||"horizontal"===t&&35>=a?!0:o)&&(e.target.clientHeight-35)/2<r&&(e.target.clientHeight+35)/2>r?n.classList.add("sortable-hover"):n.classList.remove("sortable-hover")):n.classList.remove("sortable-hover")}function t(t){e(t,"vertical",this)}function n(t){e(t,"horizontal",this)}function a(){this.classList.remove("sortable-hover")}function r(e,t){if(e.target&&"TD"===e.target.tagName&&!d.parentNode.classList.contains("wptb-preview-table-manage-cells")){var n=e.currentTarget,a=!1;if("vertical"===t&&e.target.dataset.hasOwnProperty("sortedVertical")){var r=[],c=[];if(this.itemsPerHeader&&this.itemsPerHeader<n.rows.length){WPTB_RecalculateIndexes(n);for(var p=_toConsumableArray(n.rows),u=n.querySelector("tbody")?n.querySelector("tbody"):n,m=0;m<p.length;m++)m<e.target.dataset.yIndex?(r.push(p[m]),u.removeChild(p[m])):m>parseInt(e.target.dataset.yIndex,10)+this.itemsPerHeader&&(c.push(p[m]),u.removeChild(p[m]));WPTB_RecalculateIndexes(n)}var b,g,y=n.querySelectorAll('[data-x-index="'.concat(e.target.dataset.xIndex,'"]'));(y=_toConsumableArray(y)).map(function(e){(b=parseInt(e.rowSpan,10))||(b=1),g=e.dataset.yIndex,WPTB_CutGlueTable.cutTableHorizontally(g,n),g+=b,WPTB_CutGlueTable.cutTableHorizontally(g,n)});for(var f,w=[],h=0,v=[],S=0;S<y.length;S++){var T=s(e,n,y,S,h,"vertical");if(T&&T.hasOwnProperty("i"))y=T.tds,S=T.i;else{for(var _=(y=T?T.tds:y)[S],C=(C=parseInt(_.rowSpan,10))||1,h=parseInt(_.dataset.yIndex,10)+C,T=i(_),A=[],B=0;C>B;B++)A.push(n.rows[parseInt(_.dataset.yIndex,10)+B]),v.push(parseInt(_.dataset.yIndex,10)+B);0<_.dataset.yIndex?w.push({rowsTd:A,value:T}):f=A}}var E=o(e,"sortedVertical");if(!E)return;if(w.length&&w.sort(function(e,t){return l(E,e,t)}),w.unshift({rowsTd:f}),w.length<n.rows.length)for(var P,x=0;x<n.rows.length;x++)-1<v.indexOf(x)||((P=[]).push(n.rows[x]),w.push({rowsTd:P}));var W,I,L,N=n.querySelector("tbody");N.innerHTML="",w.map(function(e){e.rowsTd.map(function(e){N.appendChild(e)})}),!r.length||(W=n.querySelector("tbody")?n.querySelector("tbody"):n)&&(I=W.querySelector("tr"),r.map(function(e){W.insertBefore(e,I)})),c.length&&(L=n.querySelector("tbody")?n.querySelector("tbody"):n,N&&c.map(function(e){L.appendChild(e)})),WPTB_RecalculateIndexes(n),WPTB_CutGlueTable.glueTableHorizontally(n),a=!0}else if("horizontal"===t&&"0"===e.target.dataset.xIndex){var H,O,k=n.querySelectorAll('[data-y-index="'.concat(e.target.dataset.yIndex,'"]'));(k=_toConsumableArray(k)).map(function(e){(H=parseInt(e.colSpan,10))||(H=1),O=e.dataset.xIndex,WPTB_CutGlueTable.cutTableVertically(O,n),O+=H,WPTB_CutGlueTable.cutTableVertically(O,n)});for(var M,D=[],q=0,j=0;j<k.length;j++){var R=s(e,n,k,j,q,"horizontal");if(R&&R.hasOwnProperty("i"))k=R.tds,j=R.i;else{for(var F=(k=R?R.tds:k)[j],G=(G=parseInt(F.colSpan,10))||1,q=parseInt(F.dataset.xIndex,10)+G,R=i(F),V=[],z=0;G>z;z++){var U=_toConsumableArray(n.querySelectorAll('[data-x-index="'.concat(parseInt(F.dataset.xIndex,10)+z,'"]')));V.push(U)}0<F.dataset.xIndex?D.push({columnsTd:V,value:R}):M=V}}var J=o(e,"sortedHorizontal");if(!J)return;if(D.length&&D.sort(function(e,t){return l(J,e,t)}),D.unshift({columnsTd:M}),D.length<n.maxCols)for(var $=n.maxCols-D.length,Q=0;$>Q;Q++){var K=_toConsumableArray(n.querySelectorAll('[data-x-index="'.concat(parseInt(n.maxCols,10)-parseInt($,10)+Q,'"]')));D.push({columnsTd:[K]})}for(var X=0;X<n.rows.length;X++)n.rows[X].innerHTML="";D.map(function(e){e.columnsTd.map(function(e){e.map(function(e){n.rows[e.dataset.yIndex].appendChild(e)})})}),WPTB_RecalculateIndexes(n),WPTB_CutGlueTable.glueTableVertically(n),a=!0}a&&(function(){for(var e=_toConsumableArray(n.getElementsByTagName("td")),t=0;t<e.length;t++)e[t].hasAttribute("data-same-cell-before-division")&&e[t].removeAttribute("data-same-cell-before-division")}(),n.hasOwnProperty("tableSM")&&(new(n.tableSM())).tableStateSet(),this.reassignElementsStyles("td"),this.reassignElementsStyles("tr"))}}function o(e,t){return!(!e.currentTarget||!e.currentTarget.classList.contains("wptb-preview-table")&&!e.currentTarget.classList.contains("wptb-preview-table-mobile"))&&(e.target.dataset[t]&&"ask"!==e.target.dataset[t]?e.target.dataset[t]="ask":e.target.dataset[t]="desk",e.target.dataset[t])}function l(e,t,n){var a=0<arguments.length&&void 0!==e?e:"ask",r=1<arguments.length?t:void 0,o=2<arguments.length?n:void 0,r=r.value,o=o.value;return parseInt(r)&&parseInt(o)&&(r=parseInt(r),o=parseInt(o)),"ask"===a?o>r?-1:r===o?0:1:o>r?1:r===o?0:-1}function i(e){for(var t=e.querySelectorAll(".wptb-text-container"),t=_toConsumableArray(t),n="",a=0;a<t.length;a++)n+=t[a].innerText,a!==t.length-1&&(n+=" ");return n}function s(e,t,n,a,r,o){var l,i,s,c,d,p,u=n[a],m=!1;if("vertical"===o?(i="colSpan",s="data-y-index",c="yIndex",d="xIndex",y="rowSpan",p=t.rows.length):"horizontal"===o&&(i="rowSpan",s="data-x-index",c="xIndex",d="yIndex",y="colSpan",p=t.maxCols),0<u.dataset[c]-r)for(var b=t.querySelectorAll("[".concat(s,'="').concat(r,'"]')),g=0;g<b.length;g++)if(l=(l=b[g][i])||1,b[g].dataset[d]<e.target.dataset[d]&&parseInt(b[g].dataset[d],10)+parseInt(l,10)>e.target.dataset[d]){n.splice(a,0,b[g]),m=!0,a--;break}if(m)return{tds:n,i:a};var y=(y=parseInt(u[y],10))||1;if(a==n.length-1&&parseInt(u.dataset[c],10)+y<p){b=t.querySelectorAll("[".concat(s,'="').concat(parseInt(u.dataset[c],10)+y,'"]'));for(var f=0;f<b.length;f++)if(l=(l=b[f][i])||1,b[f].dataset[d]<e.target.dataset[d]&&parseInt(b[f].dataset[d],10)+parseInt(l,10)>e.target.dataset[d]){n.push(b[f]),m=!0;break}}return!!m&&{tds:n}}var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=this.table=c.table;WPTB_RecalculateIndexes(d);var p=this;return this.itemsPerHeader=0,this.tableMaxCols=d.maxCols,this.cellsStylesScheme={},this.rowsStylesScheme={},this.sortModeSwitcher=function(e,t){t&&(this.sortModeSwitcher("horizontal",!1),this.sortModeSwitcher("vertical",!1)),"vertical"===e?(this.table.removeEventListener("click",this.sortableTableVerticalStart,!1),t?(this.sortingCellMouseMoveSwitcher("vertical",!0),this.table.addEventListener("click",this.sortableTableVerticalStart,!1),this.table.dataset.wptbSortableTableVertical="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("vertical",!1),delete this.table.dataset.wptbSortableTableVertical)):"horizontal"===e&&(this.table.removeEventListener("click",this.sortableTableHorizontalStart,!1),t?(this.sortingCellMouseMoveSwitcher("horizontal",!0),this.table.addEventListener("click",this.sortableTableHorizontalStart,!1),this.table.dataset.wptbSortableTableHorizontal="1",this.createTableElementsStylesScheme("td"),this.createTableElementsStylesScheme("tr")):(this.sortingCellMouseMoveSwitcher("horizontal",!1),delete this.table.dataset.wptbSortableTableHorizontal))},this.tableObjectChange=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.table.classList.contains("wptb-mobile-view-active")&&e?this.table=d.parentNode.parentNode.querySelector(".wptb-preview-table-mobile"):this.table.classList.contains("wptb-preview-table-mobile")&&!e&&(this.table=d.parentNode.querySelector(".wptb-preview-table")),this.table},this.createTableElementsStylesScheme=function(e){this.tableObjectChange();var t=this.table.querySelectorAll(e);if(t.length)for(var n=0;n<t.length;n++){var a=t[n],r=window.getComputedStyle(a,null).getPropertyValue("background-color"),o="";"td"===e?(o=a.dataset.xIndex+"-"+a.dataset.yIndex,this.cellsStylesScheme[o]={backgroundColor:r}):"tr"===e&&(o=String(n),this.rowsStylesScheme[o]={backgroundColor:r})}this.tableObjectChange(!1)},this.reassignElementsStyles=function(e){this.tableObjectChange();var t,n=this.table.querySelectorAll(e);if("td"===e?t=this.cellsStylesScheme:"tr"===e&&(t=this.rowsStylesScheme),n.length)for(var a=0;a<n.length;a++){var r=n[a],o="";if("td"===e?o=r.dataset.xIndex+"-"+r.dataset.yIndex:"tr"===e&&(o=a),t.hasOwnProperty(o)){var l,i=t[o];for(l in i)r.style[l]=i[l]}}this.tableObjectChange(!1)},this.sortableTableInitialization=function(e){var t,n,a,r;this.table.dataset.wptbSortableTableVertical&&"1"===this.table.dataset.wptbSortableTableVertical?(t="vertical",n="horizontal"):this.table.dataset.wptbSortableTableHorizontal&&"1"===this.table.dataset.wptbSortableTableHorizontal&&(t="horizontal",n="vertical"),t&&"string"==typeof t&&n&&"string"==typeof n&&(a=WPTB_GetDirectionAfterReconstruction(this.table,t,n,"vertical",e),"object"===_typeof(a)&&a.hasOwnProperty("switch")&&((r=function(e){var t=a["switch"](e);"object"===_typeof(t)&&(this.itemsPerHeader=t.itemsPerHeader,t.hasOwnProperty("newTable")?(e=this.table,this.table=t.newTable,this.sortModeSwitcher(t.type[0],!0),this.table=e):this.sortModeSwitcher(t.type[0],!0))}).call(p),this.table.addEventListener("table:rebuilt",function(e){r.call(p,e)},!1)))},this.sortingCellMouseMoveSwitcher=function(e,r){function o(e,t,n){e.removeEventListener("mousemove",t,!1),e.removeEventListener("mouseleave",a,!1),n&&(e.addEventListener("mousemove",t,!1),e.addEventListener("mouseleave",a,!1))}function l(e,t,n){n?e.dataset[t]&&"desk-disabled"===e.dataset[t]?e.dataset[t]="desk":e.dataset[t]="ask":"ask"===e.dataset[t]?e.dataset[t]="ask-disabled":"desk"===e.dataset[t]&&(e.dataset[t]="desk-disabled")}var i=this,s=this.table.querySelectorAll("td");if(s.length&&(s=_toConsumableArray(s)).map(function(e){o(e,t,!1),l(e,"sortedVertical",!1),o(e,n,!1),l(e,"sortedHorizontal",!1)}),r)if("vertical"===e)for(var c=this.table.rows.length,d=0;c>0;){var p=this.table.querySelectorAll('[data-y-index="'.concat(d,'"]'));(p=_toConsumableArray(p)).map(function(e){o(e,t,r),l(e,"sortedVertical",r)}),this.itemsPerHeader?(c-=this.itemsPerHeader+1,d+=this.itemsPerHeader+1):c=0}else"horizontal"===e&&(e=this.table.querySelectorAll('[data-x-index="0"]'),(e=_toConsumableArray(e)).map(function(e){2<i.table.querySelectorAll('[data-y-index="'.concat(e.dataset.yIndex,'"]')).length&&(o(e,n,r),l(e,"sortedHorizontal",r))}))},this.sortableTableVerticalStart=function(e){r.call(p,e,"vertical")},this.sortableTableHorizontalStart=function(e){r.call(p,e,"horizontal")},this}});var WPTB_Stringifier=function(e){if(e){var t=e.cloneNode(!0);t.dataset.tableColumns=e.columns,t.style.width=null,t.style.minWidth=null,t.style.maxWidth=null;var n=t.getElementsByTagName("td");if(0<n.length)for(var a=0;a<n.length;a++){n[a].removeAttribute("draggable"),n[a].classList.remove("wptb-droppable");var r=n[a].className.match(/wptb-element-((.+-)\d+)/i);r&&n[a].classList.remove(r[0]);var o=n[a].getElementsByClassName("wptb-ph-element");if(0<o.length)for(var l=0;l<o.length;l++){var i=o[l].querySelectorAll(".mce-content-body");if(0<i.length)for(var s=0;s<i.length;s++)i[s].classList.remove("mce-content-body");var c=o[l].querySelectorAll("[data-mce-style]");if(0<c.length)for(var d=0;d<c.length;d++)c[d].removeAttribute("data-mce-style");var p=o[l].querySelectorAll("[contenteditable]");if(0<p.length)for(var u=0;u<p.length;u++)p[u].removeAttribute("contenteditable");var m=o[l].querySelectorAll("[spellcheck]");if(0<m.length)for(var b=0;b<m.length;b++)m[b].removeAttribute("spellcheck");var g=o[l].querySelectorAll("[id^=mce_]");if(0<g.length)for(var y=0;y<g.length;y++)g[y].removeAttribute("id");for(var f=o[l].querySelectorAll(".wptb-actions"),w=f.length;w>0&&f[0]&&f[0].parentNode;)f[0].parentNode.removeChild(f[0]),w--;if(0<(h=o[l].querySelectorAll("[data-mce-bogus]")).length)for(var h=_toConsumableArray(h),v=0;v<h.length;v++)h[v]&&h[v].parentNode&&h[v].parentNode.removeChild(h[v])}}return t}},array=[],WPTB_Table=function(e,t,n){function a(e){function t(e,t){var n=1<arguments.length&&void 0!==t&&t,a=n?"add":"remove";e.classList[a]("wptb-highlighted");for(var a=u(e),a=_slicedToArray(a,2),r=a[0],o=a[1],l=e.rowSpan,i=e.colSpan,s=0;l>s;s++)for(var c=0;i>c;c++)array[r+s][o+c]=n?1:0}var n=e.currentTarget,a=n.rowSpan,r=n.colSpan,o=document.getElementsByClassName("wptb-no-cell-action"),l=document.getElementsByClassName("wptb-single-action"),i=document.getElementsByClassName("wptb-multiple-select-action"),s=document.getElementById("wptb-left-scroll-panel-cell-settings");if((d=u(n))[0],d[1],document.select.isActivated()){d=e.shiftKey,n.className.match(/wptb-highlighted/)?1<(e=Array.from(document.querySelectorAll(".wptb-highlighted"))).length&&!d?(t(n,!0),e.map(function(e){e!==n&&t(e,!1)})):t(n,!1):(d||Array.from(document.querySelectorAll(".wptb-highlighted")).map(function(e){e!==n&&t(e,!1)}),t(n,!0));var c=document.getElementsByClassName("wptb-highlighted"),d=c.length;if(0===d){for(var p=0;p<i.length;p++)i[p].classList.remove("visible"),i[p].setAttribute("disabled","disabled");for(p=0;p<o.length;p++)o[p].classList.add("visible"),o[p].removeAttribute("disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");s.classList.remove("visible")}else if(1===d){for(p=0;p<i.length;p++)i[p].classList.remove("visible"),i[p].setAttribute("disabled","disabled");for(p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.add("visible"),l[p].removeAttribute("disabled");c=c[0],WPTB_Helper.elementOptionsSet("table_cell_setting",c);var m=c.className.match(/wptb-element-((.+-)\d+)/i);["cellWidth","cellHeight"].map(function(e){var t,n,a,r="wptb-el-".concat(m[1],"-").concat(e),o="wptb-el-".concat(m[1],"-").concat(e,"Fixed");"cellWidth"!==e&&"cellHeight"!==e||(n=t="","cellWidth"===e?(t="width",n="getColumnWidth"):"cellHeight"===e&&(t="height",n="getRowHeight"),a=c.style[t],r=document.querySelectorAll("."+r),o=document.querySelector("."+o),r=_toConsumableArray(r),a||c.dataset["wptbFixed".concat(t.toUpperCase())]?(r.map(function(e){a?e.value=parseFloat(a,10):c.dataset["wptbFixed".concat(t.toUpperCase())]&&(e.value=c.dataset["wptbFixed".concat(t.toUpperCase())])}),o.checked=!0):(a=WPTB_Helper[n](g,c),r.map(function(e){e.value=a}),o.checked=!1))}),s.classList.add("visible")}else{for(p=0;p<i.length;p++)g.isSquare(array)?(i[p].classList.add("visible"),i[p].removeAttribute("disabled")):(i[p].classList.remove("visible"),i[p].setAttribute("disabled","disabled"));for(p=0;p<o.length;p++)o[p].classList.remove("visible"),o[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");s.classList.remove("visible")}s=n.className.match(/wptb-element-table_cell_setting-((.+-)\d+)/i),s&&1<s.length&&(b="wptb-el-table_cell_setting-".concat(s[1],"-").concat("emptyCell"),(b=document.getElementById(b))&&(b.querySelector('input[type="checkbox"]').checked=n.classList.contains("wptb-empty")));var b={countMarkedCells:d};WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/cell/mark",n,b),b=document.querySelector("#wptb-split-cell"),b&&(1!==d||1===a&&1===r?(b.classList.remove("visible"),b.setAttribute("disabled","disabled")):(b.classList.add("visible"),b.removeAttribute("disabled")))}}function r(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)e[t][n];g.isSquare(e)}function o(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),n=document.getElementsByClassName("wptb-multiple-select-action"),a=document.getElementById("wptb-left-scroll-panel-cell-settings"),r=g.getElementsByClassName("wptb-highlighted");r.length;)r[0].classList.remove("wptb-highlighted");a.classList.remove("visible");for(var o=0;o<array.length;o++)for(var l=0;l<array[o].length;l++)array[o][l]=0;for(var i=0;i<n.length;i++)n[i].classList.remove("visible"),n[i].setAttribute("disabled","disabled");for(var s=0;s<e.length;s++)e[s].classList.add("visible"),e[s].removeAttribute("disabled");for(var c=0;c<t.length;c++)t[c].classList.remove("visible"),t[c].setAttribute("disabled","disabled");WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/undo-select/active",g)}function l(){for(var e=[],t=[],n=0;n<g.rows.length;n++){for(var a=g.rows[n].getElementsByTagName("td"),o=0,l=0;l<a.length;l++)o+=a[l].colSpan;e.push(o)}c=Math.max.apply(null,e);for(var i=g.rows.length,n=0;i>n;n++)for(t[n]=[],l=0;c>l;l++)t[n].push(0);return r(t),t}var i,s,c,d=document.getElementsByClassName("wptb-settings-items"),p=document.getElementsByClassName("wptb-table-setup")[0],u=function(e){for(var t=[],n=0;c>n;n++)t[n]=0;for(n=0;n<g.rows.length;n++)for(var a=g.rows[n].getElementsByTagName("td"),r=cellPointer=0;c>r;r+=stepsToMove)if(stepsToMove=1,t[r])t[r]--;else{var o=a[cellPointer++];if(o==e)return[n,r];if(1<o.rowSpan){for(var l=0;l<o.colSpan;l++)t[r+l]=o.rowSpan-1;stepsToMove=o.colSpan}else 1<o.colSpan&&(stepsToMove=o.colSpan)}};if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var m=0;m<d.length;m++)"wptb-apply-inner-border"!==d[m].id&&d[m].classList.add("visible");for((g=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),g.style.border="1px solid #d1d1d1",g.dataset.reconstraction=1,m=0;t>m;m++){(i=g.insertRow(-1)).classList.add("wptb-row");for(var b=0;e>b;b++)(s=new WPTB_Cell(a)).setCoords(m,b),s.getDOMElement().style.border="1px solid #d1d1d1",i.appendChild(s.getDOMElement())}}else{if(!(n=n||document.querySelector(".wptb-preview-table")))return;var g,y=(g=n).getElementsByTagName("td");if(0<y.length)for(var f=0;f<y.length;f++)WPTB_Cell(a,y[f])}g.mark=function(e){a(e)},g.wptbCell=function(e,t){return WPTB_Cell(e,t)},g.tableSM=function(){return WPTB_TableStateSaveManager},g.undoSelect=function(){o()},g.setMaxAmountOfCells=function(e){c=e},g.getMaxAmountOfCells=function(){return c},g.fillTableArray=l,g.recalculateIndexes=function(){WPTB_Helper.recalculateIndexes(this)},g.addColumnWidth=function(e,t){var n=g.getElementsByClassName("wptb-highlighted");if(0<n.length){for(var a=0;a<n.length;a++){var r=n[a].dataset.xIndex;r&&!function o(n,a){for(var r=g.rows,l=!1,i=[],s=0;s<r.length;s++)for(var c=r[s].children,d=0;d<c.length;d++){var p=c[d];if(p.dataset.xIndex==n){if(e)p.colSpan==a?(p.style.width=e+"px",p.removeAttribute("data-wptb-fixed-width"),l=!0):(p.style.width=null,p.dataset.wptbFixedWidth=e,s!=r.length-1||l||o(n,a+1));else if(t)p.style.width=null,p.removeAttribute("data-wptb-fixed-width");else if(p.dataset.wptbFixedWidth)p.colSpan==a&&(p.style.width=p.dataset.wptbFixedWidth+"px",p.removeAttribute("data-wptb-fixed-width"));else if(p.style.width){for(var u=0;u<i.length;u++)i[u].style.width=p.style.width;i=[]}else i.push(p);break}}}(r,1)}g.tdDefaultWidth(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g)}},g.tdDefaultWidth=function(){for(var e=g.rows,t=0,n=0,a=0,r=document.getElementsByClassName("wptb-table-setup")[0],o=r.offsetWidth,l=[],i=[],s=0,c=0,d="",p=window.getComputedStyle(g,null),u=p.getPropertyValue("border-left-width"),p=p.getPropertyValue("border-right-width"),m=parseFloat(u,10)+parseFloat(p,10),b=0;b<e.length;b++)for(var y=e[b].children,f=0;f<y.length;f++){var w,h,v,S=y[f];l[parseFloat(S.dataset.xIndex)]||i[parseFloat(S.dataset.xIndex)]?i[parseFloat(S.dataset.xIndex)]?S.dataset.wptbFixedWidth||(S.dataset.wptbCssTdAutoWidth=!0):l[parseFloat(S.dataset.xIndex)]&&S.removeAttribute("data-wptb-css-td-auto-width"):(S.style.width?(l[parseFloat(S.dataset.xIndex)]=parseFloat(S.style.width),S.removeAttribute("data-wptb-css-td-auto-width")):S.dataset.wptbFixedWidth||(i[parseFloat(S.dataset.xIndex)]=g.dataset.wptbTdWidthAuto?parseFloat(g.dataset.wptbTdWidthAuto,10):100,S.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(S,null)&&(w=(v=window.getComputedStyle(S,null)).getPropertyValue("padding-left"),h=v.getPropertyValue("padding-right"),s=parseFloat(w,10)+parseFloat(h,10),h=v.getPropertyValue("border-left-width"),v=v.getPropertyValue("border-right-width"),c=parseFloat(h,10)+parseFloat(v,10),c/=2,l[parseFloat(S.dataset.xIndex)]?(l[parseFloat(S.dataset.xIndex)]+=s,l[parseFloat(S.dataset.xIndex)]+=c,0==f&&m/2<=parseFloat(h,10)?l[parseFloat(S.dataset.xIndex)]+=parseFloat(h,10)/2:0==f&&m/2>parseFloat(h,10)&&(l[parseFloat(S.dataset.xIndex)]+=m/2-parseFloat(v,10)/2),f==y.length-1&&m/2<=parseFloat(v,10)?l[parseFloat(S.dataset.xIndex)]+=parseFloat(v,10)/2:f==y.length-1&&m/2>parseFloat(v,10)&&(l[parseFloat(S.dataset.xIndex)]+=m/2-parseFloat(v,10)/2)):i[parseFloat(S.dataset.xIndex)]&&(i[parseFloat(S.dataset.xIndex)]+=s,i[parseFloat(S.dataset.xIndex)]+=c,0==f&&m/2<=parseFloat(h,10)?i[parseFloat(S.dataset.xIndex)]+=parseFloat(h,10)/2:0==f&&m/2>parseFloat(h,10)&&(i[parseFloat(S.dataset.xIndex)]+=m/2-parseFloat(h,10)/2),f==y.length-1&&m/2<=parseFloat(v,10)?i[parseFloat(S.dataset.xIndex)]+=parseFloat(v,10)/2:f==y.length-1&&m/2>parseFloat(v,10)&&(i[parseFloat(S.dataset.xIndex)]+=m/2-parseFloat(h,10)/2))))}for(var T=0;T<l.length;T++)l[T]&&(n+=l[T]);for(var _=0,C=0;C<i.length;C++)i[C]&&(a+=i[C],_++);t=n+a,g.dataset.wptbTableTdsSumMaxWidth=t,_?(g.dataset.wptbCellsWidthAutoCount=_,g.mergingellsHorizontally?g.dataset.wptbFixedWidthSize=n:g.removeAttribute("data-wptb-fixed-width-size")):(g.removeAttribute("data-wptb-fixed-width-size"),g.removeAttribute("data-wptb-cells-width-auto-count"));var A,p=!1;o>t?_?(g.style.minWidth="100%",g.mergingellsHorizontally?(g.style.width="auto",A=(A=(o-n)/_)-s-c,p=!0):g.style.width="100%"):(g.style.width="auto",g.style.minWidth=null,g.style.maxWidth=null):(g.style.maxWidth=null,g.style.minWidth=t+"px",g.style.width="auto",A=g.dataset.wptbTdWidthAuto||"100",p=!0),o=document.head,!o||(t=o.querySelector('style[data-wptb-td-auto-width="true"]'))&&o.removeChild(t),p&&((d=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),d.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+A+"px}",o&&o.appendChild(d)),g.dataset.wptbTableAlignment?(d=g.dataset.wptbTableAlignment,r.offsetWidth<g.offsetWidth?g.style["float"]=null:g.style["float"]="center"==d?null:d,r.style["float"]="center"==d?null:d,A&&g.dataset.wptbTableContainerMaxWidth&&g.offsetWidth<g.dataset.wptbTableContainerMaxWidth&&(g.style.width="100%")):g.style["float"]=null},g.addRowHeight=function(e,t){var n=g.getElementsByClassName("wptb-highlighted");if(0<n.length){for(var a=0;a<n.length;a++){var r=n[a].dataset.yIndex;r&&!function o(n,a){for(var r=g.rows,l=!1,i=[],s=0;s<r.length;s++)for(var c=r[s].children,d=0;d<c.length;d++){var p=c[d];if(p.dataset.yIndex==n)if(e)p.rowSpan!=a?(p.style.height=null,p.dataset.wptbFixedHeight=e,d!=c.length-1||l||o(n,a+1)):(p.style.height=e+"px",p.removeAttribute("data-wptb-fixed-heidht"),l=!0);else if(t)p.style.height=null,p.removeAttribute("data-wptb-fixed-heidht");else if(p.dataset.wptbFixedHeight)(p.rowSpan=a)&&(p.style.height=p.dataset.wptbFixedHeight+"px",p.removeAttribute("data-wptb-fixed-width"));else if(p.style.height){for(var u=0;u<i.length;u++)i[u].style.height=p.style.height;i=[]}else i.push(p)}}(r,1)}WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g)}},g.reconstraction=function(){var e=g.getElementsByTagName("td");g.mergingellsHorizontally=!1,g.mergingCellsVertically=!1,g.dataset.reconstraction=1;for(var t=0,n=0;n<e.length&&(1<e[n].colSpan&&(g.dataset.reconstraction=0,g.mergingellsHorizontally=!0,t++),1<e[n].rowSpan&&(g.dataset.reconstraction=0,g.mergingCellsVertically=!0,t++),2!=t);n++);},g.addColumnEnd=function(){var e,t,n,r=document.getElementsByClassName("wptb-preview-table");(t=0<r.length?r[0].querySelector("td"):t)&&(n=t.getAttribute("style"));for(var l=0;l<g.rows.length;l++)e=new WPTB_Cell(a),n&&(e.getDOMElement().setAttribute("style",n),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),g.rows[l].appendChild(e.getDOMElement()),array[l].push(0);c++,g.recalculateIndexes(),g.tdDefaultWidth(),g.addRowHeight(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()},g.addColumnStart=function(){var e,t,n,r,l=document.getElementsByClassName("wptb-preview-table");(n=0<l.length?l[0].querySelector("td"):n)&&(r=n.getAttribute("style"));for(var i=0;i<g.rows.length;i++)e=new WPTB_Cell(a),r&&(e.getDOMElement().setAttribute("style",r),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null,e.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor")),(t=g.rows[i].getElementsByTagName("td")[0])?g.rows[i].insertBefore(e.getDOMElement(),t):g.rows[i].appendChild(e.getDOMElement()),array[i].push(0);c++,g.recalculateIndexes(),g.tdDefaultWidth(),g.addRowHeight(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()},g.addColumnAfter=function(e){function t(e){var t=new WPTB_Cell(a);return e&&(t.getDOMElement().setAttribute("style",e),t.getDOMElement().style.width=null,t.getDOMElement().style.height=null),t.getDOMElement().style.borderColor=WPTB_TableSettingsData.getTableSetting("borderColor"),t}var n,l,i,s=g.rows;if(null!=e&&"number"==typeof e?(i=e,n=document.querySelector('[data-x-index="'+i+'"]')):(n=document.querySelector(".wptb-highlighted"),i=u(n)[1]),n)if(l=n.getAttribute("style"),c-i-n.colSpan+1==1)g.addColumnEnd();else{for(var d=0;d<s.length;d++)for(var p=s[d].children,m=0;m<p.length;m++)if(parseInt(p[m].dataset.xIndex)<=i){if(parseInt(p[m].dataset.xIndex)+p[m].colSpan==i+n.colSpan){var b=t(l),y=p[m].nextSibling;y?s[d].insertBefore(b.getDOMElement(),y):s[d].appendChild(b.getDOMElement());break}if(parseInt(p[m].dataset.xIndex)+p[m].colSpan>i+n.colSpan){p[m].colSpan++,1<p[m].rowSpan&&(d+=p[m].rowSpan-1);break}}else if(parseInt(p[m].dataset.xIndex)>i){b=t(l),s[d].insertBefore(b.getDOMElement(),p[m]);break}for(var f=0;f<array.length;f++)array[f].push(0);c++,r(array),g.recalculateIndexes(),g.addColumnWidth(),g.addRowHeight(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()}},g.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),e=u(e)[1];0===e?g.addColumnStart():g.addColumnAfter(e-1)},g.addRowToTheEnd=function(){var e,t=g.insertRow(-1),n=document.getElementsByClassName("wptb-preview-table");if(t.classList.add("wptb-row"),0<n.length){for(var n=n[0],l=0;c>l;l++){var i=new WPTB_Cell(a),s=n.querySelector('[data-x-index="'+l+'"]');s&&(s=s.getAttribute("style"),i.getDOMElement().setAttribute("style",s),i.getDOMElement().style.height=null),t.appendChild(i.getDOMElement())}e=Array.from(array[0]),array.push(e),r(array),g.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(g),g.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()}},g.addRowToTheStart=function(){var e,t=g.insertRow(0),n=document.getElementsByClassName("wptb-preview-table");if(t.classList.add("wptb-row"),0<n.length){for(var n=n[0],l=0;c>l;l++){var i=new WPTB_Cell(a),s=n.querySelector('[data-x-index="'+l+'"]');s&&(s=s.getAttribute("style"),i.getDOMElement().setAttribute("style",s),i.getDOMElement().style.height=null),t.appendChild(i.getDOMElement())}e=Array.from(array[0]),array.push(e),r(array),g.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(g),g.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()}},g.addRowBefore=function(){for(var e,t=document.querySelector(".wptb-highlighted"),n=t.getAttribute("style"),a=u(t)[0],r=(a=0===a?-1:a)-1;r>=0;r--){var o=g.rows[r].children,l=o.length;if(l>0)for(var i=0;l>i;i++)if(1==o[i].rowSpan){a=r,e=!0;break}if(e)break}-1===a?g.addRowToTheStart():g.addRowAfter(a,n)},g.addRowAfter=function(e,t){var n,l=null!=e&&"number"==typeof e||null!=t?e:(t=(n=document.querySelector(".wptb-highlighted")).getAttribute("style"),(e=u(n)[0])+n.rowSpan-1),i=0;if(l<g.rows.length-1){for(var s=0;l>=s;s++){var c=g.rows[s].children,d=c.length;if(d>0)for(var p=0;d>p;p++)l<c[p].rowSpan-1+s&&c[p].rowSpan++}var m=g.rows[l+1].children,y=m.length;if(y>0)for(var f=0;y>f;f++)i+=m[f].colSpan}else i=array[0].length;var w=g.insertRow(l+1);for(w.classList.add("wptb-row"),b=0;i>b;b++){var h=new WPTB_Cell(a),v=g.querySelector('[data-x-index="'+b+'"]');v&&(v=v.getAttribute("style"),h.getDOMElement().setAttribute("style",v),h.getDOMElement().style.height=null),w.appendChild(h.getDOMElement())}n=Array.from(array[0]),array.push(n),r(array),g.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(g),g.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after"),(new WPTB_TableStateSaveManager).tableStateSet()},g.isSquare=function(e){for(var t,n,a=-1,r=-1,o=-1,l=-1,i=0,s=0;s<e.length;s++)for(var c=0;c<e[s].length;c++)1==e[s][c]&&((r>c||-1==r)&&(r=c),(a>s||-1==a)&&(a=s));for(s=e.length-1;s>-1;s--)for(c=e[s].length-1;c>-1;c--)1==e[s][c]&&(c>l&&(l=c),s>o&&(o=s));for(s=a;o>s;s++)for(c=r;l>c;c++)if(0==e[s][c]||null==e[s][c])return!1;for(s=0;s<e.length;s++)for(c=0;c<e[s].length;c++)1==e[s][c]&&i++;return(t=o-a+1)*(n=l-r+1)===i&&[t,n]},g.mergeCells=function(){for(var e=g.isSquare(array),t=e[0],e=e[1],n=document.querySelector(".wptb-highlighted"),a=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),r=[],l=0;l<a.length;l++){
    var i=a[l].getElementsByClassName("wptb-ph-element");if(0<i.length)for(var s=i.length,c=0;s>c;c++)r.push(i[c]);a[l].parentNode.removeChild(a[l])}if(0<r.length)for(var d=0;d<r.length;d++)n.appendChild(r[d]);n.colSpan=e,n.rowSpan=t,g.recalculateIndexes(),g.reconstraction(),e=n.style.width,t=n.dataset.wptbFixedWidth,e?g.addColumnWidth(parseFloat(e,10)):t?g.addColumnWidth():g.addColumnWidth(!1,!0),e=n.style.height,t=n.dataset.wptbFixedHeight,e?g.addRowHeight(parseFloat(e,10)):t?g.addRowHeight():g.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()},g.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,n=e.colSpan,r=e.getAttribute("style"),l=u(e)[0],i=g.rows[l],s=e.dataset.xIndex;e.rowSpan=1;for(var c=e.colSpan=1;n>c;c++){var d=new WPTB_Cell(a);d.getDOMElement().setAttribute("style",r),d.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?i.insertBefore(d.getDOMElement(),e.nextSibling):i.appendChild(d.getDOMElement())}if(t>1)for(var p=1;t>p;p++){var m=void 0,b=g.rows[l+p],y=b.children,f=y.length;if(f>0)for(var w=0;f>w;w++)if(Number(y[w].dataset.xIndex)>Number(s)){m=y[w];break}for(var h=0;n>h;h++){var v=new WPTB_Cell(a);v.getDOMElement().setAttribute("style",r),null!=m?b.insertBefore(v.getDOMElement(),m):b.appendChild(v.getDOMElement())}}g.recalculateIndexes(),g.reconstraction(),g.addColumnWidth(),g.addRowHeight(),WPTB_Helper.dataTitleColumnSet(g),o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()},g.findRowspannedCells=function(e){var t=[];if(actualPoints=function(e){for(var t=g.rows[e].getElementsByTagName("td"),n=0,a=0;a<t.length;a++)n+=t[a].colSpan;return n}(e),actualPoints===c)return[];for(var n=c-actualPoints,a=e-1;a>=0&&n;a--)for(var r=g.rows[a].getElementsByTagName("td"),a=0;a<r.length;a++)1<r[a].rowSpan&&(t.push(r[a]),n-=r[a].colSpan);return t},g.addLackingCells=function(){for(var e=[],t=0;t<g.rows.length;t++)e.push(0);for(t=0;t<g.rows.length;t++)for(var n=g.rows[t].getElementsByTagName("td"),r=0;r<n.length;r++)if(1<n[r].rowSpan)for(var o=1;o<n[r].rowSpan;o++)e[t+o]++;for(t=0;t<g.rows.length;t++){for(var n=g.rows[t].getElementsByTagName("td"),l=0,r=0;r<n.length;r++)l+=n[r].colSpan;for(l+=e[t],difference=c-l,r=0;r<difference;r++){var i=new WPTB_Cell(a);g.rows[t].appendChild(i.getDOMElement())}}},g.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),n=e.rowSpan,l=u(e)[0];null==n&&(n=1);for(var i=0;n>i;i++){var s=g.rows[l].children,c=g.rows[l+1],d=void 0,m=[];if(null!=c){for(var b=(d=c.children).length,y=0;y<s.length;y++)if(1<s[y].rowSpan){var f=new WPTB_Cell(a);f.getDOMElement().setAttribute("style",t),f.getDOMElement().colSpan=s[y].colSpan,f.getDOMElement().rowSpan=s[y].rowSpan-1;for(var w=void 0,h=0;b>h;h++)if(Number(d[h].dataset.xIndex)>Number(s[y].dataset.xIndex)){w=d[h];break}w?m.push([f,w]):m.push([f])}if(0<m.length)for(var v=0;v<m.length;v++)null!=m[v][1]?c.insertBefore(m[v][0].getDOMElement(),m[v][1]):c.appendChild(m[v][0].getDOMElement())}var S,T=g.rows;if(0<T.length)for(var _=0;l>_;_++){var C=T[_].children;if(0<C.length)for(var A=0;A<C.length;A++)C[A].rowSpan-1>=l-_&&C[A].rowSpan--}S=Array.from(array[0]),array.pop(S),r(array),g.getElementsByTagName("tbody")[0].removeChild(g.rows[l]),0==g.rows.length?(WPTB_Helper.toggleTableEditMode(),p.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(S=document.getElementsByClassName("wptb-save-btn")).length&&((S=S[0]).classList.add("wptb-save-disabled"),S.classList.remove("active"))):(g.recalculateIndexes(),WPTB_Helper.tableRowsColorsReinstall(g),WPTB_Helper.dataTitleColumnSet(g),g.reconstraction())}o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()},g.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,n=e.colSpan,a=0;n>a;a++){for(var r=0;r<g.rows.length;r++){var l=g.rows[r].children,i=l.length;if(i>0)for(var s=i-1;s>=0;s--){if(Number(l[s].dataset.xIndex)==Number(t)){1<l[s].colSpan?l[s].colSpan--:g.rows[r].removeChild(l[s]);break}if(Number(l[s].dataset.xIndex)<Number(t)&&Number(l[s].dataset.xIndex)+Number(l[s].colSpan-1)>=t){1<l[s].colSpan&&l[s].colSpan--;break}}}for(var d,u=0;u<g.rows.length;u++)null!=array[u]&&array[u].pop();c--,0==g.querySelectorAll("td").length?(WPTB_Helper.toggleTableEditMode(),p.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table",0<(d=document.getElementsByClassName("wptb-save-btn")).length&&((d=d[0]).classList.add("wptb-save-disabled"),d.classList.remove("active"))):(g.recalculateIndexes(),g.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(g),g.reconstraction())}o(),WPTB_Helper.wptbDocumentEventGenerate("wp-table-builder/table-changed/after",g),(new WPTB_TableStateSaveManager).tableStateSet()},array=l(),o(),r(array),p.appendChild(g),g.recalculateIndexes(!0),g.reconstraction(),g.tdDefaultWidth(),p.onresize=function(){g.tdDefaultWidth()},WPTB_LeftPanel(),WPTB_Helper.wptbDocumentEventGenerate("wptb:table:generated",document),WPTB_Helper.elementStartScript(g,"table_setting"),WPTB_Helper.elementOptionsSet("table_setting",g)},WPTB_TableSettingsData={borderColor:"",setTableSetting:function(e,t){this[e]=t},getTableSetting:function(e){return this[e]}},WPTB_TableStateSaveManager=function(){this.tableStateSet=function(e){if(!(e&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var t=document.getElementsByClassName("wptb-table-setup"),n="";0<t.length?n=(t=t[0]).querySelector(".wptb-preview-table"):t="",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));var a="";if(t){for(var r=(a=t.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),o=0;o<r.length;o++)r[o].classList.remove("wptb-highlighted");for(var l=a.getElementsByClassName("wptb-directlyhovered"),i=0;i<l.length;i++)l[i].classList.remove("wptb-directlyhovered");var s=a.querySelectorAll(".mce-content-body");if(0<s.length)for(var c=0;c<s.length;c++)s[c].classList.remove("mce-content-body");var d=a.querySelectorAll("[data-mce-style]");if(0<d.length)for(var p=0;p<d.length;p++)d[p].removeAttribute("data-mce-style");var u=a.querySelectorAll("[id^=mce_]");if(0<u.length)for(var m=0;m<u.length;m++)u[m].removeAttribute("id")}e="",t=document.head,!t||(b=t.querySelector('style[data-wptb-td-auto-width="true"]'))&&(e=b.innerHTML);var t="",b=document.getElementById("wptb-setup-name");b&&(t=b.value),window.wptbTableStateSaving.push([a,e,t]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,0<window.wptbTableStateSaving.length-1&&0<(g=document.getElementsByClassName("wptb-undo")).length&&(g=g[0]).classList.remove("wptb-undoredo-disabled");var g=document.getElementsByClassName("wptb-redo");0<g.length&&(g=g[0]).classList.add("wptb-undoredo-disabled"),g=document.getElementsByClassName("wptb-save-btn"),0<g.length&&(!(g=g[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==g.dataset.wptbTableStateNumberSave||!n?(g.classList.add("wptb-save-disabled"),g.classList.remove("active")):(g.classList.remove("wptb-save-disabled"),g.classList.add("active")))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&0<window.wptbTableStateSaving.length){if("undo"==e){if(!(0<window.wptbTableStateNumberShow))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length))return!1;window.wptbTableStateNumberShow++}var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0],0==window.wptbTableStateNumberShow?t&&t.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&t&&t.classList.remove("wptb-undoredo-disabled")),e=document.getElementsByClassName("wptb-redo"),0<e.length&&(e=e[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?e&&e.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&e&&e.classList.remove("wptb-undoredo-disabled")),t=document.getElementsByClassName("wptb-save-btn"),0<t.length&&(!(t=t[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==t.dataset.wptbTableStateNumberSave?(t.classList.add("wptb-save-disabled"),t.classList.remove("active")):(t.classList.add("active"),t.classList.remove("wptb-save-disabled")));var n,e=document.getElementsByClassName("wptb-table-setup");0<e.length&&(e=e[0],window.wptbTableStateSaving[window.wptbTableStateNumberShow]&&(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML"in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(e.outerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML),(e=document.querySelector(".wptb-table-setup"))&&0==e.children.length&&(t.classList.add("wptb-save-disabled"),t.classList.remove("active")),(e=document.head)&&((t=e.querySelector('style[data-wptb-td-auto-width="true"]'))&&e.removeChild(t),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]&&((n=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),n.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],e.appendChild(n))),n=document.getElementById("wptb-setup-name"),void 0!==window.wptbTableStateSaving[window.wptbTableStateNumberShow][2]&&n&&(n.value=window.wptbTableStateSaving[window.wptbTableStateNumberShow][2])),0<(n=document.getElementsByTagName("body")).length&&(n=n[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel(),(n=document.getElementById("wptb-left-scroll-panel-cell-settings"))&&n.classList.remove("visible"))}},this.tableStateClear=function(){delete window.wptbTableStateSaving,delete window.wptbTableStateNumberShow;var e=document.getElementsByClassName("wptb-save-btn");0<e.length&&(e=e[0]).removeAttribute("data-wptb-table-state-number-save"),e=document.getElementsByClassName("wptb-undo"),0<e.length&&(e=e[0]).classList.add("wptb-undoredo-disabled"),e=document.getElementsByClassName("wptb-redo"),0<e.length&&(e=e[0]).classList.add("wptb-undoredo-disabled")}};!function(){var e,t;wptb_admin_object.upsells&&!wptb_admin_object.upsells.pro&&(e=document.querySelector('.wptb-panel-toggle-group[id="pro"] .wptb-panel-toggle-target'),(t=document.createElement("div")).classList.add("wptb-upsells-pro-overlay"),t.innerHTML=wptb_admin_object.upsells.elements.leftPanel,e.style.position="relative",e.appendChild(t))}();var WPTB_innerElementSet=function t(e){e.ondragenter=function(t){-1==t.dataTransfer.types.indexOf("wptbelement")&&-1==t.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,t),e.classList.add("wptb-ondragenter"))},e.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},e.ondragleave=function(e){WPTB_DropHandle(this,e,!0)},e.ondrop=function(e){var n,a,r,o;if(this.classList.remove("wptb-ondragenter"),e.preventDefault(),e.stopPropagation(),e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node")){if(0<document.getElementsByClassName("wptb-drop-handle").length&&(a=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(r=document.getElementsByClassName("wptb-drop-border-marker")[0]),n=e.dataTransfer.getData("wptbElement")?(n=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():(o=e.dataTransfer.getData("node"),document.getElementsByClassName(o)[0]),"td_relative"===WPTB_Helper.getDragRelativeType())WPTB_DropHandle(this,e,!0),WPTB_Helper.getParentOfType("td",e.target).appendChild(n),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n);else{if("block"!=a.style.display)return;"Drop Here"==a.dataset.text?((l=a.getDOMParentElement()).appendChild(n),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n)):(l=(o=a.getDOMParentElement()).parentNode,"Above Element"==a.dataset.text?(l.insertBefore(n,o),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n)):"Below Element"==a.dataset.text&&(o=o.nextSibling,l.insertBefore(n,o),WPTB_Helper.wptbDocumentEventGenerate("element:mounted:dom",n)));var l=l.parentNode;!WPTB_Helper.rowIsTop(l)||(l=WPTB_Helper.findAncestor(l,"wptb-preview-table")).classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(l),n.className.match(/wptb-element-(.+)-(\d+)/i)[1],e.dataTransfer.getData("wptbElement")}return a&&(a.style.display="none",r.style.display="none"),t(n),n.classList.contains("wptb-image-container")&&!n.classList.contains("wptb-moving-mode")||(n.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet()),!0}},e.onmouseover=function(t){e.classList.remove("wptb-ondragenter")}},applyGenericItemSettings=function(e,t){var n,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e.getDOMElement();if(r.classList.contains("wptb-ph-element")){if(null==t||1==a){if(n=WPTB_ElementIdProvider.getNewId(e.kind),a)for(var o,l,i=_toConsumableArray(r.attributes),s=0;s<i.length;s++)i[s]&&"object"===_typeof(i[s])&&i[s].nodeName&&(o=new RegExp("data-wptb-el-"+e.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),(l=i[s].nodeName.match(o))&&Array.isArray(l)&&(o=i[s].nodeName.replace(e.kind+"-"+l[1],e.kind+"-"+n),l=i[s].nodeValue,r.removeAttribute(i[s].nodeName),r.setAttribute(o,l)))}else t&&!a&&(n=(c=t.split("-"))[c.length-1]);var c=r.className.match(/wptb-element-(.+)-(\d+)/i);c&&r.classList.remove(c[0]),r.classList.contains("wptb-ph-element")||r.classList.add("wptb-ph-element"),r.classList.contains("wptb-element-"+e.kind+"-"+n)||r.classList.add("wptb-element-"+e.kind+"-"+n),WPTB_Helper.elementStartScript(e.getDOMElement()),new WPTB_ElementOptions(e,n,t),document.counter.increment(e.kind)}r.onmouseenter=function(e){var t;e.target.classList.contains("wptb-text-container")&&(1!==r.children.length||1===(t=r.children[0].lastChild).children.length&&"<br>"===t.innerHTML&&(t.innerHTML="")),e.target.classList.contains("wptb-moving-mode")||((e=new WPTB_ActionsField).addActionField(1,r),e.setParameters(r),r.classList.remove("wptb-ondragenter"))},r.onmouseleave=function(e){(new WPTB_ActionsField).leaveFromField(e,r)}};!function(e){(self||global).WPTB_IconManager=e()}(function(){return(self||global).wptb_admin_object?new function(e){function t(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=document.createElement("div");return t&&(t=Array.isArray(t)?t:[t]).map(function(e){a.classList.add(e)}),a.innerHTML=e,n?a.outerHTML:a}if(!e)throw new Error("no icon list is defined for WPTB_IconManager instance");var n=e,a={};this.getIconList=function(){return n},this.getIcon=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(function(l,i){var s=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return a[e]?t(a[e],n,r):null}(e,r,o);return s?l(s):n[e]?fetch(n[e]).then(function(t){if(t.ok)return t.text();throw new Error("an error occurred while fetching icon [".concat(e,"]"))}).then(function(n){if(n.error)throw new Error("an error occurred while fetching icon [".concat(e,"]"));var i;return i=n,a[e]=i,l(t(n,r,o))})["catch"](function(e){return i(new Error(e))}):i(new Error("no icon found with the given name of [".concat(e,"]")))})},this.getIconUrl=function(e){var t=null;return t=n[e]?n[e]:t}}(wptb_admin_object.iconManager):null});