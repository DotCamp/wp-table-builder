{"version":3,"sources":["wptb-builder.js"],"names":["wptbElement","window","wptb_num","Array","ElementCounters","priv","increment","key","nextIndex","undefined","applyGenericItemSettings","element","node","getDOMElement","index","document","counter","kind","onmouseenter","event","classList","add","btnDelete","createElement","btnCopy","btnMove","actions","previous","i","onclick","act","parentNode","el","removeChild","appendChild","onmouseleave","formerActions","getElementsByClassName","par","remove","prop","querySelector","cloneNode","getElementById","infArr","className","match","optionsClass","getElementsByTagName","style","display","children","childNodes","length","WPTB_Button","text","DOMElement","elButton2","el_B","innerHTML","WPTB_Text","elText2","elP","WPTB_ListItem","divdot","divcontent","libullet","onkeyup","listItemKeyListener","showListItemSettings","hideListItemSettings","WPTB_List","innerElements","el_L","item","WPTB_Cell","newElementProxy","newImage","relativeActions","cells","_wptbManagementModeActive","contains","console","log","dataset","activeCell","ondragenter","div","ondragover","e","preventDefault","ondragleave","ondrop","dataTransfer","getData","onmousedown","onmouseover","onmouseup","setCoords","y","x","yIndex","xIndex","getCoords","coords","appendElement","WPTB_LeftPanel","table","wptbElementButtons","ondragstart","setData","addRowToTheEnd","addRowToTheStart","addRowBefore","addRowAfter","addColumnToTheEnd","addColumnToTheStart","addColumnBefore","addColumnAfter","WPTB_Table","columns","rows","settings","wptbTableSetup","row","cell","insertRow","j","recalculateIndexes","trs","tds","addColumn","pos","referenceTd","newTd","_this","insertBefore","buttons","nextSibling","evt","addRow","referenceRow","params","tbody","active","WPTB_Initializer","MIN_COLUMNS","MIN_ROWS","MAX_COLUMNS","MAX_ROWS","tableGenerator","body","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","value","WPTB_Settings","elems","effectAllowed","target","getAttribute","WPTB_Builder","initializer","addEventListener"],"mappings":"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","file":"admin.js","sourcesContent":["var wptbElement;\r\n\r\n//numbers of elements that have been added\r\nwindow.wptb_num = new Array();\r\nwindow.wptb_num[\"text\"] = 0;\r\nwindow.wptb_num[\"image\"] = 0;\r\nwindow.wptb_num[\"list\"] = 0;\r\nwindow.wptb_num[\"button\"] = 0;\r\n\r\nElementCounters = function(){\r\n\tvar priv = [];\r\n\tpriv['text'] = 0;\r\n\tpriv['image'] = 0;\r\n\tpriv['list'] = 0;\r\n\tpriv['button'] = 0; \r\n\r\n\tthis.increment = function(key){\r\n\r\n\t\tif(! (key in priv) ){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tpriv[key]++;\r\n\t}\r\n\tthis.nextIndex = function(key){\r\n\r\n\t\tif(! (key in priv) ){\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\treturn priv[key] + 1;\r\n\t}\r\n\treturn this;\r\n};\r\n\r\napplyGenericItemSettings = function(element){\r\n\tvar node = element.getDOMElement(),\r\n\t\tindex = document.counter.nextIndex(element.kind);\r\n\r\n\tnode.onmouseenter = function(event){\r\n        this.classList.add('wptb-directlyhovered');\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            btnMove = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\r\n        btnDelete.onclick = function (event) {\r\n\t        var act = this.parentNode.parentNode,\r\n\t            el = act.parentNode;\r\n\t        el.removeChild(act); \r\n\t    };\r\n        //btnCopy.onclick = window.copyButton;\r\n        //btnMove.onmousedown = window.putItemDragStart;\r\n        actions.appendChild(btnMove);\r\n        actions.appendChild(btnCopy);\r\n        actions.appendChild(btnDelete);\r\n        this.appendChild(actions);\r\n\t};\r\n\r\n\tnode.onmouseleave = function(event){\r\n\t\tvar formerActions = this.getElementsByClassName('wptb-actions');\r\n        if (formerActions && formerActions[0]) {\r\n            let par = formerActions[0].parentNode;\r\n            par.removeChild(formerActions[0]);\r\n        }\r\n        this.classList.remove('wptb-directlyhovered');\r\n\t};\r\n\r\n\tnode.classList.add('wptb-ph-element', 'wptb-element-'+element.kind+'-' +\r\n           index);\r\n\r\n\tprop = document.querySelector(\".wptb-\" + element.kind + \"-options-prototype\").cloneNode(true);\r\n    prop.classList.remove(\"wptb-\" + element.kind + \"-options-prototype\"); // remove prototype from the class\r\n    prop.classList.add('wptb-options-' + element.kind + \"-\" +  index);\r\n    document.getElementById(\"element-options-group\").appendChild(prop);\r\n    switch (wptbElement) {\r\n            case 'text':\r\n                //listener_to_element(prop.find('.wptb-color-picker'));\r\n                //prop.getElementsByClassName('wptb-color-picker')[0].wpColorPicker();\r\n                break;\r\n    }\r\n\r\n    node.onclick = function(){\r\n        var infArr = this.className.match(/wptb-element-((.+-)\\d+)/i),\r\n\t\t\toptionsClass = '.wptb-' + infArr[2] + 'options' +\r\n                        '.wptb-options-' + infArr[1];\r\n\r\n    \tdocument.getElementById('add-elements').getElementsByTagName('a')[0].classList.remove('active');\r\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.add('active');\r\n\t\t\r\n\t\tdocument.getElementsByClassName('wptb-elements-container')[0].style.display = 'none';\r\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'none';\r\n        document.getElementById(\"element-options-group\").style.display = 'block';\r\n\r\n        var children = document.getElementById(\"element-options-group\").childNodes;\r\n        for (var i = 0; i < children.length; i++) {\r\n            if (children[i].style)\r\n                children[i].style.display = 'none';\r\n        }\r\n\r\n        document.querySelector(optionsClass).style.display = 'block';\r\n    };\r\n\r\n\tdocument.counter.increment(element.kind);\r\n};\r\n\r\nWPTB_Button = function(text){\r\n        var DOMElement = document.createElement('div'),\r\n        \telButton2 = document.createElement('div'),\r\n        \tel_B = document.createElement('p');\r\n\r\n\t\tthis.kind = 'button';\r\n\r\n        DOMElement.classList.add('wptb-button-container');\r\n        elButton2.classList.add('wptb-button-wrapper');\r\n        el_B.classList.add('wptb-button');\r\n        el_B.classList.add('editable');\r\n        el_B.innerHTML = text != undefined ? text : 'Button Text';\r\n        elButton2.appendChild(el_B);\r\n        DOMElement.appendChild(elButton2);\r\n        /*window.addElementOptions('button', elButton);\r\n        tinyMCE.init({\r\n            target: el_B,\r\n            inline: true,\r\n            plugins: \"link\",\r\n            dialog_type: \"modal\",\r\n            theme: 'modern',\r\n            menubar: false,\r\n            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n            toolbar: 'bold italic strikethrough',\r\n            setup: function (ed) {\r\n                ed.on(\"init\",\r\n                    function (ed) {\r\n                        tinyMCE.execCommand('mceRepaint');\r\n                    }\r\n                );\r\n            },\r\n            init_instance_callback: function (editor) {\r\n                editor.on('change', function (e) {\r\n                    // check if it becomes empty because if there's no value it's hard to edit the editor in button element\r\n                    if (editor.getContent() == \"\") {\r\n                        editor.setContent(\"<p class='wptb-button'>Button Text</p>\");\r\n                    }\r\n                });\r\n                editor.on('KeyDown', function (e) {\r\n                    var range = editor.selection.getRng();\r\n                    var KeyID = e.keyCode;\r\n                    if (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\r\n                        e.preventDefault();\r\n                        editor.setContent(\"<p class='wptb-button'></p>\");\r\n                    }\r\n                });\r\n            }\r\n        });*/\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n\r\n        applyGenericItemSettings(this);\r\n\r\n        return this;\r\n}\r\n\r\nWPTB_Text = function(text){\r\n        var DOMElement = document.createElement('div'),\r\n        \telText2 = document.createElement('div'),\r\n        \telP = document.createElement('p');\r\n\r\n\t\tthis.kind = 'text';\r\n\r\n        elText2.classList.add('editable');\r\n        elP.innerHTML = text != undefined ? text : 'Text';\r\n        elText2.appendChild(elP);\r\n        DOMElement.appendChild(elText2);\r\n        //window.addElementOptions('text', elText);\r\n        //window.tinyFastCall(elText.childNodes[0]);\r\n        //$(elText).click();\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n        applyGenericItemSettings(this);\r\n\r\n        return this;\r\n};\r\n\r\nWPTB_ListItem = function(text){\r\n\r\n        if (text == undefined) text = 'New List Item';\r\n        var DOMElement = document.createElement('article'),\r\n        \tdivdot = document.createElement('div'),\r\n            divcontent = document.createElement('div'),\r\n            libullet = document.createElement('li');\r\n        divdot.classList.add('wptb-list-item-style-dot');\r\n        divcontent.classList.add('wptb-list-item-content');\r\n        libullet.classList.add('wptb-bullet');\r\n        DOMElement.appendChild(divdot);\r\n        DOMElement.appendChild(divcontent);\r\n        divdot.appendChild(libullet);\r\n        divcontent.innerHTML = text;\r\n        //tinyFastCall(divcontent);\r\n        divcontent.onkeyup = window.listItemKeyListener;\r\n        divcontent.parentNode.onmouseenter = window.showListItemSettings;\r\n        divcontent.parentNode.onmouseleave = window.hideListItemSettings;\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n\r\n        return this;\r\n\r\n};\r\n\r\nWPTB_List = function(innerElements){\r\n    \tvar el_L = document.createElement('ul'), item,\r\n\t\t\tDOMElement = document.createElement('div');\r\n\r\n\t\tthis.kind = 'list';\r\n\r\n        if (!innerElements)\r\n            for (var i = 0; i < 3; i++) {\r\n            \titem = new WPTB_ListItem('List Item ' + (i + 1));\r\n                el_L.appendChild(item.getDOMElement());\r\n            }\r\n        else {\r\n            for (var i = 0; i < innerElements.length; i++) {\r\n            \titem = new WPTB_ListItem(innerElements[i]);\r\n                el_L.appendChild(item.getDOMElement());\r\n            }\r\n        } \r\n        DOMElement.appendChild(el_L);\r\n        //window.addElementOptions('list', elList);\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n        applyGenericItemSettings(this);\r\n\r\n        return this;\r\n}\r\n\r\nWPTB_Cell = function(DOMElement){\r\n\r\n\t\tfunction newElementProxy(el){\r\n\t\t\tif(el == 'list'){\r\n                return new WPTB_List();\r\n            }\r\n            else if(el == 'image'){\r\n                return window.newImage();\r\n            }   \r\n            else if(el == 'text'){\r\n                return new WPTB_Text();\r\n            }\r\n            else if(el == 'button'){\r\n                return new WPTB_Button();\r\n            }\r\n\t\t}\r\n        \r\n        DOMElement = document.createElement(\"td\");\r\n        \r\n        DOMElement.classList.add('wptb-droppable', 'wptb-cell');  \r\n\r\n        DOMElement.onclick = function(){\r\n\r\n        \tvar relativeActions, cells;\r\n\r\n        \tif(window._wptbManagementModeActive){\r\n        \t\treturn;\r\n        \t}\r\n        \tif(this.classList.contains('wptb-highlighted')){\r\n        \t\tthis.classList.remove('wptb-highlighted');\r\n        \t}\r\n        \telse{\r\n        \t\trelativeActions = document.getElementsByClassName('wptb-relative-action');\r\n        \t\tcells = document.getElementsByTagName('td');\r\n\r\n        \t\tfor (var i = 0; i < relativeActions.length; i++) {\r\n        \t\t\tconsole.log(relativeActions[i]);\r\n        \t\t\trelativeActions[i].dataset.activeCell = this;\r\n        \t\t}\r\n\r\n        \t\tfor (var i = 0; i < cells.length; i++) {\r\n        \t\t\tcells[i].classList.remove('wptb-highlighted');\r\n        \t\t}\r\n\r\n        \t\tthis.classList.add('wptb-highlighted');\r\n\r\n        \t}\r\n        \t\r\n        };\r\n\r\n        DOMElement.ondragenter = function(){\r\n        \tvar div;\r\n\r\n        \tconsole.log('dragenter');\r\n\r\n        \tthis.classList.add('wptb-drop-here-empty');\r\n        }\r\n\r\n        DOMElement.ondragover = function(e){\r\n        \te.preventDefault();\r\n        }\r\n\r\n        DOMElement.ondragleave = function(){\r\n\r\n        \tconsole.log('dragleave');\r\n\r\n        \tthis.classList.remove('wptb-drop-here-empty');\r\n\r\n        }\r\n\r\n        DOMElement.ondrop = function(e){\r\n        \tvar element;\r\n        \te.preventDefault();\r\n        \telement = newElementProxy(e.dataTransfer.getData('wptbElement'));\r\n        \tthis.appendChild(element.getDOMElement());\r\n        \tthis.classList.remove('wptb-drop-here-empty');\r\n        \treturn true;\r\n        }\r\n\r\n        DOMElement.onmousedown = function(){\r\n\r\n        };\r\n\r\n        DOMElement.onmouseover = function(){\r\n\r\n        };\r\n\r\n        DOMElement.onmouseup = function(){\r\n\r\n        };\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n\r\n        this.setCoords = function(y,x){\r\n        \tvar el = this.getDOMElement();\r\n        \tel.dataset.yIndex = y;\r\n        \tel.dataset.xIndex = x;\r\n        }\r\n\r\n        this.getCoords = function(){\r\n        \tvar coords,\r\n        \t\tel = this.getDOMElement();\r\n        \tcoords.x = el.dataset.xIndex;\r\n        \tcoords.y = el.dataset.yIndex;\r\n        \treturn coords;\r\n        }\r\n\r\n        this.appendElement = function(node){\r\n        \tgetDOMElement().appendChild(node);\r\n        }\r\n\r\n        return this;\r\n\r\n};\r\n\r\nWPTB_LeftPanel = function(){\r\n\tvar table = document.getElementsByClassName('wptb-preview-table')[0],\r\n\twptbElementButtons = document.getElementsByClassName('wptb-element');\r\n\r\n\tfor (var i = 0; i < wptbElementButtons.length; i++) {\r\n\t\twptbElementButtons[i].ondragstart = function(e){\r\n\t\t\te.dataTransfer.setData('wptbElement',this.dataset.wptbElement);\r\n\t\t}\r\n\t}\r\n\r\n\tdocument.getElementById('wptb-add-end-row').onclick = table.addRowToTheEnd;\r\n\tdocument.getElementById('wptb-add-start-row').onclick = table.addRowToTheStart;\r\n\tdocument.getElementById('wptb-add-row-before').onclick = table.addRowBefore;\r\n\tdocument.getElementById('wptb-add-row-after').onclick = table.addRowAfter;\r\n\tdocument.getElementById('wptb-add-end-column').onclick = table.addColumnToTheEnd;\r\n\tdocument.getElementById('wptb-add-start-column').onclick = table.addColumnToTheStart;\r\n\tdocument.getElementById('wptb-add-column-before').onclick = table.addColumnBefore;\r\n\tdocument.getElementById('wptb-add-column-after').onclick = table.addColumnAfter;\r\n};\r\n\r\nWPTB_Table = function(columns, rows){\r\n\t\t\t\r\n\t\t\tvar settings = document.getElementsByClassName('wptb-settings-items'),\r\n\t\t\t\twptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\r\n\t\t\t\ttable, row, cell;\r\n\r\n            for (var i = 0; i < settings.length; i++) {\r\n                settings[i].classList.add('visible');\r\n            }\r\n\r\n            document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\r\n            \r\n\r\n            //Create a HTML Table element.\r\n            table = document.createElement('table');\r\n            table.classList.add('wptb-preview-table');\r\n\r\n\r\n            //Add the header row.\r\n            row = table.insertRow(-1);\r\n            row.classList.add('wptb-table-head', 'wptb-row');\r\n\r\n            for (var i = 0; i < columns; i++) {\r\n                cell = new WPTB_Cell();\r\n                cell.setCoords(0,i); \r\n                row.appendChild(cell.getDOMElement()); \r\n            }\r\n\r\n            //Add the data rows.\r\n            for (var i = 1; i < rows; i++) {\r\n\r\n                row = table.insertRow(-1);\r\n                row.classList.add('wptb-row');\r\n\r\n                for (var j = 0; j < columns; j++) {\r\n                    cell = new WPTB_Cell();\r\n                \tcell.setCoords(i,j); \r\n                    row.appendChild(cell.getDOMElement());\r\n                }\r\n            }\r\n\r\n    \t\ttable.recalculateIndexes = function(){\r\n    \t\t\tvar trs = this.getElementsByTagName('tr'), tds;\r\n\r\n\t\t        for (var i = 0; i < trs.length; i++) {\r\n\t\t            tds = trs[i].getElementsByTagName('td');\r\n\t\t            for (var j = 0; j < tds.length; j++) {\r\n\r\n\t\t                if(i==0){ \r\n\t\t                    tds[j].parentNode.className=''; \r\n\t\t                    tds[j].parentNode.classList.add('wptb-row','wptb-table-head');\r\n\t\t                }\r\n\t\t                else{\r\n\t\t                    tds[j].parentNode.className=''; \r\n\t\t                    tds[j].parentNode.classList.add('wptb-row'); \r\n\t\t                }\r\n\r\n\t\t                tds[j].dataset.xIndex = j;\r\n\t\t                tds[j].dataset.yIndex = i;\r\n\t\t            }\r\n\t\t        }\r\n    \t\t}\r\n\r\n    \t\ttable.addColumn = function(pos){\r\n\t\t        var referenceTd, newTd, _this;\r\n\t\t        for (var i = 0; i < this.rows.length; i++) {\r\n\t\t            \r\n\t\t            var newTd = new WPTB_Cell(); \r\n\r\n\t\t            if(pos == 'before' || pos == 'after')\r\n\t\t            {\r\n\t\t                referenceTd = this.rows\r\n\t\t                        .getElementsByTagName('td')[_this.dataset.xIndex];\r\n\t\t                if(pos=='before'){\r\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd);\r\n\t\t                    var buttons = document.getElementsByClassName('wptb-relative-action');\r\n\t\t                    for (var i = 0; i < buttons.length; i++) {\r\n\t\t                        buttons[i].dataset.xIndex++;\r\n\t\t                    } \r\n\t\t                }\r\n\t\t                else{\r\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd.nextSibling);\r\n\t\t                }\r\n\t\t            }\r\n\t\t            else if(pos=='end'){\r\n\t\t                this.rows[i].appendChild(newTd.getDOMElement());  \r\n\t\t            }\r\n\t\t            else{\r\n\t\t                this.rows[i].innerHTML = '<td class=\"wptb-droppable wptb-cell\"></td>' + this.rows[i].innerHTML; \r\n\t\t            }\r\n\t\t        }\r\n\r\n\t\t        this.recalculateIndexes();\r\n\t\t    };\r\n\r\n    \t\ttable.addColumnToTheEnd = function(evt){\r\n\t\t        table.addColumn('end',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n\t\t    table.addColumnToTheStart = function(evt){\r\n\t\t        table.addColumn('start',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n\t\t    table.addColumnBefore = function(){\r\n\t\t        table.addColumn('before',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n\t\t    table.addColumnAfter = function(){\r\n\t\t        table.addColumn('after',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n    \t\ttable.addRow = function(pos){\r\n    \t\t\tvar _this, row, referenceRow = undefined;\r\n\t\t            \r\n\t\t        if(pos == 'end' || pos == 'start'){ \r\n\t\t            row = this.insertRow( pos == 'end' ? -1 : 0);\r\n\t\t        }else{\r\n\t\t            row = document.createElement('tr');\r\n\t\t        }\r\n\t\t            \r\n\t\t        for (var j = 0; j < this.columns; j++) {\r\n\t\t            var cell = new WPTB_Cell();\r\n\t\t            row.appendChild(cell.getDOMElement());\r\n\t\t        }\r\n\r\n\t\t        row.classList.add('wptb-row'); \r\n\r\n\t\t        if(pos == 'before' || pos == 'after' ){\r\n\t\t        \t_this = this.getElementsByClassName('wptb-highlighted')[0];\r\n\t\t            referenceRow = this.getElementsByTagName('tr')[_this.dataset.yIndex];\r\n\t\t            if(pos == \"before\"){\r\n\t\t                params.tbody.insertBefore(row,referenceRow);\r\n\t\t                var buttons = document.getElementsByClassName('wptb-relative-action');\r\n\t\t                for (var i = 0; i < buttons.length; i++) {\r\n\t\t                    buttons[i].dataset.yIndex++;\r\n\t\t                } \r\n\t\t            }else{\r\n\t\t                this.getElementsByTagName('tbody')[0].insertBefore(row,referenceRow.nextSibling);\r\n\t\t            }\r\n\t\t        }\r\n\r\n\t\t        if(pos =='before' || pos == 'start'){\r\n\t\t        \tvar active = document.querySelector('wptb-highlighted');\r\n\t\t        \tif(active){\r\n\t\t        \t\tactive.onclick();\r\n\t\t        \t}\r\n\t\t        }\r\n\r\n\t\t        this.recalculateIndexes();\r\n    \t\t};\r\n\r\n    \t\ttable.addRowToTheEnd = function(evt){\r\n\t\t        table.addRow('end');\r\n\t\t    };\r\n\r\n\t\t    table.addRowToTheStart = function(evt){\r\n\t\t        table.addRow('start');\r\n\t\t    };\r\n\r\n\t\t    table.addRowBefore = function(){\r\n\t\t        table.addRow('before');\r\n\t\t    };\r\n\r\n\t\t    table.addRowAfter = function(){\r\n\t\t        table.addRow('after');\r\n\t\t    };\r\n\r\n\t\t    table.columns = columns;\r\n\r\n            wptbTableSetup.appendChild(table);\r\n\r\n\t\t    WPTB_LeftPanel();\r\n\r\n             \r\n};\r\n\r\nWPTB_Initializer = function(){\r\n\tconst MIN_COLUMNS = 1,\r\n\t\t  MIN_ROWS = 1,\r\n\t\t  MAX_COLUMNS = 10,\r\n\t\t  MAX_ROWS = 10;\r\n\r\n\tvar tableGenerator = document.body;\r\n\t\tcolumnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0],\r\n\t\tcolumnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0],\r\n\t\trowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1],\r\n\t\trowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1],\r\n\t\tcolumnsInput = document.getElementById('wptb-columns-number'),\r\n\t\trowsInput = document.getElementById('wptb-rows-number');\r\n\r\n\r\n\t\tcolumnsDecrementButton.onclick = function(){\r\n\t\t\tif(columnsInput.value > MIN_COLUMNS){\r\n\t\t\t\tcolumnsInput.value--;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tcolumnsIncrementButton.onclick = function(){\r\n\t\t\tif(columnsInput.value < MAX_COLUMNS){\r\n\t\t\t\tcolumnsInput.value++;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\trowsDecrementButton.onclick = function(){\r\n\t\t\tif(rowsInput.value > MIN_ROWS){\r\n\t\t\t\trowsInput.value--;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\trowsIncrementButton.onclick = function(){\r\n\t\t\tif(rowsInput.value < MAX_ROWS){\r\n\t\t\t\trowsInput.value++;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\tdocument.getElementById('wptb-generate-table').onclick = function(){\r\n\r\n\t\t\t var columns = document.getElementById('wptb-columns-number').value,\r\n\t\t\t \t rows = document.getElementById('wptb-rows-number').value;\r\n\r\n\t\t\t WPTB_Table(columns, rows);\r\n\t\t}\r\n\r\n};\r\n\r\nWPTB_Settings = function(){\r\n\t\r\n\tvar elems = document.getElementsByClassName('wptb-element');\r\n\r\n\tfor (var i = 0; i < elems.length; i++) {\r\n\t\telems[i].ondragstart = function(event){\r\n\t\tevent.dataTransfer.effectAllowed = 'move';\r\n        event.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\r\n\t}\r\n\t};\r\n};\r\n\r\nWPTB_Builder = function(){\r\n\t\r\n\tdocument.counter = new ElementCounters();\r\n\r\n\tvar initializer = WPTB_Initializer();\r\n\t\tsettings = WPTB_Settings();\r\n};\r\n\r\n(function(){\r\n\tdocument.addEventListener('DOMContentLoaded', WPTB_Builder); \r\n})();"]}