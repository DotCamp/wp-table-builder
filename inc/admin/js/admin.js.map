{"version":3,"sources":["functions.js","wptb-builder.js"],"names":["$","window","tinyFastCall","obj","tinyMCE","init","target","inline","plugins","dialog_type","theme","menubar","fixed_toolbar_container","toolbar","copyList","event","srcList","parentNode","newList","cloneNode","container","listItems","querySelectorAll","onmouseenter","showListSettings","onmouseleave","hideListSettings","i","length","cont","getElementsByClassName","console","log","showListItemSettings","hideListItemSettings","id","onkeyup","listItemKeyListener","infArr","className","match","elName","oldClass","oldClassOptionsPanelClass","newOptionsPanel","clone","oldOptionsPanel","document","querySelector","appendChild","newClass","wptb_num","newClassOptionsPanelClass","classList","add","remove","removeClass","addClass","btnDelete","createElement","btnCopy","actions","previous","innerHTML","onclick","list","tdContainer","removeChild","show","hide","append","undefined","parent","previousAct","par","item","article","content","html","duplicate","newListItem","text","divdot","divcontent","libullet","key","which","keyCode","liEl","lastP","dontAddItems","preventDefault","after","focus","childNodes","trim","inputNumber","el","min","attr","max","els","dec","prev","inc","next","each","decrement","increment","onmousedown","e","value","jQuery","wptbElement","ready","click","fadeIn","wpColorPicker","table","columnCount","parseInt","val","rowCount","row","insertRow","headerCell","j","cell","wptbTable","bind","currentTarget","stopPropagation","elText","elText2","elP","elList","el_L","elButton","elButton2","el_B","Array","textEl","mouseenter","oldClassOption","classOption","duplicateOption","newClassOption","listener_to_element","find","mouseleave","addElementOptions","button","children","setup","ed","on","execCommand","init_instance_callback","editor","getContent","setContent","range","selection","getRng","KeyID","startOffset","listEl","contentCollection","prop","setTimeout","$this","el_options","hasClass","parents","Element_options_tab","optionsClass","is","add_Elements_tab","detect_element_for_property","option","closest","classes","type","num","element","editing_property","data","css","toLowerCase","body","setInterval","old_value","trigger","addBorder","styles","border","addCellPadding","padding","addInnerBorder","checked","fadeOut","_val","addInnerBorderSize","textDragStart","originalEvent","dataTransfer","effectAllowed","setData","getAttribute","imageDragStart","buttonDragStart","listDragStart"],"mappings":"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","file":"admin.js","sourcesContent":["(function ($) {\n\n    window.tinyFastCall = function (obj) {\n        tinyMCE.init({\n            target: obj,\n            inline: true,\n            plugins: \"link\",\n            dialog_type: \"modal\",\n            theme: 'modern',\n            menubar: false,\n            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n        });\n    }\n\n    window.copyList = function (event) {\n        var srcList = event.target.parentNode.parentNode,\n            newList = srcList.cloneNode(true),\n            container = srcList.parentNode,\n            listItems = newList.querySelectorAll('article');\n        newList.onmouseenter = showListSettings;\n        newList.onmouseleave = hideListSettings;\n        for (var i = listItems.length - 1; i >= 0; i--) {\n            let cont = listItems[i].getElementsByClassName('wptb-list-item-content')[0];\n            console.log(cont);\n            listItems[i].onmouseenter = showListItemSettings;\n            listItems[i].onmouseleave = hideListItemSettings;\n            cont.id = '';\n            tinyFastCall(cont);\n            cont.onkeyup = listItemKeyListener;\n        }\n\n\n        var infArr = newList.className.match(/wptb-element-(.+)-(\\d)+/i),\n            elName = infArr[1],\n            oldClass = infArr[0],\n            oldClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + infArr[2];\n\n        var newOptionsPanel = $('.' + oldClassOptionsPanelClass).clone(true, true),\n            oldOptionsPanel = document.querySelector('.' + oldClassOptionsPanelClass);\n        oldOptionsPanel.parentNode.appendChild(newOptionsPanel[0]);\n\n        var newClass = \"wptb-element-\" + elName + \"-\" + wptb_num['list'];\n        var newClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + wptb_num['list'];\n\n        newList.classList.add(newClass);\n        newList.classList.remove(oldClass);\n\n        newOptionsPanel.removeClass(oldClassOptionsPanelClass);\n        newOptionsPanel.addClass(newClassOptionsPanelClass);\n\n        wptb_num['list']++;\n\n        container.appendChild(newList);\n    }\n\n    window.showListSettings = function (event) {\n        var btnDelete = document.createElement('span'),\n            btnCopy = document.createElement('span'),\n            actions = document.createElement('span'),\n            previous, i;\n        actions.classList.add('wptb-actions');\n        actions.innerHTML = 'List Actions';\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n        delete document.getElementsByClassName('wptb-actions');\n        previous = document.getElementsByClassName('wptb-directlyhovered');\n        for (i = 0; i < previous.length; i++) {\n            previous[i].classList.remove('wptb-directlyhovered');\n        };\n        this.classList.add('wptb-directlyhovered');\n\n        btnDelete.onclick = function () {\n            var list = this.parentNode.parentNode,\n                tdContainer = list.parentNode;\n            tdContainer.removeChild(list);\n\n            $('.wptb-tab#element-options  a').removeClass('active');\n            $('.wptb-tab#add-elements a').addClass('active');\n\n            $('.wptb-elements-container').show();\n            $('.wptb-settings-section').show();\n            $(\"#element-options-group\").hide();\n        };\n        btnCopy.onclick = copyList;\n\n        actions.append(btnCopy, btnDelete);\n        this.append(actions);\n    };\n\n    window.hideListSettings = function (event) {\n        this.classList.remove('wptb-directlyhovered');\n        var actions = this.getElementsByClassName('wptb-actions')[0];\n        if (actions != undefined) {\n            let parent = actions.parentNode;\n            parent.removeChild(actions);\n        }\n    };\n\n    window.showListItemSettings = function (event) {\n        var btnDelete = document.createElement('span'),\n            btnCopy = document.createElement('span'),\n            actions = document.createElement('span'),\n            previous, i;\n        actions.classList.add('wptb-actions');\n        actions.innerHTML = 'Item Actions';\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n\n        previousAct = document.getElementsByClassName('wptb-actions');\n        for (i = 0; i < previousAct.length; i++) {\n            let par = previousAct[i].parentNode;\n            par.removeChild(previousAct[i]);\n        };\n\n        previous = document.getElementsByClassName('wptb-directlyhovered');\n        for (i = 0; i < previous.length; i++) {\n            previous[i].classList.remove('wptb-directlyhovered');\n        };\n        this.classList.add('wptb-directlyhovered');\n\n        btnDelete.onclick = function () {\n            var item = this.parentNode.parentNode,\n                parent = item.parentNode;\n            parent.removeChild(item);\n        };\n\n        btnCopy.onclick = function (event) {\n            var article = event.target.parentNode.parentNode,\n                content = article.querySelector('.wptb-list-item-content'),\n                html = content.innerHTML;\n            var duplicate = newListItem(html);\n            article.parentNode.appendChild(duplicate);\n        };\n\n        actions.append(btnCopy, btnDelete);\n        this.parentNode.appendChild(actions);\n\n    };\n\n    window.hideListItemSettings = function (event) {\n        this.classList.remove('wptb-directlyhovered');\n        var actions = this.querySelector('.wptb-actions');\n        if (actions != undefined) {\n            let parent = actions.parentNode;\n            parent.removeChild(actions);\n        }\n    };\n\n    window.newListItem = function (text) {\n        if (text == undefined) text = 'New List Item';\n        var duplicate = document.createElement('article');\n        var divdot = document.createElement('div'),\n            divcontent = document.createElement('div'),\n            libullet = document.createElement('li');\n        divdot.classList.add('wptb-list-item-style-dot');\n        divcontent.classList.add('wptb-list-item-content');\n        libullet.classList.add('wptb-bullet');\n        duplicate.appendChild(divdot);\n        duplicate.appendChild(divcontent);\n        divdot.appendChild(libullet);\n        divcontent.innerHTML = text;\n        tinyFastCall(divcontent);\n        divcontent.onkeyup = window.listItemKeyListener;\n        divcontent.onmouseenter = function (event) {\n            var previous = document.getElementsByClassName('wptb-directlyhovered');\n            for (i = 0; i < previous.length; i++) {\n                previous[i].classList.remove('wptb-directlyhovered');\n            };\n            this.classList.add('wptb-directlyhovered');\n        };\n        divcontent.onmouseleave = function (event) {\n            this.classList.remove('wptb-directlyhovered');\n        };\n        divcontent.onmouseenter = showListItemSettings;\n        divcontent.onmouseleave = hideListItemSettings;\n        return duplicate;\n    }\n\n    window.listItemKeyListener = function (event) {\n        var key = (event.which != undefined) ? event.which\n            : event.keyCode,\n            liEl = $(this).parent(),\n            duplicate, lastP;\n        if (key !== 13 ||\n            (window.dontAddItems !== undefined && window.dontAddItems === true)) {\n            return;\n        }\n        event.preventDefault();\n        duplicate = newListItem();\n        liEl.after(duplicate);\n        duplicate.querySelector('.wptb-list-item-content').focus();\n\n        lastP = this.childNodes[this.childNodes.length - 1];\n        this.removeChild(lastP);\n        if (this.innerHTML.trim() == '<p><br data-mce-bogus=\"1\"></p>') {\n            this.innerHTML = 'New List Item';\n        }\n        return false;\n    };\n\n    window.inputNumber = function (el) {\n\n        var min = el.attr('min') || false;\n        var max = el.attr('max') || false;\n\n        var els = {};\n\n        els.dec = el.prev();\n        els.inc = el.next();\n\n        el.each(function () {\n            init(this);\n        });\n\n        function init(el) {\n\n            els.dec[0].onclick = decrement;\n            els.inc[0].onclick = increment;\n\n            els.dec.onmousedown = function (e) {\n                e.preventDefault();\n            };\n\n            els.inc.onmousedown = function (e) {\n                e.preventDefault();\n            };\n\n            function decrement() {\n                var value = el.value;\n                value--;\n                if (!min || value >= min) {\n                    el.value = value;\n                }\n            }\n\n            function increment() {\n                var value = el.value;\n                value++;\n                if (!max || value <= max) {\n                    el.value = value++;\n                }\n            }\n        }\n    }\n})(jQuery);","var wptbElement;\n\njQuery(document).ready(function ($) {\n\n    //Column and Row number Selector.\n    inputNumber(jQuery('#wptb-columns-number'));\n    inputNumber(jQuery('#wptb-rows-number'));\n\n    //Generate table and bind associated functions.\n    $(function () {\n        $(\"#wptb-generate-table\").click(function () {\n\n            $('.wptb-table-generator').hide();\n            $('.wptb-settings-items').fadeIn();\n\n            //Add Color Picker for Row and Header Background Colors\n            $('#wptb-even-row-bg').wpColorPicker();\n            $('#wptb-odd-row-bg').wpColorPicker();\n            $('#wptb-table-header-bg').wpColorPicker();\n\n            //Create a HTML Table element.\n            var table = $(\"<table />\");\n            table.addClass('wptb-preview-table');\n\n            //Get the count of columns and rows.\n            var columnCount = parseInt($('#wptb-columns-number').val());\n            var rowCount = parseInt($('#wptb-rows-number').val());\n\n            //Add the header row.\n            var row = $(table[0].insertRow(-1));\n            for (var i = 0; i < columnCount; i++) {\n                var headerCell = $(\"<td />\");\n                row.append(headerCell);\n                headerCell.addClass('wptb-droppable wptb-cell');\n                row.addClass('wptb-table-head wptb-row');\n            }\n\n            //Add the data rows.\n            for (var i = 1; i < rowCount; i++) {\n                row = $(table[0].insertRow(-1));\n                for (var j = 0; j < columnCount; j++) {\n                    var cell = $(\"<td />\");\n                    cell.addClass('wptb-droppable wptb-cell');\n                    row.append(cell);\n                    row.addClass('wptb-row')\n                }\n            }\n\n            //Appending the table to the container in UI\n            var wptbTable = $(\".wptb-table-setup\");\n            wptbTable.html(\"\");\n            wptbTable.append(table);\n\n            //Adds/Removes Class to Droppable Cell when element enters.\n            $('.wptb-droppable').bind('dragenter', function (event) {\n                event.target.classList.add('wptb-allow-drop');\n                event.currentTarget.classList.add('wptb-allow-drop');\n            });\n\n            //Removes class when element is out of the droppable zone.\n            $('.wptb-droppable').bind('dragleave', function (event) {\n                event.target.classList.remove('wptb-allow-drop');\n            });\n\n            //Allowing the drop\n            $('.wptb-droppable').bind(\"dragover\", function (event) {\n                event.stopPropagation();\n                event.preventDefault();\n                return true;\n            });\n\n            //Text Element to be dropped in Cell.\n            var elText = document.createElement('div');\n            var elText2 = document.createElement('div');\n            elText2.classList.add('editable');\n            var elP = document.createElement('p');\n            elP.innerHTML = 'Text';\n            elText2.appendChild(elP);\n            elText.appendChild(elText2);\n\n            //List Element to be dropped in Cell.\n            var elList = document.createElement('div');\n            //elList.classList.add('editable');\n            var el_L = document.createElement('ul');\n            el_L.innerHTML = \"<article>\\\n                <div class=\\\"wptb-list-item-style-dot\\\">\\\n                    <li class=\\\"wptb-bullet\\\">\\\n                    </li>\\\n                </div>\\\n                <div class=\\\"wptb-list-item-content editable\\\" >List Item 1</div>\\\n            </article><article>\\\n                <div class=\\\"wptb-list-item-style-dot\\\">\\\n                    <li class=\\\"wptb-bullet\\\">\\\n                    </li>\\\n                </div>\\\n                <div class=\\\"wptb-list-item-content editable\\\" >List Item 2</div>\\\n            </article><article>\\\n                <div class=\\\"wptb-list-item-style-dot\\\">\\\n                    <li class=\\\"wptb-bullet\\\">\\\n                    </li>\\\n                </div>\\\n                <div class=\\\"wptb-list-item-content editable\\\" >List Item 3</div>\\\n            </article>\";\n            elList.appendChild(el_L);\n\n            //Button Element to be dropped in Cell\n            var elButton = document.createElement('div');\n            elButton.classList.add('wptb-button-container');\n            var elButton2 = document.createElement('div');\n            elButton2.classList.add('wptb-button-wrapper');\n            var el_B = document.createElement('p');\n            el_B.classList.add('wptb-button');\n            el_B.classList.add('editable');\n            el_B.innerHTML = 'Button Text';\n            elButton2.appendChild(el_B);\n            elButton.appendChild(elButton2);\n\n            //numbers of elements that have been added\n            window.wptb_num = new Array();\n            wptb_num[\"text\"] = 0;\n            wptb_num[\"image\"] = 0;\n            wptb_num[\"list\"] = 0;\n            wptb_num[\"button\"] = 0;\n\n            //Runs when an element is dropped on a cell.\n            $('.wptb-droppable').bind('drop', function (event) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.target.classList.remove('wptb-allow-drop');\n                if (wptbElement == 'text') {\n                    var textEl = elText.cloneNode(true);\n                    event.target.appendChild(textEl);\n\n\n                    $(textEl).mouseenter(function (event) {\n                        var btnDelete = $('<span class=\"dashicons dashicons-trash delete-action\"></span>'),\n                            btnCopy = $('<span class=\"dashicons dashicons-admin-page duplicate-action\"></span>'),\n                            actions = $('<span class=\"wptb-actions\">Item Actions </span>');\n\n                        $('.wptb-actions').remove();\n                        $('.wptb-directlyhovered').removeClass('wptb-directlyhovered');\n                        $(this).addClass('wptb-directlyhovered');\n\n                        btnDelete.click(function () {\n                            $(this).parent().parent().remove();\n                        });\n                        btnCopy.click(function () {\n                            var duplicate = $(this).parent().parent().clone(true, true);\n                            $(this).parent().parent().parent().append(duplicate);\n\n                            /*************************************************\n                             *            Give it separated options          *\n                             *************************************************/\n                            /**\n                            * will carry the extracted infotrmation from the class\n                            * @example class => wptb-ph-element wptb-element-text-0\n                            *          result => [\n                            *              0 => wptb-element-text-0\n                            *              1 => text\n                            *              2 => 0\n                            *          ]\n                            * @type array\n                            */\n                            var infArr = duplicate.attr('class').match(/wptb-element-(.+)-(\\d)+/i),\n                                wptbElement = infArr[1],\n                                oldClass = infArr[0],\n                                oldClassOption = \"wptb-options-\" + wptbElement + \"-\" + infArr[2],\n                                classOption = \".wptb-element-options\" +\n                                    \".wptb-\" + wptbElement + \"-options\" +\n                                    \".\" + oldClassOption;\n                            var duplicateOption = $(classOption).clone(true, true);\n                            $(classOption).parent().append(duplicateOption);\n\n                            // creating the new class name and deleting the old class \n                            var newClass = \"wptb-element-\" + wptbElement + \"-\" + wptb_num[wptbElement];\n                            var newClassOption = \"wptb-options-\" + wptbElement + \"-\" + wptb_num[wptbElement];\n\n                            duplicate.addClass(newClass);\n                            duplicate.removeClass(oldClass);\n\n                            duplicateOption.addClass(newClassOption);\n                            duplicateOption.removeClass(oldClassOption);\n                            wptb_num[wptbElement]++;\n\n                            // Exceptions \n                            switch (wptbElement) {\n                                case 'text':\n                                    listener_to_element(duplicateOption.find('.wptb-color-picker'));\n                                    duplicateOption.find('.wptb-color-picker').wpColorPicker();\n                                    break;\n                            }\n                            duplicate[0].childNodes[0].id = '';\n                            tinyFastCall(duplicate[0].childNodes[0]);\n                        });\n\n                        actions.append(btnCopy, btnDelete);\n                        $(this).append(actions);\n\n                    }).mouseleave(function (event) {\n                        $(this).removeClass('wptb-directlyhovered');\n                        $(this).find('.wptb-actions').remove();\n                    });\n\n\n                    tinyMCE.init({\n                        target: textEl.childNodes[0],\n                        inline: true,\n                        plugins: \"link\",\n                        dialog_type: \"modal\",\n                        theme: 'modern',\n                        menubar: false,\n                        fixed_toolbar_container: '#wpcd_fixed_toolbar',\n                        toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n                    });\n\n                    $(textEl).addClass('wptb-ph-element wptb-element-' + wptbElement + \"-\" + wptb_num[wptbElement]);\n\n                    // adding element options\n                    addElementOptions(wptbElement, textEl);\n                    $(textEl).click();\n\n                } else if (wptbElement == 'image') {\n                    event.target.innerHTML = 'Image';\n                } else if (wptbElement == 'button') {\n                    // create the button element with text button\n                    var button = elButton.cloneNode(true);\n\n                    // this part is very important \n                    button.click(function (e) {\n                        e.preventDefault();\n                    });\n\n                    $(button).mouseenter(function (event) {\n                        var btnDelete = $('<span class=\"dashicons dashicons-trash delete-action\"></span>'),\n                            btnCopy = $('<span class=\"dashicons dashicons-admin-page duplicate-action\"></span>'),\n                            actions = $('<span class=\"wptb-actions\">Item Actions </span>');\n\n                        $('.wptb-actions').remove();\n                        $('.wptb-directlyhovered').removeClass('wptb-directlyhovered');\n                        $(this).addClass('wptb-directlyhovered');\n\n                        btnDelete.click(function () {\n                            $(this).parent().parent().remove();\n                        });\n                        btnCopy.click(function () {\n                            var duplicate = $(this).parent().parent().clone(true, true);\n\n                            var infArr = duplicate[0].className.match(/wptb-element-(.+)-(\\d)+/i),\n                                elName = infArr[1],\n                                oldClass = infArr[0],\n                                oldClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + infArr[2];\n\n                            var newOptionsPanel = $('.' + oldClassOptionsPanelClass).clone(true, true),\n                                oldOptionsPanel = document.querySelector('.' + oldClassOptionsPanelClass);\n                            oldOptionsPanel.parentNode.appendChild(newOptionsPanel[0]);\n\n                            var newClass = \"wptb-element-\" + elName + \"-\" + wptb_num['button'];\n                            var newClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + wptb_num['button'];\n\n                            duplicate[0].classList.add(newClass);\n                            duplicate[0].classList.remove(oldClass);\n\n                            newOptionsPanel.removeClass(oldClassOptionsPanelClass);\n                            newOptionsPanel.addClass(newClassOptionsPanelClass);\n\n                            wptb_num['button']++;\n\n                            duplicate[0].id = '';\n                            tinyFastCall(duplicate[0]);\n                            $(this).parent().parent().parent().append(duplicate[0]);\n                        });\n\n                        actions.append(btnCopy, btnDelete);\n                        $(this).append(actions);\n\n                    }).mouseleave(function (event) {\n                        $(this).removeClass('wptb-directlyhovered');\n                        $(this).find('.wptb-actions').remove();\n                    });\n                    //append it to the cell\n                    $(event.target).append(button);\n                    console.log('Something', $(button).children().find('.wptb-button-wrapper'));\n                    //using tinymce\n                    tinyMCE.init({\n                        target: button.childNodes[0],\n                        inline: true,\n                        plugins: \"link\",\n                        dialog_type: \"modal\",\n                        theme: 'modern',\n                        menubar: false,\n                        fixed_toolbar_container: '#wpcd_fixed_toolbar',\n                        toolbar: 'bold italic strikethrough',\n                        setup: function (ed) {\n                            ed.on(\"init\",\n                                function (ed) {\n                                    tinyMCE.execCommand('mceRepaint');\n                                }\n                            );\n                        },\n                        init_instance_callback: function (editor) {\n                            editor.on('change', function (e) {\n                                // check if it becomes empty because if there's no value it's hard to edit the editor in button element\n                                if (editor.getContent() == \"\") {\n                                    editor.setContent(\"<p class='wptb-button'>Button Text</p>\");\n                                }\n                            });\n                            editor.on('KeyDown', function (e) {\n                                var range = editor.selection.getRng();\n                                var KeyID = e.keyCode;\n                                if (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\n                                    e.preventDefault();\n                                    editor.setContent(\"<p class='wptb-button'></p>\");\n                                }\n\n                            });\n                        }\n                    });\n\n                    //Give it a class That will help us to relate it to its properties\n                    $(button).addClass('wptb-ph-element wptb-element-' + wptbElement + \"-\" + wptb_num[wptbElement]);\n\n                    // To take a copy from the options prototype and relate it to the button\n                    addElementOptions(wptbElement, button);\n\n                    // click the element to show it's option to focus the page on it\n                    $(button).click();\n\n                } else if (wptbElement == 'list') {\n                    var listEl = elList.cloneNode(true), contentCollection;\n\n                    event.target.appendChild(listEl);\n\n                    listEl.onmouseenter = showListSettings;\n                    listEl.onmouseleave = hideListSettings;\n                    contentCollection = listEl\n                        .querySelectorAll('article .wptb-list-item-content');\n                    for (var i = 0; i < contentCollection.length; i++) {\n                        contentCollection[i].onmouseenter = showListItemSettings;\n                        contentCollection[i].onmouseleave = hideListItemSettings;\n                        contentCollection[i].onkeyup = listItemKeyListener;\n                        tinyFastCall(contentCollection[i]);\n                    }\n\n                    listEl.classList.add('wptb-ph-element', 'wptb-element-' + wptbElement + \"-\" + wptb_num[wptbElement]);\n                    addElementOptions(wptbElement, listEl);\n\n                }\n            });\n\n\n\n            /**\n             * adding Options to each element and related this option to it\n             * by Class also give the element its events\n             * \n             * @param {string} wptbElement name of the element\n             * @param {opject} el the element itself\n             * @returns {void}\n             */\n            function addElementOptions(wptbElement, el) {\n                var prop = $(\".wptb-\" + wptbElement + \"-options-prototype\").clone();\n                prop.removeClass(\"wptb-\" + wptbElement + \"-options-prototype\"); // remove prototype from the class\n                prop.addClass('wptb-options-' + wptbElement + \"-\" + wptb_num[wptbElement]);\n                $(\"#element-options-group\").append(prop);\n                //special cases to elements if needed\n                switch (wptbElement) {\n                    case 'text':\n                        listener_to_element(prop.find('.wptb-color-picker'));\n                        prop.find('.wptb-color-picker').wpColorPicker();\n                        break;\n                }\n                wptb_num[wptbElement]++;\n            }\n\n            $(document).bind('keydown', function (e) {\n                if (e.target.className === 'mce-textbox') {\n                    window.dontAddItems = true;\n                    if (event.which === 13 || event.which === 27) {\n                        setTimeout(function () {\n                            window.dontAddItems = false;\n                            document.querySelector('.wptb-list-item-content.mce-edit-focus').click();\n                        }, 250);\n                    }\n                }\n            });\n\n            /*\n             * event click to the whole document and then check if it's to one\n             * the created element to show it's option\n             */\n            $(document).bind('click', function (e) {\n                var $this = $(e.target);\n\n                if (e.target.id.match(/mceu_([0-9])*-button/)) {\n                    window.dontAddItems = false;\n                }\n\n                var el_options = false; // this var will carry the element that will be shown its options\n\n                //if($this.hasClass('wptb-element-options'))\n                // check if this element or one of it's parent should display its options\n                if ($this.hasClass('wptb-ph-element')) {\n                    el_options = $this;\n                } else if ($this.parents().hasClass('wptb-ph-element')) {\n                    el_options = $this.parents('.wptb-ph-element');\n                }\n\n                // check to show element's options\n                if (el_options && el_options.length != 0) {\n                    Element_options_tab();\n\n                    /**\n                     * will carry the extracted infotrmation from the class\n                     * @example class => wptb-ph-element wptb-element-text-0\n                     *          result => [\n                     *              0 => wptb-element-text-0\n                     *              1 => text-0\n                     *              2 => text-\n                     *          ]\n                     * @type array\n                     */\n                    var infArr = el_options.attr('class').match(/wptb-element-((.+-)\\d+)/i);\n\n\n                    /*\n                     * will carry the class name of the element's options\n                     * @example wptb-text-options wptb-options-text-0\n                     * @type String\n                     */\n                    var optionsClass = '.wptb-' + infArr[2] + 'options' +\n                        '.wptb-options-' + infArr[1];\n\n                    $(optionsClass).show();\n\n                    //Binds the range slider and input for text font size.\n                    $('.wptb-text-font-size-slider').bind('input change', function () {\n                        $(this).parents('.wptb-settings-row').find('.wptb-text-font-size-number').val($(this).val());\n                    });\n\n\n                    //Binds the range slider and input for text font size.\n                    $('.wptb-text-font-size-number').bind('input change', function () {\n                        $(this).parents('.wptb-settings-row').find('.wptb-text-font-size-slider').val($(this).val());\n                    });\n\n                } else {\n                    //show the add elements option\n                    if ($this.is('#add-elements') ||\n                        $this.parents('#add-elements').length !== 0 ||\n                        $this.hasClass('wptb-builder-panel') ||\n                        $this.parents('.wptb-builder-panel').length !== 0) {\n                        add_Elements_tab();\n                    }\n                }\n            });\n\n            // active add Elements tab and it's options\n            function add_Elements_tab() {\n\n                $('.wptb-tab#element-options  a').removeClass('active');\n                $('.wptb-tab#add-elements a').addClass('active');\n\n                $('.wptb-elements-container').show();\n                $('.wptb-settings-section').show();\n                $(\"#element-options-group\").hide();\n\n            }\n\n            // active Element options tab and it's options\n            function Element_options_tab() {\n\n                $('.wptb-tab#add-elements a').removeClass('active');\n                $('.wptb-tab#element-options a').addClass('active');\n\n                $('.wptb-elements-container').hide();\n                $('.wptb-settings-section').hide();\n                $(\"#element-options-group\").show();\n\n                //Hide all elements' options before showing the selected one\n                $('#element-options-group').children().hide();\n\n            }\n\n            /**\n             * this function will be called \n             * when a property of any elemnet is changed\n             * to determine which element that we should edit\n             * and then call edititng_property Function\n             * @returns {void}\n             */\n            function detect_element_for_property() {\n                var option = $(this);\n                var parent = option.closest(\".wptb-element-options\");\n                var classes = parent.attr(\"class\");\n\n                /**\n                * will carry the extracted infotrmation from the class\n                * @example class =>wptb-options-text-0\n                *          result => [\n                *              0 => wptb-options-text-0\n                *              1 => text\n                *              2 => 0\n                *          ]\n                * @type array\n                */\n                var infArr = classes.match(/wptb-options-(.+)-(\\d+)/i);\n\n                var type = infArr[1];\n                var num = infArr[2];\n                var element = $('.wptb-ph-element.wptb-element-' + type + '-' + num);\n                editing_property(element, option);\n            }\n\n            /**\n             * will change the element according to the value of option\n             * \n             * @param {object} element that will change according to the value of option\n             * @param {object} option input element\n             * @returns {void}\n             */\n            function editing_property(element, option) {\n                // type of property @Ex: font-size,color ....\n                var type = option.data('type');\n                var val = option.val();\n                switch (type) {\n                    case 'font-size':\n                        element.find(\"p\").css('font-size', val + 'px');\n                        break;\n                    case 'color':\n                        element.find(\"p\").css('color', val);\n                        break;\n                    case 'list-class': if (val == 'unordered') {\n                        $('[data-type=list-style-type]').parent().css('display', 'flex');\n                        element.find('article .wptb-list-item-style-dot li').css('list-style-type', 'disc');\n                        $('[data-type=list-style-type]').val('disc');\n                    }\n                    else {\n                        $('[data-type=list-style-type]').parent().css('display', 'none');\n                        element.find('article .wptb-list-item-style-dot li').css('list-style-type', 'decimal');\n                    }\n                        break;\n                    case 'numbering-list-style-type':\n                    case 'list-style-type':\n                        element.find('article .wptb-list-item-style-dot li').css('list-style-type', val.toLowerCase());\n                        break;\n                }\n            }\n            $(document.body).on('change input, change select', '.wptb-element-property', detect_element_for_property);\n\n            /**\n             * to listen to the elements that will change dynamically\n             * change by other javascript code then will trigger the change event to them\n             * \n             * @param {string} element\n             * @returns {void}\n             */\n            function listener_to_element(element) {\n                element.data('old_value', element.val());\n                window.setInterval(function () {\n                    var value = element.val();\n                    var old_value = element.data('old_value');\n                    if (value != old_value) {\n                        old_value = value;\n                        element.trigger('change');\n                    }\n                }, 300);\n            }\n\n            //Triggers when table border setting changes.\n            function addBorder(value) {\n                var styles = {\n                    border: value + 'px solid'\n                };\n                $('.wptb-preview-table').css(styles);\n            }\n\n            //Binds the range slider and input, also triggers table border change.\n            $('#wptb-table-border-slider').bind('input change', function () {\n                $('#wptb-table-border-number').val($(this).val());\n                addBorder($(this).val());\n            });\n\n            //Binds the range slider and input, also triggers table border change.\n            $('#wptb-table-border-number').bind('input change', function () {\n                $('#wptb-table-border-slider').val($(this).val());\n                addBorder($(this).val());\n            });\n\n            //Triggers when cell padding setting changes.\n            function addCellPadding(value) {\n                var styles = {\n                    padding: value + 'px'\n                };\n                $('td').css(styles);\n            }\n\n            //Binds the range slider and input, also triggers cell padding change.\n            $('#wptb-table-cell-slider').bind('input change', function () {\n                $('#wptb-table-cell-number').val($(this).val());\n                addCellPadding($(this).val());\n            });\n\n            //Binds the range slider and input, also triggers cell padding change.\n            $('#wptb-table-cell-number').bind('input change', function () {\n                $('#wptb-table-cell-slider').val($(this).val());\n                addCellPadding($(this).val());\n            });\n\n            //Triggers when apply inner border setting changes.\n            function addInnerBorder(checked) {\n                var styles;\n\n                if (checked == 'checked') {\n                    styles = {\n                        border: 1 + 'px solid'\n                    }\n                    $('#wptb-apply-inner-border').css('margin-bottom', '0');\n                    $('.wptb-preview-table td').css(styles);\n                    $('#wptb-inner-border-settings').fadeIn();\n                } else {\n                    $('#wptb-inner-border-settings').fadeOut();\n                    $('.wptb-preview-table td').css('border', '');\n                }\n\n            }\n\n            //Binding Checkbox Change, triggers inner border add.\n            $('#wptb-inner-border-check').bind('change', function () {\n                var _val = $(this).is(':checked') ? 'checked' : 'unchecked';\n                addInnerBorder(_val);\n            });\n\n            //Triggers when cell padding setting changes.\n            function addInnerBorderSize(value) {\n                var styles = {\n                    border: value + 'px solid'\n                };\n                $('.wptb-preview-table td').css(styles);\n            }\n\n            //Binds the range slider and input, also triggers cell padding change.\n            $('#wptb-table-inner-border-slider').bind('input change', function () {\n                $('#wptb-table-inner-border-number').val($(this).val());\n                addInnerBorderSize($(this).val());\n            });\n\n            //Binds the range slider and input, also triggers cell padding change.\n            $('#wptb-table-inner-border-number').bind('input change', function () {\n                $('#wptb-table-inner-border-slider').val($(this).val());\n                addInnerBorderSize($(this).val());\n            });\n\n        });\n\n    });\n\n    //When dragging starts for Text element\n    function textDragStart(event) {\n        wptbElement = 'text';\n        var el = $(this);\n        event.originalEvent.dataTransfer.effectAllowed = 'move';\n        event.originalEvent.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n    }\n\n    //When dragging starts for Image element\n    function imageDragStart(event) {\n        wptbElement = 'image';\n        var el = $(this);\n        event.originalEvent.dataTransfer.effectAllowed = 'move';\n        event.originalEvent.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n    }\n\n    //When dragging starts for Button element\n    function buttonDragStart(event) {\n        wptbElement = 'button';\n        var el = $(this);\n        event.originalEvent.dataTransfer.effectAllowed = 'move';\n        event.originalEvent.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n    }\n\n    //When dragging starts for List element\n    function listDragStart(event) {\n        wptbElement = 'list';\n        var el = $(this);\n        event.originalEvent.dataTransfer.effectAllowed = 'move';\n        event.originalEvent.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n    }\n\n    //On drag elements.\n    $('#wptb-text').on('dragstart', textDragStart);\n    $('#wptb-image').on('dragstart', imageDragStart);\n    $('#wptb-button').on('dragstart', buttonDragStart);\n    $('#wptb-list').on('dragstart', listDragStart);\n\n});\n"]}