{"version":3,"sources":["WPTB_ActionsField.js","WPTB_BackgroundMenu.js","WPTB_Builder.js","WPTB_Cell.js","WPTB_CutGlueTable.js","WPTB_DropHandle.js","WPTB_ElementCounters.js","WPTB_ElementObject.js","WPTB_ElementOptions.js","WPTB_GetDirectionAfterReconstruction.js","WPTB_HeaderToolbox.js","WPTB_Helper.js","WPTB_IconManager.js","WPTB_Initializer.js","WPTB_LeftPanel.js","WPTB_MultipleSelect.js","WPTB_NotificationManager.js","WPTB_Parser.js","WPTB_Polyfills.js","WPTB_RecalculateIndexes.js","WPTB_Responsive.js","WPTB_Settings.js","WPTB_SortableTable.js","WPTB_Stringifier.js","WPTB_Table.js","WPTB_TableSettingsData.js","WPTB_TableStateSaveManager.js","WPTB_Upsells.js","WPTB_innerElementSet.js","applyGenericItemSettings.js","WPTB_Store.js"],"names":["WPTB_ActionsField","_this","this","wptbActions","document","getElementsByClassName","length","addActionField","actionType","thisNode","body","getElementsByTagName","actions","previousNode","activeElem","classList","remove","parentNode","removeChild","btnDelete","createElement","btnCopy","add","appendChild","type","onclick","event","act","target","el","className","match","_typeof","hasOwnProperty","kind","thisRow","WPTB_Helper","rowIsTop","table","findAncestor","contains","dataTitleColumnSet","actionsRemove","WPTB_TableStateSaveManager","tableStateSet","wptbDocumentEventGenerate","data","elementCopy","activeElement","activeElemParent","infArr","Array","isArray","elemProt","tinyMceClear","copy","WPTB_ElementObject","getDOMElement","insertBefore","nextSibling","cloneNode","applyGenericItemSettings","WPTB_innerElementSet","setParameters","btnMove","draggable","ondragstart","dragImages","jsonIconsDirectories","wp","template","tmplIconsDirectories","IconsDirectories","JSON","parse","getElementIcon","dataTransfer","effectAllowed","setDragImage","setData","style","display","actionsHide","ondragend","elementDragEndClear","coordinatesElement","wptbContainer","getBoundingClientRect","top","parseFloat","left","right","clientWidth","onscroll","leaveFromField","node","relatedTarget","onmouseleave","opacity","key","context","factory","self","global","singletonInstance","getCurrentTable","querySelector","initialized","store","removeHighlights","from","querySelectorAll","map","cell","highlightCellLogic","targetElement","multiSelection","arguments","undefined","currentTargetType","nodeName","toLowerCase","highlightCell","preventDefault","stopPropagation","commit","state","types","selected","item","getRowSelector","rowMouseEnter","assignRowClickHandler","rowSelector","title","WPTB_IconManager","getIcon","then","icon","addEventListener","rest","currentActiveRow","getters","hoveredRow","first","_Array$from4","_toArray","slice","row","watchStoreMutations","suppliedStore","subscribe","_ref4","payload","targetRow","_document$querySelect","parentX","x","parentY","y","_targetRow$getBoundin","height","concat","selectorWidth","width","rowSelectorPosition","applyOptions","_ref","headerBg","evenBg","oddBg","_ref2","currentTable","dataset","wptbHeaderBackgroundColor","wptbEvenRowBackgroundColor","wptbOddRowBackgroundColor","header","_Array$from2","element","colorVal","removeProperty","backgroundColor","index","customBgColorRuleSet","customBgColor","wptbBgColor","hasCustomBgColor","includes","init","_ref3","detail","WPTB_ControlsManager","callControlScript","getPreviousSection","removeEventListener","removeRowHandlers","dispatch","addStore","storeObject","url","window","location","href","RegExp","exec","http","urlSet","table_id","detectMode","XMLHttpRequest","ajaxurl","open","setRequestHeader","onreadystatechange","d","wptbTableSetupEl","readyState","status","ans","responseText","getElementById","value","WPTB_Parser","WPTB_Table","wptbTableContainerMaxWidth","maxWidth","tdDefaultWidth","WPTB_Settings","send","counter","ElementCounters","select","MultipleSelect","WPTB_Initializer","settings","WPTB_Cell","callback","DOMElement","padding","jQuery","val","innerBorderWidth","parseInt","border","newElementProxy","ondblclick","wptbTableSetup","yIndex","wptbSortableTable","currentTarget","elementStartScript","wptbPhElement","_loop","i","wptbElementTypeClass","wptbTypeElementArr","split","wptbInternalActiveElement","j","wptbInternalActiveElementObj","_loop2","setCoords","xIndex","getCoords","coords","appendElement","getCellDimensions","tdStyleObj","getComputedStyle","tdPaddingLeft","getPropertyValue","tdPaddingRight","tdBorderLeftWidth","tdBorderRightWidth","tdPaddingTop","tdPaddingBottom","tdBorderTopWidth","tdBorderBottomWidth","offsetWidth","offsetHeight","borderCollapse","tableBorderLeft","tableFullStyleObj","tableBorderRight","tableBorderTop","tableBorderBottom","tr","firstChild","lastChild","WPTB_CutGlueTable","cutTableHorizontally","rowBefore","rows","tableRowsIChildren","children","rowSpan","newTdRowspan","sameCellBeforeDivision","td","wptbCell","mark","tdTopStyle","getAttribute","setAttribute","colSpan","dataXIndex","dataXIndexNext","beforeTd","maxCols","WPTB_RecalculateIndexes","glueTableHorizontally","tds","_toConsumableArray","hasAttribute","dataSameCellBeforeDivision","tdsSameBeforeDivision","tdsSameBeforeDivisionJPlusChildren","k","cutTableVertically","col","rowSpanNewTd","colSpanOld","colSpanNewTd","rowChildren","rowChildrenLength","afterTd","tdLeftStyle","tdAnalogThisX","tdAnalogThisY","glueTableVertically","jFirstTdGlue","WPTB_DropHandle","thisElem","e","wptbDropHandle","wptbDropBorderMarker","wptbDropBorderMarkerTop","wptbDropBorderMarkerRight","wptbDropBorderMarkerBottom","wptbDropBorderMarkerLeft","hide","toPx","getDragRelativeType","cellRelatedDropHandle","range","createRange","setStart","shadowRoot","createContextualFragment","_parentTd$getBounding","getParentOfType","ondragenter","ondragover","ondragleave","ondrop","getData","wptbMovingMode","text","getDOMParentElement","innerElement","innerElementNext","localName","indics","notDragEnter","indexOf","elementDrag","offsetY","layerY","bottom","priv","increment","nextIndex","kindIndexProt","itemHtml","wptbElementMutch","elementClearFromTinyMce","wpTemplateId","replace","trim","innerHTML","inElems","inElemObj","WPTB_ElementOptions","elementOptionsSet","capture","WPTB_GetDirectionAfterReconstruction","typeFirst","typeSecond","verticalProp","responsiveFront","itemsPerHeader","tableMaxCols","switchMode","getDirective","directives","sizeRangeId","mode","responsiveMode","modeOptions","topRowAsHeader","cellStackDirection","cellsPerRow","newTable","WPTB_HeaderToolbox","wrapperQuery","topMargin","toggleToolboxVisibility","show","button","activateSection","buttonType","hideList","currentSection","hexToRgb","hex","result","rgbToHex","rgb","isHex","rgbm","toString","toUpperCase","Math","round","test","icon_directory","protocol","hostname","img","src","wptbDropHandles","wptbDropBorderMarkers","linkHttpCheckChange","link","convertToAbs","origin","linkClean","linkArr","cls","parentElement","getSelectionText","getSelection","selection","elementOptionsPanelClear","elementOptionsGroup","wpColorPickerCheckChangeForTableStateSaving","originalEvent","irisStripMouseUpStateSaveManager","wpColorPickerClear","attribute","isId","input","parent","wpPickerContainer","newInput","results","decodeURIComponent","getTableId","getColumnWidth","xIndexes","cellWidth","getRowHeight","yIndexes","cellHeight","wpColorPickerChange","ui","uiColor","color","classe","number","affectedEl","ps","ratingStar","span","fill","numberImputSize","wptbNumberInputs","maxCount","maxValue","onkeydown","thisValue","String","substring","onkeyup","ucfirst","str","charAt","eventName","details","CustomEvent","bubbles","dispatchEvent","WPTB_ElementsScriptsLauncher","deleteEventHandlers","off","elementChildren","replaceAll","string","search","join","mceContentBodys","dataMceStyle","removeAttribute","mceEditFocus","contentEditable","spellCheck","mceIds","elementOptionContainerCustomClassSet","targetInput","customClassForContainer","containerElement","elementOptionContainerAdditionalStyles","containerAdditionalStyles","containerStylesArrOne","containerStylesSet","containerStyleStr","containerStyleStrArr","controlsInclude","functionHandler","acceptEventValues","controlConnectFunctionsName","name","elementKind","elementOptionsGroupIds","optionsGroupIds","elementOptionsGroupId","controlActiveElements","controlActiveElement","controlUnicClassName","regularText","controlInfArr","controls","controlName","control","targetControlValue","targetControlValueGet","targetValue","eventValue","push","oneControlInclude","jsonControlsConfig","controlClassName","wptbContrlStacksConfigId","jsonControlsConfigJson","tmplControlsConfig","container","innerElementCopyIncludeHandler","valueDependOnControl","dependOnControlName","targetControlElementClass","valueDependOnControlCorrect","dependOnControlDataGet","dependOnControlElements","valueDependOnControlCorrectObj","dependOnControlElementsArr","s","dependOnControlElementClass","dependOnControlData","Object","keys","forEach","unicClass","appearDependOnControl","dependOnMain","showHideTargetControlElement","controlContainerElem","dependOnControlElementsValue","targetControlInactiveVal","prototype","call","targetControlElements","controlActiveVal","dependOnControlElementValue","dependOn","returnBool","coincided","hasNumberAnyParams","targetControlElement","toggleSwitch","dataToggleSwitch","toggleSwitchExecute","dependOnParams","elems","checked","eventType","dependOnValue","bind","controlsStateManager","targetControlClass","controlChangeIndic","targetControls","elementsSettings","elementSettings","elementsSettingsTemplatesJs","stringify","alignmentValue","elementControlsStateCopy","elementProt","copyElem","elemProtKind","elemCopyKind","elementSettingsProt","elementSettingsCopy","infArrProt","infArrCopy","elementsSettingsTemplateJs","elementSettingValue","elementSettingKeyCopy","elementControlsStateDelete","nameControl","wptbElementDatas","elementContainerClass","elementOptionClassIndic","controlElementParent","elementOptionsScriptsContainer","editActionClassRemove","startsWith","wptbelementOptionClass","childNodes","controlsConfigJson","controlsConfig","elementOptionsGroupIdsInvolved","elementOptionsGroupInvolved","elementOptionsContainerInvolved","controlScriptsObj","controlappearDependOnControl","controltoggleSwitch","controlValueDependOnControl","controlsConfigNew","controlKey","tmplControlTemplate","elemContainer","elementControlTargetUnicClass","controlParamCalculateValue","elementOptionsContainer","controlTemplate","elementOptionsGroupChildren","elementOptionsContainerOn","elementOptionContainerOn","elementOptionContainer","elementOptionClass","controlContainerElemParent","helperJavascriptElem","helperJavascriptCode","innerText","script","controlScriptsArr","id","editActiveElems","unicClassP","controlParamCalculateValueCreateFunction","handlerFunction","managerExternalCssStyles","elementContainer","selector","cssName","cssValue","head","cssForThisElement","cssText","cssTextArrFirst","pop","selectorExists","cssTextArrSecond","cssTextArrThird","cssNameExists","splice","registerSections","sections","previousSection","sectionElement","sectionDataId","_this2","displayType","triggerSectionEvent","visibility","getCurrentSection","getSectionFromUrl","urlSection","URL","searchParams","get","some","setupSectionButtons","sectionButtons","vm","sectionName","wptbSectionButton","wptbSectionDisplayType","setupPanelToggleButtons","$","each","find","click","slideToggle","toggleClass","sectionEvent","setupSidebarToggle","toggleSelector","toggleButton","toggle","externalCssStylesDelete","externalCssStylesCopy","copyElement","activeElemClass","cssForNewElement","cssForActiveElement","infArrCopyEl","cssForActiveElementInnerHTML","cssForNewElementInnerHTML","elementsStylesConvertToObject","stylesElements","stylesObj","styleElemId","elementsStylesSetFromObject","jsonObject","styleCss","saveTable","startSaving","previewSaving","tableSaveIndicator","wptbTableStateNumberSave","wptbTableStateNumberShow","bar","toggleTableEditMode","tableClean","messagingArea","datas","postId","wptb_admin_object","t","code","rs","wptbId","codeClone","paramIdsNecessaryChange","columns","WPTB_Stringifier","outerHTML","datas_containers","styleObjJson","messagingAreaText","setTimeout","params","content","elements_datas","elements_styles","security_code","preview_saving","action","WPTB_NotificationManager","sendNotification","message","wptbPreviewBtn","wptbPreviewBtnHref","previewHref","wptbSaveBtn","builderPageUrl","regex","history","pushState","clickOnFreeSpace","cellModeBackground","wpcdFixedToolbar","elementAjax","dataAjaxData","element_name","element_ajax_data","close","leftScrollPanelCurtain","leftScrollPanelCellSettings","wptbPreviewTable","toggleEditMode","deactivateMultipleSelectMode","wptbPreviewTableTds","activateMultipleSelectMode","checkingDimensionValue","dimension","searchIndex","checkSetGetStyleSizeValue","styleName","computedStyleName","elemStyleValue","elementStyles","checkSetGetStyleColorValue","set","elemStyleColorValue","checkSetGetStyleValue","getValueMaxCountSameElementsInArray","arr","maxPropName","check","countEmpty","recalculateIndexes","tableRowsColorsReinstall","tableHeaderBackground","tableEvenRowBackground","tableOddRowBackground","tableIndex","parentType","dragRelativeType","setDragRelativeType","getElementColorStylesHex","showControlsOnElementMount","showElementsListOnRemove","blockTinyMCE","addBlocker","blockerElement","haveChild","removeBlocker","cells","calledByBlock","isTableClean","tableId","confirm","strings","dirtyConfirmation","saveStatus","builder","wptbSaving","list","Error","prepareIcon","iconSvgString","extraClass","iconWrapper","iconList","cachedIcons","iconName","Promise","res","rej","cachedIcon","console","log","fetch","resp","ok","iconString","error","stringifiedIcon","err","iconManager","tableGenerator","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","WptbResponsive","WPTB_LeftPanel","wptbElementButtons","wptbElement","closeButton","wptbHeader","selectedCells","multipleCellMode","isActivated","pushSelectedCell","flushSelectedCells","getFirst","minXIndex","minYIndex","getLast","last","maxXIndex","maxYIndex","removeAllButFirst","_context$wptb_admin_o","managerData","notificationManager","notificationOptions","options","defaults","parsedOptions","reduce","carry","_objectSpread","setControlData","notificationTypes","queueTypes","revealTypes","dismissTypes","div","columnTitleMobile","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","obj","TypeError","prop","trs","maxColsFull","tdsArr","jMainIter","z","responsiveWrapperId","mainContainerQuery","responsiveTable","loaded","addContainerToDom","mainContainer","responsiveElement","load","startUp","tablePreview","wptbRelativeElements","wptbTableStateSaveManager","wptbUndo","wptbUndoRedoContainer","tableStateGet","wptbUndoredo","wptbRedo","shortcodePopupWindow","onbeforeunload","previewId","newHref","floor","random","tableTitleField","onchange","exports","module","thisObject","sortingCellMouseMov","xMatch","tagName","offsetX","layerX","clientHeight","sortingCellMouseMoveVertical","sortingCellMouseMoveHorizontal","tdMouseLeave","sortableTable","tableWasSorted","tableRowsBefore","tableRowsAfter","tableRowsArr","tableLastCont","rowspan","rowNum","rowsTdFirst","rowsValuesArr","tdYCoordsRowSpanPrevious","tableRowsPushed","tdsChanged","changeSortingTdsCollection","tdRowspan","textElementsValues","textElementsValuesGet","rowsTd","orderBy","setSortedAscDataAttr","sort","prev","next","sortOrder","unshift","trRef","tBody","rowsValObj","colspan","colNum","columnsTdFirst","columnsValuesArr","tdXCoordsColSpanPrevious","tdColspan","columnsTd","tdsColumn","difference","columnsValObj","tdsAll","removeCellsAttrAfterDivision","tableSM","reassignElementsStyles","dataAttr","prevValue","nextValue","textElements","tdIndexSpanPrev","collectionTds","collectionTdsJSpan","collectionTdsJSpanProperty","indexName","indexNameCamelCase","indexNamePerpendicularCamelCase","tableGroupCount","tdsCollectionChanged","tdSpanProperty","tdSpan","cellsStylesScheme","rowsStylesScheme","sortModeSwitcher","active","sortableTableVerticalStart","sortingCellMouseMoveSwitcher","wptbSortableTableVertical","createTableElementsStylesScheme","sortableTableHorizontalStart","wptbSortableTableHorizontal","tableObjectChange","start","elemSelector","elements","elem","objectKey","elementsStylesScheme","elemStyles","sortableTableInitialization","sortModeSwitcherRun","switchModeObj","tableOld","sCMM","dataAttrSortChange","rowsLength","dataYIndexStart","codeMain","tableColumns","minWidth","innerElements","wptbActionsLength","dataMceBogus","array","wptb_preview_table","cs","noCells","singleCells","multipleCells","cellSettings","cellSelectOperation","cellElement","classListOperation","_getCoords2","_slicedToArray","column","position","isShiftActive","shiftKey","ele","cellHighlighted","markedCells","sizeName","getSizeFunctionName","size","elementControlSizeUnicClass","elementControlSizeFixedUnicClass","cellSizeInputs","cellSizeFixedInput","isSquare","settingId","settingElem","countMarkedCells","splitButton","drawTable","a","undoSelect","fillTableArray","colspansSums","colspanSumInRow","maxAmountOfCells","max","apply","maxAmountOfRows","skipInCols","cellsBuffer","xPosition","cellPointer","stepsToMove","reconstraction","insertRow","setMaxAmountOfCells","getMaxAmountOfCells","addColumnWidth","cleaner","highlighted","tableTdsFor","tableRows","widthIsSet","arrayTdsFromPreviousRow","wptbFixedWidth","tableTdsSumMaxWidth","tableTdsSumMaxWidthFixed","tableTdsSumMaxWidthAuto","wptbTableSetupWidth","arrayCellsWidthFixedHelper","arrayCellsWidthAutoHelper","tdPaddingCommon","tableTdBorderCommonWidth","cssForTdsWidthAuto","borderLeftWidth","borderRightWidth","tableBorderCommon","tableTdBorderLeftWidth","tableTdBorderRightWidth","wptbCssTdAutoWidth","wptbTdWidthAuto","CellsWidthAutoCount","wptbTableTdsSumMaxWidth","wptbCellsWidthAutoCount","mergingСellsHorizontally","wptbFixedWidthSize","tableTdWidthAuto","styleElementCreate","cssForTdsWidthAutoOld","wptbTableAlignment","addRowHeight","dataYIndex","heightIsSet","arrayTdsPrevious","wptbFixedHeight","mergingCellsVertically","forBreak","addColumnEnd","currentTableTd","currentTdStyle","borderColor","WPTB_TableSettingsData","getTableSetting","addColumnStart","firstCell","addColumnAfter","c_pos","cellStyle","pos","newTd","nextSib","addColumnBefore","addRowToTheEnd","aux","r","addRowToTheStart","addRowBefore","cellNew","addRowAfter","rowAfter","cellsColSpan","tableRIChildrenLength","rNextChildren","rNextChildrenLength","rowStart","columnStart","rowEnd","columnEnd","items","mergeCells","dimensions","tdsChildrenNew","tdsInternalElements","tdsIntElemLength","firstWidth","firstDataFixedWidth","firstHeight","firstDataFixedHeight","splitCell","cellStyles","cellXIndex","rowChildInsertBefore","rowNext","Number","findRowspannedCells","actualPoints","points","getActualPointsInRow","addLackingCells","sumRows","totalColspan","deleteRow","nextRowChildren","nextRowChildrenLength","thisRowChildren","nextRow","tdArr","nextRowChildrenK","jRowChildren","deleteColumn","onresize","setTableSetting","generate","wptbTableStateSaving","wptbNewTableSetup","wptbHighlighted","wptbDirectlyhovered","cssForTdsWidthAutoValue","wptbTableTitle","wptbSetupName","datawptbUndoredo","wptbLeftScrollPanelCellSetting","wptbTableSetupNew","tableStateClear","u","classId","onmouseover","wptbElements","elementIndexesArr","newDataAttributeName","newDataAttributeValue","wptbNodeattributes","attributes","attr","nodeValue","kindIndexProtArr","node_wptb_element_kind_num","onmouseenter","elemChild","wptbActionsField","parcelRequire","modules","cache","entry","previousRequire","nodeRequire","require","newRequire","jumped","currentRequire","localRequire","resolve","Module","isParcelRequire","moduleName","bundle","register","mainExports","_typeof2","define","amd","../../../../../node_modules/vuex/dist/vuex.esm.js","defineProperty","createLogger","install","mapState","mapMutations","mapGetters","mapActions","createNamespacedHelpers","Store","devtoolHook","__VUE_DEVTOOLS_GLOBAL_HOOK__","deepCopy","f","hit","c","original","filter","forEachValue","fn","isObject","assert","condition","msg","rawModule","runtime","_children","create","rawState","_rawModule","prototypeAccessors","namespaced","configurable","addChild","getChild","hasChild","update","mutations","forEachChild","forEachGetter","forEachAction","forEachMutation","defineProperties","ModuleCollection","rawRootModule","path","root","getNamespace","namespace","targetModule","newModule","assertRawModule","warn","this$1","rawChildModule","unregister","child","isRegistered","Vue","functionAssert","expected","assertTypes","handler","assertOptions","buf","makeAssertionMessage","plugins","strict","_committing","_actions","_actionSubscribers","_mutations","_wrappedGetters","_modules","_modulesNamespaceMap","_subscribers","_watcherVM","_makeLocalGettersCache","installModule","resetStoreVM","plugin","devtools","config","_devtoolHook","emit","on","targetState","replaceState","mutation","prepend","subscribeAction","prototypeAccessors$1","genericSubscribe","subs","resetStore","hot","oldVm","_vm","wrappedGetters","computed","arg","enumerable","silent","$$state","$watch","_data","deep","sync","_withCommit","nextTick","$destroy","rootState","parentState","isRoot","getNestedState","noNamespace","local","_type","_payload","_options","args","unifyObjectStyle","gettersProxy","splitPos","localType","makeLocalGetters","rootGetters","getter","rawGetter","registerGetter","_Vue","_init","vuexInit","$options","$store","version","mixin","beforeCreate","v","ref","sub","before","all","reject","after","watch","cb","registerModule","preserveState","unregisterModule","hasModule","hotUpdate","newOptions","committing","normalizeNamespace","states","isValidMap","normalizeMap","getModuleByNamespace","vuex","len","helper","collapsed","transformer","mutationTransformer","mut","actionFilter","actionTransformer","logMutations","logActions","logger","prevState","nextState","formattedTime","getFormattedTime","formattedMutation","startMessage","endMessage","formattedAction","groupCollapsed","group","groupEnd","time","Date","pad","getHours","getMinutes","getSeconds","getMilliseconds","num","maxLength","times","../../../../../node_modules/deepmerge/dist/cjs.js","isMergeableObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","Symbol","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","source","getKeys","getOwnPropertySymbols","symbol","propertyIsOnObject","object","property","_","mergeObject","destination","customMerge","arrayMerge","sourceIsArray","stores/general.js","mutationWatchFunction","createBasicStore","objectDeepMerge","_vuex","_interopRequireDefault","_deepmerge","__esModule","default","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","writable","getOwnPropertyDescriptors","iterator","constructor","defaultStore","extraStore","watchList","_len","_key","WPTB_Store.js","_general","extraStoreOptions","subscribeList","innerCommit","mutationName","getterName","colorPicker","activeId","getActiveColorPickerId","setActiveColorPicker","./stores/general"],"mappings":"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","file":"admin.js","sourcesContent":["var WPTB_ActionsField = function() {\n    //this.wptbBorderMarker;\n    this.wptbActions;\n    if( document.getElementsByClassName( 'wptb-actions' ).length != 0 ) {\n        this.wptbActions = document.getElementsByClassName( 'wptb-actions' )[0];\n    }\n\n    this.addActionField = ( actionType, thisNode ) => {\n        let body = document.getElementsByTagName( 'body' )[0];\n\n        let actions = document.getElementsByClassName( 'wptb-actions' );\n        if( actions.length != 0 ) {\n            let previousNode = actions[0].activeElem;\n            if( previousNode ) {\n                previousNode.classList.remove( 'wptb-directlyhovered' );\n            }\n\n            while( actions.length != 0 ) {\n                actions[0].parentNode.removeChild( actions[0] );\n            }\n        }\n\n        if( actionType == 1 ) {\n\n            let btnDelete, btnCopy;\n\n            btnDelete = document.createElement( 'span' ),\n            btnCopy = document.createElement( 'span' ),\n            actions = document.createElement( 'div' );\n\n            actions.classList.add( 'wptb-actions' );\n            btnDelete.classList.add( 'dashicons', 'dashicons-trash', 'wptb-delete-action' );\n            btnCopy.classList.add( 'dashicons', 'dashicons-admin-page', 'wptb-duplicate-action' );\n\n            actions.appendChild( btnCopy );\n            actions.appendChild( btnDelete );\n\n            body.appendChild( actions );\n\n            actions.activeElem = thisNode;\n\n            actions.type = 1;\n\n            btnDelete.onclick = function( event ) {\n                let act = event.target.parentNode.activeElem,\n                    el = act.parentNode;\n                let infArr = act.className.match( /wptb-element-(.+)-(\\d+)/i );\n//                if( act && infArr && Array.isArray( infArr ) ) {\n//                    WPTB_Helper.elementControlsStateDelete( act );\n//                    WPTB_Helper.externalCssStylesDelete( infArr[0] );\n//                }\n\n                if( act ) {\n                    el.removeChild( act );\n                }\n\n                if( act && typeof act === 'object' && act.hasOwnProperty( 'kind' ) && act.kind == 'text' ) {\n                    let thisRow = el.parentNode;\n\n                    if( WPTB_Helper.rowIsTop( thisRow ) ) {\n                        let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n\n                        if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                            WPTB_Helper.dataTitleColumnSet( table );\n                        }\n                    }\n                }\n\n                let wptbActionsField = new WPTB_ActionsField();\n                wptbActionsField.actionsRemove();\n\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n\n                WPTB_Helper.wptbDocumentEventGenerate('element:removed:dom', document, act);\n            };\n\n            btnCopy.onclick = ( event ) => {\n                let copy,\n                    infArr,\n                    type;\n                let activeElement = event.target.parentNode.activeElem;\n                let activeElemParent = activeElement.parentNode;\n                infArr = activeElement.className.match( /wptb-element-(.+)-(\\d+)/i );\n                if( infArr && Array.isArray( infArr ) ) {\n                    type = infArr[1];\n                    let data = {};\n                    data.kind = type;\n                    data.elemProt = activeElement;\n                    data.tinyMceClear = true;\n                    copy = new WPTB_ElementObject( data );\n                    //WPTB_Helper.elementControlsStateCopy( activeElement, copy.getDOMElement() );\n                    //WPTB_Helper.externalCssStylesCopy( activeElement, copy.getDOMElement() );\n                    //WPTB_Helper.elementStartScript( copy.getDOMElement() );\n                    copy.getDOMElement().classList.remove('edit-active');\n                    activeElemParent.insertBefore( copy.getDOMElement(), activeElement.nextSibling );\n                } else {\n                    copy = {};\n                    let elementCopy = activeElement.cloneNode( true );\n                    elementCopy.classList.remove( 'wptb-directlyhovered' );\n\n                    copy.getDOMElement = function() {\n                        return elementCopy;\n                    }\n\n                    applyGenericItemSettings( copy );\n\n                    activeElemParent.insertBefore( copy.getDOMElement(), activeElement.nextSibling );\n\n                    WPTB_Helper.wptbDocumentEventGenerate( 'wptb-inner-element:copy', activeElement, copy.getDOMElement() );\n                }\n\n                WPTB_innerElementSet( copy.getDOMElement() );\n\n                let wptbActionsField = new WPTB_ActionsField( 1, activeElement );\n                wptbActionsField.setParameters( activeElement );\n\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n            };\n\n\n            if( thisNode.classList.contains( 'wptb-ph-element' ) ) {\n                let btnMove;\n                btnMove = document.createElement( 'span' );\n                btnMove.classList.add( \"dashicons\", \"dashicons-move\", 'wptb-move-action' );\n                btnMove.draggable = true;\n                actions.appendChild( btnMove );\n\n                btnMove.ondragstart = ( event ) => {\n                    let wptbElementIconsDirectories = 'wptb-element-icons-directories';\n                    let tmplIconsDirectories = wp.template( wptbElementIconsDirectories );\n                    let data = {};\n                    let jsonIconsDirectories = tmplIconsDirectories( data );\n                    let IconsDirectories = JSON.parse( jsonIconsDirectories );\n\n                    let dragImages,\n                        actions = event.target.parentNode,\n                        activeElem = actions.activeElem,\n                        infArr,\n                        type;\n                    infArr = activeElem.className.match( /wptb-element-(.+)-(\\d+)/i );\n                    if( infArr && Array.isArray( infArr ) ) {\n                        type = infArr[1];\n                        activeElem.classList.add( 'wptb-moving-mode' );\n\n                        if( IconsDirectories && typeof IconsDirectories === 'object' && IconsDirectories[type] ) {\n                            dragImages =  WPTB_Helper.getElementIcon( IconsDirectories[type] );\n                        }\n\n                        event.dataTransfer.effectAllowed = 'move';\n                        event.dataTransfer.setDragImage( dragImages, 0, 0 );\n                        event.dataTransfer.setData( 'node', 'wptb-element-' + infArr[1] + '-' + infArr[2] );\n                        event.dataTransfer.setData( 'wptb-moving-mode', 'wptb-element-' + infArr[1] + '-' + infArr[2] );\n                        event.dataTransfer.setData( 'wptbElIndic-' + infArr[1], 'wptbElIndic-' + infArr[1] );\n                        let act = event.target.parentNode.activeElem;\n                        if( act.kind == 'text' ) {\n                            let thisRow = act.parentNode.parentNode;\n\n                            if( WPTB_Helper.rowIsTop( thisRow ) ) {\n                                let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n\n                                if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                                    WPTB_Helper.dataTitleColumnSet( table );\n                                }\n                            }\n                        }\n                    } else {\n                        this.style.display = 'none';\n                    }\n\n                    this.actionsHide();\n                };\n\n                btnMove.ondragend = ( event ) => {\n                    WPTB_Helper.elementDragEndClear();\n                }\n            }\n\n            actions.style.display = 'flex';\n\n            this.wptbActions = actions;\n        }\n\n        WPTB_Helper.wptbDocumentEventGenerate('wptb:actionfield:generated', document);\n    }\n\n    this.setParameters = ( thisNode ) => {\n\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            } else {\n                this.wptbActions = false;\n            }\n        }\n\n        if( this.wptbActions && this.wptbActions.classList.contains( 'wptb-actions' ) ) {\n            this.wptbActions.style.display = 'flex';\n        } else {\n            return;\n        }\n\n        let coordinatesElement = thisNode.getBoundingClientRect();\n\n        let wptbContainer = document.getElementsByClassName( 'wptb-container' )[0];\n        let correctTop = () => {\n            let coordinatesElement = thisNode.getBoundingClientRect();\n            this.wptbActions.style.top = parseFloat( coordinatesElement.top ) - 15 + 'px';\n        }\n        //wptbContainer.removeEventListener( 'scroll', correctTop, false );\n\n        this.wptbActions.style.top = parseFloat( coordinatesElement.top ) - 15 + 'px';\n        this.wptbActions.style.left = ( parseFloat( coordinatesElement.right ) - parseFloat( this.wptbActions.clientWidth ) ) + 1 + 'px';\n\n        this.wptbActions.style.display = 'flex';\n        thisNode.classList.add( 'wptb-directlyhovered' );\n\n        //wptbContainer.addEventListener( 'scroll', correctTop, false );\n        wptbContainer.onscroll = correctTop;\n    }\n\n    this.leaveFromField = ( event, node, actionType ) => {\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            } else {\n                this.wptbActions = false;\n            }\n        }\n\n        if( ! this.wptbActions ) {\n            return;\n        }\n\n        if( event.relatedTarget ) {\n            if ( event.relatedTarget.classList.contains( 'wptb-actions' ) ||\n                event.relatedTarget.classList.contains( 'wptb-move-action' ) ||\n                event.relatedTarget.classList.contains( 'wptb-duplicate-action' ) ||\n                event.relatedTarget.classList.contains( 'wptb-delete-action' )  || event.relatedTarget.classList.contains( 'wptb-prebuilt-mark-action' ) )\n            {\n                if( ! this.wptbActions ) {\n                    this.wptbActions = document.getElementsByClassName( 'wptb-actions' )[0];\n                }\n                this.wptbActions.onmouseleave = ( event ) => {\n                    if( event.relatedTarget != null && ( event.relatedTarget.classList.contains( 'wptb-ph-element' ) ||\n                            WPTB_Helper.findAncestor( event.relatedTarget, 'wptb-ph-element') ) && event.relatedTarget != this.wptbActions.activeElem &&\n                        WPTB_Helper.findAncestor( event.relatedTarget, 'wptb-directlyhovered' ) != this.wptbActions.activeElem ) {\n\n//                        this.wptbActions.style.display = 'none';\n//                        event.relatedTarget.parentNode.parentNode.classList.remove( 'wptb-directlyhovered' );\n//\n//                        let wptbActionsField = new WPTB_ActionsField();\n//\n//                        wptbActionsField.addActionField( 1, event.relatedTarget.parentNode.parentNode );\n//\n//                        wptbActionsField.setParameters( event.relatedTarget.parentNode.parentNode );\n                    } else {\n\n                    }\n\n                    let wptbActionsField = new WPTB_ActionsField();\n\n                    wptbActionsField.leaveFromField( event, event.relatedTarget.parentNode.parentNode );\n\n                    event.target.activeElem.classList.remove( 'wptb-directlyhovered' );\n                }\n\n                return;\n            }\n        }\n\n        node.classList.remove( 'wptb-directlyhovered' );\n        this.wptbActions.style.display = 'none';\n\n        if( event.relatedTarget ) {\n            if( event.relatedTarget.classList.contains( 'wptb-ph-element' ) || WPTB_Helper.findAncestor( event.relatedTarget, 'wptb-ph-element' ) ) {\n                this.addActionField( 1, event.relatedTarget.parentNode );\n\n                this.setParameters( event.relatedTarget.parentNode );\n            }\n        }\n    }\n\n    this.actionsRemove = () => {\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            }\n        }\n\n        if( this.wptbActions ) {\n            this.wptbActions.parentNode.removeChild( this.wptbActions );\n        }\n    }\n\n    this.actionsHide = () => {\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            }\n        }\n\n        if( this.wptbActions ) {\n            this.wptbActions.style.opacity = 0;\n        }\n    }\n}\n","/**\n * UMD for background menu setup.\n */\n(function umd(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_BackgroundMenu', self || global, function wptbBackgroundMenuSetup() {\n\t/**\n\t * Background menu component.\n\t *\n\t * @class\n\t */\n\tfunction BackgroundMenu() {\n\t\t// whether setup operation done or not\n\t\tthis.initialized = false;\n\n\t\t// flux store that will be used with menu\n\t\tlet store = null;\n\n\t\t/**\n\t\t * Get current active table on builder.\n\t\t *\n\t\t * @return {HTMLElement | null} found active table\n\t\t */\n\t\tconst getCurrentTable = () => {\n\t\t\treturn document.querySelector('.wptb-table-setup .wptb-preview-table');\n\t\t};\n\n\t\t/**\n\t\t * Get background specific options from table attributes.\n\t\t */\n\t\tconst parseOptionsFromTable = () => {\n\t\t\tconst currentTable = getCurrentTable();\n\n\t\t\tconst headerBg = currentTable.dataset.wptbHeaderBackgroundColor;\n\t\t\tconst evenBg = currentTable.dataset.wptbEvenRowBackgroundColor;\n\t\t\tconst oddBg = currentTable.dataset.wptbOddRowBackgroundColor;\n\n\t\t\treturn {\n\t\t\t\trow: {\n\t\t\t\t\theaderBg,\n\t\t\t\t\tevenBg,\n\t\t\t\t\toddBg,\n\t\t\t\t},\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Apply color value to element.\n\t\t *\n\t\t * @param {string | null} colorVal color value\n\t\t * @param {Element} element html element\n\t\t */\n\t\tconst applyColor = (colorVal, element) => {\n\t\t\tif (colorVal === '' || colorVal === null) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\telement.style.removeProperty('background-color');\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\telement.style.backgroundColor = colorVal;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Row specific operations.\n\t\t *\n\t\t * @param {Object} rowOptions row options object\n\t\t * @param {string} rowOptions.headerBg header color\n\t\t * @param {string} rowOptions.evenBg even row color\n\t\t * @param {string} rowOptions.oddBg odd row color\n\t\t */\n\t\tconst rowOperations = ({ headerBg, evenBg, oddBg }) => {\n\t\t\tconst currentTable = getCurrentTable();\n\n\t\t\tconst [header, ...rest] = Array.from(currentTable.querySelectorAll('tr'));\n\n\t\t\t// apply header row color\n\t\t\tapplyColor(headerBg, header);\n\n\t\t\t// apply even/odd row color\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\trest.map((row, index) => {\n\t\t\t\t// ruleset to decide whether row has a custom bg color applied or not\n\t\t\t\tconst customBgColorRuleSet = ['', null, undefined];\n\t\t\t\tconst customBgColor = row.dataset.wptbBgColor;\n\t\t\t\tconst hasCustomBgColor = !customBgColorRuleSet.includes(customBgColor);\n\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\trow.style.backgroundColor = hasCustomBgColor ? customBgColor : index % 2 === 0 ? evenBg : oddBg;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Apply background options to table.\n\t\t *\n\t\t * @param {null | Object} suppliedOptions options object, if supplied, these options will be used instead of parsing from table itself\n\t\t */\n\t\tthis.applyOptions = (suppliedOptions = null) => {\n\t\t\tconst { row: rowOptions } = suppliedOptions || parseOptionsFromTable();\n\n\t\t\trowOperations(rowOptions);\n\t\t};\n\n\t\t/**\n\t\t * Remove all highlight visuals from cells.\n\t\t */\n\t\tconst removeHighlights = () => {\n\t\t\t// remove any active highlighted cells\n\t\t\tconst allCells = Array.from(getCurrentTable().querySelectorAll('td'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tallCells.map((cell) => {\n\t\t\t\tcell.classList.remove('wptb-highlighted');\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Extracted cell highlight logic to use with other parts of component.\n\t\t *\n\t\t * @param {Element} targetElement target element\n\t\t * @param {boolean} multiSelection is multi selection active, multi selection should be enabled for elements after the first selected one onwards\n\t\t */\n\t\tconst highlightCellLogic = (targetElement, multiSelection = false) => {\n\t\t\tconst currentTargetType = targetElement.nodeName.toLowerCase();\n\n\t\t\tif (!multiSelection) {\n\t\t\t\tremoveHighlights();\n\t\t\t}\n\n\t\t\t// only add highlight style to table cell elements\n\t\t\tif (currentTargetType !== 'td') {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\ttargetElement = targetElement.parentNode;\n\t\t\t}\n\n\t\t\ttargetElement.classList.add('wptb-highlighted');\n\t\t};\n\n\t\t/**\n\t\t * Highlight selected data cell element.\n\t\t *\n\t\t * @param {Event} event click event\n\t\t */\n\t\tconst highlightCell = (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst currentTargetType = event.target.nodeName.toLowerCase();\n\n\t\t\tlet targetElement = event.target;\n\n\t\t\tif (currentTargetType !== 'td') {\n\t\t\t\ttargetElement = event.target.parentNode;\n\t\t\t}\n\n\t\t\thighlightCellLogic(targetElement);\n\n\t\t\t// @moved\n\t\t\t// // remove any active highlighted cells\n\t\t\t// const allCells = Array.from(getCurrentTable().querySelectorAll('td'));\n\t\t\t//\n\t\t\t// // eslint-disable-next-line array-callback-return\n\t\t\t// allCells.map((cell) => {\n\t\t\t// \tcell.classList.remove('wptb-highlighted');\n\t\t\t// });\n\t\t\t//\n\t\t\t// // only add highlight style to table cell elements\n\t\t\t// if (currentTargetType !== 'td') {\n\t\t\t// \ttargetElement = event.target.parentNode;\n\t\t\t// }\n\t\t\t//\n\t\t\t// targetElement.classList.add('wptb-highlighted');\n\n\t\t\tstore.commit('setMenuSelectedTableElement', { type: store.state.types.selected.cell, item: targetElement });\n\t\t};\n\n\t\t/**\n\t\t * Get row selection element.\n\t\t *\n\t\t * @return {Element} row selection element\n\t\t */\n\t\tconst getRowSelector = () => {\n\t\t\tconst rowSelectionClass = '.wptb-row-selection';\n\t\t\treturn document.querySelector(rowSelectionClass);\n\t\t};\n\n\t\t/**\n\t\t * Handle mouse over event for table rows.\n\t\t *\n\t\t * @param {Event} event event object\n\t\t */\n\t\tconst rowMouseEnter = (event) => {\n\t\t\t// update hovered row element on store\n\t\t\tstore.commit('updateHoveredRowElement', event.target);\n\t\t};\n\n\t\t/**\n\t\t * Calculate row selector position relative to supplied table row element.\n\t\t *\n\t\t * @param {Element} targetRow target row element\n\t\t */\n\t\tconst rowSelectorPosition = (targetRow) => {\n\t\t\tconst { x: parentX, y: parentY } = document.querySelector('.wptb-table-setup').getBoundingClientRect();\n\t\t\tconst { height, x, y } = targetRow.getBoundingClientRect();\n\n\t\t\tconst rowSelector = getRowSelector();\n\t\t\trowSelector.classList.add('wptb-row-selection-visible');\n\t\t\t// rowSelector.style.display = 'block';\n\t\t\trowSelector.style.height = `${height}px`;\n\t\t\trowSelector.style.top = `${y - parentY}px`;\n\n\t\t\t// since row selector is hidden with 'display: none' css rule, should get its size values after it becomes visible\n\t\t\tconst { width: selectorWidth } = getRowSelector().getBoundingClientRect();\n\t\t\trowSelector.style.left = `${x - parentX - selectorWidth}px`;\n\t\t};\n\n\t\t/**\n\t\t * Selecting an entire row operation handler.\n\t\t */\n\t\tconst selectRow = () => {\n\t\t\tconst currentActiveRow = store.getters.hoveredRow;\n\n\t\t\tif (currentActiveRow) {\n\t\t\t\tconst [first, ...rest] = Array.from(currentActiveRow.querySelectorAll('td'));\n\n\t\t\t\t// don't activate multi highlight for first element to clear any previous highlighted cell\n\t\t\t\thighlightCellLogic(first);\n\n\t\t\t\t// activate multi highlight for the rest\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\trest.map((cell) => {\n\t\t\t\t\thighlightCellLogic(cell, true);\n\t\t\t\t});\n\n\t\t\t\tstore.commit('setMenuSelectedTableElement', {\n\t\t\t\t\ttype: store.getters.types.selected.row,\n\t\t\t\t\titem: currentActiveRow,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Assign row select handlers for current table.\n\t\t */\n\t\tconst assignRowClickHandler = () => {\n\t\t\tconst rowSelectionClass = 'wptb-row-selection';\n\t\t\tlet rowSelector = getRowSelector();\n\n\t\t\tif (!rowSelector) {\n\t\t\t\trowSelector = document.createElement('div');\n\t\t\t\trowSelector.classList.add(rowSelectionClass);\n\t\t\t\trowSelector.title = 'Select row';\n\n\t\t\t\tWPTB_IconManager.getIcon('arrow-alt-circle-right', 'wptb-row-selector-icon-wrapper').then((icon) => {\n\t\t\t\t\trowSelector.appendChild(icon);\n\t\t\t\t});\n\n\t\t\t\t// add row selector element to its parent container\n\t\t\t\tdocument.querySelector('.wptb-builder-content .wptb-table-setup').appendChild(rowSelector);\n\n\t\t\t\trowSelector.addEventListener('click', (event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tselectRow();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst rows = Array.from(getCurrentTable().querySelectorAll('tr'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\trows.map((row) => {\n\t\t\t\trow.addEventListener('mouseenter', rowMouseEnter);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Remove row related event listeners and handlers\n\t\t */\n\t\tconst removeRowHandlers = () => {\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tArray.from(getCurrentTable().querySelectorAll('tr')).map((row) => {\n\t\t\t\t// remove event listener for each row element on table\n\t\t\t\trow.removeEventListener('mouseenter', rowMouseEnter);\n\t\t\t});\n\n\t\t\tconst rowSelector = getRowSelector();\n\t\t\tif (rowSelector) {\n\t\t\t\t// hide row selector element if any found\n\t\t\t\trowSelector.classList.remove('wptb-row-selection-visible');\n\t\t\t}\n\n\t\t\t// clear up last hovered row element value\n\t\t\tstore.commit('updateHoveredRowElement', null);\n\t\t};\n\n\t\t/**\n\t\t * Assign cell click handlers to data cells.\n\t\t */\n\t\tconst assignCellClickHandlers = () => {\n\t\t\tconst cells = Array.from(getCurrentTable().querySelectorAll('td'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tcells.map((cell) => {\n\t\t\t\tcell.addEventListener('click', highlightCell);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Remove cell click handlers from data cells.\n\t\t */\n\t\tconst removeCellClickHandlers = () => {\n\t\t\tconst cells = Array.from(getCurrentTable().querySelectorAll('td'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tcells.map((cell) => {\n\t\t\t\tcell.removeEventListener('click', highlightCell);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Clear selection from store.\n\t\t */\n\t\tconst clearSelection = () => {\n\t\t\tstore.dispatch('clearSelection');\n\t\t};\n\n\t\t/**\n\t\t * Initialize hook for component.\n\t\t */\n\t\tthis.init = () => {\n\t\t\t// initialize background menu on correct section change\n\t\t\tdocument.addEventListener('wptbSectionChanged', ({ detail }) => {\n\t\t\t\t// only run setup once\n\t\t\t\tif (!this.initialized && detail === 'background_menu') {\n\t\t\t\t\tWPTB_ControlsManager.callControlScript('BackgroundMenu', 'wptb-background-menu');\n\t\t\t\t\tthis.initialized = true;\n\t\t\t\t}\n\n\t\t\t\tif (WPTB_Helper.getPreviousSection() !== 'background_menu' && detail === 'background_menu') {\n\t\t\t\t\tassignCellClickHandlers();\n\t\t\t\t\tassignRowClickHandler();\n\t\t\t\t}\n\n\t\t\t\tif (WPTB_Helper.getPreviousSection() === 'background_menu' && detail !== 'background_menu') {\n\t\t\t\t\tremoveCellClickHandlers();\n\t\t\t\t\tremoveRowHandlers();\n\t\t\t\t\tremoveHighlights();\n\t\t\t\t\tclearSelection();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// reapply options after table changed events\n\t\t\tdocument.addEventListener('wp-table-builder/table-changed/after', () => {\n\t\t\t\tthis.applyOptions();\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Watch store mutations.\n\t\t *\n\t\t * @param {Object} suppliedStore store object\n\t\t */\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst watchStoreMutations = (suppliedStore) => {\n\t\t\tsuppliedStore.subscribe(({ type, payload }) => {\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'updateHoveredRowElement':\n\t\t\t\t\t\tif (payload) {\n\t\t\t\t\t\t\t// update row selector position on hovered row element changes\n\t\t\t\t\t\t\trowSelectorPosition(payload);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Define a flux store for background menu.\n\t\t *\n\t\t * @param {Object} storeObject store object\n\t\t */\n\t\tthis.addStore = (storeObject) => {\n\t\t\tif (!store) {\n\t\t\t\tstore = storeObject;\n\t\t\t\twatchStoreMutations(store);\n\t\t\t}\n\t\t};\n\t}\n\n\t// create singleton instance for background menu component\n\tconst singletonInstance = new BackgroundMenu();\n\n\t// initialize background menu component\n\tsingletonInstance.init();\n\n\treturn singletonInstance;\n});\n","(function () {\n    var WPTB_Builder = function () {\n        var table_id = WPTB_Helper.detectMode();\n        if ( table_id ) {\n            var http = new XMLHttpRequest(),\n                urlSet = ajaxurl + \"?action=get_table\" + '&id=' + table_id;\n            http.open('GET', urlSet, true);\n            http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n            http.onreadystatechange = function (d) {\n                if (this.readyState == 4 && this.status == 200) {\n                    var ans = JSON.parse( http.responseText );\n                    document.getElementById('wptb-setup-name').value = ans[0];\n                        \n                    if( ans[1] ) {\n                        // @deprecated old generate logic\n                        // document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n                        let wptbTableSetupEl = document.getElementsByClassName('wptb-table-setup')[0];\n                        wptbTableSetupEl.appendChild( WPTB_Parser( ans[1] ) );\n                        \n                        let body = document.getElementsByTagName('body')[0];\n                        \n                        WPTB_Table();\n                        let element = document.querySelector( '.wptb-preview-table' );\n                        if( element ) {\n                            let infArr = element.className.match( /wptb-element-((.+-)\\d+)/i );\n                            if( ! infArr ) {\n                                element.classList.add( 'wptb-element-main-table_setting-' + table_id );\n                            }\n                            \n                            if( element.dataset.wptbTableContainerMaxWidth ) {\n                                wptbTableSetupEl.style.maxWidth = element.dataset.wptbTableContainerMaxWidth + 'px';\n                                \n                                element.tdDefaultWidth();\n                            }\n                        }\n                        \n                        //WPTB_LeftPanel();\n                        WPTB_Settings();\n                        \n                        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                        wptbTableStateSaveManager.tableStateSet();\n                    } else {\n                        document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n                    }\n                    \n                    return;\n                }\n            };\n            http.send(null);\n        } else {\n            // @deprecated old generate logic\n            // document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n        document.counter = new ElementCounters();\n        document.select = new MultipleSelect();\n\n        var initializer = WPTB_Initializer();\n        settings = WPTB_Settings();\n    };\n\n    let url = window.location.href,\n        regex = new RegExp('[?&]page=wptb-builder'),\n        results = regex.exec( url );\n    if ( results ) {\n        document.addEventListener('DOMContentLoaded', WPTB_Builder);\n    }\n})();","var WPTB_Cell = function ( callback, DOMElement ) {\n\n    function highlightRow(td) {\n        var parentRow = td.parentNode,\n            columnCount = parseInt(document.getElementById('wptb-columns-number').value),\n            tds = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n        for (var i = 0; i < tds.length; i++) {\n            tds[i].classList.remove('wptb-highlighted-row-first', 'wptb-highlighted-row-last', 'wptb-highlighted-row-inner', 'wptb-highlighted-column-first', 'wptb-highlighted-column-last', 'wptb-highlighted-column-inner');\n        }\n        for (var i = 0; i < columnCount; i++) {\n\n            var classToAdd = i == 0 ? 'wptb-highlighted-row-first' : i == columnCount - 1 ? 'wptb-highlighted-row-last' : 'wptb-highlighted-row-inner';\n            var ttd = parentRow.getElementsByTagName('td')[i];\n            if (ttd !== td) {\n                ttd.classList.add(classToAdd);\n            }\n        }\n    }\n\n    function highlightColumn(td) {\n\n        var index,\n            parentRow = td.parentNode,\n        columnCount = parseInt(document.getElementById('wptb-columns-number').value), rowCount = parseInt(document.getElementById('wptb-rows-number').value), table = document.getElementsByClassName('wptb-preview-table')[0];\n        for (var i = 0; i < columnCount; i++) {\n            if (parentRow.getElementsByTagName('td')[i] === td) {\n                index = i;\n                break;\n            }\n        }\n\n        for (var i = 0; i < rowCount; i++) {\n            var classToAdd = i == 0 ? 'wptb-highlighted-column-first' : i == rowCount - 1 ? 'wptb-highlighted-column-last' : 'wptb-highlighted-column-inner';\n            var tr = table.getElementsByTagName('tr')[i];\n            if (tr.getElementsByTagName('td')[index] !== td) {\n                tr.getElementsByTagName('td')[index].classList.add(classToAdd);\n            }\n        }\n    }\n\n    if( ! DOMElement ) {\n        DOMElement = document.createElement(\"td\");\n\n        DOMElement.style.padding = jQuery('#wptb-table-padding-number').val() + 'px';\n\n        var innerBorderWidth = jQuery('#wptb-table-inner-border-number').val();\n\n        if (innerBorderWidth != '' && parseInt(innerBorderWidth) != 0) {\n            DOMElement.style.border = innerBorderWidth + 'px solid ' + jQuery('#wptb-table-border-color').val();\n        }\n\n        DOMElement.classList.add('wptb-droppable', 'wptb-cell');\n\n        // Add Auto text field in each block\n        let element = WPTB_Helper.newElementProxy( 'text' )\n        element = element.getDOMElement();\n\n        DOMElement.appendChild( element )\n    }\n\n    DOMElement.draggable = false;\n    if ( callback ) {\n        DOMElement.onclick = callback;\n    }\n\n    // Cell double click handler\n    DOMElement.ondblclick = function( event ) {\n        event.stopPropagation();\n        let wptbTableSetup = document.querySelector('.wptb-table-setup')\n        if(wptbTableSetup && !wptbTableSetup.classList.contains('wptb-preview-table-manage-cells') &&\n            (event.target.dataset.yIndex !== '0' || wptbTableSetup.dataset.wptbSortableTable !== '1') &&\n            event.target == event.currentTarget) {\n            WPTB_Helper.wptbDocumentEventGenerate( 'table:cell:dblclick', event.target )\n\n            let element = WPTB_Helper.newElementProxy( 'text' )\n            element = element.getDOMElement()\n\n            DOMElement.appendChild( element )\n\n            WPTB_innerElementSet( element );\n        }\n    }\n\n    WPTB_innerElementSet( DOMElement );\n\n    WPTB_Helper.elementStartScript( DOMElement, 'table_cell_setting' );\n\n    let wptbPhElement = DOMElement.getElementsByClassName( 'wptb-ph-element' );\n\n    if ( wptbPhElement.length > 0 ) {\n        for( let i = 0; i < wptbPhElement.length; i++ ) {\n            wptbPhElement[i].getDOMElement = function() {\n                return wptbPhElement[i];\n            }\n\n            WPTB_innerElementSet( wptbPhElement[i] );\n\n            let wptbElementTypeClass = wptbPhElement[i].className.match( /wptb-element-((.+-)\\d+)/i );\n            if( wptbElementTypeClass && Array.isArray( wptbElementTypeClass ) ) {\n                let wptbTypeElementArr = wptbElementTypeClass[1].split( '-' );\n                wptbPhElement[i].kind = wptbTypeElementArr[0];\n                applyGenericItemSettings( wptbPhElement[i], wptbElementTypeClass[1] );\n                let wptbInternalActiveElement = wptbPhElement[i].getElementsByClassName( 'wptb-in-element' );\n                if ( wptbInternalActiveElement.length > 0 ) {\n                    for ( let j = 0; j < wptbInternalActiveElement.length; j++ ) {\n                        let wptbInternalActiveElementObj = {};\n                        wptbInternalActiveElementObj.getDOMElement = function() {\n                            return wptbInternalActiveElement[j];\n                        }\n\n                        applyGenericItemSettings( wptbInternalActiveElementObj );\n                    }\n                }\n            }\n        }\n    }\n\n    this.getDOMElement = function () {\n        return DOMElement;\n    };\n\n    this.setCoords = function (y, x) {\n        var el = this.getDOMElement();\n        el.dataset.yIndex = y;\n        el.dataset.xIndex = x;\n    };\n\n    this.getCoords = function () {\n        var coords,\n            el = this.getDOMElement();\n        coords.x = el.dataset.xIndex;\n        coords.y = el.dataset.yIndex;\n        return coords;\n    };\n\n    this.appendElement = function (node) {\n        getDOMElement().appendChild(node);\n    };\n\n    DOMElement.getCellDimensions = function() {\n\n        let tdStyleObj = window.getComputedStyle( this, null );\n\n        let tdPaddingLeft = tdStyleObj.getPropertyValue( 'padding-left' );\n        let tdPaddingRight = tdStyleObj.getPropertyValue( 'padding-right' );\n\n        let tdBorderLeftWidth = tdStyleObj.getPropertyValue( 'border-left-width' );\n        let tdBorderRightWidth = tdStyleObj.getPropertyValue( 'border-right-width' );\n\n        let tdPaddingTop = tdStyleObj.getPropertyValue( 'padding-top' );\n        let tdPaddingBottom = tdStyleObj.getPropertyValue( 'padding-bottom' );\n\n        let tdBorderTopWidth = tdStyleObj.getPropertyValue( 'border-top-width' );\n        let tdBorderBottomWidth = tdStyleObj.getPropertyValue( 'border-bottom-width' );\n\n        let width = parseInt( this.offsetWidth, 10 ) -\n            parseInt( tdPaddingLeft, 10 ) -\n            parseInt( tdPaddingRight, 10 );\n\n        let height = parseInt( this.offsetHeight, 10 ) -\n            parseInt( tdPaddingTop, 10 ) -\n            parseInt( tdPaddingBottom, 10 );\n        let table = WPTB_Helper.findAncestor( this, 'wptb-preview-table' );\n        if(table) {\n            if(table.style.borderCollapse === 'collapse') {\n                width = width - ( parseInt( tdBorderLeftWidth, 10 ) / 2 ) -\n                    ( parseInt( tdBorderRightWidth, 10 ) / 2 );\n                height = height - ( parseInt( tdBorderTopWidth, 10 ) / 2 ) -\n                    ( parseInt( tdBorderBottomWidth, 10 ) / 2 );\n                let tableFullStyleObj = window.getComputedStyle( table, null );\n                let tableBorderLeft = tableFullStyleObj.getPropertyValue( 'border-left-width' );\n                let tableBorderRight = tableFullStyleObj.getPropertyValue( 'border-right-width' );\n                let tableBorderTop = tableFullStyleObj.getPropertyValue( 'border-top-width' );\n                let tableBorderBottom = tableFullStyleObj.getPropertyValue( 'border-bottom-width' );\n\n                let tr = this.parentNode;\n                if( tr && tr.nodeName.toLowerCase() === 'tr' ) {\n                    if( tr.firstChild && tr.firstChild.dataset.xIndex === this.dataset.xIndex ) {\n                        if( parseInt( tableBorderLeft, 10 ) > parseInt( tdBorderLeftWidth, 10 ) ) {\n                            width += -( parseInt( tableBorderLeft, 10 ) - parseInt( tdBorderLeftWidth, 10 ) ) / 2;\n                        }\n                    }\n\n                    if( tr.lastChild && tr.lastChild.dataset.xIndex === this.dataset.xIndex ) {\n                        if( parseInt( tableBorderRight, 10 ) > parseInt( tdBorderRightWidth, 10 ) ) {\n                            width += -( parseInt( tableBorderRight, 10 ) - parseInt( tdBorderRightWidth, 10 ) ) / 2;\n                        }\n                    }\n\n                    let body = tr.parentNode;\n                    if( body && body.nodeName.toLowerCase() === 'body' ) {\n                        if( body.firstChild && body.firstChild.firstChild.dataset.yIndex === this.dataset.yIndex ) {\n                            if( parseInt( tableBorderTop, 10 ) > parseInt( tdBorderTopWidth, 10 ) ) {\n                                height += ( parseInt( tableBorderTop, 10 ) - parseInt( tdBorderTopWidth, 10 ) ) / 2;\n                            }\n                        }\n\n                        if( body.lastChild && body.lastChild.firstChild.dataset.yIndex === this.dataset.yIndex ) {\n                            if( parseInt( tableBorderBottom, 10 ) > parseInt( tdBorderBottomWidth, 10 ) ) {\n                                height += ( parseInt( tableBorderBottom, 10 ) - parseInt( tdBorderBottomWidth, 10 ) ) / 2;\n                            }\n                        }\n                    }\n                }\n            } else if(table.style.borderCollapse === 'separate') {\n                width = width - parseInt( tdBorderLeftWidth, 10 ) -\n                    parseInt( tdBorderRightWidth, 10 );\n                height = height - parseInt( tdBorderTopWidth, 10 ) -\n                    parseInt( tdBorderBottomWidth, 10 );\n            }\n        }\n\n        return {\n            width: parseInt( width ),\n            height: parseInt( height )\n        };\n    }\n\n    return this;\n};\n","let WPTB_CutGlueTable = {\n    cutTableHorizontally: function (rowBefore, table) {\n        if( table && table.rows[rowBefore] ) {\n            for( let i = 0; i < rowBefore; i++ ) {\n                let tableRowsIChildren = table.rows[i].children;\n\n                for( let j = 0; j < tableRowsIChildren.length; j++ ) {\n                    if ( tableRowsIChildren[j].rowSpan > 1 && tableRowsIChildren[j].rowSpan > rowBefore - i ) {\n                        let newTdRowspan = tableRowsIChildren[j].rowSpan - rowBefore + i;\n                        tableRowsIChildren[j].rowSpan = rowBefore - i;\n                        if( ! tableRowsIChildren[j].dataset.sameCellBeforeDivision ) {\n                            tableRowsIChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                        }\n\n                        let td;\n                        if(table.hasOwnProperty('wptbCell')) {\n                            td = new table.wptbCell( table.mark );\n                            td = td.getDOMElement();\n                        } else {\n                            td = document.createElement('td');\n                        }\n\n                        let tdTopStyle = tableRowsIChildren[j].getAttribute( 'style' );\n                        td.setAttribute( 'style', tdTopStyle );\n                        td.colSpan = tableRowsIChildren[j].colSpan;\n                        td.rowSpan = newTdRowspan;\n                        td.dataset.sameCellBeforeDivision = tableRowsIChildren[j].dataset.sameCellBeforeDivision;\n\n                        let dataXIndex = tableRowsIChildren[j].dataset.xIndex;\n                        let dataXIndexNext = parseInt( dataXIndex ) + parseInt( tableRowsIChildren[j].colSpan );\n                        let beforeTd;\n                        while( ! beforeTd && dataXIndexNext < table.maxCols ) {\n                            beforeTd = table.rows[rowBefore].querySelector( '[data-x-index=\"' + dataXIndexNext + '\"]' );\n                            dataXIndexNext++;\n                        }\n                        table.rows[rowBefore].insertBefore( td, beforeTd );\n\n                        WPTB_RecalculateIndexes(table);\n                    }\n                }\n            }\n        }\n    },\n    glueTableHorizontally: function (table) {\n        if(table) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' );\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] ) {\n                            if( tdsSameBeforeDivision[j].parentNode && tdsSameBeforeDivision[j + 1].parentNode &&\n                                ! tdsSameBeforeDivision[j].parentNode.classList.contains( 'wptb-row-moving' ) &&\n                                ! tdsSameBeforeDivision[j + 1].parentNode.classList.contains( 'wptb-row-moving' ) ) {\n                                if( ( tdsSameBeforeDivision[j + 1].dataset.yIndex == parseInt( tdsSameBeforeDivision[j].dataset.yIndex ) +\n                                    parseInt( tdsSameBeforeDivision[j].rowSpan ) ) ) {\n                                    tdsSameBeforeDivision[j].rowSpan += tdsSameBeforeDivision[j + 1].rowSpan;\n\n                                    let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                    for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                        tdsSameBeforeDivision[j].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                    }\n\n                                    let nextRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                    nextRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    cutTableVertically: function (col, table) {\n        for ( let i = 0; i < table.rows.length; i++ ) {\n            if( col < table.maxCols ) {\n                if( col != 0 && ( ! table.rows[i].querySelector( '[data-x-index=\"' + col + '\"]' ) ) ) {\n                    let rowChildren = table.rows[i].children;\n\n                    let td,\n                        rowChildrenLength = rowChildren.length,\n                        afterTd,\n                        rowSpanNewTd,\n                        colSpanOld,\n                        colSpanNewTd;\n                    for( let j = 0; j < rowChildrenLength; j++ ) {\n                        if( rowChildren[j].colSpan > 1 && parseInt( rowChildren[j].dataset.xIndex ) < col &&\n                            parseInt( rowChildren[j].dataset.xIndex ) + parseInt( rowChildren[j].colSpan ) > col ) {\n                            if(table.hasOwnProperty('wptbCell')) {\n                                td = new table.wptbCell( table.mark );\n                                td = td.getDOMElement();\n                            } else {\n                                td = document.createElement('td');\n                            }\n\n                            rowSpanNewTd = rowChildren[j].rowSpan;\n                            colSpanOld = rowChildren[j].colSpan;\n                            rowChildren[j].colSpan = col - rowChildren[j].dataset.xIndex;\n                            colSpanNewTd = colSpanOld - rowChildren[j].colSpan;\n\n                            if( ! rowChildren[j].dataset.sameCellBeforeDivision ) {\n                                rowChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                            }\n\n                            let tdLeftStyle = rowChildren[j].getAttribute( 'style' );\n                            td.setAttribute( 'style', tdLeftStyle );\n\n                            let tdAnalogThisX = table.querySelector( '[data-x-index=\"' + col + '\"]' );\n                            if( tdAnalogThisX ) {\n                                td.style.width = tdAnalogThisX.style.width;\n                            }\n\n                            let tdAnalogThisY = table.querySelector( '[data-y-index=\"' + i + '\"]' );\n                            if( tdAnalogThisY ) {\n                                td.style.height = tdAnalogThisY.style.height;\n                            }\n                            if( rowChildren[j + 1] ) {\n                                afterTd = rowChildren[j + 1];\n                            } else {\n                                afterTd = null;\n                            }\n\n                            table.rows[i].insertBefore( td, afterTd );\n                            td.colSpan = colSpanNewTd;\n                            td.rowSpan = rowSpanNewTd;\n                            td.dataset.sameCellBeforeDivision = rowChildren[j].dataset.sameCellBeforeDivision;\n                            i += rowSpanNewTd - 1;\n                            break\n                        }\n                    }\n                }\n            }\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    glueTableVertically: function (table) {\n        if( table ) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = [...table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' )];\n\n                    let jFirstTdGlue = null;\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] &&\n                            ! tdsSameBeforeDivision[j].classList.contains( 'wptb-column-moving' ) &&\n                            ! tdsSameBeforeDivision[j + 1].classList.contains( 'wptb-column-moving' ) ) {\n                            if( ( tdsSameBeforeDivision[j + 1].dataset.xIndex == parseInt( tdsSameBeforeDivision[j].dataset.xIndex ) +\n                                parseInt( tdsSameBeforeDivision[j].colSpan ) ) ) {\n                                if( jFirstTdGlue == null ) {\n                                    jFirstTdGlue = j;\n                                }\n                                tdsSameBeforeDivision[jFirstTdGlue].colSpan += tdsSameBeforeDivision[j + 1].colSpan;\n\n                                let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                    tdsSameBeforeDivision[jFirstTdGlue].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                }\n\n                                let thisRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                thisRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    }\n}\n","var WPTB_DropHandle = function (thisElem, e, hide = false) {\n\n    let wptbDropHandle,\n        wptbDropBorderMarker,\n        wptbDropBorderMarkerTop,\n        wptbDropBorderMarkerRight,\n        wptbDropBorderMarkerBottom,\n        wptbDropBorderMarkerLeft;\n\n    /**\n     * Add px suffix to a value\n     *\n     * @param {any} val value\n     * @returns {string} string value suffixed with px\n     */\n    function toPx(val){\n        return `${val}px`;\n    }\n\n    if(WPTB_Helper.getDragRelativeType() === 'td_relative'){\n        let cellRelatedDropHandle = document.querySelector('.wptb-cell-related-drop-handle');\n        if(hide && cellRelatedDropHandle ){\n            cellRelatedDropHandle.style.display = 'none';\n            return;\n        }\n       if(cellRelatedDropHandle === null){\n           const range = document.createRange();\n           range.setStart(document.body , 0);\n\n           const shadowRoot = range.createContextualFragment('<div class=\"wptb-cell-related-drop-handle\">Add to cell</div>').children[0];\n\n           document.body.appendChild(shadowRoot);\n           cellRelatedDropHandle = shadowRoot.children[0];\n       }\n\n       const parentTd = WPTB_Helper.getParentOfType('td', thisElem);\n       const {top,left,width,height} = parentTd.getBoundingClientRect();\n\n       if(!cellRelatedDropHandle){\n           return;\n       }\n\n        cellRelatedDropHandle.style.display = 'flex';\n        cellRelatedDropHandle.style.top = toPx(top);\n        cellRelatedDropHandle.style.width = toPx(width);\n        cellRelatedDropHandle.style.height = toPx(height);\n        cellRelatedDropHandle.style.left = toPx(left);\n\n       return;\n    }\n\n    if ( document.getElementsByClassName( 'wptb-drop-handle' ).length == 0 ) {\n        wptbDropHandle = document.createElement( 'div' );\n        wptbDropHandle.classList.add( 'wptb-drop-handle' );\n        \n        wptbDropBorderMarker = document.createElement( 'div' );\n        wptbDropBorderMarker.classList.add( 'wptb-drop-border-marker' );\n        \n        wptbDropBorderMarkerTop = document.createElement( 'div' ),\n        wptbDropBorderMarkerRight = document.createElement( 'div' ),\n        wptbDropBorderMarkerBottom = document.createElement( 'div' ),\n        wptbDropBorderMarkerLeft = document.createElement( 'div' );\n        \n        wptbDropBorderMarkerTop.classList.add( 'wptb-drop-border-marker-top' );\n        wptbDropBorderMarkerRight.classList.add( 'wptb-drop-border-marker-right' );\n        wptbDropBorderMarkerBottom.classList.add( 'wptb-drop-border-marker-bottom' );\n        wptbDropBorderMarkerLeft.classList.add( 'wptb-drop-border-marker-left' );\n        \n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerTop );\n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerRight );\n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerBottom );\n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerLeft );\n        \n        let body = document.getElementsByTagName( 'body' );\n        if ( body.length > 0 ) {\n            body[0].appendChild( wptbDropHandle );\n            body[0].appendChild( wptbDropBorderMarker );\n        }\n        \n        wptbDropHandle.ondragenter = function () {\n            if (e.target.classList.contains('wptb-empty')) {\n                e.preventDefault();\n                return false;\n            }\n        }\n\n        wptbDropHandle.ondragover = function (e) {\n            e.preventDefault();            \n        }\n\n        wptbDropHandle.ondragleave = function () {\n\n        }\n        wptbDropHandle.ondrop = function (e) {\n            e.preventDefault();\n            let element;\n            \n            if ( e.dataTransfer.getData('wptbElement') ) {\n                element = WPTB_Helper.newElementProxy( e.dataTransfer.getData('wptbElement') );\n                element = element.getDOMElement();\n            } else {\n                element = document.getElementsByClassName( e.dataTransfer.getData('node') )[0];\n                element.classList.remove( 'wptb-moving-mode' );\n                element.classList.remove( 'wptb-moving-into-same-elem' );\n                element.wptbMovingMode = 1;\n            }\n            \n            let td;\n            if( wptbDropHandle.dataset.text == 'Drop Here' ) {\n                thisElem = wptbDropHandle.getDOMParentElement();\n                if ( thisElem.nodeName.toLowerCase() == 'td' ) {\n                    td = wptbDropHandle.getDOMParentElement();\n                    td.appendChild( element );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                }\n            } else {\n                let innerElement = wptbDropHandle.getDOMParentElement();\n                td = innerElement.parentNode;\n                \n                if( wptbDropHandle.dataset.text == 'Above Element' ) {\n                    td.insertBefore( element, innerElement );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                } else if( wptbDropHandle.dataset.text == 'Below Element' ) {\n                    let innerElementNext = innerElement.nextSibling;\n                    td.insertBefore( element, innerElementNext );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                }\n            }\n            \n            let thisRow = td.parentNode;\n            if( WPTB_Helper.rowIsTop( thisRow ) ) {\n                let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n\n                if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                    WPTB_Helper.dataTitleColumnSet( table );\n                }\n            }\n            \n            wptbDropHandle.style.display = 'none';\n            wptbDropBorderMarker.style.display = 'none';\n            \n            WPTB_innerElementSet( element );\n            if( ! element.classList.contains( 'wptb-image-container' ) || element.wptbMovingMode == 1 ) {\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n                element.wptbMovingMode == undefined;\n            }\n        }\n        let wptbContainer = document.querySelector( '.wptb-container' );\n        wptbContainer.onscroll = function() {\n            wptbDropHandle.style.display = 'none';\n            wptbDropBorderMarker.style.display = 'none';\n        }\n    } else {\n        wptbDropHandle = document.getElementsByClassName( 'wptb-drop-handle' )[0];\n        wptbDropBorderMarker = document.getElementsByClassName( 'wptb-drop-border-marker' )[0];\n    }\n    if( thisElem && thisElem.nodeName.toLowerCase() == 'td' && \n            thisElem.getElementsByClassName( 'wptb-ph-element' ).length != 0) {\n        return;\n    }\n\n    if( thisElem && thisElem.nodeName.toLowerCase() == 'td' && \n            thisElem.classList.contains('wptb-empty')) {\n        return;\n    }\n    \n    let thisRow;\n    if ( thisElem.localName == 'td' ) {\n        thisRow = thisElem.parentNode;\n    } else if ( thisElem.localName == 'div' && thisElem.classList.contains( 'wptb-ph-element' ) ) {\n        thisRow = thisElem.parentNode.parentNode;\n    }\n    \n    if( WPTB_Helper.rowIsTop( thisRow ) ) {\n        let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n        \n        if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n            let indics = e.dataTransfer.types;\n            let notDragEnter = false;\n            for ( let i = 0; i < indics.length; i++ ) {\n                let infArr = indics[i].match( /wptbelindic-([a-z]+)/i );\n                if ( infArr && infArr[1] != 'text' ) {\n                    notDragEnter = true;\n                    break;\n                }\n            }\n            if( notDragEnter ) {\n                return;\n            }\n        }\n    }\n    \n    wptbDropHandle.style.width = thisElem.offsetWidth + 'px';\n    let height = thisElem.offsetHeight,\n        coordinatesElement = thisElem.getBoundingClientRect(),\n        left = parseFloat( coordinatesElement.left ),\n        top;\n    wptbDropHandle.style.left = left + 'px';\n    \n    if( e.dataTransfer.types.indexOf( 'wptb-moving-mode' ) != -1 ) {\n        let elementDrag = document.getElementsByClassName( 'wptb-moving-mode' )[0];\n        if( thisElem == elementDrag ) {\n            wptbDropHandle.classList.add('wptb-moving-into-same-elem');\n            wptbDropBorderMarker.classList.add('wptb-moving-into-same-elem');\n        } else {\n            wptbDropHandle.classList.remove('wptb-moving-into-same-elem');\n            wptbDropBorderMarker.classList.remove('wptb-moving-into-same-elem');\n        }\n    }\n    \n    wptbDropHandle.getDOMParentElement = function() {\n        return thisElem;\n    }\n    \n    wptbDropHandle.style.display = 'block';\n    wptbDropBorderMarker.style.display = 'block';\n    if( thisElem.nodeName.toLowerCase() != 'td' ) {\n        let y = e.offsetY==undefined?e.layerY:e.offsetY;\n        top = parseFloat( coordinatesElement.top ) - parseFloat( 11 );\n        wptbDropHandle.dataset.text = 'Above Element';\n        if ( y > height/2 ) {\n            top = parseFloat( coordinatesElement.top ) + height - 1;\n            wptbDropHandle.dataset.text = 'Below Element';\n        }\n    } else {\n        wptbDropHandle.dataset.text = 'Drop Here';\n        top = parseFloat( coordinatesElement.top ) + height/2 - 5;\n    }\n    wptbDropHandle.style.top = top + 'px';\n\n    wptbDropBorderMarker.style.top = coordinatesElement.top + 'px';\n    wptbDropBorderMarker.style.left = coordinatesElement.left + 'px';\n\n    wptbDropBorderMarkerTop = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-top' );\n    wptbDropBorderMarkerTop.style.width = ( parseFloat( thisElem.offsetWidth ) - parseFloat( 1 ) ) + 'px';\n\n    wptbDropBorderMarkerRight = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-right' );\n    wptbDropBorderMarkerRight.style.height = ( parseFloat( coordinatesElement.bottom ) - parseFloat( coordinatesElement.top ) - 1 ) + 'px';\n    wptbDropBorderMarkerRight.style.left = wptbDropBorderMarkerTop.style.width;\n\n    wptbDropBorderMarkerBottom = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-bottom' );\n    wptbDropBorderMarkerBottom.style.width = wptbDropBorderMarkerTop.style.width;\n    wptbDropBorderMarkerBottom.style.top = wptbDropBorderMarkerRight.style.height;\n\n    wptbDropBorderMarkerLeft = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-left' );\n    wptbDropBorderMarkerLeft.style.height = wptbDropBorderMarkerRight.style.height;\n}","var ElementCounters = function () {\n\n\tvar priv = [];\n\tpriv['text'] = 0;\n\tpriv['image'] = 0;\n\tpriv['list'] = 0;\n\tpriv['button'] = 0;\n\n\tthis.increment = function (key) {\n\t\tif (!(key in priv)) {\n\t\t\treturn;\n\t\t}\n\t\tpriv[key]++;\n\t}\n\n\tthis.nextIndex = function (key) {\n\t\tif (!(key in priv)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn priv[key] + 1;\n\t}\n\n\treturn this;\n\n};","var WPTB_ElementObject = function ( data ) {\n    let DOMElement, kindIndexProt, copy;\n    if( ! data.elemProt ) {\n        DOMElement = document.createElement('div'),\n        kindIndexProt = undefined,\n        copy = false;\n        DOMElement.classList.add( 'wptb-' + data.kind + '-container', 'wptb-ph-element' );\n    \n        let wpTemplateId = 'wptb-' + data.kind + '-content';\n        let template = wp.template( wpTemplateId );\n        data.node = DOMElement;\n\n        let itemHtml = template( data );\n        \n        itemHtml = itemHtml.replace(/\\r|\\n|\\t/g, '').trim();\n        DOMElement.innerHTML = itemHtml;\n    } else {\n        DOMElement = data.elemProt.cloneNode( true );\n        DOMElement.classList.remove( 'wptb-directlyhovered' );\n        let wptbElementMutch = data.elemProt.className.match( /wptb-element-((.+-)\\d+)/i );\n        if ( wptbElementMutch && Array.isArray( wptbElementMutch ) ) {\n            kindIndexProt = wptbElementMutch[1];\n        };\n        copy = true;\n        \n        if( data.tinyMceClear ) {\n            DOMElement = WPTB_Helper.elementClearFromTinyMce( DOMElement );\n        }\n    }\n    \n    let inElems = DOMElement.querySelectorAll( '.wptb-in-element' );\n    if( inElems.length > 0 ) {\n        for ( let i = 0; i < inElems.length; i++ ) {\n            let inElemObj = {};\n            inElemObj.getDOMElement = function() {\n                return inElems[i];\n            }\n            \n            applyGenericItemSettings( inElemObj );\n        }\n    }\n     \n    window.addEventListener( 'item:onmouseenter', function( event ) {\n        //console.log( event );\n    }, false);\n    \n    \n    this.kind = data.kind;\n    this.getDOMElement = function () {\n        return DOMElement;\n    };\n    \n    applyGenericItemSettings( this, kindIndexProt, copy );\n    return this;\n}\n","var WPTB_ElementOptions = function ( element, index, kindIndexProt ) {\n\n    var node = element.getDOMElement();\n    node.addEventListener( 'click', function() {\n        WPTB_Helper.elementOptionsSet( element.kind, this );\n    }, {capture: true} );\n};","/**\n *\n * @param {HTMLElement} table\n * @param {string} typeFirst\n * @param {strinig} typeSecond\n * @param {func} workFunction\n * @param {object} responsiveFront\n */\nvar WPTB_GetDirectionAfterReconstruction = function (table, typeFirst, typeSecond,verticalProp, responsiveFront) {\n\n    let itemsPerHeader = 0;\n    let tableMaxCols = table.maxCols;\n    const switchMode = {};\n    let type = [];\n    if (responsiveFront && responsiveFront.getDirective(table)) {\n        switchMode.switch = function (e) {\n            const directives = responsiveFront.getDirective(table)\n\n            let sizeRangeId = 'desktop';\n            if (e && e.detail) {\n                sizeRangeId = e.detail.sizeRangeId;\n            }\n            type = [typeFirst, 1];\n            if (sizeRangeId !== 'desktop') {\n                if (directives.hasOwnProperty('modeOptions')) {\n                    const mode = directives.responsiveMode;\n                    const modeOptions = directives.modeOptions[mode];\n\n                    if (\n                        modeOptions.hasOwnProperty('topRowAsHeader') &&\n                        modeOptions.topRowAsHeader.hasOwnProperty(sizeRangeId) &&\n                        modeOptions.topRowAsHeader[sizeRangeId]\n                    ) {\n                        if (\n                            modeOptions.hasOwnProperty('cellStackDirection') &&\n                            modeOptions.cellStackDirection.hasOwnProperty(sizeRangeId)\n                        ) {\n                            if (modeOptions.cellStackDirection[sizeRangeId] === 'row') {\n                                type = [typeSecond, 2];\n                                itemsPerHeader = tableMaxCols - 1;\n                            } else if (modeOptions.cellStackDirection[sizeRangeId] === 'column') {\n                                if (modeOptions.hasOwnProperty('cellsPerRow')) {\n                                    itemsPerHeader = modeOptions.cellsPerRow[sizeRangeId];\n                                }\n                            }\n                        }\n                    } else {\n                        itemsPerHeader = 0;\n                    }\n                }\n            } else {\n                itemsPerHeader = 0;\n            }\n            return {type, itemsPerHeader}\n        };\n    } else {\n        switchMode.switch = function (e) {\n            type = [typeFirst, 1];\n            if (table.classList.contains('wptb-mobile-view-active')) {\n                if (table.classList.contains('wptb-table-preview-head')) {\n                    type = [typeSecond, 2];\n                    if(type === verticalProp) {\n                        itemsPerHeader = tableMaxCols - 1;\n                    }\n                }\n                let newTable = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n                return {type, itemsPerHeader, newTable};\n            }\n\n            return {type, itemsPerHeader}\n        };\n    }\n\n    return switchMode;\n}\n","/**\n * WPTB_HeaderToolbox\n *\n * @param {string} wrapperQuery wrapper query for toolbox items\n * @return {Object} header toolbox object\n * @class\n */\n// eslint-disable-next-line camelcase,no-unused-vars\nconst WPTB_HeaderToolbox = function (wrapperQuery) {\n\tthis.wrapperQuery = wrapperQuery;\n\tthis.element = document.querySelector(wrapperQuery);\n\tthis.topMargin = 2;\n\n\t/**\n\t * Assign events to toolbox buttons.\n\t */\n\tconst assignButtons = () => {\n\t\t// use data-button-type dataset property to call related section\n\t\tconst headerButtons = Array.from(this.element.querySelectorAll('[data-button-type]'));\n\n\t\t// eslint-disable-next-line array-callback-return\n\t\theaderButtons.map((button) => {\n\t\t\tbutton.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tWPTB_Helper.activateSection(e.target.dataset.buttonType);\n\t\t\t});\n\t\t});\n\t};\n\n\t/**\n\t * Toggle visibility of toolbox with the given argument.\n\t *\n\t * @param {boolean} show show toolbox\n\t */\n\tconst toggleToolboxVisibility = (show = false) => {\n\t\tlet { height } = this.element.getBoundingClientRect();\n\n\t\tif (show) {\n\t\t\theight = 0;\n\t\t}\n\n\t\tthis.element.style.top = `calc( 100% - ${height + this.topMargin}px)`;\n\t};\n\n\t/**\n\t * Initialize header toolbox.\n\t */\n\tconst init = () => {\n\t\tassignButtons();\n\t\t// bind toolbox to table generated event\n\t\tdocument.addEventListener('wptb:table:generated', () => {\n\t\t\tthis.element.style.display = 'flex';\n\t\t\tconst { width } = this.element.getBoundingClientRect();\n\t\t\tthis.element.style.left = `calc( 50% - ${width / 2}px)`;\n\n\t\t\tconst hideList = ['table_responsive_menu', 'manage_cells', 'cell_settings'];\n\n\t\t\t// hide toolbox at manage cells and responsive menus\n\t\t\tdocument.addEventListener('wptbSectionChanged', ({ detail }) => {\n\t\t\t\ttoggleToolboxVisibility(!hideList.includes(detail));\n\t\t\t});\n\n\t\t\t// toggle visibility on startup\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tconst { currentSection } = WPTB_Helper;\n\t\t\ttoggleToolboxVisibility(!hideList.includes(currentSection));\n\t\t});\n\t};\n\n\treturn { init };\n};\n","var WPTB_Helper = {\n\thexToRgb(hex) {\n\t\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\treturn result ? `rgb(${parseInt(result[1], 16)},${parseInt(result[2], 16)},${parseInt(result[3], 16)})` : null;\n\t},\n\trgbToHex(rgb) {\n\t\tif (rgb) {\n\t\t\tif (WPTB_Helper.isHex(rgb)) return rgb;\n\n\t\t\tlet rgbm = rgb.match(\n\t\t\t\t/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?((?:[0-9]*[.])?[0-9]+)[\\s+]?\\)/i\n\t\t\t);\n\t\t\tif (rgbm && rgbm.length === 5) {\n\t\t\t\treturn `#${`0${parseInt(rgbm[1], 10).toString(16).toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[2], 10)\n\t\t\t\t\t.toString(16)\n\t\t\t\t\t.toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[3], 10).toString(16).toUpperCase()}`.slice(\n\t\t\t\t\t-2\n\t\t\t\t)}${`0${Math.round(parseFloat(rgbm[4], 10) * 255)\n\t\t\t\t\t.toString(16)\n\t\t\t\t\t.toUpperCase()}`.slice(-2)}`;\n\t\t\t}\n\t\t\trgbm = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n\t\t\tif (rgbm && rgbm.length === 4) {\n\t\t\t\treturn `#${`0${parseInt(rgbm[1], 10).toString(16).toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[2], 10)\n\t\t\t\t\t.toString(16)\n\t\t\t\t\t.toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[3], 10).toString(16).toUpperCase()}`.slice(-2)}`;\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t\treturn '';\n\t},\n\tisHex(hex) {\n\t\tconst regex = new RegExp('^#(?:[A-Fa-f0-9]{3}){1,2}(?:[0-9]?){1,2}$');\n\t\treturn regex.test(hex);\n\t},\n\tgetElementIcon(icon_directory) {\n\t\tconst hostName = `${location.protocol}//${location.hostname}`;\n\t\tconst img = document.createElement('img');\n\t\timg.src = icon_directory;\n\t\treturn img;\n\t},\n\telementDragEndClear() {\n\t\tconst wptbMovingMode = document.getElementsByClassName('wptb-moving-mode');\n\t\tif (wptbMovingMode.length > 0) {\n\t\t\tfor (let i = 0; i < wptbMovingMode.length; i++) {\n\t\t\t\twptbMovingMode[i].classList.remove('wptb-moving-mode');\n\t\t\t}\n\t\t}\n\n\t\tconst wptbDropHandles = document.getElementsByClassName('wptb-drop-handle');\n\t\tif (wptbDropHandles.length > 0) {\n\t\t\tfor (let i = 0; i < wptbDropHandles.length; i++) {\n\t\t\t\twptbDropHandles[i].style.display = 'none';\n\t\t\t}\n\t\t}\n\n\t\tconst wptbDropBorderMarkers = document.getElementsByClassName('wptb-drop-border-marker');\n\t\tif (wptbDropBorderMarkers.length > 0) {\n\t\t\tfor (let i = 0; i < wptbDropBorderMarkers.length; i++) {\n\t\t\t\twptbDropBorderMarkers[i].style.display = 'none';\n\t\t\t}\n\t\t}\n\t},\n\tlinkHttpCheckChange(link, convertToAbs = false) {\n\t\tif (link) {\n\t\t\t// even though it is not a best practice and a huge security risk, sometimes our users use javascript tag at href attributes, this check will make sure those tags will not be modified and returned as they are\n\t\t\tif (link.match(/^(javascript:)(.+)$/)) {\n\t\t\t\treturn link;\n\t\t\t}\n\t\t\t// relative link checking\n\t\t\t// if link starts with '/', assume it is a relative link to the origin of the current site\n\t\t\tif (link.match(/^\\/([\\S]+)$/)) {\n\t\t\t\tif (convertToAbs) {\n\t\t\t\t\tconst currentLocation = document.location;\n\t\t\t\t\tlet { origin } = currentLocation;\n\n\t\t\t\t\t// strip out the '/' at the end of the origin name if there is any\n\t\t\t\t\tif (origin.match(/^(.+)\\/$/)) {\n\t\t\t\t\t\torigin = origin.slice(-1);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `${origin}${link}`;\n\t\t\t\t}\n\t\t\t\treturn link;\n\t\t\t}\n\t\t\tif (link.indexOf('http://') == -1 && link.indexOf('https://') == -1) {\n\t\t\t\tconst linkArr = link.split('/');\n\t\t\t\tlet linkClean;\n\t\t\t\tif (Array.isArray(linkArr) && linkArr.length > 0) {\n\t\t\t\t\tlinkClean = linkArr[linkArr.length - 1];\n\t\t\t\t}\n\t\t\t\treturn `${document.location.protocol}//${linkClean}`;\n\t\t\t}\n\t\t\treturn link;\n\t\t}\n\t\treturn '';\n\t},\n\tdataTitleColumnSet(table) {\n\t\t// TODO dataTitleColumnSet\n\t\t// let rows = table.rows,\n\t\t//     rowHead = rows[0];\n\t\t// let computedStyleRowHead = getComputedStyle( rowHead );\n\t\t//\n\t\t// let rowHeadChildren = rowHead.children;\n\t\t// let contentsForHeader = {};\n\t\t// for( let i = 0; i < rowHeadChildren.length; i++ ) {\n\t\t//     let tdElements = rowHeadChildren[i].children;\n\t\t//\n\t\t//     for( let j = 0; j < tdElements.length; j++ ) {\n\t\t//         let element = tdElements[j];\n\t\t//         if( element.classList.contains( 'wptb-ph-element' ) ) {\n\t\t//             let infArr = element.className.match( /wptb-element-(.+)-(\\d+)/i );\n\t\t//             if( infArr[1] == 'text' ) {\n\t\t//                 let p = element.querySelector( 'p' ),\n\t\t//                     textContent = p.textContent,\n\t\t//                     textAlign = p.style.textAlign;\n\t\t//                     contentsForHeader[rowHeadChildren[i].dataset.xIndex] = [textContent, element.style.fontSize,\n\t\t//                         element.style.color, computedStyleRowHead.backgroundColor, textAlign];\n\t\t//                 break;\n\t\t//             }\n\t\t//         }\n\t\t//     }\n\t\t//     if( ! contentsForHeader[rowHeadChildren[i].dataset.xIndex] ) {\n\t\t//         contentsForHeader[rowHeadChildren[i].dataset.xIndex] = ['', '',\n\t\t//                     '', computedStyleRowHead.backgroundColor, ''];\n\t\t//     }\n\t\t// }\n\t\t// for ( let i = 1; i < rows.length; i++ ) {\n\t\t//     let thisRow = rows[i],\n\t\t//         thisRowChildren = thisRow.children;\n\t\t//     for( let j = 0; j < thisRowChildren.length; j++ ) {\n\t\t//         if ( contentsForHeader[thisRowChildren[j].dataset.xIndex] ) {\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumn = contentsForHeader[thisRowChildren[j].dataset.xIndex][0];\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnFontSize = contentsForHeader[thisRowChildren[j].dataset.xIndex][1];\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnColor = contentsForHeader[thisRowChildren[j].dataset.xIndex][2];\n\t\t//             thisRowChildren[j].dataset.wptbTitleBackgroundColor = contentsForHeader[thisRowChildren[j].dataset.xIndex][3];\n\t\t//             thisRowChildren[j].dataset.wptbTitleAlign = contentsForHeader[thisRowChildren[j].dataset.xIndex][4];\n\t\t//         } else {\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumn = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnFontSize = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnColor = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleBackgroundColor = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleAlign = null;\n\t\t//         }\n\t\t//     }\n\t\t// }\n\t},\n\tfindAncestor(el, cls) {\n\t\twhile ((el = el.parentElement) && !el.classList.contains(cls));\n\t\treturn el;\n\t},\n\trowIsTop(row) {\n\t\tconst parent = row.parentNode;\n\t\tif (parent.children[0] == row) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tgetSelectionText() {\n\t\tlet txt = '';\n\t\tif ((txt = window.getSelection)) {\n\t\t\ttxt = window.getSelection().toString();\n\t\t} else {\n\t\t\ttxt = document.selection.createRange().text;\n\t\t}\n\t\treturn txt;\n\t},\n\telementOptionsPanelClear() {\n\t\tconst elementOptionsGroup = document.getElementById('element-options-group');\n\t\tif (elementOptionsGroup) {\n\t\t\telementOptionsGroup.innerHTML = '';\n\t\t}\n\t},\n\twpColorPickerCheckChangeForTableStateSaving(event) {\n\t\tif (event.originalEvent.type == 'external') {\n\t\t\tconst wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t\t\twptbTableStateSaveManager.tableStateSet();\n\t\t} else {\n\t\t\tconst wpPickerContainer = WPTB_Helper.findAncestor(event.target, 'wp-picker-container');\n\t\t\tif (wpPickerContainer) {\n\t\t\t\tif (event.originalEvent.type == 'square' || event.originalEvent.type == 'strip') {\n\t\t\t\t\tconst body = document.getElementsByTagName('body')[0];\n\t\t\t\t\tbody.removeEventListener('mouseup', WPTB_Helper.irisStripMouseUpStateSaveManager, false);\n\t\t\t\t\tbody.addEventListener('mouseup', WPTB_Helper.irisStripMouseUpStateSaveManager, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tirisStripMouseUpStateSaveManager() {\n\t\tconst wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t\twptbTableStateSaveManager.tableStateSet();\n\n\t\tconst body = document.getElementsByTagName('body')[0];\n\t\tbody.removeEventListener('mouseup', WPTB_Helper.irisStripMouseUpStateSaveManager, false);\n\t},\n\twpColorPickerClear(attribute, isId) {\n\t\tlet input;\n\t\tif (isId) {\n\t\t\tinput = [document.getElementById(attribute)];\n\t\t\tinput.length = 1;\n\t\t} else {\n\t\t\tinput = document.getElementsByClassName(attribute);\n\t\t}\n\t\tfor (let i = 0; i < input.length; i++) {\n\t\t\tconst wpPickerContainer = WPTB_Helper.findAncestor(input[i], 'wp-picker-container');\n\t\t\tif (wpPickerContainer) {\n\t\t\t\tconst parent = wpPickerContainer.parentNode;\n\t\t\t\tparent.removeChild(wpPickerContainer);\n\t\t\t\tconst newInput = document.createElement('input');\n\t\t\t\tif (isId) {\n\t\t\t\t\tnewInput.setAttribute('id', attribute);\n\t\t\t\t} else {\n\t\t\t\t\tnewInput.classList.add('wptb-element-property', attribute);\n\t\t\t\t}\n\t\t\t\tnewInput.value = '';\n\t\t\t\tparent.appendChild(newInput);\n\t\t\t}\n\t\t}\n\t},\n\tdetectMode() {\n\t\tconst url = window.location.href;\n\t\tconst regex = new RegExp('[?&]table(=([^&#]*)|&|#|$)');\n\t\tconst results = regex.exec(url);\n\t\tif (!results) return false;\n\t\tif (!results[2]) return '';\n\t\treturn decodeURIComponent(results[2].replace(/\\+/g, ' '));\n\t},\n\tgetTableId() {\n\t\tlet tableId = WPTB_Helper.detectMode();\n\t\tif (!tableId) {\n\t\t\ttableId = 'startedid-0';\n\t\t}\n\n\t\treturn tableId;\n\t},\n\tgetColumnWidth(table, cell) {\n\t\tconst { xIndex } = cell.dataset;\n\t\tconst xIndexes = table.querySelectorAll(`[data-x-index=\"${xIndex}\"]`);\n\t\tlet cellWidth = cell.getCellDimensions().width;\n\t\tfor (let i = 0; i < xIndexes.length; i++) {\n\t\t\tif (cellWidth > xIndexes[i].getCellDimensions().width) {\n\t\t\t\tcellWidth = xIndexes[i].getCellDimensions().width;\n\t\t\t}\n\t\t}\n\t\treturn cellWidth;\n\t},\n\tgetRowHeight(table, cell) {\n\t\tconst { yIndex } = cell.dataset;\n\t\tconst yIndexes = table.querySelectorAll(`[data-y-index=\"${yIndex}\"]`);\n\t\tlet cellHeight = cell.getCellDimensions().height;\n\t\tfor (let i = 0; i < yIndexes.length; i++) {\n\t\t\tif (cellHeight > yIndexes[i].getCellDimensions().height) {\n\t\t\t\tcellHeight = yIndexes[i].getCellDimensions().height;\n\t\t\t}\n\t\t}\n\t\treturn cellHeight;\n\t},\n\tnewElementProxy(el) {\n\t\tif (el) {\n\t\t\tconst data = { kind: el };\n\t\t\treturn new WPTB_ElementObject(data);\n\t\t}\n\t},\n\twpColorPickerChange(event, ui) {\n\t\tlet uiColor;\n\t\tif (ui) {\n\t\t\tuiColor = ui.color.toString();\n\t\t} else {\n\t\t\tuiColor = '';\n\t\t}\n\n\t\tconst parent = WPTB_Helper.findAncestor(event.target, 'wp-picker-input-wrap').getElementsByClassName(\n\t\t\t'wptb-color-picker'\n\t\t)[0];\n\t\tlet classe;\n\t\tlet type;\n\t\tlet ps;\n\t\tlet number;\n\t\tclasse = parent.dataset.element.match(/wptb-options-(.+)-(\\d+)/i);\n\t\ttype = classe[1];\n\t\tnumber = classe[2];\n\t\tconst affectedEl = document.getElementsByClassName(`wptb-element-${type}-${number}`)[0];\n\t\tif (type == 'button') {\n\t\t\tif (parent.dataset.type == 'button-text-color') {\n\t\t\t\taffectedEl.getElementsByClassName('wptb-button')[0].style.color = uiColor;\n\t\t\t} else {\n\t\t\t\taffectedEl.getElementsByClassName('wptb-button')[0].style.backgroundColor = uiColor;\n\t\t\t}\n\t\t} else if (type == 'list') {\n\t\t\tconst ps = affectedEl.querySelectorAll('p');\n\t\t\tif (ps.length > 0) {\n\t\t\t\tfor (let i = 0; i < ps.length; i++) {\n\t\t\t\t\tps[i].style.color = uiColor;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type == 'star_rating') {\n\t\t\tif (parent.dataset.type == 'star-color') {\n\t\t\t\tconst ratingStar = affectedEl.querySelectorAll('li');\n\t\t\t\tfor (let i = 0; i < ratingStar.length; i++) {\n\t\t\t\t\tconst span = ratingStar[i].getElementsByTagName('span');\n\t\t\t\t\tfor (let j = 0; j < span.length; j++) {\n\t\t\t\t\t\tspan[j].style.fill = uiColor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (parent.dataset.type == 'numeral-rating-color') {\n\t\t\t\tconst wptbTextMessageSize = affectedEl.querySelector('.wptb-number-rating');\n\t\t\t\twptbTextMessageSize.style.color = uiColor;\n\t\t\t}\n\t\t} else {\n\t\t\taffectedEl.style.color = uiColor;\n\t\t}\n\t},\n\tnumberImputSize(wptbNumberInputs, maxCount, maxValue) {\n\t\twptbNumberInputs.onkeydown = function () {\n\t\t\tlet thisValue = this.value;\n\t\t\tthisValue = String(thisValue);\n\t\t\tif (thisValue[0] == 0) {\n\t\t\t\tthis.value = '';\n\t\t\t} else {\n\t\t\t\tthisValue = thisValue.substring(0, maxCount);\n\t\t\t\tthis.value = thisValue;\n\t\t\t}\n\t\t};\n\t\twptbNumberInputs.onkeyup = function () {\n\t\t\tconst thisValue = this.value;\n\t\t\tif (parseInt(thisValue, 10) > parseInt(maxValue, 10)) {\n\t\t\t\tthis.value = maxValue;\n\t\t\t}\n\n\t\t\tconst wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t\t\twptbTableStateSaveManager.tableStateSet();\n\t\t};\n\t},\n\tucfirst(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t},\n\twptbDocumentEventGenerate(eventName, element, details) {\n\t\tif (eventName && element) {\n\t\t\tif (!details) {\n\t\t\t\tdetails = true;\n\t\t\t}\n\t\t\tconst event = new CustomEvent(eventName, { detail: details, bubbles: true });\n\t\t\telement.dispatchEvent(event);\n\t\t}\n\t},\n\t// run script for the pointed element\n\telementStartScript(element, kind) {\n\t\t// let script = element.getElementsByTagName( 'script' );\n\t\tif (!kind) {\n\t\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tkind = infArr[1];\n\t\t\t}\n\t\t}\n\n\t\tif (kind) {\n\t\t\t//                let wpTemplateId = 'wptb-' + kind + '-script';\n\t\t\t//                let template = wp.template( wpTemplateId );\n\t\t\t//                let data  = {elemClass: infArr[0]};\n\t\t\t//                let elementScriptText = template( data );\n\t\t\t//                elementScriptText = elementScriptText.replace(/\\r|\\n|\\t/g, '').trim();\n\t\t\t//\n\t\t\t//                let scriptNew = document.createElement( 'script' );\n\t\t\t//                scriptNew.setAttribute( 'type', 'text/javascript' );\n\t\t\t//                scriptNew.innerHTML = elementScriptText;\n\t\t\t//                element.parentNode.appendChild( scriptNew );\n\n\t\t\t//                element.parentNode.removeChild( scriptNew );\n\t\t\tif (kind in WPTB_ElementsScriptsLauncher) {\n\t\t\t\tWPTB_ElementsScriptsLauncher[kind](element);\n\t\t\t}\n\t\t}\n\t},\n\t// deletes event handlers from the pointed option element and from all his daughter elements\n\tdeleteEventHandlers(element) {\n\t\tif (element) {\n\t\t\tjQuery(element).off();\n\t\t\tconst elementChildren = element.children;\n\t\t\tif (elementChildren) {\n\t\t\t\tfor (let i = 0; i < elementChildren.length; i++) {\n\t\t\t\t\tWPTB_Helper.deleteEventHandlers(elementChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t}\n\t},\n\t// replace all occurrences in a string\n\treplaceAll(string, search, replace) {\n\t\treturn string.split(search).join(replace);\n\t},\n\t// clears code from TinyMCE attributes\n\telementClearFromTinyMce(element) {\n\t\tconst mceContentBodys = element.querySelectorAll('.mce-content-body');\n\t\tif (mceContentBodys.length > 0) {\n\t\t\tfor (let k = 0; k < mceContentBodys.length; k++) {\n\t\t\t\tmceContentBodys[k].classList.remove('mce-content-body');\n\t\t\t}\n\t\t}\n\n\t\tconst dataMceStyle = element.querySelectorAll('[data-mce-style]');\n\t\tif (dataMceStyle.length > 0) {\n\t\t\tfor (let k = 0; k < dataMceStyle.length; k++) {\n\t\t\t\tdataMceStyle[k].removeAttribute('data-mce-style');\n\t\t\t}\n\t\t}\n\n\t\tconst mceEditFocus = element.querySelectorAll('.mce-edit-focus');\n\t\tif (mceEditFocus.length > 0) {\n\t\t\tfor (let k = 0; k < mceEditFocus.length; k++) {\n\t\t\t\tmceEditFocus[k].classList.remove('mce-edit-focus');\n\t\t\t}\n\t\t}\n\n\t\tconst contentEditable = element.querySelectorAll('[contenteditable]');\n\t\tif (contentEditable.length > 0) {\n\t\t\tfor (let k = 0; k < contentEditable.length; k++) {\n\t\t\t\tcontentEditable[k].removeAttribute('contenteditable');\n\t\t\t}\n\t\t}\n\n\t\tconst spellCheck = element.querySelectorAll('[spellcheck]');\n\t\tif (spellCheck.length > 0) {\n\t\t\tfor (let k = 0; k < spellCheck.length; k++) {\n\t\t\t\tspellCheck[k].removeAttribute('spellcheck');\n\t\t\t}\n\t\t}\n\n\t\tconst mceIds = element.querySelectorAll('[id^=mce_]');\n\t\tif (mceIds.length > 0) {\n\t\t\tfor (let k = 0; k < mceIds.length; k++) {\n\t\t\t\tmceIds[k].removeAttribute('id');\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t},\n\telementOptionContainerCustomClassSet(targetInput, customClassForContainer) {\n\t\tif (targetInput && customClassForContainer) {\n\t\t\tconst containerElement = WPTB_Helper.findAncestor(targetInput, 'wptb-element-option');\n\t\t\tif (containerElement) {\n\t\t\t\tcontainerElement.classList.add(customClassForContainer);\n\t\t\t}\n\t\t}\n\t},\n\telementOptionContainerAdditionalStyles(targetInput, containerAdditionalStyles) {\n\t\tif (targetInput && containerAdditionalStyles) {\n\t\t\tconst containerElement = WPTB_Helper.findAncestor(targetInput, 'wptb-element-option');\n\t\t\tconst containerStylesArrOne = containerAdditionalStyles.split(';');\n\n\t\t\tif (containerElement && containerStylesArrOne) {\n\t\t\t\tfunction containerStylesSet(containerStyleStr, containerElement) {\n\t\t\t\t\tif (containerStyleStr) {\n\t\t\t\t\t\tcontainerStyleStrArr = containerStyleStr.split(':');\n\n\t\t\t\t\t\tif (containerStyleStrArr && Array.isArray(containerStyleStrArr)) {\n\t\t\t\t\t\t\tcontainerElement.style[containerStyleStrArr[0]] = containerStyleStrArr[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (containerStylesArrOne && Array.isArray(containerStylesArrOne)) {\n\t\t\t\t\tfor (let i = 0; i < containerStylesArrOne.length; i++) {\n\t\t\t\t\t\tif (containerStylesArrOne[i]) {\n\t\t\t\t\t\t\tcontainerStylesSet(containerStylesArrOne[i], containerElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcontainerStylesSet(containerStylesArrOne, containerElement);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// function which set handler for event of changes of control\n\tcontrolsInclude(element, functionHandler, acceptEventValues = false) {\n\t\tif (element && typeof element === 'object' && typeof functionHandler === 'function') {\n\t\t\telement.addEventListener(\n\t\t\t\t'element:controls:active',\n\t\t\t\tfunction () {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!element.hasOwnProperty('controlConnectFunctionsName') ||\n\t\t\t\t\t\t!Array.isArray(element.controlConnectFunctionsName) ||\n\t\t\t\t\t\telement.controlConnectFunctionsName.indexOf(functionHandler.name) == -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\t\t\t\tlet elementKind;\n\n\t\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\t\telementKind = infArr[1];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//                if( ! element.hasOwnProperty( 'сontrolsConnectIndic' ) || element.сontrolsConnectIndic !== true && elementKind  ) {\n\t\t\t\t\t\t//                    let elementsSettingsTemplateJs = document.getElementsByClassName( 'wptb-element-datas' );\n\t\t\t\t\t\t//                    if( elementsSettingsTemplateJs.length > 0 ) {\n\t\t\t\t\t\t//                        elementsSettingsTemplateJs = elementsSettingsTemplateJs[0];\n\t\t\t\t\t\t//\n\t\t\t\t\t\t//                        let elementsSettings = elementsSettingsTemplateJs.innerHTML;\n\t\t\t\t\t\t//                        let controlClassesNames = [];\n\t\t\t\t\t\t//                        if( elementsSettings ) {\n\t\t\t\t\t\t//                            elementsSettings = elementsSettings.trim();\n\t\t\t\t\t\t//                            elementsSettings = JSON.parse( elementsSettings );\n\t\t\t\t\t\t//                            if( elementsSettings && typeof elementsSettings === 'object' ) {\n\t\t\t\t\t\t//                                if( 'tmpl-wptb-el-datas-' + infArr[1] + '-' + infArr[2] in elementsSettings ) {\n\t\t\t\t\t\t//                                    let elementSettings = elementsSettings['tmpl-wptb-el-datas-' + infArr[1] + '-' + infArr[2]];\n\t\t\t\t\t\t//                                    if( elementSettings && typeof elementSettings === 'object' ) {\n\t\t\t\t\t\t//                                        Object.keys( elementSettings ).forEach( function( key ) {\n\t\t\t\t\t\t//                                            let regularText = new RegExp( 'data-wptb-el-' + elementKind + '-(\\\\d+)-([a-zA-Z0-9_-]+)', \"i\" );\n\t\t\t\t\t\t//                                            let keyInfArr = key.match( regularText );\n\t\t\t\t\t\t//                                            if( keyInfArr && Array.isArray( keyInfArr ) ) {\n\t\t\t\t\t\t//                                                let controlClass = key.replace( 'data-', '' );\n\t\t\t\t\t\t//                                                controlClassesNames.push( [controlClass, keyInfArr[2]] );\n\t\t\t\t\t\t//                                            }\n\t\t\t\t\t\t//                                        });\n\t\t\t\t\t\t//                                    }\n\t\t\t\t\t\t//                                }\n\t\t\t\t\t\t//                            }\n\t\t\t\t\t\t//                        }\n\t\t\t\t\t\t//                    }\n\t\t\t\t\t\t//                }\n\t\t\t\t\t\tif (elementKind) {\n\t\t\t\t\t\t\tconst elementOptionsGroupIds = element.optionsGroupIds;\n\t\t\t\t\t\t\tif (elementOptionsGroupIds && Array.isArray(elementOptionsGroupIds)) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < elementOptionsGroupIds.length; i++) {\n\t\t\t\t\t\t\t\t\tconst elementOptionsGroupId = elementOptionsGroupIds[i];\n\n\t\t\t\t\t\t\t\t\tconst elementOptionsGroup = document.getElementById(elementOptionsGroupId);\n\n\t\t\t\t\t\t\t\t\tlet controlActiveElements = elementOptionsGroup.querySelectorAll(\n\t\t\t\t\t\t\t\t\t\t'.wptb-element-property'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tcontrolActiveElements = [...controlActiveElements];\n\n\t\t\t\t\t\t\t\t\tcontrolActiveElements.map((controlActiveElement) => {\n\t\t\t\t\t\t\t\t\t\tconst regularText = new RegExp(\n\t\t\t\t\t\t\t\t\t\t\t`wptb-el-${elementKind}-(\\\\d+)-([a-zA-Z0-9_-]+)`,\n\t\t\t\t\t\t\t\t\t\t\t'i'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tconst controlInfArr = controlActiveElement.className.match(regularText);\n\t\t\t\t\t\t\t\t\t\tif (controlInfArr && Array.isArray(controlInfArr)) {\n\t\t\t\t\t\t\t\t\t\t\tconst controlUnicClassName = controlInfArr[0];\n\n\t\t\t\t\t\t\t\t\t\t\telement.addEventListener(\n\t\t\t\t\t\t\t\t\t\t\t\t`wptb-control:${controlUnicClassName}`,\n\t\t\t\t\t\t\t\t\t\t\t\tfunction (e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst controls = {};\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst controlName = controlInfArr[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst control = document.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolUnicClassName\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (control.length > 0 && controlName) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (acceptEventValues) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols[controlName] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttargetValue: targetControlValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teventValue: e.detail.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols[controlName] = targetControlValue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfunctionHandler(controls, element);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// let elementOptionsContainer = document.querySelector( '.wptb-element-options.wptb-options-' + infArr[1] + '-' + infArr[2] );\n\n\t\t\t\t\t\t\t// from time to time depend on table cells hierarchy, cell td items may catch mouse clicks which are intended for elements. since the active section is not cell management, this will gives and unharmfull error of not found element, simple check for null equality will be sufficient for now.\n\t\t\t\t\t\t\t// if(!elementOptionsContainer){\n\t\t\t\t\t\t\t//     return;\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t// let elementOptions = elementOptionsContainer.querySelectorAll( '.wptb-element-option' );\n\t\t\t\t\t\t\t// let controlActiveElements = elementOptions[i].querySelector( '.wptb-element-property' );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// for( let i = 0; i < elementOptions.length; i++ ) {\n\t\t\t\t\t\t\t//     let controlActiveElement = elementOptions[i].querySelector( '.wptb-element-property' );\n\t\t\t\t\t\t\t//     if( controlActiveElement ) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t//     }\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!element.controlConnectFunctionsName &&\n\t\t\t\t\t\t\t\t!Array.isArray(element.controlConnectFunctionsName)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\telement.controlConnectFunctionsName = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telement.controlConnectFunctionsName.push(functionHandler.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\t},\n\toneControlInclude(element, functionHandler, controlName) {\n\t\tif (\n\t\t\telement &&\n\t\t\ttypeof element === 'object' &&\n\t\t\ttypeof functionHandler === 'function' &&\n\t\t\ttypeof controlName === 'string'\n\t\t) {\n\t\t\tconst infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tlet elementKind;\n\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\telementKind = infArr[1].split('-')[0];\n\n\t\t\t\tconst wptbContrlStacksConfigId = `wptb-${elementKind}-control-stack`;\n\t\t\t\tconst tmplControlsConfig = wp.template(wptbContrlStacksConfigId);\n\t\t\t\tconst data = {\n\t\t\t\t\tcontainer: `.${infArr[0]}`,\n\t\t\t\t};\n\t\t\t\tconst jsonControlsConfigJson = tmplControlsConfig(data);\n\t\t\t\tconst jsonControlsConfig = JSON.parse(jsonControlsConfigJson);\n\n\t\t\t\tif (\n\t\t\t\t\tjsonControlsConfig &&\n\t\t\t\t\ttypeof jsonControlsConfig === 'object' &&\n\t\t\t\t\tjsonControlsConfig.hasOwnProperty(controlName)\n\t\t\t\t) {\n\t\t\t\t\tconst controlClassName = `wptb-el-${infArr[1]}-${controlName}`;\n\n\t\t\t\t\telement.addEventListener(\n\t\t\t\t\t\t`wptb-control:${controlClassName}`,\n\t\t\t\t\t\tfunction (event) {\n\t\t\t\t\t\t\tconst control = document.getElementsByClassName(controlClassName);\n\t\t\t\t\t\t\tif (control.length > 0) {\n\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(control);\n\n\t\t\t\t\t\t\t\tfunctionHandler(targetControlValue, element);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t//\n\tinnerElementCopyIncludeHandler(element, functionHandler) {\n\t\tif (element && typeof element === 'object' && typeof functionHandler === 'function') {\n\t\t\telement.addEventListener(\n\t\t\t\t'wptb-inner-element:copy',\n\t\t\t\tfunction (event) {\n\t\t\t\t\tconst innerElement = event.detail;\n\t\t\t\t\tif (innerElement) {\n\t\t\t\t\t\tWPTB_Helper.elementClearFromTinyMce(innerElement);\n\t\t\t\t\t\tfunctionHandler(innerElement, element);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\t},\n\t/**\n\t * Sets the control elements when changing which to will restart this control\n\t *\n\t * @param {Array} dependOnControlName\n\t * @param {string} targetControlElementClass\n\t * @param {Array} valueDependOnControlCorrect\n\t * @param {string} kind\n\t * @param {HTMLElement} element\n\t */\n\tvalueDependOnControl(dependOnControlName, targetControlElementClass, valueDependOnControlCorrect, kind, element) {\n\t\tfunction dependOnControlDataGet(dependOnControlName, targetControlElementClass, valueDependOnControlCorrect) {\n\t\t\tif (typeof dependOnControlName === 'string') {\n\t\t\t\tdependOnControlName = [dependOnControlName];\n\t\t\t}\n\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\t\t\tconst valueDependOnControl = {};\n\t\t\tconst dependOnControlElementsArr = [];\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tconst controlName = infArr[3];\n\t\t\t\tlet dependOnControlElements;\n\t\t\t\tconst valueDependOnControlCorrectObj = {};\n\t\t\t\tif (Array.isArray(valueDependOnControlCorrect)) {\n\t\t\t\t\tif (Array.isArray(valueDependOnControlCorrect[0])) {\n\t\t\t\t\t\tvalueDependOnControlCorrect.map((s) => {\n\t\t\t\t\t\t\tvalueDependOnControlCorrectObj[s[0]] = [s[1], s[2]];\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalueDependOnControlCorrectObj[valueDependOnControlCorrect[0]] = [\n\t\t\t\t\t\t\tvalueDependOnControlCorrect[1],\n\t\t\t\t\t\t\tvalueDependOnControlCorrect[2],\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdependOnControlName.map((s) => {\n\t\t\t\t\tconst dependOnControlElementClass = targetControlElementClass.replace(controlName, s);\n\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\tdependOnControlElements = document.getElementsByClassName(dependOnControlElementClass);\n\t\t\t\t\t\tif (dependOnControlElements.length > 0 && dependOnControlElements[0].type) {\n\t\t\t\t\t\t\tvalueDependOnControl[s] = dependOnControlElements[0].value;\n\t\t\t\t\t\t\tif (s in valueDependOnControlCorrectObj) {\n\t\t\t\t\t\t\t\tif (valueDependOnControlCorrectObj[s][1] === 'integer') {\n\t\t\t\t\t\t\t\t\tvalueDependOnControl[s] =\n\t\t\t\t\t\t\t\t\t\tparseInt(valueDependOnControl[s]) +\n\t\t\t\t\t\t\t\t\t\tparseInt(valueDependOnControlCorrectObj[s][0]);\n\t\t\t\t\t\t\t\t} else if (valueDependOnControlCorrectObj[s][1] === 'string') {\n\t\t\t\t\t\t\t\t\tvalueDependOnControl[s] =\n\t\t\t\t\t\t\t\t\t\tvalueDependOnControl[s] + valueDependOnControlCorrectObj[s][0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdependOnControlElementsArr.push(dependOnControlElements[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn [valueDependOnControl, dependOnControlElementsArr];\n\t\t}\n\n\t\tconst dependOnControlData = dependOnControlDataGet(\n\t\t\tdependOnControlName,\n\t\t\ttargetControlElementClass,\n\t\t\tvalueDependOnControlCorrect\n\t\t);\n\t\tWPTB_Helper.elementOptionsSet(kind, element, dependOnControlData[0], targetControlElementClass);\n\n\t\tObject.keys(dependOnControlData[0]).forEach(function (key) {\n\t\t\tconst infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tconst unicClass = `wptb-el-${infArr[1]}-${[key]}`;\n\t\t\telement.addEventListener(\n\t\t\t\t`wptb-control:${unicClass}`,\n\t\t\t\tfunction (event) {\n\t\t\t\t\tconst dependOnControlData = dependOnControlDataGet(\n\t\t\t\t\t\tdependOnControlName,\n\t\t\t\t\t\ttargetControlElementClass,\n\t\t\t\t\t\tvalueDependOnControlCorrect\n\t\t\t\t\t);\n\t\t\t\t\tWPTB_Helper.elementOptionsSet(kind, element, dependOnControlData[0], targetControlElementClass);\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t});\n\t},\n\t/**\n\t * Sets the visibility of one control to depend on the state of other controls\n\t *\n\t * @param dependOnMain\n\t * @param targetControlElementClass\n\t */\n\tappearDependOnControl(dependOnMain, targetControlElementClass) {\n\t\tif (Array.isArray(dependOnMain)) {\n\t\t\tif (typeof dependOnMain[0] === 'string') {\n\t\t\t\tdependOnMain = [dependOnMain];\n\t\t\t} else if (!Array.isArray(dependOnMain[0])) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst dependOnControlElementsValue = {};\n\t\t\tfor (let i = 0; i < dependOnMain.length; i++) {\n\t\t\t\tconst dependOn = dependOnMain[i];\n\t\t\t\tconst dependOnControlName = dependOn[0];\n\t\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tconst controlName = infArr[3];\n\n\t\t\t\t\tconst dependOnControlElementClass = targetControlElementClass.replace(\n\t\t\t\t\t\tcontrolName,\n\t\t\t\t\t\tdependOnControlName\n\t\t\t\t\t);\n\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\tconst dependOnControlElements = document.getElementsByClassName(dependOnControlElementClass);\n\t\t\t\t\t\tif (dependOnControlElements.length > 0) {\n\t\t\t\t\t\t\tdependOnControlElementsValue[dependOn[0]] = [\n\t\t\t\t\t\t\t\tdependOnControlElementValue(dependOnControlElements, dependOn),\n\t\t\t\t\t\t\t\tdependOnControlElements,\n\t\t\t\t\t\t\t\tdependOn,\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst targetControlElements = document.getElementsByClassName(targetControlElementClass);\n\t\t\tif (targetControlElements.length > 0) {\n\t\t\t\tconst targetControlElement = targetControlElements[0];\n\t\t\t\tconst controlContainerElem = WPTB_Helper.findAncestor(targetControlElement, 'wptb-element-option');\n\n\t\t\t\tif (controlContainerElem) {\n\t\t\t\t\tshowHideTargetControlElement(controlContainerElem, dependOnControlElementsValue);\n\n\t\t\t\t\tObject.keys(dependOnControlElementsValue).map((k) => {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dependOnControlElementsValue, k)) {\n\t\t\t\t\t\t\tconst dependOnControlElements = dependOnControlElementsValue[k][1];\n\t\t\t\t\t\t\tconst dependOnControlElement = dependOnControlElements[0];\n\t\t\t\t\t\t\tdependOnControlElement.addEventListener(\n\t\t\t\t\t\t\t\t'change',\n\t\t\t\t\t\t\t\tdependOnControlElementChangeHandler,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction dependOnControlElementChangeHandler(event) {\n\t\t\t\t\t\t\tconst dependOn = dependOnControlElementsValue[k][2];\n\t\t\t\t\t\t\tconst dependOnControlElements = dependOnControlElementsValue[k][1];\n\t\t\t\t\t\t\tdependOnControlElementsValue[dependOn[0]] = [\n\t\t\t\t\t\t\t\tdependOnControlElementValue(dependOnControlElements, dependOn),\n\t\t\t\t\t\t\t\tdependOnControlElements,\n\t\t\t\t\t\t\t\tdependOn,\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tshowHideTargetControlElement(controlContainerElem, dependOnControlElementsValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction showHideTargetControlElement(controlContainerElem, dependOnControlElementsValue) {\n\t\t\t\tlet display = 'block';\n\t\t\t\tlet targetControlInactiveVal;\n\t\t\t\tObject.keys(dependOnControlElementsValue).map((k) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dependOnControlElementsValue, k)) {\n\t\t\t\t\t\tif (dependOnControlElementsValue[k][0] === false) {\n\t\t\t\t\t\t\tdisplay = 'none';\n\t\t\t\t\t\t\tif (dependOnControlElementsValue[k][2][3]) {\n\t\t\t\t\t\t\t\ttargetControlInactiveVal = dependOnControlElementsValue[k][2][3];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (controlContainerElem.style.display !== display) {\n\t\t\t\t\tcontrolContainerElem.style.display = display;\n\n\t\t\t\t\tif (display === 'none' && targetControlInactiveVal) {\n\t\t\t\t\t\ttargetControlElements[0].dataset.controlActiveVal = WPTB_Helper.targetControlValueGet(\n\t\t\t\t\t\t\ttargetControlElements\n\t\t\t\t\t\t);\n\t\t\t\t\t\tWPTB_Helper.targetControlValueGet(targetControlElements, targetControlInactiveVal);\n\t\t\t\t\t} else if (display === 'block' && targetControlElements[0].dataset.controlActiveVal) {\n\t\t\t\t\t\tWPTB_Helper.targetControlValueGet(\n\t\t\t\t\t\t\ttargetControlElements,\n\t\t\t\t\t\t\ttargetControlElements[0].dataset.controlActiveVal\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction dependOnControlElementValue(dependOnControlElements, dependOn) {\n\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(dependOnControlElements);\n\n\t\t\t\tlet returnBool = false;\n\t\t\t\tfor (let i = 1; i <= 2; i++) {\n\t\t\t\t\tif (dependOn[i] && Array.isArray(dependOn[i])) {\n\t\t\t\t\t\tlet coincided;\n\t\t\t\t\t\tlet hasNumberAnyParams = false;\n\t\t\t\t\t\tfor (let j = 0; j < dependOn[i].length; j++) {\n\t\t\t\t\t\t\tif (typeof dependOn[i][j] === 'string' && dependOn[i][j].indexOf('numberAny >') !== -1) {\n\t\t\t\t\t\t\t\thasNumberAnyParams = true;\n\t\t\t\t\t\t\t\tconst xNum = parseInt(dependOn[i][j].match(/\\d+/));\n\t\t\t\t\t\t\t\tif (targetControlValue > xNum) {\n\t\t\t\t\t\t\t\t\tcoincided = true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcoincided = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\ttypeof dependOn[i][j] === 'string' &&\n\t\t\t\t\t\t\t\tdependOn[i][j].indexOf('numberAny <') !== -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\thasNumberAnyParams = true;\n\t\t\t\t\t\t\t\tconst xNum = parseInt(dependOn[i][j].match(/\\d+/));\n\t\t\t\t\t\t\t\tif (targetControlValue < xNum) {\n\t\t\t\t\t\t\t\t\tcoincided = true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcoincided = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (dependOn[i][j] === targetControlValue) {\n\t\t\t\t\t\t\t\tcoincided = true;\n\t\t\t\t\t\t\t\tif (!hasNumberAnyParams) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (coincided && i === 1) {\n\t\t\t\t\t\t\treturnBool = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (coincided && i === 2) {\n\t\t\t\t\t\t\treturnBool = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn returnBool;\n\t\t\t}\n\t\t}\n\t},\n\t//\n\n\t/**\n\t * Switch toggle\n\t *\n\t * @param dataToggleSwitch\n\t * @param targetControlElementClass\n\t */\n\ttoggleSwitch(dataToggleSwitch, targetControlElementClass) {\n\t\tif (Array.isArray(dataToggleSwitch)) {\n\t\t\tif (dataToggleSwitch[1] && typeof dataToggleSwitch[1] === 'object') {\n\t\t\t\tconst dependOnParams = dataToggleSwitch[1];\n\t\t\t\tconst toggleSwitchExec = false;\n\t\t\t\tObject.keys(dependOnParams).map((k) => {\n\t\t\t\t\tconst dependOnValue = dependOnParams[k];\n\n\t\t\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\tconst controlName = infArr[3];\n\n\t\t\t\t\t\tconst dependOnControlElementClass = targetControlElementClass.replace(controlName, k);\n\t\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\t\tconst dependOnControlElements = document.getElementsByClassName(\n\t\t\t\t\t\t\t\tdependOnControlElementClass\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (dependOnControlElements.length > 0) {\n\t\t\t\t\t\t\t\tconst dependOnControlElement = dependOnControlElements[0];\n\t\t\t\t\t\t\t\tdependOnControlElement.addEventListener(\n\t\t\t\t\t\t\t\t\t'change',\n\t\t\t\t\t\t\t\t\ttoggleSwitchExecuteCheckRun.bind(null, dependOnControlElementClass, dependOnValue),\n\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (toggleSwitchExec) {\n\t\t\t\t\ttoggleSwitchExecute();\n\t\t\t\t}\n\t\t\t\tfunction toggleSwitchExecuteCheckRun(dependOnControlElementClass, dependOnValue) {\n\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\tconst dependOnControlElements = document.getElementsByClassName(dependOnControlElementClass);\n\t\t\t\t\t\tif (dependOnControlElements.length > 0) {\n\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(dependOnControlElements);\n\n\t\t\t\t\t\t\tif (targetControlValue === dependOnValue) {\n\t\t\t\t\t\t\t\ttoggleSwitchExecute();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfunction toggleSwitchExecute() {\n\t\t\t\t\tconst elems = document.getElementsByClassName(targetControlElementClass);\n\t\t\t\t\tif (elems.length && WPTB_Helper.targetControlValueGet(elems) !== dataToggleSwitch[0]) {\n\t\t\t\t\t\tif (dataToggleSwitch[0] === 'unchecked') {\n\t\t\t\t\t\t\telems[0].checked = false;\n\t\t\t\t\t\t} else if (dataToggleSwitch[0] === 'checked') {\n\t\t\t\t\t\t\telems[0].checked = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (dataToggleSwitch[2] === undefined || dataToggleSwitch[2] === true) {\n\t\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('change', elems[0], { eventType: 'toggleSwitch' });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t//\n\tcontrolsStateManager(targetControlClass, controlChangeIndic) {\n\t\tconst targetControls = document.getElementsByClassName(targetControlClass);\n\t\tif (targetControls.length > 0) {\n\t\t\t// targetControls = targetControls[0];\n\n\t\t\tconst infArr = targetControlClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tlet selectorElement;\n\t\t\t\tselectorElement = document.querySelector(`.wptb-element-${infArr[1]}`);\n\n\t\t\t\tif (selectorElement) {\n\t\t\t\t\tlet elementsSettingsTemplatesJs;\n\t\t\t\t\tconst elementSettings = {};\n\t\t\t\t\tlet elementsSettings;\n\t\t\t\t\telementsSettingsTemplatesJs = document.getElementsByClassName('wptb-element-datas');\n\t\t\t\t\tif (elementsSettingsTemplatesJs.length == 0 || elementsSettingsTemplatesJs[0].innerHTML == '') {\n\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(targetControls);\n\t\t\t\t\t\telementSettings[`data-${targetControlClass}`] = targetControlValue;\n\n\t\t\t\t\t\telementsSettings = {};\n\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] = elementSettings;\n\t\t\t\t\t\telementsSettings = JSON.stringify(elementsSettings);\n\n\t\t\t\t\t\tif (elementsSettingsTemplatesJs.length == 0) {\n\t\t\t\t\t\t\telementsSettingsTemplatesJs = document.createElement('script');\n\t\t\t\t\t\t\telementsSettingsTemplatesJs.setAttribute('type', 'text/html');\n\t\t\t\t\t\t\telementsSettingsTemplatesJs.setAttribute('class', 'wptb-element-datas');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telementsSettingsTemplatesJs = elementsSettingsTemplatesJs[0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telementsSettingsTemplatesJs.innerHTML = elementsSettings;\n\n\t\t\t\t\t\tconst body = document.getElementsByTagName('body')[0];\n\t\t\t\t\t\tbody.appendChild(elementsSettingsTemplatesJs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementsSettingsTemplatesJs = elementsSettingsTemplatesJs[0];\n\t\t\t\t\t\telementsSettings = elementsSettingsTemplatesJs.innerHTML;\n\t\t\t\t\t\tif (elementsSettings) {\n\t\t\t\t\t\t\telementsSettings = elementsSettings.trim();\n\t\t\t\t\t\t\telementsSettings = JSON.parse(elementsSettings);\n\n\t\t\t\t\t\t\tif (elementsSettings && typeof elementsSettings === 'object') {\n\t\t\t\t\t\t\t\tif (controlChangeIndic) {\n\t\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(targetControls);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings) ||\n\t\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] !== 'object'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t] = targetControlValue;\n\t\t\t\t\t\t\t\t\telementsSettingsTemplatesJs.innerHTML = JSON.stringify(elementsSettings);\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings &&\n\t\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] === 'object' &&\n\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}` in\n\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`]\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(targetControls);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings) ||\n\t\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] !== 'object'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t] = targetControlValue;\n\t\t\t\t\t\t\t\t\telementsSettingsTemplatesJs.innerHTML = JSON.stringify(elementsSettings);\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings &&\n\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] === 'object' &&\n\t\t\t\t\t\t\t\t\t`data-${targetControlClass}` in elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`]\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < targetControls.length; i++) {\n\t\t\t\t\t\t\t\t\t\tif (targetControls[i].type == 'checkbox') {\n\t\t\t\t\t\t\t\t\t\t\tlet targetControlValue;\n\t\t\t\t\t\t\t\t\t\t\tif (targetControls[i].name) {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControlValue =\n\t\t\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t][targetControls[i].name];\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControlValue =\n\t\t\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (targetControlValue == 'checked') {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControls[i].checked = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (targetControlValue == 'unchecked') {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControls[i].checked = false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\ttargetControls[i].value =\n\t\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t//\n\ttargetControlValueGet(targetControls, val) {\n\t\tlet targetControlValue;\n\t\tfor (let i = 0; i < targetControls.length; i++) {\n\t\t\tif (targetControls[i].type == 'checkbox' && targetControls[i].name) {\n\t\t\t\tif (val) {\n\t\t\t\t\tif (val === 'checked') {\n\t\t\t\t\t\ttargetControls[i].checked = true;\n\t\t\t\t\t} else if (val === 'unchecked') {\n\t\t\t\t\t\ttargetControls[i].checked = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!targetControlValue) targetControlValue = {};\n\t\t\t\t\tif (targetControls[i].checked == true) {\n\t\t\t\t\t\ttargetControlValue[targetControls[i].name] = 'checked';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttargetControlValue[targetControls[i].name] = 'unchecked';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (targetControls[i].type == 'checkbox') {\n\t\t\t\tif (val) {\n\t\t\t\t\tif (val === 'checked') {\n\t\t\t\t\t\ttargetControls[i].checked = true;\n\t\t\t\t\t} else if (val === 'unchecked') {\n\t\t\t\t\t\ttargetControls[i].checked = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (targetControls[i].checked == true) {\n\t\t\t\t\ttargetControlValue = 'checked';\n\t\t\t\t} else {\n\t\t\t\t\ttargetControlValue = 'unchecked';\n\t\t\t\t}\n\t\t\t} else if (targetControls[i].type) {\n\t\t\t\tif (val) {\n\t\t\t\t\ttargetControls[i].value = val;\n\t\t\t\t} else {\n\t\t\t\t\ttargetControlValue = targetControls[i].value;\n\t\t\t\t}\n\t\t\t} else if (targetControls[i].dataset.alignmentValue && targetControls[i].classList.contains('selected')) {\n\t\t\t\tif (val) {\n\t\t\t\t\ttargetControls[i].dataset.alignmentValue = val;\n\t\t\t\t} else {\n\t\t\t\t\ttargetControlValue = targetControls[i].dataset.alignmentValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn targetControlValue;\n\t},\n\t//\n\telementControlsStateCopy(elementProt, copyElem) {\n\t\tif (elementProt && copyElem) {\n\t\t\tconst infArrProt = elementProt.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tconst infArrCopy = copyElem.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tif (infArrProt && Array.isArray(infArrProt) && infArrCopy && Array.isArray(infArrCopy)) {\n\t\t\t\tconst elemProtKind = infArrProt[1];\n\t\t\t\tconst elemCopyKind = infArrCopy[1];\n\t\t\t\tlet elementsSettingsTemplateJs = document.getElementsByClassName('wptb-element-datas');\n\t\t\t\tif (elementsSettingsTemplateJs.length > 0) {\n\t\t\t\t\telementsSettingsTemplateJs = elementsSettingsTemplateJs[0];\n\n\t\t\t\t\tlet elementsSettings = elementsSettingsTemplateJs.innerHTML;\n\t\t\t\t\tif (elementsSettings) {\n\t\t\t\t\t\telementsSettings = elementsSettings.trim();\n\t\t\t\t\t\telementsSettings = JSON.parse(elementsSettings);\n\n\t\t\t\t\t\tif (elementsSettings && typeof elementsSettings === 'object') {\n\t\t\t\t\t\t\tconst elementSettingsProt = elementsSettings[`tmpl-wptb-el-datas-${elemProtKind}`];\n\t\t\t\t\t\t\tif (elementSettingsProt && typeof elementSettingsProt === 'object') {\n\t\t\t\t\t\t\t\tconst elementSettingsCopy = {};\n\n\t\t\t\t\t\t\t\tObject.keys(elementSettingsProt).forEach(function (key) {\n\t\t\t\t\t\t\t\t\tconst elementSettingValue = elementSettingsProt[key];\n\t\t\t\t\t\t\t\t\tconst elementSettingKeyCopy = key.replace(elemProtKind, elemCopyKind);\n\t\t\t\t\t\t\t\t\telementSettingsCopy[elementSettingKeyCopy] = elementSettingValue;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (Object.keys(elementSettingsCopy).length > 0) {\n\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${elemCopyKind}`] = elementSettingsCopy;\n\n\t\t\t\t\t\t\t\t\telementsSettings = JSON.stringify(elementsSettings);\n\t\t\t\t\t\t\t\t\telementsSettingsTemplateJs.innerHTML = elementsSettings;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t//\n\telementControlsStateDelete(element, nameControl) {\n\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\tconst body = document.getElementsByTagName('body')[0];\n\t\tlet wptbElementDatas = body.getElementsByClassName('wptb-element-datas');\n\t\tif (infArr && Array.isArray(infArr) && wptbElementDatas.length > 0) {\n\t\t\twptbElementDatas = wptbElementDatas[0];\n\t\t\tlet elementsSettings = wptbElementDatas.innerHTML;\n\t\t\tif (elementsSettings) {\n\t\t\t\telementsSettings = elementsSettings.trim();\n\t\t\t\telementsSettings = JSON.parse(elementsSettings);\n\t\t\t\tif (\n\t\t\t\t\telementsSettings &&\n\t\t\t\t\ttypeof elementsSettings === 'object' &&\n\t\t\t\t\t`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}` in elementsSettings\n\t\t\t\t) {\n\t\t\t\t\tif (!nameControl) {\n\t\t\t\t\t\tdelete elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`];\n\t\t\t\t\t} else if (\n\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`] &&\n\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`] === 'object' &&\n\t\t\t\t\t\t`data-wptb-el-${infArr[1]}-${infArr[2]}-${nameControl}` in\n\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`]\n\t\t\t\t\t) {\n\t\t\t\t\t\tdelete elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`][\n\t\t\t\t\t\t\t`data-wptb-el-${infArr[1]}-${infArr[2]}-${nameControl}`\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Object.keys(elementsSettings).length == 0) {\n\t\t\t\t\t\tbody.removeChild(wptbElementDatas);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementsSettings = JSON.stringify(elementsSettings);\n\t\t\t\t\t\twptbElementDatas.innerHTML = elementsSettings;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t//\n\telementOptionsSet(kind, element, valueDependOnControl, targetControlElementClass) {\n\t\t// get controls config for this element\n\t\tconst wptbContrlStacksConfigId = `wptb-${kind}-control-stack`;\n\t\tconst tmplControlsConfig = wp.template(wptbContrlStacksConfigId);\n\t\tlet data;\n\t\tlet elementContainerClass;\n\t\tlet elementOptionClassIndic;\n\t\tlet elementOptionsGroup;\n\n\t\tlet controlElementParent;\n\t\tlet elementOptionsScriptsContainer;\n\n\t\tlet infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\tif (!infArr) {\n\t\t\tlet table_id = WPTB_Helper.detectMode();\n\t\t\tif (!table_id) {\n\t\t\t\ttable_id = 'startedid-0';\n\t\t\t}\n\t\t\tif (element.classList.contains('wptb-preview-table')) {\n\t\t\t\telement.classList.add(`wptb-element-main-table_setting-${table_id}`);\n\t\t\t} else if (element.classList.contains('wptb-cell')) {\n\t\t\t\tconst cellEditActiveClass = document.querySelector(\n\t\t\t\t\t`.wptb-element-table_cell_setting-${element.dataset.xIndex}-${element.dataset.yIndex}`\n\t\t\t\t);\n\t\t\t\tif (!cellEditActiveClass)\n\t\t\t\t\telement.classList.add(\n\t\t\t\t\t\t`wptb-element-table_cell_setting-${element.dataset.xIndex}-${element.dataset.yIndex}`\n\t\t\t\t\t);\n\t\t\t} else if (element.classList.contains('wptb-responsive')) {\n\t\t\t\t// if table id parsed from url is starting with 'wptb-team', it means it is team built prebuilt table with a unique id that doesn't fit infArr match regex, in that case, use default id for elements options\n\t\t\t\tif (table_id.startsWith('wptb_team')) {\n\t\t\t\t\ttable_id = 'startedid-0';\n\t\t\t\t}\n\t\t\t\telement.classList.add(`wptb-element-table_responsive_setting-${table_id}`);\n\t\t\t}\n\n\t\t\tinfArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t} else {\n\t\t\tWPTB_Helper.editActionClassRemove();\n\t\t\telement.classList.add('edit-active');\n\t\t}\n\n\t\tdata = {\n\t\t\tcontainer: `.${infArr[0]}`,\n\t\t};\n\t\tlet controlName;\n\t\tdata.valueDependOnControl = {};\n\t\tif (valueDependOnControl) {\n\t\t\tObject.keys(valueDependOnControl).forEach(function (key) {\n\t\t\t\tdata.valueDependOnControl[key] = valueDependOnControl[key];\n\t\t\t});\n\t\t}\n\t\tif (targetControlElementClass) {\n\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tcontrolName = infArr[3];\n\t\t\t}\n\t\t}\n\n\t\telementContainerClass = infArr[0];\n\t\telementOptionClassIndic = infArr[1];\n\n\t\tif (element.classList.contains('wptb-preview-table')) {\n\t\t} else if (element.classList.contains('wptb-cell')) {\n\t\t\tthis.activateSection('cell_settings');\n\t\t} else if (element.classList.contains('wptb-responsive')) {\n\t\t\telementOptionsGroupId = 'table-responsive-group';\n\t\t\twptbelementOptionClass = 'wptb-element-option';\n\t\t} else {\n\t\t\tconst children = document.getElementById('element-options-group').childNodes;\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\tif (children[i].style) children[i].style.display = 'none';\n\t\t\t}\n\t\t\tthis.activateSection('options_group');\n\t\t}\n\n\t\tconst controlsConfigJson = tmplControlsConfig(data);\n\t\tlet controlsConfig = JSON.parse(controlsConfigJson);\n\n\t\tconst elementOptionsGroupIdsInvolved = [];\n\t\tconst elementOptionsGroupInvolved = {};\n\t\tconst elementOptionsContainerInvolved = {};\n\n\t\t// object for save all scrips for each controls\n\t\tconst controlScriptsObj = {};\n\n\t\t// array for keep \"appear depend on\" params\n\t\tconst controlappearDependOnControl = [];\n\n\t\t// array for keep \"toggle switch\" params\n\t\tconst controltoggleSwitch = [];\n\n\t\t// array for keep \"value depend on\" params\n\t\tconst controlValueDependOnControl = [];\n\n\t\t// create controls\n\t\tconst elementOptionsScriptsContainerIndic = false;\n\t\tif (controlName) {\n\t\t\tconst controlsConfigNew = {};\n\t\t\tcontrolsConfigNew[controlName] = controlsConfig[controlName];\n\t\t\tcontrolsConfig = controlsConfigNew;\n\t\t}\n\t\tlet i = 0;\n\t\tObject.keys(controlsConfig).forEach(function (key) {\n\t\t\tconst data = controlsConfig[key];\n\t\t\tdata.controlKey = key;\n\n\t\t\t// get necessary wp js template\n\t\t\tconst tmplControlTemplate = wp.template(`wptb-${data.type}-control`);\n\n\t\t\tdata.elemContainer = elementContainerClass;\n\t\t\tdata.elementControlTargetUnicClass = `wptb-el-${elementOptionClassIndic}-${data.controlKey}`;\n\t\t\tObject.keys(data).map((k) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(data, k) && data[k] === 'control_param_calculate_value') {\n\t\t\t\t\tdata[k] = WPTB_Helper.controlParamCalculateValue(data.elementControlTargetUnicClass, k);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst controlTemplate = tmplControlTemplate(data);\n\t\t\tif ('appearDependOnControl' in data) {\n\t\t\t\tif (Array.isArray(data.appearDependOnControl)) {\n\t\t\t\t\tcontrolappearDependOnControl.push([data.appearDependOnControl, data.elementControlTargetUnicClass]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ('toggleSwitch' in data) {\n\t\t\t\tif (Array.isArray(data.toggleSwitch)) {\n\t\t\t\t\tcontroltoggleSwitch.push([data.toggleSwitch, data.elementControlTargetUnicClass]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ('valueDependOnControl' in data && !valueDependOnControl && !targetControlElementClass) {\n\t\t\t\tlet valueDependOnControlCorrect = '';\n\t\t\t\tif (data.valueDependOnControlCorrect) valueDependOnControlCorrect = data.valueDependOnControlCorrect;\n\t\t\t\tcontrolValueDependOnControl.push([\n\t\t\t\t\tdata.valueDependOnControl,\n\t\t\t\t\tdata.elementControlTargetUnicClass,\n\t\t\t\t\tvalueDependOnControlCorrect,\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tfunction elementOptionsContainerInvolvedGet(elementOptionsGroupId, elementOptionsContainerInvolved) {\n\t\t\t\tif (!elementOptionsContainerInvolved[elementOptionsGroupId]) {\n\t\t\t\t\tconst elementOptionsContainer = document.createElement('div');\n\t\t\t\t\telementOptionsContainer.classList.add('wptb-element-options', `wptb-options-${infArr[1]}`);\n\t\t\t\t\tdocument.getElementById(elementOptionsGroupId).appendChild(elementOptionsContainer);\n\t\t\t\t\telementOptionsContainerInvolved[elementOptionsGroupId] = elementOptionsContainer;\n\t\t\t\t}\n\n\t\t\t\treturn elementOptionsContainerInvolved[elementOptionsGroupId];\n\t\t\t}\n\n\t\t\tif (elementOptionsGroupIdsInvolved.indexOf(data.elementOptionsGroupId) == -1 && !controlName) {\n\t\t\t\telementOptionsGroupIdsInvolved.push(data.elementOptionsGroupId);\n\t\t\t\t// clear elements from options group\n\t\t\t\t// document.getElementById( 'element-options-group' ).innerHTML = '';\n\t\t\t\telementOptionsGroup = document.getElementById(data.elementOptionsGroupId);\n\t\t\t\tconst elementOptionsGroupChildren = [...elementOptionsGroup.children];\n\t\t\t\tfor (let i = 0; i < elementOptionsGroupChildren.length; i++) {\n\t\t\t\t\telementOptionsGroup.removeChild(elementOptionsGroupChildren[i]);\n\t\t\t\t}\n\t\t\t\telementOptionsGroupInvolved[data.elementOptionsGroupId] = elementOptionsGroup;\n\t\t\t}\n\n\t\t\tcontrolElementParent = elementOptionsGroupInvolved[data.elementOptionsGroupId];\n\n\t\t\tif (data.elementOptionsContainerOn === 'true' && !controlName) {\n\t\t\t\tcontrolElementParent = elementOptionsContainerInvolvedGet(\n\t\t\t\t\tdata.elementOptionsGroupId,\n\t\t\t\t\telementOptionsContainerInvolved\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (data.elementOptionContainerOn === 'true') {\n\t\t\t\tconst elementOptionContainer = document.createElement('div');\n\t\t\t\telementOptionContainer.classList.add(data.elementOptionClass, 'wptb-settings-items');\n\n\t\t\t\tif (data.customClassForContainer) {\n\t\t\t\t\telementOptionContainer.classList.add(data.customClassForContainer);\n\t\t\t\t}\n\n\t\t\t\tif (data.containerAdditionalStyles) {\n\t\t\t\t\telementOptionContainer.setAttribute('style', data.containerAdditionalStyles);\n\t\t\t\t}\n\n\t\t\t\tif (targetControlElementClass) {\n\t\t\t\t\tlet targetControlElement = document.getElementsByClassName(targetControlElementClass);\n\t\t\t\t\tif (targetControlElement.length > 0) {\n\t\t\t\t\t\ttargetControlElement = targetControlElement[0];\n\t\t\t\t\t\tconst controlContainerElem = WPTB_Helper.findAncestor(\n\t\t\t\t\t\t\ttargetControlElement,\n\t\t\t\t\t\t\t'wptb-element-option'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (controlContainerElem) {\n\t\t\t\t\t\t\tconst controlContainerElemParent = controlContainerElem.parentNode;\n\t\t\t\t\t\t\tcontrolContainerElemParent.insertBefore(elementOptionContainer, controlContainerElem);\n\t\t\t\t\t\t\tcontrolContainerElemParent.removeChild(controlContainerElem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcontrolElementParent.appendChild(elementOptionContainer);\n\t\t\t\t}\n\t\t\t\tcontrolElementParent = elementOptionContainer;\n\t\t\t}\n\t\t\tcontrolElementParent.innerHTML += controlTemplate;\n\n\t\t\tlet helperJavascriptElem = controlElementParent.getElementsByTagName('wptb-template-script');\n\t\t\tif (helperJavascriptElem.length > 0) {\n\t\t\t\thelperJavascriptElem = helperJavascriptElem[0];\n\t\t\t\tconst helperJavascriptCode = helperJavascriptElem.innerText;\n\t\t\t\tcontrolElementParent.removeChild(helperJavascriptElem);\n\t\t\t\tconst script = document.createElement('script');\n\t\t\t\tscript.setAttribute('type', 'text/javascript');\n\t\t\t\tscript.setAttribute('id', `${kind}-${data.controlKey}`);\n\t\t\t\tscript.innerHTML = helperJavascriptCode.replace(/\\r|\\n|\\t/g, '').trim();\n\t\t\t\tif (\n\t\t\t\t\t!controlScriptsObj[data.elementOptionsGroupId] ||\n\t\t\t\t\t!Array.isArray(controlScriptsObj[data.elementOptionsGroupId])\n\t\t\t\t) {\n\t\t\t\t\tcontrolScriptsObj[data.elementOptionsGroupId] = [];\n\t\t\t\t}\n\t\t\t\tcontrolScriptsObj[data.elementOptionsGroupId].push(script);\n\t\t\t}\n\n\t\t\ti++;\n\t\t});\n\n\t\telement.optionsGroupIds = elementOptionsGroupIdsInvolved;\n\n\t\t// run the scripts of controls\n\t\tObject.keys(controlScriptsObj).forEach(function (elementOptionsGroupId) {\n\t\t\tif (!targetControlElementClass) {\n\t\t\t\telementOptionsScriptsContainer = document.createElement('div');\n\t\t\t\telementOptionsScriptsContainer.classList.add(\n\t\t\t\t\t'wptb-element-options-scripts',\n\t\t\t\t\t`wptb-options-${infArr[1]}`\n\t\t\t\t);\n\t\t\t\telementOptionsGroupInvolved[elementOptionsGroupId].appendChild(elementOptionsScriptsContainer);\n\t\t\t}\n\n\t\t\tconst controlScriptsArr = controlScriptsObj[elementOptionsGroupId];\n\t\t\tif (controlScriptsArr.length > 0) {\n\t\t\t\tfor (let i = 0; i < controlScriptsArr.length; i++) {\n\t\t\t\t\tif (targetControlElementClass) {\n\t\t\t\t\t\tconst id = `${kind}-${controlName}`;\n\t\t\t\t\t\tconst script = document.getElementById(id);\n\t\t\t\t\t\telementOptionsScriptsContainer = script.parentNode;\n\t\t\t\t\t\telementOptionsScriptsContainer.insertBefore(controlScriptsArr[i], script);\n\t\t\t\t\t\telementOptionsScriptsContainer.removeChild(script);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementOptionsScriptsContainer.appendChild(controlScriptsArr[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// run toggleSwitch function\n\t\tfor (let i = 0; i < controltoggleSwitch.length; i++) {\n\t\t\tWPTB_Helper.toggleSwitch(controltoggleSwitch[i][0], controltoggleSwitch[i][1]);\n\t\t}\n\n\t\t// run appearDependOnControl function\n\t\tfor (let i = 0; i < controlappearDependOnControl.length; i++) {\n\t\t\tWPTB_Helper.appearDependOnControl(controlappearDependOnControl[i][0], controlappearDependOnControl[i][1]);\n\t\t}\n\n\t\tWPTB_Helper.wptbDocumentEventGenerate('element:controls:active', element);\n\t\t// run valueDependOnControl function\n\t\tfor (let i = 0; i < controlValueDependOnControl.length; i++) {\n\t\t\tWPTB_Helper.valueDependOnControl(\n\t\t\t\tcontrolValueDependOnControl[i][0],\n\t\t\t\tcontrolValueDependOnControl[i][1],\n\t\t\t\tcontrolValueDependOnControl[i][2],\n\t\t\t\tkind,\n\t\t\t\telement\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * remove edit-action classes from wptb-ph-element elements\n\t */\n\teditActionClassRemove() {\n\t\tconst editActiveElems = document.querySelectorAll('.edit-active');\n\t\tfor (let i = 0; i < editActiveElems.length; i++) {\n\t\t\teditActiveElems[i].classList.remove('edit-active');\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @param unicClass\n\t * @param controlKey\n\t * @param key\n\t * @return {*}\n\t */\n\tcontrolParamCalculateValue(unicClass, key) {\n\t\tconst unicClassP = WPTB_Helper.replaceAll(unicClass, '-', '_');\n\t\tif (\n\t\t\twindow[`paramCalculateValue_${unicClassP}_${key}`] &&\n\t\t\ttypeof window[`paramCalculateValue_${unicClassP}_${key}`] === 'function'\n\t\t) {\n\t\t\treturn window[`paramCalculateValue_${unicClassP}_${key}`]();\n\t\t}\n\t},\n\n\tcontrolParamCalculateValueCreateFunction(element, controlKey, key, handlerFunction) {\n\t\tconst infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\tconst unicClass = `wptb-el-${infArr[1]}-${controlKey}`;\n\t\tconst unicClassP = WPTB_Helper.replaceAll(unicClass, '-', '_');\n\t\twindow[`paramCalculateValue_${unicClassP}_${key}`] = function () {\n\t\t\treturn handlerFunction(element);\n\t\t};\n\t},\n\n\t/**\n\t * function for create, update css for element\n\t *\n\t * @param elementContainer\n\t * @param selector\n\t * @param cssName\n\t * @param cssValue\n\t */\n\tmanagerExternalCssStyles(elementContainer, selector, cssName, cssValue) {\n\t\tconst infArr = elementContainer.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\tif (!infArr || !Array.isArray(infArr)) {\n\t\t\tlet table = document.getElementsByClassName('wptb-preview-table');\n\n\t\t\tif (table.length > 0) {\n\t\t\t\ttable = table[0];\n\n\t\t\t\tconst infArr = table.className.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tselector = `.${infArr[0]} ${selector}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tconst cssForThisElement = head.querySelector(`#styles-${elementContainer}`);\n\t\t\tif (cssForThisElement) {\n\t\t\t\tconst cssText = cssForThisElement.innerHTML;\n\t\t\t\tif (cssText) {\n\t\t\t\t\tconst cssTextArrFirst = cssText.split('}');\n\t\t\t\t\tcssTextArrFirst.pop();\n\t\t\t\t\tlet selectorExists = false;\n\t\t\t\t\tfor (let i = 0; i < cssTextArrFirst.length; i++) {\n\t\t\t\t\t\tconst cssTextArrSecond = cssTextArrFirst[i].split('{');\n\t\t\t\t\t\tif (cssTextArrSecond[0] === selector) {\n\t\t\t\t\t\t\tconst cssTextArrThird = cssTextArrSecond[1].split(';');\n\t\t\t\t\t\t\tcssTextArrThird.pop();\n\t\t\t\t\t\t\tlet cssNameExists = false;\n\t\t\t\t\t\t\tfor (let j = 0; j < cssTextArrThird.length; j++) {\n\t\t\t\t\t\t\t\tconst cssTextArrFourth = cssTextArrThird[j].split(':');\n\t\t\t\t\t\t\t\tif (cssTextArrFourth[0] === cssName) {\n\t\t\t\t\t\t\t\t\tif (cssValue) {\n\t\t\t\t\t\t\t\t\t\tcssTextArrThird[j] = `${cssName}:${cssValue}`;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcssTextArrThird.splice(j, 1);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcssTextArrSecond[1] = cssTextArrThird.join(';')\n\t\t\t\t\t\t\t\t\t\t? `${cssTextArrThird.join(';')};`\n\t\t\t\t\t\t\t\t\t\t: '';\n\t\t\t\t\t\t\t\t\tcssNameExists = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!cssNameExists) {\n\t\t\t\t\t\t\t\tif (cssValue) {\n\t\t\t\t\t\t\t\t\tcssTextArrSecond[1] += `${cssName}:${cssValue};`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (cssTextArrSecond[1]) {\n\t\t\t\t\t\t\t\tcssTextArrFirst[i] = `${cssTextArrSecond[0]}{${cssTextArrSecond[1]}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcssTextArrFirst.splice(i, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (cssTextArrFirst.join('}')) {\n\t\t\t\t\t\t\t\tcssForThisElement.innerHTML = `${cssTextArrFirst.join('}')}}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thead.removeChild(cssForThisElement);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tselectorExists = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!selectorExists) {\n\t\t\t\t\t\tif (cssValue) {\n\t\t\t\t\t\t\tcssForThisElement.innerHTML = `${cssText + selector}{${cssName}:${cssValue};}`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcssForThisElement.innerHTML = cssText;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (cssValue) {\n\t\t\t\t\tcssForThisElement.innerHTML = `${selector}{${cssName}:${cssValue};}`;\n\t\t\t\t} else {\n\t\t\t\t\thead.removeChild(cssForThisElement);\n\t\t\t\t}\n\t\t\t} else if (cssValue) {\n\t\t\t\tconst cssForThisElement = document.createElement('style');\n\t\t\t\tcssForThisElement.setAttribute('id', `styles-${elementContainer}`);\n\t\t\t\tcssForThisElement.classList.add('styles-wptb-elements');\n\t\t\t\tcssForThisElement.innerHTML = `${selector}{${cssName}:${cssValue};}`;\n\t\t\t\thead.appendChild(cssForThisElement);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t *\n\t * Register section parts for sidebar\n\t *\n\t * @param {Array} sections an array of section names\n\t */\n\tregisterSections(sections) {\n\t\tthis.sections = {};\n\t\tthis.previousSection = null;\n\t\tthis.currentSection = null;\n\t\tif (!Array.isArray(sections)) {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tsections = [sections];\n\t\t}\n\n\t\t// eslint-disable-next-line array-callback-return\n\t\tsections.map((s) => {\n\t\t\tconst sectionElement = document.querySelector(`[data-wptb-section=${s}]`);\n\t\t\tif (sectionElement) {\n\t\t\t\tthis.sections[s] = sectionElement;\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Activate a registered section and deactivates others\n\t *\n\t * @param {string} sectionDataId section name to be activated\n\t * @param {string} displayType display type override for section to be used in its display style property\n\t */\n\tactivateSection(sectionDataId, displayType = 'block') {\n\t\tthis.previousSection = this.currentSection;\n\t\tthis.currentSection = sectionDataId;\n\t\tthis.triggerSectionEvent(sectionDataId);\n\t\t// eslint-disable-next-line array-callback-return\n\t\tObject.keys(this.sections).map((k) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.sections, k)) {\n\t\t\t\tconst visibility = sectionDataId === k ? displayType : 'none';\n\t\t\t\tthis.sections[k].style = `display: ${visibility} !important`;\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Get id of current active section.\n\t *\n\t * @return {string} active section id\n\t */\n\tgetCurrentSection() {\n\t\treturn this.currentSection;\n\t},\n\t/**\n\t * Get id of previous section.\n\t *\n\t * @return {string} previous section id\n\t */\n\tgetPreviousSection() {\n\t\treturn this.previousSection;\n\t},\n\t/**\n\t * Get current section from search parameter 'wptb-builder-section' of window location\n\t */\n\tgetSectionFromUrl() {\n\t\tconst parsedUrl = new URL(window.location.href);\n\t\tconst urlSection = parsedUrl.searchParams.get('wptb-builder-section');\n\t\tif (urlSection) {\n\t\t\tif (Object.keys(this.sections).some((key) => key === urlSection)) {\n\t\t\t\tthis.activateSection(urlSection);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Set up related buttons and links to trigger certain elements\n\t */\n\tsetupSectionButtons() {\n\t\tconst sectionButtons = Array.from(document.querySelectorAll('[data-wptb-section-button]'));\n\t\tconst vm = this;\n\n\t\tsectionButtons.map((s) => {\n\t\t\tconst sectionName = s.dataset.wptbSectionButton;\n\t\t\ts.addEventListener('click', function () {\n\t\t\t\tconst displayType = s.dataset.wptbSectionDisplayType;\n\t\t\t\tvm.activateSection(sectionName, displayType);\n\t\t\t\tWPTB_Helper.editActionClassRemove();\n\t\t\t});\n\n\t\t\tdocument.addEventListener('wptbSectionChanged', (e) => {\n\t\t\t\tif (e.detail === sectionName) {\n\t\t\t\t\ts.classList.remove('disabled');\n\t\t\t\t\ts.classList.add('active');\n\t\t\t\t} else {\n\t\t\t\t\ts.classList.remove('active');\n\t\t\t\t\ts.classList.add('disabled');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tsetupPanelToggleButtons() {\n\t\tconst $ = jQuery;\n\n\t\t$('.wptb-panel-toggle-group').each(function () {\n\t\t\tconst vm = $(this);\n\t\t\t$(this)\n\t\t\t\t.find('.toggle-icon')\n\t\t\t\t.click(() => {\n\t\t\t\t\tvm.find('.wptb-panel-toggle-target').slideToggle();\n\t\t\t\t\tvm.toggleClass('wptb-panel-toggle-content');\n\t\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Trigger a section change event\n\t *\n\t * @param {string} sectionName section name\n\t */\n\ttriggerSectionEvent(sectionName) {\n\t\tconst sectionEvent = new CustomEvent('wptbSectionChanged', { detail: sectionName });\n\n\t\tdocument.dispatchEvent(sectionEvent);\n\t},\n\t/**\n\t * Setup sidebar toggle element\n\t *\n\t * @param {string} toggleSelector query selector for drawer toggle element\n\t */\n\tsetupSidebarToggle(toggleSelector) {\n\t\tconst toggleButton = document.querySelector(toggleSelector);\n\t\tif (toggleButton) {\n\t\t\ttoggleButton.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tdocument.body.classList.toggle('collapsed');\n\t\t\t});\n\t\t}\n\t},\n\t// function for deleting all external CSS for the element\n\texternalCssStylesDelete(elementContainerClass) {\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tconst cssForThisElement = head.querySelector(`#styles-${elementContainerClass}`);\n\n\t\t\tif (cssForThisElement) {\n\t\t\t\thead.removeChild(cssForThisElement);\n\t\t\t}\n\t\t}\n\t},\n\t// function for copy all external CSS for the element\n\texternalCssStylesCopy(activeElement, copyElement) {\n\t\tif (activeElement) {\n\t\t\tconst infArr = activeElement.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tconst activeElemClass = infArr[0];\n\n\t\t\t\tconst { head } = document;\n\t\t\t\tif (head) {\n\t\t\t\t\tconst cssForActiveElement = head.querySelector(`#styles-${activeElemClass}`);\n\n\t\t\t\t\tif (cssForActiveElement) {\n\t\t\t\t\t\tconst cssForNewElement = cssForActiveElement.cloneNode(true);\n\n\t\t\t\t\t\tcssForNewElement.removeAttribute('id', `styles-${activeElemClass}`);\n\n\t\t\t\t\t\tconst infArrCopyEl = copyElement.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\t\t\t\tif (infArrCopyEl && Array.isArray(infArrCopyEl)) {\n\t\t\t\t\t\t\tcssForNewElement.setAttribute('id', `styles-${infArrCopyEl[0]}`);\n\t\t\t\t\t\t\tconst cssForActiveElementInnerHTML = cssForActiveElement.innerHTML;\n\t\t\t\t\t\t\tconst cssForNewElementInnerHTML = WPTB_Helper.replaceAll(\n\t\t\t\t\t\t\t\tcssForActiveElementInnerHTML,\n\t\t\t\t\t\t\t\tactiveElemClass,\n\t\t\t\t\t\t\t\tinfArrCopyEl[0]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcssForNewElement.innerHTML = cssForNewElementInnerHTML;\n\t\t\t\t\t\t\thead.appendChild(cssForNewElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// function for convertation elements stiles in json\n\telementsStylesConvertToObject() {\n\t\tconst { head } = document;\n\t\tconst stylesElements = head.querySelectorAll('.styles-wptb-elements');\n\t\tconst stylesObj = {};\n\t\tfor (let i = 0; i < stylesElements.length; i++) {\n\t\t\tconst styleElemId = stylesElements[i].getAttribute('id');\n\t\t\tif (styleElemId && stylesElements[i].innerHTML) {\n\t\t\t\tstylesObj[styleElemId] = stylesElements[i].innerHTML;\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(stylesObj).length != 0) {\n\t\t\treturn JSON.stringify(stylesObj);\n\t\t}\n\t\treturn '';\n\t},\n\t// function for set scc styles tags to head\n\telementsStylesSetFromObject(jsonObject) {\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tlet stylesElements = head.querySelectorAll('.styles-wptb-elements');\n\t\t\tif (stylesElements.length > 0) {\n\t\t\t\tstylesElements = [...stylesElements];\n\t\t\t\tfor (let i = 0; i < stylesElements.length; i++) {\n\t\t\t\t\thead.removeChild(stylesElements[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (jsonObject) {\n\t\t\t\tconst stylesObj = JSON.parse(jsonObject);\n\t\t\t\tif (Object.keys(stylesObj).length != 0) {\n\t\t\t\t\tObject.keys(stylesObj).forEach(function (key) {\n\t\t\t\t\t\tconst cssText = stylesObj[key];\n\t\t\t\t\t\tconst styleCss = document.createElement('style');\n\t\t\t\t\t\tstyleCss.setAttribute('id', key);\n\t\t\t\t\t\tstyleCss.classList.add('styles-wptb-elements');\n\t\t\t\t\t\tstyleCss.innerHTML = cssText;\n\t\t\t\t\t\thead.appendChild(styleCss);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// function for table saving\n\tsaveTable(event, startSaving, previewSaving) {\n\t\t// show save indicator\n\t\tWPTB_Helper.tableSaveIndicator(true);\n\n\t\tif (!previewSaving && !startSaving) {\n\t\t\tif (\n\t\t\t\t(!event.target.dataset.wptbTableStateNumberSave && window.wptbTableStateNumberShow == 0) ||\n\t\t\t\twindow.wptbTableStateNumberShow == event.target.dataset.wptbTableStateNumberSave\n\t\t\t) {\n\t\t\t\t// return;\n\t\t\t}\n\t\t}\n\n\t\tif (!previewSaving) {\n\t\t\tconst bar = document.querySelector('.wptb-edit-bar');\n\t\t\tif (bar && bar.classList.contains('visible')) {\n\t\t\t\tconst table = document.getElementsByClassName('wptb-preview-table')[0];\n\t\t\t\tWPTB_Helper.toggleTableEditMode();\n\t\t\t}\n\t\t}\n\n\t\t// before save event trigger\n\t\tWPTB_Helper.wptbDocumentEventGenerate('wptb:save:before', document);\n\n\t\t// clean any left over artifacts related to builder\n\t\tWPTB_Helper.tableClean();\n\n\t\tconst http = new XMLHttpRequest();\n\t\tconst url = `${wptb_admin_object ? wptb_admin_object.ajaxurl : ajaxurl}?action=save_table`;\n\t\tconst t = document.getElementById('wptb-setup-name').value.trim();\n\t\tlet messagingArea;\n\t\tlet code;\n\t\tlet datas;\n\n\t\tcode = document.getElementsByClassName('wptb-preview-table');\n\n\t\tlet postId;\n\t\tif ((rs = WPTB_Helper.detectMode()) || (rs = document.wptbId)) {\n\t\t\tpostId = rs;\n\t\t}\n\t\tlet paramIdsNecessaryChange = false;\n\t\tif (code.length > 0) {\n\t\t\tcode = code[0];\n\t\t\tconst codeClone = code.cloneNode(true);\n\t\t\tif (postId) {\n\t\t\t\tif (codeClone.classList.contains('wptb-element-main-table_setting-startedid-0')) {\n\t\t\t\t\tcodeClone.classList.remove('wptb-element-main-table_setting-startedid-0');\n\t\t\t\t\tcodeClone.classList.add(`wptb-element-main-table_setting-${postId}`);\n\t\t\t\t\tconst wptbTableSetup = document.querySelector('.wptb-table-setup');\n\t\t\t\t\tif (wptbTableSetup) {\n\t\t\t\t\t\twptbTableSetup.innerHTML = '';\n\t\t\t\t\t\twptbTableSetup.appendChild(codeClone);\n\t\t\t\t\t\tWPTB_Table();\n\t\t\t\t\t}\n\t\t\t\t\tparamIdsNecessaryChange = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcodeClone.columns = code.columns;\n\t\t\tcode = WPTB_Stringifier(codeClone);\n\t\t\tcode = code.outerHTML;\n\t\t} else {\n\t\t\tcode = '';\n\t\t}\n\n\t\tif (!previewSaving) {\n\t\t\tdatas = '';\n\t\t\tconst datas_containers = document.getElementsByClassName('wptb-element-datas');\n\n\t\t\tif (datas_containers.length > 0) {\n\t\t\t\tif (datas_containers[0].innerHTML) {\n\t\t\t\t\tdatas = datas_containers[0].innerHTML;\n\n\t\t\t\t\tif (paramIdsNecessaryChange) {\n\t\t\t\t\t\tdatas = WPTB_Helper.replaceAll(\n\t\t\t\t\t\t\tdatas,\n\t\t\t\t\t\t\t'tmpl-wptb-el-datas-main-table_setting-startedid-0',\n\t\t\t\t\t\t\t`tmpl-wptb-el-datas-main-table_setting-${postId}`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tdatas = WPTB_Helper.replaceAll(\n\t\t\t\t\t\t\tdatas,\n\t\t\t\t\t\t\t'data-wptb-el-main-table_setting-startedid-0',\n\t\t\t\t\t\t\t`data-wptb-el-main-table_setting-${postId}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet styleObjJson = WPTB_Helper.elementsStylesConvertToObject();\n\t\tif (paramIdsNecessaryChange) {\n\t\t\tstyleObjJson = WPTB_Helper.replaceAll(\n\t\t\t\tstyleObjJson,\n\t\t\t\t'.wptb-element-main-table_setting-startedid-0',\n\t\t\t\t`.wptb-element-main-table_setting-${postId}`\n\t\t\t);\n\t\t}\n\n\t\tif (t === '' && code === '') {\n\t\t\tlet messagingAreaText = '';\n\t\t\tif (t === '') messagingAreaText += 'You must assign a name to the table before saving it.</br>';\n\t\t\tif (code === '') messagingAreaText += \"Table wasn't created\";\n\t\t\tmessagingArea = document.getElementById('wptb-messaging-area');\n\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-error wptb-message\">Error: ${messagingAreaText}</div>`;\n\t\t\tmessagingArea.classList.add('wptb-warning');\n\t\t\tsetTimeout(function () {\n\t\t\t\tmessagingArea.removeChild(messagingArea.firstChild);\n\t\t\t}, 4000);\n\t\t\treturn;\n\t\t}\n\n\t\tlet params = {\n\t\t\ttitle: t,\n\t\t\tcontent: code,\n\t\t\telements_datas: datas,\n\t\t\telements_styles: styleObjJson,\n\t\t\tsecurity_code: wptb_admin_object.security_code,\n\t\t};\n\n\t\tif (previewSaving) {\n\t\t\tparams.preview_saving = previewSaving;\n\t\t}\n\n\t\tif (postId) {\n\t\t\tparams.id = postId;\n\t\t}\n\n\t\t// wptb save before event\n\t\tWPTB_Helper.wptbDocumentEventGenerate('wptb:save:before', document, params);\n\n\t\tparams = JSON.stringify(params);\n\n\t\thttp.open('POST', url, true);\n\n\t\thttp.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n\n\t\thttp.onreadystatechange = function (action) {\n\t\t\tif (this.readyState == 4) {\n\t\t\t\t// hide save indicator\n\t\t\t\tWPTB_Helper.tableSaveIndicator(false);\n\n\t\t\t\tif (this.status == 200) {\n\t\t\t\t\tconst data = JSON.parse(http.responseText);\n\t\t\t\t\tmessagingArea = document.getElementById('wptb-messaging-area');\n\n\t\t\t\t\tif (data[0] == 'saved') {\n\t\t\t\t\t\tlet builderPageUrl = document.location.href.replace('#', '');\n\t\t\t\t\t\tconst regex = new RegExp('&table=(.+)', 'i');\n\t\t\t\t\t\tbuilderPageUrl = builderPageUrl.replace(regex, '');\n\t\t\t\t\t\twindow.history.pushState(null, null, `${builderPageUrl}&table=${data[1]}`);\n\n\t\t\t\t\t\tdocument.wptbId = data[1];\n\t\t\t\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-success wptb-message\">Table \"${t}\" was successfully saved.</div>`;\n\n\t\t\t\t\t\tWPTB_NotificationManager.sendNotification({ message: `Table ${t} was successfully saved.` });\n\t\t\t\t\t\tdocument.getElementsByClassName('wptb-embed-btn')[0].classList.remove('wptb-button-disable');\n\t\t\t\t\t\tdocument.getElementById('wptb-embed-shortcode').value = `[wptb id=${data[1]}]`;\n\t\t\t\t\t\tconst wptbPreviewTable = document.querySelector('.wptb-preview-table');\n\t\t\t\t\t\tlet wptbPreviewBtn = document.getElementsByClassName('wptb-preview-btn');\n\t\t\t\t\t\tif (wptbPreviewBtn.length > 0) {\n\t\t\t\t\t\t\twptbPreviewBtn = wptbPreviewBtn[0];\n\t\t\t\t\t\t\twptbPreviewBtn.classList.remove('wptb-button-disable');\n\t\t\t\t\t\t\tlet wptbPreviewBtnHref = wptbPreviewBtn.dataset.previewHref;\n\t\t\t\t\t\t\twptbPreviewBtnHref = wptbPreviewBtnHref.replace('empty', data[1]);\n\t\t\t\t\t\t\twptbPreviewBtn.setAttribute('href', wptbPreviewBtnHref);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent.target.dataset.wptbTableStateNumberSave = window.wptbTableStateNumberShow;\n\t\t\t\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\t\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// WPTB_Helper.saveTable( event, true );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (data[0] == 'edited' && startSaving) {\n\t\t\t\t\t\tdocument.wptbId = data[1];\n\t\t\t\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-success wptb-message\">Table \"${t}\" was successfully saved.</div>`;\n\n\t\t\t\t\t\tWPTB_NotificationManager.sendNotification({ message: `Table ${t} was successfully saved.` });\n\t\t\t\t\t\tdocument.getElementsByClassName('wptb-embed-btn')[0].classList.remove('wptb-button-disable');\n\t\t\t\t\t\tdocument.getElementById('wptb-embed-shortcode').value = `[wptb id=${data[1]}]`;\n\t\t\t\t\t\tconst wptbPreviewTable = document.querySelector('.wptb-preview-table');\n\t\t\t\t\t\tlet wptbPreviewBtn = document.getElementsByClassName('wptb-preview-btn');\n\t\t\t\t\t\tif (wptbPreviewBtn.length > 0) {\n\t\t\t\t\t\t\twptbPreviewBtn = wptbPreviewBtn[0];\n\t\t\t\t\t\t\twptbPreviewBtn.classList.remove('wptb-button-disable');\n\t\t\t\t\t\t\tlet wptbPreviewBtnHref = wptbPreviewBtn.dataset.previewHref;\n\t\t\t\t\t\t\twptbPreviewBtnHref = wptbPreviewBtnHref.replace('empty', data[1]);\n\t\t\t\t\t\t\twptbPreviewBtn.setAttribute('href', wptbPreviewBtnHref);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent.target.dataset.wptbTableStateNumberSave = window.wptbTableStateNumberShow;\n\t\t\t\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\t\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (data[0] == 'edited') {\n\t\t\t\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-success wptb-message\">Table \"${t}\" was successfully updated.</div>`;\n\n\t\t\t\t\t\tWPTB_NotificationManager.sendNotification({ message: `Table ${t} was successfully updated.` });\n\t\t\t\t\t\tevent.target.dataset.wptbTableStateNumberSave = window.wptbTableStateNumberShow;\n\n\t\t\t\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\t\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (data[0] == 'preview_edited') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessagingArea.innerHTML = '<div class=\"wptb-error wptb-message\">Safety problems</div>';\n\t\t\t\t\t}\n\t\t\t\t\tmessagingArea.classList.add('wptb-success');\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tmessagingArea.removeChild(messagingArea.firstChild);\n\t\t\t\t\t}, 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thttp.send(params);\n\t},\n\t//\n\tclickOnFreeSpace() {\n\t\tWPTB_Helper.editActionClassRemove();\n\t\t// if current active section is responsive menu, ignore this functionality\n\t\tif (this.getCurrentSection() === 'table_responsive_menu') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellModeBackground = document.querySelector('#wptb-cell_mode_background');\n\t\tif (cellModeBackground && cellModeBackground.classList.contains('visible')) {\n\t\t\treturn;\n\t\t}\n\t\t// document.getElementsByClassName( 'wptb-elements-container' )[0].style.display = 'table';\n\t\t// document.getElementsByClassName( 'wptb-settings-section' )[0].style.display = 'block';\n\t\t// document.getElementById( 'element-options-group' ).style.display = 'none';\n\t\tthis.activateSection('elements');\n\n\t\tconst wpcdFixedToolbar = document.getElementById('wpcd_fixed_toolbar');\n\t\tif (wpcdFixedToolbar.hasAttribute('data-toolbar-active-id')) {\n\t\t\tdocument\n\t\t\t\t.getElementById(wpcdFixedToolbar.getAttribute('data-toolbar-active-id'))\n\t\t\t\t.classList.remove('toolbar-active');\n\t\t}\n\t\tconst element = document.querySelector('.wptb-preview-table');\n\t\tif (element) {\n\t\t\tWPTB_Helper.elementOptionsSet('table_setting', element);\n\t\t}\n\t},\n\n\t/*\n\t * function for sending of element ajax request\n\t */\n\telementAjax(dataAjaxData, element) {\n\t\tconst http = new XMLHttpRequest();\n\t\tconst url = `${wptb_admin_object ? wptb_admin_object.ajaxurl : ajaxurl}?action=wptb_element_ajax`;\n\t\tlet element_name;\n\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\telement_name = infArr[1];\n\t\t}\n\n\t\tlet params = {\n\t\t\telement_ajax_data: dataAjaxData,\n\t\t\telement_name,\n\t\t\tsecurity_code: wptb_admin_object.security_code,\n\t\t};\n\t\tparams = JSON.stringify(params);\n\n\t\thttp.open('POST', url, true);\n\t\thttp.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n\n\t\thttp.onreadystatechange = function (action) {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tconst data = JSON.parse(http.responseText);\n\t\t\t\tlet detail;\n\t\t\t\tif (data && Array.isArray(data) && data[0] == 'element_ajax_responce') {\n\t\t\t\t\tdetail = { value: data[1] };\n\t\t\t\t} else {\n\t\t\t\t\tdetail = '';\n\t\t\t\t}\n\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('wptb-element:ajax-response', element, detail);\n\t\t\t}\n\t\t};\n\t\thttp.send(params);\n\t},\n\n\t/*\n\t * This just toggles visibility of cell edit bar, and toggles\n\t * cell selecting mode.\n\t */\n\ttoggleTableEditMode(close = false) {\n\t\tconst bar = document.getElementsByClassName('wptb-edit-bar');\n\t\tconst cellModeBackground = document.getElementById('wptb-cell_mode_background');\n\t\tconst leftScrollPanelCurtain = document.getElementById('wptb-left-scroll-panel-curtain');\n\t\tconst leftScrollPanelCellSettings = document.getElementById('wptb-left-scroll-panel-cell-settings');\n\t\tlet wptbPreviewTable = document.getElementsByClassName('wptb-preview-table');\n\t\tif (wptbPreviewTable.length > 0) {\n\t\t\twptbPreviewTable = wptbPreviewTable[0];\n\t\t}\n\n\t\tif (bar.length > 0) {\n\t\t\tlet toggleEditMode = '';\n\t\t\tfor (let i = 0; i < bar.length; i++) {\n\t\t\t\tif (close) {\n\t\t\t\t\tdocument.select.deactivateMultipleSelectMode();\n\t\t\t\t\tbar[i].classList.remove('visible');\n\t\t\t\t\tcellModeBackground.classList.remove('visible');\n\t\t\t\t\tleftScrollPanelCurtain.classList.remove('visible');\n\t\t\t\t\tleftScrollPanelCellSettings.classList.remove('visible');\n\t\t\t\t\twptbPreviewTable.parentNode.classList.remove('wptb-preview-table-manage-cells');\n\t\t\t\t\tconst wptbPreviewTableTds = wptbPreviewTable.getElementsByTagName('td');\n\t\t\t\t\tif (wptbPreviewTableTds.length > 0) {\n\t\t\t\t\t\tfor (let i = 0; i < wptbPreviewTableTds.length; i++) {\n\t\t\t\t\t\t\twptbPreviewTableTds[i].classList.remove('wptb-highlighted');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttoggleEditMode = 'closed';\n\t\t\t\t\t// @deprecated\n\t\t\t\t\t// WPTB_Helper.activateSection('elements');\n\t\t\t\t} else if (!close) {\n\t\t\t\t\tdocument.select.activateMultipleSelectMode();\n\t\t\t\t\tbar[i].classList.add('visible');\n\t\t\t\t\tcellModeBackground.classList.add('visible');\n\t\t\t\t\tleftScrollPanelCurtain.classList.add('visible');\n\t\t\t\t\twptbPreviewTable.parentNode.classList.add('wptb-preview-table-manage-cells');\n\n\t\t\t\t\ttoggleEditMode = 'opened';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tWPTB_Helper.wptbDocumentEventGenerate(\n\t\t\t\t`wp-table-builder/table-edit-mode/${toggleEditMode}`,\n\t\t\t\twptbPreviewTable\n\t\t\t);\n\t\t}\n\t},\n\n\t/*\n\t * checking of dimension of value\n\t */\n\tcheckingDimensionValue(value, dimension) {\n\t\tvalue = String(value);\n\t\tdimension = String(dimension);\n\t\tif (value && dimension) {\n\t\t\tconst searchIndex = value.indexOf(dimension);\n\t\t\tif (searchIndex != -1 && searchIndex == value.length - dimension.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/*\n\t * if dimension is included - checking and if it necessary setting value\n\t * without dimension - return value\n\t */\n\tcheckSetGetStyleSizeValue(element, styleName, computedStyleName, dimension) {\n\t\tlet elemStyleValue = element.style[styleName];\n\t\telemStyleValue = String(elemStyleValue);\n\n\t\tif (!elemStyleValue || dimension ? !WPTB_Helper.checkingDimensionValue(elemStyleValue, dimension) : false) {\n\t\t\tconst elementStyles = window.getComputedStyle(element);\n\t\t\tif (\n\t\t\t\tcomputedStyleName && elementStyles.getPropertyValue(computedStyleName) && dimension\n\t\t\t\t\t? WPTB_Helper.checkingDimensionValue(elementStyles.getPropertyValue(computedStyleName), dimension)\n\t\t\t\t\t: true\n\t\t\t) {\n\t\t\t\tif (!dimension) {\n\t\t\t\t\treturn elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t}\n\t\t\t\telement.style[styleName] = elementStyles.getPropertyValue(computedStyleName);\n\t\t\t} else if (!dimension) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\telement.style[styleName] = null;\n\t\t\t}\n\t\t} else if (!dimension) {\n\t\t\treturn elemStyleValue;\n\t\t}\n\n\t\treturn element.style[styleName];\n\t},\n\n\t/*\n\t * function checking that element has the style\n\t * if this style is present - checking the format color\n\t * if param set is true - setting style for element (consider hex format of color)\n\t * if param set is false - getting style from element\n\t */\n\tcheckSetGetStyleColorValue(element, styleName, computedStyleName, set = false) {\n\t\tlet elemStyleColorValue = element.style[styleName];\n\n\t\tif (!elemStyleColorValue) {\n\t\t\tconst elementStyles = window.getComputedStyle(element, null);\n\n\t\t\tif (elementStyles && elementStyles.getPropertyValue(computedStyleName)) {\n\t\t\t\tif (set) {\n\t\t\t\t\telemStyleColorValue = WPTB_Helper.rgbToHex(elementStyles.getPropertyValue(computedStyleName));\n\t\t\t\t\tif (WPTB_Helper.isHex(elemStyleColorValue)) {\n\t\t\t\t\t\telement.style[styleName] = elemStyleColorValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.style[styleName] = '';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t}\n\t\t\t} else if (set) {\n\t\t\t\telement.style[styleName] = '';\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t} else if (!set) {\n\t\t\treturn elemStyleColorValue;\n\t\t}\n\t},\n\n\t/*\n\t * function checking that element has the style\n\t * if this style is present - checking the format color\n\t * if param set is true - setting style for element (consider hex format of color)\n\t * if param set is false - getting style from element\n\t */\n\tcheckSetGetStyleValue(element, styleName, computedStyleName, set = false) {\n\t\tconst elemStyleColorValue = element.style[styleName];\n\n\t\tif (!elemStyleColorValue) {\n\t\t\tconst elementStyles = window.getComputedStyle(element, null);\n\n\t\t\tif (elementStyles && elementStyles.getPropertyValue(computedStyleName)) {\n\t\t\t\tif (set) {\n\t\t\t\t\telement.style[styleName] = elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t} else {\n\t\t\t\t\treturn elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t}\n\t\t\t} else if (!set) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t} else if (!set) {\n\t\t\treturn elemStyleColorValue;\n\t\t}\n\t},\n\n\t/*\n\t * get the value of the same elements that have the most count\n\t */\n\tgetValueMaxCountSameElementsInArray(arr) {\n\t\tif (arr && Array.isArray(arr)) {\n\t\t\tconst check = {};\n\t\t\tlet countEmpty = 0;\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i]) {\n\t\t\t\t\tif (check[arr[i]]) {\n\t\t\t\t\t\tcheck[arr[i]]++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcheck[arr[i]] = 1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcountEmpty++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet maxPropName;\n\t\t\tfor (const key in check) {\n\t\t\t\tif (!maxPropName) {\n\t\t\t\t\tmaxPropName = key;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (check[maxPropName] < check[key]) {\n\t\t\t\t\tmaxPropName = key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn check[maxPropName] >= countEmpty ? maxPropName : '';\n\t\t}\n\t},\n\n\t/*\n\t * For assigning to each cell xIndex and y Index attributes,\n\t * these are the column number and row number of cell in table.\n\t */\n\trecalculateIndexes(table) {\n\t\tWPTB_RecalculateIndexes(table);\n\t},\n\n\t/**\n\t * Table Rows colors reinstall\n\t *\n\t * @param table\n\t */\n\ttableRowsColorsReinstall(table) {\n\t\tif (table.rows.length) {\n\t\t\tconst infArr = table.className.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tlet tableIndex = '';\n\t\t\t\tif (infArr[infArr.length - 1] == '0') {\n\t\t\t\t\ttableIndex = 'startedid-0';\n\t\t\t\t} else {\n\t\t\t\t\ttableIndex = infArr[infArr.length - 1];\n\t\t\t\t}\n\n\t\t\t\tconst tableHeaderBackground = document.querySelector(\n\t\t\t\t\t`.wptb-el-main-table_setting-${tableIndex}-tableHeaderBackground`\n\t\t\t\t);\n\t\t\t\tif (tableHeaderBackground) {\n\t\t\t\t\tconst details = { value: tableHeaderBackground.value };\n\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('controlColor:change', tableHeaderBackground, details);\n\t\t\t\t}\n\n\t\t\t\tconst tableEvenRowBackground = document.querySelector(\n\t\t\t\t\t`.wptb-el-main-table_setting-${tableIndex}-tableEvenRowBackground`\n\t\t\t\t);\n\t\t\t\tif (tableEvenRowBackground) {\n\t\t\t\t\tconst details = { value: tableEvenRowBackground.value };\n\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('controlColor:change', tableEvenRowBackground, details);\n\t\t\t\t}\n\n\t\t\t\tconst tableOddRowBackground = document.querySelector(\n\t\t\t\t\t`.wptb-el-main-table_setting-${tableIndex}-tableOddRowBackground`\n\t\t\t\t);\n\t\t\t\tif (tableOddRowBackground) {\n\t\t\t\t\tconst details = { value: tableOddRowBackground.value };\n\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('controlColor:change', tableOddRowBackground, details);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Get parent html element of given type\n\t *\n\t * @param {string} parentType type of parent element\n\t * @param {HTMLElement} el current element\n\t * @return {*} html element of type\n\t */\n\tgetParentOfType: (parentType, el) => {\n\t\tif (el.nodeName === parentType.toUpperCase()) {\n\t\t\treturn el;\n\t\t}\n\n\t\treturn WPTB_Helper.getParentOfType(parentType, el.parentElement);\n\t},\n\t// current relative type of drag element\n\t// this type is used on differentiating certain elements based on their positioning on table\n\tdragRelativeType: '',\n\t/**\n\t *\n\t * @param {string} val drag relative type\n\t */\n\tsetDragRelativeType(val) {\n\t\tthis.dragRelativeType = val;\n\t},\n\t// get drag relative type\n\tgetDragRelativeType() {\n\t\treturn this.dragRelativeType;\n\t},\n\t/**\n\t *\n\t * @param {HTMLElement} element\n\t * @param {string} styleName\n\t */\n\tgetElementColorStylesHex(element, styleName) {\n\t\tlet color = element.style[styleName];\n\t\tcolor = WPTB_Helper.rgbToHex(color);\n\t\tif (!WPTB_Helper.isHex(color)) {\n\t\t\tcolor = '';\n\t\t}\n\t\treturn color;\n\t},\n\t/**\n\t * Show element controls on adding them to table.\n\t */\n\tshowControlsOnElementMount() {\n\t\tdocument.addEventListener('element:mounted:dom', function (e) {\n\t\t\te.target.click();\n\t\t});\n\t},\n\t/**\n\t * Show elements list menu on left panel on removing element from table\n\t */\n\tshowElementsListOnRemove() {\n\t\tdocument.addEventListener('element:removed:dom', function () {\n\t\t\tWPTB_Helper.activateSection('elements');\n\t\t});\n\t},\n\t/**\n\t * Block tiny MCE initialization and element selected activation for data cells for specific active sections.\n\t * Sections: Manage cells, background menu\n\t */\n\tblockTinyMCE() {\n\t\tconst addBlocker = (parent) => {\n\t\t\tconst blockerElement = document.createElement('div');\n\t\t\tblockerElement.classList.add('wptb-plugin-blocker-element');\n\n\t\t\tconst haveChild = parent.childNodes.length > 0;\n\t\t\tparent.appendChild(blockerElement);\n\n\t\t\t// if don't have any children, then add before/after css element states to blocker in order to reflect table builder menu visuals\n\t\t\tif (!haveChild) {\n\t\t\t\tparent.classList.add('wptb-plugin-blocker-element-empty');\n\t\t\t}\n\t\t};\n\n\t\tconst removeBlocker = (parent) => {\n\t\t\tconst blockerElement = parent.querySelector('.wptb-plugin-blocker-element');\n\t\t\tif (blockerElement) {\n\t\t\t\tblockerElement.remove();\n\t\t\t}\n\n\t\t\tparent.classList.remove('wptb-plugin-blocker-element-empty');\n\t\t};\n\t\tdocument.addEventListener('wptbSectionChanged', ({ detail }) => {\n\t\t\tconst table = document.querySelector('.wptb-table-setup table.wptb-preview-table');\n\t\t\tif (table) {\n\t\t\t\tconst cells = Array.from(table.querySelectorAll('td'));\n\n\t\t\t\tcells.map(removeBlocker);\n\n\t\t\t\tconst allowedSections = ['manage_cells', 'cell_settings', 'background_menu'];\n\t\t\t\tif (allowedSections.includes(detail)) {\n\t\t\t\t\tcells.map(addBlocker);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('wptb:save:before', () => {\n\t\t\tconst table = document.querySelector('.wptb-table-setup table.wptb-preview-table');\n\t\t\tconst cells = Array.from(table.querySelectorAll('td'));\n\n\t\t\tcells.map(removeBlocker);\n\t\t});\n\t},\n\t/**\n\t * Setup for builder if called by gutenberg block.\n\t */\n\tcalledByBlock() {\n\t\tconst parsedUrl = new URL(window.location.href);\n\t\tconst isCalledByBlock = parsedUrl.searchParams.get('gutenberg');\n\t\tif (isCalledByBlock) {\n\t\t\tconst closeButton = document.querySelector('.wptb-plugin-header-close a');\n\n\t\t\tcloseButton.addEventListener(\n\t\t\t\t'click',\n\t\t\t\t(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tconst isTableClean = document.querySelector('.wptb-save-disabled');\n\n\t\t\t\t\tconst tableId = new URL(window.location.href).searchParams.get('table');\n\n\t\t\t\t\tif (!isTableClean) {\n\t\t\t\t\t\tconst confirmResult = window.confirm(wptb_admin_object.strings.dirtyConfirmation);\n\t\t\t\t\t\tif (confirmResult) {\n\t\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('gutenbergClose', document, tableId);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('gutenbergClose', document, tableId);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true }\n\t\t\t);\n\t\t}\n\t},\n\t/**\n\t * Clean any builder related artifacts from table.\n\t */\n\ttableClean() {\n\t\t// remove any hover artifacts from table\n\t\tArray.from(document.querySelectorAll('.wptb-directlyhovered')).map((el) => {\n\t\t\tel.classList.remove('wptb-directlyhovered');\n\t\t});\n\n\t\t// remove all data-placeholder from table\n\t\tArray.from(document.querySelectorAll('.wptb-text-container p')).map((el) => {\n\t\t\tel.removeAttribute('data-placeholder');\n\t\t});\n\t},\n\t/**\n\t * Setup table save related visual styles and elements.\n\t *\n\t * @param {boolean} saveStatus whether saving or not\n\t */\n\ttableSaveIndicator(saveStatus) {\n\t\tconst builder = document.querySelector('#wptb_builder');\n\t\tif (builder) {\n\t\t\tif (saveStatus) {\n\t\t\t\tbuilder.dataset.wptbSaving = true;\n\t\t\t} else {\n\t\t\t\tdelete builder.dataset.wptbSaving;\n\t\t\t}\n\t\t}\n\t},\n};\n","/**\n * Assign icon manager to global space.\n *\n * @param {string} key global key\n * @param {Object} context global context\n * @param {Function} factory factory function\n */\n(function assignToGlobal(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_IconManager', self || global, function iconManager() {\n\t/**\n\t * Frontend icon manager for WPTB builder.\n\t *\n\t * @param {Object} list all icon list\n\t * @class\n\t */\n\tfunction IconManager(list) {\n\t\tif (!list) {\n\t\t\tthrow new Error('no icon list is defined for WPTB_IconManager instance');\n\t\t}\n\t\tconst iconList = list;\n\n\t\t/**\n\t\t * Cached icons.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst cachedIcons = {};\n\n\t\t/**\n\t\t * Prepare an icon with a wrapper.\n\t\t *\n\t\t * @param {string} iconSvgString string representation of icon\n\t\t * @param {string | null} extraClass name of extra class to apply to icon wrapper\n\t\t * @return {HTMLDivElement} created icon wrapper\n\t\t */\n\t\tconst prepareIcon = (iconSvgString, extraClass = null) => {\n\t\t\tconst iconWrapper = document.createElement('div');\n\n\t\t\t// if an extra class is defined, add it to icon wrapper\n\t\t\tif (extraClass) {\n\t\t\t\ticonWrapper.classList.add(extraClass);\n\t\t\t}\n\n\t\t\ticonWrapper.innerHTML = iconSvgString;\n\n\t\t\treturn iconWrapper;\n\t\t};\n\n\t\t/**\n\t\t * Get a cached icon.\n\t\t *\n\t\t * @param {string} iconName name of the icon\n\t\t * @param {string} extraClass extra class name to add to icon wrapper\n\t\t * @return {null | Element} Prepared cached icon or null if no cached version is found\n\t\t */\n\t\tconst getCachedIcon = (iconName, extraClass) => {\n\t\t\tif (cachedIcons[iconName]) {\n\t\t\t\t// TODO [erdembircan] remove for production\n\t\t\t\tconsole.log(`icon served from cache [${iconName}]`);\n\t\t\t\treturn prepareIcon(cachedIcons[iconName], extraClass);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Add an icon to cache.\n\t\t *\n\t\t * @param {string} iconName name of the icon to be stored\n\t\t * @param {string} stringifiedIcon stringified version of the icon\n\t\t */\n\t\tconst addToCache = (iconName, stringifiedIcon) => {\n\t\t\tcachedIcons[iconName] = stringifiedIcon;\n\t\t};\n\n\t\t/**\n\t\t * Get an icon.\n\t\t *\n\t\t * Icons sent with this function are wrapped with a 'div' element.\n\t\t *\n\t\t * @param {string} iconName name of the icon\n\t\t * @param {string} extraClass extra class to add to icon wrapper\n\t\t * @return {Promise<void>} a Promise that will be resolved when icon is fetched from server.\n\t\t */\n\t\tthis.getIcon = (iconName, extraClass = null) => {\n\t\t\t// eslint-disable-next-line consistent-return\n\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t// if cached version is found, return that version\n\t\t\t\tconst cachedIcon = getCachedIcon(iconName, extraClass);\n\t\t\t\tif (cachedIcon) {\n\t\t\t\t\treturn res(cachedIcon);\n\t\t\t\t}\n\n\t\t\t\tif (iconList[iconName]) {\n\t\t\t\t\treturn fetch(iconList[iconName])\n\t\t\t\t\t\t.then((resp) => {\n\t\t\t\t\t\t\tif (resp.ok) {\n\t\t\t\t\t\t\t\treturn resp.text();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow new Error(`an error occurred while fetching icon [${iconName}]`);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((iconString) => {\n\t\t\t\t\t\t\tif (iconString.error) {\n\t\t\t\t\t\t\t\tthrow new Error(`an error occurred while fetching icon [${iconName}]`);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// add icon to cache\n\t\t\t\t\t\t\taddToCache(iconName, iconString);\n\n\t\t\t\t\t\t\treturn res(prepareIcon(iconString, extraClass));\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\treturn rej(new Error(err));\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn rej(new Error(`no icon found with the given name of [${iconName}]`));\n\t\t\t});\n\t\t};\n\t}\n\n\t// return singleton icon manager instance\n\treturn new IconManager(wptb_admin_object.iconManager);\n});\n","const WPTB_Initializer = function () {\n\tconst MIN_COLUMNS = 1;\n\tconst MIN_ROWS = 1;\n\tconst MAX_COLUMNS = 30;\n\tconst MAX_ROWS = 30;\n\n\tconst tableGenerator = document.body;\n\t(columnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0]),\n\t\t(columnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0]),\n\t\t(rowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1]),\n\t\t(rowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1]),\n\t\t(columnsInput = document.getElementById('wptb-columns-number')),\n\t\t(rowsInput = document.getElementById('wptb-rows-number'));\n\n\t// columnsDecrementButton.onclick = function () {\n\t//         if (columnsInput.value > MIN_COLUMNS) {\n\t//                 columnsInput.value--;\n\t//         }\n\t// };\n\t//\n\t// columnsIncrementButton.onclick = function () {\n\t//         if (columnsInput.value < MAX_COLUMNS) {\n\t//                 columnsInput.value++;\n\t//         }\n\t// };\n\t//\n\t// rowsDecrementButton.onclick = function () {\n\t//         if (rowsInput.value > MIN_ROWS) {\n\t//                 rowsInput.value--;\n\t//         }\n\t// };\n\t//\n\t// rowsIncrementButton.onclick = function () {\n\t//         if (rowsInput.value < MAX_ROWS) {\n\t//                 rowsInput.value++;\n\t//         }\n\t// };\n\t//\n\t// document.getElementById( 'wptb-generate-table' ).onclick = function (  ) {\n\t//         var columns = document.getElementById('wptb-columns-number').value,\n\t//             rows = document.getElementById('wptb-rows-number').value;\n\t//\n\t//         //wptbTableStateSaveManager.tableStateClear();\n\t//\n\t//         WPTB_Table(columns, rows);\n\t//\n\t//         let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t//         wptbTableStateSaveManager.tableStateSet();\n\t// }\n\n\t// register and setup section buttons\n\tWPTB_Helper.registerSections([\n\t\t'elements',\n\t\t'table_settings',\n\t\t'cell_settings',\n\t\t'options_group',\n\t\t'table_responsive_menu',\n\t\t'manage_cells',\n\t\t'background_menu',\n\t]);\n\n\t// setup section related panel buttons\n\tWPTB_Helper.setupSectionButtons();\n\n\t// activate elements section for startup\n\tWPTB_Helper.activateSection('elements');\n\n\t// side bar toggle setup\n\tWPTB_Helper.setupSidebarToggle('.wptb-panel-toggle-section .wptb-panel-drawer-icon');\n\n\t// setup panel sections that have the ability to be toggled on/off\n\tWPTB_Helper.setupPanelToggleButtons();\n\n\t// setup responsive menu both at left and builder panel\n\tnew WptbResponsive('table_responsive_menu', 'wptbResponsiveApp', '.wptb-builder-content');\n\n\t// get builder section from url parameter for easy switch at page load\n\tWPTB_Helper.getSectionFromUrl();\n\n\t// automatically show element controls when dropped to table\n\tWPTB_Helper.showControlsOnElementMount();\n\n\t// show elements list menu on left panel on removing elements from table\n\tWPTB_Helper.showElementsListOnRemove();\n\n\t// block tinyMCE from activation at manage cells menu\n\tWPTB_Helper.blockTinyMCE();\n\n\t// initialize header toolbox\n\tnew WPTB_HeaderToolbox('.wptb-plugin-header-toolbar').init();\n\n\t// redirect active menu to elements after closing manage cells menu\n\tdocument.addEventListener('wp-table-builder/table-edit-mode/closed', () => {\n\t\tWPTB_Helper.activateSection('elements');\n\t});\n\n\tWPTB_Helper.calledByBlock();\n\n\t// initialize notification manager\n\tWPTB_NotificationManager.init();\n};\n","var WPTB_LeftPanel = function () {\r\n\r\n    let table = document.getElementsByClassName('wptb-preview-table')[0],\r\n        wptbElementButtons = document.getElementsByClassName('wptb-element');\r\n\r\n    for (var i = 0; i < wptbElementButtons.length; i++) {\r\n        wptbElementButtons[i].ondragstart = function (e) {\r\n            e.dataTransfer.setData('wptbElement', this.dataset.wptbElement);\r\n            e.dataTransfer.setData( 'wptbElIndic-' + this.dataset.wptbElement, 'wptbElIndic-' + this.dataset.wptbElement );\r\n        }\r\n    };\r\n    \r\n    if( table ) {\r\n\r\n        document.querySelector('#wptb-left-scroll-panel-curtain .wptb-table-edit-mode-close').addEventListener('click', () => {\r\n            WPTB_Helper.toggleTableEditMode(true);\r\n        })\r\n\r\n        document.addEventListener('wptbSectionChanged', ({detail}) => {\r\n            if(detail === 'manage_cells'){\r\n                const wptbTablesEditModeCloseButtons = Array.from(document.querySelectorAll( '.wptb-management_table_container .wptb-table-edit-mode-close' ));\r\n                wptbTablesEditModeCloseButtons.map(closeButton => {\r\n                    closeButton.addEventListener('click', () => {\r\n                        WPTB_Helper.toggleTableEditMode(true);\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    };\r\n\r\n    // this code hides the \"element parameters\" area\r\n    // when clicked outside this element and its \"tinymce\" toolbar \r\n    let wptbBuilderPanel = document.getElementsByClassName( 'wptb-builder-panel' )[0];\r\n    wptbBuilderPanel.onclick = function( e ) {\r\n        if( ! e.target.classList.contains( 'wptb-ph-element' ) && ! WPTB_Helper.findAncestor( e.target, 'wptb-ph-element' ) && \r\n               ! e.target.classList.contains( 'wptb-fixed-toolbar' ) && ! WPTB_Helper.findAncestor( e.target, 'wptb-fixed-toolbar' ) ) {\r\n            if(WPTB_Helper.currentSection !== 'manage_cells'){\r\n\r\n                WPTB_Helper.clickOnFreeSpace();\r\n            }\r\n        }\r\n    };\r\n   \r\n    let wptbHeader = document.getElementsByClassName( 'wptb-header' );\r\n    if( wptbHeader.length > 0 ) wptbHeader = wptbHeader[0];\r\n    wptbHeader.onclick = function() {\r\n        WPTB_Helper.clickOnFreeSpace();\r\n    };\r\n};","var MultipleSelect = function () {\n\n\tvar selectedCells = [],\n\t\tmultipleCellMode = false;\n\n\tthis.activateMultipleSelectMode = function () {\n\t\tselectedCells = [];\n\t\tvar tds = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n\t\tfor (var i = 0; i < tds.length; i++) {\n\t\t\ttds[i].classList.remove('wptb-highlighted');\n\t\t}\n\t\tmultipleCellMode = true;\n\t}\n\n\tthis.deactivateMultipleSelectMode = function () {\n\t\tmultipleCellMode = false;\n\t}\n\n\tthis.isActivated = function () {\n\t\treturn multipleCellMode;\n\t}\n\n\tthis.pushSelectedCell = function (cell) {\n\t\tif (!multipleCellMode) {\n\t\t\treturn;\n\t\t}\n\t\tselectedCells.push(cell);\n\t\tcell.classList.add('wptb-highlighted');\n\t};\n\n\tthis.selectedCells = function () {\n\t\treturn selectedCells;\n\t}\n\n\tthis.flushSelectedCells = function () {\n\t\tselectedCells = [];\n\t}\n\n\tthis.getFirst = function () {\n\t\tvar minXIndex = 1000, minYIndex = 1000, first;\n\t\tfor (var i = selectedCells.length - 1; i >= 0; i--) {\n\t\t\tif (minXIndex >= selectedCells[i].dataset.xIndex\n\t\t\t\t&& minYIndex >= selectedCells[i].dataset.yIndex) {\n\t\t\t\tfirst = selectedCells[i];\n\t\t\t\tminXIndex = selectedCells[i].dataset.xIndex;\n\t\t\t\tminYIndex = selectedCells[i].dataset.yIndex;\n\t\t\t}\n\t\t}\n\t\treturn first;\n\t}\n\n\tthis.getLast = function () {\n\t\tvar maxXIndex = -1, maxYIndex = -1, last;\n\t\tfor (var i = selectedCells.length - 1; i >= 0; i--) {\n\t\t\tif (maxXIndex <= selectedCells[i].dataset.xIndex\n\t\t\t\t&& maxYIndex <= selectedCells[i].dataset.yIndex) {\n\t\t\t\tlast = selectedCells[i];\n\t\t\t\tmaxXIndex = selectedCells[i].dataset.xIndex;\n\t\t\t\tmaxYIndex = selectedCells[i].dataset.yIndex;\n\t\t\t}\n\t\t}\n\t\treturn last;\n\t}\n\n\tthis.removeAllButFirst = function () {\n\t\tvar td = this.getFirst();\n\t\tfor (var i = 1; i < selectedCells.length; i++) {\n\t\t\tselectedCells[i].classList.add('wptb-fused-cell-' + td.dataset.xIndex + '-' + td.dataset.yIndex);\n\t\t}\n\t}\n\n\treturn this;\n\n};","/**\n * Builder notification manager.\n */\n(function assignToGlobal(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_NotificationManager', self || global, () => {\n\t// key for making sure notification manager is initialized only once\n\tlet initialized = false;\n\n\t// store will be populated with flux store implementation by ui components\n\tthis.store = null;\n\n\t// mount id to mount our dev tool\n\tconst devToolMountId = 'wptbNotificationManagerDevTool';\n\n\t/**\n\t * Builder notification manager class.\n\t *\n\t * @class\n\t */\n\t// eslint-disable-next-line camelcase\n\tfunction WPTB_NotificationManager() {\n\t\t/**\n\t\t * Valid notification types.\n\t\t *\n\t\t * It will be populated on initialization with the values from notification manager flux store.\n\t\t *\n\t\t * @type {Object} notification types\n\t\t */\n\t\tthis.types = {};\n\n\t\t// eslint-disable-next-line no-restricted-globals\n\t\tconst context = self || global;\n\n\t\t// eslint-disable-next-line no-undef\n\t\tconst managerData = context.wptb_admin_object?.notificationManager;\n\n\t\t/**\n\t\t * Create single notification object.\n\t\t *\n\t\t * @param {Object} options notification options\n\t\t * @return {Object} notification object\n\t\t */\n\t\tconst createNotificationObject = (options) => {\n\t\t\tconst { defaults } = this.store.getters;\n\n\t\t\t// merge only keys that is available in defaults to prevent non notification related properties to be sent to component\n\t\t\tconst parsedOptions = Object.keys(options).reduce((carry, key) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(options, key)) {\n\t\t\t\t\tif (defaults[key]) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tcarry[key] = options[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn carry;\n\t\t\t}, {});\n\n\t\t\treturn { ...defaults, ...parsedOptions };\n\t\t};\n\n\t\t/**\n\t\t * Send a notification to builder ui.\n\t\t *\n\t\t * Use a valid type that is defined inside types property of notification manager.\n\t\t *\n\t\t * @param {Object} notificationOptions notification options, available properties are message, type, queue, reveal,dismiss\n\t\t *\n\t\t */\n\t\tthis.sendNotification = (notificationOptions) => {\n\t\t\t// send action to store\n\t\t\tthis.store.dispatch('addNotification', createNotificationObject(notificationOptions));\n\t\t};\n\n\t\t// prepare mount point for dev tool\n\t\tconst addDevToolsToDOM = () => {\n\t\t\tconst builderElement = document.querySelector('.wptb-builder-panel');\n\n\t\t\tif (builderElement) {\n\t\t\t\tconst devToolMountPoint = document.createElement('div');\n\t\t\t\tdevToolMountPoint.setAttribute('id', devToolMountId);\n\t\t\t\tbuilderElement.appendChild(devToolMountPoint);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Initialize and setup notification manager.\n\t\t */\n\t\tthis.init = () => {\n\t\t\tif (!initialized) {\n\t\t\t\t// assign server sent notification data to control manager so that our compiled vue code can read it\n\t\t\t\tWPTB_ControlsManager.setControlData('NotificationManager', managerData);\n\n\t\t\t\t// call notification related components\n\t\t\t\tWPTB_ControlsManager.callControlScript('NotificationManager', 'NotificationManager');\n\n\t\t\t\t// assign notification types from store\n\t\t\t\tthis.notificationTypes = this.store.getters.notificationTypes;\n\t\t\t\t// assign queue types from store\n\t\t\t\tthis.queueTypes = this.store.getters.queueTypes;\n\t\t\t\t// assign reveal types from store\n\t\t\t\tthis.revealTypes = this.store.getters.revealTypes;\n\t\t\t\t// assign reveal types from store\n\t\t\t\tthis.revealTypes = this.store.getters.revealTypes;\n\t\t\t\t// assign dismiss types from store\n\t\t\t\tthis.dismissTypes = this.store.getters.dismissTypes;\n\n\t\t\t\t// // add dev tool mount point to DOM\n\t\t\t\t// addDevToolsToDOM();\n\t\t\t\t//\n\t\t\t\t// // data for dev tool\n\t\t\t\t// const devToolsData = {\n\t\t\t\t// \ttypes: this.notificationTypes,\n\t\t\t\t// \tqueue: this.queueTypes,\n\t\t\t\t// \treveal: this.revealTypes,\n\t\t\t\t// \tdismiss: this.dismissTypes,\n\t\t\t\t// \tsendNotification: this.sendNotification.bind(this),\n\t\t\t\t// \tmountId: devToolMountId,\n\t\t\t\t// };\n\t\t\t\t//\n\t\t\t\t// // assign dev tool data\n\t\t\t\t// WPTB_ControlsManager.setControlData('NotificationManagerDevTool', devToolsData);\n\t\t\t\t//\n\t\t\t\t// // call dev tool related components\n\t\t\t\t// WPTB_ControlsManager.callControlScript('NotificationManagerDevTool', 'NotificationManagerDevTool');\n\n\t\t\t\t// initialization process completed\n\t\t\t\tinitialized = true;\n\t\t\t}\n\t\t};\n\t}\n\n\t// return singleton manager instance to global context to assign\n\treturn new WPTB_NotificationManager();\n});\n","var WPTB_Parser = function ( code ) {\n    let div = document.createElement( 'div' );\n    div.innerHTML = code;\n    \n    let table = div.children[0];\n    let columnTitleMobile = [...table.querySelectorAll( '.wptb-column-title-mobile-container' )];\n    \n    for( let i = 0; i < columnTitleMobile.length; i++ ) {\n        let parent = columnTitleMobile[i].parentNode;\n        parent.removeChild( columnTitleMobile[i] );\n    }\n    \n    let tds = table.querySelectorAll( 'td' );\n    for ( let i = 0; i < tds.length; i++ ) {\n        tds[i].classList.add( 'wptb-droppable' );\n        tds[i].classList.remove( 'wptb-column-title-mobile-not-elements' );\n    }\n    \n    return table;\n}","// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\nif (!Object.keys) {\n    Object.keys = (function () {\n        'use strict';\n        var hasOwnProperty = Object.prototype.hasOwnProperty,\n                hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n                dontEnums = [\n                    'toString',\n                    'toLocaleString',\n                    'valueOf',\n                    'hasOwnProperty',\n                    'isPrototypeOf',\n                    'propertyIsEnumerable',\n                    'constructor'\n                ],\n                dontEnumsLength = dontEnums.length;\n\n        return function (obj) {\n            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n                throw new TypeError('Object.keys called on non-object');\n            }\n\n            var result = [], prop, i;\n\n            for (prop in obj) {\n                if (hasOwnProperty.call(obj, prop)) {\n                    result.push(prop);\n                }\n            }\n\n            if (hasDontEnumBug) {\n                for (i = 0; i < dontEnumsLength; i++) {\n                    if (hasOwnProperty.call(obj, dontEnums[i])) {\n                        result.push(dontEnums[i]);\n                    }\n                }\n            }\n            return result;\n        };\n    }());\n}","const WPTB_RecalculateIndexes = function (table) {\n    let trs = table.getElementsByTagName( 'tr' ),\n        tds, maxCols = 0, maxColsFull = 0, tdsArr = [];\n\n    for ( let i = 0; i < trs.length; i++ ) {\n        tds = trs[i].getElementsByTagName( 'td' );\n\n        if ( tdsArr[i] == undefined ) {\n            tdsArr[i] = [];\n        }\n\n        let jMainIter = 0;\n        for ( let j = 0; j < tds.length; j++ ) {\n            if ( tdsArr[i][j] != undefined ) {\n                for ( let y = 0; y < 100; y++ ) {\n                    if ( tdsArr[i][jMainIter] != undefined ) {\n                        jMainIter++;\n                        continue;\n                    }\n                    tdsArr[i][jMainIter] = tds[j];\n                    tds[j].dataset.xIndex = jMainIter;\n                    break;\n                }\n            } else {\n                tdsArr[i][j] = tds[j];\n                tds[j].dataset.xIndex = jMainIter;\n            }\n            tds[j].dataset.yIndex = i;\n\n            if ( tds[j].colSpan > 1 ) {\n                for ( let k = 1; k < tds[j].colSpan; k++ ) {\n                    jMainIter++;\n                    tdsArr[i][jMainIter] = 'tdDummy';\n                }\n            }\n\n            if ( tds[j].rowSpan > 1 ) {\n                for ( let x = 1; x < tds[j].rowSpan; x++ ) {\n                    if ( tdsArr[i + x] == undefined ) {\n                        tdsArr[i + x] = [];\n                    }\n                    for ( let z = 0; z < tds[j].colSpan; z++ ) {\n                        tdsArr[i + x][jMainIter - tds[j].colSpan + 1 + z ] = 'tdDummy';\n                    }\n                }\n            }\n            jMainIter++;\n        }\n\n        if ( tds.length > maxCols ) {\n            maxCols = tds.length;\n        }\n\n        if( i == 0 ) {\n            maxColsFull = jMainIter;\n        }\n    }\n    table.columns = maxCols;\n    table.maxCols = maxColsFull;\n}\n","/**\n * Responsive menu and options class.\n *\n * This class will be called and instanced at table builder menu to add it the responsive menu and its controls.\n *\n * @param {string} sectionName section name\n * @param {string} responsiveWrapperId id for mount point\n * @param {string} mainContainerQuery query to find parent container for responsive menu\n * @throws {Error} will throw an error if mainContainerQuery failed to find any element\n * @constructor\n */\n// eslint-disable-next-line no-unused-vars\nfunction WptbResponsive(sectionName, responsiveWrapperId, mainContainerQuery) {\n\tthis.sectionName = sectionName;\n\tthis.responsiveWrapperId = responsiveWrapperId;\n\tthis.responsiveTable = null;\n\tthis.loaded = false;\n\n\t/**\n\t * Add responsive container to dom.\n\t */\n\tthis.addContainerToDom = () => {\n\t\tconst responsiveContainer = document.querySelector(`#${this.responsiveWrapperId}`);\n\t\tif (!responsiveContainer) {\n\t\t\tconst mainContainer = document.querySelector(mainContainerQuery);\n\n\t\t\t// parent container not found, throw error\n\t\t\tif (!mainContainer) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`[WPTB_Responsive]: no parent container is found with the given query of [${mainContainerQuery}]`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst range = document.createRange();\n\t\t\trange.setStart(mainContainer, 0);\n\n\t\t\tconst responsiveElement = range.createContextualFragment(\n\t\t\t\t`<div class=\"wptb-responsive\" id=\"${this.responsiveWrapperId}\">responsive element</div>`\n\t\t\t);\n\t\t\tmainContainer.appendChild(responsiveElement);\n\t\t\tthis.loaded = true;\n\t\t}\n\n\t\tthis.responsiveTable = document.querySelector(`#${this.responsiveWrapperId}`);\n\t};\n\n\t/**\n\t * Load and make necessary mount preparations for component.\n\t */\n\tthis.load = () => {\n\t\tif (!this.loaded) {\n\t\t\tthis.addContainerToDom();\n\n\t\t\tWPTB_Helper.elementStartScript(this.responsiveTable, 'table_responsive_menu');\n\t\t\tWPTB_Helper.elementOptionsSet('table_responsive_menu', this.responsiveTable);\n\t\t\tWPTB_ControlsManager.callControlScript('ResponsiveTable', this.responsiveWrapperId);\n\t\t}\n\t};\n\n\t/**\n\t * Startup hook for the component.\n\t */\n\tthis.startUp = () => {\n\t\t// event listener for section change events\n\t\tdocument.addEventListener('wptbSectionChanged', (e) => {\n\t\t\tconst tablePreview = document.querySelector('.wptb-table-setup .wptb-preview-table');\n\n\t\t\t// check if activated section is related to responsive and there is a main table already in the view\n\t\t\tif (e.detail === this.sectionName && tablePreview) {\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t});\n\n\t\t// event listener for table ready signal\n\t\tdocument.addEventListener('wptb:table:generated', () => {\n\t\t\t// check current section to be sure that responsive menu is the active one before calling load related scripts\n\t\t\tif (WPTB_Helper.getCurrentSection() === 'table_responsive_menu') {\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.startUp();\n}\n","var WPTB_Settings = function () {\n    var elems = document.getElementsByClassName('wptb-element');\n\n    for ( var i = 0; i < elems.length; i++ ) {\n        elems[i].ondragstart = function ( event ) {\n            event.dataTransfer.effectAllowed = 'move';\n            event.dataTransfer.setData( 'wptbElement', event.target.dataset.wptbElement );\n            event.dataTransfer.setData( 'wptbElIndic-' + event.target.dataset.wptbElement, 'wptbElIndic-' + event.target.dataset.wptbElement );\n\n            // set drag relative helper field for future use\n            WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements || '');\n        }\n        elems[i].ondragend = function () {\n            WPTB_Helper.elementDragEndClear();\n        }\n    };\n\n    let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n    let wptbUndo = document.getElementsByClassName( 'wptb-undo' );\n    if( wptbUndo.length > 0 ) {\n        wptbUndo = wptbUndo[0];\n        \n        wptbUndo.onclick = function( event ) {\n            if( ! this.classList.contains( 'wptb-undoredo-disabled' ) ) {\n                wptbTableStateSaveManager.tableStateGet( this.dataset.wptbUndoredo );\n                let wptbUndoRedoContainer = document.getElementsByClassName( 'wptb-undo-redo-container' );\n                if(wptbUndoRedoContainer.length > 0) {\n                    wptbUndoRedoContainer = wptbUndoRedoContainer[0];\n                    wptbUndoRedoContainer.onmouseleave = function( event ) {\n                        event.target.onmouseleave = '';\n                        let table = document.querySelector( '.wptb-preview-table' );\n                        WPTB_Table();\n                    }\n                }\n            }\n        }\n    }\n    \n    let wptbRedo = document.getElementsByClassName( 'wptb-redo' );\n    if( wptbRedo.length > 0 ) {\n        wptbRedo = wptbRedo[0];\n        \n        wptbRedo.onclick = function( event ) {\n            if( ! this.classList.contains( 'wptb-undoredo-disabled' ) ) {\n                wptbTableStateSaveManager.tableStateGet( this.dataset.wptbUndoredo );\n                let wptbUndoRedoContainer = document.getElementsByClassName( 'wptb-undo-redo-container' );\n                if(wptbUndoRedoContainer.length > 0) {\n                    wptbUndoRedoContainer = wptbUndoRedoContainer[0];\n                    wptbUndoRedoContainer.onmouseleave = function( event ) {\n                        event.target.onmouseleave = '';\n                        let table = document.querySelector( '.wptb-preview-table' );\n                        WPTB_Table();\n                    }\n                }\n            }\n            \n        }\n    }\n    \n    let shortcodePopupWindow = document.getElementsByClassName( 'wptb-popup-window-modal' )[0];\n    document.getElementsByClassName( 'wptb-embed-btn' )[0].onclick = function () {\n        if( ! this.classList.contains( 'wptb-button-disable' ) ) {\n            shortcodePopupWindow.classList.add( 'wptb-popup-show' );\n        }\n    }\n    \n    window.onbeforeunload = function(e) {\n        let wptbSaveDisabled = document.getElementsByClassName( 'wptb-save-disabled' );\n        if( wptbSaveDisabled.length == 0 ) {\n            return true;\n        } else {\n            return null;\n        }\n    };\n    \n    \n    document.getElementsByClassName( 'wptb-popup-dark-area' )[0].onclick = function () {\n        shortcodePopupWindow.classList.remove( 'wptb-popup-show' );\n    }\n    \n    document.getElementsByClassName( 'wptb-popup-window-close-icon' )[0].onclick = function () {\n        shortcodePopupWindow.classList.remove( 'wptb-popup-show' );\n    }\n    \n    document.getElementsByClassName( 'wptb-preview-btn' )[0].onclick = function ( event ) {\n        if( this.classList.contains( 'wptb-button-disable' ) ) {\n            return;\n        } \n        \n        let previewId = Math.floor( Math.random() * 10000 );\n        \n        var newHref = new URL( event.target.href );\n        newHref.searchParams.set( 'preview_id', previewId );\n        event.target.href = newHref.toString();\n        WPTB_Helper.saveTable( event, false, previewId );\n    }\n\n    document.getElementsByClassName( 'wptb-save-btn' )[0].onclick = function ( event ) {\n        if( ! this.classList.contains( 'wptb-save-disabled' ) ) {\n            WPTB_Helper.saveTable( event );\n        }\n    }\n\n    let tableTitleField = document.querySelector( '#wptb-setup-name' );\n    if( tableTitleField ) {\n        tableTitleField.onchange = function () {\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n    }\n};\n","/**\n * Responsive class assignment for frontend operations.\n *\n * This file can be used as an UMD.\n */\n(function assignToGlobal(key, context, factory) {\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext[key] = factory();\n\t}\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_SortableTable', self || global, () => {\n\tfunction WPTB_SortTable(options = {}) {\n\t\tconst table = (this.table = options.table);\n\t\tWPTB_RecalculateIndexes(table);\n\t\tconst thisObject = this;\n\t\tthis.itemsPerHeader = 0;\n\t\tthis.tableMaxCols = table.maxCols;\n\t\tthis.cellsStylesScheme = {};\n\t\tthis.rowsStylesScheme = {};\n\n\t\t/**\n\t\t * sets the table to sort mode\n\t\t *\n\t\t * @param {string} type\n\t\t * @param {boolean} active\n\t\t * @param {number} number\n\t\t */\n\t\tthis.sortModeSwitcher = function (type, active) {\n\t\t\tif(active) {\n\t\t\t\tthis.sortModeSwitcher('horizontal', false);\n\t\t\t\tthis.sortModeSwitcher('vertical', false);\n\t\t\t}\n\n\t\t\tif (type === 'vertical') {\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableVerticalStart, false);\n\n\t\t\t\tif (active) {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', true);\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableVerticalStart, false);\n\t\t\t\t\tthis.table.dataset.wptbSortableTableVertical = '1';\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', false);\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableVertical;\n\t\t\t\t}\n\t\t\t} else if (type === 'horizontal') {\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableHorizontalStart, false);\n\n\t\t\t\tif (active) {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', true);\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableHorizontalStart, false);\n\t\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal = '1';\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', false);\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableHorizontal;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * changes table object for old reconstruction table type\n\t\t *\n\t\t * @param {boolean}start\n\t\t * @returns {*}\n\t\t */\n\t\tthis.tableObjectChange = function (start = true) {\n\t\t\tif(this.table.classList.contains('wptb-mobile-view-active') && start) {\n\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n\t\t\t} else if(this.table.classList.contains('wptb-preview-table-mobile') && !start) {\n\t\t\t\tthis.table = table.parentNode.querySelector('.wptb-preview-table');\n\t\t\t}\n\t\t\treturn this.table;\n\t\t}\n\n\t\t/**\n\t\t * fills the object with data about cell styles for all locations (create scheme)\n\t\t *\n\t\t * @param elemSelector\n\t\t */\n\t\tthis.createTableElementsStylesScheme = function (elemSelector) {\n\t\t\tthis.tableObjectChange();\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\n\t\t\tif(elements.length) {\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\n\t\t\t\t\tlet elem = elements[i];\n\t\t\t\t\tlet cellFullStyleObj = window.getComputedStyle(elem, null);\n\t\t\t\t\tlet backgroundColor = cellFullStyleObj.getPropertyValue( 'background-color' );\n\t\t\t\t\tlet objectKey = '';\n\t\t\t\t\tif(elemSelector === 'td') {\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\n\t\t\t\t\t\tthis.cellsStylesScheme[objectKey] = {backgroundColor};\n\t\t\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\t\t\tobjectKey = String(i);\n\t\t\t\t\t\tthis.rowsStylesScheme[objectKey] = {backgroundColor};\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.tableObjectChange(false);\n\t\t}\n\n\t\t/**\n\t\t * applies saved cell styles data to all cells\n\t\t *\n\t\t * @param elemSelector\n\t\t */\n\t\tthis.reassignElementsStyles = function (elemSelector) {\n\t\t\tthis.tableObjectChange();\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\n\t\t\tlet elementsStylesScheme;\n\t\t\tif(elemSelector === 'td') {\n\t\t\t\telementsStylesScheme = this.cellsStylesScheme;\n\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\telementsStylesScheme = this.rowsStylesScheme;\n\t\t\t}\n\t\t\tif(elements.length) {\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\n\t\t\t\t\tlet elem = elements[i];\n\t\t\t\t\tlet objectKey = '';\n\t\t\t\t\tif(elemSelector === 'td') {\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\n\t\t\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\t\t\tobjectKey = i;\n\t\t\t\t\t}\n\t\t\t\t\tif(elementsStylesScheme.hasOwnProperty(objectKey)) {\n\t\t\t\t\t\tlet elemStyles = elementsStylesScheme[objectKey];\n\t\t\t\t\t\tfor(let key in elemStyles) {\n\t\t\t\t\t\t\telem.style[key] = elemStyles[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tableObjectChange(false);\n\t\t}\n\n\t\t/**\n\t\t * checks whether the table should be in the sort state\n\t\t * and connects the necessary handlers\n\t\t *\n\t\t * @param {object} responsiveFront\n\t\t */\n\t\tthis.sortableTableInitialization = function (responsiveFront) {\n\t\t\tlet typeFirst;\n\t\t\tlet typeSecond;\n\t\t\tif (this.table.dataset.wptbSortableTableVertical && this.table.dataset.wptbSortableTableVertical === '1') {\n\t\t\t\ttypeFirst = 'vertical';\n\t\t\t\ttypeSecond = 'horizontal';\n\t\t\t} else if (\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal &&\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal === '1'\n\t\t\t) {\n\t\t\t\ttypeFirst = 'horizontal';\n\t\t\t\ttypeSecond = 'vertical';\n\t\t\t}\n\n\t\t\tif(!typeFirst || typeof typeFirst !== 'string' || !typeSecond || typeof typeSecond !== 'string') return;\n\n\t\t\tlet switchMode = WPTB_GetDirectionAfterReconstruction(this.table, typeFirst, typeSecond, 'vertical', responsiveFront);\n\n\t\t\tif(typeof switchMode === 'object' && switchMode.hasOwnProperty('switch')) {\n\t\t\t\tfunction sortModeSwitcherRun (e) {\n\t\t\t\t\tlet switchModeObj = switchMode.switch(e);\n\t\t\t\t\tif(typeof switchModeObj === 'object') {\n\t\t\t\t\t\tthis.itemsPerHeader = switchModeObj.itemsPerHeader;\n\t\t\t\t\t\tif(switchModeObj.hasOwnProperty('newTable')) {\n\t\t\t\t\t\t\tlet tableOld = this.table;\n\t\t\t\t\t\t\tthis.table = switchModeObj.newTable;\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\n\t\t\t\t\t\t\tthis.table = tableOld;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsortModeSwitcherRun.call(thisObject);\n\t\t\t\tthis.table.addEventListener(\n\t\t\t\t\t'table:rebuilt',\n\t\t\t\t\tfunction (e) {\n\t\t\t\t\t\tsortModeSwitcherRun.call(thisObject, e);\n\t\t\t\t\t},\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * adds and deletes mousemove and mouseleave events handlers when happens switch sorting mode\n\t\t * and also can add necessary attributes\n\t\t *\n\t\t * @param {string} type\n\t\t * @param {boolean} active\n\t\t */\n\t\tthis.sortingCellMouseMoveSwitcher = function (type, active) {\n\t\t\t/**\n\t\t\t * removes and adds mousemove and mouseleave events handlers\n\t\t\t *\n\t\t\t * @param {HTMLElement} td\n\t\t\t * @param {func} sCMM\n\t\t\t * @param {boolean} active\n\t\t\t */\n\t\t\tfunction s(td, sCMM, active) {\n\t\t\t\ttd.removeEventListener('mousemove', sCMM, false);\n\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\tif (active) {\n\t\t\t\t\ttd.addEventListener('mousemove', sCMM, false);\n\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * removes and adds data sorted attributes\n\t\t\t *\n\t\t\t * @param {HTMLElement} td\n\t\t\t * @param {string} dataAttr\n\t\t\t * @param {boolean} active\n\t\t\t */\n\t\t\tfunction dataAttrSortChange(td, dataAttr, active) {\n\t\t\t\tif (active) {\n\t\t\t\t\tif (!td.dataset[dataAttr] || td.dataset[dataAttr] !== 'desk-disabled') {\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'ask';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'desk';\n\t\t\t\t\t}\n\t\t\t\t} else if (td.dataset[dataAttr] === 'ask') {\n\t\t\t\t\ttd.dataset[dataAttr] = 'ask-disabled';\n\t\t\t\t} else if (td.dataset[dataAttr] === 'desk') {\n\t\t\t\t\ttd.dataset[dataAttr] = 'desk-disabled';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// removes all mousemove and mouseleave events handlers\n\t\t\t// and also removes all data sorted attributes from all cells\n\t\t\tlet tds = this.table.querySelectorAll('td');\n\t\t\tif (tds.length) {\n\t\t\t\ttds = [...tds];\n\t\t\t\ttds.map((td) => {\n\t\t\t\t\ts(td, sortingCellMouseMoveVertical, false);\n\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', false);\n\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, false);\n\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', false);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if active === true sets sorted events handlers\n\t\t\t// and data sorted attributes for all cells\n\t\t\tif (active) {\n\t\t\t\tif (type === 'vertical') {\n\t\t\t\t\tlet rowsLength = this.table.rows.length;\n\t\t\t\t\tlet dataYIndexStart = 0;\n\t\t\t\t\twhile (rowsLength > 0) {\n\t\t\t\t\t\tlet tds = this.table.querySelectorAll(`[data-y-index=\"${dataYIndexStart}\"]`);\n\t\t\t\t\t\ttds = [...tds];\n\t\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveVertical, active);\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', active);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.itemsPerHeader) {\n\t\t\t\t\t\t\trowsLength -= this.itemsPerHeader + 1;\n\t\t\t\t\t\t\tdataYIndexStart += this.itemsPerHeader + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowsLength = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (type === 'horizontal') {\n\t\t\t\t\tlet tds = this.table.querySelectorAll('[data-x-index=\"0\"]');\n\t\t\t\t\ttds = [...tds];\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tlet tdsPerAfter = this.table.querySelectorAll(`[data-y-index=\"${td.dataset.yIndex}\"]`);\n\t\t\t\t\t\tif(tdsPerAfter.length > 2) {\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, active);\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', active);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * adds a sortable-hover class for a cell when the cursor is over the sort icon (arrow)\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {string} type\n\t\t * @param {HTMLElement} element td\n\t\t */\n\t\tfunction sortingCellMouseMov(e, type, element) {\n\t\t\tif (e.target.tagName === 'TD') {\n\t\t\t\tconst x = e.offsetX == undefined ? e.layerX : e.offsetX;\n\t\t\t\tconst y = e.offsetY == undefined ? e.layerY : e.offsetY;\n\t\t\t\tlet xMatch = false;\n\t\t\t\tif ((type === 'vertical' && e.target.clientWidth - x <= 35) || (type === 'horizontal' && x <= 35)) {\n\t\t\t\t\txMatch = true;\n\t\t\t\t}\n\t\t\t\tif (xMatch && (e.target.clientHeight - 35) / 2 < y && (e.target.clientHeight + 35) / 2 > y) {\n\t\t\t\t\telement.classList.add('sortable-hover');\n\t\t\t\t} else {\n\t\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * calls sortingCellMouseMov with the type parameter set to vertical\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tfunction sortingCellMouseMoveVertical(e) {\n\t\t\tsortingCellMouseMov(e, 'vertical', this);\n\t\t}\n\n\t\t/**\n\t\t * calls sortingCellMouseMov with the type parameter set to horizontal\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tfunction sortingCellMouseMoveHorizontal(e) {\n\t\t\tsortingCellMouseMov(e, 'horizontal', this);\n\t\t}\n\n\t\t/**\n\t\t * remove sortable-hover class from cell when cursor leave cell\n\t\t */\n\t\tfunction tdMouseLeave() {\n\t\t\tthis.classList.remove('sortable-hover');\n\t\t}\n\n\t\t/**\n\t\t * function for sorting the table vertically by the numeric content of cells\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {HTMLElement} table\n\t\t * @param {string} type\n\t\t */\n\t\tfunction sortableTable(e, type) {\n\t\t\tif (\n\t\t\t\te.target &&\n\t\t\t\te.target.tagName === 'TD' &&\n\t\t\t\t!table.parentNode.classList.contains('wptb-preview-table-manage-cells')\n\t\t\t) {\n\t\t\t\tconst table = e.currentTarget;\n\t\t\t\tlet tableWasSorted = false;\n\t\t\t\tif (type === 'vertical' && e.target.dataset.hasOwnProperty('sortedVertical')) {\n\t\t\t\t\t/**\n\t\t\t\t\t * if table have enabled param topRowAsHeader and sellsStackDirection is column\n\t\t\t\t\t * the top and bottom rows that will not be sorted are temporarily removed from the table\n\t\t\t\t\t */\n\t\t\t\t\tconst tableRowsBefore = [];\n\t\t\t\t\tconst tableRowsAfter = [];\n\t\t\t\t\tif (this.itemsPerHeader && this.itemsPerHeader < table.rows.length) {\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\t\tconst tableRowsArr = [...table.rows];\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tfor (let i = 0; i < tableRowsArr.length; i++) {\n\t\t\t\t\t\t\tif (i < e.target.dataset.yIndex) {\n\t\t\t\t\t\t\t\ttableRowsBefore.push(tableRowsArr[i]);\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t\t} else if (i > parseInt(e.target.dataset.yIndex, 10) + this.itemsPerHeader) {\n\t\t\t\t\t\t\t\ttableRowsAfter.push(tableRowsArr[i]);\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-x-index=\"${e.target.dataset.xIndex}\"]`);\n\t\t\t\t\ttds = [...tds];\n\n\t\t\t\t\t/**\n\t\t\t\t\t * preparing table for sorting\n\t\t\t\t\t */\n\t\t\t\t\tlet rowspan;\n\t\t\t\t\tlet rowNum;\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tif (!(rowspan = parseInt(td.rowSpan, 10))) {\n\t\t\t\t\t\t\trowspan = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trowNum = td.dataset.yIndex;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\t\trowNum += rowspan;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst rowsValuesArr = [];\n\t\t\t\t\tlet rowsTdFirst;\n\t\t\t\t\tlet tdYCoordsRowSpanPrevious = 0;\n\t\t\t\t\tconst tableRowsPushed = [];\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\ttds,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\ttdYCoordsRowSpanPrevious,\n\t\t\t\t\t\t\t'vertical'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst td = tds[i];\n\n\t\t\t\t\t\tlet tdRowspan = parseInt(td.rowSpan, 10);\n\t\t\t\t\t\tif (!tdRowspan) tdRowspan = 1;\n\n\t\t\t\t\t\ttdYCoordsRowSpanPrevious = parseInt(td.dataset.yIndex, 10) + tdRowspan;\n\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\n\t\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\t\tfor (let j = 0; j < tdRowspan; j++) {\n\t\t\t\t\t\t\trowsTd.push(table.rows[parseInt(td.dataset.yIndex, 10) + j]);\n\t\t\t\t\t\t\ttableRowsPushed.push(parseInt(td.dataset.yIndex, 10) + j);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (td.dataset.yIndex > 0) {\n\t\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowsTdFirst = rowsTd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedVertical');\n\t\t\t\t\tif (!orderBy) return;\n\n\t\t\t\t\tif (rowsValuesArr.length) rowsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\t\trowsValuesArr.unshift({ rowsTd: rowsTdFirst });\n\n\t\t\t\t\tif (rowsValuesArr.length < table.rows.length) {\n\t\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\t\tif (tableRowsPushed.indexOf(i) > -1) continue;\n\t\t\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\t\t\trowsTd.push(table.rows[i]);\n\n\t\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tBody = table.querySelector('tbody');\n\t\t\t\t\ttBody.innerHTML = '';\n\n\t\t\t\t\trowsValuesArr.map((rowsValObj) => {\n\t\t\t\t\t\trowsValObj.rowsTd.map((row) => {\n\t\t\t\t\t\t\ttBody.appendChild(row);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t/**\n\t\t\t\t\t * returning previously deleted rows\n\t\t\t\t\t */\n\t\t\t\t\tif (tableRowsBefore.length) {\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tif (tableLastCont) {\n\t\t\t\t\t\t\tconst trRef = tableLastCont.querySelector('tr');\n\t\t\t\t\t\t\ttableRowsBefore.map((tr) => {\n\t\t\t\t\t\t\t\ttableLastCont.insertBefore(tr, trRef);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (tableRowsAfter.length) {\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tif (tBody) {\n\t\t\t\t\t\t\ttableRowsAfter.map((tr) => {\n\t\t\t\t\t\t\t\ttableLastCont.appendChild(tr);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\t\tWPTB_CutGlueTable.glueTableHorizontally(table);\n\n\t\t\t\t\ttableWasSorted = true;\n\t\t\t\t} else if (type === 'horizontal' && e.target.dataset.xIndex === '0') {\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-y-index=\"${e.target.dataset.yIndex}\"]`);\n\t\t\t\t\ttds = [...tds];\n\n\t\t\t\t\t// preparing table for sorting\n\t\t\t\t\tlet colspan;\n\t\t\t\t\tlet colNum;\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tif (!(colspan = parseInt(td.colSpan, 10))) {\n\t\t\t\t\t\t\tcolspan = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolNum = td.dataset.xIndex;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\t\tcolNum += colspan;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst columnsValuesArr = [];\n\t\t\t\t\tlet columnsTdFirst;\n\n\t\t\t\t\tlet tdXCoordsColSpanPrevious = 0;\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\ttds,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\ttdXCoordsColSpanPrevious,\n\t\t\t\t\t\t\t'horizontal'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst td = tds[i];\n\t\t\t\t\t\tlet tdColspan = parseInt(td.colSpan, 10);\n\t\t\t\t\t\tif (!tdColspan) tdColspan = 1;\n\n\t\t\t\t\t\ttdXCoordsColSpanPrevious = parseInt(td.dataset.xIndex, 10) + tdColspan;\n\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\t\t\t\t\t\tconst columnsTd = [];\n\t\t\t\t\t\tfor (let j = 0; j < tdColspan; j++) {\n\t\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(td.dataset.xIndex, 10) + j}\"]`),\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tcolumnsTd.push(tdsColumn);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (td.dataset.xIndex > 0) {\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\t\tcolumnsTd,\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumnsTdFirst = columnsTd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedHorizontal');\n\t\t\t\t\tif (!orderBy) return;\n\n\t\t\t\t\tif (columnsValuesArr.length) columnsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\t\tcolumnsValuesArr.unshift({ columnsTd: columnsTdFirst });\n\n\t\t\t\t\tif (columnsValuesArr.length < table.maxCols) {\n\t\t\t\t\t\tconst difference = table.maxCols - columnsValuesArr.length;\n\t\t\t\t\t\tfor (let i = 0; i < difference; i++) {\n\t\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t\t...table.querySelectorAll(\n\t\t\t\t\t\t\t\t\t`[data-x-index=\"${parseInt(table.maxCols, 10) - parseInt(difference, 10) + i}\"]`\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\t\tcolumnsTd: [tdsColumn],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\ttable.rows[i].innerHTML = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumnsValuesArr.map((columnsValObj) => {\n\t\t\t\t\t\tcolumnsValObj.columnsTd.map((tdsColumn) => {\n\t\t\t\t\t\t\ttdsColumn.map((td) => {\n\t\t\t\t\t\t\t\ttable.rows[td.dataset.yIndex].appendChild(td);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\t\tWPTB_CutGlueTable.glueTableVertically(table);\n\n\t\t\t\t\ttableWasSorted = true;\n\t\t\t\t}\n\n\t\t\t\tif (tableWasSorted) {\n\t\t\t\t\tremoveCellsAttrAfterDivision(table);\n\n\t\t\t\t\tif (table.hasOwnProperty('tableSM')) {\n\t\t\t\t\t\tconst tableSM = table.tableSM();\n\t\t\t\t\t\tnew tableSM().tableStateSet();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.reassignElementsStyles('td');\n\t\t\t\t\tthis.reassignElementsStyles('tr');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Function that sets the data-attribute with the number of the row or column\n\t\t * that the table was sorted by. Returns the number of a row or column\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {string} dataAttr\n\t\t * @returns {null|boolean}\n\t\t */\n\t\tfunction setSortedAscDataAttr(e, dataAttr) {\n\t\t\tif (\n\t\t\t\te.currentTarget &&\n\t\t\t\t(e.currentTarget.classList.contains('wptb-preview-table') ||\n\t\t\t\t\te.currentTarget.classList.contains('wptb-preview-table-mobile'))\n\t\t\t) {\n\t\t\t\tif (!e.target.dataset[dataAttr] || e.target.dataset[dataAttr] === 'ask') {\n\t\t\t\t\te.target.dataset[dataAttr] = 'desk';\n\t\t\t\t} else {\n\t\t\t\t\te.target.dataset[dataAttr] = 'ask';\n\t\t\t\t}\n\n\t\t\t\treturn e.target.dataset[dataAttr];\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * defines the sorting order\n\t\t *\n\t\t * @param {string} orderBy\n\t\t * @param prev\n\t\t * @param next\n\t\t * @returns {number}\n\t\t */\n\t\tfunction sortOrder(orderBy = 'ask', prev, next) {\n\t\t\tlet prevValue = prev.value;\n\t\t\tlet nextValue = next.value;\n\t\t\tif (parseInt(prevValue) && parseInt(nextValue)) {\n\t\t\t\tprevValue = parseInt(prevValue);\n\t\t\t\tnextValue = parseInt(nextValue);\n\t\t\t}\n\n\t\t\tif (orderBy === 'ask') {\n\t\t\t\tif (prevValue < nextValue) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (prevValue === nextValue) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (prevValue < nextValue) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (prevValue === nextValue) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\t/**\n\t\t * return cell text elements values\n\t\t *\n\t\t * @param cell {HTMLElement}\n\t\t * @returns {string}\n\t\t */\n\t\tfunction textElementsValuesGet(cell) {\n\t\t\tlet textElements = cell.querySelectorAll('.wptb-text-container');\n\t\t\ttextElements = [...textElements];\n\t\t\tlet value = '';\n\t\t\tfor (let j = 0; j < textElements.length; j++) {\n\t\t\t\tconst p = textElements[j].querySelector('p');\n\t\t\t\tvalue += p.innerText;\n\t\t\t\tif (j !== textElements.length - 1) value += ' ';\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\n\t\t/**\n\t\t * adds cells to the collection of cells in the row or column that the table is sorted by.\n\t\t * These added cells are not originally were added in the collection,\n\t\t * because they are combined with cells from higher rows or left-side columns\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {HTMLElement} table\n\t\t * @param {array} tds\n\t\t * @param {number} i\n\t\t * @param {number} tdIndexSpanPrev\n\t\t * @param {string} type\n\t\t * @returns {{tds: *}|boolean|{tds: *, i: *}}\n\t\t */\n\t\tfunction changeSortingTdsCollection(e, table, tds, i, tdIndexSpanPrev, type) {\n\t\t\tconst td = tds[i];\n\t\t\tlet tdsCollectionChanged = false;\n\t\t\tlet collectionTds;\n\t\t\tlet collectionTdsJSpan;\n\t\t\tlet collectionTdsJSpanProperty;\n\t\t\tlet indexName;\n\t\t\tlet indexNameCamelCase;\n\t\t\tlet indexNamePerpendicularCamelCase;\n\t\t\tlet tdSpanProperty;\n\t\t\t// max rows or columns column\n\t\t\tlet tableGroupCount;\n\n\t\t\tif (type === 'vertical') {\n\t\t\t\tcollectionTdsJSpanProperty = 'colSpan';\n\t\t\t\tindexName = 'data-y-index';\n\t\t\t\tindexNameCamelCase = 'yIndex';\n\t\t\t\tindexNamePerpendicularCamelCase = 'xIndex';\n\t\t\t\ttdSpanProperty = 'rowSpan';\n\t\t\t\ttableGroupCount = table.rows.length;\n\t\t\t} else if (type === 'horizontal') {\n\t\t\t\tcollectionTdsJSpanProperty = 'rowSpan';\n\t\t\t\tindexName = 'data-x-index';\n\t\t\t\tindexNameCamelCase = 'xIndex';\n\t\t\t\tindexNamePerpendicularCamelCase = 'yIndex';\n\t\t\t\ttdSpanProperty = 'colSpan';\n\t\t\t\ttableGroupCount = table.maxCols;\n\t\t\t}\n\n\t\t\tif (td.dataset[indexNameCamelCase] - tdIndexSpanPrev > 0) {\n\t\t\t\tcollectionTds = table.querySelectorAll(`[${indexName}=\"${tdIndexSpanPrev}\"]`);\n\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttds.splice(i, 0, collectionTds[j]);\n\t\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tdsCollectionChanged) return { tds, i };\n\n\t\t\tlet tdSpan = parseInt(td[tdSpanProperty], 10);\n\t\t\tif (!tdSpan) tdSpan = 1;\n\t\t\tif (i == tds.length - 1 && parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan < tableGroupCount) {\n\t\t\t\tcollectionTds = table.querySelectorAll(\n\t\t\t\t\t`[${indexName}=\"${parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan}\"]`\n\t\t\t\t);\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttds.push(collectionTds[j]);\n\t\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tdsCollectionChanged) return { tds };\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * remove cells attributes which were used for division table\n\t\t *\n\t\t * @param {HTMLElement} table\n\t\t */\n\t\tfunction removeCellsAttrAfterDivision(table) {\n\t\t\tconst tdsAll = [...table.getElementsByTagName('td')];\n\t\t\tfor (let i = 0; i < tdsAll.length; i++) {\n\t\t\t\tif (tdsAll[i].hasAttribute('data-same-cell-before-division')) {\n\t\t\t\t\ttdsAll[i].removeAttribute('data-same-cell-before-division');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * function for run sorting table vertically\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tthis.sortableTableVerticalStart = function (e) {\n\t\t\tsortableTable.call(thisObject, e, 'vertical');\n\t\t};\n\n\t\t/**\n\t\t * function for run sorting table horizontally\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tthis.sortableTableHorizontalStart = function (e) {\n\t\t\tsortableTable.call(thisObject, e, 'horizontal');\n\t\t};\n\n\t\treturn this;\n\t}\n\n\treturn WPTB_SortTable;\n});\n","var WPTB_Stringifier = function ( codeMain ) {\n    if ( codeMain ) {\n        let code = codeMain.cloneNode( true );\n        code.dataset.tableColumns = codeMain.columns;\n        code.style.width = null;\n        code.style.minWidth = null;\n        code.style.maxWidth = null;\n\n        let tds = code.getElementsByTagName( 'td' );\n        if ( tds.length > 0 ) {\n            for ( let i = 0; i < tds.length; i++ ) {\n\n                // tds[i].removeAttribute( 'data-x-index' );\n                // tds[i].removeAttribute( 'data-y-index' );\n                tds[i].removeAttribute( 'draggable' );\n                tds[i].classList.remove( 'wptb-droppable' );\n                let infArr = tds[i].className.match( /wptb-element-((.+-)\\d+)/i );\n                if(infArr) tds[i].classList.remove(infArr[0]);\n                let innerElements = tds[i].getElementsByClassName( 'wptb-ph-element' );\n\n                if ( innerElements.length > 0 ) {\n                    for ( let j = 0; j < innerElements.length; j++ ) {\n\n                        let mceContentBodys = innerElements[j].querySelectorAll( '.mce-content-body' );\n                        if( mceContentBodys.length > 0 ) {\n                            for ( let k = 0; k < mceContentBodys.length; k++ ) {\n                                mceContentBodys[k].classList.remove( 'mce-content-body' );\n                            }\n                        }\n\n                        let dataMceStyle = innerElements[j].querySelectorAll( '[data-mce-style]' );\n                        if ( dataMceStyle.length > 0 ) {\n                            for ( let k = 0; k < dataMceStyle.length; k++ ) {\n                                dataMceStyle[k].removeAttribute( 'data-mce-style' );\n                            }\n                        }\n\n                        let contentEditable = innerElements[j].querySelectorAll( '[contenteditable]' );\n                        if ( contentEditable.length > 0 ) {\n                            for ( let k = 0; k < contentEditable.length; k++ ) {\n                                contentEditable[k].removeAttribute( 'contenteditable' );\n                            }\n                        }\n\n                        let spellCheck = innerElements[j].querySelectorAll( '[spellcheck]' );\n                        if ( spellCheck.length > 0 ) {\n                            for ( let k = 0; k < spellCheck.length; k++ ) {\n                                spellCheck[k].removeAttribute( 'spellcheck' );\n                            }\n                        }\n\n                        let mceIds = innerElements[j].querySelectorAll( '[id^=mce_]' );\n                        if ( mceIds.length > 0 ) {\n                            for ( let k = 0; k < mceIds.length; k++ ) {\n                                mceIds[k].removeAttribute( 'id' );\n                            }\n                        }\n\n                        let wptbActions = innerElements[j].querySelectorAll( '.wptb-actions' );\n                        let wptbActionsLength = wptbActions.length;\n                        while ( wptbActionsLength > 0 ) {\n                            if( wptbActions[0] && wptbActions[0].parentNode ) {\n                                wptbActions[0].parentNode.removeChild( wptbActions[0] );\n                                wptbActionsLength--;\n                            } else {\n                                break;\n                            }\n\n                        }\n\n                        let dataMceBogus = innerElements[j].querySelectorAll( '[data-mce-bogus]' );\n                        if( dataMceBogus.length > 0 ) {\n                            dataMceBogus = [...dataMceBogus];\n                            for( let k = 0; k < dataMceBogus.length; k++ ) {\n                                if( dataMceBogus[k] && dataMceBogus[k].parentNode ) {\n                                    dataMceBogus[k].parentNode.removeChild( dataMceBogus[k] );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                // TODO dataTitleColumnSet\n                // if( tds[i].hasAttribute( 'data-wptb-title-column' ) ) {\n                //     let columnNameDivContainer = document.createElement( 'div' ),\n                //         columnNameDiv = document.createElement( 'div' );\n                //     columnNameDivContainer.classList.add( 'wptb-column-title-mobile-container' );\n                //     columnNameDiv.classList.add( 'wptb-column-title-mobile' );\n                //     columnNameDiv.dataset.wptbTitleColumn = tds[i].dataset.wptbTitleColumn;\n                //     columnNameDiv.setAttribute( 'style', 'font-size:' + tds[i].dataset.wptbTitleColumnFontSize + '; \\n\\\n                //         color:' + tds[i].dataset.wptbTitleColumnColor + '; background-color:' + tds[i].dataset.wptbTitleBackgroundColor + '; text-align:' + tds[i].dataset.wptbTitleAlign + ';' );\n                //     columnNameDiv.style.padding = tds[i].style.padding;\n                //     if( tds[i].children.length == 0 ) {\n                //         tds[i].classList.add( 'wptb-column-title-mobile-not-elements' );\n                //     }\n                //     columnNameDivContainer.appendChild( columnNameDiv );\n                //     tds[i].insertBefore( columnNameDivContainer, tds[i].firstChild );\n                // }\n            }\n        }\n\n        return code;\n    }\n}\n","var array = [], WPTB_Table = function ( columns, rows, wptb_preview_table ) {\n\n    /* The members of the class */\n    var settings = document.getElementsByClassName('wptb-settings-items'),\n            wptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\n            table, row, cell,\n            maxAmountOfCells,\n            maxAmountOfRows;\n\n    //HERE ARE THE PRIVATE FUNCTIONS\n    /*\n     * This function toggles buttons visibility in cell edit mode\n     * (according to the amount of currently selected cells), and\n     * highlights visually the clicked cell if it is not highlighted, or\n     * removes highlight if clicked cell is already highlighted.\n     * It too toggles the bits of our abstract representation.\n     * @param Event this is the event instance of the click performed over a cell.\n     */\n    var mark = function ( event ) {\n        let thisElem = event.currentTarget;\n        let rs = thisElem.rowSpan,\n            cs = thisElem.colSpan,\n            noCells = document.getElementsByClassName('wptb-no-cell-action'),\n            singleCells = document.getElementsByClassName('wptb-single-action'),\n            multipleCells = document.getElementsByClassName('wptb-multiple-select-action'),\n            cellSettings = document.getElementById( 'wptb-left-scroll-panel-cell-settings' ),\n            position = getCoords(thisElem),\n            row = position[0],\n            column = position[1];\n\n        /**\n         * Cell select/deselect operation\n         *\n         * @param {HTMLElement} cellElement cell element\n         * @param {Boolean} select select/deselect cell\n         *\n         */\n        function cellSelectOperation(cellElement, select = false){\n           const classListOperation = select? 'add'  : 'remove';\n           cellElement.classList[classListOperation]('wptb-highlighted');\n\n            const [row, column] = getCoords(cellElement);\n            const {rowSpan, colSpan} = cellElement;\n\n            for (var i = 0; i < rowSpan; i++) {\n                for (var j = 0; j < colSpan; j++) {\n                    array[row + i][column + j] = select? 1 : 0;\n                }\n            }\n        }\n        if ( ! document.select.isActivated() ) {\n            return;\n        }\n\n        const isShiftActive = event.shiftKey;\n        if (thisElem.className.match(/wptb-highlighted/)) {\n            const selectedCells = Array.from(document.querySelectorAll('.wptb-highlighted'));\n\n            if(selectedCells.length > 1){\n                if(isShiftActive){\n                    cellSelectOperation(thisElem, false);\n                }else {\n                    cellSelectOperation(thisElem, true);\n                    // eslint-disable-next-line array-callback-return\n                    selectedCells.map(el => {\n                        if(el !== thisElem){\n                            cellSelectOperation(el, false);\n                        }\n                    })\n                }\n            }else{\n                cellSelectOperation(thisElem, false);\n            }\n        } else {\n            if(!isShiftActive){\n                Array.from(document.querySelectorAll('.wptb-highlighted')).map(ele => {\n                    if(ele !== thisElem){\n                        cellSelectOperation(ele, false);\n                    }\n                });\n            }\n            cellSelectOperation(thisElem,true );\n        }\n\n        let cellHighlighted = document.getElementsByClassName('wptb-highlighted'),\n            markedCells = cellHighlighted.length;\n        if (markedCells === 0) {\n            for (var i = 0; i < multipleCells.length; i++) {\n                multipleCells[i].classList.remove('visible');\n                multipleCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < noCells.length; i++) {\n                noCells[i].classList.add('visible');\n                noCells[i].removeAttribute('disabled');\n            }\n            for (var i = 0; i < singleCells.length; i++) {\n                singleCells[i].classList.remove('visible');\n                singleCells[i].setAttribute('disabled', 'disabled');\n            }\n            cellSettings.classList.remove( 'visible' );\n        } else if (markedCells === 1) {\n            for (var i = 0; i < multipleCells.length; i++) {\n                multipleCells[i].classList.remove('visible');\n                multipleCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < noCells.length; i++) {\n                noCells[i].classList.remove('visible');\n                noCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < singleCells.length; i++) {\n                singleCells[i].classList.add('visible');\n                singleCells[i].removeAttribute('disabled');\n            }\n\n            cellHighlighted = cellHighlighted[0];\n            WPTB_Helper.elementOptionsSet( 'table_cell_setting', cellHighlighted );\n\n            let infArr = cellHighlighted.className.match( /wptb-element-((.+-)\\d+)/i );\n\n            const controlElemIds = ['cellWidth', 'cellHeight'];\n\n            controlElemIds.map(s => {\n                let elementControlSizeUnicClass = `wptb-el-${infArr[1]}-${s}`,\n                    elementControlSizeFixedUnicClass = `wptb-el-${infArr[1]}-${s}Fixed`;\n                if(s === 'cellWidth' || s === 'cellHeight') {\n                    let sizeName = '',\n                        getSizeFunctionName = '';\n                    if(s === 'cellWidth') {\n                        sizeName = 'width';\n                        getSizeFunctionName = 'getColumnWidth';\n                    } else if(s === 'cellHeight') {\n                        sizeName = 'height';\n                        getSizeFunctionName = 'getRowHeight';\n                    }\n                    let size = cellHighlighted.style[sizeName],\n                        cellSizeInputs = document.querySelectorAll( '.' + elementControlSizeUnicClass ),\n                        cellSizeFixedInput = document.querySelector( '.' + elementControlSizeFixedUnicClass  );\n                    cellSizeInputs = [...cellSizeInputs];\n\n                    if(!size && !cellHighlighted.dataset[`wptbFixed${sizeName.toUpperCase()}`]) {\n                        size = WPTB_Helper[getSizeFunctionName](table, cellHighlighted);\n                        cellSizeInputs.map(s => {\n                            s.value = size;\n                        });\n\n                        cellSizeFixedInput.checked = false;\n                    } else {\n                        cellSizeInputs.map(s => {\n                            if( size ) {\n                                s.value = parseFloat( size, 10 );\n                            } else if( cellHighlighted.dataset[`wptbFixed${sizeName.toUpperCase()}`] ) {\n                                s.value = cellHighlighted.dataset[`wptbFixed${sizeName.toUpperCase()}`];\n                            }\n                        });\n\n                        cellSizeFixedInput.checked = true;\n                    }\n                }\n            });\n\n            cellSettings.classList.add( 'visible' );\n        } else {\n            for (var i = 0; i < multipleCells.length; i++) {\n                if (table.isSquare(array)) {\n                    multipleCells[i].classList.add('visible');\n                    multipleCells[i].removeAttribute('disabled');\n                } else {\n                    multipleCells[i].classList.remove('visible');\n                    multipleCells[i].setAttribute('disabled', 'disabled');\n                }\n            }\n            for (var i = 0; i < noCells.length; i++) {\n                noCells[i].classList.remove('visible');\n                noCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < singleCells.length; i++) {\n                singleCells[i].classList.remove('visible');\n                singleCells[i].setAttribute('disabled', 'disabled');\n            }\n            cellSettings.classList.remove( 'visible' );\n        }\n\n        /**\n         * empty cell setting\n         */\n        // let emptySetting = document.\n        const infArr = thisElem.className.match(/wptb-element-table_cell_setting-((.+-)\\d+)/i);\n        if (infArr && infArr.length > 1) {\n            const controlKey = 'emptyCell';\n            const settingId = `wptb-el-table_cell_setting-${infArr[1]}-${controlKey}`;\n            const settingElem = document.getElementById(settingId);\n            if (settingElem) {\n                settingElem.querySelector('input[type=\"checkbox\"]').checked = thisElem.classList.contains('wptb-empty')\n            }\n        }\n\n\n        let details = {countMarkedCells:markedCells};\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/cell/mark', thisElem, details);\n\n\n        // split button disabled state calculation\n        const splitButton = document.querySelector('#wptb-split-cell');\n        if(splitButton){\n            const splitAvailable = markedCells === 1 && (rs !== 1 || cs !== 1);\n            if(splitAvailable){\n                splitButton.classList.add('visible');\n                splitButton.removeAttribute('disabled');\n            }else {\n                splitButton.classList.remove('visible');\n                splitButton.setAttribute('disabled', 'disabled');\n            }\n        }\n    };\n\n    /*\n     * This function fills an array with 1's according to the actual design\n     * of HTML table.\n     * @returns an array of arrays containing an abstract representation\n     * of HTML table.\n     * @deprecated\n     * */\n\n    var realTimeArray = function () {\n        var carried = [], tds, cols, matriz = [];\n\n        for (var i = 0; i < maxAmountOfCells; i++) {\n            carried[i] = 0;\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            cols = [];\n\n            var tds = table.rows[i].getElementsByTagName('td');\n\n            for (items = 0; items < tds.length; items++) {\n\n                for (var k = 0; k < tds[items].colSpan; k++) {\n                    cols.push(1);\n                }\n\n                if (tds[items].rowSpan > 1) {\n                    for (var k = 0; k < tds[items].colSpan; k++) {\n                        carried[items + k] = {\n                            justAssigned: true,\n                            amount: tds[items].rowSpan\n                        };\n                    }\n                }\n            }\n\n            for (var k = 0; k < maxAmountOfCells; k++) {\n                if (typeof carried[k] == 'object' && carried[k].amount > 0) {\n                    carried[k].amount--;\n                    if (carried[k].justAssigned) {\n                        carried[k].justAssigned = false;\n                    } else {\n                        cols.push(1);\n                    }\n                }\n            }\n\n            matriz.push(cols);\n\n        }\n        return matriz;\n    };\n\n    /*\n     * This function gets the number and position of cell spaces in current row that are occuped\n     * by upper rowspanned cells.\n     * @param number the number of row where we wish to calculate the carried rowspans up to.\n     * @return an array with the remaining rowspans in each column.\n     */\n    var carriedRowspans = function (row) {\n        var carried = [], tds, cols;\n\n        for (var i = 0; i < maxAmountOfCells; i++) {\n            carried[i] = 0;\n        }\n\n        if (row == -1) {\n            return carried;\n        }\n\n        for (var i = 0; i <= row; i++) {\n            cellsBuffer = table.rows[i].getElementsByTagName('td');\n            cellPointer = 0;\n\n            for (var xPosition = 0; xPosition < maxAmountOfCells; xPosition += stepsToMove) {\n                stepsToMove = 1;\n\n                if (carried[xPosition]) {\n                    carried[xPosition]--;\n                } else {\n                    celda = cellsBuffer[cellPointer++];\n                    if (celda.rowSpan > 1) {\n                        for (k = 0; k < celda.colSpan; k++) {\n                            carried[xPosition + k] = celda.rowSpan - 1;\n                        }\n                        stepsToMove = celda.colSpan;\n                    } else if (celda.colSpan > 1) {\n                        stepsToMove = celda.colSpan;\n                    }\n                }\n            }\n\n        }\n        return carried;\n    };\n\n    /*\n     * A helpful function for showing\n     * the abstract table in console.\n     * @param Array our abstract table.\n     */\n    var drawTable = function (a) {\n        var string = 'DRAWING TABLE:\\n';\n        for (var i = 0; i < a.length; i++) {\n\n            for (var j = 0; j < a[i].length; j++) {\n                string += ' ' + a[i][j];\n            }\n            string += '\\n';\n        }\n        table.isSquare(a);\n    };\n\n    /*\n     * It resets all the bits of our abstract representation\n     * to 0 and removes the highlighting class of all cells.\n     */\n\n    var undoSelect = function () {\n        let noCells = document.getElementsByClassName('wptb-no-cell-action'),\n            singleCells = document.getElementsByClassName('wptb-single-action'),\n            multipleCells = document.getElementsByClassName('wptb-multiple-select-action'),\n            cellSettings = document.getElementById( 'wptb-left-scroll-panel-cell-settings' ),\n            tds = table.getElementsByClassName('wptb-highlighted');\n        while (tds.length) {\n            tds[0].classList.remove('wptb-highlighted');\n        }\n        cellSettings.classList.remove( 'visible' );\n        for (let i = 0; i < array.length; i++) {\n            for (let j = 0; j < array[i].length; j++) {\n                array[i][j] = 0;\n            }\n        }\n        for (let i = 0; i < multipleCells.length; i++) {\n            multipleCells[i].classList.remove('visible');\n            multipleCells[i].setAttribute('disabled', 'disabled');\n        }\n        for (let i = 0; i < noCells.length; i++) {\n            noCells[i].classList.add('visible');\n            noCells[i].removeAttribute('disabled');\n        }\n        for (let i = 0; i < singleCells.length; i++) {\n            singleCells[i].classList.remove('visible');\n            singleCells[i].setAttribute('disabled', 'disabled');\n        }\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/undo-select/active', table);\n    };\n\n    /*\n     * This fills the abstract representation of our table with\n     * zeros, at the start. the max amount of cells is the greatest sum\n     * of all colspans for row.\n     */\n\n    var fillTableArray = function () {\n        var colspansSums = [], a = [];\n\n        //calculate max amount of cells inside a row\n        for (var i = 0; i < table.rows.length; i++) {\n            var cells = table.rows[i].getElementsByTagName('td'),\n                    colspanSumInRow = 0;\n            for (var j = 0; j < cells.length; j++) {\n                colspanSumInRow += cells[j].colSpan;\n            }\n            colspansSums.push(colspanSumInRow);\n        }\n\n        maxAmountOfCells = Math.max.apply(null, colspansSums);\n        //calculate max rows\n        var maxAmountOfRows = table.rows.length;\n\n        // fill with zeros from both values\n        for (var i = 0; i < maxAmountOfRows; i++) {\n            a[i] = [];\n            for (var j = 0; j < maxAmountOfCells; j++) {\n                a[i].push(0);\n            }\n        }\n        drawTable(a);\n        return a;\n    };\n\n    /*\n     * This function gets the sum of all colspans in a row.\n     * @param number the number of row to be used as reference.\n     */\n    var getActualPointsInRow = function (row) {\n        var tds = table.rows[row].getElementsByTagName('td'),\n                points = 0;\n        for (var i = 0; i < tds.length; i++) {\n            points += tds[i].colSpan;\n        }\n        return points;\n    }\n\n    /*\n     * This function gets us the exact coordinates of\n     * an exact cell, in a more reliable way than xIndex and yIndex,\n     * these last ones were meant to be used for getting the cell trough them.\n     * @param DOMElement the cell to get the coordinates.\n     */\n    var getCoords = function (search) {\n        var skipInCols = [], cell;\n\n        for (var i = 0; i < maxAmountOfCells; i++) {\n            skipInCols[i] = 0;\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            var cellsBuffer = table.rows[i].getElementsByTagName('td');\n            cellPointer = 0;\n            for (var xPosition = 0; xPosition < maxAmountOfCells; xPosition += stepsToMove) {\n                stepsToMove = 1;\n\n                if (skipInCols[xPosition]) {\n                    skipInCols[xPosition]--;\n                } else {\n                    var td = cellsBuffer[cellPointer++];\n                    if (td == search) {\n                        return [i, xPosition];\n                    }\n                    if (td.rowSpan > 1) {\n                        for ( let k = 0; k < td.colSpan; k++ ) {\n                            skipInCols[xPosition + k] = td.rowSpan - 1;\n                        }\n                        stepsToMove = td.colSpan;\n                    } else if (td.colSpan > 1) {\n                        stepsToMove = td.colSpan;\n                    }\n                }\n            }\n        }\n    };\n\n    jQuery('#wptb-table-border-color').val('');\n    jQuery('#wptb-table-padding-number,#wptb-table-padding-slider').val('15');\n\n    // Todo your code here\n    if ( columns || rows ) {\n        //END OF PRIVATE FUNCTIONS\n        for (var i = 0; i < settings.length; i++) {\n            if (settings[i].id !== 'wptb-apply-inner-border') {\n                settings[i].classList.add('visible');\n            }\n        }\n\n        //Create a HTML Table element.\n        table = document.createElement( 'table' );\n        table.classList.add( 'wptb-preview-table', 'wptb-element-main-table_setting-startedid-0' );\n        table.style.border = '1px solid #d1d1d1';\n        table.dataset.reconstraction = 1;\n        //table.dataset.wptbAdaptiveTable = 1;\n        //Add the data rows.\n        for (var i = 0; i < rows; i++) {\n\n            row = table.insertRow(-1);\n            row.classList.add( 'wptb-row' );\n\n            for (var j = 0; j < columns; j++) {\n                cell = new WPTB_Cell(mark);\n                cell.setCoords(i, j);\n                cell.getDOMElement().style.border = '1px solid #d1d1d1';\n                row.appendChild(cell.getDOMElement());\n            }\n        }\n    } else {\n        if( ! wptb_preview_table ) wptb_preview_table = document.querySelector( '.wptb-preview-table' );\n\n        if ( wptb_preview_table ) {\n            table = wptb_preview_table;\n\n            let cells = table.getElementsByTagName('td');\n\n            if (cells.length > 0) {\n                for (let i = 0; i < cells.length; i++) {\n                    WPTB_Cell(mark, cells[i]);\n                }\n            }\n        } else {\n            return;\n        }\n    }\n\n    /**\n     * this method run \"mark\" method of WPTB_Table object\n     * @param event\n     */\n    table.mark = (event) => {\n        mark(event);\n    }\n\n    table.wptbCell = (callback, DOMElement) => {\n        return WPTB_Cell(callback, DOMElement);\n    }\n\n    table.tableSM = () => {\n        return WPTB_TableStateSaveManager;\n    }\n\n    /**\n     * this method run \"undoSelect\" method of WPTB_Table object\n     * @param event\n     */\n    table.undoSelect = () => {\n        undoSelect();\n    }\n\n    /**\n     * method for set value for maxAmountOfCells\n     * @param value\n     */\n    table.setMaxAmountOfCells = (value) => {\n        maxAmountOfCells = value;\n    }\n\n    /**\n     * this method return maxAmountOfCells value\n     * @returns {*}\n     */\n    table.getMaxAmountOfCells = () => {\n        return maxAmountOfCells;\n    }\n\n    /**\n     * this method run \"fillTableArray\" method of WPTB_Table object\n     * @returns {[]}\n     */\n    table.fillTableArray = () => {\n        return fillTableArray();\n    }\n    /*\n     * For assigning to each cell xIndex and y Index attributes,\n     * these are the column number and row number of cell in table.\n     */\n\n    table.recalculateIndexes = function () {\n        WPTB_Helper.recalculateIndexes( this );\n    }\n\n    table.addColumnWidth = function( value, cleaner ) {\n        let highlighted  = table.getElementsByClassName( 'wptb-highlighted' );\n        if( highlighted.length > 0 ) {\n            for( let k = 0; k < highlighted.length; k++ ) {\n                let dataXIndex = highlighted[k].dataset.xIndex;\n                if( dataXIndex ) {\n                    function tableTdsFor( dataXIndex, colspan ) {\n                        let tableRows = table.rows;\n                        let widthIsSet = false;\n                        let arrayTdsFromPreviousRow = [];\n                        for( let i = 0; i < tableRows.length; i++ ) {\n                            let row = tableRows[i];\n                            let tds = row.children;\n                            for( let j = 0; j < tds.length; j++ ) {\n                                let td = tds[j];\n                                if( td.dataset.xIndex == dataXIndex ) {\n                                    if( value ) {\n                                        if( td.colSpan == colspan ) {\n                                            td.style.width = value + 'px';\n                                            td.removeAttribute( 'data-wptb-fixed-width' );\n                                            widthIsSet = true;\n                                        } else {\n                                            td.style.width = null;\n                                            td.dataset.wptbFixedWidth = value;\n                                            if( i == tableRows.length - 1 && ! widthIsSet ) {\n                                                tableTdsFor( dataXIndex, colspan + 1 );\n                                            }\n                                        }\n                                    } else if( cleaner ) {\n                                        td.style.width = null;\n                                        td.removeAttribute( 'data-wptb-fixed-width' );\n                                    } else {\n                                        if( td.dataset.wptbFixedWidth ) {\n                                            if( td.colSpan == colspan ) {\n                                                td.style.width = td.dataset.wptbFixedWidth + 'px';\n                                                td.removeAttribute( 'data-wptb-fixed-width' );\n                                            }\n                                        } else if( td.style.width ) {\n                                            for( let z = 0; z < arrayTdsFromPreviousRow.length; z++ ) {\n                                                arrayTdsFromPreviousRow[z].style.width = td.style.width;\n                                            }\n                                            arrayTdsFromPreviousRow = [];\n                                        } else {\n                                            arrayTdsFromPreviousRow.push( td );\n                                        }\n                                    }\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    tableTdsFor( dataXIndex, 1 );\n                }\n            }\n\n            table.tdDefaultWidth();\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n        }\n    }\n\n    table.tdDefaultWidth = function() {\n        let rows = table.rows;\n\n        let tableTdsSumMaxWidth = 0;\n        let tableTdsSumMaxWidthFixed = 0;\n        let tableTdsSumMaxWidthAuto = 0;\n\n        let wptbTableSetup = document.getElementsByClassName( 'wptb-table-setup' )[0];\n        let wptbTableSetupWidth = wptbTableSetup.offsetWidth;\n\n        let arrayCellsWidthFixedHelper = [];\n        let arrayCellsWidthAutoHelper = [];\n        let tdPaddingCommon = 0;\n        let tableTdBorderCommonWidth = 0;\n        let cssForTdsWidthAuto = '';\n\n\n        let tableFullStyleObj = window.getComputedStyle( table, null );\n        let borderLeftWidth = tableFullStyleObj.getPropertyValue( 'border-left-width' );\n        let borderRightWidth = tableFullStyleObj.getPropertyValue( 'border-right-width' );\n        let tableBorderCommon = parseFloat( borderLeftWidth, 10 ) + parseFloat( borderRightWidth, 10 );\n\n        for( let i = 0; i < rows.length; i++ ) {\n            let tds = rows[i].children;\n            for( let j = 0; j < tds.length; j++ ) {\n                let td = tds[j];\n\n                if( ! arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] && ! arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] ) {\n                    if( td.style.width ) {\n                        arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] = parseFloat( td.style.width );\n                        td.removeAttribute( 'data-wptb-css-td-auto-width' );\n                    } else {\n                        if( ! td.dataset.wptbFixedWidth ) {\n                            arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] = table.dataset.wptbTdWidthAuto ? parseFloat( table.dataset.wptbTdWidthAuto, 10 ) : 100;\n                            td.dataset.wptbCssTdAutoWidth = true;\n                        }\n                    }\n\n                    if( window.getComputedStyle( td, null ) ) {\n                        let tdStyleObj = window.getComputedStyle( td, null );\n                        let tdPaddingLeft = tdStyleObj.getPropertyValue( 'padding-left' );\n                        let tdPaddingRight = tdStyleObj.getPropertyValue( 'padding-right' );\n                        tdPaddingCommon = parseFloat( tdPaddingLeft, 10 ) + parseFloat( tdPaddingRight, 10 );\n\n                        let tableTdBorderLeftWidth = tdStyleObj.getPropertyValue( 'border-left-width' );\n                        let tableTdBorderRightWidth = tdStyleObj.getPropertyValue( 'border-right-width' );\n                        tableTdBorderCommonWidth = parseFloat( tableTdBorderLeftWidth, 10 ) + parseFloat( tableTdBorderRightWidth, 10 );\n                        tableTdBorderCommonWidth = tableTdBorderCommonWidth / 2;\n\n                        if( arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] ) {\n                            arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += tdPaddingCommon;\n                            arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += tableTdBorderCommonWidth;\n\n                            if( j == 0 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderLeftWidth, 10 ) / 2;\n                            } else if( j == 0 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderRightWidth, 10 ) / 2 ) );\n                            }\n\n                            if( j == tds.length - 1 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderRightWidth, 10 ) / 2;\n                            } else if( j == tds.length - 1 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderRightWidth, 10 ) / 2 ) );\n                            }\n                        } else if( arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] ) {\n                            arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += tdPaddingCommon;\n                            arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += tableTdBorderCommonWidth;\n\n                            if( j == 0 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderLeftWidth, 10 ) / 2;\n                            } else if( j == 0 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderLeftWidth, 10 ) / 2 ) );\n                            }\n\n                            if( j == tds.length - 1 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderRightWidth, 10 ) / 2;\n                            } else if( j == tds.length - 1 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderLeftWidth, 10 ) / 2 ) );\n                            }\n                        }\n                    }\n                } else if( arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] ) {\n                    if( ! td.dataset.wptbFixedWidth ) {\n                        td.dataset.wptbCssTdAutoWidth = true;\n                    }\n                } else if( arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] ) {\n                    td.removeAttribute( 'data-wptb-css-td-auto-width' );\n                }\n            }\n        }\n\n        for( let i = 0; i < arrayCellsWidthFixedHelper.length; i++ ) {\n            if( arrayCellsWidthFixedHelper[i] ) {\n                tableTdsSumMaxWidthFixed += arrayCellsWidthFixedHelper[i];\n            }\n        }\n\n        let CellsWidthAutoCount = 0;\n        for( let i = 0; i < arrayCellsWidthAutoHelper.length; i++ ) {\n            if( arrayCellsWidthAutoHelper[i] ) {\n                tableTdsSumMaxWidthAuto += arrayCellsWidthAutoHelper[i];\n                CellsWidthAutoCount++;\n            }\n        }\n\n        tableTdsSumMaxWidth = tableTdsSumMaxWidthFixed + tableTdsSumMaxWidthAuto;\n\n        table.dataset.wptbTableTdsSumMaxWidth = tableTdsSumMaxWidth;\n        if( CellsWidthAutoCount ) {\n            table.dataset.wptbCellsWidthAutoCount = CellsWidthAutoCount;\n            if( table.mergingСellsHorizontally ) {\n                table.dataset.wptbFixedWidthSize = tableTdsSumMaxWidthFixed;\n            } else {\n                table.removeAttribute( 'data-wptb-fixed-width-size' );\n            }\n        } else {\n            table.removeAttribute( 'data-wptb-fixed-width-size' );\n            table.removeAttribute( 'data-wptb-cells-width-auto-count' );\n        }\n\n        let styleElementCreate = false;\n        let tableTdWidthAuto;\n        if( tableTdsSumMaxWidth < wptbTableSetupWidth ) {\n            if( CellsWidthAutoCount ) {\n                table.style.minWidth = '100%';\n                if( table.mergingСellsHorizontally ) {\n                    table.style.width = 'auto';\n                    let tableTdsWidthAutoCommon = wptbTableSetupWidth - tableTdsSumMaxWidthFixed;\n                    tableTdWidthAuto = tableTdsWidthAutoCommon / CellsWidthAutoCount;\n                    tableTdWidthAuto = tableTdWidthAuto - tdPaddingCommon - tableTdBorderCommonWidth;\n                    styleElementCreate = true;\n                } else {\n                    table.style.width = '100%';\n                }\n            } else {\n                table.style.width = 'auto';\n                table.style.minWidth = null;\n                table.style.maxWidth = null;\n            }\n        } else {\n            table.style.maxWidth = null;\n            table.style.minWidth = tableTdsSumMaxWidth + 'px';\n            table.style.width = 'auto';\n            tableTdWidthAuto = table.dataset.wptbTdWidthAuto ? table.dataset.wptbTdWidthAuto : '100';\n            styleElementCreate = true;\n        }\n\n        let head = document.head;\n        if( head ) {\n            let cssForTdsWidthAutoOld = head.querySelector( 'style[data-wptb-td-auto-width=\"true\"]' );\n            if( cssForTdsWidthAutoOld ) {\n                head.removeChild( cssForTdsWidthAutoOld );\n            }\n        }\n\n        if( styleElementCreate ) {\n            cssForTdsWidthAuto = document.createElement( 'style' );\n            cssForTdsWidthAuto.setAttribute( 'data-wptb-td-auto-width', true );\n            cssForTdsWidthAuto.innerHTML = '[data-wptb-css-td-auto-width=true]{width:' + tableTdWidthAuto + 'px}';\n            if( head ) {\n                head.appendChild( cssForTdsWidthAuto );\n            }\n        }\n\n        if( table.dataset.wptbTableAlignment ) {\n            let wptbTableAlignment = table.dataset.wptbTableAlignment;\n\n            let wptbTableSetupWidth = wptbTableSetup.offsetWidth;\n            if( wptbTableSetupWidth < table.offsetWidth ) {\n                table.style.float = null;\n            } else {\n                if( wptbTableAlignment == 'center' ) {\n                    table.style.float = null;\n                } else {\n                    table.style.float = wptbTableAlignment;\n                }\n            }\n\n            if( wptbTableAlignment == 'center' ) {\n                wptbTableSetup.style.float = null;\n            } else {\n                wptbTableSetup.style.float = wptbTableAlignment;\n            }\n\n            if( tableTdWidthAuto && table.dataset.wptbTableContainerMaxWidth && table.offsetWidth < table.dataset.wptbTableContainerMaxWidth ) {\n                table.style.width = '100%';\n            }\n        } else {\n            table.style.float = null;\n        }\n    }\n\n    table.addRowHeight = function( value, cleaner ) {\n        let highlighted  = table.getElementsByClassName( 'wptb-highlighted' );\n        if( highlighted.length > 0 ) {\n            for( let k = 0; k < highlighted.length; k++ ) {\n                let dataYIndex = highlighted[k].dataset.yIndex;\n                if( dataYIndex ) {\n                    function tableTdsFor( dataYIndex, rowspan ) {\n                        let tableRows = table.rows;\n                        let heightIsSet = false;\n                        let arrayTdsPrevious = [];\n                        for( let i = 0; i < tableRows.length; i++ ) {\n                            let row = tableRows[i];\n                            let tds = row.children;\n                            for( let j = 0; j < tds.length; j++ ) {\n                                let td = tds[j];\n                                if( td.dataset.yIndex == dataYIndex ) {\n                                    if( value ) {\n                                        if( td.rowSpan == rowspan ) {\n                                            td.style.height = value + 'px';\n                                            td.removeAttribute( 'data-wptb-fixed-heidht' );\n                                            heightIsSet = true;\n                                            continue;\n                                        } else {\n                                            td.style.height = null;\n                                            td.dataset.wptbFixedHeight = value;\n                                            if( j == tds.length - 1 && ! heightIsSet ) {\n                                                tableTdsFor( dataYIndex , rowspan + 1 );\n                                            }\n                                        }\n                                    } else if( cleaner ) {\n                                        td.style.height = null;\n                                        td.removeAttribute( 'data-wptb-fixed-heidht' );\n                                    } else {\n                                        if( td.dataset.wptbFixedHeight ) {\n                                            if( td.rowSpan = rowspan ) {\n                                                td.style.height = td.dataset.wptbFixedHeight + 'px';\n                                                td.removeAttribute( 'data-wptb-fixed-width' );\n                                            }\n                                        } else if( td.style.height ) {\n                                            for( let z = 0; z < arrayTdsPrevious.length; z++ ) {\n                                                arrayTdsPrevious[z].style.height = td.style.height;\n                                            }\n                                            arrayTdsPrevious = [];\n                                        } else {\n                                            arrayTdsPrevious.push( td );\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    tableTdsFor( dataYIndex, 1 );\n                }\n            }\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n        }\n    }\n\n    table.reconstraction = function() {\n        let tds = table.getElementsByTagName( 'td' );\n        table.mergingСellsHorizontally = false;\n        table.mergingCellsVertically = false;\n        table.dataset.reconstraction = 1;\n        let forBreak = 0;\n        for( let i = 0; i < tds.length; i++ ) {\n            if( tds[i].colSpan > 1 ) {\n                table.dataset.reconstraction = 0;\n                table.mergingСellsHorizontally = true;\n                forBreak++;\n            }\n\n            if( tds[i].rowSpan > 1 ) {\n                table.dataset.reconstraction = 0;\n                table.mergingCellsVertically = true;\n                forBreak++;\n            }\n\n            if( forBreak == 2 ) {\n                break;\n            }\n        }\n    }\n\n    /*\n     * As simple as it is: adds a column to the end of table.\n     */\n    table.addColumnEnd = function () {\n        let td,\n            currentTable = document.getElementsByClassName('wptb-preview-table'),\n            currentTableTd,\n            currentTdStyle;\n        if (currentTable.length > 0) {\n            currentTableTd = currentTable[0].querySelector('td');\n        }\n\n        if (currentTableTd) {\n            currentTdStyle = currentTableTd.getAttribute('style');\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            td = new WPTB_Cell(mark);\n\n            if (currentTdStyle) {\n                td.getDOMElement().setAttribute('style', currentTdStyle);\n                td.getDOMElement().style.width = null;\n                td.getDOMElement().style.height = null;\n                td.getDOMElement().style.borderColor = WPTB_TableSettingsData.getTableSetting('borderColor');\n            }\n\n            table.rows[i].appendChild(td.getDOMElement());\n            array[i].push(0);\n        }\n\n        maxAmountOfCells++;\n        table.recalculateIndexes();\n        table.tdDefaultWidth();\n        table.addRowHeight();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * As simple as it looks: adds a column to the start of table.\n     */\n\n    table.addColumnStart = function () {\n        let td,\n            firstCell,\n            currentTable = document.getElementsByClassName('wptb-preview-table'),\n            currentTableTd,\n            currentTdStyle;\n        if ( currentTable.length > 0 ) {\n            currentTableTd = currentTable[0].querySelector('td');\n        }\n\n        if ( currentTableTd ) {\n            currentTdStyle = currentTableTd.getAttribute('style');\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            td = new WPTB_Cell(mark);\n            if (currentTdStyle) {\n                td.getDOMElement().setAttribute('style', currentTdStyle);\n                td.getDOMElement().style.width = null;\n                td.getDOMElement().style.height = null;\n                td.getDOMElement().style.borderColor = WPTB_TableSettingsData.getTableSetting('borderColor');\n            }\n            firstCell = table.rows[i].getElementsByTagName('td')[0];\n            if (firstCell) {\n                table.rows[i].insertBefore(td.getDOMElement(), firstCell);\n            } else {\n                table.rows[i].appendChild(td.getDOMElement());\n            }\n            array[i].push(0);\n        }\n\n        maxAmountOfCells++;\n        table.recalculateIndexes();\n        table.tdDefaultWidth();\n        table.addRowHeight();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * Well, not so simple as previous functions.\n     * It adds a column after a certain column of reference.\n     * @param integer the column number to be used as reference.\n     *\tIf empty, then the first highlighted cell is used as reference.\n     */\n\n    table.addColumnAfter = function (c_pos) {\n        let rows = table.rows,\n            cell,\n            cellStyle,\n            pos;\n\n        if(c_pos != undefined && typeof c_pos === 'number') {\n            pos = c_pos;\n            cell = document.querySelector('[data-x-index=\"' + pos + '\"]');\n        } else {\n            cell = document.querySelector('.wptb-highlighted');\n            pos = getCoords(cell)[1];\n        }\n\n        if(cell) {\n            cellStyle = cell.getAttribute('style');\n\n            if( maxAmountOfCells - pos - cell.colSpan + 1 == 1 ) {\n                table.addColumnEnd();\n            } else {\n                for(let i = 0; i < rows.length; i++) {\n                    let tds = rows[i].children;\n                    for(let j = 0; j < tds.length; j++) {\n                        if(parseInt(tds[j].dataset.xIndex) <= pos) {\n                            if(parseInt(tds[j].dataset.xIndex) + tds[j].colSpan == pos + cell.colSpan) {\n                                let td = newTd(cellStyle);\n                                let nextSib = tds[j].nextSibling;\n                                if (nextSib) {\n                                    rows[i].insertBefore(td.getDOMElement(), nextSib);\n                                } else {\n                                    rows[i].appendChild(td.getDOMElement());\n                                }\n\n                                break;\n                            } else if(parseInt(tds[j].dataset.xIndex) + tds[j].colSpan > pos + cell.colSpan) {\n                                tds[j].colSpan++;\n                                if(tds[j].rowSpan > 1) i += tds[j].rowSpan - 1;\n                                break;\n                            }\n                        } else if(parseInt(tds[j].dataset.xIndex) > pos) {\n                            let td = newTd(cellStyle);\n                            rows[i].insertBefore(td.getDOMElement(), tds[j]);\n                            break;\n                        }\n                    }\n                }\n\n                function newTd(cellStyle) {\n                    let td = new WPTB_Cell(mark);\n                    if (cellStyle) {\n                        td.getDOMElement().setAttribute('style', cellStyle);\n                        td.getDOMElement().style.width = null;\n                        td.getDOMElement().style.height = null;\n                    }\n                    td.getDOMElement().style.borderColor = WPTB_TableSettingsData.getTableSetting('borderColor');\n                    return td;\n                }\n\n                for (var i = 0; i < array.length; i++) {\n                    array[i].push(0);\n                }\n                maxAmountOfCells++;\n                drawTable(array);\n                table.recalculateIndexes();\n                table.addColumnWidth();\n                table.addRowHeight();\n                WPTB_Helper.dataTitleColumnSet( table );\n                undoSelect();\n\n                WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n            }\n        }\n    };\n\n    /*\n     * For preventing us to take a lot of time,\n     * This is just calling the function addColumnAfter, but\n     * using the previous column to current one as reference.\n     * @see addColumnAfter\n     */\n\n    table.addColumnBefore = function () {\n        var cell = document.querySelector('.wptb-highlighted'),\n                pos = getCoords(cell)[1];\n\n        if (pos === 0) {\n            table.addColumnStart();\n        } else {\n            table.addColumnAfter(pos - 1);\n        }\n    };\n\n    /*\n     * Luckily, thisfunction is simple,\n     * it just add a row to the end of table.\n     */\n\n    table.addRowToTheEnd = function () {\n        let r = table.insertRow(-1),\n        td,\n        aux,\n        currentTable = document.getElementsByClassName('wptb-preview-table');\n        r.classList.add( 'wptb-row' );\n        if (currentTable.length > 0) {\n            currentTable = currentTable[0];\n\n            for (var i = 0; i < maxAmountOfCells; i++) {\n                td = new WPTB_Cell(mark);\n                let currentTableTd = currentTable.querySelector('[data-x-index=\"' + i + '\"]');\n                if( currentTableTd ) {\n                    let currentTdStyle = currentTableTd.getAttribute( 'style' );\n\n                    td.getDOMElement().setAttribute( 'style', currentTdStyle );\n                    td.getDOMElement().style.height = null;\n                }\n                r.appendChild(td.getDOMElement());\n            }\n\n            aux = Array.from(array[0]);\n            array.push(aux);\n            drawTable(array);\n            table.recalculateIndexes();\n            WPTB_Helper.tableRowsColorsReinstall(table);\n            table.addColumnWidth();\n            WPTB_Helper.dataTitleColumnSet( table );\n            undoSelect();\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n    };\n\n    /*\n     * Yet another simple function,\n     * it just add a row to the start of table.\n     */\n\n    table.addRowToTheStart = function () {\n        let r = table.insertRow(0),\n        td,\n        aux,\n        currentTable = document.getElementsByClassName('wptb-preview-table'),\n        currentTableTd,\n        currentTdStyle;\n        r.classList.add( 'wptb-row' );\n        if (currentTable.length > 0) {\n            currentTable = currentTable[0];\n\n            for (var i = 0; i < maxAmountOfCells; i++) {\n                td = new WPTB_Cell(mark);\n                let currentTableTd = currentTable.querySelector('[data-x-index=\"' + i + '\"]');\n                if( currentTableTd ) {\n                    let currentTdStyle = currentTableTd.getAttribute( 'style' );\n\n                    td.getDOMElement().setAttribute( 'style', currentTdStyle );\n                    td.getDOMElement().style.height = null;\n                }\n                r.appendChild(td.getDOMElement());\n            }\n\n            aux = Array.from(array[0]);\n            array.push(aux);\n            drawTable(array);\n            table.recalculateIndexes();\n            WPTB_Helper.tableRowsColorsReinstall( table );\n            table.addColumnWidth();\n            WPTB_Helper.dataTitleColumnSet( table );\n            undoSelect();\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n    };\n\n    /*\n     * This function adds a row before the current one.\n     * Since the biggest factor of problem is a not-started but ongoing rowspan,\n     * the most of the troubles is not here.\n     */\n\n    table.addRowBefore = function () {\n        let cell = document.querySelector('.wptb-highlighted'),\n            cellStyle = cell.getAttribute('style'),\n            row = getCoords(cell)[0],\n            cellNew;\n\n        if(row === 0){\n            row = -1;\n        }\n\n        for( let i = row - 1; i >= 0; i-- ) {\n            let rowChildren = table.rows[i].children;\n            let rowChildrenLength = rowChildren.length;\n            if( rowChildrenLength > 0 ) {\n                for( let j = 0; j < rowChildrenLength; j++ ) {\n                    if( rowChildren[j].rowSpan == 1 ) {\n                        row = i;\n                        cellNew = true;\n                        break;\n                    }\n                }\n            }\n            if ( cellNew ) {\n                break;\n            }\n        }\n\n\n        if (row === -1) {\n            table.addRowToTheStart();\n        } else {\n            table.addRowAfter( row, cellStyle );\n        }\n    };\n\n    /*\n     * Well... by the name convention of the previous 3 functions,\n     * it's pretty obvious that this functions attaches a new\n     * row after highlighted cell row. The greatest obstacle it was\n     * the possibility of a TR not having the exact amount of columns\n     * occuped by actual node but rowspanned upper cells. For that purpose\n     * it was created the function realTimeArray.\n     * @see realTimeArray\n     */\n\n    table.addRowAfter = function ( row, cellStyle ) {\n        let cellRowSpan,\n            rowAfter,\n            aux;\n\n        if ( ( row == undefined || typeof row !== 'number' ) && cellStyle == undefined ) {\n            let cell = document.querySelector('.wptb-highlighted');\n            cellStyle = cell.getAttribute('style'),\n            row = getCoords(cell)[0],\n            cellRowSpan = cell.rowSpan,\n            rowAfter = row + cellRowSpan - 1;\n        } else {\n            rowAfter = row;\n        }\n\n\n        let cellsColSpan = 0;\n        if ( rowAfter < table.rows.length -1 ) {\n            for( let i = 0; i <= rowAfter ; i++ ) {\n                let tableRowsIChildren = table.rows[i].children,\n                    tableRIChildrenLength = tableRowsIChildren.length;\n                if( tableRIChildrenLength > 0 ) {\n                    for( let j = 0; j < tableRIChildrenLength; j++ ) {\n                        let rowIRowSpan = tableRowsIChildren[j].rowSpan;\n\n                        if ( rowIRowSpan - 1  + i > rowAfter ) {\n                            tableRowsIChildren[j].rowSpan++;\n                        }\n                    }\n                }\n            }\n\n            let rNext = table.rows[rowAfter + 1],\n                rNextChildren = rNext.children,\n                rNextChildrenLength = rNextChildren.length;\n\n            if( rNextChildrenLength > 0 ) {\n                for ( let i = 0; i < rNextChildrenLength; i++ ) {\n                    cellsColSpan += rNextChildren[i].colSpan;\n                }\n            }\n        } else {\n            cellsColSpan = array[0].length;\n        }\n\n        let r = table.insertRow( rowAfter + 1 );\n        r.classList.add( 'wptb-row' );\n\n        for ( j = 0; j < cellsColSpan; j++ ) {\n            let td = new WPTB_Cell( mark );\n            let currentTableTd = table.querySelector('[data-x-index=\"' + j + '\"]');\n            if( currentTableTd ) {\n                let currentTdStyle = currentTableTd.getAttribute( 'style' );\n\n                td.getDOMElement().setAttribute( 'style', currentTdStyle );\n                td.getDOMElement().style.height = null;\n            }\n            r.appendChild( td.getDOMElement() );\n        }\n\n        aux = Array.from(array[0]);\n        array.push(aux);\n        drawTable(array);\n        table.recalculateIndexes();\n        WPTB_Helper.tableRowsColorsReinstall( table );\n        table.addColumnWidth();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after');\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * This function checks the current selected cells\n     * make a rectangular shape.\n     * @param Array the abstract table.\n     * @return false, if not making a rectangle, or\n     *\tArray an array containing number of rows and columns, if selection makes a rectangle.\n     */\n\n    table.isSquare = function (a) {\n        var rowStart = -1,\n            columnStart = -1,\n            rowEnd = -1,\n            columnEnd = -1,\n            height,\n            width,\n            itemsEstimate = 0,\n            items = 0;\n\n        for (var i = 0; i < a.length; i++) {\n            for (var j = 0; j < a[i].length; j++) {\n                if (a[i][j] == 1) {\n                    if ( j < columnStart || columnStart == -1 ) {\n                        columnStart = j;\n                    }\n                    if ( i < rowStart || rowStart == -1 ) {\n                        rowStart = i;\n                    }\n                }\n            }\n\n        }\n\n        for (var i = a.length - 1; i > -1; i--) {\n            for (var j = a[i].length - 1; j > -1; j--) {\n                if (a[i][j] == 1) {\n                    if ( j > columnEnd ) {\n                        columnEnd = j;\n                    }\n                    if ( i > rowEnd ) {\n                        rowEnd = i;\n                    }\n                }\n            }\n        }\n\n        for (var i = rowStart; i < rowEnd; i++) {\n            for (var j = columnStart; j < columnEnd; j++) {\n                if (a[i][j] == 0 || a[i][j] == undefined) {\n                    return false;\n                }\n            }\n        }\n\n        for (var i = 0; i < a.length; i++) {\n            for (var j = 0; j < a[i].length; j++) {\n                if (a[i][j] == 1) {\n                    items++;\n                }\n            }\n        }\n\n        height = rowEnd - rowStart + 1;\n        width = columnEnd - columnStart + 1;\n        itemsEstimate = height * width;\n\n        if (itemsEstimate !== items) {\n            return false;\n        }\n        return [height, width];\n    };\n\n    /*\n     * This function merges all selected cells.\n     * Well, actually sets the colspan and rowspan of first\n     * upper left  cell in selection and deletes the another selected cells.\n     */\n\n    table.mergeCells = function () {\n        var dimensions = table.isSquare(array),\n            rowspan = dimensions[0],\n            colspan = dimensions[1],\n            first = document.querySelector('.wptb-highlighted'),\n            tds = [].slice.call(document.getElementsByClassName('wptb-highlighted'), 1),\n            tdsChildrenNew = [];\n\n        for (let i = 0; i < tds.length; i++) {\n            let tdsInternalElements = tds[i].getElementsByClassName('wptb-ph-element');\n            if (tdsInternalElements.length > 0) {\n                let tdsIntElemLength = tdsInternalElements.length;\n                for (let j = 0; j < tdsIntElemLength; j++) {\n                    tdsChildrenNew.push(tdsInternalElements[j]);\n                }\n            }\n            let p = tds[i].parentNode;\n            p.removeChild(tds[i]);\n        }\n        if (tdsChildrenNew.length > 0) {\n            for (let i = 0; i < tdsChildrenNew.length; i++) {\n                first.appendChild(tdsChildrenNew[i]);\n            }\n        }\n\n        first.colSpan = colspan;\n        first.rowSpan = rowspan;\n        table.recalculateIndexes();\n        table.reconstraction();\n        let firstWidth = first.style.width;\n        let firstDataFixedWidth = first.dataset.wptbFixedWidth;\n        if( firstWidth ) {\n            table.addColumnWidth( parseFloat( firstWidth, 10 ) );\n        } else if( firstDataFixedWidth ) {\n            table.addColumnWidth();\n        } else {\n            table.addColumnWidth( false, true );\n        }\n\n        let firstHeight = first.style.height;\n        let firstDataFixedHeight = first.dataset.wptbFixedHeight;\n        if( firstHeight ) {\n            table.addRowHeight( parseFloat( firstHeight, 10 ) );\n        } else if( firstDataFixedHeight ) {\n            table.addRowHeight();\n        } else {\n            table.addRowHeight( false, true );\n        }\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * This functions makes the exact inverse as above.\n     * It resets colspan and rowspan and appends\n     * the same amount in cells to the table.\n     * @bug\n     */\n\n    table.splitCell = function () {\n        var cell = document.getElementsByClassName('wptb-highlighted')[0],\n            rowspan = cell.rowSpan,\n            colspan = cell.colSpan,\n            cellStyles = cell.getAttribute('style'),\n            row = getCoords(cell)[0],\n            thisRow = table.rows[row],\n            cellXIndex =cell.dataset.xIndex;\n\n        cell.rowSpan = 1;\n        cell.colSpan = 1;\n\n        for (let i = 1; i < colspan; i++) {\n            let td = new WPTB_Cell(mark);\n            td.getDOMElement().setAttribute('style', cellStyles);\n            td.getDOMElement().classList.add( 'wptb-highlighted' );\n            if ( cell.nextSibling ) {\n                thisRow.insertBefore( td.getDOMElement(), cell.nextSibling );\n            } else {\n                thisRow.appendChild( td.getDOMElement() );\n            }\n\n        }\n\n        if (rowspan > 1) {\n            for (let i = 1; i < rowspan; i++) {\n                let rowChildInsertBefore = undefined,\n                    rowNext = table.rows[row + i],\n                    rowChildren = rowNext.children,\n                    rowChildrenLength = rowChildren.length;\n\n                if ( rowChildrenLength > 0 ) {\n                    for ( let k = 0; k < rowChildrenLength; k++ ) {\n                        if ( Number( rowChildren[k].dataset.xIndex ) > Number( cellXIndex ) ) {\n                            rowChildInsertBefore = rowChildren[k];\n                            break;\n                        }\n                    }\n                }\n                for ( let j = 0; j < colspan; j++ ) {\n                    let td = new WPTB_Cell( mark );\n                    td.getDOMElement().setAttribute( 'style', cellStyles );\n                    if ( rowChildInsertBefore != undefined ) {\n                        rowNext.insertBefore( td.getDOMElement(), rowChildInsertBefore );\n                    } else {\n                        rowNext.appendChild( td.getDOMElement() );\n                    }\n                }\n            }\n        }\n\n        table.recalculateIndexes();\n        table.reconstraction();\n        table.addColumnWidth();\n        table.addRowHeight();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * Searches for rowspanned cells up to row number meeting it.\n     * @param number the number of row where the function\n     * must search up to.\n     */\n\n    table.findRowspannedCells = function (row) {\n        var array = [],\n                difference;\n        actualPoints = getActualPointsInRow(row);\n        if (actualPoints === maxAmountOfCells) {\n            return [];\n        }\n        difference = maxAmountOfCells - actualPoints;\n\n        for (var i = row - 1; i >= 0 && difference; i--) {\n            var tds = table.rows[i].getElementsByTagName('td');\n            for (var i = 0; i < tds.length; i++) {\n                if (tds[i].rowSpan > 1) {\n                    array.push(tds[i]);\n                    difference -= tds[i].colSpan;\n                }\n            }\n        }\n        return array;\n\n    }\n\n    /*\n     * This function explores the table and adds\n     * a cell for each lacking one for each row\n     * to meet an even amount of cells.\n     */\n\n    table.addLackingCells = function () {\n        var sumRows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            sumRows.push(0);\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            var tds = table.rows[i].getElementsByTagName('td');\n            for (var j = 0; j < tds.length; j++) {\n                if (tds[j].rowSpan > 1) {\n                    for (var k = 1; k < tds[j].rowSpan; k++) {\n                        sumRows[i + k]++;\n                    }\n                }\n            }\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            var tds = table.rows[i].getElementsByTagName('td'),\n                    totalColspan = 0;\n            for (var j = 0; j < tds.length; j++) {\n                totalColspan += tds[j].colSpan;\n            }\n            totalColspan += sumRows[i];\n            difference = maxAmountOfCells - totalColspan;\n            for (var j = 0; j < difference; j++) {\n                var td = new WPTB_Cell(mark);\n                table.rows[i].appendChild(td.getDOMElement());\n                //table.rows[i].insertBefore( td.getDOMElement(), rows[i].nextSibling );\n            }\n        }\n    };\n\n    /*\n     * This function deletes the row of currently\n     * selected cell.\n     */\n\n    table.deleteRow = function () {\n        let cell = document.querySelector('.wptb-highlighted'),\n            cellStyles = cell.getAttribute('style'),\n            rowspan = cell.rowSpan,\n            row = getCoords(cell)[0],\n            thisRow,\n            aux;\n\n        if ( rowspan == undefined ) rowspan = 1;\n\n        for ( let i = 0; i < rowspan; i++ ) {\n            thisRow = table.rows[row];\n            let thisRowChildren = thisRow.children,\n                nextRow = table.rows[row + 1],\n                nextRowChildren,\n                nextRowChildrenLength,\n                tdArr = [];\n\n            if( nextRow != undefined ) {\n                nextRowChildren = nextRow.children;\n                nextRowChildrenLength = nextRowChildren.length;\n                for (let j = 0; j < thisRowChildren.length; j++) {\n                    if ( thisRowChildren[j].rowSpan > 1 ) {\n                        let td = new WPTB_Cell(mark);\n                            td.getDOMElement().setAttribute('style', cellStyles);\n                            td.getDOMElement().colSpan = thisRowChildren[j].colSpan;\n                            td.getDOMElement().rowSpan = thisRowChildren[j].rowSpan - 1;\n\n                        let nextRowChildrenK = undefined;\n                        for ( let k = 0; k < nextRowChildrenLength; k++ ) {\n                            if ( Number( nextRowChildren[k].dataset.xIndex ) > Number( thisRowChildren[j].dataset.xIndex ) ) {\n                                nextRowChildrenK = nextRowChildren[k];\n                                break;\n                            }\n                        }\n\n                        if ( nextRowChildrenK ) {\n                            tdArr.push( [td, nextRowChildrenK] );\n                        } else {\n                            tdArr.push( [td] );\n                        }\n                    }\n                }\n\n                if ( tdArr.length > 0 ) {\n                    for ( let k = 0; k < tdArr.length; k++ ) {\n                        if ( tdArr[k][1] != undefined ) {\n                            nextRow.insertBefore( tdArr[k][0].getDOMElement(), tdArr[k][1] );\n                        } else {\n                            nextRow.appendChild( tdArr[k][0].getDOMElement() );\n                        }\n                    }\n                }\n            }\n\n            let tableRows = table.rows;\n            if ( tableRows.length > 0 ) {\n                for ( let j = 0; j < row; j++ ) {\n                    let jRowChildren = tableRows[j].children;\n                    if ( jRowChildren.length > 0 ) {\n                        for ( let x = 0; x < jRowChildren.length; x++ ) {\n                            if ( jRowChildren[x].rowSpan - 1 >= row - j ) {\n                                jRowChildren[x].rowSpan--;\n                            }\n                        }\n                    }\n                }\n            }\n            aux = Array.from(array[0]);\n            array.pop(aux);\n            drawTable(array);\n            table.getElementsByTagName('tbody')[0].removeChild(table.rows[row]);\n\n            if( table.rows.length == 0 ) {\n                WPTB_Helper.toggleTableEditMode();\n                wptbTableSetup.innerHTML = '';\n                document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n                let wptbSaveBtn = document.getElementsByClassName( 'wptb-save-btn' );\n                if( wptbSaveBtn.length > 0 ) {\n                    wptbSaveBtn = wptbSaveBtn[0];\n\n                    wptbSaveBtn.classList.add( 'wptb-save-disabled' );\n                    wptbSaveBtn.classList.remove('active');\n                }\n            } else {\n                table.recalculateIndexes();\n                WPTB_Helper.tableRowsColorsReinstall( table );\n                WPTB_Helper.dataTitleColumnSet( table );\n                table.reconstraction();\n            }\n        }\n\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    }\n\n    /*\n     * This function deletes the column of currently\n     * selected cell. Again, this is way more complicated than\n     * delete row case.\n     */\n\n    table.deleteColumn = function () {\n        let cell = document.querySelector('.wptb-highlighted'),\n            cellXIndex = cell.dataset.xIndex,\n            colspan = cell.colSpan;\n\n        for ( let i = 0; i < colspan; i++ ) {\n            for ( let j = 0; j < table.rows.length; j++ ) {\n                let rowChildren = table.rows[j].children;\n                let rowChildrenLength = rowChildren.length;\n                if( rowChildrenLength > 0 ) {\n                    for ( let k = rowChildrenLength - 1; k >= 0; k-- ) {\n                        if ( Number( rowChildren[k].dataset.xIndex ) == Number( cellXIndex ) ) {\n                            if ( rowChildren[k].colSpan > 1 ) {\n                                rowChildren[k].colSpan--;\n                            } else {\n                                table.rows[j].removeChild( rowChildren[k] );\n                            }\n                            break;\n                        } else if( Number( rowChildren[k].dataset.xIndex ) < Number( cellXIndex ) &&\n                                Number( rowChildren[k].dataset.xIndex ) +\n                                Number( rowChildren[k].colSpan -1 ) >= cellXIndex ) {\n                            if ( rowChildren[k].colSpan > 1 ) {\n                                rowChildren[k].colSpan--;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n\n            for ( let j = 0; j < table.rows.length; j++ ) {\n                if (array[j] != undefined)\n                    array[j].pop();\n            }\n\n            maxAmountOfCells--;\n\n            if( table.querySelectorAll( 'td' ).length == 0 ) {\n                WPTB_Helper.toggleTableEditMode();\n                wptbTableSetup.innerHTML = '';\n                document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n                let wptbSaveBtn = document.getElementsByClassName( 'wptb-save-btn' );\n                if( wptbSaveBtn.length > 0 ) {\n                    wptbSaveBtn = wptbSaveBtn[0];\n\n                    wptbSaveBtn.classList.add( 'wptb-save-disabled' );\n                    wptbSaveBtn.classList.remove('active');\n                }\n            } else {\n                table.recalculateIndexes();\n                table.tdDefaultWidth();\n                WPTB_Helper.dataTitleColumnSet( table );\n                table.reconstraction();\n            }\n        }\n\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    // @deprecated old generate logic\n    // document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n\n    array = fillTableArray();\n\n    undoSelect();\n    drawTable(array);\n\n    wptbTableSetup.appendChild(table);\n    //if (columns || rows) {\n        table.recalculateIndexes( true );\n    //}\n    table.reconstraction();\n    table.tdDefaultWidth();\n\n    wptbTableSetup.onresize = function() {\n        table.tdDefaultWidth();\n    };\n\n    WPTB_LeftPanel();\n\n    // event hook to signal that table is generated and ready to be used\n    WPTB_Helper.wptbDocumentEventGenerate('wptb:table:generated', document);\n\n    WPTB_Helper.elementStartScript( table, 'table_setting' );\n    WPTB_Helper.elementOptionsSet( 'table_setting', table );\n\n    // this code gets the ID of the active element in the toolbar\n    // and stores it in the data attribute of the common container element \"wpcd_fixed_toolbar\"\n//    let wptbPhElement = document.getElementsByClassName( 'wptb-ph-element' );\n//    let wpcdFixedToolbar = document.getElementById( 'wpcd_fixed_toolbar' );\n//    for ( let i = 0; i < wptbPhElement.length; i++ ) {\n//        wptbPhElement[i].addEventListener( 'click', function( e ) {\n//            let wptbToolbar = document.getElementById( 'wpcd_fixed_toolbar' ).children;\n//            for ( let j = 0; j < wptbToolbar.length; j++ ) {\n//                let elementStyles = window.getComputedStyle( wptbToolbar[j], 'null' );\n//                if( elementStyles.getPropertyValue( 'display' ) == 'block' ) {\n//                    wpcdFixedToolbar.dataset.toolbarActiveId = wptbToolbar[j].getAttribute( 'id' );\n//                }\n//            }\n//        }, false );\n//    }\n\n//    let wptbPanelLeft = document.getElementsByClassName( 'wptb-panel-left' );\n//    if( wptbPanelLeft.length > 0 ) {\n//        wptbPanelLeft[0].addEventListener( 'click', function( e ) {\n//            let toolbarActiveElementId = wpcdFixedToolbar.dataset.toolbarActiveId;\n//            document.getElementById( toolbarActiveElementId ).style.display = '';\n//        }, false );\n//    }\n\n//    let body = document.getElementsByTagName( 'body' );\n//    if( body.length > 0 ) {\n//        body[0].addEventListener( 'click', function( e ) {\n//            if ( e.target.classList.contains( 'wptb-panel-left' ) || WPTB_Helper.findAncestor( e.target, 'wptb-panel-left' ) ) {\n//                let toolbarActiveElementId = wpcdFixedToolbar.dataset.toolbarActiveId;\n//                document.getElementById( toolbarActiveElementId ).style.display = '';\n//            }\n//        }, false );\n//    }\n};\n","const WPTB_TableSettingsData = {\n    borderColor: '',\n    /**\n     *\n     * @param {string} name\n     * @param {string} value\n     */\n    setTableSetting: function(name, value){\n        this[name] = value;\n    },\n    /**\n     *\n     * @param {string} name\n     * @returns {*}\n     */\n    getTableSetting: function (name) {\n        return this[name];\n    }\n}\n\n","const WPTB_TableStateSaveManager = function () {\n\tthis.tableStateSet = (generate) => {\n\t\tif (generate && window.wptbTableStateSaving && Array.isArray(window.wptbTableStateSaving)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get table setup\n\t\tlet wptbTableSetup = document.getElementsByClassName('wptb-table-setup');\n\t\tlet wptbPreviewTable = '';\n\t\tif (wptbTableSetup.length > 0) {\n\t\t\twptbTableSetup = wptbTableSetup[0];\n\n\t\t\twptbPreviewTable = wptbTableSetup.querySelector('.wptb-preview-table');\n\t\t} else {\n\t\t\twptbTableSetup = '';\n\t\t}\n\n\t\t// check if a global array doesn't exist with saved versions of the table\n\t\t// them create it\n\t\tif (!window.wptbTableStateSaving && !Array.isArray(window.wptbTableStateSaving)) {\n\t\t\twindow.wptbTableStateSaving = [];\n\t\t}\n\n\t\t// remove the extra part of the array after changing the table\n\t\t// when it is showed in the not last modified version\n\t\tif (window.wptbTableStateSaving.length > window.wptbTableStateNumberShow) {\n\t\t\twindow.wptbTableStateSaving = window.wptbTableStateSaving.slice(0, window.wptbTableStateNumberShow + 1);\n\t\t}\n\n\t\t// add new state of table\n\t\tlet wptbNewTableSetup = '';\n\t\tif (wptbTableSetup) {\n\t\t\twptbNewTableSetup = wptbTableSetup.cloneNode(true);\n\t\t\tconst wptbHighlighted = wptbNewTableSetup.getElementsByClassName('wptb-highlighted');\n\t\t\tfor (let i = 0; i < wptbHighlighted.length; i++) {\n\t\t\t\twptbHighlighted[i].classList.remove('wptb-highlighted');\n\t\t\t}\n\t\t\tconst wptbDirectlyhovered = wptbNewTableSetup.getElementsByClassName('wptb-directlyhovered');\n\t\t\tfor (let i = 0; i < wptbDirectlyhovered.length; i++) {\n\t\t\t\twptbDirectlyhovered[i].classList.remove('wptb-directlyhovered');\n\t\t\t}\n\t\t\tconst mceContentBodys = wptbNewTableSetup.querySelectorAll('.mce-content-body');\n\t\t\tif (mceContentBodys.length > 0) {\n\t\t\t\tfor (let k = 0; k < mceContentBodys.length; k++) {\n\t\t\t\t\tmceContentBodys[k].classList.remove('mce-content-body');\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst dataMceStyle = wptbNewTableSetup.querySelectorAll('[data-mce-style]');\n\t\t\tif (dataMceStyle.length > 0) {\n\t\t\t\tfor (let k = 0; k < dataMceStyle.length; k++) {\n\t\t\t\t\tdataMceStyle[k].removeAttribute('data-mce-style');\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst mceIds = wptbNewTableSetup.querySelectorAll('[id^=mce_]');\n\t\t\tif (mceIds.length > 0) {\n\t\t\t\tfor (let k = 0; k < mceIds.length; k++) {\n\t\t\t\t\tmceIds[k].removeAttribute('id');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet cssForTdsWidthAutoValue = '';\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tconst cssForTdsWidthAuto = head.querySelector('style[data-wptb-td-auto-width=\"true\"]');\n\t\t\tif (cssForTdsWidthAuto) {\n\t\t\t\tcssForTdsWidthAutoValue = cssForTdsWidthAuto.innerHTML;\n\t\t\t}\n\t\t}\n\n\t\tlet wptbTableTitle = '';\n\t\tconst wptbSetupName = document.getElementById('wptb-setup-name');\n\t\tif (wptbSetupName) wptbTableTitle = wptbSetupName.value;\n\n\t\twindow.wptbTableStateSaving.push([wptbNewTableSetup, cssForTdsWidthAutoValue, wptbTableTitle]);\n\n\t\t// set new number of state which is showed now\n\t\twindow.wptbTableStateNumberShow = window.wptbTableStateSaving.length - 1;\n\n\t\t// make undo arrow active when the table was changed\n\t\tif (window.wptbTableStateSaving.length - 1 > 0) {\n\t\t\tlet wptbUndo = document.getElementsByClassName('wptb-undo');\n\t\t\tif (wptbUndo.length > 0) {\n\t\t\t\twptbUndo = wptbUndo[0];\n\n\t\t\t\twptbUndo.classList.remove('wptb-undoredo-disabled');\n\t\t\t}\n\t\t}\n\n\t\t// make redo arrow not active when the table was changed\n\t\tlet wptbRedo = document.getElementsByClassName('wptb-redo');\n\t\tif (wptbRedo.length > 0) {\n\t\t\twptbRedo = wptbRedo[0];\n\n\t\t\twptbRedo.classList.add('wptb-undoredo-disabled');\n\t\t}\n\n\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\tif (wptbSaveBtn.length > 0) {\n\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\tif (\n\t\t\t\t(!wptbSaveBtn.dataset.wptbTableStateNumberSave && window.wptbTableStateNumberShow == 0) ||\n\t\t\t\twindow.wptbTableStateNumberShow == wptbSaveBtn.dataset.wptbTableStateNumberSave ||\n\t\t\t\t!wptbPreviewTable\n\t\t\t) {\n\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t} else {\n\t\t\t\twptbSaveBtn.classList.remove('wptb-save-disabled');\n\t\t\t\twptbSaveBtn.classList.add('active');\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.tableStateGet = (datawptbUndoredo) => {\n\t\tif (datawptbUndoredo && window.wptbTableStateSaving && window.wptbTableStateSaving.length > 0) {\n\t\t\t// changes the number of the state which displays now\n\t\t\tif (datawptbUndoredo == 'undo') {\n\t\t\t\tif (window.wptbTableStateNumberShow > 0) {\n\t\t\t\t\twindow.wptbTableStateNumberShow--;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (datawptbUndoredo == 'redo') {\n\t\t\t\tif (window.wptbTableStateNumberShow < window.wptbTableStateSaving.length) {\n\t\t\t\t\twindow.wptbTableStateNumberShow++;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add or delete class \"wptb-undoredo-disabled\" for undo button\n\t\t\tlet wptbUndo = document.getElementsByClassName('wptb-undo');\n\t\t\tif (wptbUndo.length > 0) {\n\t\t\t\twptbUndo = wptbUndo[0];\n\n\t\t\t\tif (window.wptbTableStateNumberShow == 0) {\n\t\t\t\t\tif (wptbUndo) {\n\t\t\t\t\t\twptbUndo.classList.add('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t} else if (window.wptbTableStateNumberShow > 0) {\n\t\t\t\t\tif (wptbUndo) {\n\t\t\t\t\t\twptbUndo.classList.remove('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add or delete class \"wptb-undoredo-disabled\" for redo button\n\t\t\tlet wptbRedo = document.getElementsByClassName('wptb-redo');\n\t\t\tif (wptbRedo.length > 0) {\n\t\t\t\twptbRedo = wptbRedo[0];\n\n\t\t\t\tif (window.wptbTableStateNumberShow == window.wptbTableStateSaving.length - 1) {\n\t\t\t\t\tif (wptbRedo) {\n\t\t\t\t\t\twptbRedo.classList.add('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t} else if (window.wptbTableStateNumberShow < window.wptbTableStateSaving.length - 1) {\n\t\t\t\t\tif (wptbRedo) {\n\t\t\t\t\t\twptbRedo.classList.remove('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add or delete class \"wptb-save-disabled\" for save button\n\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\tif (\n\t\t\t\t\t(!wptbSaveBtn.dataset.wptbTableStateNumberSave && window.wptbTableStateNumberShow == 0) ||\n\t\t\t\t\twindow.wptbTableStateNumberShow == wptbSaveBtn.dataset.wptbTableStateNumberSave\n\t\t\t\t) {\n\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t} else {\n\t\t\t\t\twptbSaveBtn.classList.add('active');\n\t\t\t\t\twptbSaveBtn.classList.remove('wptb-save-disabled');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// load necessary saved table state\n\t\t\tlet wptbTableSetup = document.getElementsByClassName('wptb-table-setup');\n\t\t\tif (wptbTableSetup.length > 0) {\n\t\t\t\twptbTableSetup = wptbTableSetup[0];\n\n\t\t\t\t// wptbTableSetup.outerHTML = '';\n\t\t\t\tif (window.wptbTableStateSaving[window.wptbTableStateNumberShow]) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twindow.wptbTableStateSaving[window.wptbTableStateNumberShow][0] &&\n\t\t\t\t\t\ttypeof window.wptbTableStateSaving[window.wptbTableStateNumberShow][0] === 'object'\n\t\t\t\t\t) {\n\t\t\t\t\t\tif ('outerHTML' in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]) {\n\t\t\t\t\t\t\twptbTableSetup.outerHTML =\n\t\t\t\t\t\t\t\twindow.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wptbTableSetupNew = document.querySelector('.wptb-table-setup');\n\t\t\t\t\tif (wptbTableSetupNew && wptbTableSetupNew.children.length == 0) {\n\t\t\t\t\t\t// document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\t// add or change or delete style element in the head for table cells who have auto width\n\t\t\t\t\tconst { head } = document;\n\t\t\t\t\tif (head) {\n\t\t\t\t\t\tconst cssForTdsWidthAutoOld = head.querySelector('style[data-wptb-td-auto-width=\"true\"]');\n\t\t\t\t\t\tif (cssForTdsWidthAutoOld) {\n\t\t\t\t\t\t\thead.removeChild(cssForTdsWidthAutoOld);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]) {\n\t\t\t\t\t\t\tconst cssForTdsWidthAuto = document.createElement('style');\n\t\t\t\t\t\t\tcssForTdsWidthAuto.setAttribute('data-wptb-td-auto-width', true);\n\t\t\t\t\t\t\tcssForTdsWidthAuto.innerHTML =\n\t\t\t\t\t\t\t\twindow.wptbTableStateSaving[window.wptbTableStateNumberShow][1];\n\t\t\t\t\t\t\thead.appendChild(cssForTdsWidthAuto);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// change value of table title field\n\t\t\t\t\tconst wptbSetupName = document.getElementById('wptb-setup-name');\n\t\t\t\t\tif (typeof window.wptbTableStateSaving[window.wptbTableStateNumberShow][2] !== 'undefined') {\n\t\t\t\t\t\tif (wptbSetupName)\n\t\t\t\t\t\t\twptbSetupName.value = window.wptbTableStateSaving[window.wptbTableStateNumberShow][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet body = document.getElementsByTagName('body');\n\t\t\t\tif (body.length > 0) {\n\t\t\t\t\tbody = body[0];\n\t\t\t\t}\n\n\t\t\t\tWPTB_Helper.elementOptionsPanelClear();\n\t\t\t\tWPTB_LeftPanel();\n\n\t\t\t\tconst wptbLeftScrollPanelCellSetting = document.getElementById('wptb-left-scroll-panel-cell-settings');\n\t\t\t\tif (wptbLeftScrollPanelCellSetting) {\n\t\t\t\t\twptbLeftScrollPanelCellSetting.classList.remove('visible');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.tableStateClear = function () {\n\t\tdelete window.wptbTableStateSaving;\n\t\tdelete window.wptbTableStateNumberShow;\n\n\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\tif (wptbSaveBtn.length > 0) {\n\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\n\t\t\twptbSaveBtn.removeAttribute('data-wptb-table-state-number-save');\n\t\t}\n\n\t\tlet wptbUndo = document.getElementsByClassName('wptb-undo');\n\t\tif (wptbUndo.length > 0) {\n\t\t\twptbUndo = wptbUndo[0];\n\n\t\t\twptbUndo.classList.add('wptb-undoredo-disabled');\n\t\t}\n\n\t\tlet wptbRedo = document.getElementsByClassName('wptb-redo');\n\t\tif (wptbRedo.length > 0) {\n\t\t\twptbRedo = wptbRedo[0];\n\n\t\t\twptbRedo.classList.add('wptb-undoredo-disabled');\n\t\t}\n\t};\n};\n","/**\n * Add upsell related scripts.\n */\n(function upsellsHooks() {\n\t// make left panel upsells visible when table is generated\n\tdocument.addEventListener('wptb:table:generated', () => {\n\t\tconst leftPanelUpsells = Array.from(document.querySelectorAll('.wptb-left-panel .wptb-upsells-anchor'));\n\t\t// eslint-disable-next-line array-callback-return\n\t\tleftPanelUpsells.map((u) => {\n\t\t\tif (u) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tu.style.display = 'unset';\n\t\t\t}\n\t\t});\n\t});\n})();\n","var WPTB_innerElementSet = function  ( element ) {\n    \n    element.ondragenter = function (e) {\n        var div;\n        if ( e.dataTransfer.types.indexOf( 'wptbelement' ) == -1 && e.dataTransfer.types.indexOf( 'wptb-moving-mode' ) == -1 ) {\n            return;\n        }\n        WPTB_DropHandle(this, e);\n        \n        element.classList.add( 'wptb-ondragenter' );\n    }\n    element.ondragover = function (e) {\n        e.preventDefault();\n        WPTB_DropHandle(this, e);\n    }\n    element.ondragleave = function (e) {\n        WPTB_DropHandle(this, e, true);\n\n    }\n    element.ondrop = function(e) {\n        this.classList.remove( 'wptb-ondragenter' );\n        let element, classId;\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!e.dataTransfer.getData('wptbElement') && !e.dataTransfer.getData('node')) {\n            return;\n        }\n        let wptbDropHandle,\n            wptbDropBorderMarker;\n        if ( document.getElementsByClassName( 'wptb-drop-handle' ).length > 0 ) {\n            wptbDropHandle = document.getElementsByClassName( 'wptb-drop-handle' )[0];\n        }\n        if( document.getElementsByClassName( 'wptb-drop-border-marker' ).length > 0 ) {\n            wptbDropBorderMarker = document.getElementsByClassName( 'wptb-drop-border-marker' )[0];\n        }\n\n        if ( e.dataTransfer.getData( 'wptbElement' ) ) {\n            element = WPTB_Helper.newElementProxy( e.dataTransfer.getData( 'wptbElement' ) );\n            element = element.getDOMElement();\n        } else {\n            classId = e.dataTransfer.getData( 'node' );\n            element = document.getElementsByClassName( classId )[0];\n            //element.classList.remove( 'wptb-moving-mode' );\n        }\n\n        if(WPTB_Helper.getDragRelativeType() === 'td_relative'){\n            WPTB_DropHandle(this, e, true);\n            const parentCell = WPTB_Helper.getParentOfType('td', e.target);\n\n            parentCell.appendChild(element);\n            WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n\n        }else if( wptbDropHandle.style.display == 'block' ) {\n            let td;\n            if( wptbDropHandle.dataset.text == 'Drop Here' ) {\n                td = wptbDropHandle.getDOMParentElement();\n                td.appendChild( element );\n                WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n            } else {\n                let innerElement = wptbDropHandle.getDOMParentElement();\n                td = innerElement.parentNode;\n\n                if( wptbDropHandle.dataset.text == 'Above Element' ) {\n                    td.insertBefore( element, innerElement );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                } else if( wptbDropHandle.dataset.text == 'Below Element' ) {\n                    let innerElementNext = innerElement.nextSibling;\n                    td.insertBefore( element, innerElementNext );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                }\n            }\n            \n            let thisRow = td.parentNode;\n            if( WPTB_Helper.rowIsTop( thisRow ) ) { \n                let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n                \n                if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                    WPTB_Helper.dataTitleColumnSet( table );\n                }\n            }\n            \n            // start item javascript if item is new\n            let infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n            let elemKind = infArr[1];\n            if ( e.dataTransfer.getData( 'wptbElement' ) && ( elemKind == 'text' || elemKind == 'button' || elemKind == 'image' || elemKind == 'star_rating' || elemKind == 'list' ) ) {\n                //WPTB_Helper.elementStartScript( element );\n            }\n        } else {\n            return;\n        }\n\n        if(wptbDropHandle){\n            wptbDropHandle.style.display = 'none';\n            wptbDropBorderMarker.style.display = 'none';\n        }\n\n        WPTB_innerElementSet( element );\n        \n        if( ! element.classList.contains( 'wptb-image-container' ) || element.classList.contains( 'wptb-moving-mode' ) ) {\n            element.classList.remove( 'wptb-moving-mode' );\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        } \n        return true;\n    }\n    element.onmouseover = function(e) {\n        element.classList.remove( 'wptb-ondragenter' );\n    }\n}","var applyGenericItemSettings = function ( element, kindIndexProt, copy = false ) {\n    var node = element.getDOMElement(),\n        index,\n        copy;\n    if( node.classList.contains( 'wptb-ph-element' ) ) {\n        if ( kindIndexProt == undefined || copy == true ) {\n            //index = document.counter.nextIndex( element.kind );\n            let wptbElements = document.getElementsByClassName( 'wptb-ph-element' );\n            let elementIndexesArr = [];\n            for( let i = 0; i < wptbElements.length; i++ ) {\n                var regex = new RegExp( 'wptb-element-' + element.kind + '-(\\\\d+)', \"i\" );\n                let infArr = wptbElements[i].className.match( regex );\n                if( infArr ) {\n                    elementIndexesArr.push( infArr[1] );\n                }\n            }\n            if( elementIndexesArr.length > 0 ) {\n                let elementIndexMax = Math.max( ...elementIndexesArr );\n                index = elementIndexMax + 1;\n            } else { \n                index = 1;\n            }\n\n            if( copy ) {\n                // change all data-elements which save parameters for different controls\n                let wptbNodeattributes = [...node.attributes];\n                for( let i = 0; i < wptbNodeattributes.length; i++ ) {\n                    if( wptbNodeattributes[i] && typeof wptbNodeattributes[i] === 'object' && wptbNodeattributes[i].nodeName ) {\n                        let regularText = new RegExp( 'data-wptb-el-' + element.kind + '-(\\\\d+)-([a-zA-Z0-9_-]+)', \"i\" );\n                        let attr = wptbNodeattributes[i].nodeName.match( regularText );\n                        if( attr && Array.isArray( attr ) ) {\n                            let newDataAttributeName = wptbNodeattributes[i].nodeName.replace( element.kind + '-' + attr[1], element.kind + '-' + index );\n                            let newDataAttributeValue = wptbNodeattributes[i].nodeValue;\n                            node.removeAttribute( wptbNodeattributes[i].nodeName );\n                            node.setAttribute( newDataAttributeName, newDataAttributeValue );\n                        }\n                    }\n                }\n            }\n        } else if ( kindIndexProt && ! copy ) {\n            let kindIndexProtArr = kindIndexProt.split('-');\n            index = kindIndexProtArr[kindIndexProtArr.length - 1];\n            // start element javascript if element is new\n            \n        }\n\n        let node_wptb_element_kind_num = node.className.match(/wptb-element-(.+)-(\\d+)/i);\n        if ( node_wptb_element_kind_num ) {\n            node.classList.remove( node_wptb_element_kind_num[0] );\n        }\n        if ( ! node.classList.contains( 'wptb-ph-element' ) ) {\n            node.classList.add( 'wptb-ph-element' );\n            if( ! node.classList.contains( 'wptb-element-' + element.kind + '-' + index ) ) {\n                node.classList.add( 'wptb-element-' + element.kind + '-' + index );\n            }\n        } else {\n            if( ! node.classList.contains( 'wptb-element-' + element.kind + '-' + index ) ) {\n                node.classList.add( 'wptb-element-' + element.kind + '-' + index );\n            }\n        }\n        WPTB_Helper.elementStartScript( element.getDOMElement() );\n        new WPTB_ElementOptions( element, index, kindIndexProt );\n        document.counter.increment(element.kind);\n    }\n    \n    node.onmouseenter = function ( event ) {\n        \n        if (event.target.classList.contains( 'wptb-text-container' )) {\n            if (node.children.length === 1) {\n                let elemChild = node.children[0].lastChild;\n                \n                if (elemChild.children.length === 1) {\n                    if (elemChild.innerHTML === '<br>') {\n                        elemChild.innerHTML = '';\n                    }\n                }\n            }\n        }\n        \n        if( event.target.classList.contains( 'wptb-moving-mode' ) ) {\n            return;\n        }\n        \n        let wptbActionsField = new WPTB_ActionsField();\n        \n        wptbActionsField.addActionField( 1, node );\n        \n        wptbActionsField.setParameters( node );\n        \n        node.classList.remove( 'wptb-ondragenter' );\n    };\n    \n    node.onmouseleave = function ( event ) {\n        let wptbActionsField = new WPTB_ActionsField();\n        \n        wptbActionsField.leaveFromField( event, node );\n    };\n};","// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\nparcelRequire = (function (modules, cache, entry, globalName) {\n  // Save the require from previous bundle to this closure if any\n  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;\n  var nodeRequire = typeof require === 'function' && require;\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error('Cannot find module \\'' + name + '\\'');\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = cache[name] = new newRequire.Module(name);\n\n      modules[name][0].call(module.exports, localRequire, module, module.exports, this);\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x){\n      return newRequire(localRequire.resolve(x));\n    }\n\n    function resolve(x){\n      return modules[name][1][x] || x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [function (require, module) {\n      module.exports = exports;\n    }, {}];\n  };\n\n  var error;\n  for (var i = 0; i < entry.length; i++) {\n    try {\n      newRequire(entry[i]);\n    } catch (e) {\n      // Save first error but execute all entries\n      if (!error) {\n        error = e;\n      }\n    }\n  }\n\n  if (entry.length) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(entry[entry.length - 1]);\n\n    // CommonJS\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n      module.exports = mainExports;\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n     define(function () {\n       return mainExports;\n     });\n\n    // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n\n  // Override the current require with this new one\n  parcelRequire = newRequire;\n\n  if (error) {\n    // throw error from earlier, _after updating parcelRequire_\n    throw error;\n  }\n\n  return newRequire;\n})({\"../../../../../node_modules/vuex/dist/vuex.esm.js\":[function(require,module,exports) {\nvar global = arguments[3];\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createLogger = createLogger;\nexports.install = install;\nexports.mapState = exports.mapMutations = exports.mapGetters = exports.mapActions = exports.createNamespacedHelpers = exports.Store = exports.default = void 0;\n\n/*!\n * vuex v3.5.1\n * (c) 2020 Evan You\n * @license MIT\n */\nfunction applyMixin(Vue) {\n  var version = Number(Vue.version.split('.')[0]);\n\n  if (version >= 2) {\n    Vue.mixin({\n      beforeCreate: vuexInit\n    });\n  } else {\n    // override init and inject vuex init procedure\n    // for 1.x backwards compatibility.\n    var _init = Vue.prototype._init;\n\n    Vue.prototype._init = function (options) {\n      if (options === void 0) options = {};\n      options.init = options.init ? [vuexInit].concat(options.init) : vuexInit;\n\n      _init.call(this, options);\n    };\n  }\n  /**\n   * Vuex init hook, injected into each instances init hooks list.\n   */\n\n\n  function vuexInit() {\n    var options = this.$options; // store injection\n\n    if (options.store) {\n      this.$store = typeof options.store === 'function' ? options.store() : options.store;\n    } else if (options.parent && options.parent.$store) {\n      this.$store = options.parent.$store;\n    }\n  }\n}\n\nvar target = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {};\nvar devtoolHook = target.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\nfunction devtoolPlugin(store) {\n  if (!devtoolHook) {\n    return;\n  }\n\n  store._devtoolHook = devtoolHook;\n  devtoolHook.emit('vuex:init', store);\n  devtoolHook.on('vuex:travel-to-state', function (targetState) {\n    store.replaceState(targetState);\n  });\n  store.subscribe(function (mutation, state) {\n    devtoolHook.emit('vuex:mutation', mutation, state);\n  }, {\n    prepend: true\n  });\n  store.subscribeAction(function (action, state) {\n    devtoolHook.emit('vuex:action', action, state);\n  }, {\n    prepend: true\n  });\n}\n/**\n * Get the first item that pass the test\n * by second argument function\n *\n * @param {Array} list\n * @param {Function} f\n * @return {*}\n */\n\n\nfunction find(list, f) {\n  return list.filter(f)[0];\n}\n/**\n * Deep copy the given object considering circular structure.\n * This function caches all nested objects and its copies.\n * If it detects circular structure, use cached copy to avoid infinite loop.\n *\n * @param {*} obj\n * @param {Array<Object>} cache\n * @return {*}\n */\n\n\nfunction deepCopy(obj, cache) {\n  if (cache === void 0) cache = []; // just return if obj is immutable value\n\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  } // if obj is hit, it is in circular structure\n\n\n  var hit = find(cache, function (c) {\n    return c.original === obj;\n  });\n\n  if (hit) {\n    return hit.copy;\n  }\n\n  var copy = Array.isArray(obj) ? [] : {}; // put the copy into cache at first\n  // because we want to refer it in recursive deepCopy\n\n  cache.push({\n    original: obj,\n    copy: copy\n  });\n  Object.keys(obj).forEach(function (key) {\n    copy[key] = deepCopy(obj[key], cache);\n  });\n  return copy;\n}\n/**\n * forEach for object\n */\n\n\nfunction forEachValue(obj, fn) {\n  Object.keys(obj).forEach(function (key) {\n    return fn(obj[key], key);\n  });\n}\n\nfunction isObject(obj) {\n  return obj !== null && typeof obj === 'object';\n}\n\nfunction isPromise(val) {\n  return val && typeof val.then === 'function';\n}\n\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error(\"[vuex] \" + msg);\n  }\n}\n\nfunction partial(fn, arg) {\n  return function () {\n    return fn(arg);\n  };\n} // Base data struct for store's module, package with some attribute and method\n\n\nvar Module = function Module(rawModule, runtime) {\n  this.runtime = runtime; // Store some children item\n\n  this._children = Object.create(null); // Store the origin module object which passed by programmer\n\n  this._rawModule = rawModule;\n  var rawState = rawModule.state; // Store the origin module's state\n\n  this.state = (typeof rawState === 'function' ? rawState() : rawState) || {};\n};\n\nvar prototypeAccessors = {\n  namespaced: {\n    configurable: true\n  }\n};\n\nprototypeAccessors.namespaced.get = function () {\n  return !!this._rawModule.namespaced;\n};\n\nModule.prototype.addChild = function addChild(key, module) {\n  this._children[key] = module;\n};\n\nModule.prototype.removeChild = function removeChild(key) {\n  delete this._children[key];\n};\n\nModule.prototype.getChild = function getChild(key) {\n  return this._children[key];\n};\n\nModule.prototype.hasChild = function hasChild(key) {\n  return key in this._children;\n};\n\nModule.prototype.update = function update(rawModule) {\n  this._rawModule.namespaced = rawModule.namespaced;\n\n  if (rawModule.actions) {\n    this._rawModule.actions = rawModule.actions;\n  }\n\n  if (rawModule.mutations) {\n    this._rawModule.mutations = rawModule.mutations;\n  }\n\n  if (rawModule.getters) {\n    this._rawModule.getters = rawModule.getters;\n  }\n};\n\nModule.prototype.forEachChild = function forEachChild(fn) {\n  forEachValue(this._children, fn);\n};\n\nModule.prototype.forEachGetter = function forEachGetter(fn) {\n  if (this._rawModule.getters) {\n    forEachValue(this._rawModule.getters, fn);\n  }\n};\n\nModule.prototype.forEachAction = function forEachAction(fn) {\n  if (this._rawModule.actions) {\n    forEachValue(this._rawModule.actions, fn);\n  }\n};\n\nModule.prototype.forEachMutation = function forEachMutation(fn) {\n  if (this._rawModule.mutations) {\n    forEachValue(this._rawModule.mutations, fn);\n  }\n};\n\nObject.defineProperties(Module.prototype, prototypeAccessors);\n\nvar ModuleCollection = function ModuleCollection(rawRootModule) {\n  // register root module (Vuex.Store options)\n  this.register([], rawRootModule, false);\n};\n\nModuleCollection.prototype.get = function get(path) {\n  return path.reduce(function (module, key) {\n    return module.getChild(key);\n  }, this.root);\n};\n\nModuleCollection.prototype.getNamespace = function getNamespace(path) {\n  var module = this.root;\n  return path.reduce(function (namespace, key) {\n    module = module.getChild(key);\n    return namespace + (module.namespaced ? key + '/' : '');\n  }, '');\n};\n\nModuleCollection.prototype.update = function update$1(rawRootModule) {\n  update([], this.root, rawRootModule);\n};\n\nModuleCollection.prototype.register = function register(path, rawModule, runtime) {\n  var this$1 = this;\n  if (runtime === void 0) runtime = true;\n\n  if (\"development\" !== 'production') {\n    assertRawModule(path, rawModule);\n  }\n\n  var newModule = new Module(rawModule, runtime);\n\n  if (path.length === 0) {\n    this.root = newModule;\n  } else {\n    var parent = this.get(path.slice(0, -1));\n    parent.addChild(path[path.length - 1], newModule);\n  } // register nested modules\n\n\n  if (rawModule.modules) {\n    forEachValue(rawModule.modules, function (rawChildModule, key) {\n      this$1.register(path.concat(key), rawChildModule, runtime);\n    });\n  }\n};\n\nModuleCollection.prototype.unregister = function unregister(path) {\n  var parent = this.get(path.slice(0, -1));\n  var key = path[path.length - 1];\n  var child = parent.getChild(key);\n\n  if (!child) {\n    if (\"development\" !== 'production') {\n      console.warn(\"[vuex] trying to unregister module '\" + key + \"', which is \" + \"not registered\");\n    }\n\n    return;\n  }\n\n  if (!child.runtime) {\n    return;\n  }\n\n  parent.removeChild(key);\n};\n\nModuleCollection.prototype.isRegistered = function isRegistered(path) {\n  var parent = this.get(path.slice(0, -1));\n  var key = path[path.length - 1];\n  return parent.hasChild(key);\n};\n\nfunction update(path, targetModule, newModule) {\n  if (\"development\" !== 'production') {\n    assertRawModule(path, newModule);\n  } // update target module\n\n\n  targetModule.update(newModule); // update nested modules\n\n  if (newModule.modules) {\n    for (var key in newModule.modules) {\n      if (!targetModule.getChild(key)) {\n        if (\"development\" !== 'production') {\n          console.warn(\"[vuex] trying to add a new module '\" + key + \"' on hot reloading, \" + 'manual reload is needed');\n        }\n\n        return;\n      }\n\n      update(path.concat(key), targetModule.getChild(key), newModule.modules[key]);\n    }\n  }\n}\n\nvar functionAssert = {\n  assert: function (value) {\n    return typeof value === 'function';\n  },\n  expected: 'function'\n};\nvar objectAssert = {\n  assert: function (value) {\n    return typeof value === 'function' || typeof value === 'object' && typeof value.handler === 'function';\n  },\n  expected: 'function or object with \"handler\" function'\n};\nvar assertTypes = {\n  getters: functionAssert,\n  mutations: functionAssert,\n  actions: objectAssert\n};\n\nfunction assertRawModule(path, rawModule) {\n  Object.keys(assertTypes).forEach(function (key) {\n    if (!rawModule[key]) {\n      return;\n    }\n\n    var assertOptions = assertTypes[key];\n    forEachValue(rawModule[key], function (value, type) {\n      assert(assertOptions.assert(value), makeAssertionMessage(path, key, type, value, assertOptions.expected));\n    });\n  });\n}\n\nfunction makeAssertionMessage(path, key, type, value, expected) {\n  var buf = key + \" should be \" + expected + \" but \\\"\" + key + \".\" + type + \"\\\"\";\n\n  if (path.length > 0) {\n    buf += \" in module \\\"\" + path.join('.') + \"\\\"\";\n  }\n\n  buf += \" is \" + JSON.stringify(value) + \".\";\n  return buf;\n}\n\nvar Vue; // bind on install\n\nvar Store = function Store(options) {\n  var this$1 = this;\n  if (options === void 0) options = {}; // Auto install if it is not done yet and `window` has `Vue`.\n  // To allow users to avoid auto-installation in some cases,\n  // this code should be placed here. See #731\n\n  if (!Vue && typeof window !== 'undefined' && window.Vue) {\n    install(window.Vue);\n  }\n\n  if (\"development\" !== 'production') {\n    assert(Vue, \"must call Vue.use(Vuex) before creating a store instance.\");\n    assert(typeof Promise !== 'undefined', \"vuex requires a Promise polyfill in this browser.\");\n    assert(this instanceof Store, \"store must be called with the new operator.\");\n  }\n\n  var plugins = options.plugins;\n  if (plugins === void 0) plugins = [];\n  var strict = options.strict;\n  if (strict === void 0) strict = false; // store internal state\n\n  this._committing = false;\n  this._actions = Object.create(null);\n  this._actionSubscribers = [];\n  this._mutations = Object.create(null);\n  this._wrappedGetters = Object.create(null);\n  this._modules = new ModuleCollection(options);\n  this._modulesNamespaceMap = Object.create(null);\n  this._subscribers = [];\n  this._watcherVM = new Vue();\n  this._makeLocalGettersCache = Object.create(null); // bind commit and dispatch to self\n\n  var store = this;\n  var ref = this;\n  var dispatch = ref.dispatch;\n  var commit = ref.commit;\n\n  this.dispatch = function boundDispatch(type, payload) {\n    return dispatch.call(store, type, payload);\n  };\n\n  this.commit = function boundCommit(type, payload, options) {\n    return commit.call(store, type, payload, options);\n  }; // strict mode\n\n\n  this.strict = strict;\n  var state = this._modules.root.state; // init root module.\n  // this also recursively registers all sub-modules\n  // and collects all module getters inside this._wrappedGetters\n\n  installModule(this, state, [], this._modules.root); // initialize the store vm, which is responsible for the reactivity\n  // (also registers _wrappedGetters as computed properties)\n\n  resetStoreVM(this, state); // apply plugins\n\n  plugins.forEach(function (plugin) {\n    return plugin(this$1);\n  });\n  var useDevtools = options.devtools !== undefined ? options.devtools : Vue.config.devtools;\n\n  if (useDevtools) {\n    devtoolPlugin(this);\n  }\n};\n\nexports.Store = Store;\nvar prototypeAccessors$1 = {\n  state: {\n    configurable: true\n  }\n};\n\nprototypeAccessors$1.state.get = function () {\n  return this._vm._data.$$state;\n};\n\nprototypeAccessors$1.state.set = function (v) {\n  if (\"development\" !== 'production') {\n    assert(false, \"use store.replaceState() to explicit replace store state.\");\n  }\n};\n\nStore.prototype.commit = function commit(_type, _payload, _options) {\n  var this$1 = this; // check object-style commit\n\n  var ref = unifyObjectStyle(_type, _payload, _options);\n  var type = ref.type;\n  var payload = ref.payload;\n  var options = ref.options;\n  var mutation = {\n    type: type,\n    payload: payload\n  };\n  var entry = this._mutations[type];\n\n  if (!entry) {\n    if (\"development\" !== 'production') {\n      console.error(\"[vuex] unknown mutation type: \" + type);\n    }\n\n    return;\n  }\n\n  this._withCommit(function () {\n    entry.forEach(function commitIterator(handler) {\n      handler(payload);\n    });\n  });\n\n  this._subscribers.slice() // shallow copy to prevent iterator invalidation if subscriber synchronously calls unsubscribe\n  .forEach(function (sub) {\n    return sub(mutation, this$1.state);\n  });\n\n  if (\"development\" !== 'production' && options && options.silent) {\n    console.warn(\"[vuex] mutation type: \" + type + \". Silent option has been removed. \" + 'Use the filter functionality in the vue-devtools');\n  }\n};\n\nStore.prototype.dispatch = function dispatch(_type, _payload) {\n  var this$1 = this; // check object-style dispatch\n\n  var ref = unifyObjectStyle(_type, _payload);\n  var type = ref.type;\n  var payload = ref.payload;\n  var action = {\n    type: type,\n    payload: payload\n  };\n  var entry = this._actions[type];\n\n  if (!entry) {\n    if (\"development\" !== 'production') {\n      console.error(\"[vuex] unknown action type: \" + type);\n    }\n\n    return;\n  }\n\n  try {\n    this._actionSubscribers.slice() // shallow copy to prevent iterator invalidation if subscriber synchronously calls unsubscribe\n    .filter(function (sub) {\n      return sub.before;\n    }).forEach(function (sub) {\n      return sub.before(action, this$1.state);\n    });\n  } catch (e) {\n    if (\"development\" !== 'production') {\n      console.warn(\"[vuex] error in before action subscribers: \");\n      console.error(e);\n    }\n  }\n\n  var result = entry.length > 1 ? Promise.all(entry.map(function (handler) {\n    return handler(payload);\n  })) : entry[0](payload);\n  return new Promise(function (resolve, reject) {\n    result.then(function (res) {\n      try {\n        this$1._actionSubscribers.filter(function (sub) {\n          return sub.after;\n        }).forEach(function (sub) {\n          return sub.after(action, this$1.state);\n        });\n      } catch (e) {\n        if (\"development\" !== 'production') {\n          console.warn(\"[vuex] error in after action subscribers: \");\n          console.error(e);\n        }\n      }\n\n      resolve(res);\n    }, function (error) {\n      try {\n        this$1._actionSubscribers.filter(function (sub) {\n          return sub.error;\n        }).forEach(function (sub) {\n          return sub.error(action, this$1.state, error);\n        });\n      } catch (e) {\n        if (\"development\" !== 'production') {\n          console.warn(\"[vuex] error in error action subscribers: \");\n          console.error(e);\n        }\n      }\n\n      reject(error);\n    });\n  });\n};\n\nStore.prototype.subscribe = function subscribe(fn, options) {\n  return genericSubscribe(fn, this._subscribers, options);\n};\n\nStore.prototype.subscribeAction = function subscribeAction(fn, options) {\n  var subs = typeof fn === 'function' ? {\n    before: fn\n  } : fn;\n  return genericSubscribe(subs, this._actionSubscribers, options);\n};\n\nStore.prototype.watch = function watch(getter, cb, options) {\n  var this$1 = this;\n\n  if (\"development\" !== 'production') {\n    assert(typeof getter === 'function', \"store.watch only accepts a function.\");\n  }\n\n  return this._watcherVM.$watch(function () {\n    return getter(this$1.state, this$1.getters);\n  }, cb, options);\n};\n\nStore.prototype.replaceState = function replaceState(state) {\n  var this$1 = this;\n\n  this._withCommit(function () {\n    this$1._vm._data.$$state = state;\n  });\n};\n\nStore.prototype.registerModule = function registerModule(path, rawModule, options) {\n  if (options === void 0) options = {};\n\n  if (typeof path === 'string') {\n    path = [path];\n  }\n\n  if (\"development\" !== 'production') {\n    assert(Array.isArray(path), \"module path must be a string or an Array.\");\n    assert(path.length > 0, 'cannot register the root module by using registerModule.');\n  }\n\n  this._modules.register(path, rawModule);\n\n  installModule(this, this.state, path, this._modules.get(path), options.preserveState); // reset store to update getters...\n\n  resetStoreVM(this, this.state);\n};\n\nStore.prototype.unregisterModule = function unregisterModule(path) {\n  var this$1 = this;\n\n  if (typeof path === 'string') {\n    path = [path];\n  }\n\n  if (\"development\" !== 'production') {\n    assert(Array.isArray(path), \"module path must be a string or an Array.\");\n  }\n\n  this._modules.unregister(path);\n\n  this._withCommit(function () {\n    var parentState = getNestedState(this$1.state, path.slice(0, -1));\n    Vue.delete(parentState, path[path.length - 1]);\n  });\n\n  resetStore(this);\n};\n\nStore.prototype.hasModule = function hasModule(path) {\n  if (typeof path === 'string') {\n    path = [path];\n  }\n\n  if (\"development\" !== 'production') {\n    assert(Array.isArray(path), \"module path must be a string or an Array.\");\n  }\n\n  return this._modules.isRegistered(path);\n};\n\nStore.prototype.hotUpdate = function hotUpdate(newOptions) {\n  this._modules.update(newOptions);\n\n  resetStore(this, true);\n};\n\nStore.prototype._withCommit = function _withCommit(fn) {\n  var committing = this._committing;\n  this._committing = true;\n  fn();\n  this._committing = committing;\n};\n\nObject.defineProperties(Store.prototype, prototypeAccessors$1);\n\nfunction genericSubscribe(fn, subs, options) {\n  if (subs.indexOf(fn) < 0) {\n    options && options.prepend ? subs.unshift(fn) : subs.push(fn);\n  }\n\n  return function () {\n    var i = subs.indexOf(fn);\n\n    if (i > -1) {\n      subs.splice(i, 1);\n    }\n  };\n}\n\nfunction resetStore(store, hot) {\n  store._actions = Object.create(null);\n  store._mutations = Object.create(null);\n  store._wrappedGetters = Object.create(null);\n  store._modulesNamespaceMap = Object.create(null);\n  var state = store.state; // init all modules\n\n  installModule(store, state, [], store._modules.root, true); // reset vm\n\n  resetStoreVM(store, state, hot);\n}\n\nfunction resetStoreVM(store, state, hot) {\n  var oldVm = store._vm; // bind store public getters\n\n  store.getters = {}; // reset local getters cache\n\n  store._makeLocalGettersCache = Object.create(null);\n  var wrappedGetters = store._wrappedGetters;\n  var computed = {};\n  forEachValue(wrappedGetters, function (fn, key) {\n    // use computed to leverage its lazy-caching mechanism\n    // direct inline function use will lead to closure preserving oldVm.\n    // using partial to return function with only arguments preserved in closure environment.\n    computed[key] = partial(fn, store);\n    Object.defineProperty(store.getters, key, {\n      get: function () {\n        return store._vm[key];\n      },\n      enumerable: true // for local getters\n\n    });\n  }); // use a Vue instance to store the state tree\n  // suppress warnings just in case the user has added\n  // some funky global mixins\n\n  var silent = Vue.config.silent;\n  Vue.config.silent = true;\n  store._vm = new Vue({\n    data: {\n      $$state: state\n    },\n    computed: computed\n  });\n  Vue.config.silent = silent; // enable strict mode for new vm\n\n  if (store.strict) {\n    enableStrictMode(store);\n  }\n\n  if (oldVm) {\n    if (hot) {\n      // dispatch changes in all subscribed watchers\n      // to force getter re-evaluation for hot reloading.\n      store._withCommit(function () {\n        oldVm._data.$$state = null;\n      });\n    }\n\n    Vue.nextTick(function () {\n      return oldVm.$destroy();\n    });\n  }\n}\n\nfunction installModule(store, rootState, path, module, hot) {\n  var isRoot = !path.length;\n\n  var namespace = store._modules.getNamespace(path); // register in namespace map\n\n\n  if (module.namespaced) {\n    if (store._modulesNamespaceMap[namespace] && \"development\" !== 'production') {\n      console.error(\"[vuex] duplicate namespace \" + namespace + \" for the namespaced module \" + path.join('/'));\n    }\n\n    store._modulesNamespaceMap[namespace] = module;\n  } // set state\n\n\n  if (!isRoot && !hot) {\n    var parentState = getNestedState(rootState, path.slice(0, -1));\n    var moduleName = path[path.length - 1];\n\n    store._withCommit(function () {\n      if (\"development\" !== 'production') {\n        if (moduleName in parentState) {\n          console.warn(\"[vuex] state field \\\"\" + moduleName + \"\\\" was overridden by a module with the same name at \\\"\" + path.join('.') + \"\\\"\");\n        }\n      }\n\n      Vue.set(parentState, moduleName, module.state);\n    });\n  }\n\n  var local = module.context = makeLocalContext(store, namespace, path);\n  module.forEachMutation(function (mutation, key) {\n    var namespacedType = namespace + key;\n    registerMutation(store, namespacedType, mutation, local);\n  });\n  module.forEachAction(function (action, key) {\n    var type = action.root ? key : namespace + key;\n    var handler = action.handler || action;\n    registerAction(store, type, handler, local);\n  });\n  module.forEachGetter(function (getter, key) {\n    var namespacedType = namespace + key;\n    registerGetter(store, namespacedType, getter, local);\n  });\n  module.forEachChild(function (child, key) {\n    installModule(store, rootState, path.concat(key), child, hot);\n  });\n}\n/**\n * make localized dispatch, commit, getters and state\n * if there is no namespace, just use root ones\n */\n\n\nfunction makeLocalContext(store, namespace, path) {\n  var noNamespace = namespace === '';\n  var local = {\n    dispatch: noNamespace ? store.dispatch : function (_type, _payload, _options) {\n      var args = unifyObjectStyle(_type, _payload, _options);\n      var payload = args.payload;\n      var options = args.options;\n      var type = args.type;\n\n      if (!options || !options.root) {\n        type = namespace + type;\n\n        if (\"development\" !== 'production' && !store._actions[type]) {\n          console.error(\"[vuex] unknown local action type: \" + args.type + \", global type: \" + type);\n          return;\n        }\n      }\n\n      return store.dispatch(type, payload);\n    },\n    commit: noNamespace ? store.commit : function (_type, _payload, _options) {\n      var args = unifyObjectStyle(_type, _payload, _options);\n      var payload = args.payload;\n      var options = args.options;\n      var type = args.type;\n\n      if (!options || !options.root) {\n        type = namespace + type;\n\n        if (\"development\" !== 'production' && !store._mutations[type]) {\n          console.error(\"[vuex] unknown local mutation type: \" + args.type + \", global type: \" + type);\n          return;\n        }\n      }\n\n      store.commit(type, payload, options);\n    }\n  }; // getters and state object must be gotten lazily\n  // because they will be changed by vm update\n\n  Object.defineProperties(local, {\n    getters: {\n      get: noNamespace ? function () {\n        return store.getters;\n      } : function () {\n        return makeLocalGetters(store, namespace);\n      }\n    },\n    state: {\n      get: function () {\n        return getNestedState(store.state, path);\n      }\n    }\n  });\n  return local;\n}\n\nfunction makeLocalGetters(store, namespace) {\n  if (!store._makeLocalGettersCache[namespace]) {\n    var gettersProxy = {};\n    var splitPos = namespace.length;\n    Object.keys(store.getters).forEach(function (type) {\n      // skip if the target getter is not match this namespace\n      if (type.slice(0, splitPos) !== namespace) {\n        return;\n      } // extract local getter type\n\n\n      var localType = type.slice(splitPos); // Add a port to the getters proxy.\n      // Define as getter property because\n      // we do not want to evaluate the getters in this time.\n\n      Object.defineProperty(gettersProxy, localType, {\n        get: function () {\n          return store.getters[type];\n        },\n        enumerable: true\n      });\n    });\n    store._makeLocalGettersCache[namespace] = gettersProxy;\n  }\n\n  return store._makeLocalGettersCache[namespace];\n}\n\nfunction registerMutation(store, type, handler, local) {\n  var entry = store._mutations[type] || (store._mutations[type] = []);\n  entry.push(function wrappedMutationHandler(payload) {\n    handler.call(store, local.state, payload);\n  });\n}\n\nfunction registerAction(store, type, handler, local) {\n  var entry = store._actions[type] || (store._actions[type] = []);\n  entry.push(function wrappedActionHandler(payload) {\n    var res = handler.call(store, {\n      dispatch: local.dispatch,\n      commit: local.commit,\n      getters: local.getters,\n      state: local.state,\n      rootGetters: store.getters,\n      rootState: store.state\n    }, payload);\n\n    if (!isPromise(res)) {\n      res = Promise.resolve(res);\n    }\n\n    if (store._devtoolHook) {\n      return res.catch(function (err) {\n        store._devtoolHook.emit('vuex:error', err);\n\n        throw err;\n      });\n    } else {\n      return res;\n    }\n  });\n}\n\nfunction registerGetter(store, type, rawGetter, local) {\n  if (store._wrappedGetters[type]) {\n    if (\"development\" !== 'production') {\n      console.error(\"[vuex] duplicate getter key: \" + type);\n    }\n\n    return;\n  }\n\n  store._wrappedGetters[type] = function wrappedGetter(store) {\n    return rawGetter(local.state, // local state\n    local.getters, // local getters\n    store.state, // root state\n    store.getters // root getters\n    );\n  };\n}\n\nfunction enableStrictMode(store) {\n  store._vm.$watch(function () {\n    return this._data.$$state;\n  }, function () {\n    if (\"development\" !== 'production') {\n      assert(store._committing, \"do not mutate vuex store state outside mutation handlers.\");\n    }\n  }, {\n    deep: true,\n    sync: true\n  });\n}\n\nfunction getNestedState(state, path) {\n  return path.reduce(function (state, key) {\n    return state[key];\n  }, state);\n}\n\nfunction unifyObjectStyle(type, payload, options) {\n  if (isObject(type) && type.type) {\n    options = payload;\n    payload = type;\n    type = type.type;\n  }\n\n  if (\"development\" !== 'production') {\n    assert(typeof type === 'string', \"expects string as the type, but found \" + typeof type + \".\");\n  }\n\n  return {\n    type: type,\n    payload: payload,\n    options: options\n  };\n}\n\nfunction install(_Vue) {\n  if (Vue && _Vue === Vue) {\n    if (\"development\" !== 'production') {\n      console.error('[vuex] already installed. Vue.use(Vuex) should be called only once.');\n    }\n\n    return;\n  }\n\n  Vue = _Vue;\n  applyMixin(Vue);\n}\n/**\n * Reduce the code which written in Vue.js for getting the state.\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} states # Object's item can be a function which accept state and getters for param, you can do something for state and getters in it.\n * @param {Object}\n */\n\n\nvar mapState = normalizeNamespace(function (namespace, states) {\n  var res = {};\n\n  if (\"development\" !== 'production' && !isValidMap(states)) {\n    console.error('[vuex] mapState: mapper parameter must be either an Array or an Object');\n  }\n\n  normalizeMap(states).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    res[key] = function mappedState() {\n      var state = this.$store.state;\n      var getters = this.$store.getters;\n\n      if (namespace) {\n        var module = getModuleByNamespace(this.$store, 'mapState', namespace);\n\n        if (!module) {\n          return;\n        }\n\n        state = module.context.state;\n        getters = module.context.getters;\n      }\n\n      return typeof val === 'function' ? val.call(this, state, getters) : state[val];\n    }; // mark vuex getter for devtools\n\n\n    res[key].vuex = true;\n  });\n  return res;\n});\n/**\n * Reduce the code which written in Vue.js for committing the mutation\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} mutations # Object's item can be a function which accept `commit` function as the first param, it can accept anthor params. You can commit mutation and do any other things in this function. specially, You need to pass anthor params from the mapped function.\n * @return {Object}\n */\n\nexports.mapState = mapState;\nvar mapMutations = normalizeNamespace(function (namespace, mutations) {\n  var res = {};\n\n  if (\"development\" !== 'production' && !isValidMap(mutations)) {\n    console.error('[vuex] mapMutations: mapper parameter must be either an Array or an Object');\n  }\n\n  normalizeMap(mutations).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    res[key] = function mappedMutation() {\n      var args = [],\n          len = arguments.length;\n\n      while (len--) args[len] = arguments[len]; // Get the commit method from store\n\n\n      var commit = this.$store.commit;\n\n      if (namespace) {\n        var module = getModuleByNamespace(this.$store, 'mapMutations', namespace);\n\n        if (!module) {\n          return;\n        }\n\n        commit = module.context.commit;\n      }\n\n      return typeof val === 'function' ? val.apply(this, [commit].concat(args)) : commit.apply(this.$store, [val].concat(args));\n    };\n  });\n  return res;\n});\n/**\n * Reduce the code which written in Vue.js for getting the getters\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} getters\n * @return {Object}\n */\n\nexports.mapMutations = mapMutations;\nvar mapGetters = normalizeNamespace(function (namespace, getters) {\n  var res = {};\n\n  if (\"development\" !== 'production' && !isValidMap(getters)) {\n    console.error('[vuex] mapGetters: mapper parameter must be either an Array or an Object');\n  }\n\n  normalizeMap(getters).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val; // The namespace has been mutated by normalizeNamespace\n\n    val = namespace + val;\n\n    res[key] = function mappedGetter() {\n      if (namespace && !getModuleByNamespace(this.$store, 'mapGetters', namespace)) {\n        return;\n      }\n\n      if (\"development\" !== 'production' && !(val in this.$store.getters)) {\n        console.error(\"[vuex] unknown getter: \" + val);\n        return;\n      }\n\n      return this.$store.getters[val];\n    }; // mark vuex getter for devtools\n\n\n    res[key].vuex = true;\n  });\n  return res;\n});\n/**\n * Reduce the code which written in Vue.js for dispatch the action\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} actions # Object's item can be a function which accept `dispatch` function as the first param, it can accept anthor params. You can dispatch action and do any other things in this function. specially, You need to pass anthor params from the mapped function.\n * @return {Object}\n */\n\nexports.mapGetters = mapGetters;\nvar mapActions = normalizeNamespace(function (namespace, actions) {\n  var res = {};\n\n  if (\"development\" !== 'production' && !isValidMap(actions)) {\n    console.error('[vuex] mapActions: mapper parameter must be either an Array or an Object');\n  }\n\n  normalizeMap(actions).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    res[key] = function mappedAction() {\n      var args = [],\n          len = arguments.length;\n\n      while (len--) args[len] = arguments[len]; // get dispatch function from store\n\n\n      var dispatch = this.$store.dispatch;\n\n      if (namespace) {\n        var module = getModuleByNamespace(this.$store, 'mapActions', namespace);\n\n        if (!module) {\n          return;\n        }\n\n        dispatch = module.context.dispatch;\n      }\n\n      return typeof val === 'function' ? val.apply(this, [dispatch].concat(args)) : dispatch.apply(this.$store, [val].concat(args));\n    };\n  });\n  return res;\n});\n/**\n * Rebinding namespace param for mapXXX function in special scoped, and return them by simple object\n * @param {String} namespace\n * @return {Object}\n */\n\nexports.mapActions = mapActions;\n\nvar createNamespacedHelpers = function (namespace) {\n  return {\n    mapState: mapState.bind(null, namespace),\n    mapGetters: mapGetters.bind(null, namespace),\n    mapMutations: mapMutations.bind(null, namespace),\n    mapActions: mapActions.bind(null, namespace)\n  };\n};\n/**\n * Normalize the map\n * normalizeMap([1, 2, 3]) => [ { key: 1, val: 1 }, { key: 2, val: 2 }, { key: 3, val: 3 } ]\n * normalizeMap({a: 1, b: 2, c: 3}) => [ { key: 'a', val: 1 }, { key: 'b', val: 2 }, { key: 'c', val: 3 } ]\n * @param {Array|Object} map\n * @return {Object}\n */\n\n\nexports.createNamespacedHelpers = createNamespacedHelpers;\n\nfunction normalizeMap(map) {\n  if (!isValidMap(map)) {\n    return [];\n  }\n\n  return Array.isArray(map) ? map.map(function (key) {\n    return {\n      key: key,\n      val: key\n    };\n  }) : Object.keys(map).map(function (key) {\n    return {\n      key: key,\n      val: map[key]\n    };\n  });\n}\n/**\n * Validate whether given map is valid or not\n * @param {*} map\n * @return {Boolean}\n */\n\n\nfunction isValidMap(map) {\n  return Array.isArray(map) || isObject(map);\n}\n/**\n * Return a function expect two param contains namespace and map. it will normalize the namespace and then the param's function will handle the new namespace and the map.\n * @param {Function} fn\n * @return {Function}\n */\n\n\nfunction normalizeNamespace(fn) {\n  return function (namespace, map) {\n    if (typeof namespace !== 'string') {\n      map = namespace;\n      namespace = '';\n    } else if (namespace.charAt(namespace.length - 1) !== '/') {\n      namespace += '/';\n    }\n\n    return fn(namespace, map);\n  };\n}\n/**\n * Search a special module from store by namespace. if module not exist, print error message.\n * @param {Object} store\n * @param {String} helper\n * @param {String} namespace\n * @return {Object}\n */\n\n\nfunction getModuleByNamespace(store, helper, namespace) {\n  var module = store._modulesNamespaceMap[namespace];\n\n  if (\"development\" !== 'production' && !module) {\n    console.error(\"[vuex] module namespace not found in \" + helper + \"(): \" + namespace);\n  }\n\n  return module;\n} // Credits: borrowed code from fcomb/redux-logger\n\n\nfunction createLogger(ref) {\n  if (ref === void 0) ref = {};\n  var collapsed = ref.collapsed;\n  if (collapsed === void 0) collapsed = true;\n  var filter = ref.filter;\n  if (filter === void 0) filter = function (mutation, stateBefore, stateAfter) {\n    return true;\n  };\n  var transformer = ref.transformer;\n  if (transformer === void 0) transformer = function (state) {\n    return state;\n  };\n  var mutationTransformer = ref.mutationTransformer;\n  if (mutationTransformer === void 0) mutationTransformer = function (mut) {\n    return mut;\n  };\n  var actionFilter = ref.actionFilter;\n  if (actionFilter === void 0) actionFilter = function (action, state) {\n    return true;\n  };\n  var actionTransformer = ref.actionTransformer;\n  if (actionTransformer === void 0) actionTransformer = function (act) {\n    return act;\n  };\n  var logMutations = ref.logMutations;\n  if (logMutations === void 0) logMutations = true;\n  var logActions = ref.logActions;\n  if (logActions === void 0) logActions = true;\n  var logger = ref.logger;\n  if (logger === void 0) logger = console;\n  return function (store) {\n    var prevState = deepCopy(store.state);\n\n    if (typeof logger === 'undefined') {\n      return;\n    }\n\n    if (logMutations) {\n      store.subscribe(function (mutation, state) {\n        var nextState = deepCopy(state);\n\n        if (filter(mutation, prevState, nextState)) {\n          var formattedTime = getFormattedTime();\n          var formattedMutation = mutationTransformer(mutation);\n          var message = \"mutation \" + mutation.type + formattedTime;\n          startMessage(logger, message, collapsed);\n          logger.log('%c prev state', 'color: #9E9E9E; font-weight: bold', transformer(prevState));\n          logger.log('%c mutation', 'color: #03A9F4; font-weight: bold', formattedMutation);\n          logger.log('%c next state', 'color: #4CAF50; font-weight: bold', transformer(nextState));\n          endMessage(logger);\n        }\n\n        prevState = nextState;\n      });\n    }\n\n    if (logActions) {\n      store.subscribeAction(function (action, state) {\n        if (actionFilter(action, state)) {\n          var formattedTime = getFormattedTime();\n          var formattedAction = actionTransformer(action);\n          var message = \"action \" + action.type + formattedTime;\n          startMessage(logger, message, collapsed);\n          logger.log('%c action', 'color: #03A9F4; font-weight: bold', formattedAction);\n          endMessage(logger);\n        }\n      });\n    }\n  };\n}\n\nfunction startMessage(logger, message, collapsed) {\n  var startMessage = collapsed ? logger.groupCollapsed : logger.group; // render\n\n  try {\n    startMessage.call(logger, message);\n  } catch (e) {\n    logger.log(message);\n  }\n}\n\nfunction endMessage(logger) {\n  try {\n    logger.groupEnd();\n  } catch (e) {\n    logger.log('—— log end ——');\n  }\n}\n\nfunction getFormattedTime() {\n  var time = new Date();\n  return \" @ \" + pad(time.getHours(), 2) + \":\" + pad(time.getMinutes(), 2) + \":\" + pad(time.getSeconds(), 2) + \".\" + pad(time.getMilliseconds(), 3);\n}\n\nfunction repeat(str, times) {\n  return new Array(times + 1).join(str);\n}\n\nfunction pad(num, maxLength) {\n  return repeat('0', maxLength - num.toString().length) + num;\n}\n\nvar index = {\n  Store: Store,\n  install: install,\n  version: '3.5.1',\n  mapState: mapState,\n  mapMutations: mapMutations,\n  mapGetters: mapGetters,\n  mapActions: mapActions,\n  createNamespacedHelpers: createNamespacedHelpers,\n  createLogger: createLogger\n};\nvar _default = index;\nexports.default = _default;\n},{}],\"../../../../../node_modules/deepmerge/dist/cjs.js\":[function(require,module,exports) {\n'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n  return isNonNullObject(value) && !isSpecial(value);\n};\n\nfunction isNonNullObject(value) {\n  return !!value && typeof value === 'object';\n}\n\nfunction isSpecial(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);\n} // see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\n\n\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n  return value.$$typeof === REACT_ELEMENT_TYPE;\n}\n\nfunction emptyTarget(val) {\n  return Array.isArray(val) ? [] : {};\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;\n}\n\nfunction defaultArrayMerge(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified(element, options);\n  });\n}\n\nfunction getMergeFunction(key, options) {\n  if (!options.customMerge) {\n    return deepmerge;\n  }\n\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepmerge;\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return target.propertyIsEnumerable(symbol);\n  }) : [];\n}\n\nfunction getKeys(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\n\nfunction propertyIsOnObject(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n} // Protects from prototype poisoning and unexpected merging up the prototype chain.\n\n\nfunction propertyIsUnsafe(target, key) {\n  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n  var destination = {};\n\n  if (options.isMergeableObject(target)) {\n    getKeys(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n    });\n  }\n\n  getKeys(source).forEach(function (key) {\n    if (propertyIsUnsafe(target, key)) {\n      return;\n    }\n\n    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n    }\n  });\n  return destination;\n}\n\nfunction deepmerge(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n  options.isMergeableObject = options.isMergeableObject || isMergeableObject; // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject(target, source, options);\n  }\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n  if (!Array.isArray(array)) {\n    throw new Error('first argument should be an array');\n  }\n\n  return array.reduce(function (prev, next) {\n    return deepmerge(prev, next, options);\n  }, {});\n};\n\nvar deepmerge_1 = deepmerge;\nmodule.exports = deepmerge_1;\n},{}],\"stores/general.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mutationWatchFunction = exports.createBasicStore = exports.objectDeepMerge = void 0;\n\nvar _vuex = _interopRequireDefault(require(\"vuex\"));\n\nvar _deepmerge = _interopRequireDefault(require(\"deepmerge\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Deep merge object.\n *\n * @param {Object} source source object\n * @param {Object} target target object\n * @return {Object} merged object\n */\n// eslint-disable-next-line import/prefer-default-export\nvar objectDeepMerge = function objectDeepMerge(source, target) {\n  // eslint-disable-next-line array-callback-return\n  Object.keys(target).map(function (k) {\n    if (Object.prototype.hasOwnProperty.call(target, k)) {\n      if (Object.prototype.hasOwnProperty.call(source, k)) {\n        if (_typeof(source[k]) === 'object') {\n          // eslint-disable-next-line no-param-reassign\n          source[k] = _objectSpread(_objectSpread({}, source[k]), target[k]);\n        } else {\n          // eslint-disable-next-line no-param-reassign\n          source[k] = target[k];\n        }\n      } else {\n        // eslint-disable-next-line no-param-reassign\n        source[k] = target[k];\n      }\n    }\n  });\n  return source;\n};\n/**\n * Create a basic store with the given store object.\n *\n * @param {Object} defaultStore default store object\n * @param {Object} extraStore extra store object\n * @return {Object} Vuex store\n */\n\n\nexports.objectDeepMerge = objectDeepMerge;\n\nvar createBasicStore = function createBasicStore(defaultStore, extraStore) {\n  return new _vuex.default.Store((0, _deepmerge.default)(defaultStore, extraStore));\n};\n/**\n * Watch function to be used at store event subscriptions.\n *\n * @param {Object} watchList watch list to be used\n * @param {Object} store store object\n * @return {Function} function to be called at action dispatch\n */\n\n\nexports.createBasicStore = createBasicStore;\n\nvar mutationWatchFunction = function mutationWatchFunction(watchList, store) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var payload = args[0];\n\n    if (watchList[payload.type]) {\n      watchList[payload.type].apply(watchList, args.concat([store]));\n    }\n  };\n};\n\nexports.mutationWatchFunction = mutationWatchFunction;\n},{\"vuex\":\"../../../../../node_modules/vuex/dist/vuex.esm.js\",\"deepmerge\":\"../../../../../node_modules/deepmerge/dist/cjs.js\"}],\"WPTB_Store.js\":[function(require,module,exports) {\nvar global = arguments[3];\n\"use strict\";\n\nvar _general = require(\"./stores/general\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Wptb store UMD module.\n */\n(function umd(key, context, factory) {\n  // eslint-disable-next-line no-param-reassign\n  context[key] = factory(); // eslint-disable-next-line no-restricted-globals\n})('WPTB_Store', self || global, function () {\n  /**\n   * Data store for builder.\n   *\n   * @param {Object} extraStoreOptions extra store options to use\n   *\n   * @class\n   */\n  function WptbStore() {\n    var extraStoreOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // default store object that holds base and basic functionality for store object.\n    var store = {};\n    var subscribeList = {}; // merge default store with supplied extra options\n\n    store = (0, _general.objectDeepMerge)(store, extraStoreOptions); // state getter/setter\n\n    Object.defineProperty(this, 'state', {\n      get: function get() {\n        return _objectSpread({}, store.state);\n      },\n      set: function set() {\n        throw new Error('you can not mutate state directly, use mutations instead');\n      }\n    });\n    /**\n     * Call defined getters.\n     *\n     * @param {string} getterName name of getter function\n     */\n\n    this.get = function (getterName) {\n      if (store.getters[getterName]) {\n        return store.getters[getterName](_objectSpread({}, store.state));\n      }\n\n      throw new Error(\"no getter found with the given name of '\".concat(getterName, \"'\"));\n    };\n    /**\n     * Call subscriptions of a mutation.\n     *\n     * @param {string} mutationName mutation name\n     * @param {null | string | number | Object | Array} value mutation value\n     */\n\n\n    var handleSubscription = function handleSubscription(mutationName, value) {\n      if (subscribeList[mutationName]) {\n        subscribeList[mutationName].map(function (callback) {\n          callback(value, store.state);\n        });\n      }\n    };\n    /**\n     * Commit function that will be used at the base level.\n     *\n     * @param {Object} root0 payload object\n     * @param {string} root0.type mutation type\n     * @param {null | string | number | Array | Object} root0.value payload value\n     */\n\n\n    var innerCommit = function innerCommit(_ref) {\n      var type = _ref.type,\n          value = _ref.value;\n      store.mutations[type](store.state, value);\n      handleSubscription(type, value);\n    };\n    /**\n     * Commit a mutation to change store state.\n     *\n     * @param {string} mutationName name of the commit\n     * @param {null | string | number | Array | Object} value value\n     */\n\n\n    this.commit = function (mutationName, value) {\n      if (value !== undefined && mutationName) {\n        innerCommit({\n          type: mutationName,\n          value: value\n        });\n      } else {\n        throw new Error(\"no commit found with the given name of '\".concat(mutationName, \"'\"));\n      }\n    };\n    /**\n     * Subscribe to store mutations.\n     *\n     * @param {string} mutationName mutation name\n     * @param {Function} callback callback function that will be executed after mutation is done.This function will be getting mutation value as first argument and store state as second\n     */\n\n\n    this.subscribe = function (mutationName, callback) {\n      // don't allow any mutation to be on the subscribe list if they are not defined at store\n      if (store.mutations[mutationName]) {\n        // prepare mutation subscribe list\n        if (!subscribeList[mutationName]) {\n          subscribeList[mutationName] = [];\n        }\n\n        subscribeList[mutationName].push(callback);\n      } else {\n        throw new Error(\"no mutation found to subscribe to with the given name of '\".concat(mutationName, \"'\"));\n      }\n    };\n  }\n  /**\n   * App store for builder.\n   *\n   * @type {Object}\n   */\n\n\n  var appStore = {\n    state: {\n      controls: {\n        colorPicker: {\n          activeId: null\n        }\n      }\n    },\n    getters: {\n      getActiveColorPickerId: function getActiveColorPickerId(state) {\n        return state.controls.colorPicker.activeId;\n      }\n    },\n    mutations: {\n      setActiveColorPicker: function setActiveColorPicker(state, id) {\n        // eslint-disable-next-line no-param-reassign\n        state.controls.colorPicker.activeId = id;\n      }\n    }\n  };\n  /** @module WptbStore */\n\n  return new WptbStore(appStore);\n});\n},{\"./stores/general\":\"stores/general.js\"}]},{},[\"WPTB_Store.js\"], null)\n//# sourceMappingURL=/WPTB_Store.js.map"]}