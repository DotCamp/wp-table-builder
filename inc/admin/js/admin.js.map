{"version":3,"sources":["functions.button.js","functions.cell.js","functions.dragndrop.js","functions.image.js","functions.js","functions.list.js","functions.miscellaneous.js","functions.table.js","functions.text.js","wptb-builder.js"],"names":["$","window","deleteButton","event","act","parentNode","el","removeChild","add_Elements_tab","copyButton","td","target","copy","newButton","childNodes","innerHTML","appendChild","showButtonSettings","currentlyDragging","undefined","classList","add","btnDelete","document","createElement","btnCopy","btnMove","actions","previous","i","onclick","onmousedown","putItemDragStart","hideButtonSettings","formerActions","getElementsByClassName","par","remove","text","elButton","elButton2","el_B","onmouseenter","onmouseleave","wptb_num","addElementOptions","tinyMCE","init","inline","plugins","dialog_type","theme","menubar","fixed_toolbar_container","toolbar","setup","ed","on","execCommand","init_instance_callback","editor","e","getContent","setContent","range","selection","getRng","KeyID","keyCode","startOffset","preventDefault","jQuery","selectionWidth","selectionHeight","createCell","cell","allowDrop","currentTarget","type","selectIndividualCell","startCellSelection","onmouseover","goOnWithCellSelection","onmouseup","endCellSelection","selectedCells","length","activeColumn","dataset","xIndex","activeRow","yIndex","undoAllPreviousHighlights","activateIndividualActions","deactivateNoneActions","deactivateGroupActions","highlightRow","highlightColumn","console","log","parseInt","buttons","params","getParameters","tds","trs","getElementsByTagName","j","activateNoneActions","inputs","disabled","activateGroupActions","deactivateIndividualActions","parentRow","columnCount","getElementById","value","classToAdd","ttd","index","rowCount","table","tr","selectMode","push","mergeCells","firstCell","lastCell","colspan","Math","abs","rowspan","p","colSpan","rowSpan","splitCells","getCellByCoords","x","y","makeSelection","startPoint","cel","itemDragStart","contains","dragEl","elementToDrag","cloneNode","style","position","zIndex","left","clientX","top","clientY","width","body","temp","alreadyPut","nextSpace","nextSibling","onmousemove","offsetX","getBoundingClientRect","offsetY","makeSpace","spaceBetween","insertHere","spanInsert","newNode","id","substring","evt","display","onmouseout","trimInlineStyle","newItemProxy","newList","newImage","newText","sp2","sp1","insertBefore","copyImage","srcList","container","listItems","querySelectorAll","showListSettings","hideListSettings","cont","showListItemSettings","hideListItemSettings","tinyFastCall","onkeyup","listItemKeyListener","infArr","className","match","elName","oldClass","oldClassOptionsPanelClass","newOptionsPanel","clone","oldOptionsPanel","querySelector","newClass","newClassOptionsPanelClass","removeClass","addClass","showImageSettings","list","tdContainer","trigger","copyList","append","hideImageSettings","parent","imgWrap","imgBtn","obj","show","hide","previousAct","item","article","content","html","duplicate","newListItem","divdot","divcontent","libullet","key","which","liEl","lastP","dontAddItems","after","focus","trim","inputNumber","min","attr","max","els","dec","prev","inc","next","each","decrement","increment","deleteList","innerElements","elList","el_L","Element_options_tab","children","wptbElement","prop","listener_to_element","find","wpColorPicker","bindKeydownHandler","onkeydown","setTimeout","click","element","data","val","setInterval","old_value","tryToChangeMCEWidth","totalWidth","offsetWidth","currentEditor","scrollTop","bodyElement","right","paste_as_text","previousSibling","initTable","settings","row","insertRow","headerCell","wptbTable","bindClickHandler","$this","el_options","hasClass","parents","optionsClass","sliders","onchange","numbers","is","addRowToTheEnd","addRowToTheStart","addColumnToTheEnd","addColumnToTheStart","deleteRow","deleteColumn","getActualTableDimensions","rows","cols","dimensions","columns","t","tbody","recalculateIndexes","addRow","pos","_this","referenceRow","addRowBefore","addRowAfter","addColumn","referenceTd","newTd","addColumnBefore","addColumnAfter","num","copyText","deleteText","showTextSettings","hideTextSettings","elText","elText2","elP","Array","ready","onready","detect_element_for_property","option","classes","editing_property","css","bullets","listStyleType","toLowerCase","addBorder","border","addCellPadding","tableCells","padding","addInnerBorder","checked","styles","marginBottom","_val","addInnerBorderSize"],"mappings":"AAAA,CAAC,UAAUA,CAAV,EAAa;;AAEVC,WAAOC,YAAP,GAAsB,UAAUC,KAAV,EAAiB;AACnC,YAAIC,MAAM,KAAKC,UAAL,CAAgBA,UAA1B;AAAA,YACIC,KAAKF,IAAIC,UADb;AAEAC,WAAGC,WAAH,CAAeH,GAAf;AACAH,eAAOO,gBAAP;AACH,KALD;;AAOAP,WAAOQ,UAAP,GAAoB,UAAUN,KAAV,EAAiB;AACjC,YAAIO,KAAKP,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAxB,CAAmCA,UAA5C;AAAA,YACIO,OAAOC,UAAUV,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAxB,CAAmCS,UAAnC,CAA8C,CAA9C,EAAiDC,SAA3D,CADX;AAEAL,WAAGM,WAAH,CAAeJ,IAAf;AACH,KAJD;;AAMAX,WAAOgB,kBAAP,GAA4B,UAAUd,KAAV,EAAiB;;AAEzC,YAAGF,OAAOiB,iBAAP,IAA4BC,SAA/B,EAAyC;AACrC;AACH;;AAED,aAAKC,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;AACA,YAAIC,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIE,UAAUH,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAHd;AAAA,YAIII,QAJJ;AAAA,YAIcC,CAJd;AAKAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACAK,gBAAQN,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAkC,gBAAlC,EAAoD,aAApD;AACAC,kBAAUQ,OAAV,GAAoB7B,OAAOC,YAA3B;AACAuB,gBAAQK,OAAR,GAAkB7B,OAAOQ,UAAzB;AACAiB,gBAAQK,WAAR,GAAsB9B,OAAO+B,gBAA7B;AACAL,gBAAQX,WAAR,CAAoBU,OAApB;AACAC,gBAAQX,WAAR,CAAoBS,OAApB;AACAE,gBAAQX,WAAR,CAAoBM,SAApB;AACA,aAAKN,WAAL,CAAiBW,OAAjB;AACH,KAvBD;;AAyBA1B,WAAOgC,kBAAP,GAA4B,UAAU9B,KAAV,EAAiB;AACzC,YAAI+B,gBAAgB,KAAKC,sBAAL,CAA4B,cAA5B,CAApB;AACA,YAAID,iBAAiBA,cAAc,CAAd,CAArB,EAAuC;AACnC,gBAAIE,MAAMF,cAAc,CAAd,EAAiB7B,UAA3B;AACA+B,gBAAI7B,WAAJ,CAAgB2B,cAAc,CAAd,CAAhB;AACH;AACD,aAAKd,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACH,KAPD;;AASApC,WAAOY,SAAP,GAAmB,UAAUyB,IAAV,EAAgB;AAC/B,YAAIC,WAAWhB,SAASC,aAAT,CAAuB,KAAvB,CAAf;AACAe,iBAASnB,SAAT,CAAmBC,GAAnB,CAAuB,uBAAvB;AACA,YAAImB,YAAYjB,SAASC,aAAT,CAAuB,KAAvB,CAAhB;AACAgB,kBAAUpB,SAAV,CAAoBC,GAApB,CAAwB,qBAAxB;AACA,YAAIoB,OAAOlB,SAASC,aAAT,CAAuB,GAAvB,CAAX;AACAiB,aAAKrB,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACAoB,aAAKrB,SAAL,CAAeC,GAAf,CAAmB,UAAnB;AACAoB,aAAK1B,SAAL,GAAiBuB,QAAQnB,SAAR,GAAoBmB,IAApB,GAA2B,aAA5C;AACAE,kBAAUxB,WAAV,CAAsByB,IAAtB;AACAF,iBAASvB,WAAT,CAAqBwB,SAArB;AACAD,iBAASG,YAAT,GAAwBzB,kBAAxB;AACAsB,iBAASI,YAAT,GAAwBV,kBAAxB;AACAM,iBAASnB,SAAT,CAAmBC,GAAnB,CAAuB,iBAAvB,EAA0C,yBACtCpB,OAAO2C,QAAP,CAAgB,QAAhB,CADJ;AAEA3C,eAAO4C,iBAAP,CAAyB,QAAzB,EAAmCN,QAAnC;AACAtC,eAAO2C,QAAP,CAAgB,QAAhB;AACAE,gBAAQC,IAAR,CAAa;AACTpC,oBAAQ8B,IADC;AAETO,oBAAQ,IAFC;AAGTC,qBAAS,MAHA;AAITC,yBAAa,OAJJ;AAKTC,mBAAO,QALE;AAMTC,qBAAS,KANA;AAOTC,qCAAyB,qBAPhB;AAQTC,qBAAS,2BARA;AASTC,mBAAO,eAAUC,EAAV,EAAc;AACjBA,mBAAGC,EAAH,CAAM,MAAN,EACI,UAAUD,EAAV,EAAc;AACVV,4BAAQY,WAAR,CAAoB,YAApB;AACH,iBAHL;AAKH,aAfQ;AAgBTC,oCAAwB,gCAAUC,MAAV,EAAkB;AACtCA,uBAAOH,EAAP,CAAU,QAAV,EAAoB,UAAUI,CAAV,EAAa;AAC7B;AACA,wBAAID,OAAOE,UAAP,MAAuB,EAA3B,EAA+B;AAC3BF,+BAAOG,UAAP,CAAkB,wCAAlB;AACH;AACJ,iBALD;AAMAH,uBAAOH,EAAP,CAAU,SAAV,EAAqB,UAAUI,CAAV,EAAa;AAC9B,wBAAIG,QAAQJ,OAAOK,SAAP,CAAiBC,MAAjB,EAAZ;AACA,wBAAIC,QAAQN,EAAEO,OAAd;AACA,wBAAIJ,MAAMK,WAAN,IAAqB,CAArB,KAA2BF,SAAS,CAAT,IAAcA,SAAS,EAAlD,CAAJ,EAA2D;AACvDN,0BAAES,cAAF;AACAV,+BAAOG,UAAP,CAAkB,6BAAlB;AACH;AACJ,iBAPD;AAQH;AA/BQ,SAAb;;AAkCA,eAAOxB,QAAP;AACH,KApDD;AAsDH,CAvGD,EAuGGgC,MAvGH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAOuE,cAAP,GAAwB,CAAxB;AACAvE,WAAOwE,eAAP,GAAuB,CAAvB;;AAEAxE,WAAOyE,UAAP,GAAoB,YAAU;AAC1B,YAAIC,OAAOpD,SAASC,aAAT,CAAuB,IAAvB,CAAX;AAAA,YACIoD,YAAY,SAAZA,SAAY,CAAUzE,KAAV,EAAiB;AACrBA,kBAAMQ,MAAN,CAAaS,SAAb,CAAuBC,GAAvB,CAA2B,iBAA3B;AACAlB,kBAAM0E,aAAN,CAAoBzD,SAApB,CAA8BC,GAA9B,CAAkC,iBAAlC;AACA,gBAAIlB,MAAM2E,IAAN,IAAc,UAAlB,EAA8B;AAC1B;AACA3E,sBAAMmE,cAAN;AACA,uBAAO,IAAP;AACH;AACJ,SATT;AAUAK,aAAKvD,SAAL,CAAeC,GAAf,CAAmB,gBAAnB,EAAqC,WAArC;;AAEAsD,aAAK7C,OAAL,GAAeiD,oBAAf;AACAJ,aAAK5C,WAAL,GAAmBiD,kBAAnB;AACAL,aAAKM,WAAL,GAAmBC,qBAAnB;AACAP,aAAKQ,SAAL,GAAiBC,gBAAjB;AACA,eAAOT,IAAP;AACH,KAlBD;;AAoBA1E,WAAO8E,oBAAP,GAA8B,YAAU;;AAEpC,aAAK,IAAIlD,IAAI,CAAb,EAAgBA,IAAIwD,cAAcC,MAAlC,EAA0CzD,GAA1C,EAA+C;AAC3CwD,0BAAcxD,CAAd,EAAiBT,SAAjB,CAA2BiB,MAA3B,CAAkC,aAAlC;AACH;;AAEDpC,eAAOoF,aAAP,GAAuB,CAAC,IAAD,CAAvB;AACApF,eAAOsF,YAAP,GAAsB,KAAKC,OAAL,CAAaC,MAAnC;AACAxF,eAAOyF,SAAP,GAAmB,KAAKF,OAAL,CAAaG,MAAhC;AACAC;AACAC;AACAC;AACAC;AACAC,qBAAa,IAAb;AACAC,wBAAgB,IAAhB;AACA,aAAK7E,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACA6E,gBAAQC,GAAR,CAAY,QAAZ,EAAqBC,SAAS,KAAKZ,OAAL,CAAaC,MAAtB,CAArB,EAAqDW,SAAS,KAAKZ,OAAL,CAAaG,MAAtB,CAArD;AACAO,gBAAQC,GAAR,CAAY,IAAZ;AACA,YAAIE,UAAU9E,SAASY,sBAAT,CAAgC,sBAAhC,CAAd;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIwE,QAAQf,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCwE,oBAAQxE,CAAR,EAAW2D,OAAX,CAAmBC,MAAnB,GAA4B,KAAKD,OAAL,CAAaC,MAAzC;AACAY,oBAAQxE,CAAR,EAAW2D,OAAX,CAAmBG,MAAnB,GAA4B,KAAKH,OAAL,CAAaG,MAAzC;AACH;AACJ,KAvBD;;AAyBA1F,WAAO2F,yBAAP,GAAmC,YAAU;AACzC,YAAIU,SAASrG,OAAOsG,aAAP,EAAb;AAAA,YAAoCC,GAApC;AACA,aAAK,IAAI3E,IAAI,CAAb,EAAgBA,IAAIyE,OAAOG,GAAP,CAAWnB,MAA/B,EAAuCzD,GAAvC,EAA4C;AACxC2E,kBAAMF,OAAOG,GAAP,CAAW5E,CAAX,EAAc6E,oBAAd,CAAmC,IAAnC,CAAN;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,IAAIlB,MAAxB,EAAgCqB,GAAhC,EAAqC;AACjCH,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,aAAxB;AACAmE,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,uBAAxB;AACAmE,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,uBAAxB;AACAmE,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,sBAAxB;AACAmE,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,0BAAxB;AACAmE,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,0BAAxB;AACAmE,oBAAIG,CAAJ,EAAOvF,SAAP,CAAiBiB,MAAjB,CAAwB,yBAAxB;AACH;AACJ;AACDpC,eAAOoF,aAAP,GAAuB,EAAvB;AACH,KAfD;;AAiBApF,WAAO2G,mBAAP,GAA6B,YAAU;;AAEnC,YAAIC,SAAStF,SAASY,sBAAT,CAAgC,MAAhC,CAAb;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIgF,OAAOvB,MAA3B,EAAmCzD,GAAnC,EAAwC;AACpCgF,mBAAOhF,CAAP,EAAUiF,QAAV,GAAmB,KAAnB;AACH;AACJ,KAND;;AAQA7G,WAAO6F,qBAAP,GAA+B,YAAU;;AAErC,YAAIe,SAAStF,SAASY,sBAAT,CAAgC,MAAhC,CAAb;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIgF,OAAOvB,MAA3B,EAAmCzD,GAAnC,EAAwC;AACpCgF,mBAAOhF,CAAP,EAAUiF,QAAV,GAAmB,IAAnB;AACH;AACJ,KAND;;AAQA7G,WAAO4F,yBAAP,GAAmC,YAAU;;AAEzC,YAAIgB,SAAStF,SAASY,sBAAT,CAAgC,YAAhC,CAAb;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIgF,OAAOvB,MAA3B,EAAmCzD,GAAnC,EAAwC;AACpCgF,mBAAOhF,CAAP,EAAUiF,QAAV,GAAmB,KAAnB;AACH;AAEJ,KAPD;;AASA7G,WAAO8F,sBAAP,GAAgC,YAAU;;AAEtC,YAAIc,SAAStF,SAASY,sBAAT,CAAgC,OAAhC,CAAb;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIgF,OAAOvB,MAA3B,EAAmCzD,GAAnC,EAAwC;AACpCgF,mBAAOhF,CAAP,EAAUiF,QAAV,GAAmB,IAAnB;AACH;AACJ,KAND;;AAQA7G,WAAO8G,oBAAP,GAA8B,YAAU;;AAEpC,YAAIF,SAAStF,SAASY,sBAAT,CAAgC,OAAhC,CAAb;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIgF,OAAOvB,MAA3B,EAAmCzD,GAAnC,EAAwC;AACpCgF,mBAAOhF,CAAP,EAAUiF,QAAV,GAAmB,KAAnB;AACH;AACJ,KAND;;AAQA7G,WAAO+G,2BAAP,GAAqC,YAAU;;AAE3C,YAAIH,SAAStF,SAASY,sBAAT,CAAgC,YAAhC,CAAb;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIgF,OAAOvB,MAA3B,EAAmCzD,GAAnC,EAAwC;AACpCgF,mBAAOhF,CAAP,EAAUiF,QAAV,GAAmB,IAAnB;AACH;AACJ,KAND;;AAQA7G,WAAO+F,YAAP,GAAsB,UAAStF,EAAT,EAAY;AAC9B,YAAIuG,YAAYvG,GAAGL,UAAnB;AAAA,YACI6G,cAAcd,SAAS7E,SAAS4F,cAAT,CAAwB,qBAAxB,EAA+CC,KAAxD,CADlB;AAEI,aAAK,IAAIvF,IAAI,CAAb,EAAgBA,IAAIqF,WAApB,EAAiCrF,GAAjC,EAAsC;AAClC,gBAAIwF,aAAcxF,KAAK,CAAL,GAAS,uBAAT,GACDA,KAAKqF,cAAY,CAAjB,GAAqB,sBAArB,GACK,uBAFtB;AAGA,gBAAII,MAAML,UAAUP,oBAAV,CAA+B,IAA/B,EAAqC7E,CAArC,CAAV;AACA,gBAAGyF,QAAM5G,EAAT,EAAY;AACZ4G,oBAAIlG,SAAJ,CAAcC,GAAd,CAAkBgG,UAAlB;AACC;AACJ;AACR,KAZD;;AAcApH,WAAOgG,eAAP,GAAyB,UAASvF,EAAT,EAAY;;AAEjC,YAAI6G,KAAJ;AAAA,YACIN,YAAYvG,GAAGL,UADnB;AAEI6G,sBAAcd,SAAS7E,SAAS4F,cAAT,CAAwB,qBAAxB,EAA+CC,KAAxD,CAAd,EACAI,WAAWpB,SAAS7E,SAAS4F,cAAT,CAAwB,kBAAxB,EAA4CC,KAArD,CADX,EAEAK,QAAQlG,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAFR;AAGA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIqF,WAApB,EAAiCrF,GAAjC,EAAsC;AAClC,gBAAGoF,UAAUP,oBAAV,CAA+B,IAA/B,EAAqC7E,CAArC,MAA4CnB,EAA/C,EAAmD;AAC/C6G,wBAAQ1F,CAAR;AACA;AACH;AACJ;;AAED,aAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAI2F,QAApB,EAA8B3F,GAA9B,EAAmC;AAC/B,gBAAIwF,aAAcxF,KAAK,CAAL,GAAS,0BAAT,GACDA,KAAK2F,WAAS,CAAd,GAAkB,yBAAlB,GACK,0BAFtB;AAGA,gBAAIE,KAAKD,MAAMf,oBAAN,CAA2B,IAA3B,EAAiC7E,CAAjC,CAAT;AACA,gBAAG6F,GAAGhB,oBAAH,CAAwB,IAAxB,EAA8Ba,KAA9B,MAAuC7G,EAA1C,EAA6C;AACzCgH,mBAAGhB,oBAAH,CAAwB,IAAxB,EAA8Ba,KAA9B,EAAqCnG,SAArC,CAA+CC,GAA/C,CAAmDgG,UAAnD;AACH;AACJ;AACR,KAvBD;;AAyBApH,WAAO+E,kBAAP,GAA4B,YAAU;AAClC,aAAK5D,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACApB,eAAO0H,UAAP,GAAoB,IAApB;AACA1H,eAAOoF,aAAP,CAAqBuC,IAArB,CAA0B,IAA1B;AACH,KAJD;;AAMA3H,WAAOiF,qBAAP,GAA+B,YAAU;AACrC,YAAGjF,OAAO0H,UAAV,EAAqB;AACrB,iBAAKvG,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACApB,mBAAOoF,aAAP,CAAqBuC,IAArB,CAA0B,IAA1B;AACC;AACJ,KALD;;AAOA3H,WAAOmF,gBAAP,GAA0B,YAAU;AAChCnF,eAAO0H,UAAP,GAAoB,KAApB;AACAZ;AACAC;AACAlB;AACH,KALD;;AAOA7F,WAAO4H,UAAP,GAAoB,YAAY;AAC5B,YAAIC,YAAY7H,OAAOoF,aAAP,CAAqB,CAArB,CAAhB;AAAA,YACI0C,WAAW9H,OAAOoF,aAAP,CAAqBpF,OAAOoF,aAAP,CAAqBC,MAArB,GAA4B,CAAjD,CADf;AAAA,YAEI0C,UAAUC,KAAKC,GAAL,CAASH,SAASvC,OAAT,CAAiBC,MAAjB,GAA0BqC,UAAUtC,OAAV,CAAkBC,MAArD,IAA+D,CAF7E;AAAA,YAGI0C,UAAUF,KAAKC,GAAL,CAASH,SAASvC,OAAT,CAAiBG,MAAjB,GAA0BmC,UAAUtC,OAAV,CAAkBG,MAArD,IAA+D,CAH7E;;AAKA,aAAK,IAAI9D,IAAI,CAAb,EAAgBA,IAAI5B,OAAOoF,aAAP,CAAqBC,MAAzC,EAAiDzD,GAAjD,EAAsD;AAClD,gBAAIuG,IAAInI,OAAOoF,aAAP,CAAqBxD,CAArB,EAAwBxB,UAAhC;AACA+H,cAAE7H,WAAF,CAAcN,OAAOoF,aAAP,CAAqBxD,CAArB,CAAd;AACA,mBAAO5B,OAAOoF,aAAP,CAAqBxD,CAArB,CAAP;AACH;;AAED,YAAImG,UAAU,CAAd,EAAiB;AACbF,sBAAUO,OAAV,GAAoBL,OAApB;AACH;;AAED,YAAIG,UAAU,CAAd,EAAiB;AACbL,sBAAUQ,OAAV,GAAoBH,OAApB;AACH;AACJ,KAnBD;;AAqBAlI,WAAOsI,UAAP,GAAoB,YAAU,CAE7B,CAFD;;AAIA;;;;;;;;AAQAtI,WAAOuI,eAAP,GAAyB,UAASC,CAAT,EAAWC,CAAX,EAAa;AAClC,eAAOnH,SACNY,sBADM,CACiB,oBADjB,EACuC,CADvC,EAENuE,oBAFM,CAEe,IAFf,EAEqBgC,CAFrB,EAGNhC,oBAHM,CAGe,IAHf,EAGqB+B,CAHrB,CAAP;AAIH,KALD;;AAOA;;;;;;;AAOAxI,WAAO0I,aAAP,GAAuB,UAASC,UAAT,EAAoB;AACvC,YAAIjE,IAAJ;;AAEAiB;;AAEAP,wBAAgB,EAAhB;;AAEAA,sBAAcuC,IAAd,CAAmBjD,IAAnB;;AAEA,aAAK,IAAI9C,IAAI,CAAb,EAAgBA,IAAI4C,eAApB,EAAqC5C,GAArC,EAA0C;AACtC,iBAAK,IAAI8E,IAAI,CAAb,EAAgBA,IAAInC,cAApB,EAAoCmC,GAApC,EAAyC;AACrChC,uBAAO6D,gBAAgBpC,SAASwC,WAAWpD,OAAX,CAAmBC,MAA5B,IAAsCkB,CAAtD,EAAyDP,SAASwC,WAAWpD,OAAX,CAAmBG,MAA5B,IAAsC9D,CAA/F,CAAP;AACA,oBAAG8C,KAAK0D,OAAL,IAAiB1D,KAAK0D,OAAL,GAAe,CAAnC,EAAqC;AACjC1B,yBAAKkC,IAAIR,OAAJ,GAAc,CAAnB,CADiC,CACZ;AACxB;AACD1D,qBAAKvD,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACAgE,8BAAcuC,IAAd,CAAmBjD,IAAnB;AACH;AACJ;AACJ,KAnBD;AAqBH,CAnPD,EAmPGJ,MAnPH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEV;;AAEAC,WAAO6I,aAAP,GAAuB,UAAS3I,KAAT,EAAgB;;AAEnCA,cAAMmE,cAAN;;AAEA,YAAK,CAAEnE,MAAMQ,MAAN,CAAaS,SAAb,CAAuB2H,QAAvB,CAAgC,0BAAhC,CAAP,EAAsE;AAC1D;AACH;;AAET,YAAIC,SAAS7I,MAAMQ,MAAnB;;AAEA,eAAM,CAAEqI,OAAO5H,SAAP,CAAiB2H,QAAjB,CAA0B,cAA1B,CAAR,EAAkD;AAC9CC,qBAASA,OAAO3I,UAAhB;AACH;;AAGDJ,eAAOiB,iBAAP,GAA2B,IAA3B;AACAjB,eAAOgJ,aAAP,GAAuBD,OAAOE,SAAP,CAAiB,IAAjB,CAAvB;AACAjJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BC,QAA3B,GAAoC,UAApC;AACAnJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BE,MAA3B,GAAoC,QAApC;AACApJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BG,IAA3B,GAAkCnJ,MAAMoJ,OAAN,GAAc,IAAhD;AACAtJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BK,GAA3B,GAAiCrJ,MAAMsJ,OAAN,GAAc,IAA/C;AACAxJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BO,KAA3B,GAAmC,MAAnC;AACAzJ,eAAOgJ,aAAP,CAAqB7H,SAArB,CAA+BiB,MAA/B,CAAsC,0BAAtC;AACApC,eAAOgJ,aAAP,CAAqB7H,SAArB,CAA+BC,GAA/B,CAAmC,gBAAnC;AACAE,iBAASoI,IAAT,CAAcvI,SAAd,CAAwBC,GAAxB,CAA4B,qBAA5B;AACAE,iBAASoI,IAAT,CAAc3I,WAAd,CAA0Bf,OAAOgJ,aAAjC;AACD;;;;AAKF,KA/BD;;AAiCAhJ,WAAO+B,gBAAP,GAA0B,YAAU;AAChC,YAAI4H,OAAO,IAAX;;AAEA,eAAM,CAACA,KAAKxI,SAAL,CAAe2H,QAAf,CAAwB,iBAAxB,CAAP,EAAkD;AAC9Ca,mBAAOA,KAAKvJ,UAAZ;AACH;;AAEDJ,eAAO4J,UAAP,GAAoB,IAApB;AACA5J,eAAOiB,iBAAP,GAA2B,IAA3B;AACAjB,eAAOgJ,aAAP,GAAuBW,IAAvB;AACA3J,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BC,QAA3B,GAAoC,UAApC;AACAnJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BE,MAA3B,GAAoC,QAApC;AACApJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BG,IAA3B,GAAkCnJ,MAAMoJ,OAAN,GAAc,IAAhD;AACAtJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BK,GAA3B,GAAiCrJ,MAAMsJ,OAAN,GAAc,IAA/C;AACAxJ,eAAOgJ,aAAP,CAAqBE,KAArB,CAA2BO,KAA3B,GAAmC,MAAnC;AACAnI,iBAASoI,IAAT,CAAcvI,SAAd,CAAwBC,GAAxB,CAA4B,qBAA5B;AACApB,eAAO6J,SAAP,GAAmBF,KAAKG,WAAxB;AACH,KAjBD;;AAmBA;;;;;;AAMI9J,WAAO+J,WAAP,GAAqB,UAAS7J,KAAT,EAAe;AACpCA,cAAMmE,cAAN;;AAGA,YAAGrE,OAAOiB,iBAAP,KAA6BC,SAAhC,EAA2C;AACvC;AACH;AACD,YAAGlB,OAAO4J,UAAV,EAAqB;AACjB,gBAAII,UAAU1I,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyD+H,qBAAzD,GAAiFzB,CAA/F;AAAA,gBACI0B,UAAU5I,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyD+H,qBAAzD,GAAiFxB,CAD/F;;AAGAzI,mBAAOgJ,aAAP,CAAqBE,KAArB,CAA2BG,IAA3B,GAAmCnJ,MAAMoJ,OAAN,GAAgBU,OAAhB,GAA0B,EAA3B,GAA+B,IAAjE;AACAhK,mBAAOgJ,aAAP,CAAqBE,KAArB,CAA2BK,GAA3B,GAAkCrJ,MAAMsJ,OAAN,GAAgBU,OAAhB,GAA0B,EAA3B,GAA+B,IAAhE;AACH,SAND,MAOI;AACAlK,mBAAOgJ,aAAP,CAAqBE,KAArB,CAA2BG,IAA3B,GAAkCnJ,MAAMoJ,OAAN,GAAc,IAAhD;AACAtJ,mBAAOgJ,aAAP,CAAqBE,KAArB,CAA2BK,GAA3B,GAAiCrJ,MAAMsJ,OAAN,GAAc,IAA/C;AACH;AACJ,KAlBG;;AAoBJxJ,WAAOmK,SAAP,GAAmB,YAAU;AACzB,YAAIC,eAAe9I,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AAAA,YACgB8I,aAAa/I,SAASC,aAAT,CAAuB,KAAvB,CAD7B;AAAA,YAEgB+I,aAAahJ,SAASC,aAAT,CAAuB,MAAvB,CAF7B;AAAA,YAGgBgJ,OAHhB;AAAA,YAGyBlK,KAAIL,OAAOgJ,aAAP,CAAqBwB,EAArB,CAAwBC,SAAxB,CAAkC,CAAlC,EACzBzK,OAAOgJ,aAAP,CAAqBwB,EAArB,CAAwBnF,MADC,CAH7B;;AAMY+E,qBAAapF,WAAb,GAA2B,UAAS0F,GAAT,EAAa;AACpC,gBAAG1K,OAAOiB,iBAAV,EACA,KAAKJ,UAAL,CAAgB,CAAhB,EAAmBqI,KAAnB,CAAyByB,OAAzB,GAAmC,OAAnC;AACH,SAHD;;AAKAP,qBAAaQ,UAAb,GAA0B,UAASF,GAAT,EAAa;AACnC,iBAAK7J,UAAL,CAAgB,CAAhB,EAAmBqI,KAAnB,CAAyByB,OAAzB,GAAmC,MAAnC;AACH,SAFD;;AAIAL,mBAAWxJ,SAAX,GAAuB,aAAvB;AACAsJ,qBAAajJ,SAAb,CAAuBC,GAAvB,CAA2B,oBAA3B;AACAiJ,mBAAWlJ,SAAX,CAAqBC,GAArB,CAAyB,kBAAzB;AACAgJ,qBAAarJ,WAAb,CAAyBsJ,UAAzB;AACAA,mBAAWtJ,WAAX,CAAuBuJ,UAAvB;AACZ,eAAOF,YAAP;AACH,KAtBD;;AAwBA;;;;;;AAMApK,WAAO6K,eAAP,GAAyB,UAASxK,EAAT,EAAY;AACjCA,WAAG6I,KAAH,CAASK,GAAT,GAAa,MAAb;AACAlJ,WAAG6I,KAAH,CAASG,IAAT,GAAc,MAAd;AACAhJ,WAAG6I,KAAH,CAASC,QAAT,GAAkB,UAAlB;AACA9I,WAAG6I,KAAH,CAASO,KAAT,GAAe,MAAf;AACApJ,WAAG6I,KAAH,CAASE,MAAT,GAAgB,MAAhB;AACH,KAND;;AAQA;;;;;;;AAOApJ,WAAO8K,YAAP,GAAsB,UAASzK,EAAT,EAAY;AAC9B,YAAGA,MAAM,MAAT,EAAgB;AACR,mBAAOL,OAAO+K,OAAP,EAAP;AACH,SAFL,MAGS,IAAG1K,MAAM,OAAT,EAAiB;AAClB,mBAAOL,OAAOgL,QAAP,EAAP;AACH,SAFI,MAGA,IAAG3K,MAAM,MAAT,EAAgB;AACjB,mBAAOL,OAAOiL,OAAP,EAAP;AACH,SAFI,MAGA,IAAG5K,MAAM,QAAT,EAAkB;AACnB,mBAAOL,OAAOY,SAAP,EAAP;AACH;AACR,KAbD;;AAeA;;;;;AAKIZ,WAAOkF,SAAP,GAAmB,UAAShF,KAAT,EAAe;;AAE9B;;AAEJ,YAAGF,OAAOiB,iBAAP,IAA4BC,SAA/B,EAA0C;AACtC;AACH;;AAED,YAAIiH,IAAInI,OAAOgJ,aAAP,CAAqB5I,UAA7B;;AAEA;;AAEA,YAAI,CAAEF,MAAMQ,MAAN,CAAaS,SAAb,CAAuB2H,QAAvB,CAAgC,gBAAhC,CAAF,IACG,CAAE5I,MAAMQ,MAAN,CAAaS,SAAb,CAAuB2H,QAAvB,CAAgC,oBAAhC,CADL,IAEG,CAAE5I,MAAMQ,MAAN,CAAaS,SAAb,CAAuB2H,QAAvB,CAAgC,kBAAhC,CAFT,EAE8D;AAC1D9I,mBAAOiB,iBAAP,GAA2BC,SAA3B;;AAEA,gBAAG0I,cAAc1I,SAAjB,EAA2B;AACvBiH,kBAAE7H,WAAF,CAAcN,OAAOgJ,aAArB;AACH,aAFD,MAGI;AACAhJ,uBAAO6K,eAAP,CAAuB7K,OAAOgJ,aAA9B;AACAY,6BAAa1I,SAAb;AACH;;AAEDlB,mBAAOgJ,aAAP,GAAuB9H,SAAvB;AACAI,qBAASoI,IAAT,CAAcvI,SAAd,CAAwBiB,MAAxB,CAA+B,qBAA/B;AACA;AACH;;AAED;;AAEA,YAAGlC,MAAMQ,MAAN,CAAaS,SAAb,CAAuB2H,QAAvB,CAAgC,gBAAhC,CAAH,EAAqD;;AAEjD,gBAAIoC,MAAMlL,OAAOmK,SAAP,EAAV;;AAEAlE,oBAAQC,GAAR,CAAY,kCAAZ;;AAEA,gBAAGhG,MAAMQ,MAAN,CAAaI,SAAb,IAAwB,EAA3B,EAA8B;AAC1B,oBAAIqK,MAAMnL,OAAOmK,SAAP,EAAV;AACAjK,sBAAMQ,MAAN,CAAaK,WAAb,CAAyBoK,GAAzB;AACH;;AAED,gBAAGnL,OAAO4J,UAAP,IAAqB1I,SAAxB,EACA;AACI,oBAAIqJ,UAAUvK,OAAO8K,YAAP,CAAoB9K,OAAOgJ,aAAP,CAAqBwB,EAArB,CAAwBC,SAAxB,CAAkC,CAAlC,EAC1BzK,OAAOgJ,aAAP,CAAqBwB,EAArB,CAAwBnF,MADE,CAApB,CAAd;AAEAnF,sBAAMQ,MAAN,CAAaK,WAAb,CAAyBwJ,OAAzB;AACArK,sBAAMQ,MAAN,CAAaK,WAAb,CAAyBmK,GAAzB;AACA/C,kBAAE7H,WAAF,CAAcN,OAAOgJ,aAArB;AACA/C,wBAAQC,GAAR,CAAY,0CAAZ;AACH,aARD,MAWA;AACID,wBAAQC,GAAR,CAAY,4BAAZ;AACAlG,uBAAO6K,eAAP,CAAuB7K,OAAOgJ,aAA9B;AACA9I,sBAAMQ,MAAN,CAAaK,WAAb,CAAyBf,OAAOgJ,aAAhC;AACA9I,sBAAMQ,MAAN,CAAaK,WAAb,CAAyBmK,GAAzB;;AAEA,oBAAGlL,OAAO6J,SAAP,IAAoB3I,SAAvB,EAAiC;AAC7B,wBAAIiH,IAAInI,OAAO6J,SAAP,CAAiBzJ,UAAzB;AACA+H,sBAAE7H,WAAF,CAAcN,OAAO6J,SAArB;AACA7J,2BAAO6J,SAAP,GAAmB3I,SAAnB;AACH;AACJ;AAEJ,SAnCD,MAoCI;AAAE;AACF+E,oBAAQC,GAAR,CAAY,iCAAZ;;AAEA,gBAAIiC,IAAIjI,MAAMQ,MAAN,CAAaN,UAAb,CAAwB0J,WAAhC;AAAA,gBACIrJ,KAAKP,MAAMQ,MADf;;AAGI,mBAAM,CAACD,GAAGU,SAAH,CAAa2H,QAAb,CAAsB,gBAAtB,CAAP,EAA+C;AAC3CrI,qBAAKA,GAAGL,UAAR;AACH;;AAEL,gBAAGJ,OAAO4J,UAAP,IAAqB1I,SAAxB,EACA;AACA,oBAAIqJ,UAAUvK,OAAO8K,YAAP,CAAoB9K,OAAOgJ,aAAP,CAAqBwB,EAArB,CAAwBC,SAAxB,CAAkC,CAAlC,EACtBzK,OAAOgJ,aAAP,CAAqBwB,EAArB,CAAwBnF,MADF,CAApB,CAAd;;AAKA,oBAAG8C,KAAK,IAAR,EAAa;AACT1H,uBAAGM,WAAH,CAAewJ,OAAf;AACA9J,uBAAGM,WAAH,CAAef,OAAOmK,SAAP,EAAf;AACH,iBAHD,MAII;AACA1J,uBAAG2K,YAAH,CAAgBb,OAAhB,EAAwBpC,CAAxB;AACA1H,uBAAG2K,YAAH,CAAgBpL,OAAOmK,SAAP,EAAhB,EAAmChC,CAAnC;AACH;AACD7G,yBAASoI,IAAT,CAAcpJ,WAAd,CAA0BN,OAAOgJ,aAAjC;;AAEA/C,wBAAQC,GAAR,CAAY,0CAAZ;AAEC,aAnBD,MAsBA;AACAD,wBAAQC,GAAR,CAAY,4BAAZ;;AAEA,oBAAGiC,KAAK,IAAR,EAAa;AACT1H,uBAAGM,WAAH,CAAef,OAAOgJ,aAAtB;AACAvI,uBAAGM,WAAH,CAAef,OAAOmK,SAAP,EAAf;AACH,iBAHD,MAII;AACA1J,uBAAG2K,YAAH,CAAgBpL,OAAOgJ,aAAvB,EAAqCb,CAArC;AACA1H,uBAAG2K,YAAH,CAAgBpL,OAAOmK,SAAP,EAAhB,EAAmChC,CAAnC;AACH;AACDnI,uBAAO6K,eAAP,CAAuB7K,OAAOgJ,aAA9B;;AAEI,oBAAGhJ,OAAO6J,SAAP,IAAoB3I,SAAvB,EAAiC;AAC7B,wBAAIiH,IAAInI,OAAO6J,SAAP,CAAiBzJ,UAAzB;AACA+H,sBAAE7H,WAAF,CAAcN,OAAO6J,SAArB;AACA7J,2BAAO6J,SAAP,GAAmB3I,SAAnB;AACH;AAEJ;AAEJ;;AAGD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CIlB,eAAO4J,UAAP,GAAoB1I,SAApB;AACAI,iBAASoI,IAAT,CAAcvI,SAAd,CAAwBiB,MAAxB,CAA+B,qBAA/B;AACApC,eAAOiB,iBAAP,GAA2BC,SAA3B;AACAlB,eAAOgJ,aAAP,GAAuB9H,SAAvB;AACP,KA1KG;AA4KP,CA/TD,EA+TGoD,MA/TH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAOqL,SAAP,GAAmB,UAAUnL,KAAV,EAAiB;AAChC,YAAIoL,UAAUpL,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAtC;AAAA,YACI2K,UAAUO,QAAQrC,SAAR,CAAkB,IAAlB,CADd;AAAA,YAEIsC,YAAYD,QAAQlL,UAFxB;AAAA,YAGIoL,YAAYT,QAAQU,gBAAR,CAAyB,SAAzB,CAHhB;AAIAV,gBAAQtI,YAAR,GAAuBiJ,gBAAvB;AACAX,gBAAQrI,YAAR,GAAuBiJ,gBAAvB;AACA,aAAK,IAAI/J,IAAI4J,UAAUnG,MAAV,GAAmB,CAAhC,EAAmCzD,KAAK,CAAxC,EAA2CA,GAA3C,EAAgD;AAC5C,gBAAIgK,OAAOJ,UAAU5J,CAAV,EAAaM,sBAAb,CAAoC,wBAApC,EAA8D,CAA9D,CAAX;AACAsJ,sBAAU5J,CAAV,EAAaa,YAAb,GAA4BoJ,oBAA5B;AACAL,sBAAU5J,CAAV,EAAac,YAAb,GAA4BoJ,oBAA5B;AACAF,iBAAKpB,EAAL,GAAU,EAAV;AACAuB,yBAAaH,IAAb;AACAA,iBAAKI,OAAL,GAAeC,mBAAf;AACH;;AAED,YAAIC,SAASnB,QAAQoB,SAAR,CAAkBC,KAAlB,CAAwB,0BAAxB,CAAb;AAAA,YACIC,SAASH,OAAO,CAAP,CADb;AAAA,YAEII,WAAWJ,OAAO,CAAP,CAFf;AAAA,YAGIK,4BAA4B,kBAAkBF,MAAlB,GAA2B,GAA3B,GAAiCH,OAAO,CAAP,CAHjE;;AAKA,YAAIM,kBAAkBzM,EAAE,MAAMwM,yBAAR,EAAmCE,KAAnC,CAAyC,IAAzC,EAA+C,IAA/C,CAAtB;AAAA,YACIC,kBAAkBpL,SAASqL,aAAT,CAAuB,MAAMJ,yBAA7B,CADtB;AAEAG,wBAAgBtM,UAAhB,CAA2BW,WAA3B,CAAuCyL,gBAAgB,CAAhB,CAAvC;;AAEA,YAAII,WAAW,kBAAkBP,MAAlB,GAA2B,GAA3B,GAAiC1J,SAAS,MAAT,CAAhD;AACA,YAAIkK,4BAA4B,kBAAkBR,MAAlB,GAA2B,GAA3B,GAAiC1J,SAAS,MAAT,CAAjE;;AAEAoI,gBAAQ5J,SAAR,CAAkBC,GAAlB,CAAsBwL,QAAtB;AACA7B,gBAAQ5J,SAAR,CAAkBiB,MAAlB,CAAyBkK,QAAzB;;AAEAE,wBAAgBM,WAAhB,CAA4BP,yBAA5B;AACAC,wBAAgBO,QAAhB,CAAyBF,yBAAzB;;AAEAlK,iBAAS,MAAT;;AAEA4I,kBAAUxK,WAAV,CAAsBgK,OAAtB;AACH,KArCD;;AAuCA/K,WAAOgN,iBAAP,GAA2B,UAAU9M,KAAV,EAAiB;AACxC,YAAImB,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGII,QAHJ;AAAA,YAGcC,CAHd;AAIAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACA,eAAOE,SAASY,sBAAT,CAAgC,cAAhC,CAAP;AACAP,mBAAWL,SAASY,sBAAT,CAAgC,sBAAhC,CAAX;AACA,aAAKN,IAAI,CAAT,EAAYA,IAAID,SAAS0D,MAAzB,EAAiCzD,GAAjC,EAAsC;AAClCD,qBAASC,CAAT,EAAYT,SAAZ,CAAsBiB,MAAtB,CAA6B,sBAA7B;AACH;AACD,aAAKjB,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;;AAEAC,kBAAUQ,OAAV,GAAoB,YAAY;AAC5B,gBAAIoL,OAAO,KAAK7M,UAAL,CAAgBA,UAA3B;AAAA,gBACI8M,cAAcD,KAAK7M,UADvB;AAEAL,cAAE,iBAAF,EAAqBoN,OAArB,CAA6B,OAA7B;AACAD,wBAAY5M,WAAZ,CAAwB2M,IAAxB;AACH,SALD;AAMAzL,gBAAQK,OAAR,GAAkBuL,QAAlB;;AAEA1L,gBAAQ2L,MAAR,CAAe7L,OAAf,EAAwBH,SAAxB;AACA,aAAKgM,MAAL,CAAY3L,OAAZ;AACH,KAzBD;;AA2BA1B,WAAOsN,iBAAP,GAA2B,UAAUpN,KAAV,EAAiB;AACxC,aAAKiB,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACA,YAAIV,UAAU,KAAKQ,sBAAL,CAA4B,cAA5B,EAA4C,CAA5C,CAAd;AACA,YAAIR,WAAWR,SAAf,EAA0B;AACtB,gBAAIqM,SAAS7L,QAAQtB,UAArB;AACAmN,mBAAOjN,WAAP,CAAmBoB,OAAnB;AACH;AACJ,KAPD;;AASA1B,WAAOgL,QAAP,GAAkB,UAAU3I,IAAV,EAAgB;AAC9B,YAAImL,UAAUlM,SAASC,aAAT,CAAuB,KAAvB,CAAd;AACAiM,gBAAQrM,SAAR,CAAkBC,GAAlB,CAAsB,kBAAtB;AACA,YAAIqM,SAASnM,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAkM,eAAOtM,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACAqM,eAAOtM,SAAP,CAAiBC,GAAjB,CAAqB,cAArB;AACAqM,eAAO3M,SAAP,GAAmBuB,QAAQnB,SAAR,GAAoBmB,IAApB,GAA2B,cAA9C;AACAmL,gBAAQzM,WAAR,CAAoB0M,MAApB;AACA,eAAOD,OAAP;AACH,KATD;AAWH,CAxFD,EAwFGlJ,MAxFH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAO+L,YAAP,GAAsB,UAAU2B,GAAV,EAAe;AACjC7K,gBAAQC,IAAR,CAAa;AACTpC,oBAAQgN,GADC;AAET3K,oBAAQ,IAFC;AAGTC,qBAAS,MAHA;AAITC,yBAAa,OAJJ;AAKTC,mBAAO,QALE;AAMTC,qBAAS,KANA;AAOTC,qCAAyB,qBAPhB;AAQTC,qBAAS;AARA,SAAb;AAUH,KAXD;;AAaArD,WAAOoN,QAAP,GAAkB,UAAUlN,KAAV,EAAiB;AAC/B,YAAIoL,UAAUpL,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAtC;AAAA,YACI2K,UAAUO,QAAQrC,SAAR,CAAkB,IAAlB,CADd;AAAA,YAEIsC,YAAYD,QAAQlL,UAFxB;AAAA,YAGIoL,YAAYT,QAAQU,gBAAR,CAAyB,SAAzB,CAHhB;AAIAV,gBAAQtI,YAAR,GAAuBiJ,gBAAvB;AACAX,gBAAQrI,YAAR,GAAuBiJ,gBAAvB;AACA,aAAK,IAAI/J,IAAI4J,UAAUnG,MAAV,GAAmB,CAAhC,EAAmCzD,KAAK,CAAxC,EAA2CA,GAA3C,EAAgD;AAC5C,gBAAIgK,OAAOJ,UAAU5J,CAAV,EAAaM,sBAAb,CAAoC,wBAApC,EAA8D,CAA9D,CAAX;AACA+D,oBAAQC,GAAR,CAAY0F,IAAZ;AACAJ,sBAAU5J,CAAV,EAAaa,YAAb,GAA4BoJ,oBAA5B;AACAL,sBAAU5J,CAAV,EAAac,YAAb,GAA4BoJ,oBAA5B;AACAF,iBAAKpB,EAAL,GAAU,EAAV;AACAuB,yBAAaH,IAAb;AACAA,iBAAKI,OAAL,GAAeC,mBAAf;AACH;;AAGD,YAAIC,SAASnB,QAAQoB,SAAR,CAAkBC,KAAlB,CAAwB,0BAAxB,CAAb;AAAA,YACIC,SAASH,OAAO,CAAP,CADb;AAAA,YAEII,WAAWJ,OAAO,CAAP,CAFf;AAAA,YAGIK,4BAA4B,kBAAkBF,MAAlB,GAA2B,GAA3B,GAAiCH,OAAO,CAAP,CAHjE;;AAKA,YAAIM,kBAAkBzM,EAAE,MAAMwM,yBAAR,EAAmCE,KAAnC,CAAyC,IAAzC,EAA+C,IAA/C,CAAtB;AAAA,YACIC,kBAAkBpL,SAASqL,aAAT,CAAuB,MAAMJ,yBAA7B,CADtB;AAEAG,wBAAgBtM,UAAhB,CAA2BW,WAA3B,CAAuCyL,gBAAgB,CAAhB,CAAvC;;AAEA,YAAII,WAAW,kBAAkBP,MAAlB,GAA2B,GAA3B,GAAiC1J,SAAS,MAAT,CAAhD;AACA,YAAIkK,4BAA4B,kBAAkBR,MAAlB,GAA2B,GAA3B,GAAiC1J,SAAS,MAAT,CAAjE;;AAEAoI,gBAAQ5J,SAAR,CAAkBC,GAAlB,CAAsBwL,QAAtB;AACA7B,gBAAQ5J,SAAR,CAAkBiB,MAAlB,CAAyBkK,QAAzB;;AAEAE,wBAAgBM,WAAhB,CAA4BP,yBAA5B;AACAC,wBAAgBO,QAAhB,CAAyBF,yBAAzB;;AAEAlK,iBAAS,MAAT;;AAEA4I,kBAAUxK,WAAV,CAAsBgK,OAAtB;AACH,KAvCD;;AAyCA/K,WAAO0L,gBAAP,GAA0B,UAAUxL,KAAV,EAAiB;AACvC,YAAImB,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGII,QAHJ;AAAA,YAGcC,CAHd;AAIAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAM,gBAAQZ,SAAR,GAAoB,cAApB;AACAO,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACA,eAAOE,SAASY,sBAAT,CAAgC,cAAhC,CAAP;AACAP,mBAAWL,SAASY,sBAAT,CAAgC,sBAAhC,CAAX;AACA,aAAKN,IAAI,CAAT,EAAYA,IAAID,SAAS0D,MAAzB,EAAiCzD,GAAjC,EAAsC;AAClCD,qBAASC,CAAT,EAAYT,SAAZ,CAAsBiB,MAAtB,CAA6B,sBAA7B;AACH;AACD,aAAKjB,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;;AAEAC,kBAAUQ,OAAV,GAAoB,YAAY;AAC5B,gBAAIoL,OAAO,KAAK7M,UAAL,CAAgBA,UAA3B;AAAA,gBACI8M,cAAcD,KAAK7M,UADvB;AAEA8M,wBAAY5M,WAAZ,CAAwB2M,IAAxB;;AAEAlN,cAAE,8BAAF,EAAkC+M,WAAlC,CAA8C,QAA9C;AACA/M,cAAE,0BAAF,EAA8BgN,QAA9B,CAAuC,QAAvC;;AAEAhN,cAAE,0BAAF,EAA8B4N,IAA9B;AACA5N,cAAE,wBAAF,EAA4B4N,IAA5B;AACA5N,cAAE,wBAAF,EAA4B6N,IAA5B;AACH,SAXD;AAYApM,gBAAQK,OAAR,GAAkBuL,QAAlB;;AAEA1L,gBAAQ2L,MAAR,CAAe7L,OAAf,EAAwBH,SAAxB;AACA,aAAKgM,MAAL,CAAY3L,OAAZ;AACH,KAhCD;;AAkCA1B,WAAO2L,gBAAP,GAA0B,UAAUzL,KAAV,EAAiB;AACvC,aAAKiB,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACA,YAAIV,UAAU,KAAKQ,sBAAL,CAA4B,cAA5B,EAA4C,CAA5C,CAAd;AACA,YAAIR,WAAWR,SAAf,EAA0B;AACtB,gBAAIqM,SAAS7L,QAAQtB,UAArB;AACAmN,mBAAOjN,WAAP,CAAmBoB,OAAnB;AACH;AACJ,KAPD;;AASA1B,WAAO6L,oBAAP,GAA8B,UAAU3L,KAAV,EAAiB;AAC3C,YAAImB,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGII,QAHJ;AAAA,YAGcC,CAHd;AAIAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAM,gBAAQZ,SAAR,GAAoB,cAApB;AACAO,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;;AAEAyM,sBAAcvM,SAASY,sBAAT,CAAgC,cAAhC,CAAd;AACA,aAAKN,IAAI,CAAT,EAAYA,IAAIiM,YAAYxI,MAA5B,EAAoCzD,GAApC,EAAyC;AACrC,gBAAIO,MAAM0L,YAAYjM,CAAZ,EAAexB,UAAzB;AACA+B,gBAAI7B,WAAJ,CAAgBuN,YAAYjM,CAAZ,CAAhB;AACH;;AAEDD,mBAAWL,SAASY,sBAAT,CAAgC,sBAAhC,CAAX;AACA,aAAKN,IAAI,CAAT,EAAYA,IAAID,SAAS0D,MAAzB,EAAiCzD,GAAjC,EAAsC;AAClCD,qBAASC,CAAT,EAAYT,SAAZ,CAAsBiB,MAAtB,CAA6B,sBAA7B;AACH;AACD,aAAKjB,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;;AAEAC,kBAAUQ,OAAV,GAAoB,YAAY;AAC5B,gBAAIiM,OAAO,KAAK1N,UAAL,CAAgBA,UAA3B;AAAA,gBACImN,SAASO,KAAK1N,UADlB;AAEAmN,mBAAOjN,WAAP,CAAmBwN,IAAnB;AACH,SAJD;;AAMAtM,gBAAQK,OAAR,GAAkB,UAAU3B,KAAV,EAAiB;AAC/B,gBAAI6N,UAAU7N,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAtC;AAAA,gBACI4N,UAAUD,QAAQpB,aAAR,CAAsB,yBAAtB,CADd;AAAA,gBAEIsB,OAAOD,QAAQlN,SAFnB;AAGA,gBAAIoN,YAAYC,YAAYF,IAAZ,CAAhB;AACAF,oBAAQ3N,UAAR,CAAmBW,WAAnB,CAA+BmN,SAA/B;AACH,SAND;;AAQAxM,gBAAQ2L,MAAR,CAAe7L,OAAf,EAAwBH,SAAxB;AACA,aAAKjB,UAAL,CAAgBW,WAAhB,CAA4BW,OAA5B;AAEH,KAvCD;;AAyCA1B,WAAO8L,oBAAP,GAA8B,UAAU5L,KAAV,EAAiB;AAC3C,aAAKiB,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACA,YAAIV,UAAU,KAAKiL,aAAL,CAAmB,eAAnB,CAAd;AACA,YAAIjL,WAAWR,SAAf,EAA0B;AACtB,gBAAIqM,SAAS7L,QAAQtB,UAArB;AACAmN,mBAAOjN,WAAP,CAAmBoB,OAAnB;AACH;AACJ,KAPD;;AASA1B,WAAOmO,WAAP,GAAqB,UAAU9L,IAAV,EAAgB;AACjC,YAAIA,QAAQnB,SAAZ,EAAuBmB,OAAO,eAAP;AACvB,YAAI6L,YAAY5M,SAASC,aAAT,CAAuB,SAAvB,CAAhB;AACA,YAAI6M,SAAS9M,SAASC,aAAT,CAAuB,KAAvB,CAAb;AAAA,YACI8M,aAAa/M,SAASC,aAAT,CAAuB,KAAvB,CADjB;AAAA,YAEI+M,WAAWhN,SAASC,aAAT,CAAuB,IAAvB,CAFf;AAGA6M,eAAOjN,SAAP,CAAiBC,GAAjB,CAAqB,0BAArB;AACAiN,mBAAWlN,SAAX,CAAqBC,GAArB,CAAyB,wBAAzB;AACAkN,iBAASnN,SAAT,CAAmBC,GAAnB,CAAuB,aAAvB;AACA8M,kBAAUnN,WAAV,CAAsBqN,MAAtB;AACAF,kBAAUnN,WAAV,CAAsBsN,UAAtB;AACAD,eAAOrN,WAAP,CAAmBuN,QAAnB;AACAD,mBAAWvN,SAAX,GAAuBuB,IAAvB;AACA0J,qBAAasC,UAAb;AACAA,mBAAWrC,OAAX,GAAqBhM,OAAOiM,mBAA5B;AACAoC,mBAAW5L,YAAX,GAA0B,UAAUvC,KAAV,EAAiB;AACvC,gBAAIyB,WAAWL,SAASY,sBAAT,CAAgC,sBAAhC,CAAf;AACA,iBAAKN,IAAI,CAAT,EAAYA,IAAID,SAAS0D,MAAzB,EAAiCzD,GAAjC,EAAsC;AAClCD,yBAASC,CAAT,EAAYT,SAAZ,CAAsBiB,MAAtB,CAA6B,sBAA7B;AACH;AACD,iBAAKjB,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;AACH,SAND;AAOAiN,mBAAW3L,YAAX,GAA0B,UAAUxC,KAAV,EAAiB;AACvC,iBAAKiB,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACH,SAFD;AAGAiM,mBAAW5L,YAAX,GAA0BoJ,oBAA1B;AACAwC,mBAAW3L,YAAX,GAA0BoJ,oBAA1B;AACA,eAAOoC,SAAP;AACH,KA5BD;;AA8BAlO,WAAOiM,mBAAP,GAA6B,UAAU/L,KAAV,EAAiB;AAC1C,YAAIqO,MAAOrO,MAAMsO,KAAN,IAAetN,SAAhB,GAA6BhB,MAAMsO,KAAnC,GACJtO,MAAMiE,OADZ;AAAA,YAEIsK,OAAO1O,EAAE,IAAF,EAAQwN,MAAR,EAFX;AAAA,YAGIW,SAHJ;AAAA,YAGeQ,KAHf;AAIA,YAAIH,QAAQ,EAAR,IACHvO,OAAO2O,YAAP,KAAwBzN,SAAxB,IAAqClB,OAAO2O,YAAP,KAAwB,IAD9D,EACqE;AACjE;AACH;AACDzO,cAAMmE,cAAN;AACA6J,oBAAYC,aAAZ;AACAM,aAAKG,KAAL,CAAWV,SAAX;AACAA,kBAAUvB,aAAV,CAAwB,yBAAxB,EAAmDkC,KAAnD;;AAEAH,gBAAQ,KAAK7N,UAAL,CAAgB,KAAKA,UAAL,CAAgBwE,MAAhB,GAAyB,CAAzC,CAAR;AACA,aAAK/E,WAAL,CAAiBoO,KAAjB;AACA,YAAI,KAAK5N,SAAL,CAAegO,IAAf,MAAyB,gCAA7B,EAA+D;AAC3D,iBAAKhO,SAAL,GAAiB,eAAjB;AACH;AACD,eAAO,KAAP;AACH,KApBD;;AAsBAd,WAAO+O,WAAP,GAAqB,UAAU1O,EAAV,EAAc;;AAE/B,YAAI2O,MAAM3O,GAAG4O,IAAH,CAAQ,KAAR,KAAkB,KAA5B;AACA,YAAIC,MAAM7O,GAAG4O,IAAH,CAAQ,KAAR,KAAkB,KAA5B;;AAEA,YAAIE,MAAM,EAAV;;AAEAA,YAAIC,GAAJ,GAAU/O,GAAGgP,IAAH,EAAV;AACAF,YAAIG,GAAJ,GAAUjP,GAAGkP,IAAH,EAAV;;AAEAlP,WAAGmP,IAAH,CAAQ,YAAY;AAChB1M,iBAAK,IAAL;AACH,SAFD;;AAIA,iBAASA,IAAT,CAAczC,EAAd,EAAkB;;AAEd8O,gBAAIC,GAAJ,CAAQ,CAAR,EAAWvN,OAAX,GAAqB4N,SAArB;AACAN,gBAAIG,GAAJ,CAAQ,CAAR,EAAWzN,OAAX,GAAqB6N,SAArB;;AAEAP,gBAAIC,GAAJ,CAAQtN,WAAR,GAAqB,UAAU8B,CAAV,EAAa;AAC9BA,kBAAES,cAAF;AACH,aAFD;;AAIA8K,gBAAIG,GAAJ,CAAQxN,WAAR,GAAsB,UAAU8B,CAAV,EAAa;AAC/BA,kBAAES,cAAF;AACH,aAFD;;AAIA,qBAASoL,SAAT,GAAqB;AACjB,oBAAItI,QAAQ9G,GAAG8G,KAAf;AACAA;AACA,oBAAI,CAAC6H,GAAD,IAAQ7H,SAAS6H,GAArB,EAA0B;AACtB3O,uBAAG8G,KAAH,GAAWA,KAAX;AACH;AACJ;;AAED,qBAASuI,SAAT,GAAqB;AACjB,oBAAIvI,QAAQ9G,GAAG8G,KAAf;AACAA;AACA,oBAAI,CAAC+H,GAAD,IAAQ/H,SAAS+H,GAArB,EAA0B;AACtB7O,uBAAG8G,KAAH,GAAWA,OAAX;AACH;AACJ;AACJ;AACJ,KA3CD;AA4CH,CArPD,EAqPG7C,MArPH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAOoN,QAAP,GAAkB,UAAUlN,KAAV,EAAiB;AAC/B,YAAIO,KAAKP,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAxB,CAAmCA,UAA5C;AAAA,YACIuJ,OAAO,EADX;AAAA,YAEI2B,UAAUpL,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAxB,CAAmCqL,gBAAnC,CAAoD,oCAApD,CAFd;;AAIA,aAAK,IAAI7J,IAAI,CAAb,EAAgBA,IAAI0J,QAAQjG,MAA5B,EAAoCzD,GAApC,EAAyC;AACrC+H,iBAAKhC,IAAL,CAAU2D,QAAQ1J,CAAR,EAAWd,SAArB;AACH;AACD,YAAIH,OAAOoK,QAAQpB,IAAR,CAAX;AACAlJ,WAAGM,WAAH,CAAeJ,IAAf;AACH,KAVD;;AAYAX,WAAO2P,UAAP,GAAoB,YAAY;AAC5B,YAAIxP,MAAM,KAAKC,UAAL,CAAgBA,UAA1B;AAAA,YACIC,KAAKF,IAAIC,UADb;AAEAC,WAAGC,WAAH,CAAeH,GAAf;AACAH,eAAOO,gBAAP;AACH,KALD;;AAOAP,WAAO0L,gBAAP,GAA0B,UAAUxL,KAAV,EAAiB;;AAEvC,YAAGF,OAAOiB,iBAAP,IAA4BC,SAA/B,EAAyC;AACrC;AACH;;AAED,aAAKC,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;AACA,YAAIC,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIE,UAAUH,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAHd;AAAA,YAIII,QAJJ;AAAA,YAIcC,CAJd;AAKAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACAK,gBAAQN,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAkC,gBAAlC,EAAoD,aAApD;AACAC,kBAAUQ,OAAV,GAAoB7B,OAAO2P,UAA3B;AACAnO,gBAAQK,OAAR,GAAkB7B,OAAOoN,QAAzB;AACA3L,gBAAQK,WAAR,GAAsB9B,OAAO+B,gBAA7B;AACAL,gBAAQX,WAAR,CAAoBU,OAApB;AACAC,gBAAQX,WAAR,CAAoBS,OAApB;AACAE,gBAAQX,WAAR,CAAoBM,SAApB;AACA,aAAKN,WAAL,CAAiBW,OAAjB;AACH,KAvBD;;AAyBA1B,WAAO2L,gBAAP,GAA0B,UAAUzL,KAAV,EAAiB;AACvC,aAAKiB,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACA,YAAIV,UAAU,KAAKiL,aAAL,CAAmB,eAAnB,CAAd;AACA,YAAIjL,WAAWR,SAAf,EAA0B;AACtB,gBAAIqM,SAAS7L,QAAQtB,UAArB;AACAmN,mBAAOjN,WAAP,CAAmBoB,OAAnB;AACH;AACJ,KAPD;;AASA1B,WAAO6L,oBAAP,GAA8B,UAAU3L,KAAV,EAAiB;;AAE3C,YAAGF,OAAOiB,iBAAP,IAA4BC,SAA/B,EAAyC;AACrC;AACH;AACD;AACA,YAAIG,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGII,QAHJ;AAAA,YAGcC,CAHd;AAIAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACA,aAAKD,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;;AAEAC,kBAAUQ,OAAV,GAAoB,YAAY;AAC5B,gBAAIiM,OAAO,KAAK1N,UAAL,CAAgBA,UAA3B;AAAA,gBACImN,SAASO,KAAK1N,UADlB;AAEAmN,mBAAOjN,WAAP,CAAmBwN,IAAnB;AACH,SAJD;;AAMAtM,gBAAQK,OAAR,GAAkB,UAAU3B,KAAV,EAAiB;AAC/B,gBAAI6N,UAAU7N,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAtC;AAAA,gBACI4N,UAAUD,QAAQpB,aAAR,CAAsB,yBAAtB,CADd;AAAA,gBAEIsB,OAAOD,QAAQlN,SAFnB;AAGA,gBAAIoN,YAAYC,YAAYF,IAAZ,CAAhB;AACAF,oBAAQ3N,UAAR,CAAmBW,WAAnB,CAA+BmN,SAA/B;AACH,SAND;;AAQAxM,gBAAQ2L,MAAR,CAAe7L,OAAf,EAAwBH,SAAxB;AACA,aAAKN,WAAL,CAAiBW,OAAjB;AACH,KA/BD;;AAiCA1B,WAAO8L,oBAAP,GAA8B,UAAU5L,KAAV,EAAiB;AAC3C,aAAKiB,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AACA,YAAIV,UAAU,KAAKtB,UAAL,CAAgBuM,aAAhB,CAA8B,eAA9B,CAAd;AACA,YAAIjL,WAAWR,SAAf,EAA0B;AACtB,gBAAIqM,SAAS7L,QAAQtB,UAArB;AACAmN,mBAAOjN,WAAP,CAAmBoB,OAAnB;AACH;AACJ,KAPD;;AASA1B,WAAO+K,OAAP,GAAiB,UAAU6E,aAAV,EAAyB;AACtC,YAAIC,SAASvO,SAASC,aAAT,CAAuB,KAAvB,CAAb;AACA;AACA,YAAIuO,OAAOxO,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA,YAAI,CAACqO,aAAL,EACI,KAAK,IAAIhO,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxBkO,iBAAK/O,WAAL,CAAiBoN,YAAY,gBAAgBvM,IAAI,CAApB,CAAZ,CAAjB;AACH,SAHL,MAIK;AACD,iBAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAIgO,cAAcvK,MAAlC,EAA0CzD,GAA1C,EAA+C;AAC3CkO,qBAAK/O,WAAL,CAAiBoN,YAAYyB,cAAchO,CAAd,CAAZ,CAAjB;AACH;AACJ;AACDiO,eAAO9O,WAAP,CAAmB+O,IAAnB;AACAD,eAAOpN,YAAP,GAAsBiJ,gBAAtB;AACAmE,eAAOnN,YAAP,GAAsBiJ,gBAAtB;AACAkE,eAAO1O,SAAP,CAAiBC,GAAjB,CAAqB,iBAArB,EAAwC,uBAAuBpB,OAAO2C,QAAP,CAAgB,MAAhB,CAA/D;AACA3C,eAAO4C,iBAAP,CAAyB,MAAzB,EAAiCiN,MAAjC;AACA7P,eAAO2C,QAAP,CAAgB,MAAhB;;AAEA,eAAOkN,MAAP;AACH,KArBD;;AAuBA7P,WAAOmO,WAAP,GAAqB,UAAU9L,IAAV,EAAgB;AACjC,YAAIA,QAAQnB,SAAZ,EAAuBmB,OAAO,eAAP;AACvB,YAAI6L,YAAY5M,SAASC,aAAT,CAAuB,SAAvB,CAAhB;AACA,YAAI6M,SAAS9M,SAASC,aAAT,CAAuB,KAAvB,CAAb;AAAA,YACI8M,aAAa/M,SAASC,aAAT,CAAuB,KAAvB,CADjB;AAAA,YAEI+M,WAAWhN,SAASC,aAAT,CAAuB,IAAvB,CAFf;AAGA6M,eAAOjN,SAAP,CAAiBC,GAAjB,CAAqB,0BAArB;AACAiN,mBAAWlN,SAAX,CAAqBC,GAArB,CAAyB,wBAAzB;AACAkN,iBAASnN,SAAT,CAAmBC,GAAnB,CAAuB,aAAvB;AACA8M,kBAAUnN,WAAV,CAAsBqN,MAAtB;AACAF,kBAAUnN,WAAV,CAAsBsN,UAAtB;AACAD,eAAOrN,WAAP,CAAmBuN,QAAnB;AACAD,mBAAWvN,SAAX,GAAuBuB,IAAvB;AACA0J,qBAAasC,UAAb;AACAA,mBAAWrC,OAAX,GAAqBhM,OAAOiM,mBAA5B;AACAoC,mBAAWjO,UAAX,CAAsBqC,YAAtB,GAAqCzC,OAAO6L,oBAA5C;AACAwC,mBAAWjO,UAAX,CAAsBsC,YAAtB,GAAqC1C,OAAO8L,oBAA5C;AACA,eAAOoC,SAAP;AACH,KAlBD;;AAoBAlO,WAAOiM,mBAAP,GAA6B,UAAU/L,KAAV,EAAiB;AAC1C,YAAIqO,MAAOrO,MAAMsO,KAAN,IAAetN,SAAhB,GAA6BhB,MAAMsO,KAAnC,GACNtO,MAAMiE,OADV;AAAA,YAEIsK,OAAO1O,EAAE,IAAF,EAAQwN,MAAR,EAFX;AAAA,YAGIW,SAHJ;AAAA,YAGeQ,KAHf;AAIA,YAAIH,QAAQ,EAAR,IACCvO,OAAO2O,YAAP,KAAwBzN,SAAxB,IAAqClB,OAAO2O,YAAP,KAAwB,IADlE,EACyE;AACrE;AACH;AACDzO,cAAMmE,cAAN;AACA6J,oBAAYC,aAAZ;AACAM,aAAKG,KAAL,CAAWV,SAAX;AACAA,kBAAUvB,aAAV,CAAwB,yBAAxB,EAAmDkC,KAAnD;;AAEAH,gBAAQ,KAAK7N,UAAL,CAAgB,KAAKA,UAAL,CAAgBwE,MAAhB,GAAyB,CAAzC,CAAR;AACA,aAAK/E,WAAL,CAAiBoO,KAAjB;AACA,YAAI,KAAK5N,SAAL,CAAegO,IAAf,MAAyB,gCAA7B,EAA+D;AAC3D,iBAAKhO,SAAL,GAAiB,eAAjB;AACH;AACD,eAAO,KAAP;AACH,KApBD;AAsBH,CAlKD,EAkKGwD,MAlKH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAOO,gBAAP,GAA0B,YAAY;AAClCe,iBAAS4F,cAAT,CAAwB,iBAAxB,EAA2CT,oBAA3C,CAAgE,GAAhE,EAAqE,CAArE,EAAwEtF,SAAxE,CAAkFiB,MAAlF,CAAyF,QAAzF;AACAd,iBAAS4F,cAAT,CAAwB,cAAxB,EAAwCT,oBAAxC,CAA6D,GAA7D,EAAkE,CAAlE,EAAqEtF,SAArE,CAA+EC,GAA/E,CAAmF,QAAnF;AACAE,iBAASY,sBAAT,CAAgC,yBAAhC,EAA2D,CAA3D,EAA8DgH,KAA9D,CAAoEyB,OAApE,GAA8E,OAA9E;AACArJ,iBAASY,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,EAA4DgH,KAA5D,CAAkEyB,OAAlE,GAA4E,OAA5E;AACArJ,iBAAS4F,cAAT,CAAwB,uBAAxB,EAAiDgC,KAAjD,CAAuDyB,OAAvD,GAAiE,MAAjE;AACH,KAND;;AAQA3K,WAAO+P,mBAAP,GAA6B,YAAU;AAC3BzO,iBAAS4F,cAAT,CAAwB,cAAxB,EAAwCT,oBAAxC,CAA6D,GAA7D,EAAkE,CAAlE,EAAqEtF,SAArE,CAA+EiB,MAA/E,CAAsF,QAAtF;AACAd,iBAAS4F,cAAT,CAAwB,iBAAxB,EAA2CT,oBAA3C,CAAgE,GAAhE,EAAqE,CAArE,EAAwEtF,SAAxE,CAAkFC,GAAlF,CAAsF,QAAtF;;AAEAE,iBAASY,sBAAT,CAAgC,yBAAhC,EAA2D,CAA3D,EAA8DgH,KAA9D,CAAoEyB,OAApE,GAA8E,MAA9E;AACArJ,iBAASY,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,EAA4DgH,KAA5D,CAAkEyB,OAAlE,GAA4E,MAA5E;AACArJ,iBAAS4F,cAAT,CAAwB,uBAAxB,EAAiDgC,KAAjD,CAAuDyB,OAAvD,GAAiE,OAAjE;AACA,YAAIqF,WAAW1O,SAAS4F,cAAT,CAAwB,uBAAxB,EAAiDrG,UAAhE;AACA,aAAK,IAAIe,IAAI,CAAb,EAAgBA,IAAIoO,SAAS3K,MAA7B,EAAqCzD,GAArC,EAA0C;AACtC,gBAAIoO,SAASpO,CAAT,EAAYsH,KAAhB,EACI8G,SAASpO,CAAT,EAAYsH,KAAZ,CAAkByB,OAAlB,GAA4B,MAA5B;AACP;AACJ,KAZT;;AAcA3K,WAAO4C,iBAAP,GAA2B,UAAUqN,WAAV,EAAuB5P,EAAvB,EAA2B;AAClD,YAAI6P,OAAOnQ,EAAE,WAAWkQ,WAAX,GAAyB,oBAA3B,EAAiDxD,KAAjD,EAAX;AACAyD,aAAKpD,WAAL,CAAiB,UAAUmD,WAAV,GAAwB,oBAAzC,EAFkD,CAEc;AAChEC,aAAKnD,QAAL,CAAc,kBAAkBkD,WAAlB,GAAgC,GAAhC,GAAsCtN,SAASsN,WAAT,CAApD;AACA3O,iBAAS4F,cAAT,CAAwB,uBAAxB,EAAiDnG,WAAjD,CAA6DmP,KAAK,CAAL,CAA7D;AACA;AACA,gBAAQD,WAAR;AACI,iBAAK,MAAL;AACIE,oCAAoBD,KAAKE,IAAL,CAAU,oBAAV,CAApB;AACAF,qBAAKE,IAAL,CAAU,oBAAV,EAAgCC,aAAhC;AACA;AAJR;AAMA1N,iBAASsN,WAAT;AACH,KAbD;;AAeA;;;;;;AAMAjQ,WAAOsQ,kBAAP,GAA4B,YAAU;AAClChP,iBAASiP,SAAT,GAAqB,UAAU3M,CAAV,EAAa;AAC1B,gBAAIA,EAAElD,MAAF,CAASyL,SAAT,KAAuB,aAA3B,EAA0C;AACtCnM,uBAAO2O,YAAP,GAAsB,IAAtB;AACA,oBAAIzO,MAAMsO,KAAN,KAAgB,EAAhB,IAAsBtO,MAAMsO,KAAN,KAAgB,EAA1C,EAA8C;AAC1CgC,+BAAW,YAAY;AACnBxQ,+BAAO2O,YAAP,GAAsB,KAAtB;AACArN,iCAASqL,aAAT,CAAuB,wCAAvB,EAAiE8D,KAAjE;AACH,qBAHD,EAGG,GAHH;AAIH;AACJ;AACJ,SAVL;AAWH,KAZD;;AAcA;;;;;;;AAOAzQ,WAAOmQ,mBAAP,GAA6B,UAAUO,OAAV,EAAmB;AAC5CA,gBAAQC,IAAR,CAAa,WAAb,EAA0BD,QAAQE,GAAR,EAA1B;AACA5Q,eAAO6Q,WAAP,CAAmB,YAAY;AAC3B,gBAAI1J,QAAQuJ,QAAQE,GAAR,EAAZ;AACA,gBAAIE,YAAYJ,QAAQC,IAAR,CAAa,WAAb,CAAhB;AACA,gBAAIxJ,SAAS2J,SAAb,EAAwB;AACpBA,4BAAY3J,KAAZ;AACAuJ,wBAAQvD,OAAR,CAAgB,QAAhB;AACH;AACJ,SAPD,EAOG,GAPH;AAQH,KAVD;;AAYAnN,WAAO+Q,mBAAP,GAA6B,UAAUnN,CAAV,EAAa;AACtC,YAAIoN,aAAa1P,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyD+O,WAA1E;;AAEA,YAAIjR,OAAOkR,aAAP,IACA5P,SAAS4F,cAAT,CAAwB,cAAxB,EAAwCiK,SAAxC,IAAqD,EADrD,IAEAnR,OAAOkR,aAAP,CAAqBE,WAArB,CAAiClI,KAAjC,CAAuCyB,OAAvC,IAAkD,MAFtD,EAE8D;AAC1DrJ,qBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CgC,KAA9C,CAAoDC,QAApD,GAA+D,OAA/D;AACA7H,qBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CgC,KAA9C,CAAoDmI,KAApD,GAA6DL,aAAa,CAAb,GAAiB1P,SAAS4F,cAAT,CAAwB,oBAAxB,EAA8C+J,WAA9C,GAA4D,CAA9E,GAAmF,IAA/I;AACA3P,qBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CgC,KAA9C,CAAoDK,GAApD,GAA0D,OAA1D;AACH,SAND,MAMO;AACHjI,qBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CgC,KAA9C,CAAoDC,QAApD,GAA+D,QAA/D;AACA,mBAAO7H,SAAS4F,cAAT,CAAwB,oBAAxB,EAA8CgC,KAA9C,CAAoDmI,KAA3D;AACA,mBAAO/P,SAAS4F,cAAT,CAAwB,oBAAxB,EAA8CgC,KAA9C,CAAoDK,GAA3D;AACH;AACD;AACA;AACH,KAhBD;;AAkBAvJ,WAAO+L,YAAP,GAAsB,UAAU2B,GAAV,EAAe;AACjC7K,gBAAQC,IAAR,CAAa;AACTpC,oBAAQgN,GADC;AAET3K,oBAAQ,IAFC;AAGTC,qBAAS,aAHA;AAITC,yBAAa,OAJJ;AAKTC,mBAAO,QALE;AAMTC,qBAAS,KANA;AAOTC,qCAAyB,qBAPhB;AAQTkO,2BAAe,IARN;AASTjO,qBAAS,uFATA;AAUTK,oCAAwB,gCAAUC,MAAV,EAAkB;AACtC3D,uBAAOkR,aAAP,GAAuBvN,MAAvB;AACAA,uBAAOH,EAAP,CAAU,OAAV,EAAmB,UAAUI,CAAV,EAAa;AAC5B5D,2BAAO+Q,mBAAP;AACH,iBAFD;AAGH;AAfQ,SAAb;AAiBH,KAlBD;;AAoBA/Q,WAAO+O,WAAP,GAAqB,UAAU1O,EAAV,EAAc;;AAE/B,YAAI2O,MAAM3O,GAAG2O,GAAH,IAAU,KAApB;AACA,YAAIE,MAAM7O,GAAG6O,GAAH,IAAU,KAApB;;AAEA,YAAIC,MAAM,EAAV;;AAEAA,YAAIC,GAAJ,GAAU/O,GAAGkR,eAAb;AACApC,YAAIG,GAAJ,GAAUjP,GAAGyJ,WAAb;;AAEAhH,aAAKzC,EAAL;;AAEA,iBAASyC,IAAT,CAAczC,EAAd,EAAkB;;AAEd8O,gBAAIC,GAAJ,CAAQvN,OAAR,GAAkB4N,SAAlB;AACAN,gBAAIG,GAAJ,CAAQzN,OAAR,GAAkB6N,SAAlB;;AAEAP,gBAAIC,GAAJ,CAAQtN,WAAR,GAAsB,UAAU8B,CAAV,EAAa;AAC/BA,kBAAES,cAAF;AACH,aAFD;;AAIA8K,gBAAIG,GAAJ,CAAQxN,WAAR,GAAsB,UAAU8B,CAAV,EAAa;AAC/BA,kBAAES,cAAF;AACH,aAFD;;AAIA,qBAASoL,SAAT,GAAqB;AACjB,oBAAItI,QAAQ9G,GAAG8G,KAAf;AACAA;AACA,oBAAI,CAAC6H,GAAD,IAAQ7H,SAAS6H,GAArB,EAA0B;AACtB3O,uBAAG8G,KAAH,GAAWA,KAAX;AACH;AACJ;;AAED,qBAASuI,SAAT,GAAqB;AACjB,oBAAIvI,QAAQ9G,GAAG8G,KAAf;AACAA;AACA,oBAAI,CAAC+H,GAAD,IAAQ/H,SAAS+H,GAArB,EAA0B;AACtB7O,uBAAG8G,KAAH,GAAWA,OAAX;AACH;AACJ;AACJ;AACJ,KAzCD;AA0CH,CA9JD,EA8JG7C,MA9JH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAOoF,aAAP,GAAuB,EAAvB;;AAEA;;AAEA;;;;;;AAMApF,WAAOwR,SAAP,GAAmB,YAAY;;AAEvBlQ,iBAASY,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,EAA2DgH,KAA3D,CAAiEyB,OAAjE,GAA2E,MAA3E;AACA,YAAI8G,WAAWnQ,SAASY,sBAAT,CAAgC,qBAAhC,CAAf;AACA,aAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAI6P,SAASpM,MAA7B,EAAqCzD,GAArC,EAA0C;AACtC6P,qBAAS7P,CAAT,EAAYT,SAAZ,CAAsBC,GAAtB,CAA0B,SAA1B;AACH;;AAED;AACArB,UAAE,mBAAF,EAAuBsQ,aAAvB;AACAtQ,UAAE,kBAAF,EAAsBsQ,aAAtB;AACAtQ,UAAE,uBAAF,EAA2BsQ,aAA3B;;AAEA;AACA,YAAI7I,QAAQlG,SAASC,aAAT,CAAuB,OAAvB,CAAZ;AACAiG,cAAMrG,SAAN,CAAgBC,GAAhB,CAAoB,oBAApB;;AAEA;AACA,YAAI6F,cAAcd,SAAS7E,SAAS4F,cAAT,CAAwB,qBAAxB,EAA+CC,KAAxD,CAAlB;AACA,YAAII,WAAWpB,SAAS7E,SAAS4F,cAAT,CAAwB,kBAAxB,EAA4CC,KAArD,CAAf;;AAEA;AACA,YAAIuK,MAAMlK,MAAMmK,SAAN,CAAgB,CAAC,CAAjB,CAAV;AACA,aAAK,IAAI/P,IAAI,CAAb,EAAgBA,IAAIqF,WAApB,EAAiCrF,GAAjC,EAAsC;AAClC,gBAAIgQ,aAAanN,YAAjB;AACAiN,gBAAI3Q,WAAJ,CAAgB6Q,UAAhB;AACAF,gBAAIvQ,SAAJ,CAAcC,GAAd,CAAkB,iBAAlB,EAAqC,UAArC;AACAwQ,uBAAWrM,OAAX,CAAmBG,MAAnB,GAA4B,CAA5B;AACAkM,uBAAWrM,OAAX,CAAmBC,MAAnB,GAA4B5D,CAA5B;AACH;;AAED;AACA,aAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAI2F,QAApB,EAA8B3F,GAA9B,EAAmC;AAC/B8P,kBAAMlK,MAAMmK,SAAN,CAAgB,CAAC,CAAjB,CAAN;AACA,iBAAK,IAAIjL,IAAI,CAAb,EAAgBA,IAAIO,WAApB,EAAiCP,GAAjC,EAAsC;AAClC,oBAAIkL,aAAanN,YAAjB;AACAiN,oBAAI3Q,WAAJ,CAAgB6Q,UAAhB;AACAF,oBAAIvQ,SAAJ,CAAcC,GAAd,CAAkB,UAAlB;AACAwQ,2BAAWrM,OAAX,CAAmBG,MAAnB,GAA4B9D,CAA5B;AACAgQ,2BAAWrM,OAAX,CAAmBC,MAAnB,GAA4BkB,CAA5B;AACH;AACJ;;AAED;AACA,YAAImL,YAAYvQ,SAASY,sBAAT,CAAgC,kBAAhC,EAAoD,CAApD,CAAhB;AACA2P,kBAAU/Q,SAAV,GAAsB,EAAtB;AACA+Q,kBAAU9Q,WAAV,CAAsByG,KAAtB;;AAEAxH,eAAOsQ,kBAAP;AACAtQ,eAAO8R,gBAAP;AACA;AACAxQ,iBAAS4F,cAAT,CAAwB,WAAxB,EAAqCpF,WAArC,GAAmD9B,OAAO6I,aAA1D;AACAvH,iBAAS4F,cAAT,CAAwB,YAAxB,EAAsCpF,WAAtC,GAAoD9B,OAAO6I,aAA3D;AACAvH,iBAAS4F,cAAT,CAAwB,aAAxB,EAAuCpF,WAAvC,GAAqD9B,OAAO6I,aAA5D;AACAvH,iBAAS4F,cAAT,CAAwB,WAAxB,EAAqCpF,WAArC,GAAmD9B,OAAO6I,aAA1D;AAEP,KAxDD;;AA4DA;;;;;;AAMA7I,WAAO8R,gBAAP,GAA0B,YAAU;;AAE/B;;;;AAIGxQ,iBAASO,OAAT,GAAmB,UAAU+B,CAAV,EAAa;AAC5B4M,uBACI,YAAY;AACR;AACH,aAHL,EAGO,GAHP;AAIA,gBAAIuB,QAAQhS,EAAE6D,EAAElD,MAAJ,CAAZ;;AAEA,gBAAGkD,EAAElD,MAAF,CAASS,SAAT,CAAmB2H,QAAnB,CAA4B,sBAA5B,KACIlF,EAAElD,MAAF,CAAS8J,EAAT,IAAe,oBADnB,IAEI5G,EAAElD,MAAF,CAASS,SAAT,CAAmB2H,QAAnB,CAA4B,SAA5B,CAFP,EAE8C;AAC1C9I,uBAAOuE,cAAP,GAAwBvE,OAAOwE,eAAP,GAAyB,CAAjD;AACAmB;AACAgB;AACAI;AACAjB;AACH;;AAED,gBAAIlC,EAAElD,MAAF,CAASyL,SAAT,KAAqBjL,SAArB,IACG0C,EAAElD,MAAF,CAASyL,SAAT,CAAmBC,KAAnB,CAAyB,eAAzB,CADP,EACkD;AAC9C;AACH;AACD,gBAAIxI,EAAElD,MAAF,CAAS8J,EAAT,CAAY4B,KAAZ,CAAkB,sBAAlB,CAAJ,EAA+C;AAC3CpM,uBAAO2O,YAAP,GAAsB,KAAtB;AACH;;AAED,gBAAIqD,aAAa,KAAjB,CAzB4B,CAyBJ;;AAExB;AACA,gBAAID,MAAME,QAAN,CAAe,iBAAf,CAAJ,EAAuC;AACnCD,6BAAaD,KAAb;AACH,aAFD,MAEO,IAAIA,MAAMG,OAAN,GAAgBD,QAAhB,CAAyB,iBAAzB,CAAJ,EAAiD;AACpDD,6BAAaD,MAAMG,OAAN,CAAc,kBAAd,CAAb;AACH;;AAED;AACA,gBAAIF,cAAcA,WAAW3M,MAAX,IAAqB,CAAvC,EAA0C;AACtCrF,uBAAO+P,mBAAP;;AAEA;;;;;;;;;;AAUA,oBAAI7D,SAAS8F,WAAW/C,IAAX,CAAgB,OAAhB,EAAyB7C,KAAzB,CAA+B,0BAA/B,CAAb;;AAEA;;;;;AAKA,oBAAI+F,eAAe,WAAWjG,OAAO,CAAP,CAAX,GAAuB,SAAvB,GACf,gBADe,GACIA,OAAO,CAAP,CADvB;AAEAnM,kBAAEoS,YAAF,EAAgBxE,IAAhB;;AAEA;AACA,oBAAIyE,UAAU9Q,SAASY,sBAAT,CAAgC,4BAAhC,CAAd;AACA,qBAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIwQ,QAAQ/M,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCwQ,4BAAQxQ,CAAR,EAAWyQ,QAAX,GAAsB,YAAY;AAC9B,6BAAKjS,UAAL,CAAgBA,UAAhB,CAA2BS,UAA3B,CAAsC,CAAtC,EAAyCA,UAAzC,CAAoD,CAApD,EAAuDsG,KAAvD,GAA+D,KAAKA,KAApE;AACH,qBAFD;AAGH;;AAED;AACA,oBAAImL,UAAUhR,SAASY,sBAAT,CAAgC,4BAAhC,CAAd;AACA,qBAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAI0Q,QAAQjN,MAA5B,EAAoCzD,GAApC,EAAyC;AACrC0Q,4BAAQ1Q,CAAR,EAAWyQ,QAAX,GAAsB,YAAY;AAC9B,6BAAKjS,UAAL,CAAgBA,UAAhB,CAA2BS,UAA3B,CAAsC,CAAtC,EAAyCA,UAAzC,CAAoD,CAApD,EAAuDsG,KAAvD,GAA+D,KAAKA,KAApE;AACH,qBAFD;AAGH;AACJ,aAvCD,MAuCO;AACH;AACA,oBAAI4K,MAAMQ,EAAN,CAAS,eAAT,KACAR,MAAMG,OAAN,CAAc,eAAd,EAA+B7M,MAA/B,KAA0C,CAD1C,IAEA0M,MAAME,QAAN,CAAe,oBAAf,CAFA,IAGAF,MAAMG,OAAN,CAAc,qBAAd,EAAqC7M,MAArC,KAAgD,CAHpD,EAGuD;AACnDrF,2BAAOO,gBAAP;AACH;AACJ;AACJ,SAnFD;;AAqFAe,iBAAS4F,cAAT,CAAwB,kBAAxB,EAA4CrF,OAA5C,GAAsD2Q,cAAtD;AACAlR,iBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CrF,OAA9C,GAAwD4Q,gBAAxD;AACAnR,iBAAS4F,cAAT,CAAwB,qBAAxB,EAA+CrF,OAA/C,GAAyD6Q,iBAAzD;AACApR,iBAAS4F,cAAT,CAAwB,uBAAxB,EAAiDrF,OAAjD,GAA2D8Q,mBAA3D;AACArR,iBAAS4F,cAAT,CAAwB,iBAAxB,EAA2CrF,OAA3C,GAAqD+Q,SAArD;AACAtR,iBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CrF,OAA9C,GAAwDgR,YAAxD;AACAvR,iBAAS4F,cAAT,CAAwB,kBAAxB,EAA4CrF,OAA5C,GAAsD+F,UAAtD;AAEP,KAnGD;;AAqGA;;;;;;;AAOA5H,WAAO8S,wBAAP,GAAkC,YAAU;AACpC,YAAItL,QAAQlG,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAZ;AAAA,YACI6Q,OAAOvL,MAAMf,oBAAN,CAA2B,IAA3B,CADX;AAAA,YAEIF,GAFJ;AAAA,YAESyM,OAAO,CAFhB;AAAA,YAEmBC,UAFnB;AAGA,aAAK,IAAIrR,IAAI,CAAb,EAAgBA,IAAImR,KAAK1N,MAAzB,EAAiCzD,GAAjC,EAAsC;AAClC2E,kBAAMwM,KAAKnR,CAAL,EAAQ6E,oBAAR,CAA6B,IAA7B,CAAN;AACA,gBAAGF,IAAIlB,MAAJ,GAAa2N,IAAhB,EAAqB;AACjBA,uBAAOzM,IAAIlB,MAAX;AACH;AACJ;AACD4N,qBAAa;AACLF,kBAAOA,KAAK1N,MADP;AAEL6N,qBAAUF;AAFL,SAAb;AAIA,eAAOC,UAAP;AACP,KAfD;;AAiBA;;;;;;;;AAQAjT,WAAOsG,aAAP,GAAuB,YAAU;AAC7B,YAAI6M,IAAI7R,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAR;AACA,eAAO;AACHsF,mBAAQ2L,CADL;AAEHF,wBAAaH,0BAFV;AAGHtM,iBAAM2M,EAAE1M,oBAAF,CAAuB,IAAvB,CAHH;AAIH2M,mBAAQD,EAAEtS,UAAF,CAAa,CAAb;AAJL,SAAP;AAMH,KARD;;AAUA;;;;;;;;AAQAb,WAAOqT,kBAAP,GAA4B,YAAU;AAClC,YAAI7L,QAAQlG,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAZ;AAAA,YACIsE,MAAMgB,MAAMf,oBAAN,CAA2B,IAA3B,CADV;AAEA,aAAK,IAAI7E,IAAI,CAAb,EAAgBA,IAAI4E,IAAInB,MAAxB,EAAgCzD,GAAhC,EAAqC;AACjC,gBAAI2E,MAAMC,IAAI5E,CAAJ,EAAO6E,oBAAP,CAA4B,IAA5B,CAAV;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,IAAIlB,MAAxB,EAAgCqB,GAAhC,EAAqC;;AAEjC,oBAAG9E,KAAG,CAAN,EAAQ;AACJ2E,wBAAIG,CAAJ,EAAOtG,UAAP,CAAkB+L,SAAlB,GAA4B,EAA5B;AACA5F,wBAAIG,CAAJ,EAAOtG,UAAP,CAAkBe,SAAlB,CAA4BC,GAA5B,CAAgC,UAAhC,EAA2C,iBAA3C;AACH,iBAHD,MAII;AACAmF,wBAAIG,CAAJ,EAAOtG,UAAP,CAAkB+L,SAAlB,GAA4B,EAA5B;AACA5F,wBAAIG,CAAJ,EAAOtG,UAAP,CAAkBe,SAAlB,CAA4BC,GAA5B,CAAgC,UAAhC;AACH;;AAEDmF,oBAAIG,CAAJ,EAAOnB,OAAP,CAAeC,MAAf,GAAwBkB,CAAxB;AACAH,oBAAIG,CAAJ,EAAOnB,OAAP,CAAeG,MAAf,GAAwB9D,CAAxB;AACH;AACJ;AACJ,KApBD;;AAsBA;;;;;;;;;;;AAYA0R,aAAS,gBAASC,GAAT,EAAcC,KAAd,EAAoB;AACzB,YAAInN,SAASC,eAAb;AAAA,YACIoL,GADJ;AAAA,YACS+B,eAAevS,SADxB;;AAGA,YAAGqS,OAAO,KAAP,IAAgBA,OAAO,OAA1B,EAAkC;AAC9B7B,kBAAMrL,OAAOmB,KAAP,CAAamK,SAAb,CAAwB4B,OAAO,KAAP,GAAe,CAAC,CAAhB,GAAoB,CAA5C,CAAN;AACH,SAFD,MAEK;AACD7B,kBAAMpQ,SAASC,aAAT,CAAuB,IAAvB,CAAN;AACH;;AAED,aAAK,IAAImF,IAAI,CAAb,EAAgBA,IAAIL,OAAO4M,UAAP,CAAkBC,OAAtC,EAA+CxM,GAA/C,EAAoD;AAChD,gBAAIkL,aAAanN,YAAjB;AACAiN,gBAAI3Q,WAAJ,CAAgB6Q,UAAhB;AACH;;AAEDF,YAAIvQ,SAAJ,CAAcC,GAAd,CAAkB,UAAlB;AACAE,iBAAS4F,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,GAAoDd,OAAO4M,UAAP,CAAkBF,IAAlB,GAAwB,CAA5E;;AAEA,YAAGQ,OAAO,QAAP,IAAmBA,OAAO,OAA7B,EAAsC;AAClCE,2BAAepN,OAAOG,GAAP,CAAWgN,MAAMjO,OAAN,CAAcG,MAAzB,CAAf;AACA,gBAAG6N,OAAO,QAAV,EAAmB;AACflN,uBAAO+M,KAAP,CAAahI,YAAb,CAA0BsG,GAA1B,EAA8B+B,YAA9B;AACA,oBAAIrN,UAAU9E,SAASY,sBAAT,CAAgC,sBAAhC,CAAd;AACA,qBAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIwE,QAAQf,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCwE,4BAAQxE,CAAR,EAAW2D,OAAX,CAAmBG,MAAnB;AACH;AACJ,aAND,MAMK;AACDW,uBAAO+M,KAAP,CAAahI,YAAb,CAA0BsG,GAA1B,EAA8B+B,aAAa3J,WAA3C;AACH;AACJ;;AAEDuJ;AAEH,KAjCD;;AAmCArT,WAAOwS,cAAP,GAAwB,UAAS9H,GAAT,EAAa;AACjC4I,eAAO,KAAP,EAAa,IAAb;AACH,KAFD;;AAIAtT,WAAOyS,gBAAP,GAA0B,UAAS/H,GAAT,EAAa;AACnC4I,eAAO,OAAP,EAAe,IAAf;AACH,KAFD;;AAIAtT,WAAO0T,YAAP,GAAsB,YAAU;AAC5BJ,eAAO,QAAP,EAAgB,IAAhB;AACH,KAFD;;AAIAtT,WAAO2T,WAAP,GAAqB,YAAU;AAC3BL,eAAO,OAAP,EAAe,IAAf;AACH,KAFD;;AAIA;;;;;;;;;;;AAWAM,gBAAY,mBAASL,GAAT,EAAaC,KAAb,EAAmB;AAC3B,YAAInN,SAASC,eAAb;AAAA,YACIuN,WADJ;AAAA,YACiBC,KADjB;AAEA,aAAK,IAAIlS,IAAI,CAAb,EAAgBA,IAAIyE,OAAO4M,UAAP,CAAkBF,IAAtC,EAA4CnR,GAA5C,EAAiD;;AAE7C,gBAAIkS,QAAQrP,YAAZ;AACA4B,mBAAOG,GAAP,CAAW5E,CAAX,EAAcb,WAAd,CAA0B+S,KAA1B;AACA,gBAAGP,OAAO,QAAP,IAAmBA,OAAO,OAA7B,EACA;AACIM,8BAAcxN,OAAOG,GAAP,CAAW5E,CAAX,EACL6E,oBADK,CACgB,IADhB,EACsB+M,MAAMjO,OAAN,CAAcC,MADpC,CAAd;AAEA,oBAAG+N,OAAK,QAAR,EAAiB;AACblN,2BAAOG,GAAP,CAAW5E,CAAX,EAAcwJ,YAAd,CAA2B0I,KAA3B,EAAiCD,WAAjC;AACA,wBAAIzN,UAAU9E,SAASY,sBAAT,CAAgC,sBAAhC,CAAd;AACA,yBAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIwE,QAAQf,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCwE,gCAAQxE,CAAR,EAAW2D,OAAX,CAAmBC,MAAnB;AACH;AACJ,iBAND,MAOI;AACAa,2BAAOG,GAAP,CAAW5E,CAAX,EAAcwJ,YAAd,CAA2B0I,KAA3B,EAAiCD,YAAY/J,WAA7C;AACH;AACJ,aAdD,MAeK,IAAGyJ,OAAK,KAAR,EAAc;AACflN,uBAAOG,GAAP,CAAW5E,CAAX,EAAcb,WAAd,CAA0B+S,KAA1B;AACH,aAFI,MAGD;AACAzN,uBAAOG,GAAP,CAAW5E,CAAX,EAAcd,SAAd,GAA0B,+CAA+CuF,OAAOG,GAAP,CAAW5E,CAAX,EAAcd,SAAvF;AACH;AACJ;AACDQ,iBAAS4F,cAAT,CAAwB,qBAAxB,EAA+CC,KAA/C,GAAuDd,OAAO4M,UAAP,CAAkBC,OAAlB,GAA2B,CAAlF;AACAG;AACH,KA/BD;;AAiCArT,WAAO0S,iBAAP,GAA2B,UAAShI,GAAT,EAAa;AACpCkJ,kBAAU,KAAV,EAAgB,IAAhB;AACH,KAFD;;AAIA5T,WAAO2S,mBAAP,GAA6B,UAASjI,GAAT,EAAa;AACtCkJ,kBAAU,OAAV,EAAkB,IAAlB;AACC,KAFL;;AAIA5T,WAAO+T,eAAP,GAAyB,YAAU;AAC/BH,kBAAU,QAAV,EAAmB,IAAnB;AACH,KAFD;;AAIA5T,WAAOgU,cAAP,GAAwB,YAAU;AAC9BJ,kBAAU,OAAV,EAAkB,IAAlB;AACH,KAFD;;AAIA5T,WAAO4S,SAAP,GAAmB,YAAY;AAC3B,YAAIqB,MAAMjU,OAAOyF,SAAjB;AAAA,YACI+B,QAAQlG,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CADZ;AAAA,YAEIwP,MAAMlK,MAAMf,oBAAN,CAA2B,IAA3B,EAAiCwN,GAAjC,CAFV;AAAA,YAGI1M,WAAWpB,SAAS7E,SAAS4F,cAAT,CAAwB,kBAAxB,EAA4CC,KAArD,CAHf;AAAA,YAIIiM,QAAQ1B,IAAItR,UAJhB;AAKA,YAAImH,YAAU,CAAV,IAAeN,eAAa,CAA7B,IAAmCmM,SAASlS,SAA/C,EAAyD;AACpD;AACH;AACFkS,cAAM9S,WAAN,CAAkBoR,GAAlB;AACApQ,iBAAS4F,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,GAAoDI,WAAU,CAA9D;AACA5B;AACH,KAZD;;AAcA3F,WAAO6S,YAAP,GAAsB,YAAY;AAC9B,YAAIrL,QAAQlG,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAZ;AAAA,YACI+R,MAAMjU,OAAOsF,YADjB;AAAA,YAEIiC,WAAWpB,SAAS7E,SAAS4F,cAAT,CAAwB,kBAAxB,EAA4CC,KAArD,CAFf;AAAA,YAGIF,cAAcd,SAAS7E,SAAS4F,cAAT,CAAwB,qBAAxB,EAA+CC,KAAxD,CAHlB;AAII,YAAII,YAAU,CAAV,IAAeN,eAAa,CAAhC,EAAmC;AAClC;AACH;AACF,aAAK,IAAIrF,IAAI,CAAb,EAAgBA,IAAI2F,QAApB,EAA8B3F,GAA9B,EAAmC;AAC9B,gBAAInB,KAAK+G,MAAMf,oBAAN,CAA2B,IAA3B,EAAiC7E,CAAjC,EAAoC6E,oBAApC,CAAyD,IAAzD,EAA+DwN,GAA/D,CAAT;AAAA,gBACGxM,KAAKhH,GAAGL,UADX;AAEAqH,eAAGnH,WAAH,CAAeG,EAAf;AACJ;AACDa,iBAAS4F,cAAT,CAAwB,qBAAxB,EAA+CC,KAA/C,GAAuDF,cAAa,CAApE;AACAtB;AACH,KAfD;AAiBH,CArZD,EAqZGrB,MArZH;ACAA,CAAC,UAAUvE,CAAV,EAAa;;AAEVC,WAAOkU,QAAP,GAAkB,UAAUhU,KAAV,EAAiB;AAC/B,YAAIO,KAAKP,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAxB,CAAmCA,UAA5C;AAAA,YACIO,OAAOsK,QAAQ/K,MAAMQ,MAAN,CAAaN,UAAb,CAAwBA,UAAxB,CAAmCS,UAAnC,CAA8C,CAA9C,EAAiDC,SAAzD,CADX;AAEAL,WAAGM,WAAH,CAAeJ,IAAf;AACH,KAJD;;AAMAX,WAAOmU,UAAP,GAAoB,UAAUzJ,GAAV,EAAe;AAC/B,YAAIvK,MAAM,KAAKC,UAAL,CAAgBA,UAA1B;AAAA,YACIC,KAAKF,IAAIC,UADb;AAEAC,WAAGC,WAAH,CAAeH,GAAf;AACAH,eAAOO,gBAAP;AACH,KALD;;AAOAP,WAAOoU,gBAAP,GAA0B,UAAUlU,KAAV,EAAiB;;AAEvC,YAAGF,OAAOiB,iBAAP,IAA4BC,SAA/B,EAAyC;AACrC;AACH;AACD,aAAKC,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;AACA,YAAIC,YAAYC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUF,SAASC,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIG,UAAUJ,SAASC,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGIE,UAAUH,SAASC,aAAT,CAAuB,MAAvB,CAHd;AAAA,YAIII,QAJJ;AAAA,YAIcC,CAJd;AAKAF,gBAAQP,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAI,gBAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACAK,gBAAQN,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAkC,gBAAlC,EAAoD,aAApD;AACAC,kBAAUQ,OAAV,GAAoB7B,OAAOmU,UAA3B;AACA3S,gBAAQK,OAAR,GAAkB7B,OAAOkU,QAAzB;AACAzS,gBAAQK,WAAR,GAAsB9B,OAAO+B,gBAA7B;AACAL,gBAAQX,WAAR,CAAoBU,OAApB;AACAC,gBAAQX,WAAR,CAAoBS,OAApB;AACAE,gBAAQX,WAAR,CAAoBM,SAApB;AACA,aAAKN,WAAL,CAAiBW,OAAjB;AACH,KAtBD;;AAwBA1B,WAAOqU,gBAAP,GAA0B,UAAUnU,KAAV,EAAiB;AACvC,YAAI+B,gBAAgB,KAAKC,sBAAL,CAA4B,cAA5B,CAApB;AACA,YAAID,iBAAiBA,cAAc,CAAd,CAArB,EAAuC;AACnC,gBAAIE,MAAMF,cAAc,CAAd,EAAiB7B,UAA3B;AACA+B,gBAAI7B,WAAJ,CAAgB2B,cAAc,CAAd,CAAhB;AACH;AACD,aAAKd,SAAL,CAAeiB,MAAf,CAAsB,sBAAtB;AAEH,KARD;;AAUApC,WAAOiL,OAAP,GAAiB,UAAU5I,IAAV,EAAgB;AAC7B,YAAIiS,SAAShT,SAASC,aAAT,CAAuB,KAAvB,CAAb;AACA,YAAIgT,UAAUjT,SAASC,aAAT,CAAuB,KAAvB,CAAd;AACAgT,gBAAQpT,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;AACA,YAAIoT,MAAMlT,SAASC,aAAT,CAAuB,GAAvB,CAAV;AACAiT,YAAI1T,SAAJ,GAAgBuB,QAAQnB,SAAR,GAAoBmB,IAApB,GAA2B,MAA3C;AACAkS,gBAAQxT,WAAR,CAAoByT,GAApB;AACAF,eAAOvT,WAAP,CAAmBwT,OAAnB;AACAD,eAAO7R,YAAP,GAAsB2R,gBAAtB;AACAE,eAAO5R,YAAP,GAAsB2R,gBAAtB;AACAC,eAAOnT,SAAP,CAAiBC,GAAjB,CAAqB,iBAArB,EAAwC,uBACpCpB,OAAO2C,QAAP,CAAgB,MAAhB,CADJ;AAEA3C,eAAO4C,iBAAP,CAAyB,MAAzB,EAAiC0R,MAAjC;AACAtU,eAAO2C,QAAP,CAAgB,MAAhB;AACA3C,eAAO+L,YAAP,CAAoBuI,OAAOzT,UAAP,CAAkB,CAAlB,CAApB;AACAd,UAAEuU,MAAF,EAAU7D,KAAV;AACA,eAAO6D,MAAP;AACH,KAjBD;AAmBH,CApED,EAoEGhQ,MApEH;ACAA,IAAI2L,WAAJ;;AAEA;AACAjQ,OAAO2C,QAAP,GAAkB,IAAI8R,KAAJ,EAAlB;AACAzU,OAAO2C,QAAP,CAAgB,MAAhB,IAA0B,CAA1B;AACA3C,OAAO2C,QAAP,CAAgB,OAAhB,IAA2B,CAA3B;AACA3C,OAAO2C,QAAP,CAAgB,MAAhB,IAA0B,CAA1B;AACA3C,OAAO2C,QAAP,CAAgB,QAAhB,IAA4B,CAA5B;;AAEA2B,OAAOhD,QAAP,EAAiBoT,KAAjB,CAAuB,UAAU3U,CAAV,EAAa;;AAEhC;AACAgP,gBAAYzN,SAAS4F,cAAT,CAAwB,qBAAxB,CAAZ;AACA6H,gBAAYzN,SAAS4F,cAAT,CAAwB,kBAAxB,CAAZ;;AAEA;;AAEA;AACA5F,aAASqT,OAAT,GAAmB,YAAY;AAC3BrT,iBAAS4F,cAAT,CAAwB,qBAAxB,EAA+CrF,OAA/C,GAAyD,YAAY;;AAEjE;AACA2P;;AAGA;;;;;;;AAOA,qBAASoD,2BAAT,GAAuC;AACnC,oBAAIC,SAAS,IAAb;AAAA,oBACItH,SAASsH,MADb;AAEA,uBAAM,CAACtH,OAAOpM,SAAP,CAAiB2H,QAAjB,CAA0B,sBAA1B,CAAP,EAAyD;AACrDyE,6BAASA,OAAOnN,UAAhB;AACH;AACD,oBAAI0U,UAAUvH,OAAO0B,IAAP,CAAY,OAAZ,CAAd;;AAEA;;;;;;;;;;AAUA,oBAAI/C,SAAS4I,QAAQ1I,KAAR,CAAc,0BAAd,CAAb;;AAEA,oBAAIvH,OAAOqH,OAAO,CAAP,CAAX;AACA,oBAAI+H,MAAM/H,OAAO,CAAP,CAAV;AACA,oBAAIwE,UAAUpP,SAASqL,aAAT,CAAuB,mCAAmC9H,IAAnC,GAA0C,GAA1C,GAAgDoP,GAAvE,CAAd;AACAc,iCAAiBrE,OAAjB,EAA0BmE,MAA1B;AACH;;AAED;;;;;;;AAOA,qBAASE,gBAAT,CAA0BrE,OAA1B,EAAmCmE,MAAnC,EAA2C;AACvC;AACA,oBAAIhQ,OAAOgQ,OAAOlE,IAAP,CAAY,MAAZ,CAAX;AACA,oBAAIC,MAAMiE,OAAOjE,GAAP,EAAV;AACA,wBAAQ/L,IAAR;AACI,yBAAK,WAAL;AACI6L,gCAAQN,IAAR,CAAa,GAAb,EAAkB4E,GAAlB,CAAsB,WAAtB,EAAmCpE,MAAM,IAAzC;AACA;AACJ,yBAAK,OAAL;AACIF,gCAAQN,IAAR,CAAa,GAAb,EAAkB4E,GAAlB,CAAsB,OAAtB,EAA+BpE,GAA/B;AACA;AACJ,yBAAK,YAAL;AACI,4BAAIA,OAAO,WAAX,EAAwB;AACpBF,oCAAQ/D,aAAR,CAAsB,6BAAtB,EAAqDvM,UAArD,CAAgE8I,KAAhE,CAAsEyB,OAAtE,GAA+E,MAA/E;AACA,gCAAIsK,UAAUvE,QAAQjF,gBAAR,CAAyB,sCAAzB,CAAd;AACA,iCAAK,IAAI7J,IAAI,CAAb,EAAgBA,IAAIqT,QAAQ5P,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCqT,wCAAQrT,CAAR,EAAWsH,KAAX,CAAiBgM,aAAjB,GAAgC,MAAhC;AACH;AACD5T,qCAASqL,aAAT,CAAuB,6BAAvB,EAAsDxF,KAAtD,GAA8D,MAA9D;AACH,yBAPD,MAOO;AACHuJ,oCAAQ/D,aAAR,CAAsB,6BAAtB,EAAqDvM,UAArD,CAAgE8I,KAAhE,CAAsEyB,OAAtE,GAA+E,MAA/E;AACA,gCAAIsK,UAAUvE,QAAQjF,gBAAR,CAAyB,sCAAzB,CAAd;AACA,iCAAK,IAAI7J,IAAI,CAAb,EAAgBA,IAAIqT,QAAQ5P,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCqT,wCAAQrT,CAAR,EAAWsH,KAAX,CAAiBgM,aAAjB,GAAgC,SAAhC;AACH;AACJ;AACD;AACJ,yBAAK,2BAAL;AACA,yBAAK,iBAAL;AACQ,4BAAID,UAAUvE,QAAQjF,gBAAR,CAAyB,sCAAzB,CAAd;AACA,6BAAK,IAAI7J,IAAI,CAAb,EAAgBA,IAAIqT,QAAQ5P,MAA5B,EAAoCzD,GAApC,EAAyC;AACrCqT,oCAAQrT,CAAR,EAAWsH,KAAX,CAAiBgM,aAAjB,GAAgCtE,IAAIuE,WAAJ,EAAhC;AACH;AACL;AA7BR;AA+BH;AACDpV,cAAEuB,SAASoI,IAAX,EAAiBlG,EAAjB,CAAoB,6BAApB,EAAmD,wBAAnD,EAA6EoR,2BAA7E;;AAEA;AACA,qBAASQ,SAAT,CAAmBjO,KAAnB,EAA0B;AACtB7F,yBAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDgH,KAAzD,CAA+DmM,MAA/D,GAAwElO,QAAQ,UAAhF;AACH;;AAED;AACA7F,qBAAS4F,cAAT,CAAwB,0BAAxB,EAAoDmL,QAApD,GAA+D,YAAY;AACvE/Q,yBAAS4F,cAAT,CAAwB,0BAAxB,EAAoDC,KAApD,GAA4D,KAAKA,KAAjE;AACAiO,0BAAU,KAAKjO,KAAf;AACH,aAHD;;AAKA;AACA7F,qBAAS4F,cAAT,CAAwB,0BAAxB,EAAoDmL,QAApD,GAA+D,YAAY;AACvE/Q,yBAAS4F,cAAT,CAAwB,0BAAxB,EAAoDC,KAApD,GAA4D,KAAKA,KAAjE;AACAiO,0BAAU,KAAKjO,KAAf;AACH,aAHD;;AAKA;AACA,qBAASmO,cAAT,CAAwBnO,KAAxB,EAA+B;AAC3B,oBAAIoO,aAAajU,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDuE,oBAAzD,CAA8E,IAA9E,CAAjB;AACA,qBAAK,IAAI7E,IAAI,CAAb,EAAgBA,IAAI2T,WAAWlQ,MAA/B,EAAuCzD,GAAvC,EAA4C;AACxC2T,+BAAW3T,CAAX,EAAcsH,KAAd,CAAoBsM,OAApB,GAA8BrO,QAAQ,IAAtC;AACH;AACJ;;AAED;AACA7F,qBAAS4F,cAAT,CAAwB,wBAAxB,EAAkDmL,QAAlD,GAA6D,YAAY;AACrE/Q,yBAAS4F,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,GAA0D,KAAKA,KAA/D;AACAmO,+BAAe,KAAKnO,KAApB;AACH,aAHD;;AAKA;AACA7F,qBAAS4F,cAAT,CAAwB,wBAAxB,EAAkDmL,QAAlD,GAA6D,YAAY;AACrE/Q,yBAAS4F,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,GAA0D,KAAKA,KAA/D;AACAmO,+BAAe,KAAKnO,KAApB;AACH,aAHD;;AAKA7F,qBAAS4F,cAAT,CAAwB,oCAAxB,EAA8DrF,OAA9D,GAAwE,YAAU;AAC9E,oBAAG,KAAKsF,KAAL,IAAY,cAAf,EAA8B;AAC1B7F,6BAASY,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,EAA2Df,SAA3D,CAAqEC,GAArE,CAAyE,SAAzE;AACA,yBAAK+F,KAAL,GAAY,4BAAZ;AACH,iBAHD,MAII;AACA7F,6BAASY,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,EAA2Df,SAA3D,CAAqEiB,MAArE,CAA4E,SAA5E;AACA,yBAAK+E,KAAL,GAAa,cAAb;AACH;AAGJ,aAXD;;AAaA;AACA,qBAASsO,cAAT,CAAwBC,OAAxB,EAAiC;AAC7B,oBAAIC,MAAJ;;AAEA,oBAAID,WAAW,SAAf,EAA0B;AACtBpU,6BAAS4F,cAAT,CAAwB,yBAAxB,EAAmDgC,KAAnD,CAAyD0M,YAAzD,GAAwE,KAAxE;AACA,wBAAIL,aAAajU,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDuE,oBAAzD,CAA8E,IAA9E,CAAjB;AACA,yBAAK,IAAI7E,IAAI,CAAb,EAAgBA,IAAI2T,WAAWlQ,MAA/B,EAAuCzD,GAAvC,EAA4C;AACxC2T,mCAAW3T,CAAX,EAAcsH,KAAd,CAAoBmM,MAApB,GAA6B,WAA7B;AACH;;AAED/T,6BAAS4F,cAAT,CAAwB,4BAAxB,EAAsD/F,SAAtD,CAAgEC,GAAhE,CAAoE,SAApE;AACH,iBARD,MAQO;AACHE,6BAAS4F,cAAT,CAAwB,4BAAxB,EAAsD/F,SAAtD,CAAgEiB,MAAhE,CAAuE,SAAvE;AACA,wBAAImT,aAAajU,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDuE,oBAAzD,CAA8E,IAA9E,CAAjB;AACA,yBAAK,IAAI7E,IAAI,CAAb,EAAgBA,IAAI2T,WAAWlQ,MAA/B,EAAuCzD,GAAvC,EAA4C;AACxC2T,mCAAW3T,CAAX,EAAcsH,KAAd,CAAoBmM,MAApB,GAA6B,EAA7B;AACH;AACJ;AACJ;;AAED;AACA/T,qBAAS4F,cAAT,CAAwB,yBAAxB,EAAmDmL,QAAnD,GAA8D,YAAY;AACtE,oBAAIwD,OAAO,KAAKH,OAAL,GAAe,SAAf,GAA2B,WAAtC;AACAD,+BAAeI,IAAf;AACH,aAHD;;AAKA;AACA,qBAASC,kBAAT,CAA4B3O,KAA5B,EAAmC;AAC/B,oBAAIoO,aAAajU,SAASY,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDuE,oBAAzD,CAA8E,IAA9E,CAAjB;AACA,qBAAK,IAAI7E,IAAI,CAAb,EAAgBA,IAAI2T,WAAWlQ,MAA/B,EAAuCzD,GAAvC,EAA4C;AACxC2T,+BAAW3T,CAAX,EAAcsH,KAAd,CAAoBmM,MAApB,GAA6BlO,QAAQ,UAArC;AACH;AACJ;;AAED;AACA7F,qBAAS4F,cAAT,CAAwB,gCAAxB,EAA0DmL,QAA1D,GAAqE,YAAY;AAC7E/Q,yBAAS4F,cAAT,CAAwB,gCAAxB,EAA0DC,KAA1D,GAAkE,KAAKA,KAAvE;AACA2O,mCAAmB,KAAK3O,KAAxB;AACH,aAHD;;AAKA;AACA7F,qBAAS4F,cAAT,CAAwB,gCAAxB,EAA0DmL,QAA1D,GAAqE,YAAY;AAC7E/Q,yBAAS4F,cAAT,CAAwB,gCAAxB,EAA0DC,KAA1D,GAAkE,KAAKA,KAAvE;AACA2O,mCAAmB,KAAK3O,KAAxB;AACH,aAHD;AAKH,SArLD;;AAuLA7F,iBAAS4F,cAAT,CAAwB,qBAAxB,EAA+CrF,OAA/C,GAAyD7B,OAAO0T,YAAhE;AACApS,iBAAS4F,cAAT,CAAwB,oBAAxB,EAA8CrF,OAA9C,GAAwD7B,OAAO2T,WAA/D;AACArS,iBAAS4F,cAAT,CAAwB,wBAAxB,EAAkDrF,OAAlD,GAA4D7B,OAAO+T,eAAnE;AACAzS,iBAAS4F,cAAT,CAAwB,uBAAxB,EAAiDrF,OAAjD,GAA2D7B,OAAOgU,cAAlE;AACH,KA5LD,CATgC,CAqM7B;;AAGN,CAxMD","file":"admin.js","sourcesContent":["(function ($) {\r\n\r\n    window.deleteButton = function (event) {\r\n        var act = this.parentNode.parentNode,\r\n            el = act.parentNode;\r\n        el.removeChild(act);\r\n        window.add_Elements_tab();\r\n    };\r\n\r\n    window.copyButton = function (event) {\r\n        var td = event.target.parentNode.parentNode.parentNode,\r\n            copy = newButton(event.target.parentNode.parentNode.childNodes[0].innerHTML);\r\n        td.appendChild(copy);\r\n    };\r\n\r\n    window.showButtonSettings = function (event) {\r\n\r\n        if(window.currentlyDragging != undefined){\r\n            return;\r\n        }\r\n\r\n        this.classList.add('wptb-directlyhovered');\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            btnMove = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\r\n        btnDelete.onclick = window.deleteButton;\r\n        btnCopy.onclick = window.copyButton;\r\n        btnMove.onmousedown = window.putItemDragStart;\r\n        actions.appendChild(btnMove);\r\n        actions.appendChild(btnCopy);\r\n        actions.appendChild(btnDelete);\r\n        this.appendChild(actions);\r\n    };\r\n\r\n    window.hideButtonSettings = function (event) {\r\n        var formerActions = this.getElementsByClassName('wptb-actions');\r\n        if (formerActions && formerActions[0]) {\r\n            let par = formerActions[0].parentNode;\r\n            par.removeChild(formerActions[0]);\r\n        }\r\n        this.classList.remove('wptb-directlyhovered');\r\n    };\r\n\r\n    window.newButton = function (text) {\r\n        var elButton = document.createElement('div');\r\n        elButton.classList.add('wptb-button-container');\r\n        var elButton2 = document.createElement('div');\r\n        elButton2.classList.add('wptb-button-wrapper');\r\n        var el_B = document.createElement('p');\r\n        el_B.classList.add('wptb-button');\r\n        el_B.classList.add('editable');\r\n        el_B.innerHTML = text != undefined ? text : 'Button Text';\r\n        elButton2.appendChild(el_B);\r\n        elButton.appendChild(elButton2);\r\n        elButton.onmouseenter = showButtonSettings;\r\n        elButton.onmouseleave = hideButtonSettings;\r\n        elButton.classList.add('wptb-ph-element', 'wptb-element-button-' +\r\n            window.wptb_num['button']);\r\n        window.addElementOptions('button', elButton);\r\n        window.wptb_num['button']++;\r\n        tinyMCE.init({\r\n            target: el_B,\r\n            inline: true,\r\n            plugins: \"link\",\r\n            dialog_type: \"modal\",\r\n            theme: 'modern',\r\n            menubar: false,\r\n            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n            toolbar: 'bold italic strikethrough',\r\n            setup: function (ed) {\r\n                ed.on(\"init\",\r\n                    function (ed) {\r\n                        tinyMCE.execCommand('mceRepaint');\r\n                    }\r\n                );\r\n            },\r\n            init_instance_callback: function (editor) {\r\n                editor.on('change', function (e) {\r\n                    // check if it becomes empty because if there's no value it's hard to edit the editor in button element\r\n                    if (editor.getContent() == \"\") {\r\n                        editor.setContent(\"<p class='wptb-button'>Button Text</p>\");\r\n                    }\r\n                });\r\n                editor.on('KeyDown', function (e) {\r\n                    var range = editor.selection.getRng();\r\n                    var KeyID = e.keyCode;\r\n                    if (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\r\n                        e.preventDefault();\r\n                        editor.setContent(\"<p class='wptb-button'></p>\");\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return elButton;\r\n    }\r\n\r\n})(jQuery);","(function ($) {\r\n    \r\n    window.selectionWidth = 0; \r\n    window.selectionHeight=0;\r\n\r\n    window.createCell = function(){\r\n        var cell = document.createElement(\"td\"),\r\n            allowDrop = function (event) {\r\n                    event.target.classList.add('wptb-allow-drop');\r\n                    event.currentTarget.classList.add('wptb-allow-drop');\r\n                    if (event.type == 'dragover') {\r\n                        //event.stopPropagation();\r\n                        event.preventDefault();\r\n                        return true;\r\n                    }\r\n                };\r\n        cell.classList.add('wptb-droppable', 'wptb-cell');  \r\n\r\n        cell.onclick = selectIndividualCell;\r\n        cell.onmousedown = startCellSelection;\r\n        cell.onmouseover = goOnWithCellSelection;\r\n        cell.onmouseup = endCellSelection;\r\n        return cell;\r\n    }\r\n\r\n    window.selectIndividualCell = function(){\r\n        \r\n        for (var i = 0; i < selectedCells.length; i++) {\r\n            selectedCells[i].classList.remove('highlighted');\r\n        }\r\n\r\n        window.selectedCells = [this];\r\n        window.activeColumn = this.dataset.xIndex;\r\n        window.activeRow = this.dataset.yIndex;\r\n        undoAllPreviousHighlights();\r\n        activateIndividualActions();\r\n        deactivateNoneActions();\r\n        deactivateGroupActions();\r\n        highlightRow(this);\r\n        highlightColumn(this);\r\n        this.classList.add('highlighted');\r\n        console.log('Coords',parseInt(this.dataset.xIndex) , parseInt(this.dataset.yIndex) );\r\n        console.log(this);\r\n        var buttons = document.getElementsByClassName('wptb-relative-action');\r\n        for (var i = 0; i < buttons.length; i++) {\r\n            buttons[i].dataset.xIndex = this.dataset.xIndex;\r\n            buttons[i].dataset.yIndex = this.dataset.yIndex;\r\n        }\r\n    }\r\n\r\n    window.undoAllPreviousHighlights = function(){\r\n        var params = window.getParameters(),tds;\r\n        for (var i = 0; i < params.trs.length; i++) {\r\n            tds = params.trs[i].getElementsByTagName('td');\r\n            for (var j = 0; j < tds.length; j++) {\r\n                tds[j].classList.remove('highlighted');\r\n                tds[j].classList.remove('highlighted-row-first');\r\n                tds[j].classList.remove('highlighted-row-inner');\r\n                tds[j].classList.remove('highlighted-row-last');\r\n                tds[j].classList.remove('highlighted-column-first');\r\n                tds[j].classList.remove('highlighted-column-inner');\r\n                tds[j].classList.remove('highlighted-column-last');  \r\n            }\r\n        } \r\n        window.selectedCells = [];\r\n    };\r\n\r\n    window.activateNoneActions = function(){\r\n\r\n        var inputs = document.getElementsByClassName('none');\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            inputs[i].disabled=false;\r\n        }\r\n    };\r\n\r\n    window.deactivateNoneActions = function(){\r\n\r\n        var inputs = document.getElementsByClassName('none');\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            inputs[i].disabled=true;\r\n        }\r\n    };\r\n\r\n    window.activateIndividualActions = function(){\r\n\r\n        var inputs = document.getElementsByClassName('individual');\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            inputs[i].disabled=false;\r\n        }\r\n\r\n    };\r\n\r\n    window.deactivateGroupActions = function(){\r\n\r\n        var inputs = document.getElementsByClassName('group');\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            inputs[i].disabled=true;\r\n        }\r\n    };\r\n\r\n    window.activateGroupActions = function(){\r\n\r\n        var inputs = document.getElementsByClassName('group');\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            inputs[i].disabled=false;\r\n        }\r\n    };\r\n\r\n    window.deactivateIndividualActions = function(){\r\n\r\n        var inputs = document.getElementsByClassName('individual');\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            inputs[i].disabled=true;\r\n        }\r\n    };\r\n\r\n    window.highlightRow = function(td){\r\n        var parentRow = td.parentNode,\r\n            columnCount = parseInt(document.getElementById('wptb-columns-number').value);\r\n            for (var i = 0; i < columnCount; i++) {\r\n                var classToAdd = (i == 0 ? 'highlighted-row-first' : \r\n                                (i == columnCount-1 ? 'highlighted-row-last' \r\n                                    : 'highlighted-row-inner'));\r\n                var ttd = parentRow.getElementsByTagName('td')[i];\r\n                if(ttd!==td){\r\n                ttd.classList.add(classToAdd);\r\n                }\r\n            }\r\n    };\r\n\r\n    window.highlightColumn = function(td){\r\n       \r\n        var index,\r\n            parentRow = td.parentNode;\r\n            columnCount = parseInt(document.getElementById('wptb-columns-number').value),\r\n            rowCount = parseInt(document.getElementById('wptb-rows-number').value),\r\n            table = document.getElementsByClassName('wptb-preview-table')[0];\r\n            for (var i = 0; i < columnCount; i++) {\r\n                if(parentRow.getElementsByTagName('td')[i] === td ){\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            for (var i = 0; i < rowCount; i++) {\r\n                var classToAdd = (i == 0 ? 'highlighted-column-first' : \r\n                                (i == rowCount-1 ? 'highlighted-column-last' \r\n                                    : 'highlighted-column-inner'));\r\n                var tr = table.getElementsByTagName('tr')[i];\r\n                if(tr.getElementsByTagName('td')[index]!==td){\r\n                    tr.getElementsByTagName('td')[index].classList.add(classToAdd);\r\n                }\r\n            }\r\n    };\r\n\r\n    window.startCellSelection = function(){\r\n        this.classList.add('highlighted');\r\n        window.selectMode = true;\r\n        window.selectedCells.push(this);\r\n    };\r\n\r\n    window.goOnWithCellSelection = function(){\r\n        if(window.selectMode){\r\n        this.classList.add('highlighted');\r\n        window.selectedCells.push(this);\r\n        }\r\n    };\r\n\r\n    window.endCellSelection = function(){\r\n        window.selectMode = false;\r\n        activateGroupActions();\r\n        deactivateIndividualActions();\r\n        deactivateNoneActions();\r\n    };\r\n\r\n    window.mergeCells = function () {\r\n        var firstCell = window.selectedCells[0],\r\n            lastCell = window.selectedCells[window.selectedCells.length-1],\r\n            colspan = Math.abs(lastCell.dataset.xIndex - firstCell.dataset.xIndex) + 1,\r\n            rowspan = Math.abs(lastCell.dataset.yIndex - firstCell.dataset.yIndex) + 1;\r\n        \r\n        for (var i = 1; i < window.selectedCells.length; i++) {\r\n            var p = window.selectedCells[i].parentNode;\r\n            p.removeChild(window.selectedCells[i]);\r\n            delete window.selectedCells[i];\r\n        }\r\n        \r\n        if( colspan > 1 ){\r\n            firstCell.colSpan = colspan;\r\n        }\r\n\r\n        if( rowspan > 1 ){\r\n            firstCell.rowSpan = rowspan;\r\n        }\r\n    }\r\n\r\n    window.splitCells = function(){\r\n\r\n    }\r\n\r\n    /*\r\n     * This function finds the table cell DOM element for its coordinates\r\n     *\r\n     * @param int the number of row\r\n     * @param int the number of column\r\n     * @returns object\r\n     */\r\n\r\n    window.getCellByCoords = function(x,y){\r\n        return document\r\n        .getElementsByClassName('wptb-preview-table')[0]\r\n        .getElementsByTagName('tr')[y]\r\n        .getElementsByTagName('td')[x];\r\n    };\r\n\r\n    /*\r\n     * This function checks wether we should make the selection squared \r\n     *\r\n     * @returns boolean\r\n     * @see makeSquareSelection\r\n     */\r\n\r\n    window.makeSelection = function(startPoint){\r\n        var cell;\r\n\r\n        undoAllPreviousHighlights();\r\n\r\n        selectedCells = [];\r\n\r\n        selectedCells.push(cell);\r\n\r\n        for (var i = 0; i < selectionHeight; i++) {\r\n            for (var j = 0; j < selectionWidth; j++) {\r\n                cell = getCellByCoords(parseInt(startPoint.dataset.xIndex) + j, parseInt(startPoint.dataset.yIndex) + i);\r\n                if(cell.colSpan  && cell.colSpan > 1){ \r\n                    j += cel.colSpan - 1 //Let's remember j is incremented by 1 at each iteration anyways. \r\n                }\r\n                cell.classList.add('highlighted');\r\n                selectedCells.push(cell);\r\n            }\r\n        }\r\n    };\r\n\r\n})(jQuery);","(function ($) {\r\n    \r\n    //When dragging starts for all elements from Add Items panel\r\n\r\n    window.itemDragStart = function(event) {\r\n\r\n        event.preventDefault();\r\n\r\n        if ( ! event.target.classList.contains('wptb-draggable-prototype')  ) {\r\n                    return;\r\n                }\r\n        \r\n        var dragEl = event.target;\r\n\r\n        while(! dragEl.classList.contains('wptb-element')){\r\n            dragEl = dragEl.parentNode;\r\n        }\r\n        \r\n        \r\n        window.currentlyDragging = true;\r\n        window.elementToDrag = dragEl.cloneNode(true);\r\n        window.elementToDrag.style.position='absolute';\r\n        window.elementToDrag.style.zIndex = '110000';\r\n        window.elementToDrag.style.left = event.clientX+'px';\r\n        window.elementToDrag.style.top = event.clientY+'px'; \r\n        window.elementToDrag.style.width = 'auto';\r\n        window.elementToDrag.classList.remove('wptb-draggable-prototype');\r\n        window.elementToDrag.classList.add('wptb-draggable');\r\n        document.body.classList.add('wptb-state-dragging');\r\n        document.body.appendChild(window.elementToDrag);\r\n       /* window.currentlyDragging = true;\r\n        wptbElement = event.target.id.substring(5, event.target.id.length);\r\n \r\n        event.dataTransfer.effectAllowed = 'move';\r\n        event.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id')); */\r\n    }\r\n\r\n    window.putItemDragStart = function(){\r\n        var temp = this;\r\n        \r\n        while(!temp.classList.contains('wptb-ph-element')){\r\n            temp = temp.parentNode;\r\n        } \r\n \r\n        window.alreadyPut = true;\r\n        window.currentlyDragging = true;\r\n        window.elementToDrag = temp;\r\n        window.elementToDrag.style.position='absolute';\r\n        window.elementToDrag.style.zIndex = '110000';\r\n        window.elementToDrag.style.left = event.clientX+'px';\r\n        window.elementToDrag.style.top = event.clientY+'px'; \r\n        window.elementToDrag.style.width = 'auto'; \r\n        document.body.classList.add('wptb-state-dragging');\r\n        window.nextSpace = temp.nextSibling;\r\n    }\r\n\r\n    /*\r\n    This function, checking if there is currently an element being dragged,\r\n    updates its position on the screen. I see coming the hardest part: to put it inside\r\n    a droppable element, but without using droppable.\r\n    */\r\n\r\n        window.onmousemove = function(event){\r\n        event.preventDefault();\r\n \r\n\r\n        if(window.currentlyDragging === undefined ){ \r\n            return;\r\n        } \r\n        if(window.alreadyPut){\r\n            var offsetX = document.getElementsByClassName('wptb-builder-panel')[0].getBoundingClientRect().x,\r\n                offsetY = document.getElementsByClassName('wptb-builder-panel')[0].getBoundingClientRect().y;\r\n           \r\n            window.elementToDrag.style.left = (event.clientX - offsetX + 15)+'px';\r\n            window.elementToDrag.style.top = (event.clientY - offsetY + 15)+'px';\r\n        }\r\n        else{\r\n            window.elementToDrag.style.left = event.clientX+'px';\r\n            window.elementToDrag.style.top = event.clientY+'px';\r\n        }\r\n    };\r\n\r\n    window.makeSpace = function(){\r\n        var spaceBetween = document.createElement('div'),\r\n                        insertHere = document.createElement('div'),\r\n                        spanInsert = document.createElement('span'),\r\n                        newNode, el =window.elementToDrag.id.substring(5,\r\n            window.elementToDrag.id.length);\r\n\r\n                    spaceBetween.onmouseover = function(evt){\r\n                        if(window.currentlyDragging)\r\n                        this.childNodes[0].style.display = 'block';\r\n                    };\r\n\r\n                    spaceBetween.onmouseout = function(evt){\r\n                        this.childNodes[0].style.display = 'none';\r\n                    };\r\n\r\n                    spanInsert.innerHTML = 'Insert Here';\r\n                    spaceBetween.classList.add('wptb-space-between');\r\n                    insertHere.classList.add('wptb-insert-here');\r\n                    spaceBetween.appendChild(insertHere);\r\n                    insertHere.appendChild(spanInsert);\r\n        return spaceBetween;\r\n    }\r\n\r\n    /*\r\n     * This deletes absolute positioning and z-index from dragging item\r\n     * \r\n     * @param object the node to cleanse\r\n     */\r\n\r\n    window.trimInlineStyle = function(el){\r\n        el.style.top='auto';\r\n        el.style.left='auto';\r\n        el.style.position='relative';\r\n        el.style.width='100%';\r\n        el.style.zIndex='auto';\r\n    }\r\n\r\n    /*\r\n     * Here we save ourselves a few code lines since this is made twice in next function\r\n     * \r\n     * @param string the currently selected new item to create\r\n     * @return object the new node\r\n     */\r\n\r\n    window.newItemProxy = function(el){\r\n        if(el == 'list'){\r\n                return window.newList();\r\n            }\r\n            else if(el == 'image'){\r\n                return window.newImage();\r\n            }   \r\n            else if(el == 'text'){\r\n                return window.newText();\r\n            }\r\n            else if(el == 'button'){\r\n                return window.newButton();\r\n            }\r\n    }\r\n\r\n    /* Well, this function has turned out to be so complicated\r\n     * for me keeping track of it without notes.\r\n     *\r\n     */\r\n\r\n        window.onmouseup = function(event){ \r\n\r\n            // There's nothing to do on mouse button being released if there is no item being dragged\r\n\r\n        if(window.currentlyDragging == undefined ){\r\n            return;\r\n        }\r\n\r\n        var p = window.elementToDrag.parentNode;\r\n\r\n        // Item just can be dropped in spaces between elements or in empty cells\r\n        \r\n        if( ! event.target.classList.contains('wptb-droppable') \r\n            && ! event.target.classList.contains('wptb-space-between')\r\n            && ! event.target.classList.contains('wptb-insert-here') ){\r\n            window.currentlyDragging = undefined;\r\n\r\n            if(alreadyPut == undefined){\r\n                p.removeChild(window.elementToDrag);\r\n            }\r\n            else{\r\n                window.trimInlineStyle(window.elementToDrag);\r\n                alreadyPut = undefined;\r\n            }\r\n\r\n            window.elementToDrag = undefined;\r\n            document.body.classList.remove('wptb-state-dragging');\r\n            return;\r\n        }  \r\n\r\n        //If item is being released in a cell\r\n\r\n        if(event.target.classList.contains('wptb-droppable')){\r\n            \r\n            var sp2 = window.makeSpace();\r\n\r\n            console.log('Item is being released in a cell');\r\n            \r\n            if(event.target.innerHTML==''){\r\n                var sp1 = window.makeSpace();\r\n                event.target.appendChild(sp1);\r\n            }\r\n            \r\n            if(window.alreadyPut == undefined)\r\n            {\r\n                var newNode = window.newItemProxy(window.elementToDrag.id.substring(5, \r\n                        window.elementToDrag.id.length));\r\n                event.target.appendChild(newNode);\r\n                event.target.appendChild(sp2);\r\n                p.removeChild(window.elementToDrag);\r\n                console.log('Additionally, we are creating a new item');\r\n            }\r\n\r\n            else\r\n            {\r\n                console.log('We are just moving an item');\r\n                window.trimInlineStyle(window.elementToDrag);\r\n                event.target.appendChild(window.elementToDrag);\r\n                event.target.appendChild(sp2);\r\n\r\n                if(window.nextSpace != undefined){\r\n                    var p = window.nextSpace.parentNode;\r\n                    p.removeChild(window.nextSpace);\r\n                    window.nextSpace = undefined;\r\n                }\r\n            }\r\n\r\n        }\r\n        else{ // If item is being released in a space\r\n            console.log('Item is being released in space');\r\n\r\n            var p = event.target.parentNode.nextSibling,\r\n                td = event.target; \r\n\r\n                while(!td.classList.contains('wptb-droppable')){\r\n                    td = td.parentNode;\r\n                }\r\n\r\n            if(window.alreadyPut == undefined)\r\n            {\r\n            var newNode = window.newItemProxy(window.elementToDrag.id.substring(5, \r\n                        window.elementToDrag.id.length));\r\n                \r\n \r\n\r\n            if(p == null){\r\n                td.appendChild(newNode);\r\n                td.appendChild(window.makeSpace());\r\n            }\r\n            else{\r\n                td.insertBefore(newNode,p);\r\n                td.insertBefore(window.makeSpace(),p);\r\n            }\r\n            document.body.removeChild(window.elementToDrag);\r\n\r\n            console.log('Additionally, we are creating a new item');\r\n\r\n            }\r\n\r\n            else\r\n            {\r\n            console.log('We are just moving an item');\r\n\r\n            if(p == null){\r\n                td.appendChild(window.elementToDrag);\r\n                td.appendChild(window.makeSpace());\r\n            }\r\n            else{\r\n                td.insertBefore(window.elementToDrag,p);\r\n                td.insertBefore(window.makeSpace(),p);\r\n            }\r\n            window.trimInlineStyle(window.elementToDrag);\r\n                \r\n                if(window.nextSpace != undefined){\r\n                    var p = window.nextSpace.parentNode;\r\n                    p.removeChild(window.nextSpace);\r\n                    window.nextSpace = undefined;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /*\r\n        if(window.alreadyPut == undefined )\r\n        { \r\n            \r\n\r\n            if(! event.target.classList.contains('wptb-space-between')){\r\n            event.target.appendChild(spaceBetween);  \r\n            }\r\n            else{\r\n                var p = event.target.parentNode;\r\n\r\n                 if(event.target.nextSibling != undefined){\r\n                    p.insertBefore(newNode,event.target.nextSibling);\r\n                }\r\n                else{\r\n                    p.appendChild(newNode);\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            window.elementToDrag.style.top='auto';\r\n            window.elementToDrag.style.left='auto';\r\n            window.elementToDrag.style.position='relative';\r\n            window.elementToDrag.style.width='100%';\r\n            window.elementToDrag.style.zIndex='auto';\r\n            if(! event.target.classList.contains('wptb-space-between'))\r\n            {\r\n                event.target.appendChild(spaceBetween);  \r\n            }\r\n            else\r\n            {  \r\n                var p = event.target.parentNode;\r\n                if(event.target.nextSibling != undefined){\r\n                    p.insertBefore(window.elementToDrag,event.target.nextSibling);\r\n                }\r\n                else{\r\n                    p.appendChild(window.elementToDrag);\r\n                }\r\n                \r\n            }\r\n        } */\r\n            window.alreadyPut = undefined;\r\n            document.body.classList.remove('wptb-state-dragging');\r\n            window.currentlyDragging = undefined;\r\n            window.elementToDrag = undefined;\r\n    };\r\n\r\n})(jQuery);","(function ($) {\r\n\r\n    window.copyImage = function (event) {\r\n        var srcList = event.target.parentNode.parentNode,\r\n            newList = srcList.cloneNode(true),\r\n            container = srcList.parentNode,\r\n            listItems = newList.querySelectorAll('article');\r\n        newList.onmouseenter = showListSettings;\r\n        newList.onmouseleave = hideListSettings;\r\n        for (var i = listItems.length - 1; i >= 0; i--) {\r\n            let cont = listItems[i].getElementsByClassName('wptb-list-item-content')[0];\r\n            listItems[i].onmouseenter = showListItemSettings;\r\n            listItems[i].onmouseleave = hideListItemSettings;\r\n            cont.id = '';\r\n            tinyFastCall(cont);\r\n            cont.onkeyup = listItemKeyListener;\r\n        }\r\n\r\n        var infArr = newList.className.match(/wptb-element-(.+)-(\\d)+/i),\r\n            elName = infArr[1],\r\n            oldClass = infArr[0],\r\n            oldClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + infArr[2];\r\n\r\n        var newOptionsPanel = $('.' + oldClassOptionsPanelClass).clone(true, true),\r\n            oldOptionsPanel = document.querySelector('.' + oldClassOptionsPanelClass);\r\n        oldOptionsPanel.parentNode.appendChild(newOptionsPanel[0]);\r\n\r\n        var newClass = \"wptb-element-\" + elName + \"-\" + wptb_num['list'];\r\n        var newClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + wptb_num['list'];\r\n\r\n        newList.classList.add(newClass);\r\n        newList.classList.remove(oldClass);\r\n\r\n        newOptionsPanel.removeClass(oldClassOptionsPanelClass);\r\n        newOptionsPanel.addClass(newClassOptionsPanelClass);\r\n\r\n        wptb_num['list']++;\r\n\r\n        container.appendChild(newList);\r\n    }\r\n\r\n    window.showImageSettings = function (event) {\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        delete document.getElementsByClassName('wptb-actions');\r\n        previous = document.getElementsByClassName('wptb-directlyhovered');\r\n        for (i = 0; i < previous.length; i++) {\r\n            previous[i].classList.remove('wptb-directlyhovered');\r\n        };\r\n        this.classList.add('wptb-directlyhovered');\r\n\r\n        btnDelete.onclick = function () {\r\n            var list = this.parentNode.parentNode,\r\n                tdContainer = list.parentNode;\r\n            $('#add-elements a').trigger('click');\r\n            tdContainer.removeChild(list);\r\n        };\r\n        btnCopy.onclick = copyList;\r\n\r\n        actions.append(btnCopy, btnDelete);\r\n        this.append(actions);\r\n    };\r\n\r\n    window.hideImageSettings = function (event) {\r\n        this.classList.remove('wptb-directlyhovered');\r\n        var actions = this.getElementsByClassName('wptb-actions')[0];\r\n        if (actions != undefined) {\r\n            let parent = actions.parentNode;\r\n            parent.removeChild(actions);\r\n        }\r\n    };\r\n\r\n    window.newImage = function (text) {\r\n        var imgWrap = document.createElement('div')\r\n        imgWrap.classList.add('wptb-img-wrapper')\r\n        var imgBtn = document.createElement('button')\r\n        imgBtn.classList.add('button')\r\n        imgBtn.classList.add('wptb-img-btn')\r\n        imgBtn.innerHTML = text != undefined ? text : 'Choose Image'\r\n        imgWrap.appendChild(imgBtn)\r\n        return imgWrap\r\n    }\r\n\r\n})(jQuery);","(function ($) {\r\n\r\n    window.tinyFastCall = function (obj) {\r\n        tinyMCE.init({\r\n            target: obj,\r\n            inline: true,\r\n            plugins: \"link\",\r\n            dialog_type: \"modal\",\r\n            theme: 'modern',\r\n            menubar: false,\r\n            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\r\n        });\r\n    }\r\n\r\n    window.copyList = function (event) {\r\n        var srcList = event.target.parentNode.parentNode,\r\n            newList = srcList.cloneNode(true),\r\n            container = srcList.parentNode,\r\n            listItems = newList.querySelectorAll('article');\r\n        newList.onmouseenter = showListSettings;\r\n        newList.onmouseleave = hideListSettings;\r\n        for (var i = listItems.length - 1; i >= 0; i--) {\r\n            let cont = listItems[i].getElementsByClassName('wptb-list-item-content')[0];\r\n            console.log(cont);\r\n            listItems[i].onmouseenter = showListItemSettings;\r\n            listItems[i].onmouseleave = hideListItemSettings;\r\n            cont.id = '';\r\n            tinyFastCall(cont);\r\n            cont.onkeyup = listItemKeyListener;\r\n        }\r\n\r\n\r\n        var infArr = newList.className.match(/wptb-element-(.+)-(\\d)+/i),\r\n            elName = infArr[1],\r\n            oldClass = infArr[0],\r\n            oldClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + infArr[2];\r\n\r\n        var newOptionsPanel = $('.' + oldClassOptionsPanelClass).clone(true, true),\r\n            oldOptionsPanel = document.querySelector('.' + oldClassOptionsPanelClass);\r\n        oldOptionsPanel.parentNode.appendChild(newOptionsPanel[0]);\r\n\r\n        var newClass = \"wptb-element-\" + elName + \"-\" + wptb_num['list'];\r\n        var newClassOptionsPanelClass = \"wptb-options-\" + elName + \"-\" + wptb_num['list'];\r\n\r\n        newList.classList.add(newClass);\r\n        newList.classList.remove(oldClass);\r\n\r\n        newOptionsPanel.removeClass(oldClassOptionsPanelClass);\r\n        newOptionsPanel.addClass(newClassOptionsPanelClass);\r\n\r\n        wptb_num['list']++;\r\n\r\n        container.appendChild(newList);\r\n    }\r\n\r\n    window.showListSettings = function (event) {\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        actions.innerHTML = 'List Actions';\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        delete document.getElementsByClassName('wptb-actions');\r\n        previous = document.getElementsByClassName('wptb-directlyhovered');\r\n        for (i = 0; i < previous.length; i++) {\r\n            previous[i].classList.remove('wptb-directlyhovered');\r\n        };\r\n        this.classList.add('wptb-directlyhovered');\r\n\r\n        btnDelete.onclick = function () {\r\n            var list = this.parentNode.parentNode,\r\n                tdContainer = list.parentNode;\r\n            tdContainer.removeChild(list);\r\n\r\n            $('.wptb-tab#element-options  a').removeClass('active');\r\n            $('.wptb-tab#add-elements a').addClass('active');\r\n\r\n            $('.wptb-elements-container').show();\r\n            $('.wptb-settings-section').show();\r\n            $(\"#element-options-group\").hide();\r\n        };\r\n        btnCopy.onclick = copyList;\r\n\r\n        actions.append(btnCopy, btnDelete);\r\n        this.append(actions);\r\n    };\r\n\r\n    window.hideListSettings = function (event) {\r\n        this.classList.remove('wptb-directlyhovered');\r\n        var actions = this.getElementsByClassName('wptb-actions')[0];\r\n        if (actions != undefined) {\r\n            let parent = actions.parentNode;\r\n            parent.removeChild(actions);\r\n        }\r\n    };\r\n\r\n    window.showListItemSettings = function (event) {\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        actions.innerHTML = 'Item Actions';\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n\r\n        previousAct = document.getElementsByClassName('wptb-actions');\r\n        for (i = 0; i < previousAct.length; i++) {\r\n            let par = previousAct[i].parentNode;\r\n            par.removeChild(previousAct[i]);\r\n        };\r\n\r\n        previous = document.getElementsByClassName('wptb-directlyhovered');\r\n        for (i = 0; i < previous.length; i++) {\r\n            previous[i].classList.remove('wptb-directlyhovered');\r\n        };\r\n        this.classList.add('wptb-directlyhovered');\r\n\r\n        btnDelete.onclick = function () {\r\n            var item = this.parentNode.parentNode,\r\n                parent = item.parentNode;\r\n            parent.removeChild(item);\r\n        };\r\n\r\n        btnCopy.onclick = function (event) {\r\n            var article = event.target.parentNode.parentNode,\r\n                content = article.querySelector('.wptb-list-item-content'),\r\n                html = content.innerHTML;\r\n            var duplicate = newListItem(html);\r\n            article.parentNode.appendChild(duplicate);\r\n        };\r\n\r\n        actions.append(btnCopy, btnDelete); \r\n        this.parentNode.appendChild(actions);\r\n\r\n    };\r\n\r\n    window.hideListItemSettings = function (event) {\r\n        this.classList.remove('wptb-directlyhovered');\r\n        var actions = this.querySelector('.wptb-actions');\r\n        if (actions != undefined) {\r\n            let parent = actions.parentNode;\r\n            parent.removeChild(actions);\r\n        }\r\n    };\r\n\r\n    window.newListItem = function (text) {\r\n        if (text == undefined) text = 'New List Item';\r\n        var duplicate = document.createElement('article');\r\n        var divdot = document.createElement('div'),\r\n            divcontent = document.createElement('div'),\r\n            libullet = document.createElement('li');\r\n        divdot.classList.add('wptb-list-item-style-dot');\r\n        divcontent.classList.add('wptb-list-item-content');\r\n        libullet.classList.add('wptb-bullet');\r\n        duplicate.appendChild(divdot);\r\n        duplicate.appendChild(divcontent);\r\n        divdot.appendChild(libullet);\r\n        divcontent.innerHTML = text;\r\n        tinyFastCall(divcontent);\r\n        divcontent.onkeyup = window.listItemKeyListener;\r\n        divcontent.onmouseenter = function (event) {\r\n            var previous = document.getElementsByClassName('wptb-directlyhovered');\r\n            for (i = 0; i < previous.length; i++) {\r\n                previous[i].classList.remove('wptb-directlyhovered');\r\n            };\r\n            this.classList.add('wptb-directlyhovered');\r\n        };\r\n        divcontent.onmouseleave = function (event) {\r\n            this.classList.remove('wptb-directlyhovered');\r\n        };\r\n        divcontent.onmouseenter = showListItemSettings;\r\n        divcontent.onmouseleave = hideListItemSettings;\r\n        return duplicate;\r\n    }\r\n\r\n    window.listItemKeyListener = function (event) { \r\n        var key = (event.which != undefined) ? event.which\r\n            : event.keyCode,\r\n            liEl = $(this).parent(),\r\n            duplicate, lastP;\r\n        if (key !== 13 || \r\n        (window.dontAddItems !== undefined && window.dontAddItems === true) ){\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        duplicate = newListItem();\r\n        liEl.after(duplicate);\r\n        duplicate.querySelector('.wptb-list-item-content').focus();\r\n\r\n        lastP = this.childNodes[this.childNodes.length - 1];\r\n        this.removeChild(lastP);\r\n        if (this.innerHTML.trim() == '<p><br data-mce-bogus=\"1\"></p>') {\r\n            this.innerHTML = 'New List Item';\r\n        }\r\n        return false;\r\n    };\r\n\r\n    window.inputNumber = function (el) {\r\n\r\n        var min = el.attr('min') || false;\r\n        var max = el.attr('max') || false;\r\n\r\n        var els = {};\r\n\r\n        els.dec = el.prev();\r\n        els.inc = el.next();\r\n\r\n        el.each(function () {\r\n            init(this);\r\n        });\r\n\r\n        function init(el) {\r\n\r\n            els.dec[0].onclick = decrement;\r\n            els.inc[0].onclick = increment;\r\n\r\n            els.dec.onmousedown= function (e) {\r\n                e.preventDefault();\r\n            };\r\n\r\n            els.inc.onmousedown = function (e) {\r\n                e.preventDefault();\r\n            };\r\n\r\n            function decrement() { \r\n                var value = el.value;\r\n                value--;\r\n                if (!min || value >= min) {\r\n                    el.value = value;\r\n                }\r\n            }\r\n\r\n            function increment() { \r\n                var value = el.value;\r\n                value++;\r\n                if (!max || value <= max) {\r\n                    el.value = value++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n})(jQuery);","(function ($) {\r\n\r\n    window.copyList = function (event) {\r\n        var td = event.target.parentNode.parentNode.parentNode,\r\n            temp = [],\r\n            srcList = event.target.parentNode.parentNode.querySelectorAll('ul article .wptb-list-item-content');\r\n\r\n        for (var i = 0; i < srcList.length; i++) {\r\n            temp.push(srcList[i].innerHTML);\r\n        }\r\n        var copy = newList(temp);\r\n        td.appendChild(copy);\r\n    }\r\n\r\n    window.deleteList = function () {\r\n        var act = this.parentNode.parentNode,\r\n            el = act.parentNode;\r\n        el.removeChild(act);\r\n        window.add_Elements_tab();\r\n    }\r\n\r\n    window.showListSettings = function (event) {\r\n\r\n        if(window.currentlyDragging != undefined){\r\n            return;\r\n        }\r\n        \r\n        this.classList.add('wptb-directlyhovered');\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            btnMove = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\r\n        btnDelete.onclick = window.deleteList;\r\n        btnCopy.onclick = window.copyList;\r\n        btnMove.onmousedown = window.putItemDragStart;\r\n        actions.appendChild(btnMove);\r\n        actions.appendChild(btnCopy);\r\n        actions.appendChild(btnDelete);\r\n        this.appendChild(actions);\r\n    };\r\n\r\n    window.hideListSettings = function (event) {\r\n        this.classList.remove('wptb-directlyhovered');\r\n        var actions = this.querySelector('.wptb-actions');\r\n        if (actions != undefined) {\r\n            let parent = actions.parentNode;\r\n            parent.removeChild(actions);\r\n        }\r\n    };\r\n\r\n    window.showListItemSettings = function (event) {\r\n\r\n        if(window.currentlyDragging != undefined){\r\n            return;\r\n        }\r\n        //el Article\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        this.classList.add('wptb-directlyhovered');\r\n\r\n        btnDelete.onclick = function () {\r\n            var item = this.parentNode.parentNode,\r\n                parent = item.parentNode;\r\n            parent.removeChild(item);\r\n        };\r\n\r\n        btnCopy.onclick = function (event) {\r\n            var article = event.target.parentNode.parentNode,\r\n                content = article.querySelector('.wptb-list-item-content'),\r\n                html = content.innerHTML;\r\n            var duplicate = newListItem(html);\r\n            article.parentNode.appendChild(duplicate);\r\n        };\r\n\r\n        actions.append(btnCopy, btnDelete);\r\n        this.appendChild(actions);\r\n    };\r\n\r\n    window.hideListItemSettings = function (event) {\r\n        this.classList.remove('wptb-directlyhovered');\r\n        var actions = this.parentNode.querySelector('.wptb-actions');\r\n        if (actions != undefined) {\r\n            let parent = actions.parentNode;\r\n            parent.removeChild(actions);\r\n        }\r\n    };\r\n\r\n    window.newList = function (innerElements) {\r\n        var elList = document.createElement('div');\r\n        //elList.classList.add('editable');\r\n        var el_L = document.createElement('ul');\r\n        if (!innerElements)\r\n            for (var i = 0; i < 3; i++) {\r\n                el_L.appendChild(newListItem('List Item ' + (i + 1)));\r\n            }\r\n        else {\r\n            for (var i = 0; i < innerElements.length; i++) {\r\n                el_L.appendChild(newListItem(innerElements[i]));\r\n            }\r\n        }\r\n        elList.appendChild(el_L);\r\n        elList.onmouseenter = showListSettings;\r\n        elList.onmouseleave = hideListSettings;\r\n        elList.classList.add('wptb-ph-element', 'wptb-element-list-' + window.wptb_num['list']);\r\n        window.addElementOptions('list', elList);\r\n        window.wptb_num['list']++;\r\n\r\n        return elList;\r\n    }\r\n\r\n    window.newListItem = function (text) {\r\n        if (text == undefined) text = 'New List Item';\r\n        var duplicate = document.createElement('article');\r\n        var divdot = document.createElement('div'),\r\n            divcontent = document.createElement('div'),\r\n            libullet = document.createElement('li');\r\n        divdot.classList.add('wptb-list-item-style-dot');\r\n        divcontent.classList.add('wptb-list-item-content');\r\n        libullet.classList.add('wptb-bullet');\r\n        duplicate.appendChild(divdot);\r\n        duplicate.appendChild(divcontent);\r\n        divdot.appendChild(libullet);\r\n        divcontent.innerHTML = text;\r\n        tinyFastCall(divcontent);\r\n        divcontent.onkeyup = window.listItemKeyListener;\r\n        divcontent.parentNode.onmouseenter = window.showListItemSettings;\r\n        divcontent.parentNode.onmouseleave = window.hideListItemSettings;\r\n        return duplicate;\r\n    }\r\n\r\n    window.listItemKeyListener = function (event) {\r\n        var key = (event.which != undefined) ? event.which :\r\n            event.keyCode,\r\n            liEl = $(this).parent(),\r\n            duplicate, lastP;\r\n        if (key !== 13 ||\r\n            (window.dontAddItems !== undefined && window.dontAddItems === true)) {\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        duplicate = newListItem();\r\n        liEl.after(duplicate);\r\n        duplicate.querySelector('.wptb-list-item-content').focus();\r\n\r\n        lastP = this.childNodes[this.childNodes.length - 1];\r\n        this.removeChild(lastP);\r\n        if (this.innerHTML.trim() == '<p><br data-mce-bogus=\"1\"></p>') {\r\n            this.innerHTML = 'New List Item';\r\n        }\r\n        return false;\r\n    };\r\n\r\n})(jQuery);","(function ($) {\r\n\r\n    window.add_Elements_tab = function () {\r\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.remove('active');\r\n        document.getElementById('add-elements').getElementsByTagName('a')[0].classList.add('active');\r\n        document.getElementsByClassName('wptb-elements-container')[0].style.display = 'table';\r\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'block';\r\n        document.getElementById(\"element-options-group\").style.display = 'none';\r\n    };\r\n\r\n    window.Element_options_tab = function(){\r\n                document.getElementById('add-elements').getElementsByTagName('a')[0].classList.remove('active');\r\n                document.getElementById('element-options').getElementsByTagName('a')[0].classList.add('active');\r\n\r\n                document.getElementsByClassName('wptb-elements-container')[0].style.display = 'none';\r\n                document.getElementsByClassName('wptb-settings-section')[0].style.display = 'none';\r\n                document.getElementById(\"element-options-group\").style.display = 'block';\r\n                var children = document.getElementById(\"element-options-group\").childNodes;\r\n                for (var i = 0; i < children.length; i++) {\r\n                    if (children[i].style)\r\n                        children[i].style.display = 'none';\r\n                }\r\n            }\r\n\r\n    window.addElementOptions = function (wptbElement, el) {\r\n        var prop = $(\".wptb-\" + wptbElement + \"-options-prototype\").clone();\r\n        prop.removeClass(\"wptb-\" + wptbElement + \"-options-prototype\"); // remove prototype from the class\r\n        prop.addClass('wptb-options-' + wptbElement + \"-\" + wptb_num[wptbElement]);\r\n        document.getElementById(\"element-options-group\").appendChild(prop[0]);\r\n        //special cases to elements if needed\r\n        switch (wptbElement) {\r\n            case 'text':\r\n                listener_to_element(prop.find('.wptb-color-picker'));\r\n                prop.find('.wptb-color-picker').wpColorPicker();\r\n                break;\r\n        }\r\n        wptb_num[wptbElement]++;\r\n    };\r\n\r\n    /**\r\n    * This function is a fix for allowing us to send the add link form with an enter...\r\n    * \r\n    * @returns {void}\r\n    */\r\n\r\n    window.bindKeydownHandler = function(){\r\n        document.onkeydown = function (e) {\r\n                if (e.target.className === 'mce-textbox') {\r\n                    window.dontAddItems = true;\r\n                    if (event.which === 13 || event.which === 27) {\r\n                        setTimeout(function () {\r\n                            window.dontAddItems = false;\r\n                            document.querySelector('.wptb-list-item-content.mce-edit-focus').click();\r\n                        }, 250);\r\n                    }\r\n                }\r\n            };\r\n    };\r\n\r\n    /**\r\n     * to listen to the elements that will change dynamically\r\n     * change by other javascript code then will trigger the change event to them\r\n     * \r\n     * @param {string} element\r\n     * @returns {void}\r\n     */\r\n    window.listener_to_element = function (element) {\r\n        element.data('old_value', element.val());\r\n        window.setInterval(function () {\r\n            var value = element.val();\r\n            var old_value = element.data('old_value');\r\n            if (value != old_value) {\r\n                old_value = value;\r\n                element.trigger('change');\r\n            }\r\n        }, 300);\r\n    };\r\n\r\n    window.tryToChangeMCEWidth = function (e) {\r\n        var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\r\n\r\n        if (window.currentEditor &&\r\n            document.getElementById('wptb_builder').scrollTop >= 55 &&\r\n            window.currentEditor.bodyElement.style.display != 'none') {\r\n            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\r\n            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\r\n            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\r\n        } else {\r\n            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\r\n            delete document.getElementById('wpcd_fixed_toolbar').style.right;\r\n            delete document.getElementById('wpcd_fixed_toolbar').style.top;\r\n        }\r\n        //if(this.scrollTop > && )\r\n        //                document.getElementById('wpcd_fixed_toolbar').style.left = 'calc(50% - '+width+')';  \r\n    };\r\n\r\n    window.tinyFastCall = function (obj) {\r\n        tinyMCE.init({\r\n            target: obj,\r\n            inline: true,\r\n            plugins: \"link, paste\",\r\n            dialog_type: \"modal\",\r\n            theme: 'modern',\r\n            menubar: false,\r\n            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n            paste_as_text: true,\r\n            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\r\n            init_instance_callback: function (editor) {\r\n                window.currentEditor = editor;\r\n                editor.on('focus', function (e) {\r\n                    window.tryToChangeMCEWidth();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    window.inputNumber = function (el) {\r\n\r\n        var min = el.min || false;\r\n        var max = el.max || false;\r\n\r\n        var els = {};\r\n\r\n        els.dec = el.previousSibling;\r\n        els.inc = el.nextSibling;\r\n\r\n        init(el);\r\n\r\n        function init(el) {\r\n\r\n            els.dec.onclick = decrement;\r\n            els.inc.onclick = increment;\r\n\r\n            els.dec.onmousedown = function (e) {\r\n                e.preventDefault();\r\n            };\r\n\r\n            els.inc.onmousedown = function (e) {\r\n                e.preventDefault();\r\n            };\r\n\r\n            function decrement() {\r\n                var value = el.value;\r\n                value--;\r\n                if (!min || value >= min) {\r\n                    el.value = value;\r\n                }\r\n            }\r\n\r\n            function increment() {\r\n                var value = el.value;\r\n                value++;\r\n                if (!max || value <= max) {\r\n                    el.value = value++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n})(jQuery);","(function ($) {\r\n\r\n    window.selectedCells = [];\r\n\r\n    // Before this turns out to be a hell of code, we better comment it.\r\n\r\n    /**\r\n    * First function running after the user clicks on Generate button.\r\n    * \r\n    * @returns {void}\r\n    */\r\n\r\n    window.initTable = function () {\r\n\r\n            document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\r\n            var settings = document.getElementsByClassName('wptb-settings-items');\r\n            for (var i = 0; i < settings.length; i++) {\r\n                settings[i].classList.add('visible');\r\n            }\r\n\r\n            //Add Color Picker for Row and Header Background Colors\r\n            $('#wptb-even-row-bg').wpColorPicker();\r\n            $('#wptb-odd-row-bg').wpColorPicker();\r\n            $('#wptb-table-header-bg').wpColorPicker();\r\n\r\n            //Create a HTML Table element.\r\n            var table = document.createElement('table');\r\n            table.classList.add('wptb-preview-table');\r\n\r\n            //Get the count of columns and rows.\r\n            var columnCount = parseInt(document.getElementById('wptb-columns-number').value);\r\n            var rowCount = parseInt(document.getElementById('wptb-rows-number').value);\r\n\r\n            //Add the header row.\r\n            var row = table.insertRow(-1);\r\n            for (var i = 0; i < columnCount; i++) {\r\n                var headerCell = createCell();\r\n                row.appendChild(headerCell); \r\n                row.classList.add('wptb-table-head', 'wptb-row');\r\n                headerCell.dataset.yIndex = 0;\r\n                headerCell.dataset.xIndex = i;\r\n            }\r\n\r\n            //Add the data rows.\r\n            for (var i = 1; i < rowCount; i++) {\r\n                row = table.insertRow(-1);\r\n                for (var j = 0; j < columnCount; j++) {\r\n                    var headerCell = createCell();\r\n                    row.appendChild(headerCell);\r\n                    row.classList.add('wptb-row');\r\n                    headerCell.dataset.yIndex = i;\r\n                    headerCell.dataset.xIndex = j;\r\n                }\r\n            }\r\n\r\n            //Appending the table to the container in UI\r\n            var wptbTable = document.getElementsByClassName(\"wptb-table-setup\")[0];\r\n            wptbTable.innerHTML = '';\r\n            wptbTable.appendChild(table);\r\n\r\n            window.bindKeydownHandler();\r\n            window.bindClickHandler();\r\n            //On drag elements.\r\n            document.getElementById('wptb-text').onmousedown = window.itemDragStart;\r\n            document.getElementById('wptb-image').onmousedown = window.itemDragStart;\r\n            document.getElementById('wptb-button').onmousedown = window.itemDragStart;\r\n            document.getElementById('wptb-list').onmousedown = window.itemDragStart;\r\n            \r\n    }\r\n\r\n\r\n\r\n    /**\r\n    * A handler for click event in the page.\r\n    * \r\n    * @returns {void}\r\n    */\r\n\r\n    window.bindClickHandler = function(){\r\n\r\n         /*\r\n             * event click to the whole document and then check if it's to one\r\n             * the created element to show it's option\r\n             */\r\n            document.onclick = function (e) {\r\n                setTimeout(\r\n                    function () {\r\n                        //window.tryToChangeMCEWidth();\r\n                    }, 500);\r\n                var $this = $(e.target);\r\n\r\n                if(e.target.classList.contains('wptb-admin-container')\r\n                    || e.target.id == 'wpcd_fixed_toolbar'\r\n                    || e.target.classList.contains('wrapper')){\r\n                    window.selectionWidth = window.selectionHeight = 0;\r\n                    undoAllPreviousHighlights();\r\n                    activateNoneActions();\r\n                    deactivateIndividualActions();\r\n                    deactivateGroupActions();\r\n                }\r\n\r\n                if (e.target.className!==undefined \r\n                    && e.target.className.match(/delete-action/)) {\r\n                    return;\r\n                }\r\n                if (e.target.id.match(/mceu_([0-9])*-button/)) {\r\n                    window.dontAddItems = false;\r\n                }\r\n\r\n                var el_options = false; // this var will carry the element that will be shown its options\r\n\r\n                // check if this element or one of it's parent should display its options\r\n                if ($this.hasClass('wptb-ph-element')) {\r\n                    el_options = $this;\r\n                } else if ($this.parents().hasClass('wptb-ph-element')) {\r\n                    el_options = $this.parents('.wptb-ph-element');\r\n                }\r\n\r\n                // check to show element's options\r\n                if (el_options && el_options.length != 0) {\r\n                    window.Element_options_tab();\r\n\r\n                    /**\r\n                     * will carry the extracted infotrmation from the class\r\n                     * @example class => wptb-ph-element wptb-element-text-0\r\n                     *          result => [\r\n                     *              0 => wptb-element-text-0\r\n                     *              1 => text-0\r\n                     *              2 => text-\r\n                     *          ]\r\n                     * @type array\r\n                     */\r\n                    var infArr = el_options.attr('class').match(/wptb-element-((.+-)\\d+)/i);\r\n\r\n                    /*\r\n                     * will carry the class name of the element's options\r\n                     * @example wptb-text-options wptb-options-text-0\r\n                     * @type String\r\n                     */\r\n                    var optionsClass = '.wptb-' + infArr[2] + 'options' +\r\n                        '.wptb-options-' + infArr[1];\r\n                    $(optionsClass).show();\r\n\r\n                    //Binds the range slider and input for text font size.\r\n                    var sliders = document.getElementsByClassName('wptb-text-font-size-slider');\r\n                    for (var i = 0; i < sliders.length; i++) {\r\n                        sliders[i].onchange = function () {\r\n                            this.parentNode.parentNode.childNodes[3].childNodes[1].value = this.value;\r\n                        }\r\n                    }\r\n\r\n                    //Binds the range slider and input for text font size.\r\n                    var numbers = document.getElementsByClassName('wptb-text-font-size-number');\r\n                    for (var i = 0; i < numbers.length; i++) {\r\n                        numbers[i].onchange = function () {\r\n                            this.parentNode.parentNode.childNodes[1].childNodes[1].value = this.value;\r\n                        }\r\n                    }\r\n                } else {\r\n                    //show the add elements option\r\n                    if ($this.is('#add-elements') ||\r\n                        $this.parents('#add-elements').length !== 0 ||\r\n                        $this.hasClass('wptb-builder-panel') ||\r\n                        $this.parents('.wptb-builder-panel').length !== 0) {\r\n                        window.add_Elements_tab();\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.getElementById('wptb-add-end-row').onclick = addRowToTheEnd;\r\n            document.getElementById('wptb-add-start-row').onclick = addRowToTheStart;\r\n            document.getElementById('wptb-add-end-column').onclick = addColumnToTheEnd;\r\n            document.getElementById('wptb-add-start-column').onclick = addColumnToTheStart;\r\n            document.getElementById('wptb-delete-row').onclick = deleteRow;\r\n            document.getElementById('wptb-delete-column').onclick = deleteColumn;\r\n            document.getElementById('wptb-merge-cells').onclick = mergeCells;\r\n\r\n    };\r\n\r\n    /**\r\n    * This functions calculates table dimensions by counting its elements\r\n    * rather than trusting in current value of rows and columns number input elements.\r\n    * \r\n    * @returns object with rows and columns number\r\n    */\r\n\r\n    window.getActualTableDimensions = function(){\r\n            var table = document.getElementsByClassName('wptb-preview-table')[0],\r\n                rows = table.getElementsByTagName('tr'),\r\n                tds, cols = 0, dimensions;\r\n            for (var i = 0; i < rows.length; i++) {\r\n                tds = rows[i].getElementsByTagName('td');\r\n                if(tds.length > cols){\r\n                    cols = tds.length;\r\n                }\r\n            }\r\n            dimensions = {\r\n                    rows : rows.length,\r\n                    columns : cols \r\n                };\r\n            return dimensions;\r\n    };\r\n\r\n    /**\r\n    * This part of code is used often in add rows and columns functions,\r\n    * so I decided to put it apart.\r\n    * \r\n    * @returns object with table DOM object, all TRs DOM objects, table dimensions and tobdy DOM object\r\n    * @see getActualTableDimensions\r\n    */\r\n\r\n    window.getParameters = function(){\r\n        var t = document.getElementsByClassName('wptb-preview-table')[0];\r\n        return {\r\n            table : t,\r\n            dimensions : getActualTableDimensions(),\r\n            trs : t.getElementsByTagName('tr'),\r\n            tbody : t.childNodes[0]\r\n        };\r\n    };\r\n\r\n    /**\r\n    * A lot of functionality of the tables relies on current cell position,\r\n    + so each time we alter the dimensions by adding or deleting rows/columns,\r\n    * we must reassign to each cell its coordinates.\r\n    *\r\n    * @returns void\r\n    */\r\n\r\n    window.recalculateIndexes = function(){\r\n        var table = document.getElementsByClassName('wptb-preview-table')[0],\r\n            trs = table.getElementsByTagName('tr');\r\n        for (var i = 0; i < trs.length; i++) {\r\n            var tds = trs[i].getElementsByTagName('td');\r\n            for (var j = 0; j < tds.length; j++) {\r\n\r\n                if(i==0){ \r\n                    tds[j].parentNode.className=''; \r\n                    tds[j].parentNode.classList.add('wptb-row','wptb-table-head');\r\n                }\r\n                else{\r\n                    tds[j].parentNode.className=''; \r\n                    tds[j].parentNode.classList.add('wptb-row'); \r\n                }\r\n\r\n                tds[j].dataset.xIndex = j;\r\n                tds[j].dataset.yIndex = i;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n    * this function is able to add a row at the start,\r\n    * at the end of the table, or in a relative position\r\n    * respect to the current cell.\r\n    * @param string it defines the behavior of the function.\r\n    * @param object since it was ambigous the use of this,\r\n    *       it was the best option to pass it as a parameter.\r\n    *\r\n    * @returns void\r\n    */\r\n\r\n\r\n    addRow = function(pos, _this){\r\n        var params = getParameters(),\r\n            row, referenceRow = undefined;\r\n            \r\n        if(pos == 'end' || pos == 'start'){\r\n            row = params.table.insertRow( pos == 'end' ? -1 : 0);\r\n        }else{\r\n            row = document.createElement('tr');\r\n        }\r\n            \r\n        for (var j = 0; j < params.dimensions.columns; j++) {\r\n            var headerCell = createCell();\r\n            row.appendChild(headerCell);\r\n        }\r\n\r\n        row.classList.add('wptb-row');\r\n        document.getElementById('wptb-rows-number').value = params.dimensions.rows +1;\r\n\r\n        if(pos == 'before' || pos == 'after' ){\r\n            referenceRow = params.trs[_this.dataset.yIndex];\r\n            if(pos == \"before\"){\r\n                params.tbody.insertBefore(row,referenceRow);\r\n                var buttons = document.getElementsByClassName('wptb-relative-action');\r\n                for (var i = 0; i < buttons.length; i++) {\r\n                    buttons[i].dataset.yIndex++;\r\n                } \r\n            }else{\r\n                params.tbody.insertBefore(row,referenceRow.nextSibling);\r\n            }\r\n        }\r\n\r\n        recalculateIndexes();\r\n        \r\n    };\r\n\r\n    window.addRowToTheEnd = function(evt){\r\n        addRow('end',this);\r\n    };\r\n\r\n    window.addRowToTheStart = function(evt){\r\n        addRow('start',this);\r\n    };\r\n\r\n    window.addRowBefore = function(){\r\n        addRow('before',this);\r\n    };\r\n\r\n    window.addRowAfter = function(){\r\n        addRow('after',this);\r\n    };\r\n\r\n    /**\r\n    * this function is able to add a colum at the start,\r\n    * at the end of the table, or in a relative position\r\n    * respect to the current cell.\r\n    * @param string it defines the behavior of the function.\r\n    * @param object since it was ambigous the use of this,\r\n    *       it was the best option to pass it as a parameter.\r\n    *\r\n    * @returns void\r\n    */\r\n\r\n    addColumn = function(pos,_this){\r\n        var params = getParameters(),\r\n            referenceTd, newTd;\r\n        for (var i = 0; i < params.dimensions.rows; i++) {\r\n            \r\n            var newTd = createCell();\r\n            params.trs[i].appendChild(newTd);  \r\n            if(pos == 'before' || pos == 'after')\r\n            {\r\n                referenceTd = params.trs[i]\r\n                        .getElementsByTagName('td')[_this.dataset.xIndex];\r\n                if(pos=='before'){\r\n                    params.trs[i].insertBefore(newTd,referenceTd);\r\n                    var buttons = document.getElementsByClassName('wptb-relative-action');\r\n                    for (var i = 0; i < buttons.length; i++) {\r\n                        buttons[i].dataset.xIndex++;\r\n                    } \r\n                }\r\n                else{\r\n                    params.trs[i].insertBefore(newTd,referenceTd.nextSibling);\r\n                }\r\n            }\r\n            else if(pos=='end'){\r\n                params.trs[i].appendChild(newTd);  \r\n            }\r\n            else{\r\n                params.trs[i].innerHTML = '<td class=\"wptb-droppable wptb-cell\"></td>' + params.trs[i].innerHTML; \r\n            }\r\n        }\r\n        document.getElementById('wptb-columns-number').value = params.dimensions.columns +1;\r\n        recalculateIndexes();\r\n    };\r\n\r\n    window.addColumnToTheEnd = function(evt){\r\n        addColumn('end',this);\r\n    }\r\n\r\n    window.addColumnToTheStart = function(evt){\r\n        addColumn('start',this);\r\n        };\r\n\r\n    window.addColumnBefore = function(){\r\n        addColumn('before',this);\r\n    };\r\n\r\n    window.addColumnAfter = function(){\r\n        addColumn('after',this)\r\n    };\r\n\r\n    window.deleteRow = function () { \r\n        var num = window.activeRow,\r\n            table = document.getElementsByClassName('wptb-preview-table')[0],\r\n            row = table.getElementsByTagName('tr')[num],\r\n            rowCount = parseInt(document.getElementById('wptb-rows-number').value),\r\n            tbody = row.parentNode;\r\n        if((rowCount==1 && columnCount==1) || tbody == undefined){\r\n             return;\r\n         }\r\n        tbody.removeChild(row);\r\n        document.getElementById('wptb-rows-number').value = rowCount -1;\r\n        undoAllPreviousHighlights();\r\n    };\r\n\r\n    window.deleteColumn = function () {\r\n        var table = document.getElementsByClassName('wptb-preview-table')[0],\r\n            num = window.activeColumn,\r\n            rowCount = parseInt(document.getElementById('wptb-rows-number').value),\r\n            columnCount = parseInt(document.getElementById('wptb-columns-number').value);\r\n            if((rowCount==1 && columnCount==1)){\r\n             return;\r\n         }\r\n        for (var i = 0; i < rowCount; i++) {\r\n             var td = table.getElementsByTagName('tr')[i].getElementsByTagName('td')[num],\r\n                tr = td.parentNode;\r\n             tr.removeChild(td);\r\n        }\r\n        document.getElementById('wptb-columns-number').value = columnCount -1;\r\n        undoAllPreviousHighlights();\r\n    };\r\n\r\n})(jQuery);","(function ($) {\r\n\r\n    window.copyText = function (event) {\r\n        var td = event.target.parentNode.parentNode.parentNode,\r\n            copy = newText(event.target.parentNode.parentNode.childNodes[0].innerHTML);\r\n        td.appendChild(copy);\r\n    }\r\n\r\n    window.deleteText = function (evt) {\r\n        var act = this.parentNode.parentNode,\r\n            el = act.parentNode;\r\n        el.removeChild(act);\r\n        window.add_Elements_tab();\r\n    }\r\n\r\n    window.showTextSettings = function (event) {\r\n\r\n        if(window.currentlyDragging != undefined){\r\n            return;\r\n        }\r\n        this.classList.add('wptb-directlyhovered');\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            btnMove = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\r\n        btnDelete.onclick = window.deleteText;\r\n        btnCopy.onclick = window.copyText;\r\n        btnMove.onmousedown = window.putItemDragStart;\r\n        actions.appendChild(btnMove);\r\n        actions.appendChild(btnCopy);\r\n        actions.appendChild(btnDelete);\r\n        this.appendChild(actions);\r\n    };\r\n\r\n    window.hideTextSettings = function (event) {\r\n        var formerActions = this.getElementsByClassName('wptb-actions');\r\n        if (formerActions && formerActions[0]) {\r\n            let par = formerActions[0].parentNode;\r\n            par.removeChild(formerActions[0]);\r\n        }\r\n        this.classList.remove('wptb-directlyhovered');\r\n\r\n    };\r\n\r\n    window.newText = function (text) {\r\n        var elText = document.createElement('div');\r\n        var elText2 = document.createElement('div');\r\n        elText2.classList.add('editable');\r\n        var elP = document.createElement('p');\r\n        elP.innerHTML = text != undefined ? text : 'Text';\r\n        elText2.appendChild(elP);\r\n        elText.appendChild(elText2);\r\n        elText.onmouseenter = showTextSettings;\r\n        elText.onmouseleave = hideTextSettings;\r\n        elText.classList.add('wptb-ph-element', 'wptb-element-text-' +\r\n            window.wptb_num['text']);\r\n        window.addElementOptions('text', elText);\r\n        window.wptb_num['text']++;\r\n        window.tinyFastCall(elText.childNodes[0]);\r\n        $(elText).click();\r\n        return elText;\r\n    }\r\n\r\n})(jQuery);","var wptbElement;\r\n\r\n//numbers of elements that have been added\r\nwindow.wptb_num = new Array();\r\nwindow.wptb_num[\"text\"] = 0;\r\nwindow.wptb_num[\"image\"] = 0;\r\nwindow.wptb_num[\"list\"] = 0;\r\nwindow.wptb_num[\"button\"] = 0;\r\n\r\njQuery(document).ready(function ($) {\r\n\r\n    //Column and Row number Selector.\r\n    inputNumber(document.getElementById('wptb-columns-number'));\r\n    inputNumber(document.getElementById('wptb-rows-number'));\r\n\r\n    //document.getElementById('wptb_builder').onscroll = tryToChangeMCEWidth;\r\n\r\n    //Generate table and bind associated functions.\r\n    document.onready = function () {\r\n        document.getElementById(\"wptb-generate-table\").onclick = function () {\r\n \r\n            //Runs when an element is dropped on a cell.\r\n            initTable();\r\n           \r\n \r\n            /**\r\n             * this function will be called \r\n             * when a property of any elemnet is changed\r\n             * to determine which element that we should edit\r\n             * and then call edititng_property Function\r\n             * @returns {void}\r\n             */\r\n            function detect_element_for_property() {\r\n                var option = this,\r\n                    parent = option;\r\n                while(!parent.classList.contains('wptb-element-options')){\r\n                    parent = parent.parentNode;\r\n                } \r\n                var classes = parent.attr(\"class\");\r\n\r\n                /**\r\n                 * will carry the extracted infotrmation from the class\r\n                 * @example class =>wptb-options-text-0\r\n                 *          result => [\r\n                 *              0 => wptb-options-text-0\r\n                 *              1 => text\r\n                 *              2 => 0\r\n                 *          ]\r\n                 * @type array\r\n                 */\r\n                var infArr = classes.match(/wptb-options-(.+)-(\\d+)/i);\r\n\r\n                var type = infArr[1];\r\n                var num = infArr[2];\r\n                var element = document.querySelector('.wptb-ph-element.wptb-element-' + type + '-' + num);\r\n                editing_property(element, option);\r\n            }\r\n\r\n            /**\r\n             * will change the element according to the value of option\r\n             * \r\n             * @param {object} element that will change according to the value of option\r\n             * @param {object} option input element\r\n             * @returns {void}\r\n             */\r\n            function editing_property(element, option) {\r\n                // type of property @Ex: font-size,color ....\r\n                var type = option.data('type');\r\n                var val = option.val();\r\n                switch (type) {\r\n                    case 'font-size':\r\n                        element.find(\"p\").css('font-size', val + 'px');\r\n                        break;\r\n                    case 'color':\r\n                        element.find(\"p\").css('color', val);\r\n                        break;\r\n                    case 'list-class':\r\n                        if (val == 'unordered') {\r\n                            element.querySelector('[data-type=list-style-type]').parentNode.style.display= 'flex';\r\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\r\n                            for (var i = 0; i < bullets.length; i++) {\r\n                                bullets[i].style.listStyleType= 'disc';\r\n                            }\r\n                            document.querySelector('[data-type=list-style-type]').value = 'disc';\r\n                        } else {\r\n                            element.querySelector('[data-type=list-style-type]').parentNode.style.display= 'none'; \r\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\r\n                            for (var i = 0; i < bullets.length; i++) {\r\n                                bullets[i].style.listStyleType= 'decimal';\r\n                            } \r\n                        }\r\n                        break;\r\n                    case 'numbering-list-style-type':\r\n                    case 'list-style-type':\r\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\r\n                            for (var i = 0; i < bullets.length; i++) {\r\n                                bullets[i].style.listStyleType= val.toLowerCase();\r\n                            } \r\n                        break;\r\n                }\r\n            }\r\n            $(document.body).on('change input, change select', '.wptb-element-property', detect_element_for_property);\r\n\r\n            //Triggers when table border setting changes.\r\n            function addBorder(value) {\r\n                document.getElementsByClassName('wptb-preview-table')[0].style.border = value + 'px solid';\r\n            }\r\n\r\n            //Binds the range slider and input, also triggers table border change.\r\n            document.getElementById('wptb-table-border-slider').onchange = function () {\r\n                document.getElementById('wptb-table-border-number').value = this.value;\r\n                addBorder(this.value);\r\n            };\r\n\r\n            //Binds the range slider and input, also triggers table border change.\r\n            document.getElementById('wptb-table-border-number').onchange = function () {\r\n                document.getElementById('wptb-table-border-slider').value = this.value;\r\n                addBorder(this.value);\r\n            };\r\n\r\n            //Triggers when cell padding setting changes.\r\n            function addCellPadding(value) {\r\n                var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\r\n                for (var i = 0; i < tableCells.length; i++) {\r\n                    tableCells[i].style.padding = value + 'px';\r\n                }\r\n            }\r\n\r\n            //Binds the range slider and input, also triggers cell padding change.\r\n            document.getElementById('wptb-table-cell-slider').onchange = function () {\r\n                document.getElementById('wptb-table-cell-number').value = this.value;\r\n                addCellPadding(this.value);\r\n            };\r\n\r\n            //Binds the range slider and input, also triggers cell padding change.\r\n            document.getElementById('wptb-table-cell-number').onchange = function () {\r\n                document.getElementById('wptb-table-cell-slider').value = this.value;\r\n                addCellPadding(this.value);\r\n            };\r\n\r\n            document.getElementById('wptb-activate-cell-management-mode').onclick = function(){\r\n                if(this.value==\"Manage Cells\"){\r\n                    document.getElementsByClassName('wptb-cell-management')[0].classList.add('visible');\r\n                    this.value= \"Close Cell Management Mode\";\r\n                }\r\n                else{\r\n                    document.getElementsByClassName('wptb-cell-management')[0].classList.remove('visible');\r\n                    this.value = \"Manage Cells\";\r\n                }\r\n                \r\n                \r\n            }\r\n\r\n            //Triggers when apply inner border setting changes.\r\n            function addInnerBorder(checked) {\r\n                var styles;\r\n\r\n                if (checked == 'checked') {\r\n                    document.getElementById('wptb-apply-inner-border').style.marginBottom = '0px';\r\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\r\n                    for (var i = 0; i < tableCells.length; i++) {\r\n                        tableCells[i].style.border = '1px solid';\r\n                    }\r\n\r\n                    document.getElementById('wptb-inner-border-settings').classList.add('visible');\r\n                } else {\r\n                    document.getElementById('wptb-inner-border-settings').classList.remove('visible');\r\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\r\n                    for (var i = 0; i < tableCells.length; i++) {\r\n                        tableCells[i].style.border = '';\r\n                    }\r\n                }\r\n            }\r\n\r\n            //Binding Checkbox Change, triggers inner border add.\r\n            document.getElementById('wptb-inner-border-check').onchange = function () {\r\n                var _val = this.checked ? 'checked' : 'unchecked';\r\n                addInnerBorder(_val);\r\n            };\r\n\r\n            //Triggers when cell padding setting changes.\r\n            function addInnerBorderSize(value) {\r\n                var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\r\n                for (var i = 0; i < tableCells.length; i++) {\r\n                    tableCells[i].style.border = value + 'px solid';\r\n                }\r\n            }\r\n\r\n            //Binds the range slider and input, also triggers cell padding change.\r\n            document.getElementById('wptb-table-inner-border-slider').onchange = function () {\r\n                document.getElementById('wptb-table-inner-border-number').value = this.value;\r\n                addInnerBorderSize(this.value);\r\n            };\r\n\r\n            //Binds the range slider and input, also triggers cell padding change.\r\n            document.getElementById('wptb-table-inner-border-number').onchange = function () {\r\n                document.getElementById('wptb-table-inner-border-slider').value = this.value;\r\n                addInnerBorderSize(this.value);\r\n            };\r\n\r\n        };\r\n\r\n        document.getElementById('wptb-add-row-before').onclick = window.addRowBefore;\r\n        document.getElementById('wptb-add-row-after').onclick = window.addRowAfter; \r\n        document.getElementById('wptb-add-column-before').onclick = window.addColumnBefore;\r\n        document.getElementById('wptb-add-column-after').onclick = window.addColumnAfter; \r\n    }; // Of document.onready\r\n\r\n\r\n});"]}