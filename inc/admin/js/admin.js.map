{"version":3,"sources":["WPTB_Builder.js","WPTB_Button.js","WPTB_Cell.js","WPTB_ElementCounters.js","WPTB_ElementOptions.js","WPTB_Image.js","WPTB_Initializer.js","WPTB_LeftPanel.js","WPTB_List.js","WPTB_ListItem.js","WPTB_MultipleSelect.js","WPTB_Parser.js","WPTB_Settings.js","WPTB_Space.js","WPTB_Stringifier.js","WPTB_Table.js","WPTB_Text.js","applyGenericItemSettings.js","wptb-builder.js"],"names":["detectMode","url","window","location","href","regex","RegExp","results","exec","decodeURIComponent","replace","WPTB_Builder","table_id","http","XMLHttpRequest","ajaxurl","open","setRequestHeader","onreadystatechange","d","readyState","status","document","getElementsByClassName","style","display","innerHTML","responseText","send","counter","ElementCounters","select","MultipleSelect","initializer","WPTB_Initializer","settings","WPTB_Settings","addEventListener","WPTB_Button","text","DOMElement","createElement","elButton2","el_B","kind","classList","add","undefined","appendChild","getDOMElement","applyGenericItemSettings","WPTB_Cell","newElementProxy","el","WPTB_List","WPTB_Image","WPTB_Text","highlightRow","td","parentRow","parentNode","columnCount","parseInt","getElementById","value","tds","getElementsByTagName","i","length","remove","classToAdd","ttd","highlightColumn","index","rowCount","table","tr","draggable","onclick","relativeActions","cells","_wptbManagementModeActive","contains","dataset","activeCell","ondragenter","e","div","dataTransfer","getData","ondragover","preventDefault","ondragleave","ondrop","element","classId","space","t_space","spaceParent","WPTB_Space","console","log","nextSibling","removeChild","onmousedown","activateMultipleSelectMode","pushSelectedCell","onmouseover","onmouseup","deactivateMultipleSelectMode","setCoords","y","x","yIndex","xIndex","getCoords","coords","appendElement","node","priv","increment","key","nextIndex","WPTB_ElementOptions","elemIdClass","prop","querySelector","cloneNode","properties","infArr","className","match","optionsClass","children","childNodes","optionControls","jQuery","wpColorPicker","change","event","ui","parent","target","classe","type","ps","number","affectedEl","color","toString","slider","oninput","onchange","n_Class","num","val","img","src","alt","width","height","fontSize","bullets","querySelectorAll","listStyleType","toLowerCase","file_frame","wp","media","frames","title","button","multiple","on","attachment","state","get","first","toJSON","MIN_COLUMNS","MIN_ROWS","MAX_COLUMNS","MAX_ROWS","tableGenerator","body","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","columns","rows","WPTB_Table","WPTB_LeftPanel","wptbElementButtons","tableRows","j","backgroundColor","tableHeader","addInnerBorderSize","tableCells","border","addCellPadding","padding","addInnerBorder","checked","styles","marginBottom","addBorderSize","_val","ondragstart","setData","wptbElement","addRowToTheEnd","addRowToTheStart","addRowBefore","addRowAfter","addColumnToTheEnd","addColumnToTheStart","addColumnBefore","addColumnAfter","deleteColumn","deleteRow","mergeCells","splitCell","innerElements","el_L","item","WPTB_ListItem","divdot","divcontent","libullet","onkeyup","listItemKeyListener","onmouseenter","btnDelete","btnCopy","actions","previous","article","content","html","duplicate","append","onmouseleave","onkeydown","which","keyCode","lastP","dontAddItems","insertBefore","focus","selectedCells","multipleCellMode","cell","push","flushSelectedCells","getFirst","minXIndex","minYIndex","getLast","maxXIndex","maxYIndex","last","removeAllButFirst","WPTB_Parser","code","pos","getChar","getToken","char","token","getCurrentToken","ctoken","checkAndPass","expected","error","exit","getWordFromToken","indexOf","word","substring","analizeHeader","getExpectedToken","analizeTds","analizeRows","analizeRoot","n","elems","effectAllowed","getAttribute","t","trim","messagingArea","WPTB_Stringifier","setTimeout","params","spaceBetween","stopPropagation","p","tagName","margin","bg1","bg2","bg3","trueNode","nodeContent","listitems","wptbTableSetup","row","insertRow","recalculateIndexes","trs","maxCols","addColumn","referenceTd","newTd","_this","xCoord","buttons","k","evt","addRow","referenceRow","active","tbody","firstCell","lastCell","colspan","Math","abs","rowspan","colSpan","rowSpan","classn","hidden","elText2","elP","listItems","btnMove","act","temp","srcList","copy","setDragImage","tinyMCE","init","inline","plugins","dialog_type","theme","menubar","fixed_toolbar_container","toolbar","setup","ed","execCommand","init_instance_callback","editor","getContent","setContent","range","selection","getRng","KeyID","startOffset","currentEditor","totalWidth","offsetWidth","scrollTop","bodyElement","position","right","top","paste_as_text","formerActions","par"],"mappings":"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","file":"admin.js","sourcesContent":["(function(){  \n\n\tfunction detectMode() {\n\t    var url = window.location.href, \n\t    \tregex = new RegExp('[?&]table(=([^&#]*)|&|#|$)'),\n\t        results = regex.exec(url);\n\t    if (!results) return false;\n\t    if (!results[2]) return '';\n\t    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n\t}\n\t\n\tvar WPTB_Builder = function(){ \n\t\tvar table_id = detectMode();\n\t\tif(table_id){\n\t\t\tvar http = new XMLHttpRequest(),\n        \turl = ajaxurl+\"?action=get_table\"+'&id='+table_id;\n\t\t\thttp.open('GET', url, true);\n\t\t\thttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t\t\thttp.onreadystatechange = function(d) {\n\t            if (this.readyState == 4 && this.status == 200) {\n            \t\tdocument.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n\t                document.getElementsByClassName('wrapper')[0].innerHTML = (http.responseText);\n\t            }\n\t\t\t}\n\t\t\thttp.send(null);\n\t\t}\n\t\tdocument.counter = new ElementCounters();\n\t\tdocument.select = new MultipleSelect();\n\n\t\tvar initializer = WPTB_Initializer();\n\t\t\tsettings = WPTB_Settings();\n\t};\n\n\tdocument.addEventListener('DOMContentLoaded', WPTB_Builder); \n})();","var WPTB_Button = function(text){\n        var DOMElement = document.createElement('div'),\n        \telButton2 = document.createElement('div'),\n        \tel_B = document.createElement('p');\n\n\t\tthis.kind = 'button';\n\n        DOMElement.classList.add('wptb-button-container');\n        elButton2.classList.add('wptb-button-wrapper');\n        el_B.classList.add('wptb-button');\n        el_B.classList.add('editable');\n        el_B.innerHTML = text != undefined ? text : 'Button Text';\n        elButton2.appendChild(el_B);\n        DOMElement.appendChild(elButton2);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        applyGenericItemSettings(this);\n\n        return this;\n};","var WPTB_Cell = function(DOMElement){\n\n\t\tfunction newElementProxy(el){\n\t\t\tif(el == 'list'){\n                return new WPTB_List();\n            }\n            else if(el == 'image'){\n                return new WPTB_Image();\n            }   \n            else if(el == 'text'){\n                return new WPTB_Text();\n            }\n            else if(el == 'button'){\n                return new WPTB_Button();\n            }\n\t\t}\n\n        function highlightRow(td){\n            var parentRow = td.parentNode,\n                columnCount = parseInt(document.getElementById('wptb-columns-number').value),\n                tds = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n                for (var i = 0; i < tds.length; i++) {\n                    tds[i].classList.remove('highlighted-row-first','highlighted-row-last','highlighted-row-inner',\n                                            'highlighted-column-first','highlighted-column-last','highlighted-column-inner');\n                }\n                for (var i = 0; i < columnCount; i++) {\n\n                    var classToAdd = (i == 0 ? 'highlighted-row-first' : \n                                    (i == columnCount-1 ? 'highlighted-row-last' \n                                        : 'highlighted-row-inner'));\n                    var ttd = parentRow.getElementsByTagName('td')[i];\n                    if(ttd!==td){\n                    ttd.classList.add(classToAdd);\n                    }\n                }\n        }\n\n        function highlightColumn(td){\n           \n            var index,\n                parentRow = td.parentNode;\n                columnCount = parseInt(document.getElementById('wptb-columns-number').value),\n                rowCount = parseInt(document.getElementById('wptb-rows-number').value),\n                table = document.getElementsByClassName('wptb-preview-table')[0];\n                for (var i = 0; i < columnCount; i++) {\n                    if(parentRow.getElementsByTagName('td')[i] === td ){\n                        index = i;\n                        break;\n                    }\n                }\n\n                for (var i = 0; i < rowCount; i++) {\n                    var classToAdd = (i == 0 ? 'highlighted-column-first' : \n                                    (i == rowCount-1 ? 'highlighted-column-last' \n                                        : 'highlighted-column-inner'));\n                    var tr = table.getElementsByTagName('tr')[i];\n                    if(tr.getElementsByTagName('td')[index]!==td){\n                        tr.getElementsByTagName('td')[index].classList.add(classToAdd);\n                    }\n                }\n        }\n        \n        DOMElement = document.createElement(\"td\");\n\n        DOMElement.draggable = false;\n        \n        DOMElement.classList.add('wptb-droppable', 'wptb-cell');  \n\n        DOMElement.onclick = function(){\n\n        \tvar relativeActions, cells;\n\n        \tif(window._wptbManagementModeActive){\n        \t\treturn;\n        \t}\n        \tif(this.classList.contains('wptb-highlighted')){\n        \t\t//this.classList.remove('wptb-highlighted');\n        \t}\n        \telse{\n        \t\trelativeActions = document.getElementsByClassName('wptb-relative-action');\n        \t\tcells = document.getElementsByTagName('td');\n\n        \t\tfor (var i = 0; i < relativeActions.length; i++) {        \t\t\t \n        \t\t\trelativeActions[i].dataset.activeCell = this;\n        \t\t}\n\n        \t\tfor (var i = 0; i < cells.length; i++) {\n        \t\t\tcells[i].classList.remove('wptb-highlighted');\n        \t\t}\n\n        \t\tthis.classList.add('wptb-highlighted');    \n                highlightRow(this);\n                highlightColumn(this);\n\n        \t}\n        \t\n        };\n\n        DOMElement.ondragenter = function(e){\n        \tvar div;\n            if(!e.dataTransfer.getData('wptbElement') \n                && !e.dataTransfer.getData('node')){\n                return;\n            }\n        \tthis.classList.add('wptb-drop-here-empty');\n        }\n\n        DOMElement.ondragover = function(e){\n        \te.preventDefault();\n        }\n\n        DOMElement.ondragleave = function(){\n        \tthis.classList.remove('wptb-drop-here-empty');\n\n        }\n\n        DOMElement.ondrop = function(e){\n        \tvar element, classId, space, t_space, spaceParent;\n        \te.preventDefault();\n            space = new WPTB_Space();\n\n            console.log(e.dataTransfer);\n\n            if(!e.dataTransfer.getData('wptbElement') \n                && !e.dataTransfer.getData('node')){\n                return;\n            }\n\n            if(e.dataTransfer.getData('wptbElement')){\n        \t   element = newElementProxy(e.dataTransfer.getData('wptbElement'));\n                if(this.innerHTML==''){\n                    this.appendChild(new WPTB_Space());\n                }\n                this.appendChild(element.getDOMElement());\n                this.appendChild(space);\n        \t}\n            else{\n\n                classId = e.dataTransfer.getData('node');\n                element = document.getElementsByClassName(classId)[0];\n                if(this.innerHTML==''){\n                    t_space = element.nextSibling;\n                    spaceParent = element.parentNode;\n                    if(t_space != undefined){\n                        spaceParent.removeChild(t_space);\n                    }\n                    this.appendChild(new WPTB_Space());\n                }\n                this.appendChild(element);\n                this.appendChild(space);\n            }\n        \tthis.classList.remove('wptb-drop-here-empty');\n        \treturn true;\n        }\n\n        DOMElement.onmousedown = function(){\n            console.log(\"MOUSE DOWN!\");\n            document.select.activateMultipleSelectMode();\n            document.select.pushSelectedCell(this);\n        };\n\n        DOMElement.onmouseover = function(){\n            document.select.pushSelectedCell(this);\n        };\n\n        DOMElement.onmouseup = function(){\n            console.log(\"MOUSE UP!\");\n            document.select.deactivateMultipleSelectMode();\n        };\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        this.setCoords = function(y,x){\n        \tvar el = this.getDOMElement();\n        \tel.dataset.yIndex = y;\n        \tel.dataset.xIndex = x;\n        }\n\n        this.getCoords = function(){\n        \tvar coords,\n        \t\tel = this.getDOMElement();\n        \tcoords.x = el.dataset.xIndex;\n        \tcoords.y = el.dataset.yIndex;\n        \treturn coords;\n        }\n\n        this.appendElement = function(node){\n        \tgetDOMElement().appendChild(node);\n        }\n\n        return this;\n\n};","var ElementCounters = function(){\n\tvar priv = [];\n\tpriv['text'] = 0;\n\tpriv['image'] = 0;\n\tpriv['list'] = 0;\n\tpriv['button'] = 0; \n\n\tthis.increment = function(key){\n\n\t\tif(! (key in priv) ){\n\t\t\treturn;\n\t\t}\n\n\t\tpriv[key]++;\n\t}\n\tthis.nextIndex = function(key){\n\n\t\tif(! (key in priv) ){\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn priv[key] + 1;\n\t}\n\treturn this;\n};","var WPTB_ElementOptions = function(element,index){\n\n\tvar node = element.getDOMElement(), elemIdClass;\n\n\tprop = document.querySelector(\".wptb-\" + element.kind + \"-options-prototype\").cloneNode(true);\n    prop.classList.remove(\"wptb-\" + element.kind + \"-options-prototype\"); // remove prototype from the class\n    elemIdClass='wptb-options-' + element.kind + \"-\" +  index;\n\n    var properties = prop.getElementsByClassName('wptb-element-property');\n\n    for (var i = 0; i < properties.length; i++) {\n    \tproperties[i].dataset.element = elemIdClass;\n    }\n\n    prop.classList.add(elemIdClass);\n    document.getElementById(\"element-options-group\").appendChild(prop);\n\n    node.onclick = function(){\n        var infArr = this.className.match(/wptb-element-((.+-)\\d+)/i),\n\t\t\toptionsClass = '.wptb-' + infArr[2] + 'options' +\n                        '.wptb-options-' + infArr[1];\n\n    \tdocument.getElementById('add-elements').getElementsByTagName('a')[0].classList.remove('active');\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.add('active');\n\t\t\n\t\tdocument.getElementsByClassName('wptb-elements-container')[0].style.display = 'none';\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'none';\n        document.getElementById(\"element-options-group\").style.display = 'block';\n\n        var children = document.getElementById(\"element-options-group\").childNodes;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].style)\n                children[i].style.display = 'none';\n        }\n\n        document.querySelector(optionsClass).style.display = 'block';\n    };\n\n    var optionControls = prop.getElementsByClassName('wptb-element-property');\n    console.log(optionControls);\n    for (var i = 0; i < optionControls.length; i++) {\n    \tif(optionControls[i].classList.contains('wptb-color-picker')){\n    \t\tjQuery(optionControls[i]).wpColorPicker({\n                change: function(event, ui){\n                    var parent = event.target, classe, type, ps, number;\n \n\n\n                    classe = parent.dataset.element.match(/wptb-options-(.+)-(\\d+)/i);\n                    type = classe[1];\n                    number = classe[2];\n                    console.log('Element','wptb-element-'+type+'-'+number);\n                    affectedEl = document.getElementsByClassName('wptb-element-'+type+'-'+number)[0];\n                    ps = affectedEl.getElementsByTagName(\"p\");\n                    for (var i = 0; i < ps.length; i++) {\n                            ps[i].style.color =  ui.color.toString();\n                    } \n                }\n            });\n    \t}\n\n        if(optionControls[i].dataset.type === 'font-size'){\n            var slider = optionControls[i].parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0];\n            slider.oninput = function(){\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].value = this.value;\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].onchange();\n            }\n        }\n\n    \toptionControls[i].onchange = function(event){\n\n    \t\tvar n_Class = this.dataset.element,\n    \t\t\tinfArr = n_Class.match(/wptb-options-(.+)-(\\d+)/i),\n\t\t\t\ttype = infArr[1],\n                num = infArr[2],\n    \t\t\taffectedEl = document.getElementsByClassName('wptb-element-'+type+'-'+num)[0],\n    \t\t\tval = this.value;\n\n                console.log('Event triggered',this.dataset.type,this.value);\n\n    \t\tswitch(this.dataset.type){\n                case 'src':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        img.src=this.value;\n                        break; \n                    case 'alternative-text':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        img.alt=this.value;\n                        break;\n                    case 'image-width':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        console.log(img,this.value);\n                        img.width=this.value;\n                        break; \n                    case 'image-height':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        img.height=this.value;\n                        break; \n    \t\t\tcase 'font-size':\n                        var ps = affectedEl.getElementsByTagName(\"p\");\n                        for (var i = 0; i < ps.length; i++) {\n                            ps[i].style.fontSize =  val + 'px';\n                        }\n\n                        this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0].value = this.value;\n                        \n                        break;\n                    case 'color':\n                        var ps = affectedEl.getElementsByTagName(\"p\");\n                        for (var i = 0; i < ps.length; i++) {\n                            ps[i].style.color =  val;\n                        } \n                        break;\n                    case 'list-class': \n                        if (val == 'unordered') {\n                            event.target\n                                .parentNode\n                                .parentNode\n                                .querySelector('[data-type=list-style-type]')\n                                .parentNode\n                                .style\n                                .display= 'flex';\n                            var bullets = affectedEl.querySelectorAll('article .wptb-list-item-style-dot li');\n                            for (var i = 0; i < bullets.length; i++) {\n                                bullets[i].style.listStyleType= 'disc';\n                            }\n                            document.querySelector('[data-type=list-style-type]').value = 'disc';\n                        } else {\n                            event.target\n                                .parentNode\n                                .parentNode\n                                .querySelector('[data-type=list-style-type]')\n                                .parentNode\n                                .style\n                                .display= 'none';\n                            var bullets = affectedEl.querySelectorAll('article .wptb-list-item-style-dot li');\n                            for (var i = 0; i < bullets.length; i++) {\n                                bullets[i].style.listStyleType= 'decimal';\n                            } \n                        }\n                        break; \n                    case 'list-style-type':\n                            var bullets = affectedEl.querySelectorAll('article .wptb-list-item-style-dot li');\n                            for (var i = 0; i < bullets.length; i++) {\n                                bullets[i].style.listStyleType= val.toLowerCase();\n                            } \n                        break;\n    \t\t}\n    \t};\n    }\n};","var WPTB_Image = function(src){\n        var DOMElement = document.createElement('div'),\n        \timg = document.createElement('img');\n\n\t\tthis.kind = 'image';\n\n        DOMElement.appendChild(img);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        file_frame = wp.media.frames.file_frame = wp.media({\n                                        title: 'Select a image to upload',\n                                        button: {\n                                                text: 'Use this image',\n                                        },\n                                        multiple: false  \n                                });\n                                // When an image is selected, run a callback.\n                                file_frame.on( 'select', function() {\n                                        attachment = file_frame.state().get('selection').first().toJSON();\n                                        img.src = attachment.url; \n                                });\n                                        // Finally, open the modal\n        if(src==undefined){\n                file_frame.open();\n        }\n        else{\n                img.src=src;\n        }\n\n        return this;\n};","var WPTB_Initializer = function(){\n\tconst MIN_COLUMNS = 1,\n\t\t  MIN_ROWS = 1,\n\t\t  MAX_COLUMNS = 10,\n\t\t  MAX_ROWS = 10;\n\n\tvar tableGenerator = document.body;\n\t\tcolumnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0],\n\t\tcolumnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0],\n\t\trowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1],\n\t\trowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1],\n\t\tcolumnsInput = document.getElementById('wptb-columns-number'),\n\t\trowsInput = document.getElementById('wptb-rows-number');\n\n\n\t\tcolumnsDecrementButton.onclick = function(){\n\t\t\tif(columnsInput.value > MIN_COLUMNS){\n\t\t\t\tcolumnsInput.value--;\n\t\t\t}\n\t\t};\n\n\t\tcolumnsIncrementButton.onclick = function(){\n\t\t\tif(columnsInput.value < MAX_COLUMNS){\n\t\t\t\tcolumnsInput.value++;\n\t\t\t}\n\t\t};\n\n\t\trowsDecrementButton.onclick = function(){\n\t\t\tif(rowsInput.value > MIN_ROWS){\n\t\t\t\trowsInput.value--;\n\t\t\t}\n\t\t};\n\t\t\n\t\trowsIncrementButton.onclick = function(){\n\t\t\tif(rowsInput.value < MAX_ROWS){\n\t\t\t\trowsInput.value++;\n\t\t\t}\n\t\t};\n\n\tdocument.getElementById('wptb-generate-table').onclick = function(){\n\n\t\t\t var columns = document.getElementById('wptb-columns-number').value,\n\t\t\t \t rows = document.getElementById('wptb-rows-number').value;\n\n\t\t\t WPTB_Table(columns, rows);\n\t\t}\n\n};","var WPTB_LeftPanel = function(){\n\tvar table = document.getElementsByClassName('wptb-preview-table')[0],\n\twptbElementButtons = document.getElementsByClassName('wptb-element');\n\n\tjQuery('#wptb-even-row-bg').wpColorPicker({\n\t\tchange: function(event,ui){\n                var tableRows = table.getElementsByTagName('tr');\n                for (var i = 1; i < tableRows.length; i+=2) {\n                \ttds = tableRows[i].getElementsByTagName('td');\n                \tfor (var j = 0; j < tds.length; j++) {\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\n                \t} \n                }\n    \t}\n\t}); //3MNRVA96 \n    jQuery('#wptb-odd-row-bg').wpColorPicker({\n    \tchange: function(event,ui){\n                var tableRows = table.getElementsByTagName('tr');\n                for (var i = 2; i < tableRows.length; i+=2) {\n                \ttds = tableRows[i].getElementsByTagName('td');\n                \tfor (var j = 0; j < tds.length; j++) {\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\n                \t} \n                }\n    \t}\n    });\n    jQuery('#wptb-table-header-bg').wpColorPicker({\n    \tchange: function(event,ui){\n                var tableHeader = table.getElementsByTagName('tr')[0],\n                \ttds = tableHeader.getElementsByTagName('td');\n                \tfor (var j = 0; j < tds.length; j++) {\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\n                \t} \n    \t}\n    });\n\n\n\n    function addInnerBorderSize(value) {\n                var tableCells = table.getElementsByTagName('td');\n                for (var i = 0; i < tableCells.length; i++) {\n                    tableCells[i].style.border = value + 'px solid';\n                }\n    }\n\n    function addCellPadding(value) {\n                var tableCells = table.getElementsByTagName('td');\n                for (var i = 0; i < tableCells.length; i++) {\n                    tableCells[i].style.padding = value + 'px';\n                }\n    }\n\n\n    function addInnerBorder(checked) {\n                var styles;\n\n                if (checked == 'checked') {\n                    document.getElementById('wptb-apply-inner-border').style.marginBottom = '0px';\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n                    for (var i = 0; i < tableCells.length; i++) {\n                        tableCells[i].style.border = '1px solid';\n                    }\n\n                    document.getElementById('wptb-inner-border-settings').classList.add('visible');\n                } else {\n                    document.getElementById('wptb-inner-border-settings').classList.remove('visible');\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n                    for (var i = 0; i < tableCells.length; i++) {\n                        tableCells[i].style.border = '';\n                    }\n                }\n    }\n\n    function addBorderSize(value) {\n                table.style.border = value + 'px solid';\n    }\n\n    document.getElementById('wptb-table-cell-slider').oninput = function () {\n            document.getElementById('wptb-table-cell-number').value = this.value;\n            addCellPadding(this.value);\n    };\n\n    document.getElementById('wptb-table-cell-number').onchange = function () {\n            document.getElementById('wptb-table-cell-slider').value = this.value;\n            addCellPadding(this.value);\n    };\n\n    document.getElementById('wptb-table-border-slider').oninput = function () {\n            document.getElementById('wptb-table-border-number').value = this.value;\n            addBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-table-border-number').onchange = function () {\n            document.getElementById('wptb-table-border-slider').value = this.value;\n            addBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-table-inner-border-slider').oninput = function () {\n            document.getElementById('wptb-table-inner-border-number').value = this.value;\n            addInnerBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-table-inner-border-number').onchange = function () {\n            document.getElementById('wptb-table-inner-border-slider').value = this.value;\n            addInnerBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-inner-border-check').onchange = function () {\n                var _val = this.checked ? 'checked' : 'unchecked';\n                addInnerBorder(_val);\n            };\n\n\tfor (var i = 0; i < wptbElementButtons.length; i++) {\n\t\twptbElementButtons[i].ondragstart = function(e){\n\t\t\te.dataTransfer.setData('wptbElement',this.dataset.wptbElement);\n\t\t}\n\t}\n\n\tdocument.getElementById('wptb-add-end-row').onclick = table.addRowToTheEnd;\n\tdocument.getElementById('wptb-add-start-row').onclick = table.addRowToTheStart;\n\tdocument.getElementById('wptb-add-row-before').onclick = table.addRowBefore;\n\tdocument.getElementById('wptb-add-row-after').onclick = table.addRowAfter;\n\tdocument.getElementById('wptb-add-end-column').onclick = table.addColumnToTheEnd;\n\tdocument.getElementById('wptb-add-start-column').onclick = table.addColumnToTheStart;\n\tdocument.getElementById('wptb-add-column-before').onclick = table.addColumnBefore;\n\tdocument.getElementById('wptb-add-column-after').onclick = table.addColumnAfter;\n    document.getElementById('wptb-delete-column').onclick = table.deleteColumn;\n    document.getElementById('wptb-delete-row').onclick = table.deleteRow;\n    document.getElementById('wptb-merge-cells').onclick = table.mergeCells;\n    document.getElementById('wptb-split-cell').onclick = table.splitCell;\n\tdocument.getElementById('add-elements').onclick = function(){\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.remove('active');\n        document.getElementById('add-elements').getElementsByTagName('a')[0].classList.add('active');\n        document.getElementsByClassName('wptb-elements-container')[0].style.display = 'table';\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'block';\n        document.getElementById(\"element-options-group\").style.display = 'none';\n\t};\n};","var WPTB_List = function(innerElements){\n    \tvar el_L = document.createElement('ul'), item,\n\t\t\tDOMElement = document.createElement('div');\n\n\t\tthis.kind = 'list';\n\n        if (!innerElements)\n            for (var i = 0; i < 3; i++) {\n            \titem = new WPTB_ListItem('List Item ' + (i + 1));\n                el_L.appendChild(item.getDOMElement());\n            }\n        else {\n            for (var i = 0; i < innerElements.length; i++) {\n            \titem = new WPTB_ListItem(innerElements[i]);\n                el_L.appendChild(item.getDOMElement());\n            }\n        } \n        DOMElement.appendChild(el_L);\n        //window.addElementOptions('list', elList);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        return this;\n};","var WPTB_ListItem = function(text){\n\n        if (text == undefined) text = 'New List Item';\n        var DOMElement = document.createElement('article'),\n        \tdivdot = document.createElement('div'),\n            divcontent = document.createElement('div'),\n            libullet = document.createElement('li');\n        divdot.classList.add('wptb-list-item-style-dot');\n        divcontent.classList.add('wptb-list-item-content');\n        libullet.classList.add('wptb-bullet');\n        DOMElement.appendChild(divdot);\n        DOMElement.appendChild(divcontent);\n        divdot.appendChild(libullet);\n        divcontent.innerHTML = text;\n        divcontent.onkeyup = window.listItemKeyListener;\n\n        DOMElement.onmouseenter = function (event) {\n\n            var btnDelete = document.createElement('span'),\n                btnCopy = document.createElement('span'),\n                actions = document.createElement('span'),\n                previous, i;\n            actions.classList.add('wptb-actions');\n            btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n            btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n            this.classList.add('wptb-directlyhovered');\n\n            btnDelete.onclick = function () {\n                var item = this.parentNode.parentNode,\n                    parent = item.parentNode;\n                parent.removeChild(item);\n            };\n\n            btnCopy.onclick = function (event) {\n                console.log('Clicking item');\n                var article = event.target.parentNode.parentNode,\n                    content = article.querySelector('.wptb-list-item-content'),\n                    html = content.innerHTML;\n                var duplicate = new WPTB_ListItem(html);\n                article.parentNode.appendChild(duplicate.getDOMElement());\n            };\n\n            actions.append(btnCopy, btnDelete);\n            this.appendChild(actions);\n        };\n\n        DOMElement.onmouseleave = function (event) {\n            this.classList.remove('wptb-directlyhovered');\n            var actions = this.parentNode.querySelector('.wptb-actions');\n            if (actions != undefined) {\n                let parent = actions.parentNode;\n                parent.removeChild(actions);\n            }\n        };\n\n        divcontent.onkeydown = function (event) {\n            var key = (event.which != undefined) ? event.which :\n                event.keyCode, \n                duplicate, lastP;\n            if (key !== 13 ||\n                (window.dontAddItems !== undefined && window.dontAddItems === true)) {\n                return;\n            }\n            event.preventDefault();\n            duplicate = new WPTB_ListItem(this.innerHTML);\n            console.log('duplicate',duplicate.getDOMElement());\n            DOMElement.parentNode.insertBefore(duplicate.getDOMElement(),DOMElement);\n            console.log(divcontent);\n            divcontent.innerHTML = 'New List Item';\n            duplicate.getDOMElement().querySelector('.wptb-list-item-content').focus();\n\n            return false;\n        };\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        return this;\n\n};","var MultipleSelect = function(){\n\t\n\tvar selectedCells = [],\n\t\tmultipleCellMode = false; \n\n\tthis.activateMultipleSelectMode = function(){\n\t\tselectedCells = [];\n\t\tvar tds = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n\t\tfor (var i = 0; i < tds.length; i++) {\n\t\t\ttds[i].classList.remove('wptb-highlighted');\n\t\t}\n\t\tmultipleCellMode = true;\n\t}\n\n\tthis.deactivateMultipleSelectMode = function(){\n\t\tconsole.log(selectedCells);\n\t\tmultipleCellMode = false;\n\t}\n\n\tthis.pushSelectedCell = function(cell){ \n\t\tif(!multipleCellMode){ \n\t\t\treturn;\n\t\t}\n\t\tselectedCells.push(cell);\n\t\tconsole.log(cell);\n\t\tcell.classList.add('wptb-highlighted');\n\t};\n\n\tthis.selectedCells = function(){\n\t\treturn selectedCells;\n\t}\n\n\tthis.flushSelectedCells = function(){\n\t\tselectedCells = [];\n\t}\n\n\tthis.getFirst = function(){\n\t\tvar minXIndex = 1000, minYIndex = 1000, first;\n\t\tfor (var i = selectedCells.length - 1; i >= 0; i--) { \n\t\t\tif(minXIndex >= selectedCells[i].dataset.xIndex \n\t\t\t\t&& minYIndex >= selectedCells[i].dataset.yIndex)\n\t\t\t{ \n\t\t\t\tfirst = selectedCells[i];\n\t\t\t\tminXIndex = selectedCells[i].dataset.xIndex ;\n\t\t\t\tminYIndex = selectedCells[i].dataset.yIndex ;\n\t\t\t}\n\t\t} \n\t\treturn first;\n\t}\n\n\tthis.getLast = function(){\n\t\tvar maxXIndex = -1, maxYIndex = -1, last;\n\t\tfor (var i = selectedCells.length - 1; i >= 0; i--) { \n\t\t\tif(maxXIndex <= selectedCells[i].dataset.xIndex \n\t\t\t\t&& maxYIndex <= selectedCells[i].dataset.yIndex)\n\t\t\t{  \n\t\t\t\tlast = selectedCells[i];\n\t\t\t\tmaxXIndex = selectedCells[i].dataset.xIndex ;\n\t\t\t\tmaxYIndex = selectedCells[i].dataset.yIndex ;\n\t\t\t}\n\t\t} \n\t\treturn last;\n\t}\n\n\tthis.removeAllButFirst = function(){\n\t\tvar td = this.getFirst();\n\t\tfor (var i = 1; i < selectedCells.length; i++) {\n\t\t    selectedCells[i].classList.add('wptb-fused-cell-'+td.dataset.xIndex+'-'+td.dataset.yIndex);\n\t\t}\n\t}\n\n\treturn this;\n};","var WPTB_Parser = function(code){\n\tvar node, pos=0;\n\n\tfunction getChar(){\n\t\tif(pos>=code.length){\n\t\t\treturn -1;\n\t\t}\n\t\treturn code[pos++];\n\t}\n\n\tfunction getToken(){\n\t\tvar char = getChar(),\n\t\t\ttoken=char;\n\n\t\tif(char !== '['){\n\t\t\treturn;\n\t\t}\n\n\t\tdo{\n\t\t\tchar = getChar();\n\t\t\tif(char === -1){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\ttoken+=char;\n\t\t}while(char != ']');\n\t\t\n\t\treturn true;\n\t}\n\n\tfunction getCurrentToken(){\n\t\treturn ctoken;\n\t}\n\n\tfunction checkAndPass(expected){\n\t\tif(ctoken !== expected){\n\t\t\tconsole.error('There was an error with the file and therefore the table could not be rendere');\n\t\t\texit();\n\t\t}\n\t\t\n\t\tctoken = getToken();\n\t}\n\n\tfunction getWordFromToken(token){\n\t\tvar pos = token.indexOf(' '),\n\t\tword = token.substring(1,pos);\n\t\treturn '['+word+']';\n\t}\n\n\tfunction analizeHeader(){\n\t\tgetExpectedToken('[tr]');\n\t\tanalizeTds();\n\t\tgetExpectedToken('[/tr]');\n\t}\n\n\tfunction analizeRows(){\n\t\tgetExpectedToken('[tr]');\n\t\tanalizeTds();\n\t\tgetExpectedToken('[/tr]');\n\t}\n\n\tfunction analizeRoot(){\n\t\tvar n = document.createElement('table');\n\t\tgetExpectedToken('[table]');\n\t\tanalizeHeader();\n\t\tanalizeRows();\n\t\tgetExpectedToken('[/table]');\n\t\treturn n;\n\t}\n\n\tnode = analizeRoot();\n\n\treturn node;\n};","var WPTB_Settings = function(){\n\t\n\tvar elems = document.getElementsByClassName('wptb-element');\n\n\tfor (var i = 0; i < elems.length; i++) {\n\t\telems[i].ondragstart = function(event){\n\t\tevent.dataTransfer.effectAllowed = 'move';\n        event.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n\t}\n\t};\n\n\tdocument.getElementsByClassName('wptb-save-btn')[0].onclick = function(){\n\t\tvar http = new XMLHttpRequest(),\n        \turl = ajaxurl+\"?action=save_table\",\n        \tt = document.getElementById('wptb-setup-name').value.trim(), \n\t\t\tmessagingArea,\n\t\t\tcode = WPTB_Stringifier(document.getElementsByClassName('wptb-preview-table')[0]);\n\t\t\tconsole.log(code);\n\t\t\treturn;\n\t\tif(t === ''){\n\t\t\tmessagingArea = document.getElementsByClassName('wptb-messaging')[0];\n\t\t\tmessagingArea.innerHTML = 'Error: You must assign a name to the table before saving it.';\n\t\t\tmessagingArea.classList.add('warning');\n\t\t\tsetTimeout(function(){\n\t\t\t\tmessagingArea.classList.remove('warning');\n\t\t\t},5000);\n\t\t}\n        console.log('Ajax called');\n\t\tvar params = 'title='+t+'&content='+code;\n\t\thttp.open('POST', url, true);\n\t\thttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t\thttp.onreadystatechange = function(d) {\n            if (this.readyState == 4 && this.status == 200) {\n                messagingArea = document.getElementById('wptb-messaging-area');\n\t\t\t\tmessagingArea.innerHTML = 'Success: table \"'+t+'\" was successfully saved.';\n\t\t\t\tmessagingArea.classList.add('success');\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tmessagingArea.classList.remove('success');\n\t\t\t\t},5000);\n            }\n\t\t}\n\t\thttp.send(params);\n\t}\n};\n","var WPTB_Space = function(text){\n\n    function newElementProxy(el){\n            if(el == 'list'){\n                return new WPTB_List();\n            }\n            else if(el == 'image'){\n                return new WPTB_Image();\n            }   \n            else if(el == 'text'){\n                return new WPTB_Text();\n            }\n            else if(el == 'button'){\n                return new WPTB_Button();\n            }\n    }\n\n    spaceBetween = document.createElement('div'),\n    spaceBetween.classList.add('wptb-space-between');\n\n    spaceBetween.ondragenter = function(){\n        this.classList.add('visible');\n    };\n    spaceBetween.ondragover = function(event){\n                event.preventDefault();\n        };\n\n    spaceBetween.ondragleave = function(){\n        this.classList.remove('visible');\n    };\n\n    spaceBetween.ondrop = function(event){\n        event.stopPropagation();\n        \n                var p = event.target.nextSibling,\n                td = event.target,\n                element, t_space,spaceParent; \n\n                while(!td.classList.contains('wptb-droppable')){\n                    td = td.parentNode;\n                }\n\n        if(event.dataTransfer.getData('wptbElement'))\n        {\n            element = newElementProxy(event.dataTransfer.getData('wptbElement')); \n            this.classList.remove('visible');\n                \n \n\n            if(p == null){\n                td.appendChild(element.getDOMElement());\n                td.appendChild(new WPTB_Space());\n            }\n            else{\n                td.insertBefore(element.getDOMElement(),p);\n                td.insertBefore(new WPTB_Space(),p);\n            } \n \n\n         }\n\n        else\n        {  \n                    element = document.getElementsByClassName(event.dataTransfer.getData('node'))[0];\n\n                    t_space = element.nextSibling;\n                    spaceParent = element.parentNode;\n                    if(t_space != undefined){\n                        spaceParent.removeChild(t_space);\n                    }\n\n                    if(p == null){\n                     td.appendChild(element);\n                     td.appendChild(new WPTB_Space());\n                    }\n                    else{\n                        td.insertBefore(element,p);\n                        td.insertBefore(new WPTB_Space(),p);\n                    }  \n\n            }\n        this.classList.remove('visible');\n        };\n\n    return spaceBetween;\n};","var WPTB_Stringifier = function(node){\n\n\tif(node == undefined || node.tagName == undefined){\n\t\treturn '';\n\t}\n\n\tvar code='', children = node.childNodes,\n\tpadding, margin, bg1, bg2, bg3, border;\n\n\tswitch(node.tagName.toLowerCase()){\n\t\tcase 'table':  \n\t\t\t\t\t\tmargin = node.style.margin;\n\t\t\t\t\t\tpadding = node.style.padding;\n\t\t\t\t\t\tpadding = node.style.padding;\n\t\t\t\t\t\tif(node.rows.length > 1){\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(node.rows.length > 2){\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcode += '[table border=\"'\n\t\t\t\t\t\t\t\t+margin\n\t\t\t\t\t\t\t\t+'\" padding=\"'\n\t\t\t\t\t\t\t\t+padding\n\t\t\t\t\t\t\t\t+'\" enable-border=\"'\n\t\t\t\t\t\t\t\t+border\n\t\t\t\t\t\t\t\t+'\" data-bg1=\"'\n\t\t\t\t\t\t\t\t+bg1\n\t\t\t\t\t\t\t\t+'\" data-bg2=\"'\n\t\t\t\t\t\t\t\t+bg2\n\t\t\t\t\t\t\t\t+'\" data-bg3=\"'\n\t\t\t\t\t\t\t\t+bg3\n\t\t\t\t\t\t\t\t+'\"]';\n\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tcode += WPTB_Stringifier(children[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcode +='[/table]';\n\t\t\t\t\tbreak;\n\t\tcase 'tbody': \n\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tcode += WPTB_Stringifier(children[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\tcase 'tr': \n\t\t\t\t\tcode += '[tr]';\n\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tcode += WPTB_Stringifier(children[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tcode +='[/tr]';\n\t\t\t\t\t\tbreak;\n\t\tcase 'td': \n\t\t\t\t\tcode += '[td]';\n\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tcode += WPTB_Stringifier(children[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tcode +='[/td]';\n\t\t\t\t\t\tbreak;\n\t\tcase 'div': \n\t\t\t\t\tif(node.classList.contains('wptb-ph-element')){\n\t\t\t\t\t\tconsole.log('We reached div code!');\n\t\t\t\t\t\t\n\t\t\t        var infArr = node.className.match(/wptb-element-(.+)-(\\d+)/i),\n\t\t\t        \toptionsClass, trueNode,\n\t\t\t        \tnodeContent;\n\t\t\t        \tif(infArr == undefined){\n\t\t\t        \t\treturn;\n\t\t\t        \t} \n\t\t\t\t\t\tswitch(infArr[1]){\n\t\t\t\t\t\t\tcase 'list': \n\t\t\t\t\t\t\t\t\t\tcode += '[list type=\"\"';\n\t\t\t\t\t\t\t\t\t\ttrueNode = node.getElementsByTagName('ul')[0];\n\t\t\t\t\t\t\t\t\t\tif(!trueNode){\n\t\t\t\t\t\t\t\t\t\t\treturn ''; //We ignore the node in case of error\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcode +=']';\n\t\t\t\t\t\t\t\t\t\tlistitems = trueNode.getElementsByTagName('article');\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < listitems.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\tcode+='[item]';\n\t\t\t\t\t\t\t\t\t\t\tcode += listitems[i]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementsByClassName('wptb-list-item-content')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.innerHTML;\n\t\t\t\t\t\t\t\t\t\t\tcode+='[/item]';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcode += '[/list]';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'image': \n\t\t\t\t\t\t\t\t\t\ttrueNode = node.getElementsByTagName('img')[0];\n\t\t\t\t\t\t\t\t\t\tif(!trueNode){\n\t\t\t\t\t\t\t\t\t\t\treturn ''; //We ignore the node in case of error\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcode += '[img src=\"'+\n\t\t\t\t\t\t\t\t\t\ttrueNode.src+' width=\"'+\n\t\t\t\t\t\t\t\t\t\ttrueNode.width+' height=\"'+\n\t\t\t\t\t\t\t\t\t\ttrueNode.height+' alternative=\"'+\n\t\t\t\t\t\t\t\t\t\t+'\"]';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'text': \n\t\t\t\t\t\t\t\t\t\tcode += '[text]';\n\t\t\t\t\t\t\t\t\t\ttrueNode = node.getElementsByClassName('editable')[0];\n\t\t\t\t\t\t\t\t\t\tif(!trueNode){\n\t\t\t\t\t\t\t\t\t\t\treturn ''; //We ignore the node in case of error\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcode+= trueNode.innerHTML;\n\t\t\t\t\t\t\t\t\t\tcode += '[/text]';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'button': \n\t\t\t\t\t\t\t\t\t\ttrueNode = node.getElementsByClassName('editable')[0];\n\t\t\t\t\t\t\t\t\t\tif(!trueNode){\n\t\t\t\t\t\t\t\t\t\t\treturn ''; //We ignore the node in case of error\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcode += '[button]';\n\t\t\t\t\t\t\t\t\t\tcode += trueNode.innerHTML;\n\t\t\t\t\t\t\t\t\t\tcode += '[/button]';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{ \n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\tdefault: \n\t\t\t\tcode+= '';\n\t\t\t\tbreak;\n\t}\n\n\tif(node.nextSibling != undefined){\n\t\tWPTB_Stringifier(node.nextSibling);\n\t}\n\n\treturn code;\n};","var WPTB_Table = function(columns, rows){\n\t\t\t\n\t\t\tvar settings = document.getElementsByClassName('wptb-settings-items'),\n\t\t\t\twptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\n\t\t\t\ttable, row, cell;\n\n            for (var i = 0; i < settings.length; i++) {\n                settings[i].classList.add('visible');\n            }\n\n            document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n            \n\n            //Create a HTML Table element.\n            table = document.createElement('table');\n            table.classList.add('wptb-preview-table');\n\n\n            //Add the header row.\n            row = table.insertRow(-1);\n            row.classList.add('wptb-table-head', 'wptb-row');\n\n            for (var i = 0; i < columns; i++) {\n                cell = new WPTB_Cell();\n                cell.setCoords(0,i); \n                row.appendChild(cell.getDOMElement()); \n            }\n\n            //Add the data rows.\n            for (var i = 1; i < rows; i++) {\n\n                row = table.insertRow(-1);\n                row.classList.add('wptb-row');\n\n                for (var j = 0; j < columns; j++) {\n                    cell = new WPTB_Cell();\n                \tcell.setCoords(i,j); \n                    row.appendChild(cell.getDOMElement());\n                }\n            }\n\n    \t\ttable.recalculateIndexes = function(){\n    \t\t\tvar trs = this.getElementsByTagName('tr'), tds, maxCols= 0;\n\n\t\t        for (var i = 0; i < trs.length; i++) {\n\t\t            tds = trs[i].getElementsByTagName('td');\n\t\t            for (var j = 0; j < tds.length; j++) {\n\n\t\t                if(i==0){ \n\t\t                    tds[j].parentNode.className=''; \n\t\t                    tds[j].parentNode.classList.add('wptb-row','wptb-table-head');\n\t\t                }\n\t\t                else{\n\t\t                    tds[j].parentNode.className=''; \n\t\t                    tds[j].parentNode.classList.add('wptb-row'); \n\t\t                }\n\n\t\t                tds[j].dataset.xIndex = j;\n\t\t                tds[j].dataset.yIndex = i;\n\t\t            }\n\t\t            if(j > maxCols){\n\t\t            \tmaxCols = j;\n\t\t            }\n\t\t        } \n\t\t    \tthis.columns = maxCols; \n\t\t    \tconsole.log('Table dimensions: '+trs.length+' rows ,'+maxCols+' columns');\n    \t\t}\n\n    \t\ttable.addColumn = function(pos){\n\t\t        var referenceTd, newTd, _this, xCoord;\n\t\t        referenceTd = this.getElementsByClassName('wptb-highlighted')[0];\n\t\t        console.log('Table',this.rows.length);\n\t\t        for (var i = 0; i < this.rows.length; i++) {\n\t\t            console.log('Iteration '+(i+1));\n\t\t            var newTd = new WPTB_Cell(); \n\n\t\t            if(pos == 'before' || pos == 'after')\n\t\t            {\n\t\t        \t\txCoord = referenceTd.dataset.xIndex;\n\t\t                referenceTd = this.rows[i].getElementsByTagName('td')[0];\n\t\t                for (var  j= 0; j < xCoord; j++) {\n\t\t                \treferenceTd = this.rows[i].childNodes[j];\n\t\t                }\n\t\t                \n\t\t                if(pos=='before'){\n\t\t        \t\t\tconsole.log('referenceTd',referenceTd);\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd);\n\t\t                    \n\t\t                    var buttons = document.getElementsByClassName('wptb-relative-action');\n\t\t                    for (var k = 0; k < buttons.length; k++) {\n\t\t                        buttons[k].dataset.xIndex++;\n\t\t                    } \n\t\t                }\n\t\t                else{\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd.nextSibling);\n\t\t                }\n\t\t            }\n\t\t            else if(pos=='end'){\n\t\t                this.rows[i].appendChild(newTd.getDOMElement());  \n\t\t            }\n\t\t            else{\n\t\t            \treferenceTd = this.rows[i].getElementsByTagName('td')[0];\n\t\t            \tthis.rows[i].insertBefore(newTd.getDOMElement(),referenceTd);\n\t\t            }\n\t\t            table.columns++;\n\t\t        }\n\n\t\t        this.recalculateIndexes();\n\t\t    };\n\n    \t\ttable.addColumnToTheEnd = function(evt){\n\t\t        table.addColumn('end',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnToTheStart = function(evt){\n\t\t        table.addColumn('start',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnBefore = function(){\n\t\t        table.addColumn('before',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnAfter = function(){\n\t\t        table.addColumn('after',this.dataset.activeCell);\n\t\t    };\n\n    \t\ttable.addRow = function(pos){\n    \t\t\tvar _this, row, referenceRow = undefined;\n\t\t            \n\t\t        if(pos == 'end' || pos == 'start'){ \n\t\t            row = this.insertRow( pos == 'end' ? -1 : 0);\n\t\t        }else{\n\t\t            row = document.createElement('tr');\n\t\t        }\n\t\t            \n\t\t        for (var j = 0; j < this.columns; j++) {\n\t\t            var cell = new WPTB_Cell();\n\t\t            row.appendChild(cell.getDOMElement());\n\t\t        }\n\n\t\t        row.classList.add('wptb-row'); \n\n\t\t        if(pos == 'before' || pos == 'after' ){\n\t\t        \t_this = this.getElementsByClassName('wptb-highlighted')[0];\n\t\t            referenceRow = this.getElementsByTagName('tr')[_this.dataset.yIndex];\n\t\t            if(pos == \"before\"){\n\t\t                this.getElementsByTagName('tbody')[0].insertBefore(row,referenceRow);\n\t\t                var buttons = document.getElementsByClassName('wptb-relative-action');\n\t\t                for (var i = 0; i < buttons.length; i++) {\n\t\t                    buttons[i].dataset.yIndex++;\n\t\t                } \n\t\t            }else{\n\t\t                this.getElementsByTagName('tbody')[0].insertBefore(row,referenceRow.nextSibling);\n\t\t            }\n\t\t        }\n\n\t\t        if(pos =='before' || pos == 'start'){\n\t\t        \tvar active = document.querySelector('wptb-highlighted');\n\t\t        \tif(active){\n\t\t        \t\tactive.onclick();\n\t\t        \t}\n\t\t        }\n\n\t\t        this.recalculateIndexes();\n    \t\t};\n\n    \t\ttable.addRowToTheEnd = function(evt){\n\t\t        table.addRow('end');\n\t\t    };\n\n\t\t    table.addRowToTheStart = function(evt){\n\t\t        table.addRow('start');\n\t\t    };\n\n\t\t    table.addRowBefore = function(){\n\t\t        table.addRow('before');\n\t\t    };\n\n\t\t    table.addRowAfter = function(){\n\t\t        table.addRow('after');\n\t\t    };\n\n\t\t    table.deleteRow = function(e){\t        \n\t\t        var cell = document.getElementsByClassName('wptb-highlighted')[0],\n\t\t        \tindex = cell.dataset.yIndex,\n\t\t        \ttable = document.getElementsByClassName('wptb-preview-table')[0],\n\t\t            row = table.getElementsByTagName('tr')[index],\n\t\t            rowCount = table.rows.length,\n\t\t            tbody = row.parentNode;\n\t\t        if((rowCount==1 && columnCount==1) || tbody == undefined){\n\t\t             return;\n\t\t         }\n\t\t        tbody.removeChild(row);  \n\t\t        this.recalculateIndexes();\n\t\t    };\n\n\t\t    table.deleteColumn= function(e){\n\t\t        var cell = document.getElementsByClassName('wptb-highlighted')[0],\n\t\t        \tnum = cell.dataset.xIndex,\n\t\t        \ttable = document.getElementsByClassName('wptb-preview-table')[0],\n\t\t            rowCount = table.rows.length;\n\n\t\t        if((rowCount==1 && columnCount==1)){\n\t\t             return;\n\t\t         }\n\t\t        for (var i = 0; i < rowCount; i++) {\n\t\t             var td = table.getElementsByTagName('tr')[i].getElementsByTagName('td')[num],\n\t\t                tr = td.parentNode;\n\t\t             tr.removeChild(td);\n\t\t        }        \n\t\t        this.recalculateIndexes();\n\t\t    };\n\n\t\t    table.mergeCells = function(){\t    \t\n\t\t        var firstCell = document.select.getFirst(),\n\t\t            lastCell = document.select.getLast(),\n\t\t            colspan = Math.abs(lastCell.dataset.xIndex - firstCell.dataset.xIndex) + 1,\n\t\t            rowspan = Math.abs(lastCell.dataset.yIndex - firstCell.dataset.yIndex) + 1;\n\n\t\t            console.log(firstCell);\n\t\t            console.log(lastCell);\n\t\t            console.log(colspan+' '+rowspan);\n\t\t        \n\t\t        document.select.removeAllButFirst();\n\t\t        \n\t\t        if( colspan > 1 ){\n\t\t            firstCell.colSpan = colspan;\n\t\t        }\n\n\t\t        if( rowspan > 1 ){\n\t\t            firstCell.rowSpan = rowspan;\n\t\t        }\n\t\t        table.recalculateIndexes();\n\t\t    };\n\n\t\t    table.splitCell = function(){\n\t\t        var cell = document.getElementsByClassName('wptb-highlighted')[0],\n\t\t        \tclassn, hidden; \n\t\t        if(cell.colSpan == 1 && cell.rowSpan == 1){\n\t\t        \treturn;\n\t\t        }\n\n\t\t        cell.colSpan = 1;\n\t\t        cell.rowSpan = 1;\n\n\t\t        classn = 'wptb-fused-cell-'+cell.dataset.xIndex+'-'+cell.dataset.yIndex;\n\t\t        hidden = document.getElementsByClassName(classn);\n\t\t        console.log('Initial:',hidden);\n\n\t\t        for (; hidden.length; ) {\n\t\t        \tconsole.log(hidden[0]);\n\t\t        \thidden[0].classList.remove(classn);\n\t\t        }\n\t\t        table.recalculateIndexes();\n\t\t    };\n\n            wptbTableSetup.appendChild(table);\n\n            table.recalculateIndexes();\n\n\t\t    WPTB_LeftPanel();\n\n             \n};","var WPTB_Text = function(text){\n        var DOMElement = document.createElement('div'),\n                elText2 = document.createElement('div'),\n                elP = document.createElement('p');\n\n                this.kind = 'text';\n\n        elText2.classList.add('editable');\n        elP.innerHTML = text != undefined ? text : 'Text';\n        elText2.appendChild(elP);\n        DOMElement.appendChild(elText2);\n\n        this.getDOMElement = function (){ \n                return DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        return this;\n};","var applyGenericItemSettings = function(element){\n\tvar node = element.getDOMElement(),\n\t\tindex = document.counter.nextIndex(element.kind),\n\t\tlistItems;\n\n\tnode.onmouseenter = function(event){\n        this.classList.add('wptb-directlyhovered');\n        var btnDelete = document.createElement('span'),\n            btnCopy = document.createElement('span'),\n            btnMove = document.createElement('span'),\n            actions = document.createElement('span'),\n            previous, i;\n        actions.classList.add('wptb-actions');\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\n        btnMove.draggable = true;\n        btnDelete.onclick = function (event) {\n\t        var act = this.parentNode.parentNode,\n\t            el = act.parentNode;\n\t        el.removeChild(act); \n\t    };\n        btnCopy.onclick = function(event){\n        \tif(element.kind=='list'){\n\n\t\t        var td = event.target.parentNode.parentNode.parentNode,\n\t\t            temp = [],\n\t\t            srcList = event.target.parentNode.parentNode.querySelectorAll('ul article .wptb-list-item-content');\n\n\t\t        for (var i = 0; i < srcList.length; i++) {\n\t\t            temp.push(srcList[i].innerHTML);\n\t\t        }\n\t\t        var copy = new WPTB_List(temp);\n\t\t        td.appendChild(copy.getDOMElement());\n    \n        \t}\n        \telse if(element.kind=='text'){\n        \t\tvar td = event.target.parentNode.parentNode.parentNode,\n\t            \tcopy = new WPTB_Text(event.target.parentNode.parentNode.childNodes[0].innerHTML);\n\t        \ttd.appendChild(copy.getDOMElement());\n        \t}else if(element.kind=='image'){\n\t\t\t\tvar td = event.target.parentNode.parentNode.parentNode,\n\t            \tcopy = new WPTB_Image(event.target.parentNode.parentNode.childNodes[0].src);\n\t        \ttd.appendChild(copy.getDOMElement());\n        \t}\n        \telse{\n        \t\tvar td = event.target.parentNode.parentNode.parentNode,\n\t\t            copy = new WPTB_Button(event.target.parentNode.parentNode.childNodes[0].innerHTML);\n\t\t        td.appendChild(copy.getDOMElement());\n        \t}\n        };\n        btnMove.ondragstart = function(event){\n        \tvar parent = this,infArr,type;\n\n        \twhile(parent.className == '' || \n        \t\t! parent.classList.contains('wptb-ph-element') ){\n        \t\tparent = parent.parentNode;\n        \t}\n\n\n        \tinfArr = parent.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\ttype = infArr[1];\n\n        \tvar img = document.createElement(\"img\");\n        \timg.src = \"http://localhost/sandbox/wp-content/plugins/wp-table-builder/inc/admin/views/builder/icons/\"+type+\".png\";\n        \tconsole.log(img.src);\n\t\t    event.dataTransfer.setDragImage(img, 0, 0);\n\t\t    event.dataTransfer.setData('node','wptb-element-'+infArr[1]+'-'+infArr[2]);\n        \t};\n\n\n        if(element.kind === 'button'){\n        \ttinyMCE.init({\n\t            target: node.childNodes[0].childNodes[0],\n\t            inline: true,\n\t            plugins: \"link\",\n\t            dialog_type: \"modal\",\n\t            theme: 'modern',\n\t            menubar: false,\n\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t            toolbar: 'bold italic strikethrough',\n\t            setup: function (ed) {\n\t                ed.on(\"init\",\n\t                    function (ed) {\n\t                        tinyMCE.execCommand('mceRepaint');\n\t                    }\n\t                );\n\t            },\n\t            init_instance_callback: function (editor) {\n\t                editor.on('change', function (e) {\n\t                    // check if it becomes empty because if there's no value it's hard to edit the editor in button element\n\t                    if (editor.getContent() == \"\") {\n\t                        editor.setContent(\"<p class='wptb-button'>Button Text</p>\");\n\t                    }\n\t                });\n\t                editor.on('KeyDown', function (e) {\n\t                    var range = editor.selection.getRng();\n\t                    var KeyID = e.keyCode;\n\t                    if (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\n\t                        e.preventDefault();\n\t                        editor.setContent(\"<p class='wptb-button'></p>\");\n\t                    }\n\t                });\n\n\t                window.currentEditor = editor;\n\t                editor.on('focus', function (e) {\n\t                    \n\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t        if (window.currentEditor &&\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t        } else {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t        }\n\t                });\n            \n\t            }\n\t        });\n        }\n        else if(element.kind === 'text'){\n        \ttinyMCE.init({\n\t            target: node.childNodes[0],\n\t            inline: true,\n\t            plugins: \"link, paste\",\n\t            dialog_type: \"modal\",\n\t            theme: 'modern',\n\t            menubar: false,\n\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t            paste_as_text: true,\n\t            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n\t            init_instance_callback: function (editor) {\n\t                window.currentEditor = editor;\n\t                editor.on('focus', function (e) {\n\t                \t\n\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t        if (window.currentEditor &&\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t        } else {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t        }\n\t                });\n\t            }\n\t        });\n\n        }\n        else{\n        \tlistItems = node.getElementsByClassName('wptb-list-item-content');\n        \tfor (var i = 0; i < listItems.length; i++) {\n        \t\ttinyMCE.init({\n\t\t            target: listItems[i],\n\t\t            inline: true,\n\t\t            plugins: \"link, paste\",\n\t\t            dialog_type: \"modal\",\n\t\t            theme: 'modern',\n\t\t            menubar: false,\n\t\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t\t            paste_as_text: true,\n\t\t            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n\t\t            init_instance_callback: function (editor) {\n\t\t                window.currentEditor = editor;\n\t\t                editor.on('focus', function (e) {\n\t\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t        if (window.currentEditor &&\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t        } else {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t        }\n\t\t                });\n\t\t            }\n\t\t        });\n        \t}\n        }\n\n        actions.appendChild(btnMove);\n        actions.appendChild(btnCopy);\n        actions.appendChild(btnDelete);\n        this.appendChild(actions);\n\t};\n\n\tnode.onmouseleave = function(event){\n\t\tvar formerActions = this.getElementsByClassName('wptb-actions');\n        if (formerActions && formerActions[0]) {\n            let par = formerActions[0].parentNode;\n            par.removeChild(formerActions[0]);\n        }\n        this.classList.remove('wptb-directlyhovered');\n\t};\n\n\tnode.classList.add('wptb-ph-element', 'wptb-element-'+element.kind+'-' +\n           index);\n\n\tnew WPTB_ElementOptions(element,index);\n\n\tdocument.counter.increment(element.kind);\n     \n};",""]}