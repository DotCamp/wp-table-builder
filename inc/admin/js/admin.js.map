{"version":3,"sources":["WPTB_Builder.js","WPTB_Button.js","WPTB_Cell.js","WPTB_ElementCounters.js","WPTB_ElementOptions.js","WPTB_Image.js","WPTB_Initializer.js","WPTB_LeftPanel.js","WPTB_List.js","WPTB_ListItem.js","WPTB_Settings.js","WPTB_Space.js","WPTB_Table.js","WPTB_Text.js","applyGenericItemSettings.js","wptb-builder.js"],"names":["WPTB_Builder","document","counter","ElementCounters","initializer","WPTB_Initializer","settings","WPTB_Settings","addEventListener","WPTB_Button","text","DOMElement","createElement","elButton2","el_B","kind","classList","add","innerHTML","undefined","appendChild","getDOMElement","applyGenericItemSettings","WPTB_Cell","newElementProxy","el","WPTB_List","WPTB_Image","WPTB_Text","onclick","relativeActions","cells","window","_wptbManagementModeActive","contains","remove","getElementsByClassName","getElementsByTagName","i","length","console","log","dataset","activeCell","ondragenter","div","ondragover","e","preventDefault","ondragleave","ondrop","element","classId","space","t_space","spaceParent","WPTB_Space","dataTransfer","getData","nextSibling","parentNode","removeChild","onmousedown","onmouseover","onmouseup","setCoords","y","x","yIndex","xIndex","getCoords","coords","appendElement","node","priv","increment","key","nextIndex","WPTB_ElementOptions","index","elemIdClass","prop","querySelector","cloneNode","properties","getElementById","infArr","className","match","optionsClass","style","display","children","childNodes","optionControls","jQuery","wpColorPicker","change","event","ui","parent","target","classe","type","ps","number","affectedEl","color","toString","slider","oninput","value","onchange","n_Class","num","val","img","src","alt","width","height","fontSize","bullets","querySelectorAll","listStyleType","toLowerCase","file_frame","wp","media","frames","title","button","multiple","on","attachment","state","get","first","toJSON","url","open","MIN_COLUMNS","MIN_ROWS","MAX_COLUMNS","MAX_ROWS","tableGenerator","body","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","columns","rows","WPTB_Table","WPTB_LeftPanel","table","wptbElementButtons","tableRows","tds","j","backgroundColor","tableHeader","addInnerBorderSize","tableCells","border","addCellPadding","padding","addInnerBorder","checked","styles","marginBottom","addBorderSize","_val","ondragstart","setData","wptbElement","addRowToTheEnd","addRowToTheStart","addRowBefore","addRowAfter","addColumnToTheEnd","addColumnToTheStart","addColumnBefore","addColumnAfter","innerElements","el_L","item","WPTB_ListItem","divdot","divcontent","libullet","onkeyup","listItemKeyListener","onmouseenter","btnDelete","btnCopy","actions","previous","article","content","html","duplicate","append","onmouseleave","onkeydown","which","keyCode","lastP","dontAddItems","insertBefore","focus","trim","elems","effectAllowed","getAttribute","http","XMLHttpRequest","ajaxurl","t","code","messagingArea","setTimeout","params","setRequestHeader","onreadystatechange","d","readyState","status","send","spaceBetween","stopPropagation","p","td","wptbTableSetup","row","cell","insertRow","recalculateIndexes","trs","addColumn","pos","referenceTd","newTd","_this","buttons","evt","addRow","referenceRow","tbody","active","elText2","elP","listItems","btnMove","draggable","act","setDragImage","tinyMCE","init","inline","plugins","dialog_type","theme","menubar","fixed_toolbar_container","toolbar","setup","ed","execCommand","init_instance_callback","editor","getContent","setContent","range","selection","getRng","KeyID","startOffset","currentEditor","totalWidth","offsetWidth","scrollTop","bodyElement","position","right","top","paste_as_text","formerActions","par"],"mappings":"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","file":"admin.js","sourcesContent":["(function(){  \n\t\n\tvar WPTB_Builder = function(){ \n\t\tdocument.counter = new ElementCounters();\n\n\t\tvar initializer = WPTB_Initializer();\n\t\t\tsettings = WPTB_Settings();\n\t};\n\n\tdocument.addEventListener('DOMContentLoaded', WPTB_Builder); \n})();","var WPTB_Button = function(text){\n        var DOMElement = document.createElement('div'),\n        \telButton2 = document.createElement('div'),\n        \tel_B = document.createElement('p');\n\n\t\tthis.kind = 'button';\n\n        DOMElement.classList.add('wptb-button-container');\n        elButton2.classList.add('wptb-button-wrapper');\n        el_B.classList.add('wptb-button');\n        el_B.classList.add('editable');\n        el_B.innerHTML = text != undefined ? text : 'Button Text';\n        elButton2.appendChild(el_B);\n        DOMElement.appendChild(elButton2);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        applyGenericItemSettings(this);\n\n        return this;\n};","var WPTB_Cell = function(DOMElement){\n\n\t\tfunction newElementProxy(el){\n\t\t\tif(el == 'list'){\n                return new WPTB_List();\n            }\n            else if(el == 'image'){\n                return new WPTB_Image();\n            }   \n            else if(el == 'text'){\n                return new WPTB_Text();\n            }\n            else if(el == 'button'){\n                return new WPTB_Button();\n            }\n\t\t}\n        \n        DOMElement = document.createElement(\"td\");\n        \n        DOMElement.classList.add('wptb-droppable', 'wptb-cell');  \n\n        DOMElement.onclick = function(){\n\n        \tvar relativeActions, cells;\n\n        \tif(window._wptbManagementModeActive){\n        \t\treturn;\n        \t}\n        \tif(this.classList.contains('wptb-highlighted')){\n        \t\tthis.classList.remove('wptb-highlighted');\n        \t}\n        \telse{\n        \t\trelativeActions = document.getElementsByClassName('wptb-relative-action');\n        \t\tcells = document.getElementsByTagName('td');\n\n        \t\tfor (var i = 0; i < relativeActions.length; i++) {\n        \t\t\tconsole.log(relativeActions[i]);\n        \t\t\trelativeActions[i].dataset.activeCell = this;\n        \t\t}\n\n        \t\tfor (var i = 0; i < cells.length; i++) {\n        \t\t\tcells[i].classList.remove('wptb-highlighted');\n        \t\t}\n\n        \t\tthis.classList.add('wptb-highlighted');\n\n        \t}\n        \t\n        };\n\n        DOMElement.ondragenter = function(){\n        \tvar div;\n        \tthis.classList.add('wptb-drop-here-empty');\n        }\n\n        DOMElement.ondragover = function(e){\n        \te.preventDefault();\n        }\n\n        DOMElement.ondragleave = function(){\n        \tthis.classList.remove('wptb-drop-here-empty');\n\n        }\n\n        DOMElement.ondrop = function(e){\n        \tvar element, classId, space, t_space, spaceParent;\n        \te.preventDefault();\n            space = new WPTB_Space();\n\n            if(e.dataTransfer.getData('wptbElement')){\n        \t   element = newElementProxy(e.dataTransfer.getData('wptbElement'));\n                if(this.innerHTML==''){\n                    this.appendChild(new WPTB_Space());\n                }\n                this.appendChild(element.getDOMElement());\n                this.appendChild(space);\n        \t}\n            else{\n\n                classId = e.dataTransfer.getData('node');\n                element = document.getElementsByClassName(classId)[0];\n                if(this.innerHTML==''){\n                    t_space = element.nextSibling;\n                    spaceParent = element.parentNode;\n                    if(t_space != undefined){\n                        spaceParent.removeChild(t_space);\n                    }\n                    this.appendChild(new WPTB_Space());\n                }\n                this.appendChild(element);\n                this.appendChild(space);\n            }\n        \tthis.classList.remove('wptb-drop-here-empty');\n        \treturn true;\n        }\n\n        DOMElement.onmousedown = function(){\n\n        };\n\n        DOMElement.onmouseover = function(){\n\n        };\n\n        DOMElement.onmouseup = function(){\n\n        };\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        this.setCoords = function(y,x){\n        \tvar el = this.getDOMElement();\n        \tel.dataset.yIndex = y;\n        \tel.dataset.xIndex = x;\n        }\n\n        this.getCoords = function(){\n        \tvar coords,\n        \t\tel = this.getDOMElement();\n        \tcoords.x = el.dataset.xIndex;\n        \tcoords.y = el.dataset.yIndex;\n        \treturn coords;\n        }\n\n        this.appendElement = function(node){\n        \tgetDOMElement().appendChild(node);\n        }\n\n        return this;\n\n};","var ElementCounters = function(){\n\tvar priv = [];\n\tpriv['text'] = 0;\n\tpriv['image'] = 0;\n\tpriv['list'] = 0;\n\tpriv['button'] = 0; \n\n\tthis.increment = function(key){\n\n\t\tif(! (key in priv) ){\n\t\t\treturn;\n\t\t}\n\n\t\tpriv[key]++;\n\t}\n\tthis.nextIndex = function(key){\n\n\t\tif(! (key in priv) ){\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn priv[key] + 1;\n\t}\n\treturn this;\n};","var WPTB_ElementOptions = function(element,index){\n\n\tvar node = element.getDOMElement(), elemIdClass;\n\n\tprop = document.querySelector(\".wptb-\" + element.kind + \"-options-prototype\").cloneNode(true);\n    prop.classList.remove(\"wptb-\" + element.kind + \"-options-prototype\"); // remove prototype from the class\n    elemIdClass='wptb-options-' + element.kind + \"-\" +  index;\n\n    var properties = prop.getElementsByClassName('wptb-element-property');\n\n    for (var i = 0; i < properties.length; i++) {\n    \tproperties[i].dataset.element = elemIdClass;\n    }\n\n    prop.classList.add(elemIdClass);\n    document.getElementById(\"element-options-group\").appendChild(prop);\n\n    node.onclick = function(){\n        var infArr = this.className.match(/wptb-element-((.+-)\\d+)/i),\n\t\t\toptionsClass = '.wptb-' + infArr[2] + 'options' +\n                        '.wptb-options-' + infArr[1];\n\n    \tdocument.getElementById('add-elements').getElementsByTagName('a')[0].classList.remove('active');\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.add('active');\n\t\t\n\t\tdocument.getElementsByClassName('wptb-elements-container')[0].style.display = 'none';\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'none';\n        document.getElementById(\"element-options-group\").style.display = 'block';\n\n        var children = document.getElementById(\"element-options-group\").childNodes;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].style)\n                children[i].style.display = 'none';\n        }\n\n        document.querySelector(optionsClass).style.display = 'block';\n    };\n\n    var optionControls = prop.getElementsByClassName('wptb-element-property');\n    console.log(optionControls);\n    for (var i = 0; i < optionControls.length; i++) {\n    \tif(optionControls[i].classList.contains('wptb-color-picker')){\n    \t\tjQuery(optionControls[i]).wpColorPicker({\n                change: function(event, ui){\n                    var parent = event.target, classe, type, ps, number;\n \n\n\n                    classe = parent.dataset.element.match(/wptb-options-(.+)-(\\d+)/i);\n                    type = classe[1];\n                    number = classe[2];\n                    console.log('Element','wptb-element-'+type+'-'+number);\n                    affectedEl = document.getElementsByClassName('wptb-element-'+type+'-'+number)[0];\n                    ps = affectedEl.getElementsByTagName(\"p\");\n                    for (var i = 0; i < ps.length; i++) {\n                            ps[i].style.color =  ui.color.toString();\n                    } \n                }\n            });\n    \t}\n\n        if(optionControls[i].dataset.type === 'font-size'){\n            var slider = optionControls[i].parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0];\n            slider.oninput = function(){\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].value = this.value;\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].onchange();\n            }\n        }\n\n    \toptionControls[i].onchange = function(event){\n\n    \t\tvar n_Class = this.dataset.element,\n    \t\t\tinfArr = n_Class.match(/wptb-options-(.+)-(\\d+)/i),\n\t\t\t\ttype = infArr[1],\n                num = infArr[2],\n    \t\t\taffectedEl = document.getElementsByClassName('wptb-element-'+type+'-'+num)[0],\n    \t\t\tval = this.value;\n\n                console.log('Event triggered',this.dataset.type,this.value);\n\n    \t\tswitch(this.dataset.type){\n                case 'src':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        img.src=this.value;\n                        break; \n                    case 'alternative-text':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        img.alt=this.value;\n                        break;\n                    case 'image-width':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        console.log(img,this.value);\n                        img.width=this.value;\n                        break; \n                    case 'image-height':\n                        var img = affectedEl.getElementsByTagName(\"img\")[0];\n                        img.height=this.value;\n                        break; \n    \t\t\tcase 'font-size':\n                        var ps = affectedEl.getElementsByTagName(\"p\");\n                        for (var i = 0; i < ps.length; i++) {\n                            ps[i].style.fontSize =  val + 'px';\n                        }\n\n                        this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0].value = this.value;\n                        \n                        break;\n                    case 'color':\n                        var ps = affectedEl.getElementsByTagName(\"p\");\n                        for (var i = 0; i < ps.length; i++) {\n                            ps[i].style.color =  val;\n                        } \n                        break;\n                    case 'list-class':\n                        if (val == 'unordered') {\n                            affectedEl.querySelector('[data-type=list-style-type]').parentNode.style.display= 'flex';\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\n                            for (var i = 0; i < bullets.length; i++) {\n                                bullets[i].style.listStyleType= 'disc';\n                            }\n                            document.querySelector('[data-type=list-style-type]').value = 'disc';\n                        } else {\n                            affectedEl.querySelector('[data-type=list-style-type]').parentNode.style.display= 'none'; \n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\n                            for (var i = 0; i < bullets.length; i++) {\n                                bullets[i].style.listStyleType= 'decimal';\n                            } \n                        }\n                        break; \n                    case 'list-style-type':\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\n                            for (var i = 0; i < bullets.length; i++) {\n                                bullets[i].style.listStyleType= val.toLowerCase();\n                            } \n                        break;\n    \t\t}\n    \t};\n    }\n};","var WPTB_Image = function(text){\n        var DOMElement = document.createElement('div'),\n        \timg = document.createElement('img');\n\n\t\tthis.kind = 'image';\n\n        DOMElement.appendChild(img);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        file_frame = wp.media.frames.file_frame = wp.media({\n                                        title: 'Select a image to upload',\n                                        button: {\n                                                text: 'Use this image',\n                                        },\n                                        multiple: false  \n                                });\n                                // When an image is selected, run a callback.\n                                file_frame.on( 'select', function() {\n                                        attachment = file_frame.state().get('selection').first().toJSON();\n                                        img.src = attachment.url; \n                                });\n                                        // Finally, open the modal\n        file_frame.open();\n\n        return this;\n};","var WPTB_Initializer = function(){\n\tconst MIN_COLUMNS = 1,\n\t\t  MIN_ROWS = 1,\n\t\t  MAX_COLUMNS = 10,\n\t\t  MAX_ROWS = 10;\n\n\tvar tableGenerator = document.body;\n\t\tcolumnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0],\n\t\tcolumnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0],\n\t\trowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1],\n\t\trowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1],\n\t\tcolumnsInput = document.getElementById('wptb-columns-number'),\n\t\trowsInput = document.getElementById('wptb-rows-number');\n\n\n\t\tcolumnsDecrementButton.onclick = function(){\n\t\t\tif(columnsInput.value > MIN_COLUMNS){\n\t\t\t\tcolumnsInput.value--;\n\t\t\t}\n\t\t};\n\n\t\tcolumnsIncrementButton.onclick = function(){\n\t\t\tif(columnsInput.value < MAX_COLUMNS){\n\t\t\t\tcolumnsInput.value++;\n\t\t\t}\n\t\t};\n\n\t\trowsDecrementButton.onclick = function(){\n\t\t\tif(rowsInput.value > MIN_ROWS){\n\t\t\t\trowsInput.value--;\n\t\t\t}\n\t\t};\n\t\t\n\t\trowsIncrementButton.onclick = function(){\n\t\t\tif(rowsInput.value < MAX_ROWS){\n\t\t\t\trowsInput.value++;\n\t\t\t}\n\t\t};\n\n\tdocument.getElementById('wptb-generate-table').onclick = function(){\n\n\t\t\t var columns = document.getElementById('wptb-columns-number').value,\n\t\t\t \t rows = document.getElementById('wptb-rows-number').value;\n\n\t\t\t WPTB_Table(columns, rows);\n\t\t}\n\n};","var WPTB_LeftPanel = function(){\n\tvar table = document.getElementsByClassName('wptb-preview-table')[0],\n\twptbElementButtons = document.getElementsByClassName('wptb-element');\n\n\tjQuery('#wptb-even-row-bg').wpColorPicker({\n\t\tchange: function(event,ui){\n                var tableRows = table.getElementsByTagName('tr');\n                for (var i = 1; i < tableRows.length; i+=2) {\n                \ttds = tableRows[i].getElementsByTagName('td');\n                \tfor (var j = 0; j < tds.length; j++) {\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\n                \t} \n                }\n    \t}\n\t}); //3MNRVA96 \n    jQuery('#wptb-odd-row-bg').wpColorPicker({\n    \tchange: function(event,ui){\n                var tableRows = table.getElementsByTagName('tr');\n                for (var i = 2; i < tableRows.length; i+=2) {\n                \ttds = tableRows[i].getElementsByTagName('td');\n                \tfor (var j = 0; j < tds.length; j++) {\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\n                \t} \n                }\n    \t}\n    });\n    jQuery('#wptb-table-header-bg').wpColorPicker({\n    \tchange: function(event,ui){\n                var tableHeader = table.getElementsByTagName('tr')[0],\n                \ttds = tableHeader.getElementsByTagName('td');\n                \tfor (var j = 0; j < tds.length; j++) {\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\n                \t} \n    \t}\n    });\n\n\n\n    function addInnerBorderSize(value) {\n                var tableCells = table.getElementsByTagName('td');\n                for (var i = 0; i < tableCells.length; i++) {\n                    tableCells[i].style.border = value + 'px solid';\n                }\n    }\n\n    function addCellPadding(value) {\n                var tableCells = table.getElementsByTagName('td');\n                for (var i = 0; i < tableCells.length; i++) {\n                    tableCells[i].style.padding = value + 'px';\n                }\n    }\n\n\n    function addInnerBorder(checked) {\n                var styles;\n\n                if (checked == 'checked') {\n                    document.getElementById('wptb-apply-inner-border').style.marginBottom = '0px';\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n                    for (var i = 0; i < tableCells.length; i++) {\n                        tableCells[i].style.border = '1px solid';\n                    }\n\n                    document.getElementById('wptb-inner-border-settings').classList.add('visible');\n                } else {\n                    document.getElementById('wptb-inner-border-settings').classList.remove('visible');\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n                    for (var i = 0; i < tableCells.length; i++) {\n                        tableCells[i].style.border = '';\n                    }\n                }\n    }\n\n    function addBorderSize(value) {\n                table.style.border = value + 'px solid';\n    }\n\n    document.getElementById('wptb-table-cell-slider').oninput = function () {\n            document.getElementById('wptb-table-cell-number').value = this.value;\n            addCellPadding(this.value);\n    };\n\n    document.getElementById('wptb-table-cell-number').onchange = function () {\n            document.getElementById('wptb-table-cell-slider').value = this.value;\n            addCellPadding(this.value);\n    };\n\n    document.getElementById('wptb-table-border-slider').oninput = function () {\n            document.getElementById('wptb-table-border-number').value = this.value;\n            addBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-table-border-number').onchange = function () {\n            document.getElementById('wptb-table-border-slider').value = this.value;\n            addBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-table-inner-border-slider').oninput = function () {\n            document.getElementById('wptb-table-inner-border-number').value = this.value;\n            addInnerBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-table-inner-border-number').onchange = function () {\n            document.getElementById('wptb-table-inner-border-slider').value = this.value;\n            addInnerBorderSize(this.value);\n    };\n\n    document.getElementById('wptb-inner-border-check').onchange = function () {\n                var _val = this.checked ? 'checked' : 'unchecked';\n                addInnerBorder(_val);\n            };\n\n\tfor (var i = 0; i < wptbElementButtons.length; i++) {\n\t\twptbElementButtons[i].ondragstart = function(e){\n\t\t\te.dataTransfer.setData('wptbElement',this.dataset.wptbElement);\n\t\t}\n\t}\n\n\tdocument.getElementById('wptb-add-end-row').onclick = table.addRowToTheEnd;\n\tdocument.getElementById('wptb-add-start-row').onclick = table.addRowToTheStart;\n\tdocument.getElementById('wptb-add-row-before').onclick = table.addRowBefore;\n\tdocument.getElementById('wptb-add-row-after').onclick = table.addRowAfter;\n\tdocument.getElementById('wptb-add-end-column').onclick = table.addColumnToTheEnd;\n\tdocument.getElementById('wptb-add-start-column').onclick = table.addColumnToTheStart;\n\tdocument.getElementById('wptb-add-column-before').onclick = table.addColumnBefore;\n\tdocument.getElementById('wptb-add-column-after').onclick = table.addColumnAfter;\n\tdocument.getElementById('add-elements').onclick = function(){\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.remove('active');\n        document.getElementById('add-elements').getElementsByTagName('a')[0].classList.add('active');\n        document.getElementsByClassName('wptb-elements-container')[0].style.display = 'table';\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'block';\n        document.getElementById(\"element-options-group\").style.display = 'none';\n\t};\n};","var WPTB_List = function(innerElements){\n    \tvar el_L = document.createElement('ul'), item,\n\t\t\tDOMElement = document.createElement('div');\n\n\t\tthis.kind = 'list';\n\n        if (!innerElements)\n            for (var i = 0; i < 3; i++) {\n            \titem = new WPTB_ListItem('List Item ' + (i + 1));\n                el_L.appendChild(item.getDOMElement());\n            }\n        else {\n            for (var i = 0; i < innerElements.length; i++) {\n            \titem = new WPTB_ListItem(innerElements[i]);\n                el_L.appendChild(item.getDOMElement());\n            }\n        } \n        DOMElement.appendChild(el_L);\n        //window.addElementOptions('list', elList);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        return this;\n};","var WPTB_ListItem = function(text){\n\n        if (text == undefined) text = 'New List Item';\n        var DOMElement = document.createElement('article'),\n        \tdivdot = document.createElement('div'),\n            divcontent = document.createElement('div'),\n            libullet = document.createElement('li');\n        divdot.classList.add('wptb-list-item-style-dot');\n        divcontent.classList.add('wptb-list-item-content');\n        libullet.classList.add('wptb-bullet');\n        DOMElement.appendChild(divdot);\n        DOMElement.appendChild(divcontent);\n        divdot.appendChild(libullet);\n        divcontent.innerHTML = text;\n        divcontent.onkeyup = window.listItemKeyListener;\n\n        DOMElement.onmouseenter = function (event) {\n\n            var btnDelete = document.createElement('span'),\n                btnCopy = document.createElement('span'),\n                actions = document.createElement('span'),\n                previous, i;\n            actions.classList.add('wptb-actions');\n            btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n            btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n            this.classList.add('wptb-directlyhovered');\n\n            btnDelete.onclick = function () {\n                var item = this.parentNode.parentNode,\n                    parent = item.parentNode;\n                parent.removeChild(item);\n            };\n\n            btnCopy.onclick = function (event) {\n                var article = event.target.parentNode.parentNode,\n                    content = article.querySelector('.wptb-list-item-content'),\n                    html = content.innerHTML;\n                var duplicate = new WPTB_ListItem(html);\n                article.parentNode.appendChild(duplicate.getDOMElement());\n            };\n\n            actions.append(btnCopy, btnDelete);\n            this.appendChild(actions);\n        };\n\n        DOMElement.onmouseleave = function (event) {\n            this.classList.remove('wptb-directlyhovered');\n            var actions = this.parentNode.querySelector('.wptb-actions');\n            if (actions != undefined) {\n                let parent = actions.parentNode;\n                parent.removeChild(actions);\n            }\n        };\n\n        divcontent.onkeydown = function (event) {\n            var key = (event.which != undefined) ? event.which :\n                event.keyCode, \n                duplicate, lastP;\n            if (key !== 13 ||\n                (window.dontAddItems !== undefined && window.dontAddItems === true)) {\n                return;\n            }\n            event.preventDefault();\n            duplicate = new WPTB_ListItem();\n            if(DOMElement.nextSibling != undefined){\n                DOMElement.parentNode.insertBefore(duplicate.getDOMElement(),DOMElement.nextSibling);\n            }\n            else{\n                DOMElement.parentNode.appendChild(duplicate.getDOMElement());\n            }\n            \n\n            duplicate.getDOMElement().querySelector('.wptb-list-item-content').focus();\n\n            lastP = this.childNodes[this.childNodes.length - 1];\n            this.removeChild(lastP);\n            if (this.innerHTML.trim() == '<p><br data-mce-bogus=\"1\"></p>') {\n                this.innerHTML = 'New List Item';\n            }\n            return false;\n        };\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        return this;\n\n};","var WPTB_Settings = function(){\n\t\n\tvar elems = document.getElementsByClassName('wptb-element');\n\n\tfor (var i = 0; i < elems.length; i++) {\n\t\telems[i].ondragstart = function(event){\n\t\tevent.dataTransfer.effectAllowed = 'move';\n        event.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n\t}\n\t};\n\n\tdocument.getElementsByClassName('wptb-save-btn')[0].onclick = function(){\n\t\tvar http = new XMLHttpRequest(),\n        \turl = ajaxurl+\"?action=save_table\",\n        \tt = document.getElementById('wptb-setup-name').value.trim(), \n        \tcode = document.getElementsByClassName('wptb-table-setup')[0].innerHTML,\n\t\t\tmessagingArea;\n\t\tif(t === ''){\n\t\t\tmessagingArea = document.getElementsByClassName('wptb-messaging')[0];\n\t\t\tmessagingArea.innerHTML = 'Error: You must assign a name to the table before saving it.';\n\t\t\tmessagingArea.classList.add('warning');\n\t\t\tsetTimeout(function(){\n\t\t\t\tmessagingArea.classList.remove('warning');\n\t\t\t},5000);\n\t\t}\n        console.log('Ajax called');\n\t\tvar params = 'title='+t+'&content='+code;\n\t\thttp.open('POST', url, true);\n\t\thttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t\thttp.onreadystatechange = function(d) {\n            if (this.readyState == 4 && this.status == 200) {\n                messagingArea = document.getElementById('wptb-messaging-area');\n\t\t\t\tmessagingArea.innerHTML = 'Success: table \"'+t+'\" was successfully saved.';\n\t\t\t\tmessagingArea.classList.add('success');\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tmessagingArea.classList.remove('success');\n\t\t\t\t},5000);\n            }\n\t\t}\n\t\thttp.send(params);\n\t}\n};\n","var WPTB_Space = function(text){\n\n    function newElementProxy(el){\n            if(el == 'list'){\n                return new WPTB_List();\n            }\n            else if(el == 'image'){\n                return new WPTB_Image();\n            }   \n            else if(el == 'text'){\n                return new WPTB_Text();\n            }\n            else if(el == 'button'){\n                return new WPTB_Button();\n            }\n    }\n\n    spaceBetween = document.createElement('div'),\n    spaceBetween.classList.add('wptb-space-between');\n\n    spaceBetween.ondragenter = function(){\n        this.classList.add('visible');\n    };\n    spaceBetween.ondragover = function(event){\n                event.preventDefault();\n        };\n\n    spaceBetween.ondragleave = function(){\n        this.classList.remove('visible');\n    };\n\n    spaceBetween.ondrop = function(event){\n        event.stopPropagation();\n        \n                var p = event.target.nextSibling,\n                td = event.target,\n                element, t_space,spaceParent; \n\n                while(!td.classList.contains('wptb-droppable')){\n                    td = td.parentNode;\n                }\n\n        if(event.dataTransfer.getData('wptbElement'))\n        {\n            element = newElementProxy(event.dataTransfer.getData('wptbElement')); \n            this.classList.remove('visible');\n                \n \n\n            if(p == null){\n                td.appendChild(element.getDOMElement());\n                td.appendChild(new WPTB_Space());\n            }\n            else{\n                td.insertBefore(element.getDOMElement(),p);\n                td.insertBefore(new WPTB_Space(),p);\n            } \n \n\n         }\n\n        else\n        {  \n                    element = document.getElementsByClassName(event.dataTransfer.getData('node'))[0];\n\n                    t_space = element.nextSibling;\n                    spaceParent = element.parentNode;\n                    if(t_space != undefined){\n                        spaceParent.removeChild(t_space);\n                    }\n\n                    if(p == null){\n                     td.appendChild(element);\n                     td.appendChild(new WPTB_Space());\n                    }\n                    else{\n                        td.insertBefore(element,p);\n                        td.insertBefore(new WPTB_Space(),p);\n                    }  \n\n            }\n        this.classList.remove('visible');\n        };\n\n    return spaceBetween;\n};","var WPTB_Table = function(columns, rows){\n\t\t\t\n\t\t\tvar settings = document.getElementsByClassName('wptb-settings-items'),\n\t\t\t\twptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\n\t\t\t\ttable, row, cell;\n\n            for (var i = 0; i < settings.length; i++) {\n                settings[i].classList.add('visible');\n            }\n\n            document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n            \n\n            //Create a HTML Table element.\n            table = document.createElement('table');\n            table.classList.add('wptb-preview-table');\n\n\n            //Add the header row.\n            row = table.insertRow(-1);\n            row.classList.add('wptb-table-head', 'wptb-row');\n\n            for (var i = 0; i < columns; i++) {\n                cell = new WPTB_Cell();\n                cell.setCoords(0,i); \n                row.appendChild(cell.getDOMElement()); \n            }\n\n            //Add the data rows.\n            for (var i = 1; i < rows; i++) {\n\n                row = table.insertRow(-1);\n                row.classList.add('wptb-row');\n\n                for (var j = 0; j < columns; j++) {\n                    cell = new WPTB_Cell();\n                \tcell.setCoords(i,j); \n                    row.appendChild(cell.getDOMElement());\n                }\n            }\n\n    \t\ttable.recalculateIndexes = function(){\n    \t\t\tvar trs = this.getElementsByTagName('tr'), tds;\n\n\t\t        for (var i = 0; i < trs.length; i++) {\n\t\t            tds = trs[i].getElementsByTagName('td');\n\t\t            for (var j = 0; j < tds.length; j++) {\n\n\t\t                if(i==0){ \n\t\t                    tds[j].parentNode.className=''; \n\t\t                    tds[j].parentNode.classList.add('wptb-row','wptb-table-head');\n\t\t                }\n\t\t                else{\n\t\t                    tds[j].parentNode.className=''; \n\t\t                    tds[j].parentNode.classList.add('wptb-row'); \n\t\t                }\n\n\t\t                tds[j].dataset.xIndex = j;\n\t\t                tds[j].dataset.yIndex = i;\n\t\t            }\n\t\t        }\n    \t\t}\n\n    \t\ttable.addColumn = function(pos){\n\t\t        var referenceTd, newTd, _this;\n\t\t        for (var i = 0; i < this.rows.length; i++) {\n\t\t            \n\t\t            var newTd = new WPTB_Cell(); \n\n\t\t            if(pos == 'before' || pos == 'after')\n\t\t            {\n\t\t                referenceTd = this.rows\n\t\t                        .getElementsByTagName('td')[_this.dataset.xIndex];\n\t\t                if(pos=='before'){\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd);\n\t\t                    var buttons = document.getElementsByClassName('wptb-relative-action');\n\t\t                    for (var i = 0; i < buttons.length; i++) {\n\t\t                        buttons[i].dataset.xIndex++;\n\t\t                    } \n\t\t                }\n\t\t                else{\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd.nextSibling);\n\t\t                }\n\t\t            }\n\t\t            else if(pos=='end'){\n\t\t                this.rows[i].appendChild(newTd.getDOMElement());  \n\t\t            }\n\t\t            else{\n\t\t                this.rows[i].innerHTML = '<td class=\"wptb-droppable wptb-cell\"></td>' + this.rows[i].innerHTML; \n\t\t            }\n\t\t        }\n\n\t\t        this.recalculateIndexes();\n\t\t    };\n\n    \t\ttable.addColumnToTheEnd = function(evt){\n\t\t        table.addColumn('end',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnToTheStart = function(evt){\n\t\t        table.addColumn('start',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnBefore = function(){\n\t\t        table.addColumn('before',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnAfter = function(){\n\t\t        table.addColumn('after',this.dataset.activeCell);\n\t\t    };\n\n    \t\ttable.addRow = function(pos){\n    \t\t\tvar _this, row, referenceRow = undefined;\n\t\t            \n\t\t        if(pos == 'end' || pos == 'start'){ \n\t\t            row = this.insertRow( pos == 'end' ? -1 : 0);\n\t\t        }else{\n\t\t            row = document.createElement('tr');\n\t\t        }\n\t\t            \n\t\t        for (var j = 0; j < this.columns; j++) {\n\t\t            var cell = new WPTB_Cell();\n\t\t            row.appendChild(cell.getDOMElement());\n\t\t        }\n\n\t\t        row.classList.add('wptb-row'); \n\n\t\t        if(pos == 'before' || pos == 'after' ){\n\t\t        \t_this = this.getElementsByClassName('wptb-highlighted')[0];\n\t\t            referenceRow = this.getElementsByTagName('tr')[_this.dataset.yIndex];\n\t\t            if(pos == \"before\"){\n\t\t                params.tbody.insertBefore(row,referenceRow);\n\t\t                var buttons = document.getElementsByClassName('wptb-relative-action');\n\t\t                for (var i = 0; i < buttons.length; i++) {\n\t\t                    buttons[i].dataset.yIndex++;\n\t\t                } \n\t\t            }else{\n\t\t                this.getElementsByTagName('tbody')[0].insertBefore(row,referenceRow.nextSibling);\n\t\t            }\n\t\t        }\n\n\t\t        if(pos =='before' || pos == 'start'){\n\t\t        \tvar active = document.querySelector('wptb-highlighted');\n\t\t        \tif(active){\n\t\t        \t\tactive.onclick();\n\t\t        \t}\n\t\t        }\n\n\t\t        this.recalculateIndexes();\n    \t\t};\n\n    \t\ttable.addRowToTheEnd = function(evt){\n\t\t        table.addRow('end');\n\t\t    };\n\n\t\t    table.addRowToTheStart = function(evt){\n\t\t        table.addRow('start');\n\t\t    };\n\n\t\t    table.addRowBefore = function(){\n\t\t        table.addRow('before');\n\t\t    };\n\n\t\t    table.addRowAfter = function(){\n\t\t        table.addRow('after');\n\t\t    };\n\n\t\t    table.columns = columns;\n\n            wptbTableSetup.appendChild(table);\n\n\t\t    WPTB_LeftPanel();\n\n             \n};","var WPTB_Text = function(text){\n        var DOMElement = document.createElement('div'),\n                elText2 = document.createElement('div'),\n                elP = document.createElement('p');\n\n                this.kind = 'text';\n\n        elText2.classList.add('editable');\n        elP.innerHTML = text != undefined ? text : 'Text';\n        elText2.appendChild(elP);\n        DOMElement.appendChild(elText2);\n\n        this.getDOMElement = function (){ \n                return DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        return this;\n};","var applyGenericItemSettings = function(element){\n\tvar node = element.getDOMElement(),\n\t\tindex = document.counter.nextIndex(element.kind),\n\t\tlistItems;\n\n\tnode.onmouseenter = function(event){\n        this.classList.add('wptb-directlyhovered');\n        var btnDelete = document.createElement('span'),\n            btnCopy = document.createElement('span'),\n            btnMove = document.createElement('span'),\n            actions = document.createElement('span'),\n            previous, i;\n        actions.classList.add('wptb-actions');\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\n        btnMove.draggable = true;\n        btnDelete.onclick = function (event) {\n\t        var act = this.parentNode.parentNode,\n\t            el = act.parentNode;\n\t        el.removeChild(act); \n\t    };\n        //btnCopy.onclick = window.copyButton;\n        btnMove.ondragstart = function(event){\n        \tvar parent = this,infArr,type;\n\n        \twhile(parent.className == '' || \n        \t\t! parent.classList.contains('wptb-ph-element') ){\n        \t\tparent = parent.parentNode;\n        \t}\n\n\n        \tinfArr = parent.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\ttype = infArr[1];\n\n        \tvar img = document.createElement(\"img\");\n        \timg.src = \"http://localhost/sandbox/wp-content/plugins/wp-table-builder/inc/admin/views/builder/icons/\"+type+\".png\";\n        \tconsole.log(img.src);\n\t\t    event.dataTransfer.setDragImage(img, 0, 0);\n\t\t    event.dataTransfer.setData('node','wptb-element-'+infArr[1]+'-'+infArr[2]);\n        \t};\n\n\n        if(element.kind === 'button'){\n        \ttinyMCE.init({\n\t            target: node.childNodes[0].childNodes[0],\n\t            inline: true,\n\t            plugins: \"link\",\n\t            dialog_type: \"modal\",\n\t            theme: 'modern',\n\t            menubar: false,\n\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t            toolbar: 'bold italic strikethrough',\n\t            setup: function (ed) {\n\t                ed.on(\"init\",\n\t                    function (ed) {\n\t                        tinyMCE.execCommand('mceRepaint');\n\t                    }\n\t                );\n\t            },\n\t            init_instance_callback: function (editor) {\n\t                editor.on('change', function (e) {\n\t                    // check if it becomes empty because if there's no value it's hard to edit the editor in button element\n\t                    if (editor.getContent() == \"\") {\n\t                        editor.setContent(\"<p class='wptb-button'>Button Text</p>\");\n\t                    }\n\t                });\n\t                editor.on('KeyDown', function (e) {\n\t                    var range = editor.selection.getRng();\n\t                    var KeyID = e.keyCode;\n\t                    if (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\n\t                        e.preventDefault();\n\t                        editor.setContent(\"<p class='wptb-button'></p>\");\n\t                    }\n\t                });\n\n\t                window.currentEditor = editor;\n\t                editor.on('focus', function (e) {\n\t                    \n\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t        if (window.currentEditor &&\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t        } else {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t        }\n\t                });\n            \n\t            }\n\t        });\n        }\n        else if(element.kind === 'text'){\n        \ttinyMCE.init({\n\t            target: node.childNodes[0],\n\t            inline: true,\n\t            plugins: \"link, paste\",\n\t            dialog_type: \"modal\",\n\t            theme: 'modern',\n\t            menubar: false,\n\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t            paste_as_text: true,\n\t            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n\t            init_instance_callback: function (editor) {\n\t                window.currentEditor = editor;\n\t                editor.on('focus', function (e) {\n\t                \t\n\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t        if (window.currentEditor &&\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t        } else {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t        }\n\t                });\n\t            }\n\t        });\n\n        }\n        else{\n        \tlistItems = node.getElementsByClassName('wptb-list-item-content');\n        \tfor (var i = 0; i < listItems.length; i++) {\n        \t\ttinyMCE.init({\n\t\t            target: listItems[i],\n\t\t            inline: true,\n\t\t            plugins: \"link, paste\",\n\t\t            dialog_type: \"modal\",\n\t\t            theme: 'modern',\n\t\t            menubar: false,\n\t\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t\t            paste_as_text: true,\n\t\t            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n\t\t            init_instance_callback: function (editor) {\n\t\t                window.currentEditor = editor;\n\t\t                editor.on('focus', function (e) {\n\t\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t        if (window.currentEditor &&\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t        } else {\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t        }\n\t\t                });\n\t\t            }\n\t\t        });\n        \t}\n        }\n\n        actions.appendChild(btnMove);\n        actions.appendChild(btnCopy);\n        actions.appendChild(btnDelete);\n        this.appendChild(actions);\n\t};\n\n\tnode.onmouseleave = function(event){\n\t\tvar formerActions = this.getElementsByClassName('wptb-actions');\n        if (formerActions && formerActions[0]) {\n            let par = formerActions[0].parentNode;\n            par.removeChild(formerActions[0]);\n        }\n        this.classList.remove('wptb-directlyhovered');\n\t};\n\n\tnode.classList.add('wptb-ph-element', 'wptb-element-'+element.kind+'-' +\n           index);\n\n\tnew WPTB_ElementOptions(element,index);\n\n\tdocument.counter.increment(element.kind);\n     \n};",""]}