{"version":3,"sources":["applyGenericItemSettings.js","wptb-builder.js","WPTB_Builder.js","WPTB_Button.js","WPTB_Cell.js","WPTB_ElementCounters.js","WPTB_ElementOptions.js","WPTB_Image.js","WPTB_Initializer.js","WPTB_LeftPanel.js","WPTB_List.js","WPTB_ListItem.js","WPTB_Settings.js","WPTB_Space.js","WPTB_Table.js","WPTB_Text.js"],"names":["applyGenericItemSettings","element","node","getDOMElement","index","document","counter","nextIndex","kind","listItems","onmouseenter","event","classList","add","btnDelete","createElement","btnCopy","btnMove","actions","previous","i","draggable","onclick","act","parentNode","el","removeChild","ondragstart","parent","infArr","type","className","contains","match","img","src","console","log","dataTransfer","setDragImage","setData","tinyMCE","init","target","childNodes","inline","plugins","dialog_type","theme","menubar","fixed_toolbar_container","toolbar","setup","ed","on","execCommand","init_instance_callback","editor","e","getContent","setContent","range","selection","getRng","KeyID","keyCode","startOffset","preventDefault","window","currentEditor","totalWidth","getElementsByClassName","offsetWidth","getElementById","scrollTop","bodyElement","style","display","position","right","top","paste_as_text","length","appendChild","onmouseleave","formerActions","par","remove","WPTB_ElementOptions","increment","WPTB_Builder","ElementCounters","initializer","WPTB_Initializer","settings","WPTB_Settings","addEventListener","WPTB_Button","text","DOMElement","elButton2","el_B","innerHTML","undefined","WPTB_Cell","newElementProxy","WPTB_List","WPTB_Image","WPTB_Text","relativeActions","cells","_wptbManagementModeActive","getElementsByTagName","dataset","activeCell","ondragenter","div","ondragover","ondragleave","ondrop","classId","space","t_space","spaceParent","WPTB_Space","getData","nextSibling","onmousedown","onmouseover","onmouseup","setCoords","y","x","yIndex","xIndex","getCoords","coords","appendElement","priv","key","elemIdClass","prop","querySelector","cloneNode","properties","optionsClass","children","optionControls","jQuery","wpColorPicker","change","ui","classe","ps","number","affectedEl","color","toString","slider","oninput","value","onchange","n_Class","num","val","alt","width","height","fontSize","bullets","querySelectorAll","listStyleType","toLowerCase","file_frame","wp","media","frames","title","button","multiple","attachment","state","get","first","toJSON","url","open","MIN_COLUMNS","MIN_ROWS","MAX_COLUMNS","MAX_ROWS","tableGenerator","body","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","columns","rows","WPTB_Table","WPTB_LeftPanel","table","wptbElementButtons","tableRows","tds","j","backgroundColor","tableHeader","addInnerBorderSize","tableCells","border","addCellPadding","padding","addInnerBorder","checked","styles","marginBottom","addBorderSize","_val","wptbElement","addRowToTheEnd","addRowToTheStart","addRowBefore","addRowAfter","addColumnToTheEnd","addColumnToTheStart","addColumnBefore","addColumnAfter","innerElements","el_L","item","WPTB_ListItem","divdot","divcontent","libullet","onkeyup","listItemKeyListener","article","content","html","duplicate","append","onkeydown","which","lastP","dontAddItems","insertBefore","focus","trim","elems","effectAllowed","getAttribute","http","XMLHttpRequest","ajaxurl","t","code","messagingArea","setTimeout","params","setRequestHeader","onreadystatechange","d","readyState","status","send","spaceBetween","stopPropagation","p","td","wptbTableSetup","row","cell","insertRow","recalculateIndexes","trs","addColumn","pos","referenceTd","newTd","_this","buttons","evt","addRow","referenceRow","tbody","active","elText2","elP"],"mappings":"AAAA,IAAIA,2BAA2B,SAA3BA,wBAA2B,CAASC,OAAT,EAAiB;AAC/C,KAAIC,OAAOD,QAAQE,aAAR,EAAX;AAAA,KACCC,QAAQC,SAASC,OAAT,CAAiBC,SAAjB,CAA2BN,QAAQO,IAAnC,CADT;AAAA,KAECC,SAFD;;AAIAP,MAAKQ,YAAL,GAAoB,UAASC,KAAT,EAAe;AAC5B,OAAKC,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;AACA,MAAIC,YAAYT,SAASU,aAAT,CAAuB,MAAvB,CAAhB;AAAA,MACIC,UAAUX,SAASU,aAAT,CAAuB,MAAvB,CADd;AAAA,MAEIE,UAAUZ,SAASU,aAAT,CAAuB,MAAvB,CAFd;AAAA,MAGIG,UAAUb,SAASU,aAAT,CAAuB,MAAvB,CAHd;AAAA,MAIII,QAJJ;AAAA,MAIcC,CAJd;AAKAF,UAAQN,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,YAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAG,UAAQJ,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACAI,UAAQL,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAkC,gBAAlC,EAAoD,aAApD;AACAI,UAAQI,SAAR,GAAoB,IAApB;AACAP,YAAUQ,OAAV,GAAoB,UAAUX,KAAV,EAAiB;AACpC,OAAIY,MAAM,KAAKC,UAAL,CAAgBA,UAA1B;AAAA,OACIC,KAAKF,IAAIC,UADb;AAEAC,MAAGC,WAAH,CAAeH,GAAf;AACH,GAJE;AAKA;AACAN,UAAQU,WAAR,GAAsB,UAAShB,KAAT,EAAe;AACpC,OAAIiB,SAAS,IAAb;AAAA,OAAkBC,MAAlB;AAAA,OAAyBC,IAAzB;;AAEA,UAAMF,OAAOG,SAAP,IAAoB,EAApB,IACL,CAAEH,OAAOhB,SAAP,CAAiBoB,QAAjB,CAA0B,iBAA1B,CADH,EACiD;AAChDJ,aAASA,OAAOJ,UAAhB;AACA;;AAGDK,YAASD,OAAOG,SAAP,CAAiBE,KAAjB,CAAuB,0BAAvB,CAAT;AACNH,UAAOD,OAAO,CAAP,CAAP;;AAEM,OAAIK,MAAM7B,SAASU,aAAT,CAAuB,KAAvB,CAAV;AACAmB,OAAIC,GAAJ,GAAU,gGAA8FL,IAA9F,GAAmG,MAA7G;AACAM,WAAQC,GAAR,CAAYH,IAAIC,GAAhB;AACHxB,SAAM2B,YAAN,CAAmBC,YAAnB,CAAgCL,GAAhC,EAAqC,CAArC,EAAwC,CAAxC;AACAvB,SAAM2B,YAAN,CAAmBE,OAAnB,CAA2B,MAA3B,EAAkC,kBAAgBX,OAAO,CAAP,CAAhB,GAA0B,GAA1B,GAA8BA,OAAO,CAAP,CAAhE;AACI,GAjBF;;AAoBA,MAAG5B,QAAQO,IAAR,KAAiB,QAApB,EAA6B;AAC5BiC,WAAQC,IAAR,CAAa;AACTC,YAAQzC,KAAK0C,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,CADC;AAETC,YAAQ,IAFC;AAGTC,aAAS,MAHA;AAITC,iBAAa,OAJJ;AAKTC,WAAO,QALE;AAMTC,aAAS,KANA;AAOTC,6BAAyB,qBAPhB;AAQTC,aAAS,2BARA;AASTC,WAAO,eAAUC,EAAV,EAAc;AACjBA,QAAGC,EAAH,CAAM,MAAN,EACI,UAAUD,EAAV,EAAc;AACVZ,cAAQc,WAAR,CAAoB,YAApB;AACH,MAHL;AAKH,KAfQ;AAgBTC,4BAAwB,gCAAUC,MAAV,EAAkB;AACtCA,YAAOH,EAAP,CAAU,QAAV,EAAoB,UAAUI,CAAV,EAAa;AAC7B;AACA,UAAID,OAAOE,UAAP,MAAuB,EAA3B,EAA+B;AAC3BF,cAAOG,UAAP,CAAkB,wCAAlB;AACH;AACJ,MALD;AAMAH,YAAOH,EAAP,CAAU,SAAV,EAAqB,UAAUI,CAAV,EAAa;AAC9B,UAAIG,QAAQJ,OAAOK,SAAP,CAAiBC,MAAjB,EAAZ;AACA,UAAIC,QAAQN,EAAEO,OAAd;AACA,UAAIJ,MAAMK,WAAN,IAAqB,CAArB,KAA2BF,SAAS,CAAT,IAAcA,SAAS,EAAlD,CAAJ,EAA2D;AACvDN,SAAES,cAAF;AACAV,cAAOG,UAAP,CAAkB,6BAAlB;AACH;AACJ,MAPD;;AASAQ,YAAOC,aAAP,GAAuBZ,MAAvB;AACAA,YAAOH,EAAP,CAAU,OAAV,EAAmB,UAAUI,CAAV,EAAa;;AAE5B,UAAIY,aAAajE,SAASkE,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDC,WAA1E;AACT,UAAIJ,OAAOC,aAAP,IACAhE,SAASoE,cAAT,CAAwB,cAAxB,EAAwCC,SAAxC,IAAqD,EADrD,IAEAN,OAAOC,aAAP,CAAqBM,WAArB,CAAiCC,KAAjC,CAAuCC,OAAvC,IAAkD,MAFtD,EAE8D;AAC1DxE,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDE,QAApD,GAA+D,OAA/D;AACAzE,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDG,KAApD,GAA6DT,aAAa,CAAb,GAAiBjE,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CD,WAA9C,GAA4D,CAA9E,GAAmF,IAA/I;AACAnE,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDI,GAApD,GAA0D,OAA1D;AACH,OAND,MAMO;AACH3E,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDE,QAApD,GAA+D,QAA/D;AACA,cAAOzE,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDG,KAA3D;AACA,cAAO1E,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDI,GAA3D;AACH;AACK,MAdD;AAgBH;AAjDQ,IAAb;AAmDA,GApDD,MAqDK,IAAG/E,QAAQO,IAAR,KAAiB,MAApB,EAA2B;AAC/BiC,WAAQC,IAAR,CAAa;AACTC,YAAQzC,KAAK0C,UAAL,CAAgB,CAAhB,CADC;AAETC,YAAQ,IAFC;AAGTC,aAAS,aAHA;AAITC,iBAAa,OAJJ;AAKTC,WAAO,QALE;AAMTC,aAAS,KANA;AAOTC,6BAAyB,qBAPhB;AAQT+B,mBAAe,IARN;AAST9B,aAAS,uFATA;AAUTK,4BAAwB,gCAAUC,MAAV,EAAkB;AACtCW,YAAOC,aAAP,GAAuBZ,MAAvB;AACAA,YAAOH,EAAP,CAAU,OAAV,EAAmB,UAAUI,CAAV,EAAa;;AAE5B,UAAIY,aAAajE,SAASkE,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDC,WAA1E;AACT,UAAIJ,OAAOC,aAAP,IACAhE,SAASoE,cAAT,CAAwB,cAAxB,EAAwCC,SAAxC,IAAqD,EADrD,IAEAN,OAAOC,aAAP,CAAqBM,WAArB,CAAiCC,KAAjC,CAAuCC,OAAvC,IAAkD,MAFtD,EAE8D;AAC1DxE,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDE,QAApD,GAA+D,OAA/D;AACAzE,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDG,KAApD,GAA6DT,aAAa,CAAb,GAAiBjE,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CD,WAA9C,GAA4D,CAA9E,GAAmF,IAA/I;AACAnE,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDI,GAApD,GAA0D,OAA1D;AACH,OAND,MAMO;AACH3E,gBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDE,QAApD,GAA+D,QAA/D;AACA,cAAOzE,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDG,KAA3D;AACA,cAAO1E,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDI,GAA3D;AACH;AACK,MAdD;AAeH;AA3BQ,IAAb;AA8BA,GA/BI,MAgCD;AACHvE,eAAYP,KAAKqE,sBAAL,CAA4B,wBAA5B,CAAZ;AACA,QAAK,IAAInD,IAAI,CAAb,EAAgBA,IAAIX,UAAUyE,MAA9B,EAAsC9D,GAAtC,EAA2C;AAC1CqB,YAAQC,IAAR,CAAa;AACTC,aAAQlC,UAAUW,CAAV,CADC;AAETyB,aAAQ,IAFC;AAGTC,cAAS,aAHA;AAITC,kBAAa,OAJJ;AAKTC,YAAO,QALE;AAMTC,cAAS,KANA;AAOTC,8BAAyB,qBAPhB;AAQT+B,oBAAe,IARN;AAST9B,cAAS,uFATA;AAUTK,6BAAwB,gCAAUC,MAAV,EAAkB;AACtCW,aAAOC,aAAP,GAAuBZ,MAAvB;AACAA,aAAOH,EAAP,CAAU,OAAV,EAAmB,UAAUI,CAAV,EAAa;AAC5B,WAAIY,aAAajE,SAASkE,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDC,WAA1E;AACV,WAAIJ,OAAOC,aAAP,IACAhE,SAASoE,cAAT,CAAwB,cAAxB,EAAwCC,SAAxC,IAAqD,EADrD,IAEAN,OAAOC,aAAP,CAAqBM,WAArB,CAAiCC,KAAjC,CAAuCC,OAAvC,IAAkD,MAFtD,EAE8D;AAC1DxE,iBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDE,QAApD,GAA+D,OAA/D;AACAzE,iBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDG,KAApD,GAA6DT,aAAa,CAAb,GAAiBjE,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CD,WAA9C,GAA4D,CAA9E,GAAmF,IAA/I;AACAnE,iBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDI,GAApD,GAA0D,OAA1D;AACH,QAND,MAMO;AACH3E,iBAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDE,QAApD,GAA+D,QAA/D;AACA,eAAOzE,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDG,KAA3D;AACA,eAAO1E,SAASoE,cAAT,CAAwB,oBAAxB,EAA8CG,KAA9C,CAAoDI,GAA3D;AACH;AACM,OAbD;AAcH;AA1BQ,KAAb;AA4BA;AACD;;AAED9D,UAAQiE,WAAR,CAAoBlE,OAApB;AACAC,UAAQiE,WAAR,CAAoBnE,OAApB;AACAE,UAAQiE,WAAR,CAAoBrE,SAApB;AACA,OAAKqE,WAAL,CAAiBjE,OAAjB;AACN,EAjKD;;AAmKAhB,MAAKkF,YAAL,GAAoB,UAASzE,KAAT,EAAe;AAClC,MAAI0E,gBAAgB,KAAKd,sBAAL,CAA4B,cAA5B,CAApB;AACM,MAAIc,iBAAiBA,cAAc,CAAd,CAArB,EAAuC;AACnC,OAAIC,MAAMD,cAAc,CAAd,EAAiB7D,UAA3B;AACA8D,OAAI5D,WAAJ,CAAgB2D,cAAc,CAAd,CAAhB;AACH;AACD,OAAKzE,SAAL,CAAe2E,MAAf,CAAsB,sBAAtB;AACN,EAPD;;AASArF,MAAKU,SAAL,CAAeC,GAAf,CAAmB,iBAAnB,EAAsC,kBAAgBZ,QAAQO,IAAxB,GAA6B,GAA7B,GAC5BJ,KADV;;AAGA,KAAIoF,mBAAJ,CAAwBvF,OAAxB,EAAgCG,KAAhC;;AAEAC,UAASC,OAAT,CAAiBmF,SAAjB,CAA2BxF,QAAQO,IAAnC;AAEA,CAxLD;ACAA;ACAA,CAAC,YAAU;;AAEV,KAAIkF,eAAe,SAAfA,YAAe,GAAU;AAC5BrF,WAASC,OAAT,GAAmB,IAAIqF,eAAJ,EAAnB;;AAEA,MAAIC,cAAcC,kBAAlB;AACCC,aAAWC,eAAX;AACD,EALD;;AAOA1F,UAAS2F,gBAAT,CAA0B,kBAA1B,EAA8CN,YAA9C;AACA,CAVD;ACAA,IAAIO,cAAc,SAAdA,WAAc,CAASC,IAAT,EAAc;AACxB,YAAIC,aAAa9F,SAASU,aAAT,CAAuB,KAAvB,CAAjB;AAAA,YACCqF,YAAY/F,SAASU,aAAT,CAAuB,KAAvB,CADb;AAAA,YAECsF,OAAOhG,SAASU,aAAT,CAAuB,GAAvB,CAFR;;AAIN,aAAKP,IAAL,GAAY,QAAZ;;AAEM2F,mBAAWvF,SAAX,CAAqBC,GAArB,CAAyB,uBAAzB;AACAuF,kBAAUxF,SAAV,CAAoBC,GAApB,CAAwB,qBAAxB;AACAwF,aAAKzF,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACAwF,aAAKzF,SAAL,CAAeC,GAAf,CAAmB,UAAnB;AACAwF,aAAKC,SAAL,GAAiBJ,QAAQK,SAAR,GAAoBL,IAApB,GAA2B,aAA5C;AACAE,kBAAUjB,WAAV,CAAsBkB,IAAtB;AACAF,mBAAWhB,WAAX,CAAuBiB,SAAvB;;AAEA,aAAKjG,aAAL,GAAqB,YAAW;AAC/B,uBAAOgG,UAAP;AACA,SAFD;;AAIAnG,iCAAyB,IAAzB;;AAEA,eAAO,IAAP;AACP,CAtBD;ACAA,IAAIwG,YAAY,SAAZA,SAAY,CAASL,UAAT,EAAoB;;AAElC,iBAASM,eAAT,CAAyBhF,EAAzB,EAA4B;AAC3B,oBAAGA,MAAM,MAAT,EAAgB;AACH,+BAAO,IAAIiF,SAAJ,EAAP;AACH,iBAFV,MAGc,IAAGjF,MAAM,OAAT,EAAiB;AAClB,+BAAO,IAAIkF,UAAJ,EAAP;AACH,iBAFI,MAGA,IAAGlF,MAAM,MAAT,EAAgB;AACjB,+BAAO,IAAImF,SAAJ,EAAP;AACH,iBAFI,MAGA,IAAGnF,MAAM,QAAT,EAAkB;AACnB,+BAAO,IAAIwE,WAAJ,EAAP;AACH;AACV;;AAEKE,qBAAa9F,SAASU,aAAT,CAAuB,IAAvB,CAAb;;AAEAoF,mBAAWvF,SAAX,CAAqBC,GAArB,CAAyB,gBAAzB,EAA2C,WAA3C;;AAEAsF,mBAAW7E,OAAX,GAAqB,YAAU;;AAE9B,oBAAIuF,eAAJ,EAAqBC,KAArB;;AAEA,oBAAG1C,OAAO2C,yBAAV,EAAoC;AACnC;AACA;AACD,oBAAG,KAAKnG,SAAL,CAAeoB,QAAf,CAAwB,kBAAxB,CAAH,EAA+C;AAC9C,6BAAKpB,SAAL,CAAe2E,MAAf,CAAsB,kBAAtB;AACA,iBAFD,MAGI;AACHsB,0CAAkBxG,SAASkE,sBAAT,CAAgC,sBAAhC,CAAlB;AACAuC,gCAAQzG,SAAS2G,oBAAT,CAA8B,IAA9B,CAAR;;AAEA,6BAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAIyF,gBAAgB3B,MAApC,EAA4C9D,GAA5C,EAAiD;AAChDgB,wCAAQC,GAAR,CAAYwE,gBAAgBzF,CAAhB,CAAZ;AACAyF,gDAAgBzF,CAAhB,EAAmB6F,OAAnB,CAA2BC,UAA3B,GAAwC,IAAxC;AACA;;AAED,6BAAK,IAAI9F,IAAI,CAAb,EAAgBA,IAAI0F,MAAM5B,MAA1B,EAAkC9D,GAAlC,EAAuC;AACtC0F,sCAAM1F,CAAN,EAASR,SAAT,CAAmB2E,MAAnB,CAA0B,kBAA1B;AACA;;AAED,6BAAK3E,SAAL,CAAeC,GAAf,CAAmB,kBAAnB;AAEA;AAED,SA3BD;;AA6BAsF,mBAAWgB,WAAX,GAAyB,YAAU;AAClC,oBAAIC,GAAJ;AACA,qBAAKxG,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;AACA,SAHD;;AAKAsF,mBAAWkB,UAAX,GAAwB,UAAS3D,CAAT,EAAW;AAClCA,kBAAES,cAAF;AACA,SAFD;;AAIAgC,mBAAWmB,WAAX,GAAyB,YAAU;AAClC,qBAAK1G,SAAL,CAAe2E,MAAf,CAAsB,sBAAtB;AAEA,SAHD;;AAKAY,mBAAWoB,MAAX,GAAoB,UAAS7D,CAAT,EAAW;AAC9B,oBAAIzD,OAAJ,EAAauH,OAAb,EAAsBC,KAAtB,EAA6BC,OAA7B,EAAsCC,WAAtC;AACAjE,kBAAES,cAAF;AACGsD,wBAAQ,IAAIG,UAAJ,EAAR;;AAEA,oBAAGlE,EAAEpB,YAAF,CAAeuF,OAAf,CAAuB,aAAvB,CAAH,EAAyC;AACzC5H,kCAAUwG,gBAAgB/C,EAAEpB,YAAF,CAAeuF,OAAf,CAAuB,aAAvB,CAAhB,CAAV;AACI,4BAAG,KAAKvB,SAAL,IAAgB,EAAnB,EAAsB;AAClB,qCAAKnB,WAAL,CAAiB,IAAIyC,UAAJ,EAAjB;AACH;AACD,6BAAKzC,WAAL,CAAiBlF,QAAQE,aAAR,EAAjB;AACA,6BAAKgF,WAAL,CAAiBsC,KAAjB;AACN,iBAPE,MAQI;;AAEAD,kCAAU9D,EAAEpB,YAAF,CAAeuF,OAAf,CAAuB,MAAvB,CAAV;AACA5H,kCAAUI,SAASkE,sBAAT,CAAgCiD,OAAhC,EAAyC,CAAzC,CAAV;AACA,4BAAG,KAAKlB,SAAL,IAAgB,EAAnB,EAAsB;AAClBoB,0CAAUzH,QAAQ6H,WAAlB;AACAH,8CAAc1H,QAAQuB,UAAtB;AACA,oCAAGkG,WAAWnB,SAAd,EAAwB;AACpBoB,oDAAYjG,WAAZ,CAAwBgG,OAAxB;AACH;AACD,qCAAKvC,WAAL,CAAiB,IAAIyC,UAAJ,EAAjB;AACH;AACD,6BAAKzC,WAAL,CAAiBlF,OAAjB;AACA,6BAAKkF,WAAL,CAAiBsC,KAAjB;AACH;AACJ,qBAAK7G,SAAL,CAAe2E,MAAf,CAAsB,sBAAtB;AACA,uBAAO,IAAP;AACA,SA9BD;;AAgCAY,mBAAW4B,WAAX,GAAyB,YAAU,CAElC,CAFD;;AAIA5B,mBAAW6B,WAAX,GAAyB,YAAU,CAElC,CAFD;;AAIA7B,mBAAW8B,SAAX,GAAuB,YAAU,CAEhC,CAFD;;AAIA,aAAK9H,aAAL,GAAqB,YAAW;AAC/B,uBAAOgG,UAAP;AACA,SAFD;;AAIA,aAAK+B,SAAL,GAAiB,UAASC,CAAT,EAAWC,CAAX,EAAa;AAC7B,oBAAI3G,KAAK,KAAKtB,aAAL,EAAT;AACAsB,mBAAGwF,OAAH,CAAWoB,MAAX,GAAoBF,CAApB;AACA1G,mBAAGwF,OAAH,CAAWqB,MAAX,GAAoBF,CAApB;AACA,SAJD;;AAMA,aAAKG,SAAL,GAAiB,YAAU;AAC1B,oBAAIC,MAAJ;AAAA,oBACC/G,KAAK,KAAKtB,aAAL,EADN;AAEAqI,uBAAOJ,CAAP,GAAW3G,GAAGwF,OAAH,CAAWqB,MAAtB;AACAE,uBAAOL,CAAP,GAAW1G,GAAGwF,OAAH,CAAWoB,MAAtB;AACA,uBAAOG,MAAP;AACA,SAND;;AAQA,aAAKC,aAAL,GAAqB,UAASvI,IAAT,EAAc;AAClCC,gCAAgBgF,WAAhB,CAA4BjF,IAA5B;AACA,SAFD;;AAIA,eAAO,IAAP;AAEP,CApID;ACAA,IAAIyF,kBAAkB,SAAlBA,eAAkB,GAAU;AAC/B,KAAI+C,OAAO,EAAX;AACAA,MAAK,MAAL,IAAe,CAAf;AACAA,MAAK,OAAL,IAAgB,CAAhB;AACAA,MAAK,MAAL,IAAe,CAAf;AACAA,MAAK,QAAL,IAAiB,CAAjB;;AAEA,MAAKjD,SAAL,GAAiB,UAASkD,GAAT,EAAa;;AAE7B,MAAG,EAAGA,OAAOD,IAAV,CAAH,EAAoB;AACnB;AACA;;AAEDA,OAAKC,GAAL;AACA,EAPD;AAQA,MAAKpI,SAAL,GAAiB,UAASoI,GAAT,EAAa;;AAE7B,MAAG,EAAGA,OAAOD,IAAV,CAAH,EAAoB;AACnB,UAAOnC,SAAP;AACA;;AAED,SAAOmC,KAAKC,GAAL,IAAY,CAAnB;AACA,EAPD;AAQA,QAAO,IAAP;AACA,CAxBD;ACAA,IAAInD,sBAAsB,SAAtBA,mBAAsB,CAASvF,OAAT,EAAiBG,KAAjB,EAAuB;;AAEhD,QAAIF,OAAOD,QAAQE,aAAR,EAAX;AAAA,QAAoCyI,WAApC;;AAEAC,WAAOxI,SAASyI,aAAT,CAAuB,WAAW7I,QAAQO,IAAnB,GAA0B,oBAAjD,EAAuEuI,SAAvE,CAAiF,IAAjF,CAAP;AACGF,SAAKjI,SAAL,CAAe2E,MAAf,CAAsB,UAAUtF,QAAQO,IAAlB,GAAyB,oBAA/C,EAL6C,CAKyB;AACtEoI,kBAAY,kBAAkB3I,QAAQO,IAA1B,GAAiC,GAAjC,GAAwCJ,KAApD;;AAEA,QAAI4I,aAAaH,KAAKtE,sBAAL,CAA4B,uBAA5B,CAAjB;;AAEA,SAAK,IAAInD,IAAI,CAAb,EAAgBA,IAAI4H,WAAW9D,MAA/B,EAAuC9D,GAAvC,EAA4C;AAC3C4H,mBAAW5H,CAAX,EAAc6F,OAAd,CAAsBhH,OAAtB,GAAgC2I,WAAhC;AACA;;AAEDC,SAAKjI,SAAL,CAAeC,GAAf,CAAmB+H,WAAnB;AACAvI,aAASoE,cAAT,CAAwB,uBAAxB,EAAiDU,WAAjD,CAA6D0D,IAA7D;;AAEA3I,SAAKoB,OAAL,GAAe,YAAU;AACrB,YAAIO,SAAS,KAAKE,SAAL,CAAeE,KAAf,CAAqB,0BAArB,CAAb;AAAA,YACLgH,eAAe,WAAWpH,OAAO,CAAP,CAAX,GAAuB,SAAvB,GACM,gBADN,GACyBA,OAAO,CAAP,CAFnC;;AAIHxB,iBAASoE,cAAT,CAAwB,cAAxB,EAAwCuC,oBAAxC,CAA6D,GAA7D,EAAkE,CAAlE,EAAqEpG,SAArE,CAA+E2E,MAA/E,CAAsF,QAAtF;AACGlF,iBAASoE,cAAT,CAAwB,iBAAxB,EAA2CuC,oBAA3C,CAAgE,GAAhE,EAAqE,CAArE,EAAwEpG,SAAxE,CAAkFC,GAAlF,CAAsF,QAAtF;;AAENR,iBAASkE,sBAAT,CAAgC,yBAAhC,EAA2D,CAA3D,EAA8DK,KAA9D,CAAoEC,OAApE,GAA8E,MAA9E;AACMxE,iBAASkE,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,EAA4DK,KAA5D,CAAkEC,OAAlE,GAA4E,MAA5E;AACAxE,iBAASoE,cAAT,CAAwB,uBAAxB,EAAiDG,KAAjD,CAAuDC,OAAvD,GAAiE,OAAjE;;AAEA,YAAIqE,WAAW7I,SAASoE,cAAT,CAAwB,uBAAxB,EAAiD7B,UAAhE;AACA,aAAK,IAAIxB,IAAI,CAAb,EAAgBA,IAAI8H,SAAShE,MAA7B,EAAqC9D,GAArC,EAA0C;AACtC,gBAAI8H,SAAS9H,CAAT,EAAYwD,KAAhB,EACIsE,SAAS9H,CAAT,EAAYwD,KAAZ,CAAkBC,OAAlB,GAA4B,MAA5B;AACP;;AAEDxE,iBAASyI,aAAT,CAAuBG,YAAvB,EAAqCrE,KAArC,CAA2CC,OAA3C,GAAqD,OAArD;AACH,KAnBD;;AAqBA,QAAIsE,iBAAiBN,KAAKtE,sBAAL,CAA4B,uBAA5B,CAArB;AACAnC,YAAQC,GAAR,CAAY8G,cAAZ;AACA,SAAK,IAAI/H,IAAI,CAAb,EAAgBA,IAAI+H,eAAejE,MAAnC,EAA2C9D,GAA3C,EAAgD;AAC/C,YAAG+H,eAAe/H,CAAf,EAAkBR,SAAlB,CAA4BoB,QAA5B,CAAqC,mBAArC,CAAH,EAA6D;AAC5DoH,mBAAOD,eAAe/H,CAAf,CAAP,EAA0BiI,aAA1B,CAAwC;AAC9BC,wBAAQ,gBAAS3I,KAAT,EAAgB4I,EAAhB,EAAmB;AACvB,wBAAI3H,SAASjB,MAAMgC,MAAnB;AAAA,wBAA2B6G,MAA3B;AAAA,wBAAmC1H,IAAnC;AAAA,wBAAyC2H,EAAzC;AAAA,wBAA6CC,MAA7C;;AAIAF,6BAAS5H,OAAOqF,OAAP,CAAehH,OAAf,CAAuBgC,KAAvB,CAA6B,0BAA7B,CAAT;AACAH,2BAAO0H,OAAO,CAAP,CAAP;AACAE,6BAASF,OAAO,CAAP,CAAT;AACApH,4BAAQC,GAAR,CAAY,SAAZ,EAAsB,kBAAgBP,IAAhB,GAAqB,GAArB,GAAyB4H,MAA/C;AACAC,iCAAatJ,SAASkE,sBAAT,CAAgC,kBAAgBzC,IAAhB,GAAqB,GAArB,GAAyB4H,MAAzD,EAAiE,CAAjE,CAAb;AACAD,yBAAKE,WAAW3C,oBAAX,CAAgC,GAAhC,CAAL;AACA,yBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAIqI,GAAGvE,MAAvB,EAA+B9D,GAA/B,EAAoC;AAC5BqI,2BAAGrI,CAAH,EAAMwD,KAAN,CAAYgF,KAAZ,GAAqBL,GAAGK,KAAH,CAASC,QAAT,EAArB;AACP;AACJ;AAf6B,aAAxC;AAiBA;;AAEE,YAAGV,eAAe/H,CAAf,EAAkB6F,OAAlB,CAA0BnF,IAA1B,KAAmC,WAAtC,EAAkD;AAC9C,gBAAIgI,SAASX,eAAe/H,CAAf,EAAkBI,UAAlB,CAA6BA,UAA7B,CAAwC+C,sBAAxC,CAA+D,4BAA/D,EAA6F,CAA7F,CAAb;AACAuF,mBAAOC,OAAP,GAAiB,YAAU;AACvB,qBAAKvI,UAAL,CAAgBA,UAAhB,CAA2B+C,sBAA3B,CAAkD,4BAAlD,EAAgF,CAAhF,EAAmFyF,KAAnF,GAA2F,KAAKA,KAAhG;AACA,qBAAKxI,UAAL,CAAgBA,UAAhB,CAA2B+C,sBAA3B,CAAkD,4BAAlD,EAAgF,CAAhF,EAAmF0F,QAAnF;AACH,aAHD;AAIH;;AAEJd,uBAAe/H,CAAf,EAAkB6I,QAAlB,GAA6B,UAAStJ,KAAT,EAAe;;AAE3C,gBAAIuJ,UAAU,KAAKjD,OAAL,CAAahH,OAA3B;AAAA,gBACC4B,SAASqI,QAAQjI,KAAR,CAAc,0BAAd,CADV;AAAA,gBAEFH,OAAOD,OAAO,CAAP,CAFL;AAAA,gBAGUsI,MAAMtI,OAAO,CAAP,CAHhB;AAAA,gBAIC8H,aAAatJ,SAASkE,sBAAT,CAAgC,kBAAgBzC,IAAhB,GAAqB,GAArB,GAAyBqI,GAAzD,EAA8D,CAA9D,CAJd;AAAA,gBAKCC,MAAM,KAAKJ,KALZ;;AAOU5H,oBAAQC,GAAR,CAAY,iBAAZ,EAA8B,KAAK4E,OAAL,CAAanF,IAA3C,EAAgD,KAAKkI,KAArD;;AAEV,oBAAO,KAAK/C,OAAL,CAAanF,IAApB;AACU,qBAAK,KAAL;AACQ,wBAAII,MAAMyH,WAAW3C,oBAAX,CAAgC,KAAhC,CAAV;AACA9E,wBAAIC,GAAJ,GAAQ,KAAK6H,KAAb;AACA;AACA;AACJ,qBAAK,kBAAL;AACI,wBAAI9H,MAAMyH,WAAW3C,oBAAX,CAAgC,KAAhC,CAAV;AACA9E,wBAAImI,GAAJ,GAAQ,KAAKL,KAAb;AACA;AACJ,qBAAK,aAAL;AACI,wBAAI9H,MAAMyH,WAAW3C,oBAAX,CAAgC,KAAhC,CAAV;AACA9E,wBAAIoI,KAAJ,GAAU,KAAKN,KAAL,GAAW,IAArB;AACA;AACA;AACJ,qBAAK,cAAL;AACI,wBAAI9H,MAAMyH,WAAW3C,oBAAX,CAAgC,KAAhC,CAAV;AACA9E,wBAAIqI,MAAJ,GAAW,KAAKP,KAAL,GAAW,IAAtB;AACA;AACA;AACjB,qBAAK,WAAL;AACiB,wBAAIP,KAAKE,WAAW3C,oBAAX,CAAgC,GAAhC,CAAT;AACA,yBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAIqI,GAAGvE,MAAvB,EAA+B9D,GAA/B,EAAoC;AAChCqI,2BAAGrI,CAAH,EAAMwD,KAAN,CAAY4F,QAAZ,GAAwBJ,MAAM,IAA9B;AACH;;AAED,yBAAK5I,UAAL,CAAgBA,UAAhB,CAA2B+C,sBAA3B,CAAkD,4BAAlD,EAAgF,CAAhF,EAAmFyF,KAAnF,GAA2F,KAAKA,KAAhG;;AAEA;AACJ,qBAAK,OAAL;AACI,wBAAIP,KAAKE,WAAW3C,oBAAX,CAAgC,GAAhC,CAAT;AACA,yBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAIqI,GAAGvE,MAAvB,EAA+B9D,GAA/B,EAAoC;AAChCqI,2BAAGrI,CAAH,EAAMwD,KAAN,CAAYgF,KAAZ,GAAqBQ,GAArB;AACH;AACD;AACJ,qBAAK,YAAL;AACI,wBAAIA,OAAO,WAAX,EAAwB;AACpBT,mCAAWb,aAAX,CAAyB,6BAAzB,EAAwDtH,UAAxD,CAAmEoD,KAAnE,CAAyEC,OAAzE,GAAkF,MAAlF;AACA,4BAAI4F,UAAUxK,QAAQyK,gBAAR,CAAyB,sCAAzB,CAAd;AACA,6BAAK,IAAItJ,IAAI,CAAb,EAAgBA,IAAIqJ,QAAQvF,MAA5B,EAAoC9D,GAApC,EAAyC;AACrCqJ,oCAAQrJ,CAAR,EAAWwD,KAAX,CAAiB+F,aAAjB,GAAgC,MAAhC;AACH;AACDtK,iCAASyI,aAAT,CAAuB,6BAAvB,EAAsDkB,KAAtD,GAA8D,MAA9D;AACH,qBAPD,MAOO;AACHL,mCAAWb,aAAX,CAAyB,6BAAzB,EAAwDtH,UAAxD,CAAmEoD,KAAnE,CAAyEC,OAAzE,GAAkF,MAAlF;AACA,4BAAI4F,UAAUxK,QAAQyK,gBAAR,CAAyB,sCAAzB,CAAd;AACA,6BAAK,IAAItJ,IAAI,CAAb,EAAgBA,IAAIqJ,QAAQvF,MAA5B,EAAoC9D,GAApC,EAAyC;AACrCqJ,oCAAQrJ,CAAR,EAAWwD,KAAX,CAAiB+F,aAAjB,GAAgC,SAAhC;AACH;AACJ;AACD;AACJ,qBAAK,iBAAL;AACQ,wBAAIF,UAAUxK,QAAQyK,gBAAR,CAAyB,sCAAzB,CAAd;AACA,yBAAK,IAAItJ,IAAI,CAAb,EAAgBA,IAAIqJ,QAAQvF,MAA5B,EAAoC9D,GAApC,EAAyC;AACrCqJ,gCAAQrJ,CAAR,EAAWwD,KAAX,CAAiB+F,aAAjB,GAAgCP,IAAIQ,WAAJ,EAAhC;AACH;AACL;AAxDlB;AA0DA,SArED;AAsEA;AACJ,CA5ID;ACAA,IAAIjE,aAAa,SAAbA,UAAa,CAAST,IAAT,EAAc;AACvB,YAAIC,aAAa9F,SAASU,aAAT,CAAuB,KAAvB,CAAjB;AAAA,YACCmB,MAAM7B,SAASU,aAAT,CAAuB,KAAvB,CADP;;AAGN,aAAKP,IAAL,GAAY,OAAZ;;AAEM2F,mBAAWhB,WAAX,CAAuBjD,GAAvB;;AAEA,aAAK/B,aAAL,GAAqB,YAAW;AAC/B,uBAAOgG,UAAP;AACA,SAFD;AAGAnG,iCAAyB,IAAzB;;AAEA6K,qBAAaC,GAAGC,KAAH,CAASC,MAAT,CAAgBH,UAAhB,GAA6BC,GAAGC,KAAH,CAAS;AACnBE,uBAAO,0BADY;AAEnBC,wBAAQ;AACAhF,8BAAM;AADN,iBAFW;AAKnBiF,0BAAU;AALS,SAAT,CAA1C;AAOwB;AACAN,mBAAWvH,EAAX,CAAe,QAAf,EAAyB,YAAW;AAC5B8H,6BAAaP,WAAWQ,KAAX,GAAmBC,GAAnB,CAAuB,WAAvB,EAAoCC,KAApC,GAA4CC,MAA5C,EAAb;AACAtJ,oBAAIC,GAAJ,GAAUiJ,WAAWK,GAArB;AACP,SAHD;AAIQ;AAChCZ,mBAAWa,IAAX;;AAEA,eAAO,IAAP;AACP,CA7BD;ACAA,IAAI7F,mBAAmB,SAAnBA,gBAAmB,GAAU;AAChC,KAAM8F,cAAc,CAApB;AAAA,KACGC,WAAW,CADd;AAAA,KAEGC,cAAc,EAFjB;AAAA,KAGGC,WAAW,EAHd;;AAKA,KAAIC,iBAAiB1L,SAAS2L,IAA9B;AACCC,0BAAyBF,eAAexH,sBAAf,CAAsC,6BAAtC,EAAqE,CAArE,CAAzB,EACA2H,yBAAyBH,eAAexH,sBAAf,CAAsC,6BAAtC,EAAqE,CAArE,CADzB,EAEA4H,sBAAsBJ,eAAexH,sBAAf,CAAsC,6BAAtC,EAAqE,CAArE,CAFtB,EAGA6H,sBAAsBL,eAAexH,sBAAf,CAAsC,6BAAtC,EAAqE,CAArE,CAHtB,EAIA8H,eAAehM,SAASoE,cAAT,CAAwB,qBAAxB,CAJf,EAKA6H,YAAYjM,SAASoE,cAAT,CAAwB,kBAAxB,CALZ;;AAQAwH,wBAAuB3K,OAAvB,GAAiC,YAAU;AAC1C,MAAG+K,aAAarC,KAAb,GAAqB2B,WAAxB,EAAoC;AACnCU,gBAAarC,KAAb;AACA;AACD,EAJD;;AAMAkC,wBAAuB5K,OAAvB,GAAiC,YAAU;AAC1C,MAAG+K,aAAarC,KAAb,GAAqB6B,WAAxB,EAAoC;AACnCQ,gBAAarC,KAAb;AACA;AACD,EAJD;;AAMAmC,qBAAoB7K,OAApB,GAA8B,YAAU;AACvC,MAAGgL,UAAUtC,KAAV,GAAkB4B,QAArB,EAA8B;AAC7BU,aAAUtC,KAAV;AACA;AACD,EAJD;;AAMAoC,qBAAoB9K,OAApB,GAA8B,YAAU;AACvC,MAAGgL,UAAUtC,KAAV,GAAkB8B,QAArB,EAA8B;AAC7BQ,aAAUtC,KAAV;AACA;AACD,EAJD;;AAMD3J,UAASoE,cAAT,CAAwB,qBAAxB,EAA+CnD,OAA/C,GAAyD,YAAU;;AAEhE,MAAIiL,UAAUlM,SAASoE,cAAT,CAAwB,qBAAxB,EAA+CuF,KAA7D;AAAA,MACEwC,OAAOnM,SAASoE,cAAT,CAAwB,kBAAxB,EAA4CuF,KADrD;;AAGAyC,aAAWF,OAAX,EAAoBC,IAApB;AACD,EANF;AAQA,CA/CD;ACAA,IAAIE,iBAAiB,SAAjBA,cAAiB,GAAU;AAC9B,QAAIC,QAAQtM,SAASkE,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAZ;AAAA,QACAqI,qBAAqBvM,SAASkE,sBAAT,CAAgC,cAAhC,CADrB;;AAGA6E,WAAO,mBAAP,EAA4BC,aAA5B,CAA0C;AACzCC,gBAAQ,gBAAS3I,KAAT,EAAe4I,EAAf,EAAkB;AACZ,gBAAIsD,YAAYF,MAAM3F,oBAAN,CAA2B,IAA3B,CAAhB;AACA,iBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAIyL,UAAU3H,MAA9B,EAAsC9D,KAAG,CAAzC,EAA4C;AAC3C0L,sBAAMD,UAAUzL,CAAV,EAAa4F,oBAAb,CAAkC,IAAlC,CAAN;AACA,qBAAK,IAAI+F,IAAI,CAAb,EAAgBA,IAAID,IAAI5H,MAAxB,EAAgC6H,GAAhC,EAAqC;AACpCD,wBAAIC,CAAJ,EAAOnI,KAAP,CAAaoI,eAAb,GAA+BzD,GAAGK,KAAH,CAASC,QAAT,EAA/B;AACA;AACD;AACX;AATqC,KAA1C,EAJ8B,CAc1B;AACDT,WAAO,kBAAP,EAA2BC,aAA3B,CAAyC;AACxCC,gBAAQ,gBAAS3I,KAAT,EAAe4I,EAAf,EAAkB;AACf,gBAAIsD,YAAYF,MAAM3F,oBAAN,CAA2B,IAA3B,CAAhB;AACA,iBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAIyL,UAAU3H,MAA9B,EAAsC9D,KAAG,CAAzC,EAA4C;AAC3C0L,sBAAMD,UAAUzL,CAAV,EAAa4F,oBAAb,CAAkC,IAAlC,CAAN;AACA,qBAAK,IAAI+F,IAAI,CAAb,EAAgBA,IAAID,IAAI5H,MAAxB,EAAgC6H,GAAhC,EAAqC;AACpCD,wBAAIC,CAAJ,EAAOnI,KAAP,CAAaoI,eAAb,GAA+BzD,GAAGK,KAAH,CAASC,QAAT,EAA/B;AACA;AACD;AACX;AATuC,KAAzC;AAWAT,WAAO,uBAAP,EAAgCC,aAAhC,CAA8C;AAC7CC,gBAAQ,gBAAS3I,KAAT,EAAe4I,EAAf,EAAkB;AACf,gBAAI0D,cAAcN,MAAM3F,oBAAN,CAA2B,IAA3B,EAAiC,CAAjC,CAAlB;AAAA,gBACC8F,MAAMG,YAAYjG,oBAAZ,CAAiC,IAAjC,CADP;AAEC,iBAAK,IAAI+F,IAAI,CAAb,EAAgBA,IAAID,IAAI5H,MAAxB,EAAgC6H,GAAhC,EAAqC;AACpCD,oBAAIC,CAAJ,EAAOnI,KAAP,CAAaoI,eAAb,GAA+BzD,GAAGK,KAAH,CAASC,QAAT,EAA/B;AACA;AACZ;AAP4C,KAA9C;;AAYA,aAASqD,kBAAT,CAA4BlD,KAA5B,EAAmC;AACvB,YAAImD,aAAaR,MAAM3F,oBAAN,CAA2B,IAA3B,CAAjB;AACA,aAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAI+L,WAAWjI,MAA/B,EAAuC9D,GAAvC,EAA4C;AACxC+L,uBAAW/L,CAAX,EAAcwD,KAAd,CAAoBwI,MAApB,GAA6BpD,QAAQ,UAArC;AACH;AACZ;;AAED,aAASqD,cAAT,CAAwBrD,KAAxB,EAA+B;AACnB,YAAImD,aAAaR,MAAM3F,oBAAN,CAA2B,IAA3B,CAAjB;AACA,aAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAI+L,WAAWjI,MAA/B,EAAuC9D,GAAvC,EAA4C;AACxC+L,uBAAW/L,CAAX,EAAcwD,KAAd,CAAoB0I,OAApB,GAA8BtD,QAAQ,IAAtC;AACH;AACZ;;AAGD,aAASuD,cAAT,CAAwBC,OAAxB,EAAiC;AACrB,YAAIC,MAAJ;;AAEA,YAAID,WAAW,SAAf,EAA0B;AACtBnN,qBAASoE,cAAT,CAAwB,yBAAxB,EAAmDG,KAAnD,CAAyD8I,YAAzD,GAAwE,KAAxE;AACA,gBAAIP,aAAa9M,SAASkE,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDyC,oBAAzD,CAA8E,IAA9E,CAAjB;AACA,iBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAI+L,WAAWjI,MAA/B,EAAuC9D,GAAvC,EAA4C;AACxC+L,2BAAW/L,CAAX,EAAcwD,KAAd,CAAoBwI,MAApB,GAA6B,WAA7B;AACH;;AAED/M,qBAASoE,cAAT,CAAwB,4BAAxB,EAAsD7D,SAAtD,CAAgEC,GAAhE,CAAoE,SAApE;AACH,SARD,MAQO;AACHR,qBAASoE,cAAT,CAAwB,4BAAxB,EAAsD7D,SAAtD,CAAgE2E,MAAhE,CAAuE,SAAvE;AACA,gBAAI4H,aAAa9M,SAASkE,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,EAAyDyC,oBAAzD,CAA8E,IAA9E,CAAjB;AACA,iBAAK,IAAI5F,IAAI,CAAb,EAAgBA,IAAI+L,WAAWjI,MAA/B,EAAuC9D,GAAvC,EAA4C;AACxC+L,2BAAW/L,CAAX,EAAcwD,KAAd,CAAoBwI,MAApB,GAA6B,EAA7B;AACH;AACJ;AACZ;;AAED,aAASO,aAAT,CAAuB3D,KAAvB,EAA8B;AAClB2C,cAAM/H,KAAN,CAAYwI,MAAZ,GAAqBpD,QAAQ,UAA7B;AACX;;AAED3J,aAASoE,cAAT,CAAwB,wBAAxB,EAAkDsF,OAAlD,GAA4D,YAAY;AAChE1J,iBAASoE,cAAT,CAAwB,wBAAxB,EAAkDuF,KAAlD,GAA0D,KAAKA,KAA/D;AACAqD,uBAAe,KAAKrD,KAApB;AACP,KAHD;;AAKA3J,aAASoE,cAAT,CAAwB,wBAAxB,EAAkDwF,QAAlD,GAA6D,YAAY;AACjE5J,iBAASoE,cAAT,CAAwB,wBAAxB,EAAkDuF,KAAlD,GAA0D,KAAKA,KAA/D;AACAqD,uBAAe,KAAKrD,KAApB;AACP,KAHD;;AAKA3J,aAASoE,cAAT,CAAwB,0BAAxB,EAAoDsF,OAApD,GAA8D,YAAY;AAClE1J,iBAASoE,cAAT,CAAwB,0BAAxB,EAAoDuF,KAApD,GAA4D,KAAKA,KAAjE;AACA2D,sBAAc,KAAK3D,KAAnB;AACP,KAHD;;AAKA3J,aAASoE,cAAT,CAAwB,0BAAxB,EAAoDwF,QAApD,GAA+D,YAAY;AACnE5J,iBAASoE,cAAT,CAAwB,0BAAxB,EAAoDuF,KAApD,GAA4D,KAAKA,KAAjE;AACA2D,sBAAc,KAAK3D,KAAnB;AACP,KAHD;;AAKA3J,aAASoE,cAAT,CAAwB,gCAAxB,EAA0DsF,OAA1D,GAAoE,YAAY;AACxE1J,iBAASoE,cAAT,CAAwB,gCAAxB,EAA0DuF,KAA1D,GAAkE,KAAKA,KAAvE;AACAkD,2BAAmB,KAAKlD,KAAxB;AACP,KAHD;;AAKA3J,aAASoE,cAAT,CAAwB,gCAAxB,EAA0DwF,QAA1D,GAAqE,YAAY;AACzE5J,iBAASoE,cAAT,CAAwB,gCAAxB,EAA0DuF,KAA1D,GAAkE,KAAKA,KAAvE;AACAkD,2BAAmB,KAAKlD,KAAxB;AACP,KAHD;;AAKA3J,aAASoE,cAAT,CAAwB,yBAAxB,EAAmDwF,QAAnD,GAA8D,YAAY;AAC9D,YAAI2D,OAAO,KAAKJ,OAAL,GAAe,SAAf,GAA2B,WAAtC;AACAD,uBAAeK,IAAf;AACH,KAHT;;AAKH,SAAK,IAAIxM,IAAI,CAAb,EAAgBA,IAAIwL,mBAAmB1H,MAAvC,EAA+C9D,GAA/C,EAAoD;AACnDwL,2BAAmBxL,CAAnB,EAAsBO,WAAtB,GAAoC,UAAS+B,CAAT,EAAW;AAC9CA,cAAEpB,YAAF,CAAeE,OAAf,CAAuB,aAAvB,EAAqC,KAAKyE,OAAL,CAAa4G,WAAlD;AACA,SAFD;AAGA;;AAEDxN,aAASoE,cAAT,CAAwB,kBAAxB,EAA4CnD,OAA5C,GAAsDqL,MAAMmB,cAA5D;AACAzN,aAASoE,cAAT,CAAwB,oBAAxB,EAA8CnD,OAA9C,GAAwDqL,MAAMoB,gBAA9D;AACA1N,aAASoE,cAAT,CAAwB,qBAAxB,EAA+CnD,OAA/C,GAAyDqL,MAAMqB,YAA/D;AACA3N,aAASoE,cAAT,CAAwB,oBAAxB,EAA8CnD,OAA9C,GAAwDqL,MAAMsB,WAA9D;AACA5N,aAASoE,cAAT,CAAwB,qBAAxB,EAA+CnD,OAA/C,GAAyDqL,MAAMuB,iBAA/D;AACA7N,aAASoE,cAAT,CAAwB,uBAAxB,EAAiDnD,OAAjD,GAA2DqL,MAAMwB,mBAAjE;AACA9N,aAASoE,cAAT,CAAwB,wBAAxB,EAAkDnD,OAAlD,GAA4DqL,MAAMyB,eAAlE;AACA/N,aAASoE,cAAT,CAAwB,uBAAxB,EAAiDnD,OAAjD,GAA2DqL,MAAM0B,cAAjE;AACAhO,aAASoE,cAAT,CAAwB,cAAxB,EAAwCnD,OAAxC,GAAkD,YAAU;AACrDjB,iBAASoE,cAAT,CAAwB,iBAAxB,EAA2CuC,oBAA3C,CAAgE,GAAhE,EAAqE,CAArE,EAAwEpG,SAAxE,CAAkF2E,MAAlF,CAAyF,QAAzF;AACAlF,iBAASoE,cAAT,CAAwB,cAAxB,EAAwCuC,oBAAxC,CAA6D,GAA7D,EAAkE,CAAlE,EAAqEpG,SAArE,CAA+EC,GAA/E,CAAmF,QAAnF;AACAR,iBAASkE,sBAAT,CAAgC,yBAAhC,EAA2D,CAA3D,EAA8DK,KAA9D,CAAoEC,OAApE,GAA8E,OAA9E;AACAxE,iBAASkE,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,EAA4DK,KAA5D,CAAkEC,OAAlE,GAA4E,OAA5E;AACAxE,iBAASoE,cAAT,CAAwB,uBAAxB,EAAiDG,KAAjD,CAAuDC,OAAvD,GAAiE,MAAjE;AACN,KAND;AAOA,CArID;ACAA,IAAI6B,YAAY,SAAZA,SAAY,CAAS4H,aAAT,EAAuB;AAClC,QAAIC,OAAOlO,SAASU,aAAT,CAAuB,IAAvB,CAAX;AAAA,QAAyCyN,IAAzC;AAAA,QACFrI,aAAa9F,SAASU,aAAT,CAAuB,KAAvB,CADX;;AAGH,SAAKP,IAAL,GAAY,MAAZ;;AAEM,QAAI,CAAC8N,aAAL,EACI,KAAK,IAAIlN,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC3BoN,eAAO,IAAIC,aAAJ,CAAkB,gBAAgBrN,IAAI,CAApB,CAAlB,CAAP;AACGmN,aAAKpJ,WAAL,CAAiBqJ,KAAKrO,aAAL,EAAjB;AACH,KAJL,MAKK;AACD,aAAK,IAAIiB,IAAI,CAAb,EAAgBA,IAAIkN,cAAcpJ,MAAlC,EAA0C9D,GAA1C,EAA+C;AAC9CoN,mBAAO,IAAIC,aAAJ,CAAkBH,cAAclN,CAAd,CAAlB,CAAP;AACGmN,iBAAKpJ,WAAL,CAAiBqJ,KAAKrO,aAAL,EAAjB;AACH;AACJ;AACDgG,eAAWhB,WAAX,CAAuBoJ,IAAvB;AACA;;AAEA,SAAKpO,aAAL,GAAqB,YAAW;AAC/B,eAAOgG,UAAP;AACA,KAFD;AAGAnG,6BAAyB,IAAzB;;AAEA,WAAO,IAAP;AACP,CA1BD;ACAA,IAAIyO,gBAAgB,SAAhBA,aAAgB,CAASvI,IAAT,EAAc;;AAE1B,QAAIA,QAAQK,SAAZ,EAAuBL,OAAO,eAAP;AACvB,QAAIC,aAAa9F,SAASU,aAAT,CAAuB,SAAvB,CAAjB;AAAA,QACC2N,SAASrO,SAASU,aAAT,CAAuB,KAAvB,CADV;AAAA,QAEI4N,aAAatO,SAASU,aAAT,CAAuB,KAAvB,CAFjB;AAAA,QAGI6N,WAAWvO,SAASU,aAAT,CAAuB,IAAvB,CAHf;AAIA2N,WAAO9N,SAAP,CAAiBC,GAAjB,CAAqB,0BAArB;AACA8N,eAAW/N,SAAX,CAAqBC,GAArB,CAAyB,wBAAzB;AACA+N,aAAShO,SAAT,CAAmBC,GAAnB,CAAuB,aAAvB;AACAsF,eAAWhB,WAAX,CAAuBuJ,MAAvB;AACAvI,eAAWhB,WAAX,CAAuBwJ,UAAvB;AACAD,WAAOvJ,WAAP,CAAmByJ,QAAnB;AACAD,eAAWrI,SAAX,GAAuBJ,IAAvB;AACAyI,eAAWE,OAAX,GAAqBzK,OAAO0K,mBAA5B;;AAEA3I,eAAWzF,YAAX,GAA0B,UAAUC,KAAV,EAAiB;;AAEvC,YAAIG,YAAYT,SAASU,aAAT,CAAuB,MAAvB,CAAhB;AAAA,YACIC,UAAUX,SAASU,aAAT,CAAuB,MAAvB,CADd;AAAA,YAEIG,UAAUb,SAASU,aAAT,CAAuB,MAAvB,CAFd;AAAA,YAGII,QAHJ;AAAA,YAGcC,CAHd;AAIAF,gBAAQN,SAAR,CAAkBC,GAAlB,CAAsB,cAAtB;AACAC,kBAAUF,SAAV,CAAoBC,GAApB,CAAwB,WAAxB,EAAqC,iBAArC,EAAwD,eAAxD;AACAG,gBAAQJ,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB,EAAmC,sBAAnC,EAA2D,kBAA3D;AACA,aAAKD,SAAL,CAAeC,GAAf,CAAmB,sBAAnB;;AAEAC,kBAAUQ,OAAV,GAAoB,YAAY;AAC5B,gBAAIkN,OAAO,KAAKhN,UAAL,CAAgBA,UAA3B;AAAA,gBACII,SAAS4M,KAAKhN,UADlB;AAEAI,mBAAOF,WAAP,CAAmB8M,IAAnB;AACH,SAJD;;AAMAxN,gBAAQM,OAAR,GAAkB,UAAUX,KAAV,EAAiB;AAC/B,gBAAIoO,UAAUpO,MAAMgC,MAAN,CAAanB,UAAb,CAAwBA,UAAtC;AAAA,gBACIwN,UAAUD,QAAQjG,aAAR,CAAsB,yBAAtB,CADd;AAAA,gBAEImG,OAAOD,QAAQ1I,SAFnB;AAGA,gBAAI4I,YAAY,IAAIT,aAAJ,CAAkBQ,IAAlB,CAAhB;AACAF,oBAAQvN,UAAR,CAAmB2D,WAAnB,CAA+B+J,UAAU/O,aAAV,EAA/B;AACH,SAND;;AAQAe,gBAAQiO,MAAR,CAAenO,OAAf,EAAwBF,SAAxB;AACA,aAAKqE,WAAL,CAAiBjE,OAAjB;AACH,KA3BD;;AA6BAiF,eAAWf,YAAX,GAA0B,UAAUzE,KAAV,EAAiB;AACvC,aAAKC,SAAL,CAAe2E,MAAf,CAAsB,sBAAtB;AACA,YAAIrE,UAAU,KAAKM,UAAL,CAAgBsH,aAAhB,CAA8B,eAA9B,CAAd;AACA,YAAI5H,WAAWqF,SAAf,EAA0B;AACtB,gBAAI3E,SAASV,QAAQM,UAArB;AACAI,mBAAOF,WAAP,CAAmBR,OAAnB;AACH;AACJ,KAPD;;AASAyN,eAAWS,SAAX,GAAuB,UAAUzO,KAAV,EAAiB;AACpC,YAAIgI,MAAOhI,MAAM0O,KAAN,IAAe9I,SAAhB,GAA6B5F,MAAM0O,KAAnC,GACN1O,MAAMsD,OADV;AAAA,YAEIiL,SAFJ;AAAA,YAEeI,KAFf;AAGA,YAAI3G,QAAQ,EAAR,IACCvE,OAAOmL,YAAP,KAAwBhJ,SAAxB,IAAqCnC,OAAOmL,YAAP,KAAwB,IADlE,EACyE;AACrE;AACH;AACD5O,cAAMwD,cAAN;AACA+K,oBAAY,IAAIT,aAAJ,EAAZ;AACA,YAAGtI,WAAW2B,WAAX,IAA0BvB,SAA7B,EAAuC;AACnCJ,uBAAW3E,UAAX,CAAsBgO,YAAtB,CAAmCN,UAAU/O,aAAV,EAAnC,EAA6DgG,WAAW2B,WAAxE;AACH,SAFD,MAGI;AACA3B,uBAAW3E,UAAX,CAAsB2D,WAAtB,CAAkC+J,UAAU/O,aAAV,EAAlC;AACH;;AAGD+O,kBAAU/O,aAAV,GAA0B2I,aAA1B,CAAwC,yBAAxC,EAAmE2G,KAAnE;;AAEAH,gBAAQ,KAAK1M,UAAL,CAAgB,KAAKA,UAAL,CAAgBsC,MAAhB,GAAyB,CAAzC,CAAR;AACA,aAAKxD,WAAL,CAAiB4N,KAAjB;AACA,YAAI,KAAKhJ,SAAL,CAAeoJ,IAAf,MAAyB,gCAA7B,EAA+D;AAC3D,iBAAKpJ,SAAL,GAAiB,eAAjB;AACH;AACD,eAAO,KAAP;AACH,KA1BD;;AA4BA,SAAKnG,aAAL,GAAqB,YAAW;AAC/B,eAAOgG,UAAP;AACA,KAFD;;AAIA,WAAO,IAAP;AAEP,CAxFD;ACAA,IAAIJ,gBAAgB,SAAhBA,aAAgB,GAAU;;AAE7B,KAAI4J,QAAQtP,SAASkE,sBAAT,CAAgC,cAAhC,CAAZ;;AAEA,MAAK,IAAInD,IAAI,CAAb,EAAgBA,IAAIuO,MAAMzK,MAA1B,EAAkC9D,GAAlC,EAAuC;AACtCuO,QAAMvO,CAAN,EAASO,WAAT,GAAuB,UAAShB,KAAT,EAAe;AACtCA,SAAM2B,YAAN,CAAmBsN,aAAnB,GAAmC,MAAnC;AACMjP,SAAM2B,YAAN,CAAmBE,OAAnB,CAA2B,YAA3B,EAAyC7B,MAAMgC,MAAN,CAAakN,YAAb,CAA0B,IAA1B,CAAzC;AACN,GAHA;AAIA;;AAEDxP,UAASkE,sBAAT,CAAgC,eAAhC,EAAiD,CAAjD,EAAoDjD,OAApD,GAA8D,YAAU;AACvE,MAAIwO,OAAO,IAAIC,cAAJ,EAAX;AAAA,MACOtE,MAAMuE,UAAQ,oBADrB;AAAA,MAEOC,IAAI5P,SAASoE,cAAT,CAAwB,iBAAxB,EAA2CuF,KAA3C,CAAiD0F,IAAjD,EAFX;AAAA,MAGOQ,OAAO7P,SAASkE,sBAAT,CAAgC,kBAAhC,EAAoD,CAApD,EAAuD+B,SAHrE;AAAA,MAIC6J,aAJD;AAKA,MAAGF,MAAM,EAAT,EAAY;AACXE,mBAAgB9P,SAASkE,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,CAAhB;AACA4L,iBAAc7J,SAAd,GAA0B,8DAA1B;AACA6J,iBAAcvP,SAAd,CAAwBC,GAAxB,CAA4B,SAA5B;AACAuP,cAAW,YAAU;AACpBD,kBAAcvP,SAAd,CAAwB2E,MAAxB,CAA+B,SAA/B;AACA,IAFD,EAEE,IAFF;AAGA;AACKnD,UAAQC,GAAR,CAAY,aAAZ;AACN,MAAIgO,SAAS,WAASJ,CAAT,GAAW,WAAX,GAAuBC,IAApC;AACAJ,OAAKpE,IAAL,CAAU,MAAV,EAAkBD,GAAlB,EAAuB,IAAvB;AACAqE,OAAKQ,gBAAL,CAAsB,cAAtB,EAAsC,mCAAtC;AACAR,OAAKS,kBAAL,GAA0B,UAASC,CAAT,EAAY;AAC5B,OAAI,KAAKC,UAAL,IAAmB,CAAnB,IAAwB,KAAKC,MAAL,IAAe,GAA3C,EAAgD;AAC5CP,oBAAgB9P,SAASoE,cAAT,CAAwB,qBAAxB,CAAhB;AACZ0L,kBAAc7J,SAAd,GAA0B,qBAAmB2J,CAAnB,GAAqB,2BAA/C;AACAE,kBAAcvP,SAAd,CAAwBC,GAAxB,CAA4B,SAA5B;AACAuP,eAAW,YAAU;AACpBD,mBAAcvP,SAAd,CAAwB2E,MAAxB,CAA+B,SAA/B;AACA,KAFD,EAEE,IAFF;AAGS;AACV,GATD;AAUAuK,OAAKa,IAAL,CAAUN,MAAV;AACA,EA7BD;AA8BA,CAzCD;ACAA,IAAIzI,aAAa,SAAbA,UAAa,CAAS1B,IAAT,EAAc;;AAE3B,aAASO,eAAT,CAAyBhF,EAAzB,EAA4B;AACpB,YAAGA,MAAM,MAAT,EAAgB;AACZ,mBAAO,IAAIiF,SAAJ,EAAP;AACH,SAFD,MAGK,IAAGjF,MAAM,OAAT,EAAiB;AAClB,mBAAO,IAAIkF,UAAJ,EAAP;AACH,SAFI,MAGA,IAAGlF,MAAM,MAAT,EAAgB;AACjB,mBAAO,IAAImF,SAAJ,EAAP;AACH,SAFI,MAGA,IAAGnF,MAAM,QAAT,EAAkB;AACnB,mBAAO,IAAIwE,WAAJ,EAAP;AACH;AACR;;AAED2K,mBAAevQ,SAASU,aAAT,CAAuB,KAAvB,CAAf,EACA6P,aAAahQ,SAAb,CAAuBC,GAAvB,CAA2B,oBAA3B,CADA;;AAGA+P,iBAAazJ,WAAb,GAA2B,YAAU;AACjC,aAAKvG,SAAL,CAAeC,GAAf,CAAmB,SAAnB;AACH,KAFD;AAGA+P,iBAAavJ,UAAb,GAA0B,UAAS1G,KAAT,EAAe;AAC7BA,cAAMwD,cAAN;AACP,KAFL;;AAIAyM,iBAAatJ,WAAb,GAA2B,YAAU;AACjC,aAAK1G,SAAL,CAAe2E,MAAf,CAAsB,SAAtB;AACH,KAFD;;AAIAqL,iBAAarJ,MAAb,GAAsB,UAAS5G,KAAT,EAAe;AACjCA,cAAMkQ,eAAN;;AAEQ,YAAIC,IAAInQ,MAAMgC,MAAN,CAAamF,WAArB;AAAA,YACAiJ,KAAKpQ,MAAMgC,MADX;AAAA,YAEA1C,OAFA;AAAA,YAESyH,OAFT;AAAA,YAEiBC,WAFjB;;AAIA,eAAM,CAACoJ,GAAGnQ,SAAH,CAAaoB,QAAb,CAAsB,gBAAtB,CAAP,EAA+C;AAC3C+O,iBAAKA,GAAGvP,UAAR;AACH;;AAET,YAAGb,MAAM2B,YAAN,CAAmBuF,OAAnB,CAA2B,aAA3B,CAAH,EACA;AACI5H,sBAAUwG,gBAAgB9F,MAAM2B,YAAN,CAAmBuF,OAAnB,CAA2B,aAA3B,CAAhB,CAAV;AACA,iBAAKjH,SAAL,CAAe2E,MAAf,CAAsB,SAAtB;;AAIA,gBAAGuL,KAAK,IAAR,EAAa;AACTC,mBAAG5L,WAAH,CAAelF,QAAQE,aAAR,EAAf;AACA4Q,mBAAG5L,WAAH,CAAe,IAAIyC,UAAJ,EAAf;AACH,aAHD,MAII;AACAmJ,mBAAGvB,YAAH,CAAgBvP,QAAQE,aAAR,EAAhB,EAAwC2Q,CAAxC;AACAC,mBAAGvB,YAAH,CAAgB,IAAI5H,UAAJ,EAAhB,EAAiCkJ,CAAjC;AACH;AAGH,SAjBF,MAoBA;AACY7Q,sBAAUI,SAASkE,sBAAT,CAAgC5D,MAAM2B,YAAN,CAAmBuF,OAAnB,CAA2B,MAA3B,CAAhC,EAAoE,CAApE,CAAV;;AAEAH,sBAAUzH,QAAQ6H,WAAlB;AACAH,0BAAc1H,QAAQuB,UAAtB;AACA,gBAAGkG,WAAWnB,SAAd,EAAwB;AACpBoB,4BAAYjG,WAAZ,CAAwBgG,OAAxB;AACH;;AAED,gBAAGoJ,KAAK,IAAR,EAAa;AACZC,mBAAG5L,WAAH,CAAelF,OAAf;AACA8Q,mBAAG5L,WAAH,CAAe,IAAIyC,UAAJ,EAAf;AACA,aAHD,MAII;AACAmJ,mBAAGvB,YAAH,CAAgBvP,OAAhB,EAAwB6Q,CAAxB;AACAC,mBAAGvB,YAAH,CAAgB,IAAI5H,UAAJ,EAAhB,EAAiCkJ,CAAjC;AACH;AAER;AACL,aAAKlQ,SAAL,CAAe2E,MAAf,CAAsB,SAAtB;AACC,KAnDL;;AAqDA,WAAOqL,YAAP;AACH,CArFD;ACAA,IAAInE,aAAa,SAAbA,UAAa,CAASF,OAAT,EAAkBC,IAAlB,EAAuB;;AAErC,MAAI1G,WAAWzF,SAASkE,sBAAT,CAAgC,qBAAhC,CAAf;AAAA,MACCyM,iBAAiB3Q,SAASkE,sBAAT,CAAgC,kBAAhC,EAAoD,CAApD,CADlB;AAAA,MAECoI,KAFD;AAAA,MAEQsE,GAFR;AAAA,MAEaC,IAFb;;AAIS,OAAK,IAAI9P,IAAI,CAAb,EAAgBA,IAAI0E,SAASZ,MAA7B,EAAqC9D,GAArC,EAA0C;AACtC0E,aAAS1E,CAAT,EAAYR,SAAZ,CAAsBC,GAAtB,CAA0B,SAA1B;AACH;;AAEDR,WAASkE,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,EAA2DK,KAA3D,CAAiEC,OAAjE,GAA2E,MAA3E;;AAGA;AACA8H,UAAQtM,SAASU,aAAT,CAAuB,OAAvB,CAAR;AACA4L,QAAM/L,SAAN,CAAgBC,GAAhB,CAAoB,oBAApB;;AAGA;AACAoQ,QAAMtE,MAAMwE,SAAN,CAAgB,CAAC,CAAjB,CAAN;AACAF,MAAIrQ,SAAJ,CAAcC,GAAd,CAAkB,iBAAlB,EAAqC,UAArC;;AAEA,OAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAImL,OAApB,EAA6BnL,GAA7B,EAAkC;AAC9B8P,WAAO,IAAI1K,SAAJ,EAAP;AACA0K,SAAKhJ,SAAL,CAAe,CAAf,EAAiB9G,CAAjB;AACA6P,QAAI9L,WAAJ,CAAgB+L,KAAK/Q,aAAL,EAAhB;AACH;;AAED;AACA,OAAK,IAAIiB,IAAI,CAAb,EAAgBA,IAAIoL,IAApB,EAA0BpL,GAA1B,EAA+B;;AAE3B6P,UAAMtE,MAAMwE,SAAN,CAAgB,CAAC,CAAjB,CAAN;AACAF,QAAIrQ,SAAJ,CAAcC,GAAd,CAAkB,UAAlB;;AAEA,SAAK,IAAIkM,IAAI,CAAb,EAAgBA,IAAIR,OAApB,EAA6BQ,GAA7B,EAAkC;AAC9BmE,aAAO,IAAI1K,SAAJ,EAAP;AACH0K,WAAKhJ,SAAL,CAAe9G,CAAf,EAAiB2L,CAAjB;AACGkE,UAAI9L,WAAJ,CAAgB+L,KAAK/Q,aAAL,EAAhB;AACH;AACJ;;AAEPwM,QAAMyE,kBAAN,GAA2B,YAAU;AACpC,QAAIC,MAAM,KAAKrK,oBAAL,CAA0B,IAA1B,CAAV;AAAA,QAA2C8F,GAA3C;;AAEG,SAAK,IAAI1L,IAAI,CAAb,EAAgBA,IAAIiQ,IAAInM,MAAxB,EAAgC9D,GAAhC,EAAqC;AACjC0L,YAAMuE,IAAIjQ,CAAJ,EAAO4F,oBAAP,CAA4B,IAA5B,CAAN;AACA,WAAK,IAAI+F,IAAI,CAAb,EAAgBA,IAAID,IAAI5H,MAAxB,EAAgC6H,GAAhC,EAAqC;;AAEjC,YAAG3L,KAAG,CAAN,EAAQ;AACJ0L,cAAIC,CAAJ,EAAOvL,UAAP,CAAkBO,SAAlB,GAA4B,EAA5B;AACA+K,cAAIC,CAAJ,EAAOvL,UAAP,CAAkBZ,SAAlB,CAA4BC,GAA5B,CAAgC,UAAhC,EAA2C,iBAA3C;AACH,SAHD,MAII;AACAiM,cAAIC,CAAJ,EAAOvL,UAAP,CAAkBO,SAAlB,GAA4B,EAA5B;AACA+K,cAAIC,CAAJ,EAAOvL,UAAP,CAAkBZ,SAAlB,CAA4BC,GAA5B,CAAgC,UAAhC;AACH;;AAEDiM,YAAIC,CAAJ,EAAO9F,OAAP,CAAeqB,MAAf,GAAwByE,CAAxB;AACAD,YAAIC,CAAJ,EAAO9F,OAAP,CAAeoB,MAAf,GAAwBjH,CAAxB;AACH;AACJ;AACJ,GApBD;;AAsBAuL,QAAM2E,SAAN,GAAkB,UAASC,GAAT,EAAa;AAC3B,QAAIC,WAAJ,EAAiBC,KAAjB,EAAwBC,KAAxB;AACA,SAAK,IAAItQ,IAAI,CAAb,EAAgBA,IAAI,KAAKoL,IAAL,CAAUtH,MAA9B,EAAsC9D,GAAtC,EAA2C;;AAEvC,UAAIqQ,QAAQ,IAAIjL,SAAJ,EAAZ;;AAEA,UAAG+K,OAAO,QAAP,IAAmBA,OAAO,OAA7B,EACA;AACIC,sBAAc,KAAKhF,IAAL,CACLxF,oBADK,CACgB,IADhB,EACsB0K,MAAMzK,OAAN,CAAcqB,MADpC,CAAd;AAEA,YAAGiJ,OAAK,QAAR,EAAiB;AACb,eAAK/E,IAAL,CAAUpL,CAAV,EAAaoO,YAAb,CAA0BiC,MAAMtR,aAAN,EAA1B,EAAgDqR,WAAhD;AACA,cAAIG,UAAUtR,SAASkE,sBAAT,CAAgC,sBAAhC,CAAd;AACA,eAAK,IAAInD,IAAI,CAAb,EAAgBA,IAAIuQ,QAAQzM,MAA5B,EAAoC9D,GAApC,EAAyC;AACrCuQ,oBAAQvQ,CAAR,EAAW6F,OAAX,CAAmBqB,MAAnB;AACH;AACJ,SAND,MAOI;AACA,eAAKkE,IAAL,CAAUpL,CAAV,EAAaoO,YAAb,CAA0BiC,MAAMtR,aAAN,EAA1B,EAAgDqR,YAAY1J,WAA5D;AACH;AACJ,OAdD,MAeK,IAAGyJ,OAAK,KAAR,EAAc;AACf,aAAK/E,IAAL,CAAUpL,CAAV,EAAa+D,WAAb,CAAyBsM,MAAMtR,aAAN,EAAzB;AACH,OAFI,MAGD;AACA,aAAKqM,IAAL,CAAUpL,CAAV,EAAakF,SAAb,GAAyB,+CAA+C,KAAKkG,IAAL,CAAUpL,CAAV,EAAakF,SAArF;AACH;AACJ;;AAED,SAAK8K,kBAAL;AACH,GA9BD;;AAgCAzE,QAAMuB,iBAAN,GAA0B,UAAS0D,GAAT,EAAa;AACnCjF,UAAM2E,SAAN,CAAgB,KAAhB,EAAsB,KAAKrK,OAAL,CAAaC,UAAnC;AACH,GAFD;;AAIAyF,QAAMwB,mBAAN,GAA4B,UAASyD,GAAT,EAAa;AACrCjF,UAAM2E,SAAN,CAAgB,OAAhB,EAAwB,KAAKrK,OAAL,CAAaC,UAArC;AACH,GAFD;;AAIAyF,QAAMyB,eAAN,GAAwB,YAAU;AAC9BzB,UAAM2E,SAAN,CAAgB,QAAhB,EAAyB,KAAKrK,OAAL,CAAaC,UAAtC;AACH,GAFD;;AAIAyF,QAAM0B,cAAN,GAAuB,YAAU;AAC7B1B,UAAM2E,SAAN,CAAgB,OAAhB,EAAwB,KAAKrK,OAAL,CAAaC,UAArC;AACH,GAFD;;AAIAyF,QAAMkF,MAAN,GAAe,UAASN,GAAT,EAAa;AAC3B,QAAIG,KAAJ;AAAA,QAAWT,GAAX;AAAA,QAAgBa,eAAevL,SAA/B;;AAEG,QAAGgL,OAAO,KAAP,IAAgBA,OAAO,OAA1B,EAAkC;AAC9BN,YAAM,KAAKE,SAAL,CAAgBI,OAAO,KAAP,GAAe,CAAC,CAAhB,GAAoB,CAApC,CAAN;AACH,KAFD,MAEK;AACDN,YAAM5Q,SAASU,aAAT,CAAuB,IAAvB,CAAN;AACH;;AAED,SAAK,IAAIgM,IAAI,CAAb,EAAgBA,IAAI,KAAKR,OAAzB,EAAkCQ,GAAlC,EAAuC;AACnC,UAAImE,OAAO,IAAI1K,SAAJ,EAAX;AACAyK,UAAI9L,WAAJ,CAAgB+L,KAAK/Q,aAAL,EAAhB;AACH;;AAED8Q,QAAIrQ,SAAJ,CAAcC,GAAd,CAAkB,UAAlB;;AAEA,QAAG0Q,OAAO,QAAP,IAAmBA,OAAO,OAA7B,EAAsC;AACrCG,cAAQ,KAAKnN,sBAAL,CAA4B,kBAA5B,EAAgD,CAAhD,CAAR;AACGuN,qBAAe,KAAK9K,oBAAL,CAA0B,IAA1B,EAAgC0K,MAAMzK,OAAN,CAAcoB,MAA9C,CAAf;AACA,UAAGkJ,OAAO,QAAV,EAAmB;AACflB,eAAO0B,KAAP,CAAavC,YAAb,CAA0ByB,GAA1B,EAA8Ba,YAA9B;AACA,YAAIH,UAAUtR,SAASkE,sBAAT,CAAgC,sBAAhC,CAAd;AACA,aAAK,IAAInD,IAAI,CAAb,EAAgBA,IAAIuQ,QAAQzM,MAA5B,EAAoC9D,GAApC,EAAyC;AACrCuQ,kBAAQvQ,CAAR,EAAW6F,OAAX,CAAmBoB,MAAnB;AACH;AACJ,OAND,MAMK;AACD,aAAKrB,oBAAL,CAA0B,OAA1B,EAAmC,CAAnC,EAAsCwI,YAAtC,CAAmDyB,GAAnD,EAAuDa,aAAahK,WAApE;AACH;AACJ;;AAED,QAAGyJ,OAAM,QAAN,IAAkBA,OAAO,OAA5B,EAAoC;AACnC,UAAIS,SAAS3R,SAASyI,aAAT,CAAuB,kBAAvB,CAAb;AACA,UAAGkJ,MAAH,EAAU;AACTA,eAAO1Q,OAAP;AACA;AACD;;AAED,SAAK8P,kBAAL;AACH,GAtCD;;AAwCAzE,QAAMmB,cAAN,GAAuB,UAAS8D,GAAT,EAAa;AAChCjF,UAAMkF,MAAN,CAAa,KAAb;AACH,GAFD;;AAIAlF,QAAMoB,gBAAN,GAAyB,UAAS6D,GAAT,EAAa;AAClCjF,UAAMkF,MAAN,CAAa,OAAb;AACH,GAFD;;AAIAlF,QAAMqB,YAAN,GAAqB,YAAU;AAC3BrB,UAAMkF,MAAN,CAAa,QAAb;AACH,GAFD;;AAIAlF,QAAMsB,WAAN,GAAoB,YAAU;AAC1BtB,UAAMkF,MAAN,CAAa,OAAb;AACH,GAFD;;AAIAlF,QAAMJ,OAAN,GAAgBA,OAAhB;;AAEMyE,iBAAe7L,WAAf,CAA2BwH,KAA3B;;AAEND;AAGL,CA9KD;ACAA,IAAI9F,YAAY,SAAZA,SAAY,CAASV,IAAT,EAAc;AACtB,YAAIC,aAAa9F,SAASU,aAAT,CAAuB,KAAvB,CAAjB;AAAA,YACQkR,UAAU5R,SAASU,aAAT,CAAuB,KAAvB,CADlB;AAAA,YAEQmR,MAAM7R,SAASU,aAAT,CAAuB,GAAvB,CAFd;;AAIQ,aAAKP,IAAL,GAAY,MAAZ;;AAERyR,gBAAQrR,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;AACAqR,YAAI5L,SAAJ,GAAgBJ,QAAQK,SAAR,GAAoBL,IAApB,GAA2B,MAA3C;AACA+L,gBAAQ9M,WAAR,CAAoB+M,GAApB;AACA/L,mBAAWhB,WAAX,CAAuB8M,OAAvB;;AAEA,aAAK9R,aAAL,GAAqB,YAAW;AACxB,uBAAOgG,UAAP;AACP,SAFD;AAGAnG,iCAAyB,IAAzB;;AAEA,eAAO,IAAP;AACP,CAlBD","file":"admin.js","sourcesContent":["var applyGenericItemSettings = function(element){\r\n\tvar node = element.getDOMElement(),\r\n\t\tindex = document.counter.nextIndex(element.kind),\r\n\t\tlistItems;\r\n\r\n\tnode.onmouseenter = function(event){\r\n        this.classList.add('wptb-directlyhovered');\r\n        var btnDelete = document.createElement('span'),\r\n            btnCopy = document.createElement('span'),\r\n            btnMove = document.createElement('span'),\r\n            actions = document.createElement('span'),\r\n            previous, i;\r\n        actions.classList.add('wptb-actions');\r\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n        btnMove.classList.add(\"dashicons\",\"dashicons-move\", 'move-action');\r\n        btnMove.draggable = true;\r\n        btnDelete.onclick = function (event) {\r\n\t        var act = this.parentNode.parentNode,\r\n\t            el = act.parentNode;\r\n\t        el.removeChild(act); \r\n\t    };\r\n        //btnCopy.onclick = window.copyButton;\r\n        btnMove.ondragstart = function(event){\r\n        \tvar parent = this,infArr,type;\r\n\r\n        \twhile(parent.className == '' || \r\n        \t\t! parent.classList.contains('wptb-ph-element') ){\r\n        \t\tparent = parent.parentNode;\r\n        \t}\r\n\r\n\r\n        \tinfArr = parent.className.match(/wptb-element-(.+)-(\\d+)/i);\r\n\t\t\ttype = infArr[1];\r\n\r\n        \tvar img = document.createElement(\"img\");\r\n        \timg.src = \"http://localhost/sandbox/wp-content/plugins/wp-table-builder/inc/admin/views/builder/icons/\"+type+\".png\";\r\n        \tconsole.log(img.src);\r\n\t\t    event.dataTransfer.setDragImage(img, 0, 0);\r\n\t\t    event.dataTransfer.setData('node','wptb-element-'+infArr[1]+'-'+infArr[2]);\r\n        \t};\r\n\r\n\r\n        if(element.kind === 'button'){\r\n        \ttinyMCE.init({\r\n\t            target: node.childNodes[0].childNodes[0],\r\n\t            inline: true,\r\n\t            plugins: \"link\",\r\n\t            dialog_type: \"modal\",\r\n\t            theme: 'modern',\r\n\t            menubar: false,\r\n\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n\t            toolbar: 'bold italic strikethrough',\r\n\t            setup: function (ed) {\r\n\t                ed.on(\"init\",\r\n\t                    function (ed) {\r\n\t                        tinyMCE.execCommand('mceRepaint');\r\n\t                    }\r\n\t                );\r\n\t            },\r\n\t            init_instance_callback: function (editor) {\r\n\t                editor.on('change', function (e) {\r\n\t                    // check if it becomes empty because if there's no value it's hard to edit the editor in button element\r\n\t                    if (editor.getContent() == \"\") {\r\n\t                        editor.setContent(\"<p class='wptb-button'>Button Text</p>\");\r\n\t                    }\r\n\t                });\r\n\t                editor.on('KeyDown', function (e) {\r\n\t                    var range = editor.selection.getRng();\r\n\t                    var KeyID = e.keyCode;\r\n\t                    if (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\r\n\t                        e.preventDefault();\r\n\t                        editor.setContent(\"<p class='wptb-button'></p>\");\r\n\t                    }\r\n\t                });\r\n\r\n\t                window.currentEditor = editor;\r\n\t                editor.on('focus', function (e) {\r\n\t                    \r\n\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\r\n\t\t\t\t        if (window.currentEditor &&\r\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\r\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\r\n\t\t\t\t        } else {\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\r\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\r\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\r\n\t\t\t\t        }\r\n\t                });\r\n            \r\n\t            }\r\n\t        });\r\n        }\r\n        else if(element.kind === 'text'){\r\n        \ttinyMCE.init({\r\n\t            target: node.childNodes[0],\r\n\t            inline: true,\r\n\t            plugins: \"link, paste\",\r\n\t            dialog_type: \"modal\",\r\n\t            theme: 'modern',\r\n\t            menubar: false,\r\n\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n\t            paste_as_text: true,\r\n\t            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\r\n\t            init_instance_callback: function (editor) {\r\n\t                window.currentEditor = editor;\r\n\t                editor.on('focus', function (e) {\r\n\t                \t\r\n\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\r\n\t\t\t\t        if (window.currentEditor &&\r\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\r\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\r\n\t\t\t\t        } else {\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\r\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\r\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\r\n\t\t\t\t        }\r\n\t                });\r\n\t            }\r\n\t        });\r\n\r\n        }\r\n        else{\r\n        \tlistItems = node.getElementsByClassName('wptb-list-item-content');\r\n        \tfor (var i = 0; i < listItems.length; i++) {\r\n        \t\ttinyMCE.init({\r\n\t\t            target: listItems[i],\r\n\t\t            inline: true,\r\n\t\t            plugins: \"link, paste\",\r\n\t\t            dialog_type: \"modal\",\r\n\t\t            theme: 'modern',\r\n\t\t            menubar: false,\r\n\t\t            fixed_toolbar_container: '#wpcd_fixed_toolbar',\r\n\t\t            paste_as_text: true,\r\n\t\t            toolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\r\n\t\t            init_instance_callback: function (editor) {\r\n\t\t                window.currentEditor = editor;\r\n\t\t                editor.on('focus', function (e) {\r\n\t\t                    var totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\r\n\t\t\t\t        if (window.currentEditor &&\r\n\t\t\t\t            document.getElementById('wptb_builder').scrollTop >= 55 &&\r\n\t\t\t\t            window.currentEditor.bodyElement.style.display != 'none') {\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.top = '100px';\r\n\t\t\t\t        } else {\r\n\t\t\t\t            document.getElementById('wpcd_fixed_toolbar').style.position = 'static';\r\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.right;\r\n\t\t\t\t            delete document.getElementById('wpcd_fixed_toolbar').style.top;\r\n\t\t\t\t        }\r\n\t\t                });\r\n\t\t            }\r\n\t\t        });\r\n        \t}\r\n        }\r\n\r\n        actions.appendChild(btnMove);\r\n        actions.appendChild(btnCopy);\r\n        actions.appendChild(btnDelete);\r\n        this.appendChild(actions);\r\n\t};\r\n\r\n\tnode.onmouseleave = function(event){\r\n\t\tvar formerActions = this.getElementsByClassName('wptb-actions');\r\n        if (formerActions && formerActions[0]) {\r\n            let par = formerActions[0].parentNode;\r\n            par.removeChild(formerActions[0]);\r\n        }\r\n        this.classList.remove('wptb-directlyhovered');\r\n\t};\r\n\r\n\tnode.classList.add('wptb-ph-element', 'wptb-element-'+element.kind+'-' +\r\n           index);\r\n\r\n\tnew WPTB_ElementOptions(element,index);\r\n\r\n\tdocument.counter.increment(element.kind);\r\n     \r\n};","","(function(){  \r\n\t\r\n\tvar WPTB_Builder = function(){ \r\n\t\tdocument.counter = new ElementCounters();\r\n\r\n\t\tvar initializer = WPTB_Initializer();\r\n\t\t\tsettings = WPTB_Settings();\r\n\t};\r\n\r\n\tdocument.addEventListener('DOMContentLoaded', WPTB_Builder); \r\n})();","var WPTB_Button = function(text){\r\n        var DOMElement = document.createElement('div'),\r\n        \telButton2 = document.createElement('div'),\r\n        \tel_B = document.createElement('p');\r\n\r\n\t\tthis.kind = 'button';\r\n\r\n        DOMElement.classList.add('wptb-button-container');\r\n        elButton2.classList.add('wptb-button-wrapper');\r\n        el_B.classList.add('wptb-button');\r\n        el_B.classList.add('editable');\r\n        el_B.innerHTML = text != undefined ? text : 'Button Text';\r\n        elButton2.appendChild(el_B);\r\n        DOMElement.appendChild(elButton2);\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n\r\n        applyGenericItemSettings(this);\r\n\r\n        return this;\r\n};","var WPTB_Cell = function(DOMElement){\r\n\r\n\t\tfunction newElementProxy(el){\r\n\t\t\tif(el == 'list'){\r\n                return new WPTB_List();\r\n            }\r\n            else if(el == 'image'){\r\n                return new WPTB_Image();\r\n            }   \r\n            else if(el == 'text'){\r\n                return new WPTB_Text();\r\n            }\r\n            else if(el == 'button'){\r\n                return new WPTB_Button();\r\n            }\r\n\t\t}\r\n        \r\n        DOMElement = document.createElement(\"td\");\r\n        \r\n        DOMElement.classList.add('wptb-droppable', 'wptb-cell');  \r\n\r\n        DOMElement.onclick = function(){\r\n\r\n        \tvar relativeActions, cells;\r\n\r\n        \tif(window._wptbManagementModeActive){\r\n        \t\treturn;\r\n        \t}\r\n        \tif(this.classList.contains('wptb-highlighted')){\r\n        \t\tthis.classList.remove('wptb-highlighted');\r\n        \t}\r\n        \telse{\r\n        \t\trelativeActions = document.getElementsByClassName('wptb-relative-action');\r\n        \t\tcells = document.getElementsByTagName('td');\r\n\r\n        \t\tfor (var i = 0; i < relativeActions.length; i++) {\r\n        \t\t\tconsole.log(relativeActions[i]);\r\n        \t\t\trelativeActions[i].dataset.activeCell = this;\r\n        \t\t}\r\n\r\n        \t\tfor (var i = 0; i < cells.length; i++) {\r\n        \t\t\tcells[i].classList.remove('wptb-highlighted');\r\n        \t\t}\r\n\r\n        \t\tthis.classList.add('wptb-highlighted');\r\n\r\n        \t}\r\n        \t\r\n        };\r\n\r\n        DOMElement.ondragenter = function(){\r\n        \tvar div;\r\n        \tthis.classList.add('wptb-drop-here-empty');\r\n        }\r\n\r\n        DOMElement.ondragover = function(e){\r\n        \te.preventDefault();\r\n        }\r\n\r\n        DOMElement.ondragleave = function(){\r\n        \tthis.classList.remove('wptb-drop-here-empty');\r\n\r\n        }\r\n\r\n        DOMElement.ondrop = function(e){\r\n        \tvar element, classId, space, t_space, spaceParent;\r\n        \te.preventDefault();\r\n            space = new WPTB_Space();\r\n\r\n            if(e.dataTransfer.getData('wptbElement')){\r\n        \t   element = newElementProxy(e.dataTransfer.getData('wptbElement'));\r\n                if(this.innerHTML==''){\r\n                    this.appendChild(new WPTB_Space());\r\n                }\r\n                this.appendChild(element.getDOMElement());\r\n                this.appendChild(space);\r\n        \t}\r\n            else{\r\n\r\n                classId = e.dataTransfer.getData('node');\r\n                element = document.getElementsByClassName(classId)[0];\r\n                if(this.innerHTML==''){\r\n                    t_space = element.nextSibling;\r\n                    spaceParent = element.parentNode;\r\n                    if(t_space != undefined){\r\n                        spaceParent.removeChild(t_space);\r\n                    }\r\n                    this.appendChild(new WPTB_Space());\r\n                }\r\n                this.appendChild(element);\r\n                this.appendChild(space);\r\n            }\r\n        \tthis.classList.remove('wptb-drop-here-empty');\r\n        \treturn true;\r\n        }\r\n\r\n        DOMElement.onmousedown = function(){\r\n\r\n        };\r\n\r\n        DOMElement.onmouseover = function(){\r\n\r\n        };\r\n\r\n        DOMElement.onmouseup = function(){\r\n\r\n        };\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n\r\n        this.setCoords = function(y,x){\r\n        \tvar el = this.getDOMElement();\r\n        \tel.dataset.yIndex = y;\r\n        \tel.dataset.xIndex = x;\r\n        }\r\n\r\n        this.getCoords = function(){\r\n        \tvar coords,\r\n        \t\tel = this.getDOMElement();\r\n        \tcoords.x = el.dataset.xIndex;\r\n        \tcoords.y = el.dataset.yIndex;\r\n        \treturn coords;\r\n        }\r\n\r\n        this.appendElement = function(node){\r\n        \tgetDOMElement().appendChild(node);\r\n        }\r\n\r\n        return this;\r\n\r\n};","var ElementCounters = function(){\r\n\tvar priv = [];\r\n\tpriv['text'] = 0;\r\n\tpriv['image'] = 0;\r\n\tpriv['list'] = 0;\r\n\tpriv['button'] = 0; \r\n\r\n\tthis.increment = function(key){\r\n\r\n\t\tif(! (key in priv) ){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tpriv[key]++;\r\n\t}\r\n\tthis.nextIndex = function(key){\r\n\r\n\t\tif(! (key in priv) ){\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\treturn priv[key] + 1;\r\n\t}\r\n\treturn this;\r\n};","var WPTB_ElementOptions = function(element,index){\r\n\r\n\tvar node = element.getDOMElement(), elemIdClass;\r\n\r\n\tprop = document.querySelector(\".wptb-\" + element.kind + \"-options-prototype\").cloneNode(true);\r\n    prop.classList.remove(\"wptb-\" + element.kind + \"-options-prototype\"); // remove prototype from the class\r\n    elemIdClass='wptb-options-' + element.kind + \"-\" +  index;\r\n\r\n    var properties = prop.getElementsByClassName('wptb-element-property');\r\n\r\n    for (var i = 0; i < properties.length; i++) {\r\n    \tproperties[i].dataset.element = elemIdClass;\r\n    }\r\n\r\n    prop.classList.add(elemIdClass);\r\n    document.getElementById(\"element-options-group\").appendChild(prop);\r\n\r\n    node.onclick = function(){\r\n        var infArr = this.className.match(/wptb-element-((.+-)\\d+)/i),\r\n\t\t\toptionsClass = '.wptb-' + infArr[2] + 'options' +\r\n                        '.wptb-options-' + infArr[1];\r\n\r\n    \tdocument.getElementById('add-elements').getElementsByTagName('a')[0].classList.remove('active');\r\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.add('active');\r\n\t\t\r\n\t\tdocument.getElementsByClassName('wptb-elements-container')[0].style.display = 'none';\r\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'none';\r\n        document.getElementById(\"element-options-group\").style.display = 'block';\r\n\r\n        var children = document.getElementById(\"element-options-group\").childNodes;\r\n        for (var i = 0; i < children.length; i++) {\r\n            if (children[i].style)\r\n                children[i].style.display = 'none';\r\n        }\r\n\r\n        document.querySelector(optionsClass).style.display = 'block';\r\n    };\r\n\r\n    var optionControls = prop.getElementsByClassName('wptb-element-property');\r\n    console.log(optionControls);\r\n    for (var i = 0; i < optionControls.length; i++) {\r\n    \tif(optionControls[i].classList.contains('wptb-color-picker')){\r\n    \t\tjQuery(optionControls[i]).wpColorPicker({\r\n                change: function(event, ui){\r\n                    var parent = event.target, classe, type, ps, number;\r\n \r\n\r\n\r\n                    classe = parent.dataset.element.match(/wptb-options-(.+)-(\\d+)/i);\r\n                    type = classe[1];\r\n                    number = classe[2];\r\n                    console.log('Element','wptb-element-'+type+'-'+number);\r\n                    affectedEl = document.getElementsByClassName('wptb-element-'+type+'-'+number)[0];\r\n                    ps = affectedEl.getElementsByTagName(\"p\");\r\n                    for (var i = 0; i < ps.length; i++) {\r\n                            ps[i].style.color =  ui.color.toString();\r\n                    } \r\n                }\r\n            });\r\n    \t}\r\n\r\n        if(optionControls[i].dataset.type === 'font-size'){\r\n            var slider = optionControls[i].parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0];\r\n            slider.oninput = function(){\r\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].value = this.value;\r\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].onchange();\r\n            }\r\n        }\r\n\r\n    \toptionControls[i].onchange = function(event){\r\n\r\n    \t\tvar n_Class = this.dataset.element,\r\n    \t\t\tinfArr = n_Class.match(/wptb-options-(.+)-(\\d+)/i),\r\n\t\t\t\ttype = infArr[1],\r\n                num = infArr[2],\r\n    \t\t\taffectedEl = document.getElementsByClassName('wptb-element-'+type+'-'+num)[0],\r\n    \t\t\tval = this.value;\r\n\r\n                console.log('Event triggered',this.dataset.type,this.value);\r\n\r\n    \t\tswitch(this.dataset.type){\r\n                case 'src':\r\n                        var img = affectedEl.getElementsByTagName(\"img\");\r\n                        img.src=this.value;\r\n                        break;\r\n                        break;\r\n                    case 'alternative-text':\r\n                        var img = affectedEl.getElementsByTagName(\"img\");\r\n                        img.alt=this.value;\r\n                        break;\r\n                    case 'image-width':\r\n                        var img = affectedEl.getElementsByTagName(\"img\");\r\n                        img.width=this.value+'px';\r\n                        break;\r\n                        break;\r\n                    case 'image-height':\r\n                        var img = affectedEl.getElementsByTagName(\"img\");\r\n                        img.height=this.value+'px';\r\n                        break;\r\n                        break;\r\n    \t\t\tcase 'font-size':\r\n                        var ps = affectedEl.getElementsByTagName(\"p\");\r\n                        for (var i = 0; i < ps.length; i++) {\r\n                            ps[i].style.fontSize =  val + 'px';\r\n                        }\r\n\r\n                        this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0].value = this.value;\r\n                        \r\n                        break;\r\n                    case 'color':\r\n                        var ps = affectedEl.getElementsByTagName(\"p\");\r\n                        for (var i = 0; i < ps.length; i++) {\r\n                            ps[i].style.color =  val;\r\n                        } \r\n                        break;\r\n                    case 'list-class':\r\n                        if (val == 'unordered') {\r\n                            affectedEl.querySelector('[data-type=list-style-type]').parentNode.style.display= 'flex';\r\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\r\n                            for (var i = 0; i < bullets.length; i++) {\r\n                                bullets[i].style.listStyleType= 'disc';\r\n                            }\r\n                            document.querySelector('[data-type=list-style-type]').value = 'disc';\r\n                        } else {\r\n                            affectedEl.querySelector('[data-type=list-style-type]').parentNode.style.display= 'none'; \r\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\r\n                            for (var i = 0; i < bullets.length; i++) {\r\n                                bullets[i].style.listStyleType= 'decimal';\r\n                            } \r\n                        }\r\n                        break; \r\n                    case 'list-style-type':\r\n                            var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\r\n                            for (var i = 0; i < bullets.length; i++) {\r\n                                bullets[i].style.listStyleType= val.toLowerCase();\r\n                            } \r\n                        break;\r\n    \t\t}\r\n    \t};\r\n    }\r\n};","var WPTB_Image = function(text){\r\n        var DOMElement = document.createElement('div'),\r\n        \timg = document.createElement('img');\r\n\r\n\t\tthis.kind = 'image';\r\n\r\n        DOMElement.appendChild(img);\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n        applyGenericItemSettings(this);\r\n\r\n        file_frame = wp.media.frames.file_frame = wp.media({\r\n                                        title: 'Select a image to upload',\r\n                                        button: {\r\n                                                text: 'Use this image',\r\n                                        },\r\n                                        multiple: false  \r\n                                });\r\n                                // When an image is selected, run a callback.\r\n                                file_frame.on( 'select', function() {\r\n                                        attachment = file_frame.state().get('selection').first().toJSON();\r\n                                        img.src = attachment.url; \r\n                                });\r\n                                        // Finally, open the modal\r\n        file_frame.open();\r\n\r\n        return this;\r\n};","var WPTB_Initializer = function(){\r\n\tconst MIN_COLUMNS = 1,\r\n\t\t  MIN_ROWS = 1,\r\n\t\t  MAX_COLUMNS = 10,\r\n\t\t  MAX_ROWS = 10;\r\n\r\n\tvar tableGenerator = document.body;\r\n\t\tcolumnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0],\r\n\t\tcolumnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0],\r\n\t\trowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1],\r\n\t\trowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1],\r\n\t\tcolumnsInput = document.getElementById('wptb-columns-number'),\r\n\t\trowsInput = document.getElementById('wptb-rows-number');\r\n\r\n\r\n\t\tcolumnsDecrementButton.onclick = function(){\r\n\t\t\tif(columnsInput.value > MIN_COLUMNS){\r\n\t\t\t\tcolumnsInput.value--;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tcolumnsIncrementButton.onclick = function(){\r\n\t\t\tif(columnsInput.value < MAX_COLUMNS){\r\n\t\t\t\tcolumnsInput.value++;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\trowsDecrementButton.onclick = function(){\r\n\t\t\tif(rowsInput.value > MIN_ROWS){\r\n\t\t\t\trowsInput.value--;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\trowsIncrementButton.onclick = function(){\r\n\t\t\tif(rowsInput.value < MAX_ROWS){\r\n\t\t\t\trowsInput.value++;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\tdocument.getElementById('wptb-generate-table').onclick = function(){\r\n\r\n\t\t\t var columns = document.getElementById('wptb-columns-number').value,\r\n\t\t\t \t rows = document.getElementById('wptb-rows-number').value;\r\n\r\n\t\t\t WPTB_Table(columns, rows);\r\n\t\t}\r\n\r\n};","var WPTB_LeftPanel = function(){\r\n\tvar table = document.getElementsByClassName('wptb-preview-table')[0],\r\n\twptbElementButtons = document.getElementsByClassName('wptb-element');\r\n\r\n\tjQuery('#wptb-even-row-bg').wpColorPicker({\r\n\t\tchange: function(event,ui){\r\n                var tableRows = table.getElementsByTagName('tr');\r\n                for (var i = 1; i < tableRows.length; i+=2) {\r\n                \ttds = tableRows[i].getElementsByTagName('td');\r\n                \tfor (var j = 0; j < tds.length; j++) {\r\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\r\n                \t} \r\n                }\r\n    \t}\r\n\t}); //3MNRVA96 \r\n    jQuery('#wptb-odd-row-bg').wpColorPicker({\r\n    \tchange: function(event,ui){\r\n                var tableRows = table.getElementsByTagName('tr');\r\n                for (var i = 2; i < tableRows.length; i+=2) {\r\n                \ttds = tableRows[i].getElementsByTagName('td');\r\n                \tfor (var j = 0; j < tds.length; j++) {\r\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\r\n                \t} \r\n                }\r\n    \t}\r\n    });\r\n    jQuery('#wptb-table-header-bg').wpColorPicker({\r\n    \tchange: function(event,ui){\r\n                var tableHeader = table.getElementsByTagName('tr')[0],\r\n                \ttds = tableHeader.getElementsByTagName('td');\r\n                \tfor (var j = 0; j < tds.length; j++) {\r\n                \t\ttds[j].style.backgroundColor = ui.color.toString();\r\n                \t} \r\n    \t}\r\n    });\r\n\r\n\r\n\r\n    function addInnerBorderSize(value) {\r\n                var tableCells = table.getElementsByTagName('td');\r\n                for (var i = 0; i < tableCells.length; i++) {\r\n                    tableCells[i].style.border = value + 'px solid';\r\n                }\r\n    }\r\n\r\n    function addCellPadding(value) {\r\n                var tableCells = table.getElementsByTagName('td');\r\n                for (var i = 0; i < tableCells.length; i++) {\r\n                    tableCells[i].style.padding = value + 'px';\r\n                }\r\n    }\r\n\r\n\r\n    function addInnerBorder(checked) {\r\n                var styles;\r\n\r\n                if (checked == 'checked') {\r\n                    document.getElementById('wptb-apply-inner-border').style.marginBottom = '0px';\r\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\r\n                    for (var i = 0; i < tableCells.length; i++) {\r\n                        tableCells[i].style.border = '1px solid';\r\n                    }\r\n\r\n                    document.getElementById('wptb-inner-border-settings').classList.add('visible');\r\n                } else {\r\n                    document.getElementById('wptb-inner-border-settings').classList.remove('visible');\r\n                    var tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\r\n                    for (var i = 0; i < tableCells.length; i++) {\r\n                        tableCells[i].style.border = '';\r\n                    }\r\n                }\r\n    }\r\n\r\n    function addBorderSize(value) {\r\n                table.style.border = value + 'px solid';\r\n    }\r\n\r\n    document.getElementById('wptb-table-cell-slider').oninput = function () {\r\n            document.getElementById('wptb-table-cell-number').value = this.value;\r\n            addCellPadding(this.value);\r\n    };\r\n\r\n    document.getElementById('wptb-table-cell-number').onchange = function () {\r\n            document.getElementById('wptb-table-cell-slider').value = this.value;\r\n            addCellPadding(this.value);\r\n    };\r\n\r\n    document.getElementById('wptb-table-border-slider').oninput = function () {\r\n            document.getElementById('wptb-table-border-number').value = this.value;\r\n            addBorderSize(this.value);\r\n    };\r\n\r\n    document.getElementById('wptb-table-border-number').onchange = function () {\r\n            document.getElementById('wptb-table-border-slider').value = this.value;\r\n            addBorderSize(this.value);\r\n    };\r\n\r\n    document.getElementById('wptb-table-inner-border-slider').oninput = function () {\r\n            document.getElementById('wptb-table-inner-border-number').value = this.value;\r\n            addInnerBorderSize(this.value);\r\n    };\r\n\r\n    document.getElementById('wptb-table-inner-border-number').onchange = function () {\r\n            document.getElementById('wptb-table-inner-border-slider').value = this.value;\r\n            addInnerBorderSize(this.value);\r\n    };\r\n\r\n    document.getElementById('wptb-inner-border-check').onchange = function () {\r\n                var _val = this.checked ? 'checked' : 'unchecked';\r\n                addInnerBorder(_val);\r\n            };\r\n\r\n\tfor (var i = 0; i < wptbElementButtons.length; i++) {\r\n\t\twptbElementButtons[i].ondragstart = function(e){\r\n\t\t\te.dataTransfer.setData('wptbElement',this.dataset.wptbElement);\r\n\t\t}\r\n\t}\r\n\r\n\tdocument.getElementById('wptb-add-end-row').onclick = table.addRowToTheEnd;\r\n\tdocument.getElementById('wptb-add-start-row').onclick = table.addRowToTheStart;\r\n\tdocument.getElementById('wptb-add-row-before').onclick = table.addRowBefore;\r\n\tdocument.getElementById('wptb-add-row-after').onclick = table.addRowAfter;\r\n\tdocument.getElementById('wptb-add-end-column').onclick = table.addColumnToTheEnd;\r\n\tdocument.getElementById('wptb-add-start-column').onclick = table.addColumnToTheStart;\r\n\tdocument.getElementById('wptb-add-column-before').onclick = table.addColumnBefore;\r\n\tdocument.getElementById('wptb-add-column-after').onclick = table.addColumnAfter;\r\n\tdocument.getElementById('add-elements').onclick = function(){\r\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.remove('active');\r\n        document.getElementById('add-elements').getElementsByTagName('a')[0].classList.add('active');\r\n        document.getElementsByClassName('wptb-elements-container')[0].style.display = 'table';\r\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'block';\r\n        document.getElementById(\"element-options-group\").style.display = 'none';\r\n\t};\r\n};","var WPTB_List = function(innerElements){\r\n    \tvar el_L = document.createElement('ul'), item,\r\n\t\t\tDOMElement = document.createElement('div');\r\n\r\n\t\tthis.kind = 'list';\r\n\r\n        if (!innerElements)\r\n            for (var i = 0; i < 3; i++) {\r\n            \titem = new WPTB_ListItem('List Item ' + (i + 1));\r\n                el_L.appendChild(item.getDOMElement());\r\n            }\r\n        else {\r\n            for (var i = 0; i < innerElements.length; i++) {\r\n            \titem = new WPTB_ListItem(innerElements[i]);\r\n                el_L.appendChild(item.getDOMElement());\r\n            }\r\n        } \r\n        DOMElement.appendChild(el_L);\r\n        //window.addElementOptions('list', elList);\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n        applyGenericItemSettings(this);\r\n\r\n        return this;\r\n};","var WPTB_ListItem = function(text){\r\n\r\n        if (text == undefined) text = 'New List Item';\r\n        var DOMElement = document.createElement('article'),\r\n        \tdivdot = document.createElement('div'),\r\n            divcontent = document.createElement('div'),\r\n            libullet = document.createElement('li');\r\n        divdot.classList.add('wptb-list-item-style-dot');\r\n        divcontent.classList.add('wptb-list-item-content');\r\n        libullet.classList.add('wptb-bullet');\r\n        DOMElement.appendChild(divdot);\r\n        DOMElement.appendChild(divcontent);\r\n        divdot.appendChild(libullet);\r\n        divcontent.innerHTML = text;\r\n        divcontent.onkeyup = window.listItemKeyListener;\r\n\r\n        DOMElement.onmouseenter = function (event) {\r\n\r\n            var btnDelete = document.createElement('span'),\r\n                btnCopy = document.createElement('span'),\r\n                actions = document.createElement('span'),\r\n                previous, i;\r\n            actions.classList.add('wptb-actions');\r\n            btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\r\n            btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\r\n            this.classList.add('wptb-directlyhovered');\r\n\r\n            btnDelete.onclick = function () {\r\n                var item = this.parentNode.parentNode,\r\n                    parent = item.parentNode;\r\n                parent.removeChild(item);\r\n            };\r\n\r\n            btnCopy.onclick = function (event) {\r\n                var article = event.target.parentNode.parentNode,\r\n                    content = article.querySelector('.wptb-list-item-content'),\r\n                    html = content.innerHTML;\r\n                var duplicate = new WPTB_ListItem(html);\r\n                article.parentNode.appendChild(duplicate.getDOMElement());\r\n            };\r\n\r\n            actions.append(btnCopy, btnDelete);\r\n            this.appendChild(actions);\r\n        };\r\n\r\n        DOMElement.onmouseleave = function (event) {\r\n            this.classList.remove('wptb-directlyhovered');\r\n            var actions = this.parentNode.querySelector('.wptb-actions');\r\n            if (actions != undefined) {\r\n                let parent = actions.parentNode;\r\n                parent.removeChild(actions);\r\n            }\r\n        };\r\n\r\n        divcontent.onkeydown = function (event) {\r\n            var key = (event.which != undefined) ? event.which :\r\n                event.keyCode, \r\n                duplicate, lastP;\r\n            if (key !== 13 ||\r\n                (window.dontAddItems !== undefined && window.dontAddItems === true)) {\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            duplicate = new WPTB_ListItem();\r\n            if(DOMElement.nextSibling != undefined){\r\n                DOMElement.parentNode.insertBefore(duplicate.getDOMElement(),DOMElement.nextSibling);\r\n            }\r\n            else{\r\n                DOMElement.parentNode.appendChild(duplicate.getDOMElement());\r\n            }\r\n            \r\n\r\n            duplicate.getDOMElement().querySelector('.wptb-list-item-content').focus();\r\n\r\n            lastP = this.childNodes[this.childNodes.length - 1];\r\n            this.removeChild(lastP);\r\n            if (this.innerHTML.trim() == '<p><br data-mce-bogus=\"1\"></p>') {\r\n                this.innerHTML = 'New List Item';\r\n            }\r\n            return false;\r\n        };\r\n\r\n        this.getDOMElement = function (){ \r\n        \treturn DOMElement;\r\n        }\r\n\r\n        return this;\r\n\r\n};","var WPTB_Settings = function(){\r\n\t\r\n\tvar elems = document.getElementsByClassName('wptb-element');\r\n\r\n\tfor (var i = 0; i < elems.length; i++) {\r\n\t\telems[i].ondragstart = function(event){\r\n\t\tevent.dataTransfer.effectAllowed = 'move';\r\n        event.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\r\n\t}\r\n\t};\r\n\r\n\tdocument.getElementsByClassName('wptb-save-btn')[0].onclick = function(){\r\n\t\tvar http = new XMLHttpRequest(),\r\n        \turl = ajaxurl+\"?action=save_table\",\r\n        \tt = document.getElementById('wptb-setup-name').value.trim(), \r\n        \tcode = document.getElementsByClassName('wptb-table-setup')[0].innerHTML,\r\n\t\t\tmessagingArea;\r\n\t\tif(t === ''){\r\n\t\t\tmessagingArea = document.getElementsByClassName('wptb-messaging')[0];\r\n\t\t\tmessagingArea.innerHTML = 'Error: You must assign a name to the table before saving it.';\r\n\t\t\tmessagingArea.classList.add('warning');\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tmessagingArea.classList.remove('warning');\r\n\t\t\t},5000);\r\n\t\t}\r\n        console.log('Ajax called');\r\n\t\tvar params = 'title='+t+'&content='+code;\r\n\t\thttp.open('POST', url, true);\r\n\t\thttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n\t\thttp.onreadystatechange = function(d) {\r\n            if (this.readyState == 4 && this.status == 200) {\r\n                messagingArea = document.getElementById('wptb-messaging-area');\r\n\t\t\t\tmessagingArea.innerHTML = 'Success: table \"'+t+'\" was successfully saved.';\r\n\t\t\t\tmessagingArea.classList.add('success');\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tmessagingArea.classList.remove('success');\r\n\t\t\t\t},5000);\r\n            }\r\n\t\t}\r\n\t\thttp.send(params);\r\n\t}\r\n};\r\n","var WPTB_Space = function(text){\r\n\r\n    function newElementProxy(el){\r\n            if(el == 'list'){\r\n                return new WPTB_List();\r\n            }\r\n            else if(el == 'image'){\r\n                return new WPTB_Image();\r\n            }   \r\n            else if(el == 'text'){\r\n                return new WPTB_Text();\r\n            }\r\n            else if(el == 'button'){\r\n                return new WPTB_Button();\r\n            }\r\n    }\r\n\r\n    spaceBetween = document.createElement('div'),\r\n    spaceBetween.classList.add('wptb-space-between');\r\n\r\n    spaceBetween.ondragenter = function(){\r\n        this.classList.add('visible');\r\n    };\r\n    spaceBetween.ondragover = function(event){\r\n                event.preventDefault();\r\n        };\r\n\r\n    spaceBetween.ondragleave = function(){\r\n        this.classList.remove('visible');\r\n    };\r\n\r\n    spaceBetween.ondrop = function(event){\r\n        event.stopPropagation();\r\n        \r\n                var p = event.target.nextSibling,\r\n                td = event.target,\r\n                element, t_space,spaceParent; \r\n\r\n                while(!td.classList.contains('wptb-droppable')){\r\n                    td = td.parentNode;\r\n                }\r\n\r\n        if(event.dataTransfer.getData('wptbElement'))\r\n        {\r\n            element = newElementProxy(event.dataTransfer.getData('wptbElement')); \r\n            this.classList.remove('visible');\r\n                \r\n \r\n\r\n            if(p == null){\r\n                td.appendChild(element.getDOMElement());\r\n                td.appendChild(new WPTB_Space());\r\n            }\r\n            else{\r\n                td.insertBefore(element.getDOMElement(),p);\r\n                td.insertBefore(new WPTB_Space(),p);\r\n            } \r\n \r\n\r\n         }\r\n\r\n        else\r\n        {  \r\n                    element = document.getElementsByClassName(event.dataTransfer.getData('node'))[0];\r\n\r\n                    t_space = element.nextSibling;\r\n                    spaceParent = element.parentNode;\r\n                    if(t_space != undefined){\r\n                        spaceParent.removeChild(t_space);\r\n                    }\r\n\r\n                    if(p == null){\r\n                     td.appendChild(element);\r\n                     td.appendChild(new WPTB_Space());\r\n                    }\r\n                    else{\r\n                        td.insertBefore(element,p);\r\n                        td.insertBefore(new WPTB_Space(),p);\r\n                    }  \r\n\r\n            }\r\n        this.classList.remove('visible');\r\n        };\r\n\r\n    return spaceBetween;\r\n};","var WPTB_Table = function(columns, rows){\r\n\t\t\t\r\n\t\t\tvar settings = document.getElementsByClassName('wptb-settings-items'),\r\n\t\t\t\twptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\r\n\t\t\t\ttable, row, cell;\r\n\r\n            for (var i = 0; i < settings.length; i++) {\r\n                settings[i].classList.add('visible');\r\n            }\r\n\r\n            document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\r\n            \r\n\r\n            //Create a HTML Table element.\r\n            table = document.createElement('table');\r\n            table.classList.add('wptb-preview-table');\r\n\r\n\r\n            //Add the header row.\r\n            row = table.insertRow(-1);\r\n            row.classList.add('wptb-table-head', 'wptb-row');\r\n\r\n            for (var i = 0; i < columns; i++) {\r\n                cell = new WPTB_Cell();\r\n                cell.setCoords(0,i); \r\n                row.appendChild(cell.getDOMElement()); \r\n            }\r\n\r\n            //Add the data rows.\r\n            for (var i = 1; i < rows; i++) {\r\n\r\n                row = table.insertRow(-1);\r\n                row.classList.add('wptb-row');\r\n\r\n                for (var j = 0; j < columns; j++) {\r\n                    cell = new WPTB_Cell();\r\n                \tcell.setCoords(i,j); \r\n                    row.appendChild(cell.getDOMElement());\r\n                }\r\n            }\r\n\r\n    \t\ttable.recalculateIndexes = function(){\r\n    \t\t\tvar trs = this.getElementsByTagName('tr'), tds;\r\n\r\n\t\t        for (var i = 0; i < trs.length; i++) {\r\n\t\t            tds = trs[i].getElementsByTagName('td');\r\n\t\t            for (var j = 0; j < tds.length; j++) {\r\n\r\n\t\t                if(i==0){ \r\n\t\t                    tds[j].parentNode.className=''; \r\n\t\t                    tds[j].parentNode.classList.add('wptb-row','wptb-table-head');\r\n\t\t                }\r\n\t\t                else{\r\n\t\t                    tds[j].parentNode.className=''; \r\n\t\t                    tds[j].parentNode.classList.add('wptb-row'); \r\n\t\t                }\r\n\r\n\t\t                tds[j].dataset.xIndex = j;\r\n\t\t                tds[j].dataset.yIndex = i;\r\n\t\t            }\r\n\t\t        }\r\n    \t\t}\r\n\r\n    \t\ttable.addColumn = function(pos){\r\n\t\t        var referenceTd, newTd, _this;\r\n\t\t        for (var i = 0; i < this.rows.length; i++) {\r\n\t\t            \r\n\t\t            var newTd = new WPTB_Cell(); \r\n\r\n\t\t            if(pos == 'before' || pos == 'after')\r\n\t\t            {\r\n\t\t                referenceTd = this.rows\r\n\t\t                        .getElementsByTagName('td')[_this.dataset.xIndex];\r\n\t\t                if(pos=='before'){\r\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd);\r\n\t\t                    var buttons = document.getElementsByClassName('wptb-relative-action');\r\n\t\t                    for (var i = 0; i < buttons.length; i++) {\r\n\t\t                        buttons[i].dataset.xIndex++;\r\n\t\t                    } \r\n\t\t                }\r\n\t\t                else{\r\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd.nextSibling);\r\n\t\t                }\r\n\t\t            }\r\n\t\t            else if(pos=='end'){\r\n\t\t                this.rows[i].appendChild(newTd.getDOMElement());  \r\n\t\t            }\r\n\t\t            else{\r\n\t\t                this.rows[i].innerHTML = '<td class=\"wptb-droppable wptb-cell\"></td>' + this.rows[i].innerHTML; \r\n\t\t            }\r\n\t\t        }\r\n\r\n\t\t        this.recalculateIndexes();\r\n\t\t    };\r\n\r\n    \t\ttable.addColumnToTheEnd = function(evt){\r\n\t\t        table.addColumn('end',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n\t\t    table.addColumnToTheStart = function(evt){\r\n\t\t        table.addColumn('start',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n\t\t    table.addColumnBefore = function(){\r\n\t\t        table.addColumn('before',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n\t\t    table.addColumnAfter = function(){\r\n\t\t        table.addColumn('after',this.dataset.activeCell);\r\n\t\t    };\r\n\r\n    \t\ttable.addRow = function(pos){\r\n    \t\t\tvar _this, row, referenceRow = undefined;\r\n\t\t            \r\n\t\t        if(pos == 'end' || pos == 'start'){ \r\n\t\t            row = this.insertRow( pos == 'end' ? -1 : 0);\r\n\t\t        }else{\r\n\t\t            row = document.createElement('tr');\r\n\t\t        }\r\n\t\t            \r\n\t\t        for (var j = 0; j < this.columns; j++) {\r\n\t\t            var cell = new WPTB_Cell();\r\n\t\t            row.appendChild(cell.getDOMElement());\r\n\t\t        }\r\n\r\n\t\t        row.classList.add('wptb-row'); \r\n\r\n\t\t        if(pos == 'before' || pos == 'after' ){\r\n\t\t        \t_this = this.getElementsByClassName('wptb-highlighted')[0];\r\n\t\t            referenceRow = this.getElementsByTagName('tr')[_this.dataset.yIndex];\r\n\t\t            if(pos == \"before\"){\r\n\t\t                params.tbody.insertBefore(row,referenceRow);\r\n\t\t                var buttons = document.getElementsByClassName('wptb-relative-action');\r\n\t\t                for (var i = 0; i < buttons.length; i++) {\r\n\t\t                    buttons[i].dataset.yIndex++;\r\n\t\t                } \r\n\t\t            }else{\r\n\t\t                this.getElementsByTagName('tbody')[0].insertBefore(row,referenceRow.nextSibling);\r\n\t\t            }\r\n\t\t        }\r\n\r\n\t\t        if(pos =='before' || pos == 'start'){\r\n\t\t        \tvar active = document.querySelector('wptb-highlighted');\r\n\t\t        \tif(active){\r\n\t\t        \t\tactive.onclick();\r\n\t\t        \t}\r\n\t\t        }\r\n\r\n\t\t        this.recalculateIndexes();\r\n    \t\t};\r\n\r\n    \t\ttable.addRowToTheEnd = function(evt){\r\n\t\t        table.addRow('end');\r\n\t\t    };\r\n\r\n\t\t    table.addRowToTheStart = function(evt){\r\n\t\t        table.addRow('start');\r\n\t\t    };\r\n\r\n\t\t    table.addRowBefore = function(){\r\n\t\t        table.addRow('before');\r\n\t\t    };\r\n\r\n\t\t    table.addRowAfter = function(){\r\n\t\t        table.addRow('after');\r\n\t\t    };\r\n\r\n\t\t    table.columns = columns;\r\n\r\n            wptbTableSetup.appendChild(table);\r\n\r\n\t\t    WPTB_LeftPanel();\r\n\r\n             \r\n};","var WPTB_Text = function(text){\r\n        var DOMElement = document.createElement('div'),\r\n                elText2 = document.createElement('div'),\r\n                elP = document.createElement('p');\r\n\r\n                this.kind = 'text';\r\n\r\n        elText2.classList.add('editable');\r\n        elP.innerHTML = text != undefined ? text : 'Text';\r\n        elText2.appendChild(elP);\r\n        DOMElement.appendChild(elText2);\r\n\r\n        this.getDOMElement = function (){ \r\n                return DOMElement;\r\n        }\r\n        applyGenericItemSettings(this);\r\n\r\n        return this;\r\n};"]}