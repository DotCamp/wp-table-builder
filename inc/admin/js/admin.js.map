{"version":3,"sources":["WPTB_ActionsField.js","WPTB_BackgroundMenu.js","WPTB_Builder.js","WPTB_Cell.js","WPTB_CutGlueTable.js","WPTB_DropHandle.js","WPTB_ElementCounters.js","WPTB_ElementIdProvider.js","WPTB_ElementObject.js","WPTB_ElementOptions.js","WPTB_ExtraStyles.js","WPTB_GetDirectionAfterReconstruction.js","WPTB_HeaderToolbox.js","WPTB_Helper.js","WPTB_Initializer.js","WPTB_LeftPanel.js","WPTB_Logger.js","WPTB_MultipleSelect.js","WPTB_NotificationManager.js","WPTB_Parser.js","WPTB_Polyfills.js","WPTB_RecalculateIndexes.js","WPTB_Responsive.js","WPTB_Settings.js","WPTB_SortableTable.js","WPTB_Stringifier.js","WPTB_Table.js","WPTB_TableSettingsData.js","WPTB_TableStateSaveManager.js","WPTB_Upsells.js","WPTB_innerElementSet.js","applyGenericItemSettings.js","WPTB_IconManager.js"],"names":["WPTB_ActionsField","_this","this","wptbActions","document","getElementsByClassName","length","addActionField","actionType","thisNode","body","getElementsByTagName","actions","previousNode","activeElem","classList","remove","parentNode","removeChild","btnDelete","createElement","btnCopy","add","appendChild","type","onclick","event","act","target","el","className","match","_typeof","hasOwnProperty","kind","thisRow","WPTB_Helper","rowIsTop","table","findAncestor","contains","dataTitleColumnSet","actionsRemove","WPTB_TableStateSaveManager","tableStateSet","wptbDocumentEventGenerate","copy","elementCopy","activeElement","activeElemParent","infArr","Array","isArray","data","elemProt","tinyMceClear","WPTB_ElementObject","getDOMElement","insertBefore","nextSibling","cloneNode","applyGenericItemSettings","WPTB_innerElementSet","setParameters","btnMove","draggable","ondragstart","dragImages","jsonIconsDirectories","wp","template","tmplIconsDirectories","IconsDirectories","JSON","parse","getElementIcon","dataTransfer","effectAllowed","setDragImage","setData","style","display","actionsHide","ondragend","elementDragEndClear","coordinatesElement","wptbContainer","getBoundingClientRect","top","parseFloat","left","right","clientWidth","onscroll","leaveFromField","node","relatedTarget","onmouseleave","opacity","factory","self","global","singletonInstance","getCurrentTable","querySelector","getSelectorToolbox","initialized","store","removeHighlights","from","querySelectorAll","map","cell","highlightCellLogic","targetElement","multiSelection","arguments","undefined","currentTargetType","nodeName","toLowerCase","highlightCell","preventDefault","stopPropagation","commit","state","types","selected","item","getColumnSelector","getRowSelector","rowMouseEnter","cellMouseEnter","index","reduce","carry","current","cellIndex","element","getCellsAtColumnIndex","columnIndex","parsedIndex","Number","parseInt","cells","isNaN","row","_Array$from$splice","splice","cellAtIndex","_slicedToArray","push","createRailMark","railMark","calculateRailPositions","tableWidth","_currentTable$getBoun","width","tableHeight","height","columnRailHeight","columnRail","concat","columnRailElement","mark","currentTable","indexRow","currentRowCellCount","_cell$getBoundingClie","cellX","x","cellWidth","cellDataObject","addEventListener","addColumnMarksToRail","rowRailElement","rowRailWidth","rowRail","_row$getBoundingClien","rowHeight","rowPositionObject","addSelectorToolbox","toolbox","rowSelector","title","WPTB_IconManager","getIcon","then","icon","colSelector","getters","hoveredCell","first","_getCellsAtColumnInde2","_toArray","rest","slice","column","_toConsumableArray","assignRowClickHandler","currentActiveRow","hoveredRow","_Array$from4","selectorToolboxVisibility","visible","dataset","removeHandlersAndStates","removeEventListener","dispatch","watchStoreMutations","suppliedStore","subscribe","_ref4","targetRow","parentY","_targetRow$getBoundin","payload","y","cellsAtIndex","cellToUse","offsetWidth","parentX","_cellToUse$getBoundin","applyOptions","_ref","headerBg","evenBg","oddBg","_ref2","wptbHeaderBackgroundColor","wptbEvenRowBackgroundColor","wptbOddRowBackgroundColor","header","_Array$from2","colorVal","removeProperty","backgroundColor","customBgColorRuleSet","customBgColor","wptbBgColor","hasCustomBgColor","includes","init","_ref3","detail","WPTB_ControlsManager","callControlScript","getPreviousSection","WPTB_Store","get","elementActionsToolbox","addStore","storeObject","url","window","location","href","RegExp","exec","http","urlSet","table_id","detectMode","XMLHttpRequest","ajaxurl","open","setRequestHeader","onreadystatechange","d","wptbTableSetupEl","readyState","status","ans","responseText","getElementById","value","WPTB_Parser","WPTB_Table","wptbTableContainerMaxWidth","maxWidth","tdDefaultWidth","WPTB_Settings","send","counter","ElementCounters","select","MultipleSelect","WPTB_Initializer","settings","WPTB_Cell","callback","DOMElement","padding","jQuery","val","innerBorderWidth","border","newElementProxy","ondblclick","wptbTableSetup","yIndex","wptbSortableTable","currentTarget","elementStartScript","wptbPhElement","_loop","i","wptbElementTypeClass","wptbTypeElementArr","split","wptbInternalActiveElement","j","wptbInternalActiveElementObj","_loop2","setCoords","xIndex","getCoords","coords","appendElement","getCellDimensions","tdStyleObj","getComputedStyle","tdPaddingLeft","getPropertyValue","tdPaddingRight","tdBorderLeftWidth","tdBorderRightWidth","tdPaddingTop","tdPaddingBottom","tdBorderTopWidth","tdBorderBottomWidth","offsetHeight","borderCollapse","tableBorderLeft","tableFullStyleObj","tableBorderRight","tableBorderTop","tableBorderBottom","tr","firstChild","lastChild","WPTB_CutGlueTable","cutTableHorizontally","rowBefore","rows","tableRowsIChildren","children","rowSpan","newTdRowspan","sameCellBeforeDivision","td","wptbCell","tdTopStyle","getAttribute","setAttribute","colSpan","dataXIndex","dataXIndexNext","beforeTd","maxCols","WPTB_RecalculateIndexes","glueTableHorizontally","tds","hasAttribute","dataSameCellBeforeDivision","tdsSameBeforeDivision","tdsSameBeforeDivisionJPlusChildren","k","cutTableVertically","col","rowSpanNewTd","colSpanOld","colSpanNewTd","rowChildren","rowChildrenLength","afterTd","tdLeftStyle","tdAnalogThisX","tdAnalogThisY","glueTableVertically","jFirstTdGlue","WPTB_DropHandle","thisElem","e","wptbDropHandle","wptbDropBorderMarker","wptbDropBorderMarkerTop","wptbDropBorderMarkerRight","wptbDropBorderMarkerBottom","wptbDropBorderMarkerLeft","hide","toPx","getDragRelativeType","cellRelatedDropHandle","range","createRange","setStart","shadowRoot","createContextualFragment","_parentTd$getBounding","getParentOfType","ondragenter","ondragover","ondragleave","ondrop","getData","wptbMovingMode","text","getDOMParentElement","innerElement","innerElementNext","localName","indics","notDragEnter","indexOf","elementDrag","offsetY","layerY","bottom","priv","increment","key","nextIndex","elementIds","getNewId","elementType","elements","regex","matchArray","Math","max","kindIndexProt","itemHtml","wptbElementMutch","elementClearFromTinyMce","wpTemplateId","replace","trim","innerHTML","inElems","inElemObj","WPTB_ElementOptions","elementOptionsSet","capture","context","module","exports","_tableQueries","prefixStyleRules","prefix","extraStyles","splitStyles","replaceAll","prefixedStylesArray","matches","join","applyGeneralStyles","generalStyles","baseElement","generalStylesheet","id","insertAdjacentElement","currentMode","modes","block","baseDocument","prefixedStyleRules","parentPrefix","styles","createTextNode","applyExtraStyle","tableElement","styleId","styleElement","uniqueClass","prefixedStyles","extraStylesRaw","wptbExtraStyles","atob","_tableElement$getAttr","tableId","head","disableThemeStyles","frontEnd","builder","tableQueries","_defineProperty","applyStyles","mode","allTables","WPTB_GetDirectionAfterReconstruction","typeFirst","typeSecond","verticalProp","responsiveFront","itemsPerHeader","tableMaxCols","switchMode","getDirective","directives","sizeRangeId","responsiveMode","modeOptions","topRowAsHeader","cellStackDirection","cellsPerRow","newTable","WPTB_HeaderToolbox","wrapperQuery","topMargin","toggleToolboxVisibility","show","button","activateSection","buttonType","hideList","currentSection","hexToRgb","hex","result","rgbToHex","rgb","isHex","rgbm","toString","toUpperCase","round","test","icon_directory","protocol","hostname","img","src","wptbDropHandles","wptbDropBorderMarkers","linkHttpCheckChange","link","convertToAbs","origin","linkClean","linkArr","cls","parentElement","getSelectionText","getSelection","selection","elementOptionsPanelClear","elementOptionsGroup","wpColorPickerCheckChangeForTableStateSaving","originalEvent","irisStripMouseUpStateSaveManager","wpColorPickerClear","attribute","isId","input","parent","wpPickerContainer","newInput","results","decodeURIComponent","getTableId","getColumnWidth","xIndexes","getRowHeight","yIndexes","cellHeight","wpColorPickerChange","ui","uiColor","color","classe","number","affectedEl","ps","ratingStar","span","fill","numberImputSize","wptbNumberInputs","maxCount","maxValue","onkeydown","thisValue","String","substring","onkeyup","ucfirst","str","charAt","eventName","details","CustomEvent","bubbles","dispatchEvent","elementId","WPTB_ElementsScriptsLauncher","elementIdMatch","deleteEventHandlers","off","elementChildren","string","search","mceContentBodys","dataMceStyle","removeAttribute","mceEditFocus","contentEditable","spellCheck","mceIds","elementOptionContainerCustomClassSet","targetInput","customClassForContainer","containerElement","elementOptionContainerAdditionalStyles","containerAdditionalStyles","containerStylesArrOne","containerStylesSet","containerStyleStr","containerStyleStrArr","controlsInclude","functionHandler","acceptEventValues","controlConnectFunctionsName","name","elementKind","elementOptionsGroupIds","optionsGroupIds","elementOptionsGroupId","controlActiveElements","controlActiveElement","controlUnicClassName","regularText","controlInfArr","controls","controlName","control","targetControlValue","targetControlValueGet","targetValue","eventValue","oneControlInclude","jsonControlsConfig","controlClassName","wptbContrlStacksConfigId","jsonControlsConfigJson","tmplControlsConfig","container","innerElementCopyIncludeHandler","valueDependOnControl","dependOnControlName","targetControlElementClass","valueDependOnControlCorrect","dependOnControlDataGet","dependOnControlElements","valueDependOnControlCorrectObj","dependOnControlElementsArr","s","dependOnControlElementClass","dependOnControlData","Object","keys","forEach","unicClass","appearDependOnControl","dependOnMain","showHideTargetControlElement","controlContainerElem","dependOnControlElementsValue","targetControlInactiveVal","prototype","call","targetControlElements","controlActiveVal","dependOnControlElementValue","dependOn","returnBool","coincided","hasNumberAnyParams","targetControlElement","toggleSwitch","dataToggleSwitch","toggleSwitchExecute","dependOnParams","elems","checked","eventType","dependOnValue","bind","switchThirdToggleIf","dataSwitchThirdToggleIf","dependencyElemClass","dependencyElemVal","dependencyElem","dependencyParameters","dependentElemVal","dependentElemClass","dependentElems","dependentElem","console","log","controlsStateManager","targetControlClass","controlChangeIndic","targetControls","elementsSettings","elementSettings","elementsSettingsTemplatesJs","stringify","alignmentValue","elementControlsStateCopy","elementProt","copyElem","elemProtKind","elemCopyKind","elementSettingsProt","elementSettingsCopy","infArrProt","infArrCopy","elementsSettingsTemplateJs","elementSettingValue","elementSettingKeyCopy","elementControlsStateDelete","nameControl","wptbElementDatas","elementIdClassMatch","_wrapRegExp","cellId","_element$dataset","decisiveAttr","groups","elementContainerClass","elementOptionClassIndic","controlElementParent","elementOptionsScriptsContainer","editActionClassRemove","startsWith","wptbelementOptionClass","childNodes","controlsConfigJson","controlsConfig","elementOptionsGroupIdsInvolved","elementOptionsGroupInvolved","elementOptionsContainerInvolved","controlScriptsObj","controlappearDependOnControl","controltoggleSwitch","controlSwitchThirdToggleIf","controlValueDependOnControl","controlsConfigNew","controlKey","tmplControlTemplate","elemContainer","elementControlTargetUnicClass","controlParamCalculateValue","elementOptionsContainer","controlTemplate","elementOptionsGroupChildren","elementOptionsContainerOn","elementOptionContainerOn","elementOptionContainer","elementOptionClass","controlContainerElemParent","helperJavascriptElem","helperJavascriptCode","innerText","script","controlScriptsArr","editActiveElems","unicClassP","controlParamCalculateValueCreateFunction","handlerFunction","managerExternalCssStyles","elementContainer","selector","cssName","cssValue","cssForThisElement","cssText","cssTextArrFirst","pop","selectorExists","cssTextArrSecond","cssTextArrThird","cssNameExists","registerSections","sections","_this2","previousSection","sectionElement","sectionDataId","_this3","displayType","triggerSectionEvent","builderAdminContainer","wptbActiveSection","visibility","getCurrentSection","getSectionFromUrl","urlSection","URL","searchParams","some","setupSectionButtons","sectionButtons","vm","sectionName","wptbSectionButton","wptbSectionDisplayType","setupPanelToggleButtons","$","each","find","click","slideToggle","toggleClass","sectionEvent","setupSidebarToggle","toggleSelector","toggleButton","toggle","externalCssStylesDelete","externalCssStylesCopy","copyElement","activeElemClass","cssForNewElement","cssForActiveElement","infArrCopyEl","cssForActiveElementInnerHTML","cssForNewElementInnerHTML","elementsStylesConvertToObject","stylesElements","stylesObj","styleElemId","elementsStylesSetFromObject","jsonObject","styleCss","saveTable","startSaving","previewSaving","tableSaveIndicator","wptbTableStateNumberSave","wptbTableStateNumberShow","bar","toggleTableEditMode","tableClean","messagingArea","postId","wptb_admin_object","t","code","rs","wptbId","codeClone","datas","paramIdsNecessaryChange","columns","WPTB_Stringifier","outerHTML","datas_containers","styleObjJson","messagingAreaText","setTimeout","params","content","elements_datas","elements_styles","security_code","preview_saving","action","WPTB_NotificationManager","sendNotification","message","wptbPreviewBtn","wptbPreviewBtnHref","previewHref","wptbSaveBtn","builderPageUrl","history","pushState","clickOnFreeSpace","cellModeBackground","wpcdFixedToolbar","elementAjax","dataAjaxData","element_ajax_data","element_name","close","leftScrollPanelCurtain","leftScrollPanelCellSettings","wptbPreviewTable","builderPanel","toggleEditMode","deactivateMultipleSelectMode","wptbPreviewTableTds","manageCellsActive","activateMultipleSelectMode","checkingDimensionValue","dimension","searchIndex","checkSetGetStyleSizeValue","styleName","computedStyleName","elemStyleValue","elementStyles","checkSetGetStyleColorValue","set","elemStyleColorValue","checkSetGetStyleValue","getValueMaxCountSameElementsInArray","arr","maxPropName","check","countEmpty","recalculateIndexes","tableRowsColorsReinstall","tableHeaderBackground","tableEvenRowBackground","tableOddRowBackground","tableIndex","parentType","dragRelativeType","setDragRelativeType","getElementColorStylesHex","showControlsOnElementMount","showElementsListOnRemove","blockTinyMCE","addBlocker","blockerElement","haveChild","removeBlocker","calledByBlock","isTableClean","confirm","getTranslation","saveStatus","wptbSaving","tableGenerator","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","WptbResponsive","WPTB_ExtraStyles","subscribeToControl","WPTB_LeftPanel","wptbElementButtons","wptbElement","closeButton","wptbHeader","bgColors","normal","prepareMessage","prepareMessageStyle","messageType","selectedCells","multipleCellMode","isActivated","pushSelectedCell","flushSelectedCells","getFirst","minXIndex","minYIndex","getLast","last","maxXIndex","maxYIndex","removeAllButFirst","_context$wptb_admin_o","managerData","notificationManager","notificationOptions","options","defaults","parsedOptions","_objectSpread","setControlData","notificationTypes","queueTypes","revealTypes","dismissTypes","div","columnTitleMobile","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","obj","TypeError","prop","trs","maxColsFull","tdsArr","jMainIter","z","responsiveWrapperId","mainContainerQuery","responsiveTable","loaded","addContainerToDom","mainContainer","Error","responsiveElement","load","startUp","tablePreview","wptbRelativeElements","wptbTableStateSaveManager","wptbUndo","wptbUndoRedoContainer","tableStateGet","wptbUndoredo","wptbRedo","onbeforeunload","shortcodePopupWindow","previewId","newHref","floor","random","tableTitleField","onchange","thisObject","sortingCellMouseMov","xMatch","tagName","offsetX","layerX","clientHeight","sortingCellMouseMoveVertical","sortingCellMouseMoveHorizontal","tdMouseLeave","sortableTable","tableWasSorted","tableRowsBefore","tableRowsAfter","tableRowsArr","tableLastCont","rowspan","rowNum","rowsTdFirst","rowsValuesArr","tdYCoordsRowSpanPrevious","tableRowsPushed","tdsChanged","changeSortingTdsCollection","tdRowspan","textElementsValues","textElementsValuesGet","rowsTd","orderBy","setSortedAscDataAttr","sort","prev","next","sortOrder","unshift","trRef","tBody","rowsValObj","colspan","colNum","columnsTdFirst","columnsValuesArr","tdXCoordsColSpanPrevious","tdColspan","columnsTd","tdsColumn","difference","columnsValObj","tdsAll","removeCellsAttrAfterDivision","tableSM","reassignElementsStyles","dataAttr","prevValue","nextValue","textElements","tdIndexSpanPrev","collectionTdsJSpan","collectionTdsJSpanProperty","indexName","indexNameCamelCase","indexNamePerpendicularCamelCase","tableGroupCount","tdsCollectionChanged","tdSpanProperty","collectionTds","tdSpan","cellsStylesScheme","rowsStylesScheme","sortModeSwitcher","active","sortableTableVerticalStart","sortingCellMouseMoveSwitcher","wptbSortableTableVertical","createTableElementsStylesScheme","sortableTableHorizontalStart","wptbSortableTableHorizontal","tableObjectChange","start","elemSelector","elem","objectKey","elementsStylesScheme","elemStyles","sortableTableInitialization","sortModeSwitcherRun","switchModeObj","tableOld","sCMM","dataAttrSortChange","rowsLength","dataYIndexStart","codeMain","tableColumns","minWidth","innerElements","wptbActionsLength","dataMceBogus","array","wptb_preview_table","cs","noCells","singleCells","multipleCells","cellSettings","cellSelectOperation","cellElement","classListOperation","_getCoords","_getCoords2","position","isShiftActive","shiftKey","ele","cellHighlighted","markedCells","sizeName","getSizeFunctionName","size","elementControlSizeUnicClass","elementControlSizeFixedUnicClass","cellSizeInputs","cellSizeFixedInput","isSquare","settingId","settingElem","countMarkedCells","splitButton","drawTable","a","undoSelect","fillTableArray","colspansSums","colspanSumInRow","maxAmountOfCells","apply","maxAmountOfRows","skipInCols","cellsBuffer","xPosition","cellPointer","stepsToMove","reconstraction","insertRow","setMaxAmountOfCells","getMaxAmountOfCells","addColumnWidth","cleaner","highlighted","tableTdsFor","tableRows","widthIsSet","arrayTdsFromPreviousRow","wptbFixedWidth","tableTdsSumMaxWidth","tableTdsSumMaxWidthFixed","tableTdsSumMaxWidthAuto","wptbTableSetupWidth","arrayCellsWidthFixedHelper","arrayCellsWidthAutoHelper","tdPaddingCommon","tableTdBorderCommonWidth","cssForTdsWidthAuto","borderLeftWidth","borderRightWidth","tableBorderCommon","tableTdBorderLeftWidth","tableTdBorderRightWidth","wptbCssTdAutoWidth","wptbTdWidthAuto","CellsWidthAutoCount","wptbTableTdsSumMaxWidth","wptbCellsWidthAutoCount","merging–°ellsHorizontally","wptbFixedWidthSize","tableTdWidthAuto","styleElementCreate","cssForTdsWidthAutoOld","wptbTableAlignment","addRowHeight","dataYIndex","heightIsSet","arrayTdsPrevious","wptbFixedHeight","mergingCellsVertically","forBreak","addColumnEnd","currentTableTd","currentTdStyle","borderColor","WPTB_TableSettingsData","getTableSetting","addColumnStart","firstCell","addColumnAfter","c_pos","cellStyle","pos","newTd","nextSib","addColumnBefore","addRowToTheEnd","aux","r","addRowToTheStart","addRowBefore","cellNew","addRowAfter","rowAfter","cellsColSpan","tableRIChildrenLength","rNextChildren","rNextChildrenLength","rowStart","columnStart","rowEnd","columnEnd","items","mergeCells","dimensions","tdsChildrenNew","tdsInternalElements","tdsIntElemLength","firstWidth","firstDataFixedWidth","firstHeight","firstDataFixedHeight","splitCell","cellStyles","cellXIndex","rowChildInsertBefore","rowNext","findRowspannedCells","actualPoints","points","getActualPointsInRow","addLackingCells","sumRows","totalColspan","deleteRow","thisRowChildren","nextRow","nextRowChildren","tdArr","nextRowChildrenLength","nextRowChildrenK","jRowChildren","deleteColumn","onresize","setTableSetting","generate","wptbTableStateSaving","wptbNewTableSetup","wptbHighlighted","wptbDirectlyhovered","cssForTdsWidthAutoValue","wptbTableTitle","wptbSetupName","datawptbUndoredo","wptbLeftScrollPanelCellSetting","wptbTableSetupNew","tableStateClear","dummyWrapper","upsellContainer","upsells","pro","leftPanel","classId","onmouseover","WPTB_ElementIdProvider","newDataAttributeName","newDataAttributeValue","wptbNodeattributes","attributes","attr","nodeValue","kindIndexProtArr","node_wptb_element_kind_num","onmouseenter","elemChild","wptbActionsField","list","prepareIcon","iconSvgString","extraClass","stringifiedVersion","iconWrapper","eClass","iconList","cachedIcons","getIconList","iconName","getStringifiedVersion","Promise","res","rej","cachedIcon","getCachedIcon","fetch","resp","ok","iconString","error","stringifiedIcon","err","getIconUrl","iconUrl","iconManager"],"mappings":"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","file":"admin.js","sourcesContent":["var WPTB_ActionsField = function() {\n    //this.wptbBorderMarker;\n    this.wptbActions;\n    if( document.getElementsByClassName( 'wptb-actions' ).length != 0 ) {\n        this.wptbActions = document.getElementsByClassName( 'wptb-actions' )[0];\n    }\n\n    this.addActionField = ( actionType, thisNode ) => {\n        let body = document.getElementsByTagName( 'body' )[0];\n\n        let actions = document.getElementsByClassName( 'wptb-actions' );\n        if( actions.length != 0 ) {\n            let previousNode = actions[0].activeElem;\n            if( previousNode ) {\n                previousNode.classList.remove( 'wptb-directlyhovered' );\n            }\n\n            while( actions.length != 0 ) {\n                actions[0].parentNode.removeChild( actions[0] );\n            }\n        }\n\n        if( actionType == 1 ) {\n\n            let btnDelete, btnCopy;\n\n            btnDelete = document.createElement( 'span' ),\n            btnCopy = document.createElement( 'span' ),\n            actions = document.createElement( 'div' );\n\n            actions.classList.add( 'wptb-actions' );\n            btnDelete.classList.add( 'dashicons', 'dashicons-trash', 'wptb-delete-action' );\n            btnCopy.classList.add( 'dashicons', 'dashicons-admin-page', 'wptb-duplicate-action' );\n\n            actions.appendChild( btnCopy );\n            actions.appendChild( btnDelete );\n\n            body.appendChild( actions );\n\n            actions.activeElem = thisNode;\n\n            actions.type = 1;\n\n            btnDelete.onclick = function( event ) {\n                let act = event.target.parentNode.activeElem,\n                    el = act.parentNode;\n                let infArr = act.className.match( /wptb-element-(.+)-(\\d+)/i );\n//                if( act && infArr && Array.isArray( infArr ) ) {\n//                    WPTB_Helper.elementControlsStateDelete( act );\n//                    WPTB_Helper.externalCssStylesDelete( infArr[0] );\n//                }\n\n                if( act ) {\n                    el.removeChild( act );\n                }\n\n                if( act && typeof act === 'object' && act.hasOwnProperty( 'kind' ) && act.kind == 'text' ) {\n                    let thisRow = el.parentNode;\n\n                    if( WPTB_Helper.rowIsTop( thisRow ) ) {\n                        let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n\n                        if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                            WPTB_Helper.dataTitleColumnSet( table );\n                        }\n                    }\n                }\n\n                let wptbActionsField = new WPTB_ActionsField();\n                wptbActionsField.actionsRemove();\n\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n\n                WPTB_Helper.wptbDocumentEventGenerate('element:removed:dom', document, act);\n            };\n\n            btnCopy.onclick = ( event ) => {\n                let copy,\n                    infArr,\n                    type;\n                let activeElement = event.target.parentNode.activeElem;\n                let activeElemParent = activeElement.parentNode;\n                infArr = activeElement.className.match( /wptb-element-(.+)-(\\d+)/i );\n                if( infArr && Array.isArray( infArr ) ) {\n                    type = infArr[1];\n                    let data = {};\n                    data.kind = type;\n                    data.elemProt = activeElement;\n                    data.tinyMceClear = true;\n                    copy = new WPTB_ElementObject( data );\n                    //WPTB_Helper.elementControlsStateCopy( activeElement, copy.getDOMElement() );\n                    //WPTB_Helper.externalCssStylesCopy( activeElement, copy.getDOMElement() );\n                    //WPTB_Helper.elementStartScript( copy.getDOMElement() );\n                    copy.getDOMElement().classList.remove('edit-active');\n                    activeElemParent.insertBefore( copy.getDOMElement(), activeElement.nextSibling );\n                } else {\n                    copy = {};\n                    let elementCopy = activeElement.cloneNode( true );\n                    elementCopy.classList.remove( 'wptb-directlyhovered' );\n\n                    copy.getDOMElement = function() {\n                        return elementCopy;\n                    }\n\n                    applyGenericItemSettings( copy );\n\n                    activeElemParent.insertBefore( copy.getDOMElement(), activeElement.nextSibling );\n\n                    WPTB_Helper.wptbDocumentEventGenerate( 'wptb-inner-element:copy', activeElement, copy.getDOMElement() );\n                }\n\n                WPTB_innerElementSet( copy.getDOMElement() );\n\n                let wptbActionsField = new WPTB_ActionsField( 1, activeElement );\n                wptbActionsField.setParameters( activeElement );\n\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n            };\n\n\n            if( thisNode.classList.contains( 'wptb-ph-element' ) ) {\n                let btnMove;\n                btnMove = document.createElement( 'span' );\n                btnMove.classList.add( \"dashicons\", \"dashicons-move\", 'wptb-move-action' );\n                btnMove.draggable = true;\n                actions.appendChild( btnMove );\n\n                btnMove.ondragstart = ( event ) => {\n                    let wptbElementIconsDirectories = 'wptb-element-icons-directories';\n                    let tmplIconsDirectories = wp.template( wptbElementIconsDirectories );\n                    let data = {};\n                    let jsonIconsDirectories = tmplIconsDirectories( data );\n                    let IconsDirectories = JSON.parse( jsonIconsDirectories );\n\n                    let dragImages,\n                        actions = event.target.parentNode,\n                        activeElem = actions.activeElem,\n                        infArr,\n                        type;\n                    infArr = activeElem.className.match( /wptb-element-(.+)-(\\d+)/i );\n                    if( infArr && Array.isArray( infArr ) ) {\n                        type = infArr[1];\n                        activeElem.classList.add( 'wptb-moving-mode' );\n\n                        if( IconsDirectories && typeof IconsDirectories === 'object' && IconsDirectories[type] ) {\n                            dragImages =  WPTB_Helper.getElementIcon( IconsDirectories[type] );\n                        }\n\n                        event.dataTransfer.effectAllowed = 'move';\n                        event.dataTransfer.setDragImage( dragImages, 0, 0 );\n                        event.dataTransfer.setData( 'node', 'wptb-element-' + infArr[1] + '-' + infArr[2] );\n                        event.dataTransfer.setData( 'wptb-moving-mode', 'wptb-element-' + infArr[1] + '-' + infArr[2] );\n                        event.dataTransfer.setData( 'wptbElIndic-' + infArr[1], 'wptbElIndic-' + infArr[1] );\n                        let act = event.target.parentNode.activeElem;\n                        if( act.kind == 'text' ) {\n                            let thisRow = act.parentNode.parentNode;\n\n                            if( WPTB_Helper.rowIsTop( thisRow ) ) {\n                                let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n\n                                if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                                    WPTB_Helper.dataTitleColumnSet( table );\n                                }\n                            }\n                        }\n                    } else {\n                        this.style.display = 'none';\n                    }\n\n                    this.actionsHide();\n                };\n\n                btnMove.ondragend = ( event ) => {\n                    WPTB_Helper.elementDragEndClear();\n                }\n            }\n\n            actions.style.display = 'flex';\n\n            this.wptbActions = actions;\n        }\n\n        WPTB_Helper.wptbDocumentEventGenerate('wptb:actionfield:generated', document);\n    }\n\n    this.setParameters = ( thisNode ) => {\n\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            } else {\n                this.wptbActions = false;\n            }\n        }\n\n        if( this.wptbActions && this.wptbActions.classList.contains( 'wptb-actions' ) ) {\n            this.wptbActions.style.display = 'flex';\n        } else {\n            return;\n        }\n\n        let coordinatesElement = thisNode.getBoundingClientRect();\n\n        let wptbContainer = document.getElementsByClassName( 'wptb-container' )[0];\n        let correctTop = () => {\n            let coordinatesElement = thisNode.getBoundingClientRect();\n            this.wptbActions.style.top = parseFloat( coordinatesElement.top ) - 15 + 'px';\n        }\n        //wptbContainer.removeEventListener( 'scroll', correctTop, false );\n\n        this.wptbActions.style.top = parseFloat( coordinatesElement.top ) - 15 + 'px';\n        this.wptbActions.style.left = ( parseFloat( coordinatesElement.right ) - parseFloat( this.wptbActions.clientWidth ) ) + 1 + 'px';\n\n        this.wptbActions.style.display = 'flex';\n        thisNode.classList.add( 'wptb-directlyhovered' );\n\n        //wptbContainer.addEventListener( 'scroll', correctTop, false );\n        wptbContainer.onscroll = correctTop;\n    }\n\n    this.leaveFromField = ( event, node, actionType ) => {\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            } else {\n                this.wptbActions = false;\n            }\n        }\n\n        if( ! this.wptbActions ) {\n            return;\n        }\n\n        if( event.relatedTarget ) {\n            if ( event.relatedTarget.classList.contains( 'wptb-actions' ) ||\n                event.relatedTarget.classList.contains( 'wptb-move-action' ) ||\n                event.relatedTarget.classList.contains( 'wptb-duplicate-action' ) ||\n                event.relatedTarget.classList.contains( 'wptb-delete-action' )  || event.relatedTarget.classList.contains( 'wptb-prebuilt-mark-action' ) )\n            {\n                if( ! this.wptbActions ) {\n                    this.wptbActions = document.getElementsByClassName( 'wptb-actions' )[0];\n                }\n                this.wptbActions.onmouseleave = ( event ) => {\n                    if( event.relatedTarget != null && ( event.relatedTarget.classList.contains( 'wptb-ph-element' ) ||\n                            WPTB_Helper.findAncestor( event.relatedTarget, 'wptb-ph-element') ) && event.relatedTarget != this.wptbActions.activeElem &&\n                        WPTB_Helper.findAncestor( event.relatedTarget, 'wptb-directlyhovered' ) != this.wptbActions.activeElem ) {\n\n//                        this.wptbActions.style.display = 'none';\n//                        event.relatedTarget.parentNode.parentNode.classList.remove( 'wptb-directlyhovered' );\n//\n//                        let wptbActionsField = new WPTB_ActionsField();\n//\n//                        wptbActionsField.addActionField( 1, event.relatedTarget.parentNode.parentNode );\n//\n//                        wptbActionsField.setParameters( event.relatedTarget.parentNode.parentNode );\n                    } else {\n\n                    }\n\n                    let wptbActionsField = new WPTB_ActionsField();\n\n                    wptbActionsField.leaveFromField( event, event.relatedTarget.parentNode.parentNode );\n\n                    event.target.activeElem.classList.remove( 'wptb-directlyhovered' );\n                }\n\n                return;\n            }\n        }\n\n        node.classList.remove( 'wptb-directlyhovered' );\n        this.wptbActions.style.display = 'none';\n\n        if( event.relatedTarget ) {\n            if( event.relatedTarget.classList.contains( 'wptb-ph-element' ) || WPTB_Helper.findAncestor( event.relatedTarget, 'wptb-ph-element' ) ) {\n                this.addActionField( 1, event.relatedTarget.parentNode );\n\n                this.setParameters( event.relatedTarget.parentNode );\n            }\n        }\n    }\n\n    this.actionsRemove = () => {\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            }\n        }\n\n        if( this.wptbActions ) {\n            this.wptbActions.parentNode.removeChild( this.wptbActions );\n        }\n    }\n\n    this.actionsHide = () => {\n        if( ! this.wptbActions ) {\n            let actions = document.getElementsByClassName( 'wptb-actions' );\n            if( actions.length > 0 ) {\n                this.wptbActions = actions[0];\n            }\n        }\n\n        if( this.wptbActions ) {\n            this.wptbActions.style.opacity = 0;\n        }\n    }\n}\n","/**\n * UMD for background menu setup.\n */\n(function umd(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_BackgroundMenu', self || global, function wptbBackgroundMenuSetup() {\n\t/**\n\t * Background menu component.\n\t *\n\t * @class\n\t */\n\tfunction BackgroundMenu() {\n\t\t// whether setup operation done or not\n\t\tthis.initialized = false;\n\n\t\t// flux store that will be used with menu\n\t\tlet store = null;\n\n\t\t/**\n\t\t * Get current active table on builder.\n\t\t *\n\t\t * @return {HTMLElement | null} found active table\n\t\t */\n\t\tconst getCurrentTable = () => {\n\t\t\treturn document.querySelector('.wptb-table-setup .wptb-preview-table');\n\t\t};\n\n\t\t/**\n\t\t * Get selector toolbox element.\n\t\t *\n\t\t * @return {Element | undefined} selector toolbox\n\t\t */\n\t\tconst getSelectorToolbox = () => {\n\t\t\treturn document.querySelector('.wptb-bg-color-selectors');\n\t\t};\n\n\t\t/**\n\t\t * Get background specific options from table attributes.\n\t\t */\n\t\tconst parseOptionsFromTable = () => {\n\t\t\tconst currentTable = getCurrentTable();\n\n\t\t\tconst headerBg = currentTable.dataset.wptbHeaderBackgroundColor;\n\t\t\tconst evenBg = currentTable.dataset.wptbEvenRowBackgroundColor;\n\t\t\tconst oddBg = currentTable.dataset.wptbOddRowBackgroundColor;\n\n\t\t\treturn {\n\t\t\t\trow: {\n\t\t\t\t\theaderBg,\n\t\t\t\t\tevenBg,\n\t\t\t\t\toddBg,\n\t\t\t\t},\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Apply color value to element.\n\t\t *\n\t\t * @param {string | null} colorVal color value\n\t\t * @param {Element} element html element\n\t\t */\n\t\tconst applyColor = (colorVal, element) => {\n\t\t\tif (colorVal === '' || colorVal === null) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\telement.style.removeProperty('background-color');\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\telement.style.backgroundColor = colorVal;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Row specific operations.\n\t\t *\n\t\t * @param {Object} rowOptions row options object\n\t\t * @param {string} rowOptions.headerBg header color\n\t\t * @param {string} rowOptions.evenBg even row color\n\t\t * @param {string} rowOptions.oddBg odd row color\n\t\t */\n\t\tconst rowOperations = ({ headerBg, evenBg, oddBg }) => {\n\t\t\tconst currentTable = getCurrentTable();\n\n\t\t\tconst [header, ...rest] = Array.from(currentTable.querySelectorAll('tr'));\n\n\t\t\t// apply header row color\n\t\t\tapplyColor(headerBg, header);\n\n\t\t\t// apply even/odd row color\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\trest.map((row, index) => {\n\t\t\t\t// ruleset to decide whether row has a custom bg color applied or not\n\t\t\t\tconst customBgColorRuleSet = ['', null, undefined];\n\t\t\t\tconst customBgColor = row.dataset.wptbBgColor;\n\t\t\t\tconst hasCustomBgColor = !customBgColorRuleSet.includes(customBgColor);\n\n\t\t\t\t// eslint-disable-next-line no-param-reassign,no-nested-ternary\n\t\t\t\trow.style.backgroundColor = hasCustomBgColor ? customBgColor : index % 2 === 0 ? evenBg : oddBg;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Apply background options to table.\n\t\t *\n\t\t * @param {null | Object} suppliedOptions options object, if supplied, these options will be used instead of parsing from table itself\n\t\t */\n\t\tthis.applyOptions = (suppliedOptions = null) => {\n\t\t\tconst { row: rowOptions } = suppliedOptions || parseOptionsFromTable();\n\n\t\t\trowOperations(rowOptions);\n\t\t};\n\n\t\t/**\n\t\t * Remove all highlight visuals from cells.\n\t\t */\n\t\tconst removeHighlights = () => {\n\t\t\t// remove any active highlighted cells\n\t\t\tconst allCells = Array.from(getCurrentTable().querySelectorAll('td'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tallCells.map((cell) => {\n\t\t\t\tcell.classList.remove('wptb-highlighted');\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Extracted cell highlight logic to use with other parts of component.\n\t\t *\n\t\t * @param {Element} targetElement target element\n\t\t * @param {boolean} multiSelection is multi selection active, multi selection should be enabled for elements after the first selected one onwards\n\t\t */\n\t\tconst highlightCellLogic = (targetElement, multiSelection = false) => {\n\t\t\tconst currentTargetType = targetElement.nodeName.toLowerCase();\n\n\t\t\tif (!multiSelection) {\n\t\t\t\tremoveHighlights();\n\t\t\t}\n\n\t\t\t// only add highlight style to table cell elements\n\t\t\tif (currentTargetType !== 'td') {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\ttargetElement = targetElement.parentNode;\n\t\t\t}\n\n\t\t\ttargetElement.classList.add('wptb-highlighted');\n\t\t};\n\n\t\t/**\n\t\t * Highlight selected data cell element.\n\t\t *\n\t\t * @param {Event} event click event\n\t\t */\n\t\tconst highlightCell = (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst currentTargetType = event.target.nodeName.toLowerCase();\n\n\t\t\tlet targetElement = event.target;\n\n\t\t\tif (currentTargetType !== 'td') {\n\t\t\t\ttargetElement = event.target.parentNode;\n\t\t\t}\n\n\t\t\thighlightCellLogic(targetElement);\n\n\t\t\tstore.commit('setMenuSelectedTableElement', { type: store.state.types.selected.cell, item: targetElement });\n\t\t};\n\n\t\t/**\n\t\t * Get column selection element.\n\t\t *\n\t\t * @return {Element} row selection element\n\t\t */\n\t\tconst getColumnSelector = () => {\n\t\t\tconst rowSelectionClass = '.wptb-col-selection';\n\t\t\treturn document.querySelector(rowSelectionClass);\n\t\t};\n\n\t\t/**\n\t\t * Get column rail element\n\t\t *\n\t\t * @return {Element} column rail element\n\t\t */\n\t\tconst getColumnRail = () => {\n\t\t\treturn document.querySelector('.wptb-bg-color-selectors .wptb-bg-column-rail');\n\t\t};\n\n\t\t/**\n\t\t * Get row rail element\n\t\t *\n\t\t * @return {Element} row rail element\n\t\t */\n\t\tconst getRowRail = () => {\n\t\t\treturn document.querySelector('.wptb-bg-color-selectors .wptb-bg-row-rail');\n\t\t};\n\n\t\t/**\n\t\t * Get column selection element.\n\t\t *\n\t\t * @return {Element} column selection element\n\t\t */\n\t\tconst getRowSelector = () => {\n\t\t\tconst columnSelectionClass = '.wptb-row-selection';\n\t\t\treturn document.querySelector(columnSelectionClass);\n\t\t};\n\n\t\t/**\n\t\t * Handle mouse over event for table rows.\n\t\t *\n\t\t * @param {Event} event event object\n\t\t */\n\t\tconst rowMouseEnter = (event) => {\n\t\t\t// update hovered row element on store\n\t\t\tstore.commit('updateHoveredRowElement', event.target);\n\t\t};\n\n\t\t/**\n\t\t * Handle mouse over event for table cells.\n\t\t *\n\t\t * @param {Event} event event object\n\t\t */\n\t\tconst cellMouseEnter = (event) => {\n\t\t\tconst targetElement = event.target;\n\n\t\t\t// find index of cell element relative to its container row element\n\t\t\tconst index = Array.from(targetElement.parentNode.querySelectorAll('td')).reduce(\n\t\t\t\t(carry, current, cellIndex) => {\n\t\t\t\t\treturn current === targetElement ? cellIndex : carry;\n\t\t\t\t},\n\t\t\t\t-1\n\t\t\t);\n\n\t\t\t// update hovered cell element on store\n\t\t\tstore.commit('updateHoveredCellElement', { element: targetElement, index });\n\t\t};\n\n\t\t/**\n\t\t * Get all cells at the given column index.\n\t\t *\n\t\t * @param {number | string} columnIndex column index\n\t\t */\n\t\tconst getCellsAtColumnIndex = (columnIndex) => {\n\t\t\t// parse index to an integer if its type is not a number\n\t\t\tconst parsedIndex = typeof columnIndex === 'number' ? columnIndex : Number.parseInt(columnIndex, 10);\n\n\t\t\tconst cells = [];\n\t\t\t// eslint-disable-next-line no-restricted-globals\n\t\t\tif (!isNaN(parsedIndex)) {\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\tArray.from(getCurrentTable().querySelectorAll('tr')).map((row) => {\n\t\t\t\t\tconst [cellAtIndex] = Array.from(row.querySelectorAll('td')).splice(parsedIndex, 1);\n\n\t\t\t\t\t// only push the cell to found ones if there is a cell at the given index\n\t\t\t\t\tif (cellAtIndex) {\n\t\t\t\t\t\tcells.push(cellAtIndex);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn cells;\n\t\t};\n\n\t\t/**\n\t\t * Calculate row selector position relative to supplied table row element.\n\t\t *\n\t\t * @param {Element} targetRow target row element\n\t\t */\n\t\tconst rowSelectorPosition = (targetRow) => {\n\t\t\tconst { y: parentY } = document.querySelector('.wptb-table-setup').getBoundingClientRect();\n\t\t\tconst { height, y } = targetRow.getBoundingClientRect();\n\n\t\t\tconst rowSelector = getRowSelector();\n\t\t\trowSelector.classList.add('wptb-bg-selection-visible');\n\t\t\trowSelector.style.height = `${height}px`;\n\t\t\trowSelector.style.top = `${y - parentY}px`;\n\n\t\t\t// @deprecated\n\t\t\t// // since row selector is hidden with 'display: none' css rule, should get its size values after it becomes visible\n\t\t\t// const { width: selectorWidth } = getRowSelector().getBoundingClientRect();\n\t\t\t// rowSelector.style.left = `${x - parentX - selectorWidth}px`;\n\t\t};\n\n\t\t/**\n\t\t * Calculate position of column selector element.\n\t\t *\n\t\t * @param {number | string} index index of the column relative to current table\n\t\t */\n\t\tconst columnSelectorPosition = (index) => {\n\t\t\tconst cellsAtIndex = getCellsAtColumnIndex(index);\n\n\t\t\tif (cellsAtIndex.length > 0) {\n\t\t\t\tconst colSelector = getColumnSelector();\n\n\t\t\t\t// select the cell width lowest width value to use as a pivot point\n\t\t\t\tconst cellToUse = cellsAtIndex.reduce((carry, cell) => {\n\t\t\t\t\treturn carry.offsetWidth > cell.offsetWidth ? cell : carry;\n\t\t\t\t}, cellsAtIndex[0]);\n\n\t\t\t\tconst { x: parentX } = document.querySelector('.wptb-table-setup').getBoundingClientRect();\n\t\t\t\tconst { width, x } = cellToUse.getBoundingClientRect();\n\n\t\t\t\tcolSelector.classList.add('wptb-bg-selection-visible');\n\t\t\t\tcolSelector.style.left = `${x - parentX}px`;\n\t\t\t\t// colSelector.style.top = `${-colSelector.offsetHeight}px`;\n\t\t\t\tcolSelector.style.width = `${width}px`;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Create rail mark element.\n\t\t *\n\t\t * @return {HTMLDivElement} rail mark element\n\t\t */\n\t\tconst createRailMark = () => {\n\t\t\tconst railMark = document.createElement('div');\n\t\t\trailMark.classList.add('wptb-bg-rail-mark');\n\t\t\treturn railMark;\n\t\t};\n\n\t\t/**\n\t\t * Add column marks to selector rail.\n\t\t *\n\t\t * @param {Element} columnRailElement column rail element\n\t\t */\n\t\tconst addColumnMarksToRail = (columnRailElement) => {\n\t\t\t// clear rail from all previous mark elements\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tArray.from(columnRailElement.querySelectorAll('.wptb-bg-rail-mark')).map((mark) => {\n\t\t\t\tmark.remove();\n\t\t\t});\n\n\t\t\tconst currentTable = getCurrentTable();\n\t\t\t// find row with most columns to use an index\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tconst indexRow = Array.from(currentTable.querySelectorAll('tr')).reduce((carry, item) => {\n\t\t\t\tif (carry === null) {\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t\tconst currentRowCellCount = item.querySelectorAll('td').length;\n\t\t\t\tconst carryRowCellCount = carry.querySelectorAll('td').length;\n\n\t\t\t\treturn currentRowCellCount > carryRowCellCount ? item : carry;\n\t\t\t}, null);\n\n\t\t\t// get required position data for each cell element at our index row, this position data will be used to put rails on correct places to be in sync with columns\n\t\t\tconst indexRowCellData = Array.from(indexRow.querySelectorAll('td')).map((cell) => {\n\t\t\t\tconst { x, width } = cell.getBoundingClientRect();\n\t\t\t\treturn { cellX: x, cellWidth: width };\n\t\t\t});\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tindexRowCellData.map((cellDataObject, index) => {\n\t\t\t\t// create a new rail mark element and update its properties\n\t\t\t\tconst railMark = createRailMark();\n\t\t\t\trailMark.style.width = `${cellDataObject.cellWidth}px`;\n\t\t\t\trailMark.addEventListener('click', (event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tstore.commit('updateHoveredCellElement', { element: null, index });\n\t\t\t\t});\n\t\t\t\tcolumnRailElement.appendChild(railMark);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Add row marks to selector rail.\n\t\t *\n\t\t * @param {Element} rowRailElement row rail element\n\t\t */\n\t\tconst addRowMarksToRail = (rowRailElement) => {\n\t\t\t// clear any rail mark available within row rail element\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tArray.from(rowRailElement.querySelectorAll('.wptb-bg-rail-mark')).map((mark) => {\n\t\t\t\tmark.remove();\n\t\t\t});\n\n\t\t\t// get position data for row elements in current table\n\t\t\tconst rowsPositionsObject = Array.from(getCurrentTable().querySelectorAll('tr')).map((row) => {\n\t\t\t\tconst { height } = row.getBoundingClientRect();\n\n\t\t\t\treturn { element: row, rowHeight: height };\n\t\t\t});\n\n\t\t\trowsPositionsObject.map((rowPositionObject) => {\n\t\t\t\t// create a rail mark element and update its properties\n\t\t\t\tconst railMark = createRailMark();\n\t\t\t\trailMark.style.height = `${rowPositionObject.rowHeight}px`;\n\t\t\t\trailMark.addEventListener('click', (event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tstore.commit('updateHoveredRowElement', rowPositionObject.element);\n\t\t\t\t});\n\n\t\t\t\t// add rail mark to row rail element\n\t\t\t\trowRailElement.appendChild(railMark);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Calculate rail positions.\n\t\t *\n\t\t * This function will calculate main component position and also fill up rail with column marks.\n\t\t */\n\t\tconst calculateRailPositions = () => {\n\t\t\tconst currentTable = getCurrentTable();\n\n\t\t\tconst { width: tableWidth, height: tableHeight } = currentTable.getBoundingClientRect();\n\n\t\t\t// column rail position calculations\n\t\t\tconst columnRail = getColumnRail();\n\t\t\tconst { height: columnRailHeight } = columnRail.getBoundingClientRect();\n\t\t\tcolumnRail.style.top = `-${columnRailHeight}px`;\n\t\t\tcolumnRail.style.width = `${tableWidth}px`;\n\t\t\t// add rail marks to column rail\n\t\t\taddColumnMarksToRail(columnRail);\n\n\t\t\t// row rail position calculations\n\t\t\tconst rowRail = getRowRail();\n\t\t\tconst { width: rowRailWidth } = rowRail.getBoundingClientRect();\n\t\t\trowRail.style.left = `-${rowRailWidth}px`;\n\t\t\trowRail.style.height = `${tableHeight}px`;\n\t\t\t// add rail marks to column rail\n\t\t\taddRowMarksToRail(rowRail);\n\t\t};\n\n\t\t/**\n\t\t * Selecting an entire row operation handler.\n\t\t */\n\t\tconst selectRow = () => {\n\t\t\tconst currentActiveRow = store.getters.hoveredRow;\n\n\t\t\tif (currentActiveRow) {\n\t\t\t\tconst [first, ...rest] = Array.from(currentActiveRow.querySelectorAll('td'));\n\n\t\t\t\t// don't activate multi highlight for first element to clear any previous highlighted cell\n\t\t\t\thighlightCellLogic(first);\n\n\t\t\t\t// activate multi highlight for the rest\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\trest.map((cell) => {\n\t\t\t\t\thighlightCellLogic(cell, true);\n\t\t\t\t});\n\n\t\t\t\tstore.commit('setMenuSelectedTableElement', {\n\t\t\t\t\ttype: store.getters.types.selected.row,\n\t\t\t\t\titem: currentActiveRow,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Select cells of an entire column.\n\t\t *\n\t\t * This function will use store index value to determine which column to use.\n\t\t */\n\t\tconst selectColumn = () => {\n\t\t\tconst { index } = store.getters.hoveredCell;\n\n\t\t\tif (index !== null) {\n\t\t\t\tconst [first, ...rest] = getCellsAtColumnIndex(index);\n\t\t\t\thighlightCellLogic(first);\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\trest.map((cell) => {\n\t\t\t\t\thighlightCellLogic(cell, true);\n\t\t\t\t});\n\n\t\t\t\tstore.commit('setMenuSelectedTableElement', {\n\t\t\t\t\ttype: store.getters.types.selected.column,\n\t\t\t\t\titem: [first, ...rest],\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Add a container that will contain row and column selectors.\n\t\t */\n\t\tconst addSelectorToolbox = () => {\n\t\t\t// main toolbox wrapper\n\t\t\tconst toolbox = document.createElement('div');\n\t\t\ttoolbox.classList.add('wptb-bg-color-selectors');\n\n\t\t\t// row rail\n\t\t\tconst rowRail = document.createElement('div');\n\t\t\trowRail.classList.add('wptb-bg-row-rail');\n\n\t\t\t// row selector\n\t\t\tconst rowSelector = document.createElement('div');\n\t\t\trowSelector.classList.add('wptb-row-selection', 'wptb-bg-selection-item');\n\t\t\trowSelector.title = 'Select row';\n\t\t\tWPTB_IconManager.getIcon('arrow-alt-circle-right', 'wptb-selector-icon-wrapper').then((icon) => {\n\t\t\t\trowSelector.appendChild(icon);\n\t\t\t});\n\n\t\t\t// column rail\n\t\t\tconst columnRail = document.createElement('div');\n\t\t\tcolumnRail.classList.add('wptb-bg-column-rail');\n\n\t\t\t// column selector\n\t\t\tconst colSelector = document.createElement('div');\n\t\t\tcolSelector.classList.add('wptb-col-selection', 'wptb-bg-selection-item');\n\t\t\tcolSelector.title = 'Select column';\n\t\t\tWPTB_IconManager.getIcon('arrow-alt-circle-down', 'wptb-selector-icon-wrapper').then((icon) => {\n\t\t\t\tcolSelector.appendChild(icon);\n\t\t\t});\n\n\t\t\t// add column selector click event\n\t\t\tcolSelector.addEventListener('click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tselectColumn();\n\t\t\t});\n\n\t\t\t// add row selector to column rail\n\t\t\trowRail.appendChild(rowSelector);\n\t\t\t// add column selector to column rail\n\t\t\tcolumnRail.appendChild(colSelector);\n\t\t\t// add column rail to toolbox\n\t\t\ttoolbox.appendChild(columnRail);\n\t\t\t// add row rail to toolbox\n\t\t\ttoolbox.appendChild(rowRail);\n\n\t\t\t// add toolbox element to its parent container\n\t\t\tdocument.querySelector('.wptb-builder-content .wptb-table-setup').appendChild(toolbox);\n\t\t};\n\n\t\t/**\n\t\t * Assign row select handlers for current table.\n\t\t */\n\t\tconst assignRowClickHandler = () => {\n\t\t\tconst rowSelector = getRowSelector();\n\n\t\t\trowSelector.addEventListener('click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tselectRow();\n\t\t\t});\n\n\t\t\tconst rows = Array.from(getCurrentTable().querySelectorAll('tr'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\trows.map((row) => {\n\t\t\t\trow.addEventListener('mouseenter', rowMouseEnter);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Set visibility of selector toolbox.\n\t\t *\n\t\t * @param {boolean} visible visibility state\n\t\t */\n\t\tconst selectorToolboxVisibility = (visible = true) => {\n\t\t\tconst toolbox = getSelectorToolbox();\n\n\t\t\tif (toolbox) {\n\t\t\t\tgetSelectorToolbox().dataset.visible = visible;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Remove row related event listeners and handlers\n\t\t */\n\t\tconst removeRowHandlers = () => {\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tArray.from(getCurrentTable().querySelectorAll('tr')).map((row) => {\n\t\t\t\t// remove event listener for each row element on table\n\t\t\t\trow.removeEventListener('mouseenter', rowMouseEnter);\n\t\t\t});\n\n\t\t\t// @deprecated\n\t\t\t// const rowSelector = getRowSelector();\n\t\t\t// if (rowSelector) {\n\t\t\t// \t// hide row selector element if any found\n\t\t\t// \trowSelector.classList.remove('wptb-bg-selection-visible');\n\t\t\t// }\n\n\t\t\t// clear up last hovered row element value\n\t\t\tstore.commit('updateHoveredRowElement', null);\n\t\t};\n\n\t\t/**\n\t\t * Assign cell click handlers to data cells.\n\t\t */\n\t\tconst assignCellClickHandlers = () => {\n\t\t\tconst cells = Array.from(getCurrentTable().querySelectorAll('td'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tcells.map((cell) => {\n\t\t\t\tcell.addEventListener('click', highlightCell);\n\t\t\t\tcell.addEventListener('mouseenter', cellMouseEnter);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Remove cell click handlers from data cells.\n\t\t */\n\t\tconst removeCellHandlers = () => {\n\t\t\tconst cells = Array.from(getCurrentTable().querySelectorAll('td'));\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tcells.map((cell) => {\n\t\t\t\tcell.removeEventListener('click', highlightCell);\n\t\t\t\tcell.removeEventListener('mouseenter', cellMouseEnter);\n\t\t\t});\n\n\t\t\t// hide column selector element\n\t\t\tgetColumnSelector().classList.remove('wptb-bg-selection-visible');\n\t\t};\n\n\t\t/**\n\t\t * Clear specific states from store.\n\t\t */\n\t\tconst clearStates = () => {\n\t\t\tstore.dispatch('clearSelection');\n\t\t\tstore.dispatch('clearHoverStates');\n\t\t};\n\t\t/**\n\t\t * Clear out hover,edit active etc indicators that might have been stated on table.\n\t\t */\n\t\tconst clearTableIndicators = () => {\n\t\t\tconst currentTable = getCurrentTable();\n\n\t\t\t// remove active edit indicators\n\t\t\tArray.from(currentTable.querySelectorAll('.edit-active')).map((el) => {\n\t\t\t\tel.classList.remove('edit-active');\n\t\t\t});\n\n\t\t\t// hide element hover toolbox\n\t\t\tconst elementActionsToolbox = document.querySelector('.wptb-actions');\n\t\t\tif (elementActionsToolbox) {\n\t\t\t\telementActionsToolbox.style.display = 'none';\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Startup positions for selectors.\n\t\t */\n\t\tconst startUpPositionsForSelectors = () => {\n\t\t\t// start both column and row selectors at first row and first column\n\t\t\tstore.commit('updateHoveredCellElement', { element: null, index: 0 });\n\t\t\tstore.commit('updateHoveredRowElement', getCurrentTable().querySelector('tr'));\n\t\t};\n\n\t\t/**\n\t\t * Remove various event listeners and clear out states.\n\t\t */\n\t\tconst removeHandlersAndStates = () => {\n\t\t\tremoveCellHandlers();\n\t\t\tremoveRowHandlers();\n\t\t\tremoveHighlights();\n\t\t\tclearStates();\n\t\t};\n\n\t\t/**\n\t\t * Initialize hook for component.\n\t\t */\n\t\tthis.init = () => {\n\t\t\t// initialize background menu on correct section change\n\t\t\tdocument.addEventListener('wptbSectionChanged', ({ detail }) => {\n\t\t\t\t// only run setup once\n\t\t\t\tif (!this.initialized && detail === 'background_menu') {\n\t\t\t\t\tWPTB_ControlsManager.callControlScript('BackgroundMenu', 'wptb-background-menu');\n\t\t\t\t\tthis.initialized = true;\n\t\t\t\t}\n\n\t\t\t\tif (WPTB_Helper.getPreviousSection() !== 'background_menu' && detail === 'background_menu') {\n\t\t\t\t\tif (!getSelectorToolbox()) {\n\t\t\t\t\t\taddSelectorToolbox();\n\t\t\t\t\t}\n\n\t\t\t\t\tselectorToolboxVisibility(true);\n\n\t\t\t\t\tif (WPTB_Store.get('proStatus')) {\n\t\t\t\t\t\tassignCellClickHandlers();\n\t\t\t\t\t}\n\n\t\t\t\t\tassignRowClickHandler();\n\t\t\t\t\tclearTableIndicators();\n\t\t\t\t\tcalculateRailPositions();\n\t\t\t\t\tstartUpPositionsForSelectors();\n\t\t\t\t}\n\n\t\t\t\tif (WPTB_Helper.getPreviousSection() === 'background_menu' && detail !== 'background_menu') {\n\t\t\t\t\tselectorToolboxVisibility(false);\n\t\t\t\t\tremoveHandlersAndStates();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// reapply options after table changed events\n\t\t\tdocument.addEventListener('wp-table-builder/table-changed/after', () => {\n\t\t\t\tthis.applyOptions();\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Watch store mutations.\n\t\t *\n\t\t * @param {Object} suppliedStore store object\n\t\t */\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst watchStoreMutations = (suppliedStore) => {\n\t\t\tsuppliedStore.subscribe(({ type, payload }) => {\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'updateHoveredRowElement':\n\t\t\t\t\t\tif (payload) {\n\t\t\t\t\t\t\t// update row selector position on hovered row element changes\n\t\t\t\t\t\t\trowSelectorPosition(payload);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'updateHoveredCellElement':\n\t\t\t\t\t\tcolumnSelectorPosition(payload.index);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Define a flux store for background menu.\n\t\t *\n\t\t * @param {Object} storeObject store object\n\t\t */\n\t\tthis.addStore = (storeObject) => {\n\t\t\tif (!store) {\n\t\t\t\tstore = storeObject;\n\t\t\t\twatchStoreMutations(store);\n\t\t\t}\n\t\t};\n\t}\n\n\t// create singleton instance for background menu component\n\tconst singletonInstance = new BackgroundMenu();\n\n\t// initialize background menu component\n\tsingletonInstance.init();\n\n\treturn singletonInstance;\n});\n","(function () {\n    var WPTB_Builder = function () {\n        var table_id = WPTB_Helper.detectMode();\n        if ( table_id ) {\n            var http = new XMLHttpRequest(),\n                urlSet = ajaxurl + \"?action=get_table\" + '&id=' + table_id;\n            http.open('GET', urlSet, true);\n            http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n            http.onreadystatechange = function (d) {\n                if (this.readyState == 4 && this.status == 200) {\n                    var ans = JSON.parse( http.responseText );\n                    document.getElementById('wptb-setup-name').value = ans[0];\n                        \n                    if( ans[1] ) {\n                        // @deprecated old generate logic\n                        // document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n                        let wptbTableSetupEl = document.getElementsByClassName('wptb-table-setup')[0];\n                        wptbTableSetupEl.appendChild( WPTB_Parser( ans[1] ) );\n                        \n                        let body = document.getElementsByTagName('body')[0];\n                        \n                        WPTB_Table();\n                        let element = document.querySelector( '.wptb-preview-table' );\n                        if( element ) {\n                            let infArr = element.className.match( /wptb-element-((.+-)\\d+)/i );\n                            if( ! infArr ) {\n                                element.classList.add( 'wptb-element-main-table_setting-' + table_id );\n                            }\n                            \n                            if( element.dataset.wptbTableContainerMaxWidth ) {\n                                wptbTableSetupEl.style.maxWidth = element.dataset.wptbTableContainerMaxWidth + 'px';\n                                \n                                element.tdDefaultWidth();\n                            }\n                        }\n                        \n                        //WPTB_LeftPanel();\n                        WPTB_Settings();\n                        \n                        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                        wptbTableStateSaveManager.tableStateSet();\n                    } else {\n                        document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n                    }\n                    \n                    return;\n                }\n            };\n            http.send(null);\n        } else {\n            // @deprecated old generate logic\n            // document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n        document.counter = new ElementCounters();\n        document.select = new MultipleSelect();\n\n        var initializer = WPTB_Initializer();\n        settings = WPTB_Settings();\n    };\n\n    let url = window.location.href,\n        regex = new RegExp('[?&]page=wptb-builder'),\n        results = regex.exec( url );\n    if ( results ) {\n        document.addEventListener('DOMContentLoaded', WPTB_Builder);\n    }\n})();","var WPTB_Cell = function ( callback, DOMElement ) {\n\n    function highlightRow(td) {\n        var parentRow = td.parentNode,\n            columnCount = parseInt(document.getElementById('wptb-columns-number').value),\n            tds = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n        for (var i = 0; i < tds.length; i++) {\n            tds[i].classList.remove('wptb-highlighted-row-first', 'wptb-highlighted-row-last', 'wptb-highlighted-row-inner', 'wptb-highlighted-column-first', 'wptb-highlighted-column-last', 'wptb-highlighted-column-inner');\n        }\n        for (var i = 0; i < columnCount; i++) {\n\n            var classToAdd = i == 0 ? 'wptb-highlighted-row-first' : i == columnCount - 1 ? 'wptb-highlighted-row-last' : 'wptb-highlighted-row-inner';\n            var ttd = parentRow.getElementsByTagName('td')[i];\n            if (ttd !== td) {\n                ttd.classList.add(classToAdd);\n            }\n        }\n    }\n\n    function highlightColumn(td) {\n\n        var index,\n            parentRow = td.parentNode,\n        columnCount = parseInt(document.getElementById('wptb-columns-number').value), rowCount = parseInt(document.getElementById('wptb-rows-number').value), table = document.getElementsByClassName('wptb-preview-table')[0];\n        for (var i = 0; i < columnCount; i++) {\n            if (parentRow.getElementsByTagName('td')[i] === td) {\n                index = i;\n                break;\n            }\n        }\n\n        for (var i = 0; i < rowCount; i++) {\n            var classToAdd = i == 0 ? 'wptb-highlighted-column-first' : i == rowCount - 1 ? 'wptb-highlighted-column-last' : 'wptb-highlighted-column-inner';\n            var tr = table.getElementsByTagName('tr')[i];\n            if (tr.getElementsByTagName('td')[index] !== td) {\n                tr.getElementsByTagName('td')[index].classList.add(classToAdd);\n            }\n        }\n    }\n\n    if( ! DOMElement ) {\n        DOMElement = document.createElement(\"td\");\n\n        DOMElement.style.padding = jQuery('#wptb-table-padding-number').val() + 'px';\n\n        var innerBorderWidth = jQuery('#wptb-table-inner-border-number').val();\n\n        if (innerBorderWidth != '' && parseInt(innerBorderWidth) != 0) {\n            DOMElement.style.border = innerBorderWidth + 'px solid ' + jQuery('#wptb-table-border-color').val();\n        }\n\n        DOMElement.classList.add('wptb-droppable', 'wptb-cell');\n\n        // Add Auto text field in each block\n        let element = WPTB_Helper.newElementProxy( 'text' )\n        element = element.getDOMElement();\n\n        DOMElement.appendChild( element )\n    }\n\n    DOMElement.draggable = false;\n    if ( callback ) {\n        DOMElement.onclick = callback;\n    }\n\n    // Cell double click handler\n    DOMElement.ondblclick = function( event ) {\n        event.stopPropagation();\n        let wptbTableSetup = document.querySelector('.wptb-table-setup')\n        if(wptbTableSetup && !wptbTableSetup.classList.contains('wptb-preview-table-manage-cells') &&\n            (event.target.dataset.yIndex !== '0' || wptbTableSetup.dataset.wptbSortableTable !== '1') &&\n            event.target == event.currentTarget) {\n            WPTB_Helper.wptbDocumentEventGenerate( 'table:cell:dblclick', event.target )\n\n            let element = WPTB_Helper.newElementProxy( 'text' )\n            element = element.getDOMElement()\n\n            DOMElement.appendChild( element )\n\n            WPTB_innerElementSet( element );\n        }\n    }\n\n    WPTB_innerElementSet( DOMElement );\n\n    WPTB_Helper.elementStartScript( DOMElement, 'table_cell_setting' );\n\n    let wptbPhElement = DOMElement.getElementsByClassName( 'wptb-ph-element' );\n\n    if ( wptbPhElement.length > 0 ) {\n        for( let i = 0; i < wptbPhElement.length; i++ ) {\n            wptbPhElement[i].getDOMElement = function() {\n                return wptbPhElement[i];\n            }\n\n            WPTB_innerElementSet( wptbPhElement[i] );\n\n            let wptbElementTypeClass = wptbPhElement[i].className.match( /wptb-element-((.+-)\\d+)/i );\n            if( wptbElementTypeClass && Array.isArray( wptbElementTypeClass ) ) {\n                let wptbTypeElementArr = wptbElementTypeClass[1].split( '-' );\n                wptbPhElement[i].kind = wptbTypeElementArr[0];\n                applyGenericItemSettings( wptbPhElement[i], wptbElementTypeClass[1] );\n                let wptbInternalActiveElement = wptbPhElement[i].getElementsByClassName( 'wptb-in-element' );\n                if ( wptbInternalActiveElement.length > 0 ) {\n                    for ( let j = 0; j < wptbInternalActiveElement.length; j++ ) {\n                        let wptbInternalActiveElementObj = {};\n                        wptbInternalActiveElementObj.getDOMElement = function() {\n                            return wptbInternalActiveElement[j];\n                        }\n\n                        applyGenericItemSettings( wptbInternalActiveElementObj );\n                    }\n                }\n            }\n        }\n    }\n\n    this.getDOMElement = function () {\n        return DOMElement;\n    };\n\n    this.setCoords = function (y, x) {\n        var el = this.getDOMElement();\n        el.dataset.yIndex = y;\n        el.dataset.xIndex = x;\n    };\n\n    this.getCoords = function () {\n        var coords,\n            el = this.getDOMElement();\n        coords.x = el.dataset.xIndex;\n        coords.y = el.dataset.yIndex;\n        return coords;\n    };\n\n    this.appendElement = function (node) {\n        getDOMElement().appendChild(node);\n    };\n\n    DOMElement.getCellDimensions = function() {\n\n        let tdStyleObj = window.getComputedStyle( this, null );\n\n        let tdPaddingLeft = tdStyleObj.getPropertyValue( 'padding-left' );\n        let tdPaddingRight = tdStyleObj.getPropertyValue( 'padding-right' );\n\n        let tdBorderLeftWidth = tdStyleObj.getPropertyValue( 'border-left-width' );\n        let tdBorderRightWidth = tdStyleObj.getPropertyValue( 'border-right-width' );\n\n        let tdPaddingTop = tdStyleObj.getPropertyValue( 'padding-top' );\n        let tdPaddingBottom = tdStyleObj.getPropertyValue( 'padding-bottom' );\n\n        let tdBorderTopWidth = tdStyleObj.getPropertyValue( 'border-top-width' );\n        let tdBorderBottomWidth = tdStyleObj.getPropertyValue( 'border-bottom-width' );\n\n        let width = parseInt( this.offsetWidth, 10 ) -\n            parseInt( tdPaddingLeft, 10 ) -\n            parseInt( tdPaddingRight, 10 );\n\n        let height = parseInt( this.offsetHeight, 10 ) -\n            parseInt( tdPaddingTop, 10 ) -\n            parseInt( tdPaddingBottom, 10 );\n        let table = WPTB_Helper.findAncestor( this, 'wptb-preview-table' );\n        if(table) {\n            if(table.style.borderCollapse === 'collapse') {\n                width = width - ( parseInt( tdBorderLeftWidth, 10 ) / 2 ) -\n                    ( parseInt( tdBorderRightWidth, 10 ) / 2 );\n                height = height - ( parseInt( tdBorderTopWidth, 10 ) / 2 ) -\n                    ( parseInt( tdBorderBottomWidth, 10 ) / 2 );\n                let tableFullStyleObj = window.getComputedStyle( table, null );\n                let tableBorderLeft = tableFullStyleObj.getPropertyValue( 'border-left-width' );\n                let tableBorderRight = tableFullStyleObj.getPropertyValue( 'border-right-width' );\n                let tableBorderTop = tableFullStyleObj.getPropertyValue( 'border-top-width' );\n                let tableBorderBottom = tableFullStyleObj.getPropertyValue( 'border-bottom-width' );\n\n                let tr = this.parentNode;\n                if( tr && tr.nodeName.toLowerCase() === 'tr' ) {\n                    if( tr.firstChild && tr.firstChild.dataset.xIndex === this.dataset.xIndex ) {\n                        if( parseInt( tableBorderLeft, 10 ) > parseInt( tdBorderLeftWidth, 10 ) ) {\n                            width += -( parseInt( tableBorderLeft, 10 ) - parseInt( tdBorderLeftWidth, 10 ) ) / 2;\n                        }\n                    }\n\n                    if( tr.lastChild && tr.lastChild.dataset.xIndex === this.dataset.xIndex ) {\n                        if( parseInt( tableBorderRight, 10 ) > parseInt( tdBorderRightWidth, 10 ) ) {\n                            width += -( parseInt( tableBorderRight, 10 ) - parseInt( tdBorderRightWidth, 10 ) ) / 2;\n                        }\n                    }\n\n                    let body = tr.parentNode;\n                    if( body && body.nodeName.toLowerCase() === 'body' ) {\n                        if( body.firstChild && body.firstChild.firstChild.dataset.yIndex === this.dataset.yIndex ) {\n                            if( parseInt( tableBorderTop, 10 ) > parseInt( tdBorderTopWidth, 10 ) ) {\n                                height += ( parseInt( tableBorderTop, 10 ) - parseInt( tdBorderTopWidth, 10 ) ) / 2;\n                            }\n                        }\n\n                        if( body.lastChild && body.lastChild.firstChild.dataset.yIndex === this.dataset.yIndex ) {\n                            if( parseInt( tableBorderBottom, 10 ) > parseInt( tdBorderBottomWidth, 10 ) ) {\n                                height += ( parseInt( tableBorderBottom, 10 ) - parseInt( tdBorderBottomWidth, 10 ) ) / 2;\n                            }\n                        }\n                    }\n                }\n            } else if(table.style.borderCollapse === 'separate') {\n                width = width - parseInt( tdBorderLeftWidth, 10 ) -\n                    parseInt( tdBorderRightWidth, 10 );\n                height = height - parseInt( tdBorderTopWidth, 10 ) -\n                    parseInt( tdBorderBottomWidth, 10 );\n            }\n        }\n\n        return {\n            width: parseInt( width ),\n            height: parseInt( height )\n        };\n    }\n\n    return this;\n};\n","let WPTB_CutGlueTable = {\n    cutTableHorizontally: function (rowBefore, table) {\n        if( table && table.rows[rowBefore] ) {\n            for( let i = 0; i < rowBefore; i++ ) {\n                let tableRowsIChildren = table.rows[i].children;\n\n                for( let j = 0; j < tableRowsIChildren.length; j++ ) {\n                    if ( tableRowsIChildren[j].rowSpan > 1 && tableRowsIChildren[j].rowSpan > rowBefore - i ) {\n                        let newTdRowspan = tableRowsIChildren[j].rowSpan - rowBefore + i;\n                        tableRowsIChildren[j].rowSpan = rowBefore - i;\n                        if( ! tableRowsIChildren[j].dataset.sameCellBeforeDivision ) {\n                            tableRowsIChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                        }\n\n                        let td;\n                        if(table.hasOwnProperty('wptbCell')) {\n                            td = new table.wptbCell( table.mark );\n                            td = td.getDOMElement();\n                        } else {\n                            td = document.createElement('td');\n                        }\n\n                        let tdTopStyle = tableRowsIChildren[j].getAttribute( 'style' );\n                        td.setAttribute( 'style', tdTopStyle );\n                        td.colSpan = tableRowsIChildren[j].colSpan;\n                        td.rowSpan = newTdRowspan;\n                        td.dataset.sameCellBeforeDivision = tableRowsIChildren[j].dataset.sameCellBeforeDivision;\n\n                        let dataXIndex = tableRowsIChildren[j].dataset.xIndex;\n                        let dataXIndexNext = parseInt( dataXIndex ) + parseInt( tableRowsIChildren[j].colSpan );\n                        let beforeTd;\n                        while( ! beforeTd && dataXIndexNext < table.maxCols ) {\n                            beforeTd = table.rows[rowBefore].querySelector( '[data-x-index=\"' + dataXIndexNext + '\"]' );\n                            dataXIndexNext++;\n                        }\n                        table.rows[rowBefore].insertBefore( td, beforeTd );\n\n                        WPTB_RecalculateIndexes(table);\n                    }\n                }\n            }\n        }\n    },\n    glueTableHorizontally: function (table) {\n        if(table) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' );\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] ) {\n                            if( tdsSameBeforeDivision[j].parentNode && tdsSameBeforeDivision[j + 1].parentNode &&\n                                ! tdsSameBeforeDivision[j].parentNode.classList.contains( 'wptb-row-moving' ) &&\n                                ! tdsSameBeforeDivision[j + 1].parentNode.classList.contains( 'wptb-row-moving' ) ) {\n                                if( ( tdsSameBeforeDivision[j + 1].dataset.yIndex == parseInt( tdsSameBeforeDivision[j].dataset.yIndex ) +\n                                    parseInt( tdsSameBeforeDivision[j].rowSpan ) ) ) {\n                                    tdsSameBeforeDivision[j].rowSpan += tdsSameBeforeDivision[j + 1].rowSpan;\n\n                                    let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                    for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                        tdsSameBeforeDivision[j].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                    }\n\n                                    let nextRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                    nextRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    cutTableVertically: function (col, table) {\n        for ( let i = 0; i < table.rows.length; i++ ) {\n            if( col < table.maxCols ) {\n                if( col != 0 && ( ! table.rows[i].querySelector( '[data-x-index=\"' + col + '\"]' ) ) ) {\n                    let rowChildren = table.rows[i].children;\n\n                    let td,\n                        rowChildrenLength = rowChildren.length,\n                        afterTd,\n                        rowSpanNewTd,\n                        colSpanOld,\n                        colSpanNewTd;\n                    for( let j = 0; j < rowChildrenLength; j++ ) {\n                        if( rowChildren[j].colSpan > 1 && parseInt( rowChildren[j].dataset.xIndex ) < col &&\n                            parseInt( rowChildren[j].dataset.xIndex ) + parseInt( rowChildren[j].colSpan ) > col ) {\n                            if(table.hasOwnProperty('wptbCell')) {\n                                td = new table.wptbCell( table.mark );\n                                td = td.getDOMElement();\n                            } else {\n                                td = document.createElement('td');\n                            }\n\n                            rowSpanNewTd = rowChildren[j].rowSpan;\n                            colSpanOld = rowChildren[j].colSpan;\n                            rowChildren[j].colSpan = col - rowChildren[j].dataset.xIndex;\n                            colSpanNewTd = colSpanOld - rowChildren[j].colSpan;\n\n                            if( ! rowChildren[j].dataset.sameCellBeforeDivision ) {\n                                rowChildren[j].dataset.sameCellBeforeDivision = 'r' + i + 'c' + j;\n                            }\n\n                            let tdLeftStyle = rowChildren[j].getAttribute( 'style' );\n                            td.setAttribute( 'style', tdLeftStyle );\n\n                            let tdAnalogThisX = table.querySelector( '[data-x-index=\"' + col + '\"]' );\n                            if( tdAnalogThisX ) {\n                                td.style.width = tdAnalogThisX.style.width;\n                            }\n\n                            let tdAnalogThisY = table.querySelector( '[data-y-index=\"' + i + '\"]' );\n                            if( tdAnalogThisY ) {\n                                td.style.height = tdAnalogThisY.style.height;\n                            }\n                            if( rowChildren[j + 1] ) {\n                                afterTd = rowChildren[j + 1];\n                            } else {\n                                afterTd = null;\n                            }\n\n                            table.rows[i].insertBefore( td, afterTd );\n                            td.colSpan = colSpanNewTd;\n                            td.rowSpan = rowSpanNewTd;\n                            td.dataset.sameCellBeforeDivision = rowChildren[j].dataset.sameCellBeforeDivision;\n                            i += rowSpanNewTd - 1;\n                            break\n                        }\n                    }\n                }\n            }\n            WPTB_RecalculateIndexes(table);\n        }\n    },\n    glueTableVertically: function (table) {\n        if( table ) {\n            let tds = [...table.getElementsByTagName( 'td' )];\n            for( let i = 0; i < tds.length; i++ ) {\n                if( tds[i].hasAttribute( 'data-same-cell-before-division' ) ) {\n                    let dataSameCellBeforeDivision = tds[i].dataset.sameCellBeforeDivision;\n                    let tdsSameBeforeDivision = [...table.querySelectorAll( '[data-same-cell-before-division=\"' + dataSameCellBeforeDivision + '\"]' )];\n\n                    let jFirstTdGlue = null;\n                    for( let j = 0; j < tdsSameBeforeDivision.length; j++ ) {\n                        if( tdsSameBeforeDivision[j] && tdsSameBeforeDivision[j + 1] &&\n                            ! tdsSameBeforeDivision[j].classList.contains( 'wptb-column-moving' ) &&\n                            ! tdsSameBeforeDivision[j + 1].classList.contains( 'wptb-column-moving' ) ) {\n                            if( ( tdsSameBeforeDivision[j + 1].dataset.xIndex == parseInt( tdsSameBeforeDivision[j].dataset.xIndex ) +\n                                parseInt( tdsSameBeforeDivision[j].colSpan ) ) ) {\n                                if( jFirstTdGlue == null ) {\n                                    jFirstTdGlue = j;\n                                }\n                                tdsSameBeforeDivision[jFirstTdGlue].colSpan += tdsSameBeforeDivision[j + 1].colSpan;\n\n                                let tdsSameBeforeDivisionJPlusChildren = [...tdsSameBeforeDivision[j + 1].children];\n\n                                for( let k = 0; k < tdsSameBeforeDivisionJPlusChildren.length; k++ ) {\n                                    tdsSameBeforeDivision[jFirstTdGlue].appendChild( tdsSameBeforeDivisionJPlusChildren[k] );\n                                }\n\n                                let thisRow = tdsSameBeforeDivision[j + 1].parentNode;\n                                thisRow.removeChild( tdsSameBeforeDivision[j + 1] );\n                            }\n                        }\n                    }\n                }\n            }\n\n            WPTB_RecalculateIndexes(table);\n        }\n    }\n}\n","var WPTB_DropHandle = function (thisElem, e, hide = false) {\n\n    let wptbDropHandle,\n        wptbDropBorderMarker,\n        wptbDropBorderMarkerTop,\n        wptbDropBorderMarkerRight,\n        wptbDropBorderMarkerBottom,\n        wptbDropBorderMarkerLeft;\n\n    /**\n     * Add px suffix to a value\n     *\n     * @param {any} val value\n     * @returns {string} string value suffixed with px\n     */\n    function toPx(val){\n        return `${val}px`;\n    }\n\n    if(WPTB_Helper.getDragRelativeType() === 'td_relative'){\n        let cellRelatedDropHandle = document.querySelector('.wptb-cell-related-drop-handle');\n        if(hide && cellRelatedDropHandle ){\n            cellRelatedDropHandle.style.display = 'none';\n            return;\n        }\n       if(cellRelatedDropHandle === null){\n           const range = document.createRange();\n           range.setStart(document.body , 0);\n\n           const shadowRoot = range.createContextualFragment('<div class=\"wptb-cell-related-drop-handle\">Add to cell</div>').children[0];\n\n           document.body.appendChild(shadowRoot);\n           cellRelatedDropHandle = shadowRoot.children[0];\n       }\n\n       const parentTd = WPTB_Helper.getParentOfType('td', thisElem);\n       const {top,left,width,height} = parentTd.getBoundingClientRect();\n\n       if(!cellRelatedDropHandle){\n           return;\n       }\n\n        cellRelatedDropHandle.style.display = 'flex';\n        cellRelatedDropHandle.style.top = toPx(top);\n        cellRelatedDropHandle.style.width = toPx(width);\n        cellRelatedDropHandle.style.height = toPx(height);\n        cellRelatedDropHandle.style.left = toPx(left);\n\n       return;\n    }\n\n    if ( document.getElementsByClassName( 'wptb-drop-handle' ).length == 0 ) {\n        wptbDropHandle = document.createElement( 'div' );\n        wptbDropHandle.classList.add( 'wptb-drop-handle' );\n        \n        wptbDropBorderMarker = document.createElement( 'div' );\n        wptbDropBorderMarker.classList.add( 'wptb-drop-border-marker' );\n        \n        wptbDropBorderMarkerTop = document.createElement( 'div' ),\n        wptbDropBorderMarkerRight = document.createElement( 'div' ),\n        wptbDropBorderMarkerBottom = document.createElement( 'div' ),\n        wptbDropBorderMarkerLeft = document.createElement( 'div' );\n        \n        wptbDropBorderMarkerTop.classList.add( 'wptb-drop-border-marker-top' );\n        wptbDropBorderMarkerRight.classList.add( 'wptb-drop-border-marker-right' );\n        wptbDropBorderMarkerBottom.classList.add( 'wptb-drop-border-marker-bottom' );\n        wptbDropBorderMarkerLeft.classList.add( 'wptb-drop-border-marker-left' );\n        \n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerTop );\n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerRight );\n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerBottom );\n        wptbDropBorderMarker.appendChild( wptbDropBorderMarkerLeft );\n        \n        let body = document.getElementsByTagName( 'body' );\n        if ( body.length > 0 ) {\n            body[0].appendChild( wptbDropHandle );\n            body[0].appendChild( wptbDropBorderMarker );\n        }\n        \n        wptbDropHandle.ondragenter = function () {\n            if (e.target.classList.contains('wptb-empty')) {\n                e.preventDefault();\n                return false;\n            }\n        }\n\n        wptbDropHandle.ondragover = function (e) {\n            e.preventDefault();            \n        }\n\n        wptbDropHandle.ondragleave = function () {\n\n        }\n        wptbDropHandle.ondrop = function (e) {\n            e.preventDefault();\n            let element;\n            \n            if ( e.dataTransfer.getData('wptbElement') ) {\n                element = WPTB_Helper.newElementProxy( e.dataTransfer.getData('wptbElement') );\n                element = element.getDOMElement();\n            } else {\n                element = document.getElementsByClassName( e.dataTransfer.getData('node') )[0];\n                element.classList.remove( 'wptb-moving-mode' );\n                element.classList.remove( 'wptb-moving-into-same-elem' );\n                element.wptbMovingMode = 1;\n            }\n            \n            let td;\n            if( wptbDropHandle.dataset.text == 'Drop Here' ) {\n                thisElem = wptbDropHandle.getDOMParentElement();\n                if ( thisElem.nodeName.toLowerCase() == 'td' ) {\n                    td = wptbDropHandle.getDOMParentElement();\n                    td.appendChild( element );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                }\n            } else {\n                let innerElement = wptbDropHandle.getDOMParentElement();\n                td = innerElement.parentNode;\n                \n                if( wptbDropHandle.dataset.text == 'Above Element' ) {\n                    td.insertBefore( element, innerElement );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                } else if( wptbDropHandle.dataset.text == 'Below Element' ) {\n                    let innerElementNext = innerElement.nextSibling;\n                    td.insertBefore( element, innerElementNext );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                }\n            }\n            \n            let thisRow = td.parentNode;\n            if( WPTB_Helper.rowIsTop( thisRow ) ) {\n                let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n\n                if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                    WPTB_Helper.dataTitleColumnSet( table );\n                }\n            }\n            \n            wptbDropHandle.style.display = 'none';\n            wptbDropBorderMarker.style.display = 'none';\n            \n            WPTB_innerElementSet( element );\n            if( ! element.classList.contains( 'wptb-image-container' ) || element.wptbMovingMode == 1 ) {\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n                element.wptbMovingMode == undefined;\n            }\n        }\n        let wptbContainer = document.querySelector( '.wptb-container' );\n        wptbContainer.onscroll = function() {\n            wptbDropHandle.style.display = 'none';\n            wptbDropBorderMarker.style.display = 'none';\n        }\n    } else {\n        wptbDropHandle = document.getElementsByClassName( 'wptb-drop-handle' )[0];\n        wptbDropBorderMarker = document.getElementsByClassName( 'wptb-drop-border-marker' )[0];\n    }\n    if( thisElem && thisElem.nodeName.toLowerCase() == 'td' && \n            thisElem.getElementsByClassName( 'wptb-ph-element' ).length != 0) {\n        return;\n    }\n\n    if( thisElem && thisElem.nodeName.toLowerCase() == 'td' && \n            thisElem.classList.contains('wptb-empty')) {\n        return;\n    }\n    \n    let thisRow;\n    if ( thisElem.localName == 'td' ) {\n        thisRow = thisElem.parentNode;\n    } else if ( thisElem.localName == 'div' && thisElem.classList.contains( 'wptb-ph-element' ) ) {\n        thisRow = thisElem.parentNode.parentNode;\n    }\n    \n    if( WPTB_Helper.rowIsTop( thisRow ) ) {\n        let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n        \n        if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n            let indics = e.dataTransfer.types;\n            let notDragEnter = false;\n            for ( let i = 0; i < indics.length; i++ ) {\n                let infArr = indics[i].match( /wptbelindic-([a-z]+)/i );\n                if ( infArr && infArr[1] != 'text' ) {\n                    notDragEnter = true;\n                    break;\n                }\n            }\n            if( notDragEnter ) {\n                return;\n            }\n        }\n    }\n    \n    wptbDropHandle.style.width = thisElem.offsetWidth + 'px';\n    let height = thisElem.offsetHeight,\n        coordinatesElement = thisElem.getBoundingClientRect(),\n        left = parseFloat( coordinatesElement.left ),\n        top;\n    wptbDropHandle.style.left = left + 'px';\n    \n    if( e.dataTransfer.types.indexOf( 'wptb-moving-mode' ) != -1 ) {\n        let elementDrag = document.getElementsByClassName( 'wptb-moving-mode' )[0];\n        if( thisElem == elementDrag ) {\n            wptbDropHandle.classList.add('wptb-moving-into-same-elem');\n            wptbDropBorderMarker.classList.add('wptb-moving-into-same-elem');\n        } else {\n            wptbDropHandle.classList.remove('wptb-moving-into-same-elem');\n            wptbDropBorderMarker.classList.remove('wptb-moving-into-same-elem');\n        }\n    }\n    \n    wptbDropHandle.getDOMParentElement = function() {\n        return thisElem;\n    }\n    \n    wptbDropHandle.style.display = 'block';\n    wptbDropBorderMarker.style.display = 'block';\n    if( thisElem.nodeName.toLowerCase() != 'td' ) {\n        let y = e.offsetY==undefined?e.layerY:e.offsetY;\n        top = parseFloat( coordinatesElement.top ) - parseFloat( 11 );\n        wptbDropHandle.dataset.text = 'Above Element';\n        if ( y > height/2 ) {\n            top = parseFloat( coordinatesElement.top ) + height - 1;\n            wptbDropHandle.dataset.text = 'Below Element';\n        }\n    } else {\n        wptbDropHandle.dataset.text = 'Drop Here';\n        top = parseFloat( coordinatesElement.top ) + height/2 - 5;\n    }\n    wptbDropHandle.style.top = top + 'px';\n\n    wptbDropBorderMarker.style.top = coordinatesElement.top + 'px';\n    wptbDropBorderMarker.style.left = coordinatesElement.left + 'px';\n\n    wptbDropBorderMarkerTop = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-top' );\n    wptbDropBorderMarkerTop.style.width = ( parseFloat( thisElem.offsetWidth ) - parseFloat( 1 ) ) + 'px';\n\n    wptbDropBorderMarkerRight = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-right' );\n    wptbDropBorderMarkerRight.style.height = ( parseFloat( coordinatesElement.bottom ) - parseFloat( coordinatesElement.top ) - 1 ) + 'px';\n    wptbDropBorderMarkerRight.style.left = wptbDropBorderMarkerTop.style.width;\n\n    wptbDropBorderMarkerBottom = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-bottom' );\n    wptbDropBorderMarkerBottom.style.width = wptbDropBorderMarkerTop.style.width;\n    wptbDropBorderMarkerBottom.style.top = wptbDropBorderMarkerRight.style.height;\n\n    wptbDropBorderMarkerLeft = wptbDropBorderMarker.querySelector( '.wptb-drop-border-marker-left' );\n    wptbDropBorderMarkerLeft.style.height = wptbDropBorderMarkerRight.style.height;\n}","var ElementCounters = function () {\n\n\tvar priv = [];\n\tpriv['text'] = 0;\n\tpriv['image'] = 0;\n\tpriv['list'] = 0;\n\tpriv['button'] = 0;\n\n\tthis.increment = function (key) {\n\t\tif (!(key in priv)) {\n\t\t\treturn;\n\t\t}\n\t\tpriv[key]++;\n\t}\n\n\tthis.nextIndex = function (key) {\n\t\tif (!(key in priv)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn priv[key] + 1;\n\t}\n\n\treturn this;\n\n};","/**\n * UMD module for element id provider component.\n *\n * @param {string} key context key\n * @param {Object} context container context\n * @param {Function} factory factory function\n */\n(function umd(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_ElementIdProvider', self || global, () => {\n\t/**\n\t * Element id provider.\n\t *\n\t * @class\n\t */\n\tfunction ElementIdProvider() {\n\t\t// stored element ids per table element type\n\t\tconst elementIds = {};\n\n\t\t/**\n\t\t * First time id startup for given element type.\n\t\t * This function will check all same element types and use highest id as starting point.\n\t\t *\n\t\t * @param {string} elementType element type\n\t\t */\n\t\tconst initializeElementIdForType = (elementType) => {\n\t\t\tconst elements = Array.from(document.querySelectorAll('.wptb-ph-element'));\n\n\t\t\tconst regex = new RegExp(`wptb-element-${elementType}-(\\\\d+)`, 'i');\n\n\t\t\treturn elements.reduce((carry, current) => {\n\t\t\t\tconst matchArray = regex.exec(current.className);\n\n\t\t\t\treturn matchArray !== null && matchArray[1] !== undefined\n\t\t\t\t\t? Math.max(carry, Number.parseInt(matchArray[1], 10))\n\t\t\t\t\t: carry;\n\t\t\t}, 0);\n\t\t};\n\n\t\t/**\n\t\t * Get a new id for given element type.\n\t\t *\n\t\t * @param {string} elementType element type\n\t\t * @return {number} new if for element\n\t\t */\n\t\tthis.getNewId = (elementType) => {\n\t\t\tif (elementIds[elementType] === undefined) {\n\t\t\t\telementIds[elementType] = initializeElementIdForType(elementType);\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-plusplus\n\t\t\treturn ++elementIds[elementType];\n\t\t};\n\t}\n\n\t// singleton component for element id provider\n\treturn new ElementIdProvider();\n});\n","var WPTB_ElementObject = function ( data ) {\n    let DOMElement, kindIndexProt, copy;\n    if( ! data.elemProt ) {\n        DOMElement = document.createElement('div'),\n        kindIndexProt = undefined,\n        copy = false;\n        DOMElement.classList.add( 'wptb-' + data.kind + '-container', 'wptb-ph-element' );\n    \n        let wpTemplateId = 'wptb-' + data.kind + '-content';\n        let template = wp.template( wpTemplateId );\n        data.node = DOMElement;\n\n        let itemHtml = template( data );\n        \n        itemHtml = itemHtml.replace(/\\r|\\n|\\t/g, '').trim();\n        DOMElement.innerHTML = itemHtml;\n    } else {\n        DOMElement = data.elemProt.cloneNode( true );\n        DOMElement.classList.remove( 'wptb-directlyhovered' );\n        let wptbElementMutch = data.elemProt.className.match( /wptb-element-((.+-)\\d+)/i );\n        if ( wptbElementMutch && Array.isArray( wptbElementMutch ) ) {\n            kindIndexProt = wptbElementMutch[1];\n        };\n        copy = true;\n        \n        if( data.tinyMceClear ) {\n            DOMElement = WPTB_Helper.elementClearFromTinyMce( DOMElement );\n        }\n    }\n    \n    let inElems = DOMElement.querySelectorAll( '.wptb-in-element' );\n    if( inElems.length > 0 ) {\n        for ( let i = 0; i < inElems.length; i++ ) {\n            let inElemObj = {};\n            inElemObj.getDOMElement = function() {\n                return inElems[i];\n            }\n            \n            applyGenericItemSettings( inElemObj );\n        }\n    }\n     \n    window.addEventListener( 'item:onmouseenter', function( event ) {\n        //console.log( event );\n    }, false);\n    \n    \n    this.kind = data.kind;\n    this.getDOMElement = function () {\n        return DOMElement;\n    };\n    \n    applyGenericItemSettings( this, kindIndexProt, copy );\n    return this;\n}\n","var WPTB_ElementOptions = function ( element, index, kindIndexProt ) {\n\n    var node = element.getDOMElement();\n    node.addEventListener( 'click', function() {\n        WPTB_Helper.elementOptionsSet( element.kind, this );\n    }, {capture: true} );\n};","/**\n * Extra styles module to add custom css rules defined for individual tables.\n */\n(function UMD(key, context, factory) {\n\tif (typeof module !== 'undefined' && typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext[key] = factory();\n\t}\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_ExtraStyles', self || global, () => {\n\t/**\n\t * Extra styles frontend manager.\n\t *\n\t * This component will be responsible for adding and maintaining extra styles defined for tables.\n\t *\n\t * @class\n\t */\n\t// eslint-disable-next-line camelcase\n\tfunction WPTB_ExtraStyles() {\n\t\t/**\n\t\t * Extra styles operation modes\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.modes = {\n\t\t\tbuilder: 'builder',\n\t\t\tfrontEnd: 'frontEnd',\n\t\t\tblock: 'block',\n\t\t};\n\n\t\t/**\n\t\t * Base document for DOM operations.\n\t\t *\n\t\t * @type {Document}\n\t\t */\n\t\tthis.baseDocument = document;\n\n\t\t/**\n\t\t * Current mode extra styles are operating on.\n\t\t *\n\t\t * @type {string}\n\t\t */\n\t\tthis.currentMode = this.modes.builder;\n\n\t\t/**\n\t\t * General table styles.\n\t\t *\n\t\t * @type {string}\n\t\t */\n\t\tthis.generalStyles = '';\n\n\t\t/**\n\t\t * HTML queries for table element in different plugin modes\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst tableQueries = {\n\t\t\t[this.modes.builder]: '.wptb-table-setup .wptb-preview-table',\n\t\t\t[this.modes.block]: '.wptb-block-table-setup .wptb-preview-table',\n\t\t\t[this.modes.frontEnd]: '.wptb-table-container .wptb-preview-table',\n\t\t};\n\n\t\t/**\n\t\t * Format styles.\n\t\t *\n\t\t * @param {string} styles styles\n\t\t * @return {string} formatted styles\n\t\t */\n\t\tconst formatStyles = (styles) => {\n\t\t\t// remove all newlines, comments and '!important' from style string to make it a one liner\n\t\t\tconst cleaned = styles.replaceAll(/(\\r?\\n)|(\\/\\*.+?\\*\\/)|(\\s*!important)/g, '');\n\n\t\t\t// add '!important' to all rules to override default style rules\n\t\t\treturn cleaned.replaceAll(';', ' !important;');\n\t\t};\n\n\t\t/**\n\t\t * Reform style rules so they will only affect given table id.\n\t\t *\n\t\t * @param {number} prefix prefix string that will be added to all rules\n\t\t * @param {string} extraStyles extra styles\n\t\t * @return {string} new style properties prefixed with table id class\n\t\t */\n\t\tconst prefixStyleRules = (prefix, extraStyles) => {\n\t\t\t// reformat styles into a suitable form for our regexp operations\n\t\t\tconst formattedStyles = formatStyles(extraStyles);\n\n\t\t\tconst splitStyles = formattedStyles.split('}');\n\t\t\tconst prefixedStylesArray = [];\n\n\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\tsplitStyles.map((split) => {\n\t\t\t\tconst regExp = new RegExp(/(.+?)\\{/g);\n\t\t\t\tconst matches = regExp.exec(split);\n\n\t\t\t\tif (matches) {\n\t\t\t\t\tprefixedStylesArray.push(split.replace(matches[1], `${prefix} ${matches[1]}`));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn `${prefixedStylesArray.join('}')}}`;\n\t\t};\n\n\t\t/**\n\t\t * Apply general styles to document.\n\t\t *\n\t\t * @param {string} generalStyles general style rules\n\t\t * @param {Node} baseElement element to use as base\n\t\t */\n\t\tconst applyGeneralStyles = (generalStyles, baseElement = null) => {\n\t\t\tconst generalStylesheet = document.createElement('style');\n\t\t\tgeneralStylesheet.type = 'text/css';\n\t\t\tgeneralStylesheet.id = 'wptb-general-styles';\n\n\t\t\tif (!baseElement) {\n\t\t\t\tconst head =\n\t\t\t\t\tthis.currentMode === this.modes.block ? this.baseDocument : this.baseDocument.querySelector('head');\n\n\t\t\t\thead.appendChild(generalStylesheet);\n\t\t\t} else {\n\t\t\t\tbaseElement.insertAdjacentElement('beforebegin', generalStylesheet);\n\t\t\t}\n\t\t\tconst prefixedStyleRules = prefixStyleRules(generalStyles.parentPrefix, generalStyles.styles);\n\t\t\tgeneralStylesheet.appendChild(document.createTextNode(prefixedStyleRules));\n\t\t};\n\n\t\t/**\n\t\t * Apply defined extra styles for given table element.\n\t\t *\n\t\t * @param {Element} tableElement table element\n\t\t */\n\t\tconst applyExtraStyle = (tableElement) => {\n\t\t\tconst extraStylesRaw = tableElement.dataset.wptbExtraStyles;\n\t\t\tconst styleIdPrefix = 'wptb-extra-styles-';\n\n\t\t\tif (extraStylesRaw) {\n\t\t\t\tconst extraStyles = atob(extraStylesRaw);\n\n\t\t\t\tconst [, tableId] = tableElement\n\t\t\t\t\t.getAttribute('class')\n\t\t\t\t\t.match(/wptb-element-main-table_setting-(?:startedid-)?(\\d+)/);\n\n\t\t\t\tconst styleId = styleIdPrefix + tableId;\n\n\t\t\t\tconst head = this.baseDocument.querySelector('head');\n\n\t\t\t\t// since stylesheets are created for frontend only once at startup, checking document head for any created style object will work even with theme disabled tables which at builder, they are not inside a shadow-root\n\t\t\t\tlet styleElement = head?.querySelector(`#${styleId}`);\n\n\t\t\t\t// if no style element is found, create one\n\t\t\t\tif (!styleElement) {\n\t\t\t\t\tstyleElement = document.createElement('style');\n\t\t\t\t\tstyleElement.type = 'text/css';\n\t\t\t\t\tstyleElement.id = styleId;\n\n\t\t\t\t\tconst isThemeStylesDisabled = tableElement.dataset.disableThemeStyles;\n\n\t\t\t\t\t// if theme styles are disabled, it means our table is residing inside a shadow-root, place style element inside shadow-root instead of document head\n\t\t\t\t\tif (\n\t\t\t\t\t\t(isThemeStylesDisabled && this.currentMode === this.modes.frontEnd) ||\n\t\t\t\t\t\tthis.currentMode === this.modes.block\n\t\t\t\t\t) {\n\t\t\t\t\t\ttableElement.insertAdjacentElement('beforebegin', styleElement);\n\t\t\t\t\t\tif (this.currentMode === this.modes.frontEnd && this.generalStyles) {\n\t\t\t\t\t\t\tapplyGeneralStyles(this.generalStyles, tableElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\thead.appendChild(styleElement);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst uniqueClass = `.wptb-element-main-table_setting-${tableId}`;\n\t\t\t\t// reform style rules so they will only affect the table they are assigned to\n\t\t\t\tconst prefixedStyles = prefixStyleRules(uniqueClass, extraStyles);\n\n\t\t\t\t// remove previous styles with updated ones\n\t\t\t\tstyleElement.innerHTML = '';\n\t\t\t\tstyleElement.appendChild(document.createTextNode(prefixedStyles));\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Apply extra styles to all available tables on DOM.\n\t\t *\n\t\t * @param {string} mode operation mode to apply styles\n\t\t * @param {string} generalStyles general style rules\n\t\t * @param {Object} baseDocument base document for DOM operations\n\t\t */\n\t\tthis.applyStyles = (mode = this.modes.frontEnd, generalStyles = null, baseDocument = document) => {\n\t\t\tthis.baseDocument = baseDocument;\n\t\t\tthis.currentMode = mode;\n\t\t\tthis.generalStyles = generalStyles;\n\n\t\t\tconst allTables = Array.from(this.baseDocument.querySelectorAll(tableQueries[mode]));\n\n\t\t\tif (allTables) {\n\t\t\t\tallTables.map(applyExtraStyle);\n\t\t\t}\n\n\t\t\t// only apply general styles on client frontend if any general styles are defined\n\t\t\tif ((mode === this.modes.frontEnd || mode === this.modes.block) && generalStyles) {\n\t\t\t\tapplyGeneralStyles(generalStyles);\n\t\t\t}\n\t\t};\n\t}\n\n\t// send a singleton instance of manager\n\treturn new WPTB_ExtraStyles();\n});\n","/**\n *\n * @param {HTMLElement} table\n * @param {string} typeFirst\n * @param {strinig} typeSecond\n * @param {func} workFunction\n * @param {object} responsiveFront\n */\nvar WPTB_GetDirectionAfterReconstruction = function (table, typeFirst, typeSecond,verticalProp, responsiveFront) {\n\n    let itemsPerHeader = 0;\n    let tableMaxCols = table.maxCols;\n    const switchMode = {};\n    let type = [];\n    if (responsiveFront && responsiveFront.getDirective(table)) {\n        switchMode.switch = function (e) {\n            const directives = responsiveFront.getDirective(table)\n\n            let sizeRangeId = 'desktop';\n            if (e && e.detail) {\n                sizeRangeId = e.detail.sizeRangeId;\n            }\n            type = [typeFirst, 1];\n            if (sizeRangeId !== 'desktop') {\n                if (directives.hasOwnProperty('modeOptions')) {\n                    const mode = directives.responsiveMode;\n                    const modeOptions = directives.modeOptions[mode];\n\n                    if (\n                        modeOptions.hasOwnProperty('topRowAsHeader') &&\n                        modeOptions.topRowAsHeader.hasOwnProperty(sizeRangeId) &&\n                        modeOptions.topRowAsHeader[sizeRangeId]\n                    ) {\n                        if (\n                            modeOptions.hasOwnProperty('cellStackDirection') &&\n                            modeOptions.cellStackDirection.hasOwnProperty(sizeRangeId)\n                        ) {\n                            if (modeOptions.cellStackDirection[sizeRangeId] === 'row') {\n                                type = [typeSecond, 2];\n                                itemsPerHeader = tableMaxCols - 1;\n                            } else if (modeOptions.cellStackDirection[sizeRangeId] === 'column') {\n                                if (modeOptions.hasOwnProperty('cellsPerRow')) {\n                                    itemsPerHeader = modeOptions.cellsPerRow[sizeRangeId];\n                                }\n                            }\n                        }\n                    } else {\n                        itemsPerHeader = 0;\n                    }\n                }\n            } else {\n                itemsPerHeader = 0;\n            }\n            return {type, itemsPerHeader}\n        };\n    } else {\n        switchMode.switch = function (e) {\n            type = [typeFirst, 1];\n            if (table.classList.contains('wptb-mobile-view-active')) {\n                if (table.classList.contains('wptb-table-preview-head')) {\n                    type = [typeSecond, 2];\n                    if(type === verticalProp) {\n                        itemsPerHeader = tableMaxCols - 1;\n                    }\n                }\n                let newTable = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n                return {type, itemsPerHeader, newTable};\n            }\n\n            return {type, itemsPerHeader}\n        };\n    }\n\n    return switchMode;\n}\n","/**\n * WPTB_HeaderToolbox\n *\n * @param {string} wrapperQuery wrapper query for toolbox items\n * @return {Object} header toolbox object\n * @class\n */\n// eslint-disable-next-line camelcase,no-unused-vars\nconst WPTB_HeaderToolbox = function (wrapperQuery) {\n\tthis.wrapperQuery = wrapperQuery;\n\tthis.element = document.querySelector(wrapperQuery);\n\tthis.topMargin = 2;\n\n\t/**\n\t * Assign events to toolbox buttons.\n\t */\n\tconst assignButtons = () => {\n\t\t// use data-button-type dataset property to call related section\n\t\tconst headerButtons = Array.from(this.element.querySelectorAll('[data-button-type]'));\n\n\t\t// eslint-disable-next-line array-callback-return\n\t\theaderButtons.map((button) => {\n\t\t\tbutton.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tWPTB_Helper.activateSection(e.target.dataset.buttonType);\n\t\t\t});\n\t\t});\n\t};\n\n\t/**\n\t * Toggle visibility of toolbox with the given argument.\n\t *\n\t * @param {boolean} show show toolbox\n\t */\n\tconst toggleToolboxVisibility = (show = false) => {\n\t\tlet { height } = this.element.getBoundingClientRect();\n\n\t\tif (show) {\n\t\t\theight = 0;\n\t\t}\n\n\t\tthis.element.style.top = `calc( 100% - ${height + this.topMargin}px)`;\n\t};\n\n\t/**\n\t * Initialize header toolbox.\n\t */\n\tconst init = () => {\n\t\tassignButtons();\n\t\t// bind toolbox to table generated event\n\t\tdocument.addEventListener('wptb:table:generated', () => {\n\t\t\tthis.element.style.display = 'flex';\n\t\t\tconst { width } = this.element.getBoundingClientRect();\n\t\t\tthis.element.style.left = `calc( 50% - ${width / 2}px)`;\n\n\t\t\tconst hideList = ['table_responsive_menu', 'manage_cells', 'cell_settings'];\n\n\t\t\t// hide toolbox at manage cells and responsive menus\n\t\t\tdocument.addEventListener('wptbSectionChanged', ({ detail }) => {\n\t\t\t\ttoggleToolboxVisibility(!hideList.includes(detail));\n\t\t\t});\n\n\t\t\t// toggle visibility on startup\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tconst { currentSection } = WPTB_Helper;\n\t\t\ttoggleToolboxVisibility(!hideList.includes(currentSection));\n\t\t});\n\t};\n\n\treturn { init };\n};\n","var WPTB_Helper = {\n\thexToRgb(hex) {\n\t\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\treturn result ? `rgb(${parseInt(result[1], 16)},${parseInt(result[2], 16)},${parseInt(result[3], 16)})` : null;\n\t},\n\trgbToHex(rgb) {\n\t\tif (rgb) {\n\t\t\tif (WPTB_Helper.isHex(rgb)) return rgb;\n\n\t\t\tlet rgbm = rgb.match(\n\t\t\t\t/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?((?:[0-9]*[.])?[0-9]+)[\\s+]?\\)/i\n\t\t\t);\n\t\t\tif (rgbm && rgbm.length === 5) {\n\t\t\t\treturn `#${`0${parseInt(rgbm[1], 10).toString(16).toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[2], 10)\n\t\t\t\t\t.toString(16)\n\t\t\t\t\t.toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[3], 10).toString(16).toUpperCase()}`.slice(\n\t\t\t\t\t-2\n\t\t\t\t)}${`0${Math.round(parseFloat(rgbm[4], 10) * 255)\n\t\t\t\t\t.toString(16)\n\t\t\t\t\t.toUpperCase()}`.slice(-2)}`;\n\t\t\t}\n\t\t\trgbm = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n\t\t\tif (rgbm && rgbm.length === 4) {\n\t\t\t\treturn `#${`0${parseInt(rgbm[1], 10).toString(16).toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[2], 10)\n\t\t\t\t\t.toString(16)\n\t\t\t\t\t.toUpperCase()}`.slice(-2)}${`0${parseInt(rgbm[3], 10).toString(16).toUpperCase()}`.slice(-2)}`;\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t\treturn '';\n\t},\n\tisHex(hex) {\n\t\tconst regex = new RegExp('^#(?:[A-Fa-f0-9]{3}){1,2}(?:[0-9]?){1,2}$');\n\t\treturn regex.test(hex);\n\t},\n\tgetElementIcon(icon_directory) {\n\t\tconst hostName = `${location.protocol}//${location.hostname}`;\n\t\tconst img = document.createElement('img');\n\t\timg.src = icon_directory;\n\t\treturn img;\n\t},\n\telementDragEndClear() {\n\t\tconst wptbMovingMode = document.getElementsByClassName('wptb-moving-mode');\n\t\tif (wptbMovingMode.length > 0) {\n\t\t\tfor (let i = 0; i < wptbMovingMode.length; i++) {\n\t\t\t\twptbMovingMode[i].classList.remove('wptb-moving-mode');\n\t\t\t}\n\t\t}\n\n\t\tconst wptbDropHandles = document.getElementsByClassName('wptb-drop-handle');\n\t\tif (wptbDropHandles.length > 0) {\n\t\t\tfor (let i = 0; i < wptbDropHandles.length; i++) {\n\t\t\t\twptbDropHandles[i].style.display = 'none';\n\t\t\t}\n\t\t}\n\n\t\tconst wptbDropBorderMarkers = document.getElementsByClassName('wptb-drop-border-marker');\n\t\tif (wptbDropBorderMarkers.length > 0) {\n\t\t\tfor (let i = 0; i < wptbDropBorderMarkers.length; i++) {\n\t\t\t\twptbDropBorderMarkers[i].style.display = 'none';\n\t\t\t}\n\t\t}\n\t},\n\tlinkHttpCheckChange(link, convertToAbs = false) {\n\t\tif (link) {\n\t\t\t// even though it is not a best practice and a huge security risk, sometimes our users use javascript tag at href attributes, this check will make sure those tags will not be modified and returned as they are\n\t\t\tif (link.match(/^(javascript:)(.+)$/)) {\n\t\t\t\treturn link;\n\t\t\t}\n\t\t\t// relative link checking\n\t\t\t// if link starts with '/', assume it is a relative link to the origin of the current site\n\t\t\tif (link.match(/^\\/([\\S]+)$/)) {\n\t\t\t\tif (convertToAbs) {\n\t\t\t\t\tconst currentLocation = document.location;\n\t\t\t\t\tlet { origin } = currentLocation;\n\n\t\t\t\t\t// strip out the '/' at the end of the origin name if there is any\n\t\t\t\t\tif (origin.match(/^(.+)\\/$/)) {\n\t\t\t\t\t\torigin = origin.slice(-1);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `${origin}${link}`;\n\t\t\t\t}\n\t\t\t\treturn link;\n\t\t\t}\n\t\t\tif (link.indexOf('http://') == -1 && link.indexOf('https://') == -1) {\n\t\t\t\tconst linkArr = link.split('/');\n\t\t\t\tlet linkClean;\n\t\t\t\tif (Array.isArray(linkArr) && linkArr.length > 0) {\n\t\t\t\t\tlinkClean = linkArr[linkArr.length - 1];\n\t\t\t\t}\n\t\t\t\treturn `${document.location.protocol}//${linkClean}`;\n\t\t\t}\n\t\t\treturn link;\n\t\t}\n\t\treturn '';\n\t},\n\tdataTitleColumnSet(table) {\n\t\t// TODO dataTitleColumnSet\n\t\t// let rows = table.rows,\n\t\t//     rowHead = rows[0];\n\t\t// let computedStyleRowHead = getComputedStyle( rowHead );\n\t\t//\n\t\t// let rowHeadChildren = rowHead.children;\n\t\t// let contentsForHeader = {};\n\t\t// for( let i = 0; i < rowHeadChildren.length; i++ ) {\n\t\t//     let tdElements = rowHeadChildren[i].children;\n\t\t//\n\t\t//     for( let j = 0; j < tdElements.length; j++ ) {\n\t\t//         let element = tdElements[j];\n\t\t//         if( element.classList.contains( 'wptb-ph-element' ) ) {\n\t\t//             let infArr = element.className.match( /wptb-element-(.+)-(\\d+)/i );\n\t\t//             if( infArr[1] == 'text' ) {\n\t\t//                 let p = element.querySelector( 'p' ),\n\t\t//                     textContent = p.textContent,\n\t\t//                     textAlign = p.style.textAlign;\n\t\t//                     contentsForHeader[rowHeadChildren[i].dataset.xIndex] = [textContent, element.style.fontSize,\n\t\t//                         element.style.color, computedStyleRowHead.backgroundColor, textAlign];\n\t\t//                 break;\n\t\t//             }\n\t\t//         }\n\t\t//     }\n\t\t//     if( ! contentsForHeader[rowHeadChildren[i].dataset.xIndex] ) {\n\t\t//         contentsForHeader[rowHeadChildren[i].dataset.xIndex] = ['', '',\n\t\t//                     '', computedStyleRowHead.backgroundColor, ''];\n\t\t//     }\n\t\t// }\n\t\t// for ( let i = 1; i < rows.length; i++ ) {\n\t\t//     let thisRow = rows[i],\n\t\t//         thisRowChildren = thisRow.children;\n\t\t//     for( let j = 0; j < thisRowChildren.length; j++ ) {\n\t\t//         if ( contentsForHeader[thisRowChildren[j].dataset.xIndex] ) {\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumn = contentsForHeader[thisRowChildren[j].dataset.xIndex][0];\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnFontSize = contentsForHeader[thisRowChildren[j].dataset.xIndex][1];\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnColor = contentsForHeader[thisRowChildren[j].dataset.xIndex][2];\n\t\t//             thisRowChildren[j].dataset.wptbTitleBackgroundColor = contentsForHeader[thisRowChildren[j].dataset.xIndex][3];\n\t\t//             thisRowChildren[j].dataset.wptbTitleAlign = contentsForHeader[thisRowChildren[j].dataset.xIndex][4];\n\t\t//         } else {\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumn = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnFontSize = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleColumnColor = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleBackgroundColor = null;\n\t\t//             thisRowChildren[j].dataset.wptbTitleAlign = null;\n\t\t//         }\n\t\t//     }\n\t\t// }\n\t},\n\tfindAncestor(el, cls) {\n\t\twhile ((el = el.parentElement) && !el.classList.contains(cls));\n\t\treturn el;\n\t},\n\trowIsTop(row) {\n\t\tconst parent = row.parentNode;\n\t\tif (parent.children[0] == row) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tgetSelectionText() {\n\t\tlet txt = '';\n\t\tif ((txt = window.getSelection)) {\n\t\t\ttxt = window.getSelection().toString();\n\t\t} else {\n\t\t\ttxt = document.selection.createRange().text;\n\t\t}\n\t\treturn txt;\n\t},\n\telementOptionsPanelClear() {\n\t\tconst elementOptionsGroup = document.getElementById('element-options-group');\n\t\tif (elementOptionsGroup) {\n\t\t\telementOptionsGroup.innerHTML = '';\n\t\t}\n\t},\n\twpColorPickerCheckChangeForTableStateSaving(event) {\n\t\tif (event.originalEvent.type == 'external') {\n\t\t\tconst wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t\t\twptbTableStateSaveManager.tableStateSet();\n\t\t} else {\n\t\t\tconst wpPickerContainer = WPTB_Helper.findAncestor(event.target, 'wp-picker-container');\n\t\t\tif (wpPickerContainer) {\n\t\t\t\tif (event.originalEvent.type == 'square' || event.originalEvent.type == 'strip') {\n\t\t\t\t\tconst body = document.getElementsByTagName('body')[0];\n\t\t\t\t\tbody.removeEventListener('mouseup', WPTB_Helper.irisStripMouseUpStateSaveManager, false);\n\t\t\t\t\tbody.addEventListener('mouseup', WPTB_Helper.irisStripMouseUpStateSaveManager, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tirisStripMouseUpStateSaveManager() {\n\t\tconst wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t\twptbTableStateSaveManager.tableStateSet();\n\n\t\tconst body = document.getElementsByTagName('body')[0];\n\t\tbody.removeEventListener('mouseup', WPTB_Helper.irisStripMouseUpStateSaveManager, false);\n\t},\n\twpColorPickerClear(attribute, isId) {\n\t\tlet input;\n\t\tif (isId) {\n\t\t\tinput = [document.getElementById(attribute)];\n\t\t\tinput.length = 1;\n\t\t} else {\n\t\t\tinput = document.getElementsByClassName(attribute);\n\t\t}\n\t\tfor (let i = 0; i < input.length; i++) {\n\t\t\tconst wpPickerContainer = WPTB_Helper.findAncestor(input[i], 'wp-picker-container');\n\t\t\tif (wpPickerContainer) {\n\t\t\t\tconst parent = wpPickerContainer.parentNode;\n\t\t\t\tparent.removeChild(wpPickerContainer);\n\t\t\t\tconst newInput = document.createElement('input');\n\t\t\t\tif (isId) {\n\t\t\t\t\tnewInput.setAttribute('id', attribute);\n\t\t\t\t} else {\n\t\t\t\t\tnewInput.classList.add('wptb-element-property', attribute);\n\t\t\t\t}\n\t\t\t\tnewInput.value = '';\n\t\t\t\tparent.appendChild(newInput);\n\t\t\t}\n\t\t}\n\t},\n\tdetectMode() {\n\t\tconst url = window.location.href;\n\t\tconst regex = new RegExp('[?&]table(=([^&#]*)|&|#|$)');\n\t\tconst results = regex.exec(url);\n\t\tif (!results) return false;\n\t\tif (!results[2]) return '';\n\t\treturn decodeURIComponent(results[2].replace(/\\+/g, ' '));\n\t},\n\tgetTableId() {\n\t\tlet tableId = WPTB_Helper.detectMode();\n\t\tif (!tableId) {\n\t\t\ttableId = 'startedid-0';\n\t\t}\n\n\t\treturn tableId;\n\t},\n\tgetColumnWidth(table, cell) {\n\t\tconst { xIndex } = cell.dataset;\n\t\tconst xIndexes = table.querySelectorAll(`[data-x-index=\"${xIndex}\"]`);\n\t\tlet cellWidth = cell.getCellDimensions().width;\n\t\tfor (let i = 0; i < xIndexes.length; i++) {\n\t\t\tif (cellWidth > xIndexes[i].getCellDimensions().width) {\n\t\t\t\tcellWidth = xIndexes[i].getCellDimensions().width;\n\t\t\t}\n\t\t}\n\t\treturn cellWidth;\n\t},\n\tgetRowHeight(table, cell) {\n\t\tconst { yIndex } = cell.dataset;\n\t\tconst yIndexes = table.querySelectorAll(`[data-y-index=\"${yIndex}\"]`);\n\t\tlet cellHeight = cell.getCellDimensions().height;\n\t\tfor (let i = 0; i < yIndexes.length; i++) {\n\t\t\tif (cellHeight > yIndexes[i].getCellDimensions().height) {\n\t\t\t\tcellHeight = yIndexes[i].getCellDimensions().height;\n\t\t\t}\n\t\t}\n\t\treturn cellHeight;\n\t},\n\tnewElementProxy(el) {\n\t\tif (el) {\n\t\t\tconst data = { kind: el };\n\t\t\treturn new WPTB_ElementObject(data);\n\t\t}\n\t},\n\twpColorPickerChange(event, ui) {\n\t\tlet uiColor;\n\t\tif (ui) {\n\t\t\tuiColor = ui.color.toString();\n\t\t} else {\n\t\t\tuiColor = '';\n\t\t}\n\n\t\tconst parent = WPTB_Helper.findAncestor(event.target, 'wp-picker-input-wrap').getElementsByClassName(\n\t\t\t'wptb-color-picker'\n\t\t)[0];\n\t\tlet classe;\n\t\tlet type;\n\t\tlet ps;\n\t\tlet number;\n\t\tclasse = parent.dataset.element.match(/wptb-options-(.+)-(\\d+)/i);\n\t\ttype = classe[1];\n\t\tnumber = classe[2];\n\t\tconst affectedEl = document.getElementsByClassName(`wptb-element-${type}-${number}`)[0];\n\t\tif (type == 'button') {\n\t\t\tif (parent.dataset.type == 'button-text-color') {\n\t\t\t\taffectedEl.getElementsByClassName('wptb-button')[0].style.color = uiColor;\n\t\t\t} else {\n\t\t\t\taffectedEl.getElementsByClassName('wptb-button')[0].style.backgroundColor = uiColor;\n\t\t\t}\n\t\t} else if (type == 'list') {\n\t\t\tconst ps = affectedEl.querySelectorAll('p');\n\t\t\tif (ps.length > 0) {\n\t\t\t\tfor (let i = 0; i < ps.length; i++) {\n\t\t\t\t\tps[i].style.color = uiColor;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type == 'star_rating') {\n\t\t\tif (parent.dataset.type == 'star-color') {\n\t\t\t\tconst ratingStar = affectedEl.querySelectorAll('li');\n\t\t\t\tfor (let i = 0; i < ratingStar.length; i++) {\n\t\t\t\t\tconst span = ratingStar[i].getElementsByTagName('span');\n\t\t\t\t\tfor (let j = 0; j < span.length; j++) {\n\t\t\t\t\t\tspan[j].style.fill = uiColor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (parent.dataset.type == 'numeral-rating-color') {\n\t\t\t\tconst wptbTextMessageSize = affectedEl.querySelector('.wptb-number-rating');\n\t\t\t\twptbTextMessageSize.style.color = uiColor;\n\t\t\t}\n\t\t} else {\n\t\t\taffectedEl.style.color = uiColor;\n\t\t}\n\t},\n\tnumberImputSize(wptbNumberInputs, maxCount, maxValue) {\n\t\twptbNumberInputs.onkeydown = function () {\n\t\t\tlet thisValue = this.value;\n\t\t\tthisValue = String(thisValue);\n\t\t\tif (thisValue[0] == 0) {\n\t\t\t\tthis.value = '';\n\t\t\t} else {\n\t\t\t\tthisValue = thisValue.substring(0, maxCount);\n\t\t\t\tthis.value = thisValue;\n\t\t\t}\n\t\t};\n\t\twptbNumberInputs.onkeyup = function () {\n\t\t\tconst thisValue = this.value;\n\t\t\tif (parseInt(thisValue, 10) > parseInt(maxValue, 10)) {\n\t\t\t\tthis.value = maxValue;\n\t\t\t}\n\n\t\t\tconst wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n\t\t\twptbTableStateSaveManager.tableStateSet();\n\t\t};\n\t},\n\tucfirst(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t},\n\twptbDocumentEventGenerate(eventName, element, details) {\n\t\tif (eventName && element) {\n\t\t\tif (!details) {\n\t\t\t\tdetails = true;\n\t\t\t}\n\t\t\tconst event = new CustomEvent(eventName, { detail: details, bubbles: true });\n\t\t\telement.dispatchEvent(event);\n\t\t}\n\t},\n\t// run script for the pointed element\n\telementStartScript(element, kind) {\n\t\t// let script = element.getElementsByTagName( 'script' );\n\t\tif (!kind) {\n\t\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tkind = infArr[1];\n\t\t\t}\n\t\t}\n\n\t\tif (kind) {\n\t\t\t//                let wpTemplateId = 'wptb-' + kind + '-script';\n\t\t\t//                let template = wp.template( wpTemplateId );\n\t\t\t//                let data  = {elemClass: infArr[0]};\n\t\t\t//                let elementScriptText = template( data );\n\t\t\t//                elementScriptText = elementScriptText.replace(/\\r|\\n|\\t/g, '').trim();\n\t\t\t//\n\t\t\t//                let scriptNew = document.createElement( 'script' );\n\t\t\t//                scriptNew.setAttribute( 'type', 'text/javascript' );\n\t\t\t//                scriptNew.innerHTML = elementScriptText;\n\t\t\t//                element.parentNode.appendChild( scriptNew );\n\n\t\t\t//                element.parentNode.removeChild( scriptNew );\n\t\t\tif (kind in WPTB_ElementsScriptsLauncher) {\n\t\t\t\tconst elementIdMatch = element.getAttribute('class').match(/(wptb-element-\\D+-\\d+\\b)/);\n\t\t\t\tconst elementId = elementIdMatch ? elementIdMatch[0] : null;\n\t\t\t\tWPTB_ElementsScriptsLauncher[kind](element, elementId);\n\t\t\t}\n\t\t}\n\t},\n\t// deletes event handlers from the pointed option element and from all his daughter elements\n\tdeleteEventHandlers(element) {\n\t\tif (element) {\n\t\t\tjQuery(element).off();\n\t\t\tconst elementChildren = element.children;\n\t\t\tif (elementChildren) {\n\t\t\t\tfor (let i = 0; i < elementChildren.length; i++) {\n\t\t\t\t\tWPTB_Helper.deleteEventHandlers(elementChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t}\n\t},\n\t// replace all occurrences in a string\n\treplaceAll(string, search, replace) {\n\t\treturn string.split(search).join(replace);\n\t},\n\t// clears code from TinyMCE attributes\n\telementClearFromTinyMce(element) {\n\t\tconst mceContentBodys = element.querySelectorAll('.mce-content-body');\n\t\tif (mceContentBodys.length > 0) {\n\t\t\tfor (let k = 0; k < mceContentBodys.length; k++) {\n\t\t\t\tmceContentBodys[k].classList.remove('mce-content-body');\n\t\t\t}\n\t\t}\n\n\t\tconst dataMceStyle = element.querySelectorAll('[data-mce-style]');\n\t\tif (dataMceStyle.length > 0) {\n\t\t\tfor (let k = 0; k < dataMceStyle.length; k++) {\n\t\t\t\tdataMceStyle[k].removeAttribute('data-mce-style');\n\t\t\t}\n\t\t}\n\n\t\tconst mceEditFocus = element.querySelectorAll('.mce-edit-focus');\n\t\tif (mceEditFocus.length > 0) {\n\t\t\tfor (let k = 0; k < mceEditFocus.length; k++) {\n\t\t\t\tmceEditFocus[k].classList.remove('mce-edit-focus');\n\t\t\t}\n\t\t}\n\n\t\tconst contentEditable = element.querySelectorAll('[contenteditable]');\n\t\tif (contentEditable.length > 0) {\n\t\t\tfor (let k = 0; k < contentEditable.length; k++) {\n\t\t\t\tcontentEditable[k].removeAttribute('contenteditable');\n\t\t\t}\n\t\t}\n\n\t\tconst spellCheck = element.querySelectorAll('[spellcheck]');\n\t\tif (spellCheck.length > 0) {\n\t\t\tfor (let k = 0; k < spellCheck.length; k++) {\n\t\t\t\tspellCheck[k].removeAttribute('spellcheck');\n\t\t\t}\n\t\t}\n\n\t\tconst mceIds = element.querySelectorAll('[id^=mce_]');\n\t\tif (mceIds.length > 0) {\n\t\t\tfor (let k = 0; k < mceIds.length; k++) {\n\t\t\t\tmceIds[k].removeAttribute('id');\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t},\n\telementOptionContainerCustomClassSet(targetInput, customClassForContainer) {\n\t\tif (targetInput && customClassForContainer) {\n\t\t\tconst containerElement = WPTB_Helper.findAncestor(targetInput, 'wptb-element-option');\n\t\t\tif (containerElement) {\n\t\t\t\tcontainerElement.classList.add(customClassForContainer);\n\t\t\t}\n\t\t}\n\t},\n\telementOptionContainerAdditionalStyles(targetInput, containerAdditionalStyles) {\n\t\tif (targetInput && containerAdditionalStyles) {\n\t\t\tconst containerElement = WPTB_Helper.findAncestor(targetInput, 'wptb-element-option');\n\t\t\tconst containerStylesArrOne = containerAdditionalStyles.split(';');\n\n\t\t\tif (containerElement && containerStylesArrOne) {\n\t\t\t\tfunction containerStylesSet(containerStyleStr, containerElement) {\n\t\t\t\t\tif (containerStyleStr) {\n\t\t\t\t\t\tcontainerStyleStrArr = containerStyleStr.split(':');\n\n\t\t\t\t\t\tif (containerStyleStrArr && Array.isArray(containerStyleStrArr)) {\n\t\t\t\t\t\t\tcontainerElement.style[containerStyleStrArr[0]] = containerStyleStrArr[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (containerStylesArrOne && Array.isArray(containerStylesArrOne)) {\n\t\t\t\t\tfor (let i = 0; i < containerStylesArrOne.length; i++) {\n\t\t\t\t\t\tif (containerStylesArrOne[i]) {\n\t\t\t\t\t\t\tcontainerStylesSet(containerStylesArrOne[i], containerElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcontainerStylesSet(containerStylesArrOne, containerElement);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// function which set handler for event of changes of control\n\tcontrolsInclude(element, functionHandler, acceptEventValues = false) {\n\t\tif (element && typeof element === 'object' && typeof functionHandler === 'function') {\n\t\t\telement.addEventListener(\n\t\t\t\t'element:controls:active',\n\t\t\t\tfunction () {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!element.hasOwnProperty('controlConnectFunctionsName') ||\n\t\t\t\t\t\t!Array.isArray(element.controlConnectFunctionsName) ||\n\t\t\t\t\t\telement.controlConnectFunctionsName.indexOf(functionHandler.name) == -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\t\t\t\tlet elementKind;\n\n\t\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\t\telementKind = infArr[1];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//                if( ! element.hasOwnProperty( '—ÅontrolsConnectIndic' ) || element.—ÅontrolsConnectIndic !== true && elementKind  ) {\n\t\t\t\t\t\t//                    let elementsSettingsTemplateJs = document.getElementsByClassName( 'wptb-element-datas' );\n\t\t\t\t\t\t//                    if( elementsSettingsTemplateJs.length > 0 ) {\n\t\t\t\t\t\t//                        elementsSettingsTemplateJs = elementsSettingsTemplateJs[0];\n\t\t\t\t\t\t//\n\t\t\t\t\t\t//                        let elementsSettings = elementsSettingsTemplateJs.innerHTML;\n\t\t\t\t\t\t//                        let controlClassesNames = [];\n\t\t\t\t\t\t//                        if( elementsSettings ) {\n\t\t\t\t\t\t//                            elementsSettings = elementsSettings.trim();\n\t\t\t\t\t\t//                            elementsSettings = JSON.parse( elementsSettings );\n\t\t\t\t\t\t//                            if( elementsSettings && typeof elementsSettings === 'object' ) {\n\t\t\t\t\t\t//                                if( 'tmpl-wptb-el-datas-' + infArr[1] + '-' + infArr[2] in elementsSettings ) {\n\t\t\t\t\t\t//                                    let elementSettings = elementsSettings['tmpl-wptb-el-datas-' + infArr[1] + '-' + infArr[2]];\n\t\t\t\t\t\t//                                    if( elementSettings && typeof elementSettings === 'object' ) {\n\t\t\t\t\t\t//                                        Object.keys( elementSettings ).forEach( function( key ) {\n\t\t\t\t\t\t//                                            let regularText = new RegExp( 'data-wptb-el-' + elementKind + '-(\\\\d+)-([a-zA-Z0-9_-]+)', \"i\" );\n\t\t\t\t\t\t//                                            let keyInfArr = key.match( regularText );\n\t\t\t\t\t\t//                                            if( keyInfArr && Array.isArray( keyInfArr ) ) {\n\t\t\t\t\t\t//                                                let controlClass = key.replace( 'data-', '' );\n\t\t\t\t\t\t//                                                controlClassesNames.push( [controlClass, keyInfArr[2]] );\n\t\t\t\t\t\t//                                            }\n\t\t\t\t\t\t//                                        });\n\t\t\t\t\t\t//                                    }\n\t\t\t\t\t\t//                                }\n\t\t\t\t\t\t//                            }\n\t\t\t\t\t\t//                        }\n\t\t\t\t\t\t//                    }\n\t\t\t\t\t\t//                }\n\t\t\t\t\t\tif (elementKind) {\n\t\t\t\t\t\t\tconst elementOptionsGroupIds = element.optionsGroupIds;\n\t\t\t\t\t\t\tif (elementOptionsGroupIds && Array.isArray(elementOptionsGroupIds)) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < elementOptionsGroupIds.length; i++) {\n\t\t\t\t\t\t\t\t\tconst elementOptionsGroupId = elementOptionsGroupIds[i];\n\n\t\t\t\t\t\t\t\t\tconst elementOptionsGroup = document.getElementById(elementOptionsGroupId);\n\n\t\t\t\t\t\t\t\t\tlet controlActiveElements = elementOptionsGroup.querySelectorAll(\n\t\t\t\t\t\t\t\t\t\t'.wptb-element-property'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tcontrolActiveElements = [...controlActiveElements];\n\n\t\t\t\t\t\t\t\t\tcontrolActiveElements.map((controlActiveElement) => {\n\t\t\t\t\t\t\t\t\t\tconst regularText = new RegExp(\n\t\t\t\t\t\t\t\t\t\t\t`wptb-el-${elementKind}-(\\\\d+)-([a-zA-Z0-9_-]+)`,\n\t\t\t\t\t\t\t\t\t\t\t'i'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tconst controlInfArr = controlActiveElement.className.match(regularText);\n\t\t\t\t\t\t\t\t\t\tif (controlInfArr && Array.isArray(controlInfArr)) {\n\t\t\t\t\t\t\t\t\t\t\tconst controlUnicClassName = controlInfArr[0];\n\n\t\t\t\t\t\t\t\t\t\t\telement.addEventListener(\n\t\t\t\t\t\t\t\t\t\t\t\t`wptb-control:${controlUnicClassName}`,\n\t\t\t\t\t\t\t\t\t\t\t\tfunction (e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst controls = {};\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst controlName = controlInfArr[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst control = document.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolUnicClassName\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (control.length > 0 && controlName) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (acceptEventValues) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols[controlName] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttargetValue: targetControlValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teventValue: e.detail.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols[controlName] = targetControlValue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfunctionHandler(controls, element);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// let elementOptionsContainer = document.querySelector( '.wptb-element-options.wptb-options-' + infArr[1] + '-' + infArr[2] );\n\n\t\t\t\t\t\t\t// from time to time depend on table cells hierarchy, cell td items may catch mouse clicks which are intended for elements. since the active section is not cell management, this will gives and unharmfull error of not found element, simple check for null equality will be sufficient for now.\n\t\t\t\t\t\t\t// if(!elementOptionsContainer){\n\t\t\t\t\t\t\t//     return;\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t// let elementOptions = elementOptionsContainer.querySelectorAll( '.wptb-element-option' );\n\t\t\t\t\t\t\t// let controlActiveElements = elementOptions[i].querySelector( '.wptb-element-property' );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// for( let i = 0; i < elementOptions.length; i++ ) {\n\t\t\t\t\t\t\t//     let controlActiveElement = elementOptions[i].querySelector( '.wptb-element-property' );\n\t\t\t\t\t\t\t//     if( controlActiveElement ) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t//     }\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!element.controlConnectFunctionsName &&\n\t\t\t\t\t\t\t\t!Array.isArray(element.controlConnectFunctionsName)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\telement.controlConnectFunctionsName = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telement.controlConnectFunctionsName.push(functionHandler.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\t},\n\toneControlInclude(element, functionHandler, controlName) {\n\t\tif (\n\t\t\telement &&\n\t\t\ttypeof element === 'object' &&\n\t\t\ttypeof functionHandler === 'function' &&\n\t\t\ttypeof controlName === 'string'\n\t\t) {\n\t\t\tconst infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tlet elementKind;\n\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\telementKind = infArr[1].split('-')[0];\n\n\t\t\t\tconst wptbContrlStacksConfigId = `wptb-${elementKind}-control-stack`;\n\t\t\t\tconst tmplControlsConfig = wp.template(wptbContrlStacksConfigId);\n\t\t\t\tconst data = {\n\t\t\t\t\tcontainer: `.${infArr[0]}`,\n\t\t\t\t};\n\t\t\t\tconst jsonControlsConfigJson = tmplControlsConfig(data);\n\t\t\t\tconst jsonControlsConfig = JSON.parse(jsonControlsConfigJson);\n\n\t\t\t\tif (\n\t\t\t\t\tjsonControlsConfig &&\n\t\t\t\t\ttypeof jsonControlsConfig === 'object' &&\n\t\t\t\t\tjsonControlsConfig.hasOwnProperty(controlName)\n\t\t\t\t) {\n\t\t\t\t\tconst controlClassName = `wptb-el-${infArr[1]}-${controlName}`;\n\n\t\t\t\t\telement.addEventListener(\n\t\t\t\t\t\t`wptb-control:${controlClassName}`,\n\t\t\t\t\t\tfunction (event) {\n\t\t\t\t\t\t\tconst control = document.getElementsByClassName(controlClassName);\n\t\t\t\t\t\t\tif (control.length > 0) {\n\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(control);\n\n\t\t\t\t\t\t\t\tfunctionHandler(targetControlValue, element);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t//\n\tinnerElementCopyIncludeHandler(element, functionHandler) {\n\t\tif (element && typeof element === 'object' && typeof functionHandler === 'function') {\n\t\t\telement.addEventListener(\n\t\t\t\t'wptb-inner-element:copy',\n\t\t\t\tfunction (event) {\n\t\t\t\t\tconst innerElement = event.detail;\n\t\t\t\t\tif (innerElement) {\n\t\t\t\t\t\tWPTB_Helper.elementClearFromTinyMce(innerElement);\n\t\t\t\t\t\tfunctionHandler(innerElement, element);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\t},\n\t/**\n\t * Sets the control elements when changing which to will restart this control\n\t *\n\t * @param {Array} dependOnControlName\n\t * @param {string} targetControlElementClass\n\t * @param {Array} valueDependOnControlCorrect\n\t * @param {string} kind\n\t * @param {HTMLElement} element\n\t */\n\tvalueDependOnControl(dependOnControlName, targetControlElementClass, valueDependOnControlCorrect, kind, element) {\n\t\tfunction dependOnControlDataGet(dependOnControlName, targetControlElementClass, valueDependOnControlCorrect) {\n\t\t\tif (typeof dependOnControlName === 'string') {\n\t\t\t\tdependOnControlName = [dependOnControlName];\n\t\t\t}\n\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\t\t\tconst valueDependOnControl = {};\n\t\t\tconst dependOnControlElementsArr = [];\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tconst controlName = infArr[3];\n\t\t\t\tlet dependOnControlElements;\n\t\t\t\tconst valueDependOnControlCorrectObj = {};\n\t\t\t\tif (Array.isArray(valueDependOnControlCorrect)) {\n\t\t\t\t\tif (Array.isArray(valueDependOnControlCorrect[0])) {\n\t\t\t\t\t\tvalueDependOnControlCorrect.map((s) => {\n\t\t\t\t\t\t\tvalueDependOnControlCorrectObj[s[0]] = [s[1], s[2]];\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalueDependOnControlCorrectObj[valueDependOnControlCorrect[0]] = [\n\t\t\t\t\t\t\tvalueDependOnControlCorrect[1],\n\t\t\t\t\t\t\tvalueDependOnControlCorrect[2],\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdependOnControlName.map((s) => {\n\t\t\t\t\tconst dependOnControlElementClass = targetControlElementClass.replace(controlName, s);\n\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\tdependOnControlElements = document.getElementsByClassName(dependOnControlElementClass);\n\t\t\t\t\t\tif (dependOnControlElements.length > 0 && dependOnControlElements[0].type) {\n\t\t\t\t\t\t\tvalueDependOnControl[s] = dependOnControlElements[0].value;\n\t\t\t\t\t\t\tif (s in valueDependOnControlCorrectObj) {\n\t\t\t\t\t\t\t\tif (valueDependOnControlCorrectObj[s][1] === 'integer') {\n\t\t\t\t\t\t\t\t\tvalueDependOnControl[s] =\n\t\t\t\t\t\t\t\t\t\tparseInt(valueDependOnControl[s]) +\n\t\t\t\t\t\t\t\t\t\tparseInt(valueDependOnControlCorrectObj[s][0]);\n\t\t\t\t\t\t\t\t} else if (valueDependOnControlCorrectObj[s][1] === 'string') {\n\t\t\t\t\t\t\t\t\tvalueDependOnControl[s] =\n\t\t\t\t\t\t\t\t\t\tvalueDependOnControl[s] + valueDependOnControlCorrectObj[s][0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdependOnControlElementsArr.push(dependOnControlElements[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn [valueDependOnControl, dependOnControlElementsArr];\n\t\t}\n\n\t\tconst dependOnControlData = dependOnControlDataGet(\n\t\t\tdependOnControlName,\n\t\t\ttargetControlElementClass,\n\t\t\tvalueDependOnControlCorrect\n\t\t);\n\t\tWPTB_Helper.elementOptionsSet(kind, element, dependOnControlData[0], targetControlElementClass);\n\n\t\tObject.keys(dependOnControlData[0]).forEach(function (key) {\n\t\t\tconst infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tconst unicClass = `wptb-el-${infArr[1]}-${[key]}`;\n\t\t\telement.addEventListener(\n\t\t\t\t`wptb-control:${unicClass}`,\n\t\t\t\tfunction (event) {\n\t\t\t\t\tconst dependOnControlData = dependOnControlDataGet(\n\t\t\t\t\t\tdependOnControlName,\n\t\t\t\t\t\ttargetControlElementClass,\n\t\t\t\t\t\tvalueDependOnControlCorrect\n\t\t\t\t\t);\n\t\t\t\t\tWPTB_Helper.elementOptionsSet(kind, element, dependOnControlData[0], targetControlElementClass);\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t});\n\t},\n\t/**\n\t * Sets the visibility of one control to depend on the state of other controls\n\t *\n\t * @param dependOnMain\n\t * @param targetControlElementClass\n\t */\n\tappearDependOnControl(dependOnMain, targetControlElementClass) {\n\t\tif (Array.isArray(dependOnMain)) {\n\t\t\tif (typeof dependOnMain[0] === 'string') {\n\t\t\t\tdependOnMain = [dependOnMain];\n\t\t\t} else if (!Array.isArray(dependOnMain[0])) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst dependOnControlElementsValue = {};\n\t\t\tfor (let i = 0; i < dependOnMain.length; i++) {\n\t\t\t\tconst dependOn = dependOnMain[i];\n\t\t\t\tconst dependOnControlName = dependOn[0];\n\t\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tconst controlName = infArr[3];\n\n\t\t\t\t\tconst dependOnControlElementClass = targetControlElementClass.replace(\n\t\t\t\t\t\tcontrolName,\n\t\t\t\t\t\tdependOnControlName\n\t\t\t\t\t);\n\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\tconst dependOnControlElements = document.getElementsByClassName(dependOnControlElementClass);\n\t\t\t\t\t\tif (dependOnControlElements.length > 0) {\n\t\t\t\t\t\t\tdependOnControlElementsValue[dependOn[0]] = [\n\t\t\t\t\t\t\t\tdependOnControlElementValue(dependOnControlElements, dependOn),\n\t\t\t\t\t\t\t\tdependOnControlElements,\n\t\t\t\t\t\t\t\tdependOn,\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst targetControlElements = document.getElementsByClassName(targetControlElementClass);\n\t\t\tif (targetControlElements.length > 0) {\n\t\t\t\tconst targetControlElement = targetControlElements[0];\n\t\t\t\tconst controlContainerElem = WPTB_Helper.findAncestor(targetControlElement, 'wptb-element-option');\n\n\t\t\t\tif (controlContainerElem) {\n\t\t\t\t\tshowHideTargetControlElement(controlContainerElem, dependOnControlElementsValue);\n\n\t\t\t\t\tObject.keys(dependOnControlElementsValue).map((k) => {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dependOnControlElementsValue, k)) {\n\t\t\t\t\t\t\tconst dependOnControlElements = dependOnControlElementsValue[k][1];\n\t\t\t\t\t\t\tconst dependOnControlElement = dependOnControlElements[0];\n\t\t\t\t\t\t\tdependOnControlElement.addEventListener(\n\t\t\t\t\t\t\t\t'change',\n\t\t\t\t\t\t\t\tdependOnControlElementChangeHandler,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction dependOnControlElementChangeHandler(event) {\n\t\t\t\t\t\t\tconst dependOn = dependOnControlElementsValue[k][2];\n\t\t\t\t\t\t\tconst dependOnControlElements = dependOnControlElementsValue[k][1];\n\t\t\t\t\t\t\tdependOnControlElementsValue[dependOn[0]] = [\n\t\t\t\t\t\t\t\tdependOnControlElementValue(dependOnControlElements, dependOn),\n\t\t\t\t\t\t\t\tdependOnControlElements,\n\t\t\t\t\t\t\t\tdependOn,\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tshowHideTargetControlElement(controlContainerElem, dependOnControlElementsValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction showHideTargetControlElement(controlContainerElem, dependOnControlElementsValue) {\n\t\t\t\tlet display = 'block';\n\t\t\t\tlet targetControlInactiveVal;\n\t\t\t\tObject.keys(dependOnControlElementsValue).map((k) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dependOnControlElementsValue, k)) {\n\t\t\t\t\t\tif (dependOnControlElementsValue[k][0] === false) {\n\t\t\t\t\t\t\tdisplay = 'none';\n\t\t\t\t\t\t\tif (dependOnControlElementsValue[k][2][3]) {\n\t\t\t\t\t\t\t\ttargetControlInactiveVal = dependOnControlElementsValue[k][2][3];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (controlContainerElem.style.display !== display) {\n\t\t\t\t\tcontrolContainerElem.style.display = display;\n\n\t\t\t\t\tif (display === 'none' && targetControlInactiveVal) {\n\t\t\t\t\t\ttargetControlElements[0].dataset.controlActiveVal = WPTB_Helper.targetControlValueGet(\n\t\t\t\t\t\t\ttargetControlElements\n\t\t\t\t\t\t);\n\t\t\t\t\t\tWPTB_Helper.targetControlValueGet(targetControlElements, targetControlInactiveVal);\n\t\t\t\t\t} else if (display === 'block' && targetControlElements[0].dataset.controlActiveVal) {\n\t\t\t\t\t\tWPTB_Helper.targetControlValueGet(\n\t\t\t\t\t\t\ttargetControlElements,\n\t\t\t\t\t\t\ttargetControlElements[0].dataset.controlActiveVal\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction dependOnControlElementValue(dependOnControlElements, dependOn) {\n\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(dependOnControlElements);\n\n\t\t\t\tlet returnBool = false;\n\t\t\t\tfor (let i = 1; i <= 2; i++) {\n\t\t\t\t\tif (dependOn[i] && Array.isArray(dependOn[i])) {\n\t\t\t\t\t\tlet coincided;\n\t\t\t\t\t\tlet hasNumberAnyParams = false;\n\t\t\t\t\t\tfor (let j = 0; j < dependOn[i].length; j++) {\n\t\t\t\t\t\t\tif (typeof dependOn[i][j] === 'string' && dependOn[i][j].indexOf('numberAny >') !== -1) {\n\t\t\t\t\t\t\t\thasNumberAnyParams = true;\n\t\t\t\t\t\t\t\tconst xNum = parseInt(dependOn[i][j].match(/\\d+/));\n\t\t\t\t\t\t\t\tif (targetControlValue > xNum) {\n\t\t\t\t\t\t\t\t\tcoincided = true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcoincided = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\ttypeof dependOn[i][j] === 'string' &&\n\t\t\t\t\t\t\t\tdependOn[i][j].indexOf('numberAny <') !== -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\thasNumberAnyParams = true;\n\t\t\t\t\t\t\t\tconst xNum = parseInt(dependOn[i][j].match(/\\d+/));\n\t\t\t\t\t\t\t\tif (targetControlValue < xNum) {\n\t\t\t\t\t\t\t\t\tcoincided = true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcoincided = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (dependOn[i][j] === targetControlValue) {\n\t\t\t\t\t\t\t\tcoincided = true;\n\t\t\t\t\t\t\t\tif (!hasNumberAnyParams) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (coincided && i === 1) {\n\t\t\t\t\t\t\treturnBool = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (coincided && i === 2) {\n\t\t\t\t\t\t\treturnBool = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn returnBool;\n\t\t\t}\n\t\t}\n\t},\n\t//\n\n\t/**\n\t * Switch toggle\n\t *\n\t * @param dataToggleSwitch\n\t * @param targetControlElementClass\n\t */\n\ttoggleSwitch(dataToggleSwitch, targetControlElementClass) {\n\t\tif (Array.isArray(dataToggleSwitch)) {\n\t\t\tif (dataToggleSwitch[1] && typeof dataToggleSwitch[1] === 'object') {\n\t\t\t\tconst dependOnParams = dataToggleSwitch[1];\n\t\t\t\tconst toggleSwitchExec = false;\n\t\t\t\tObject.keys(dependOnParams).map((k) => {\n\t\t\t\t\tconst dependOnValue = dependOnParams[k];\n\n\t\t\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\tconst controlName = infArr[3];\n\n\t\t\t\t\t\tconst dependOnControlElementClass = targetControlElementClass.replace(controlName, k);\n\t\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\t\tconst dependOnControlElements = document.getElementsByClassName(\n\t\t\t\t\t\t\t\tdependOnControlElementClass\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (dependOnControlElements.length > 0) {\n\t\t\t\t\t\t\t\tconst dependOnControlElement = dependOnControlElements[0];\n\t\t\t\t\t\t\t\tdependOnControlElement.addEventListener(\n\t\t\t\t\t\t\t\t\t'change',\n\t\t\t\t\t\t\t\t\ttoggleSwitchExecuteCheckRun.bind(null, dependOnControlElementClass, dependOnValue),\n\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (toggleSwitchExec) {\n\t\t\t\t\ttoggleSwitchExecute();\n\t\t\t\t}\n\t\t\t\tfunction toggleSwitchExecuteCheckRun(dependOnControlElementClass, dependOnValue) {\n\t\t\t\t\tif (dependOnControlElementClass) {\n\t\t\t\t\t\tconst dependOnControlElements = document.getElementsByClassName(dependOnControlElementClass);\n\t\t\t\t\t\tif (dependOnControlElements.length > 0) {\n\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(dependOnControlElements);\n\n\t\t\t\t\t\t\tif (targetControlValue === dependOnValue) {\n\t\t\t\t\t\t\t\ttoggleSwitchExecute();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfunction toggleSwitchExecute() {\n\t\t\t\t\tconst elems = document.getElementsByClassName(targetControlElementClass);\n\t\t\t\t\tif (elems.length && WPTB_Helper.targetControlValueGet(elems) !== dataToggleSwitch[0]) {\n\t\t\t\t\t\tif (dataToggleSwitch[0] === 'unchecked') {\n\t\t\t\t\t\t\telems[0].checked = false;\n\t\t\t\t\t\t} else if (dataToggleSwitch[0] === 'checked') {\n\t\t\t\t\t\t\telems[0].checked = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (dataToggleSwitch[2] === undefined || dataToggleSwitch[2] === true) {\n\t\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('change', elems[0], { eventType: 'toggleSwitch' });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// TODO switchThirdToggleIf\n\tswitchThirdToggleIf( dataSwitchThirdToggleIf, dependencyElemClass ) {\n\t\tif (Array.isArray(dataSwitchThirdToggleIf)) {\n\t\t\tconst dependencyElemVal = dataSwitchThirdToggleIf[0];\n\t\t\tconst dependencyElem = document.querySelector('.' + dependencyElemClass);\n\t\t\tif (dataSwitchThirdToggleIf[1] && typeof dataSwitchThirdToggleIf[1] === 'object'){\n\t\t\t\tconst dependencyParameters = dataSwitchThirdToggleIf[1];\n\t\t\t\tObject.keys(dependencyParameters).map((k) => {\n\t\t\t\t\tconst dependentElemVal = dependencyParameters[k];\n\t\t\t\t\tconst infArr = dependencyElemClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\t\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\t\tconst controlName = infArr[3];\n\t\t\t\t\t\tconst dependentElemClass = dependencyElemClass.replace(controlName, k);\n\t\t\t\t\t\tif (dependentElemClass) {\n\t\t\t\t\t\t\tconst dependentElems = document.getElementsByClassName(\n\t\t\t\t\t\t\t\tdependentElemClass\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (dependentElems.length > 0) {\n\t\t\t\t\t\t\t\tconst dependentElem = dependentElems[0];\n\t\t\t\t\t\t\t\tconsole.log(dependentElem)\n\t\t\t\t\t\t\t\tdependencyElem.addEventListener(\n\t\t\t\t\t\t\t\t\t'change',\n\t\t\t\t\t\t\t\t\tswitchThirdToggleExecute.bind( null, dependencyElem, dependencyElemVal, dependentElem, dependentElemVal ),\n\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfunction switchThirdToggleExecute(dependencyElem, dependencyElemVal, dependentElem, dependentElemVal) {\n\t\t\t\t\tif( 'checked' in dependentElem ) {\n\t\t\t\t\t\tif( ( dependencyElem.checked === true && dependencyElemVal === 'checked' ) ||\n\t\t\t\t\t\t\t( dependencyElem.checked === false && dependencyElemVal === 'unchecked' ) ) {\n\t\t\t\t\t\t\tif( dependentElemVal === 'checked' ) {\n\t\t\t\t\t\t\t\tdependentElem.checked = true;\n\t\t\t\t\t\t\t} else if( dependentElemVal === 'unchecked' ) {\n\t\t\t\t\t\t\t\tdependentElem.checked = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (dataSwitchThirdToggleIf[2] === undefined || dataSwitchThirdToggleIf[2] === true) {\n\t\t\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate(\n\t\t\t\t\t\t\t\t\t'change',\n\t\t\t\t\t\t\t\t\tdependentElem,\n\t\t\t\t\t\t\t\t\t{ eventType: 'switchThirdToggleIf' }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tcontrolsStateManager(targetControlClass, controlChangeIndic) {\n\t\tconst targetControls = document.getElementsByClassName(targetControlClass);\n\t\tif (targetControls.length > 0) {\n\t\t\t// targetControls = targetControls[0];\n\n\t\t\tconst infArr = targetControlClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tlet selectorElement;\n\t\t\t\tselectorElement = document.querySelector(`.wptb-element-${infArr[1]}`);\n\n\t\t\t\tif (selectorElement) {\n\t\t\t\t\tlet elementsSettingsTemplatesJs;\n\t\t\t\t\tconst elementSettings = {};\n\t\t\t\t\tlet elementsSettings;\n\t\t\t\t\telementsSettingsTemplatesJs = document.getElementsByClassName('wptb-element-datas');\n\t\t\t\t\tif (elementsSettingsTemplatesJs.length == 0 || elementsSettingsTemplatesJs[0].innerHTML == '') {\n\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(targetControls);\n\t\t\t\t\t\telementSettings[`data-${targetControlClass}`] = targetControlValue;\n\n\t\t\t\t\t\telementsSettings = {};\n\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] = elementSettings;\n\t\t\t\t\t\telementsSettings = JSON.stringify(elementsSettings);\n\n\t\t\t\t\t\tif (elementsSettingsTemplatesJs.length == 0) {\n\t\t\t\t\t\t\telementsSettingsTemplatesJs = document.createElement('script');\n\t\t\t\t\t\t\telementsSettingsTemplatesJs.setAttribute('type', 'text/html');\n\t\t\t\t\t\t\telementsSettingsTemplatesJs.setAttribute('class', 'wptb-element-datas');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telementsSettingsTemplatesJs = elementsSettingsTemplatesJs[0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telementsSettingsTemplatesJs.innerHTML = elementsSettings;\n\n\t\t\t\t\t\tconst body = document.getElementsByTagName('body')[0];\n\t\t\t\t\t\tbody.appendChild(elementsSettingsTemplatesJs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementsSettingsTemplatesJs = elementsSettingsTemplatesJs[0];\n\t\t\t\t\t\telementsSettings = elementsSettingsTemplatesJs.innerHTML;\n\t\t\t\t\t\tif (elementsSettings) {\n\t\t\t\t\t\t\telementsSettings = elementsSettings.trim();\n\t\t\t\t\t\t\telementsSettings = JSON.parse(elementsSettings);\n\n\t\t\t\t\t\t\tif (elementsSettings && typeof elementsSettings === 'object') {\n\t\t\t\t\t\t\t\tif (controlChangeIndic) {\n\t\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(targetControls);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings) ||\n\t\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] !== 'object'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t] = targetControlValue;\n\t\t\t\t\t\t\t\t\telementsSettingsTemplatesJs.innerHTML = JSON.stringify(elementsSettings);\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings &&\n\t\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] === 'object' &&\n\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}` in\n\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`]\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tconst targetControlValue = WPTB_Helper.targetControlValueGet(targetControls);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings) ||\n\t\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] !== 'object'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t] = targetControlValue;\n\t\t\t\t\t\t\t\t\telementsSettingsTemplatesJs.innerHTML = JSON.stringify(elementsSettings);\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t`tmpl-wptb-el-datas-${infArr[1]}` in elementsSettings &&\n\t\t\t\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`] === 'object' &&\n\t\t\t\t\t\t\t\t\t`data-${targetControlClass}` in elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`]\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < targetControls.length; i++) {\n\t\t\t\t\t\t\t\t\t\tif (targetControls[i].type == 'checkbox') {\n\t\t\t\t\t\t\t\t\t\t\tlet targetControlValue;\n\t\t\t\t\t\t\t\t\t\t\tif (targetControls[i].name) {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControlValue =\n\t\t\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t][targetControls[i].name];\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControlValue =\n\t\t\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (targetControlValue == 'checked') {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControls[i].checked = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (targetControlValue == 'unchecked') {\n\t\t\t\t\t\t\t\t\t\t\t\ttargetControls[i].checked = false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\ttargetControls[i].value =\n\t\t\t\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}`][\n\t\t\t\t\t\t\t\t\t\t\t\t\t`data-${targetControlClass}`\n\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t//\n\ttargetControlValueGet(targetControls, val) {\n\t\tlet targetControlValue;\n\t\tfor (let i = 0; i < targetControls.length; i++) {\n\t\t\tif (targetControls[i].type == 'checkbox' && targetControls[i].name) {\n\t\t\t\tif (val) {\n\t\t\t\t\tif (val === 'checked') {\n\t\t\t\t\t\ttargetControls[i].checked = true;\n\t\t\t\t\t} else if (val === 'unchecked') {\n\t\t\t\t\t\ttargetControls[i].checked = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!targetControlValue) targetControlValue = {};\n\t\t\t\t\tif (targetControls[i].checked == true) {\n\t\t\t\t\t\ttargetControlValue[targetControls[i].name] = 'checked';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttargetControlValue[targetControls[i].name] = 'unchecked';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (targetControls[i].type == 'checkbox') {\n\t\t\t\tif (val) {\n\t\t\t\t\tif (val === 'checked') {\n\t\t\t\t\t\ttargetControls[i].checked = true;\n\t\t\t\t\t} else if (val === 'unchecked') {\n\t\t\t\t\t\ttargetControls[i].checked = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (targetControls[i].checked == true) {\n\t\t\t\t\ttargetControlValue = 'checked';\n\t\t\t\t} else {\n\t\t\t\t\ttargetControlValue = 'unchecked';\n\t\t\t\t}\n\t\t\t} else if (targetControls[i].type) {\n\t\t\t\tif (val) {\n\t\t\t\t\ttargetControls[i].value = val;\n\t\t\t\t} else {\n\t\t\t\t\ttargetControlValue = targetControls[i].value;\n\t\t\t\t}\n\t\t\t} else if (targetControls[i].dataset.alignmentValue && targetControls[i].classList.contains('selected')) {\n\t\t\t\tif (val) {\n\t\t\t\t\ttargetControls[i].dataset.alignmentValue = val;\n\t\t\t\t} else {\n\t\t\t\t\ttargetControlValue = targetControls[i].dataset.alignmentValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn targetControlValue;\n\t},\n\t//\n\telementControlsStateCopy(elementProt, copyElem) {\n\t\tif (elementProt && copyElem) {\n\t\t\tconst infArrProt = elementProt.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tconst infArrCopy = copyElem.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tif (infArrProt && Array.isArray(infArrProt) && infArrCopy && Array.isArray(infArrCopy)) {\n\t\t\t\tconst elemProtKind = infArrProt[1];\n\t\t\t\tconst elemCopyKind = infArrCopy[1];\n\t\t\t\tlet elementsSettingsTemplateJs = document.getElementsByClassName('wptb-element-datas');\n\t\t\t\tif (elementsSettingsTemplateJs.length > 0) {\n\t\t\t\t\telementsSettingsTemplateJs = elementsSettingsTemplateJs[0];\n\n\t\t\t\t\tlet elementsSettings = elementsSettingsTemplateJs.innerHTML;\n\t\t\t\t\tif (elementsSettings) {\n\t\t\t\t\t\telementsSettings = elementsSettings.trim();\n\t\t\t\t\t\telementsSettings = JSON.parse(elementsSettings);\n\n\t\t\t\t\t\tif (elementsSettings && typeof elementsSettings === 'object') {\n\t\t\t\t\t\t\tconst elementSettingsProt = elementsSettings[`tmpl-wptb-el-datas-${elemProtKind}`];\n\t\t\t\t\t\t\tif (elementSettingsProt && typeof elementSettingsProt === 'object') {\n\t\t\t\t\t\t\t\tconst elementSettingsCopy = {};\n\n\t\t\t\t\t\t\t\tObject.keys(elementSettingsProt).forEach(function (key) {\n\t\t\t\t\t\t\t\t\tconst elementSettingValue = elementSettingsProt[key];\n\t\t\t\t\t\t\t\t\tconst elementSettingKeyCopy = key.replace(elemProtKind, elemCopyKind);\n\t\t\t\t\t\t\t\t\telementSettingsCopy[elementSettingKeyCopy] = elementSettingValue;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (Object.keys(elementSettingsCopy).length > 0) {\n\t\t\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${elemCopyKind}`] = elementSettingsCopy;\n\n\t\t\t\t\t\t\t\t\telementsSettings = JSON.stringify(elementsSettings);\n\t\t\t\t\t\t\t\t\telementsSettingsTemplateJs.innerHTML = elementsSettings;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t//\n\telementControlsStateDelete(element, nameControl) {\n\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\tconst body = document.getElementsByTagName('body')[0];\n\t\tlet wptbElementDatas = body.getElementsByClassName('wptb-element-datas');\n\t\tif (infArr && Array.isArray(infArr) && wptbElementDatas.length > 0) {\n\t\t\twptbElementDatas = wptbElementDatas[0];\n\t\t\tlet elementsSettings = wptbElementDatas.innerHTML;\n\t\t\tif (elementsSettings) {\n\t\t\t\telementsSettings = elementsSettings.trim();\n\t\t\t\telementsSettings = JSON.parse(elementsSettings);\n\t\t\t\tif (\n\t\t\t\t\telementsSettings &&\n\t\t\t\t\ttypeof elementsSettings === 'object' &&\n\t\t\t\t\t`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}` in elementsSettings\n\t\t\t\t) {\n\t\t\t\t\tif (!nameControl) {\n\t\t\t\t\t\tdelete elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`];\n\t\t\t\t\t} else if (\n\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`] &&\n\t\t\t\t\t\ttypeof elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`] === 'object' &&\n\t\t\t\t\t\t`data-wptb-el-${infArr[1]}-${infArr[2]}-${nameControl}` in\n\t\t\t\t\t\t\telementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`]\n\t\t\t\t\t) {\n\t\t\t\t\t\tdelete elementsSettings[`tmpl-wptb-el-datas-${infArr[1]}-${infArr[2]}`][\n\t\t\t\t\t\t\t`data-wptb-el-${infArr[1]}-${infArr[2]}-${nameControl}`\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Object.keys(elementsSettings).length == 0) {\n\t\t\t\t\t\tbody.removeChild(wptbElementDatas);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementsSettings = JSON.stringify(elementsSettings);\n\t\t\t\t\t\twptbElementDatas.innerHTML = elementsSettings;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tactiveElement: null,\n\telementOptionsSet(kind, element, valueDependOnControl, targetControlElementClass) {\n\t\tconst elementIdClassMatch = element.getAttribute('class').match(/(?<elementId>wptb-element-.+-\\d+)/);\n\t\tconst id = element.getAttribute('id');\n\t\tlet cellId = null;\n\n\t\t// prepare cell id if element is a table cell\n\t\tif (element.getAttribute('class').includes('wptb-cell')) {\n\t\t\tconst { xIndex, yIndex } = element.dataset;\n\t\t\tcellId = `cell_${xIndex}-${yIndex}`;\n\t\t}\n\n\t\tconst elementIdClass = elementIdClassMatch ? elementIdClassMatch.groups.elementId : null;\n\n\t\t// use class match or id of target element for option set identification\n\t\tconst decisiveAttr = elementIdClass || id || cellId || null;\n\n\t\tif (decisiveAttr && this.activeElement !== decisiveAttr) {\n\t\t\tthis.activeElement = decisiveAttr;\n\n\t\t\tWPTB_Helper.wptbDocumentEventGenerate('element:controls:prepare', element);\n\n\t\t\t// get controls config for this element\n\t\t\tconst wptbContrlStacksConfigId = `wptb-${kind}-control-stack`;\n\t\t\tconst tmplControlsConfig = wp.template(wptbContrlStacksConfigId);\n\t\t\tlet data;\n\t\t\tlet elementContainerClass;\n\t\t\tlet elementOptionClassIndic;\n\t\t\tlet elementOptionsGroup;\n\n\t\t\tlet controlElementParent;\n\t\t\tlet elementOptionsScriptsContainer;\n\n\t\t\tlet infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\tif (!infArr) {\n\t\t\t\tlet table_id = WPTB_Helper.detectMode();\n\t\t\t\tif (!table_id) {\n\t\t\t\t\ttable_id = 'startedid-0';\n\t\t\t\t}\n\t\t\t\tif (element.classList.contains('wptb-preview-table')) {\n\t\t\t\t\telement.classList.add(`wptb-element-main-table_setting-${table_id}`);\n\t\t\t\t} else if (element.classList.contains('wptb-cell')) {\n\t\t\t\t\tconst cellEditActiveClass = document.querySelector(\n\t\t\t\t\t\t`.wptb-element-table_cell_setting-${element.dataset.xIndex}-${element.dataset.yIndex}`\n\t\t\t\t\t);\n\t\t\t\t\tif (!cellEditActiveClass)\n\t\t\t\t\t\telement.classList.add(\n\t\t\t\t\t\t\t`wptb-element-table_cell_setting-${element.dataset.xIndex}-${element.dataset.yIndex}`\n\t\t\t\t\t\t);\n\t\t\t\t} else if (element.classList.contains('wptb-responsive')) {\n\t\t\t\t\t// if table id parsed from url is starting with 'wptb-team', it means it is team built prebuilt table with a unique id that doesn't fit infArr match regex, in that case, use default id for elements options\n\t\t\t\t\tif (table_id.startsWith('wptb_team')) {\n\t\t\t\t\t\ttable_id = 'startedid-0';\n\t\t\t\t\t}\n\t\t\t\t\telement.classList.add(`wptb-element-table_responsive_setting-${table_id}`);\n\t\t\t\t}\n\n\t\t\t\tinfArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\t\t} else {\n\t\t\t\tWPTB_Helper.editActionClassRemove();\n\t\t\t\telement.classList.add('edit-active');\n\t\t\t}\n\n\t\t\tdata = {\n\t\t\t\tcontainer: `.${infArr[0]}`,\n\t\t\t};\n\t\t\tlet controlName;\n\t\t\tdata.valueDependOnControl = {};\n\t\t\tif (valueDependOnControl) {\n\t\t\t\tObject.keys(valueDependOnControl).forEach(function (key) {\n\t\t\t\t\tdata.valueDependOnControl[key] = valueDependOnControl[key];\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (targetControlElementClass) {\n\t\t\t\tconst infArr = targetControlElementClass.match(/wptb-el-((.+-)\\d+)-(.+)/i);\n\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tcontrolName = infArr[3];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telementContainerClass = infArr[0];\n\t\t\telementOptionClassIndic = infArr[1];\n\n\t\t\tif (element.classList.contains('wptb-preview-table')) {\n\t\t\t} else if (element.classList.contains('wptb-cell')) {\n\t\t\t\tthis.activateSection('cell_settings');\n\t\t\t} else if (element.classList.contains('wptb-responsive')) {\n\t\t\t\telementOptionsGroupId = 'table-responsive-group';\n\t\t\t\twptbelementOptionClass = 'wptb-element-option';\n\t\t\t} else {\n\t\t\t\tconst children = document.getElementById('element-options-group').childNodes;\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\t\tif (children[i].style) children[i].style.display = 'none';\n\t\t\t\t}\n\t\t\t\tthis.activateSection('options_group');\n\t\t\t}\n\n\t\t\tconst controlsConfigJson = tmplControlsConfig(data);\n\t\t\tlet controlsConfig = JSON.parse(controlsConfigJson);\n\n\t\t\tconst elementOptionsGroupIdsInvolved = [];\n\t\t\tconst elementOptionsGroupInvolved = {};\n\t\t\tconst elementOptionsContainerInvolved = {};\n\n\t\t\t// object for save all scrips for each controls\n\t\t\tconst controlScriptsObj = {};\n\n\t\t\t// array for keep \"appear depend on\" params\n\t\t\tconst controlappearDependOnControl = [];\n\n\t\t\t// array for keep \"toggle switch\" params\n\t\t\tconst controltoggleSwitch = [];\n\n\t\t\t// array for keep \"toggle switch\" params\n\t\t\tconst controlSwitchThirdToggleIf = [];\n\n\t\t\t// array for keep \"value depend on\" params\n\t\t\tconst controlValueDependOnControl = [];\n\n\t\t\t// create controls\n\t\t\tconst elementOptionsScriptsContainerIndic = false;\n\t\t\tif (controlName) {\n\t\t\t\tconst controlsConfigNew = {};\n\t\t\t\tcontrolsConfigNew[controlName] = controlsConfig[controlName];\n\t\t\t\tcontrolsConfig = controlsConfigNew;\n\t\t\t}\n\t\t\tlet i = 0;\n\t\t\tObject.keys(controlsConfig).forEach(function (key) {\n\t\t\t\tconst data = controlsConfig[key];\n\t\t\t\tdata.controlKey = key;\n\n\t\t\t\t// get necessary wp js template\n\t\t\t\tconst tmplControlTemplate = wp.template(`wptb-${data.type}-control`);\n\n\t\t\t\tdata.elemContainer = elementContainerClass;\n\t\t\t\tdata.elementControlTargetUnicClass = `wptb-el-${elementOptionClassIndic}-${data.controlKey}`;\n\t\t\t\tObject.keys(data).map((k) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(data, k) && data[k] === 'control_param_calculate_value') {\n\t\t\t\t\t\tdata[k] = WPTB_Helper.controlParamCalculateValue(data.elementControlTargetUnicClass, k);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst controlTemplate = tmplControlTemplate(data);\n\t\t\t\tif ('appearDependOnControl' in data) {\n\t\t\t\t\tif (Array.isArray(data.appearDependOnControl)) {\n\t\t\t\t\t\tcontrolappearDependOnControl.push([\n\t\t\t\t\t\t\tdata.appearDependOnControl,\n\t\t\t\t\t\t\tdata.elementControlTargetUnicClass,\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ('toggleSwitch' in data) {\n\t\t\t\t\tif (Array.isArray(data.toggleSwitch)) {\n\t\t\t\t\t\tcontroltoggleSwitch.push([data.toggleSwitch, data.elementControlTargetUnicClass]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif('switchThirdToggleIf' in data) {\n\t\t\t\t\tif (Array.isArray(data.switchThirdToggleIf)) {\n\t\t\t\t\t\tcontrolSwitchThirdToggleIf.push([data.switchThirdToggleIf, data.elementControlTargetUnicClass]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ('valueDependOnControl' in data && !valueDependOnControl && !targetControlElementClass) {\n\t\t\t\t\tlet valueDependOnControlCorrect = '';\n\t\t\t\t\tif (data.valueDependOnControlCorrect)\n\t\t\t\t\t\tvalueDependOnControlCorrect = data.valueDependOnControlCorrect;\n\t\t\t\t\tcontrolValueDependOnControl.push([\n\t\t\t\t\t\tdata.valueDependOnControl,\n\t\t\t\t\t\tdata.elementControlTargetUnicClass,\n\t\t\t\t\t\tvalueDependOnControlCorrect,\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\tfunction elementOptionsContainerInvolvedGet(elementOptionsGroupId, elementOptionsContainerInvolved) {\n\t\t\t\t\tif (!elementOptionsContainerInvolved[elementOptionsGroupId]) {\n\t\t\t\t\t\tconst elementOptionsContainer = document.createElement('div');\n\t\t\t\t\t\telementOptionsContainer.classList.add('wptb-element-options', `wptb-options-${infArr[1]}`);\n\t\t\t\t\t\tdocument.getElementById(elementOptionsGroupId).appendChild(elementOptionsContainer);\n\t\t\t\t\t\telementOptionsContainerInvolved[elementOptionsGroupId] = elementOptionsContainer;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn elementOptionsContainerInvolved[elementOptionsGroupId];\n\t\t\t\t}\n\n\t\t\t\tif (elementOptionsGroupIdsInvolved.indexOf(data.elementOptionsGroupId) == -1 && !controlName) {\n\t\t\t\t\telementOptionsGroupIdsInvolved.push(data.elementOptionsGroupId);\n\t\t\t\t\t// clear elements from options group\n\t\t\t\t\t// document.getElementById( 'element-options-group' ).innerHTML = '';\n\t\t\t\t\telementOptionsGroup = document.getElementById(data.elementOptionsGroupId);\n\t\t\t\t\tconst elementOptionsGroupChildren = [...elementOptionsGroup.children];\n\t\t\t\t\tfor (let i = 0; i < elementOptionsGroupChildren.length; i++) {\n\t\t\t\t\t\telementOptionsGroup.removeChild(elementOptionsGroupChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\telementOptionsGroupInvolved[data.elementOptionsGroupId] = elementOptionsGroup;\n\t\t\t\t}\n\n\t\t\t\tcontrolElementParent = elementOptionsGroupInvolved[data.elementOptionsGroupId];\n\n\t\t\t\tif (data.elementOptionsContainerOn === 'true' && !controlName) {\n\t\t\t\t\tcontrolElementParent = elementOptionsContainerInvolvedGet(\n\t\t\t\t\t\tdata.elementOptionsGroupId,\n\t\t\t\t\t\telementOptionsContainerInvolved\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (data.elementOptionContainerOn === 'true') {\n\t\t\t\t\tconst elementOptionContainer = document.createElement('div');\n\t\t\t\t\telementOptionContainer.classList.add(data.elementOptionClass, 'wptb-settings-items');\n\n\t\t\t\t\tif (data.customClassForContainer) {\n\t\t\t\t\t\telementOptionContainer.classList.add(data.customClassForContainer);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.containerAdditionalStyles) {\n\t\t\t\t\t\telementOptionContainer.setAttribute('style', data.containerAdditionalStyles);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (targetControlElementClass) {\n\t\t\t\t\t\tlet targetControlElement = document.getElementsByClassName(targetControlElementClass);\n\t\t\t\t\t\tif (targetControlElement.length > 0) {\n\t\t\t\t\t\t\ttargetControlElement = targetControlElement[0];\n\t\t\t\t\t\t\tconst controlContainerElem = WPTB_Helper.findAncestor(\n\t\t\t\t\t\t\t\ttargetControlElement,\n\t\t\t\t\t\t\t\t'wptb-element-option'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (controlContainerElem) {\n\t\t\t\t\t\t\t\tconst controlContainerElemParent = controlContainerElem.parentNode;\n\t\t\t\t\t\t\t\tcontrolContainerElemParent.insertBefore(elementOptionContainer, controlContainerElem);\n\t\t\t\t\t\t\t\tcontrolContainerElemParent.removeChild(controlContainerElem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontrolElementParent.appendChild(elementOptionContainer);\n\t\t\t\t\t}\n\t\t\t\t\tcontrolElementParent = elementOptionContainer;\n\t\t\t\t}\n\t\t\t\tcontrolElementParent.innerHTML += controlTemplate;\n\n\t\t\t\tlet helperJavascriptElem = controlElementParent.getElementsByTagName('wptb-template-script');\n\t\t\t\tif (helperJavascriptElem.length > 0) {\n\t\t\t\t\thelperJavascriptElem = helperJavascriptElem[0];\n\t\t\t\t\tconst helperJavascriptCode = helperJavascriptElem.innerText;\n\t\t\t\t\tcontrolElementParent.removeChild(helperJavascriptElem);\n\t\t\t\t\tconst script = document.createElement('script');\n\t\t\t\t\tscript.setAttribute('type', 'text/javascript');\n\t\t\t\t\tscript.setAttribute('id', `${kind}-${data.controlKey}`);\n\t\t\t\t\tscript.innerHTML = helperJavascriptCode.replace(/\\r|\\n|\\t/g, '').trim();\n\t\t\t\t\tif (\n\t\t\t\t\t\t!controlScriptsObj[data.elementOptionsGroupId] ||\n\t\t\t\t\t\t!Array.isArray(controlScriptsObj[data.elementOptionsGroupId])\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontrolScriptsObj[data.elementOptionsGroupId] = [];\n\t\t\t\t\t}\n\t\t\t\t\tcontrolScriptsObj[data.elementOptionsGroupId].push(script);\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t});\n\n\t\t\telement.optionsGroupIds = elementOptionsGroupIdsInvolved;\n\n\t\t\t// run the scripts of controls\n\t\t\tObject.keys(controlScriptsObj).forEach(function (elementOptionsGroupId) {\n\t\t\t\tif (!targetControlElementClass) {\n\t\t\t\t\telementOptionsScriptsContainer = document.createElement('div');\n\t\t\t\t\telementOptionsScriptsContainer.classList.add(\n\t\t\t\t\t\t'wptb-element-options-scripts',\n\t\t\t\t\t\t`wptb-options-${infArr[1]}`\n\t\t\t\t\t);\n\t\t\t\t\telementOptionsGroupInvolved[elementOptionsGroupId].appendChild(elementOptionsScriptsContainer);\n\t\t\t\t}\n\n\t\t\t\tconst controlScriptsArr = controlScriptsObj[elementOptionsGroupId];\n\t\t\t\tif (controlScriptsArr.length > 0) {\n\t\t\t\t\tfor (let i = 0; i < controlScriptsArr.length; i++) {\n\t\t\t\t\t\tif (targetControlElementClass) {\n\t\t\t\t\t\t\tconst id = `${kind}-${controlName}`;\n\t\t\t\t\t\t\tconst script = document.getElementById(id);\n\t\t\t\t\t\t\telementOptionsScriptsContainer = script.parentNode;\n\t\t\t\t\t\t\telementOptionsScriptsContainer.insertBefore(controlScriptsArr[i], script);\n\t\t\t\t\t\t\telementOptionsScriptsContainer.removeChild(script);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telementOptionsScriptsContainer.appendChild(controlScriptsArr[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// run toggleSwitch function\n\t\t\tfor (let i = 0; i < controltoggleSwitch.length; i++) {\n\t\t\t\tWPTB_Helper.toggleSwitch(controltoggleSwitch[i][0], controltoggleSwitch[i][1]);\n\t\t\t}\n\n\t\t\t// run switchThirdToggleIf function\n\t\t\tfor (let i = 0; i < controlSwitchThirdToggleIf.length; i++) {\n\t\t\t\tWPTB_Helper.switchThirdToggleIf(controlSwitchThirdToggleIf[i][0], controlSwitchThirdToggleIf[i][1]);\n\t\t\t}\n\n\t\t\t// run appearDependOnControl function\n\t\t\tfor (let i = 0; i < controlappearDependOnControl.length; i++) {\n\t\t\t\tWPTB_Helper.appearDependOnControl(\n\t\t\t\t\tcontrolappearDependOnControl[i][0],\n\t\t\t\t\tcontrolappearDependOnControl[i][1]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tWPTB_Helper.wptbDocumentEventGenerate('element:controls:active', element);\n\t\t\t// run valueDependOnControl function\n\t\t\tfor (let i = 0; i < controlValueDependOnControl.length; i++) {\n\t\t\t\tWPTB_Helper.valueDependOnControl(\n\t\t\t\t\tcontrolValueDependOnControl[i][0],\n\t\t\t\t\tcontrolValueDependOnControl[i][1],\n\t\t\t\t\tcontrolValueDependOnControl[i][2],\n\t\t\t\t\tkind,\n\t\t\t\t\telement\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * remove edit-action classes from wptb-ph-element elements\n\t */\n\teditActionClassRemove() {\n\t\tconst editActiveElems = document.querySelectorAll('.edit-active');\n\t\tfor (let i = 0; i < editActiveElems.length; i++) {\n\t\t\teditActiveElems[i].classList.remove('edit-active');\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @param unicClass\n\t * @param controlKey\n\t * @param key\n\t * @return {*}\n\t */\n\tcontrolParamCalculateValue(unicClass, key) {\n\t\tconst unicClassP = WPTB_Helper.replaceAll(unicClass, '-', '_');\n\t\tif (\n\t\t\twindow[`paramCalculateValue_${unicClassP}_${key}`] &&\n\t\t\ttypeof window[`paramCalculateValue_${unicClassP}_${key}`] === 'function'\n\t\t) {\n\t\t\treturn window[`paramCalculateValue_${unicClassP}_${key}`]();\n\t\t}\n\t},\n\n\tcontrolParamCalculateValueCreateFunction(element, controlKey, key, handlerFunction) {\n\t\tconst infArr = element.className.match(/wptb-element-((.+-)\\d+)/i);\n\t\tconst unicClass = `wptb-el-${infArr[1]}-${controlKey}`;\n\t\tconst unicClassP = WPTB_Helper.replaceAll(unicClass, '-', '_');\n\t\twindow[`paramCalculateValue_${unicClassP}_${key}`] = function () {\n\t\t\treturn handlerFunction(element);\n\t\t};\n\t},\n\n\t/**\n\t * function for create, update css for element\n\t *\n\t * @param elementContainer\n\t * @param selector\n\t * @param cssName\n\t * @param cssValue\n\t */\n\tmanagerExternalCssStyles(elementContainer, selector, cssName, cssValue) {\n\t\tconst infArr = elementContainer.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\tif (!infArr || !Array.isArray(infArr)) {\n\t\t\tlet table = document.getElementsByClassName('wptb-preview-table');\n\n\t\t\tif (table.length > 0) {\n\t\t\t\ttable = table[0];\n\n\t\t\t\tconst infArr = table.className.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\t\tselector = `.${infArr[0]} ${selector}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tconst cssForThisElement = head.querySelector(`#styles-${elementContainer}`);\n\t\t\tif (cssForThisElement) {\n\t\t\t\tconst cssText = cssForThisElement.innerHTML;\n\t\t\t\tif (cssText) {\n\t\t\t\t\tconst cssTextArrFirst = cssText.split('}');\n\t\t\t\t\tcssTextArrFirst.pop();\n\t\t\t\t\tlet selectorExists = false;\n\t\t\t\t\tfor (let i = 0; i < cssTextArrFirst.length; i++) {\n\t\t\t\t\t\tconst cssTextArrSecond = cssTextArrFirst[i].split('{');\n\t\t\t\t\t\tif (cssTextArrSecond[0] === selector) {\n\t\t\t\t\t\t\tconst cssTextArrThird = cssTextArrSecond[1].split(';');\n\t\t\t\t\t\t\tcssTextArrThird.pop();\n\t\t\t\t\t\t\tlet cssNameExists = false;\n\t\t\t\t\t\t\tfor (let j = 0; j < cssTextArrThird.length; j++) {\n\t\t\t\t\t\t\t\tconst cssTextArrFourth = cssTextArrThird[j].split(':');\n\t\t\t\t\t\t\t\tif (cssTextArrFourth[0] === cssName) {\n\t\t\t\t\t\t\t\t\tif (cssValue) {\n\t\t\t\t\t\t\t\t\t\tcssTextArrThird[j] = `${cssName}:${cssValue}`;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcssTextArrThird.splice(j, 1);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcssTextArrSecond[1] = cssTextArrThird.join(';')\n\t\t\t\t\t\t\t\t\t\t? `${cssTextArrThird.join(';')};`\n\t\t\t\t\t\t\t\t\t\t: '';\n\t\t\t\t\t\t\t\t\tcssNameExists = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!cssNameExists) {\n\t\t\t\t\t\t\t\tif (cssValue) {\n\t\t\t\t\t\t\t\t\tcssTextArrSecond[1] += `${cssName}:${cssValue};`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (cssTextArrSecond[1]) {\n\t\t\t\t\t\t\t\tcssTextArrFirst[i] = `${cssTextArrSecond[0]}{${cssTextArrSecond[1]}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcssTextArrFirst.splice(i, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (cssTextArrFirst.join('}')) {\n\t\t\t\t\t\t\t\tcssForThisElement.innerHTML = `${cssTextArrFirst.join('}')}}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thead.removeChild(cssForThisElement);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tselectorExists = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!selectorExists) {\n\t\t\t\t\t\tif (cssValue) {\n\t\t\t\t\t\t\tcssForThisElement.innerHTML = `${cssText + selector}{${cssName}:${cssValue};}`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcssForThisElement.innerHTML = cssText;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (cssValue) {\n\t\t\t\t\tcssForThisElement.innerHTML = `${selector}{${cssName}:${cssValue};}`;\n\t\t\t\t} else {\n\t\t\t\t\thead.removeChild(cssForThisElement);\n\t\t\t\t}\n\t\t\t} else if (cssValue) {\n\t\t\t\tconst cssForThisElement = document.createElement('style');\n\t\t\t\tcssForThisElement.setAttribute('id', `styles-${elementContainer}`);\n\t\t\t\tcssForThisElement.classList.add('styles-wptb-elements');\n\t\t\t\tcssForThisElement.innerHTML = `${selector}{${cssName}:${cssValue};}`;\n\t\t\t\thead.appendChild(cssForThisElement);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t *\n\t * Register section parts for sidebar\n\t *\n\t * @param {Array} sections an array of section names\n\t */\n\tregisterSections(sections) {\n\t\tthis.sections = {};\n\t\tthis.previousSection = null;\n\t\tthis.currentSection = null;\n\t\tif (!Array.isArray(sections)) {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tsections = [sections];\n\t\t}\n\n\t\t// eslint-disable-next-line array-callback-return\n\t\tsections.map((s) => {\n\t\t\tconst sectionElement = document.querySelector(`[data-wptb-section=${s}]`);\n\t\t\tif (sectionElement) {\n\t\t\t\tthis.sections[s] = sectionElement;\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Activate a registered section and deactivates others\n\t *\n\t * @param {string} sectionDataId section name to be activated\n\t * @param {string} displayType display type override for section to be used in its display style property\n\t */\n\tactivateSection(sectionDataId, displayType = 'block') {\n\t\tthis.previousSection = this.currentSection;\n\t\tthis.currentSection = sectionDataId;\n\t\tthis.triggerSectionEvent(sectionDataId);\n\n\t\tconst builderAdminContainer = document.querySelector('#wptb_builder');\n\n\t\tif (builderAdminContainer) {\n\t\t\tbuilderAdminContainer.dataset.wptbActiveSection = this.currentSection;\n\t\t}\n\n\t\t// eslint-disable-next-line array-callback-return\n\t\tObject.keys(this.sections).map((k) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.sections, k)) {\n\t\t\t\tconst visibility = sectionDataId === k ? displayType : 'none';\n\t\t\t\tthis.sections[k].style = `display: ${visibility} !important`;\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Get id of current active section.\n\t *\n\t * @return {string} active section id\n\t */\n\tgetCurrentSection() {\n\t\treturn this.currentSection;\n\t},\n\t/**\n\t * Get id of previous section.\n\t *\n\t * @return {string} previous section id\n\t */\n\tgetPreviousSection() {\n\t\treturn this.previousSection;\n\t},\n\t/**\n\t * Get current section from search parameter 'wptb-builder-section' of window location\n\t */\n\tgetSectionFromUrl() {\n\t\tconst parsedUrl = new URL(window.location.href);\n\t\tconst urlSection = parsedUrl.searchParams.get('wptb-builder-section');\n\t\tif (urlSection) {\n\t\t\tif (Object.keys(this.sections).some((key) => key === urlSection)) {\n\t\t\t\tthis.activateSection(urlSection);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Set up related buttons and links to trigger certain elements\n\t */\n\tsetupSectionButtons() {\n\t\tconst sectionButtons = Array.from(document.querySelectorAll('[data-wptb-section-button]'));\n\t\tconst vm = this;\n\n\t\tsectionButtons.map((s) => {\n\t\t\tconst sectionName = s.dataset.wptbSectionButton;\n\t\t\ts.addEventListener('click', function () {\n\t\t\t\tconst displayType = s.dataset.wptbSectionDisplayType;\n\t\t\t\tvm.activateSection(sectionName, displayType);\n\t\t\t\tWPTB_Helper.editActionClassRemove();\n\t\t\t});\n\n\t\t\tdocument.addEventListener('wptbSectionChanged', (e) => {\n\t\t\t\tif (e.detail === sectionName) {\n\t\t\t\t\ts.classList.remove('disabled');\n\t\t\t\t\ts.classList.add('active');\n\t\t\t\t} else {\n\t\t\t\t\ts.classList.remove('active');\n\t\t\t\t\ts.classList.add('disabled');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tsetupPanelToggleButtons() {\n\t\tconst $ = jQuery;\n\n\t\t$('.wptb-panel-toggle-group').each(function () {\n\t\t\tconst vm = $(this);\n\t\t\t$(this)\n\t\t\t\t.find('.toggle-icon')\n\t\t\t\t.click(() => {\n\t\t\t\t\tvm.find('.wptb-panel-toggle-target').slideToggle();\n\t\t\t\t\tvm.toggleClass('wptb-panel-toggle-content');\n\t\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Trigger a section change event\n\t *\n\t * @param {string} sectionName section name\n\t */\n\ttriggerSectionEvent(sectionName) {\n\t\tconst sectionEvent = new CustomEvent('wptbSectionChanged', { detail: sectionName });\n\n\t\tdocument.dispatchEvent(sectionEvent);\n\t},\n\t/**\n\t * Setup sidebar toggle element\n\t *\n\t * @param {string} toggleSelector query selector for drawer toggle element\n\t */\n\tsetupSidebarToggle(toggleSelector) {\n\t\tconst toggleButton = document.querySelector(toggleSelector);\n\t\tif (toggleButton) {\n\t\t\ttoggleButton.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tdocument.body.classList.toggle('collapsed');\n\t\t\t});\n\t\t}\n\t},\n\t// function for deleting all external CSS for the element\n\texternalCssStylesDelete(elementContainerClass) {\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tconst cssForThisElement = head.querySelector(`#styles-${elementContainerClass}`);\n\n\t\t\tif (cssForThisElement) {\n\t\t\t\thead.removeChild(cssForThisElement);\n\t\t\t}\n\t\t}\n\t},\n\t// function for copy all external CSS for the element\n\texternalCssStylesCopy(activeElement, copyElement) {\n\t\tif (activeElement) {\n\t\t\tconst infArr = activeElement.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tconst activeElemClass = infArr[0];\n\n\t\t\t\tconst { head } = document;\n\t\t\t\tif (head) {\n\t\t\t\t\tconst cssForActiveElement = head.querySelector(`#styles-${activeElemClass}`);\n\n\t\t\t\t\tif (cssForActiveElement) {\n\t\t\t\t\t\tconst cssForNewElement = cssForActiveElement.cloneNode(true);\n\n\t\t\t\t\t\tcssForNewElement.removeAttribute('id', `styles-${activeElemClass}`);\n\n\t\t\t\t\t\tconst infArrCopyEl = copyElement.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\t\t\t\tif (infArrCopyEl && Array.isArray(infArrCopyEl)) {\n\t\t\t\t\t\t\tcssForNewElement.setAttribute('id', `styles-${infArrCopyEl[0]}`);\n\t\t\t\t\t\t\tconst cssForActiveElementInnerHTML = cssForActiveElement.innerHTML;\n\t\t\t\t\t\t\tconst cssForNewElementInnerHTML = WPTB_Helper.replaceAll(\n\t\t\t\t\t\t\t\tcssForActiveElementInnerHTML,\n\t\t\t\t\t\t\t\tactiveElemClass,\n\t\t\t\t\t\t\t\tinfArrCopyEl[0]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcssForNewElement.innerHTML = cssForNewElementInnerHTML;\n\t\t\t\t\t\t\thead.appendChild(cssForNewElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// function for convertation elements stiles in json\n\telementsStylesConvertToObject() {\n\t\tconst { head } = document;\n\t\tconst stylesElements = head.querySelectorAll('.styles-wptb-elements');\n\t\tconst stylesObj = {};\n\t\tfor (let i = 0; i < stylesElements.length; i++) {\n\t\t\tconst styleElemId = stylesElements[i].getAttribute('id');\n\t\t\tif (styleElemId && stylesElements[i].innerHTML) {\n\t\t\t\tstylesObj[styleElemId] = stylesElements[i].innerHTML;\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(stylesObj).length != 0) {\n\t\t\treturn JSON.stringify(stylesObj);\n\t\t}\n\t\treturn '';\n\t},\n\t// function for set scc styles tags to head\n\telementsStylesSetFromObject(jsonObject) {\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tlet stylesElements = head.querySelectorAll('.styles-wptb-elements');\n\t\t\tif (stylesElements.length > 0) {\n\t\t\t\tstylesElements = [...stylesElements];\n\t\t\t\tfor (let i = 0; i < stylesElements.length; i++) {\n\t\t\t\t\thead.removeChild(stylesElements[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (jsonObject) {\n\t\t\t\tconst stylesObj = JSON.parse(jsonObject);\n\t\t\t\tif (Object.keys(stylesObj).length != 0) {\n\t\t\t\t\tObject.keys(stylesObj).forEach(function (key) {\n\t\t\t\t\t\tconst cssText = stylesObj[key];\n\t\t\t\t\t\tconst styleCss = document.createElement('style');\n\t\t\t\t\t\tstyleCss.setAttribute('id', key);\n\t\t\t\t\t\tstyleCss.classList.add('styles-wptb-elements');\n\t\t\t\t\t\tstyleCss.innerHTML = cssText;\n\t\t\t\t\t\thead.appendChild(styleCss);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// function for table saving\n\tsaveTable(event, startSaving, previewSaving) {\n\t\t// show save indicator\n\t\tWPTB_Helper.tableSaveIndicator(true);\n\n\t\tif (!previewSaving && !startSaving) {\n\t\t\tif (\n\t\t\t\t(!event.target.dataset.wptbTableStateNumberSave && window.wptbTableStateNumberShow == 0) ||\n\t\t\t\twindow.wptbTableStateNumberShow == event.target.dataset.wptbTableStateNumberSave\n\t\t\t) {\n\t\t\t\t// return;\n\t\t\t}\n\t\t}\n\n\t\tif (!previewSaving) {\n\t\t\tconst bar = document.querySelector('.wptb-edit-bar');\n\t\t\tif (bar && bar.classList.contains('visible')) {\n\t\t\t\tconst table = document.getElementsByClassName('wptb-preview-table')[0];\n\t\t\t\tWPTB_Helper.toggleTableEditMode();\n\t\t\t}\n\t\t}\n\n\t\t// before save event trigger\n\t\tWPTB_Helper.wptbDocumentEventGenerate('wptb:save:before', document);\n\n\t\t// clean any left over artifacts related to builder\n\t\tWPTB_Helper.tableClean();\n\n\t\tconst http = new XMLHttpRequest();\n\t\tconst url = `${wptb_admin_object ? wptb_admin_object.ajaxurl : ajaxurl}?action=save_table`;\n\t\tconst t = document.getElementById('wptb-setup-name').value.trim();\n\t\tlet messagingArea;\n\t\tlet code;\n\t\tlet datas;\n\n\t\tcode = document.getElementsByClassName('wptb-preview-table');\n\n\t\tlet postId;\n\t\tif ((rs = WPTB_Helper.detectMode()) || (rs = document.wptbId)) {\n\t\t\tpostId = rs;\n\t\t}\n\t\tlet paramIdsNecessaryChange = false;\n\t\tif (code.length > 0) {\n\t\t\tcode = code[0];\n\t\t\tconst codeClone = code.cloneNode(true);\n\t\t\tif (postId) {\n\t\t\t\tif (codeClone.classList.contains('wptb-element-main-table_setting-startedid-0')) {\n\t\t\t\t\tcodeClone.classList.remove('wptb-element-main-table_setting-startedid-0');\n\t\t\t\t\tcodeClone.classList.add(`wptb-element-main-table_setting-${postId}`);\n\t\t\t\t\tconst wptbTableSetup = document.querySelector('.wptb-table-setup');\n\t\t\t\t\tif (wptbTableSetup) {\n\t\t\t\t\t\twptbTableSetup.innerHTML = '';\n\t\t\t\t\t\twptbTableSetup.appendChild(codeClone);\n\t\t\t\t\t\tWPTB_Table();\n\t\t\t\t\t}\n\t\t\t\t\tparamIdsNecessaryChange = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcodeClone.columns = code.columns;\n\t\t\tcode = WPTB_Stringifier(codeClone);\n\t\t\tcode = code.outerHTML;\n\t\t} else {\n\t\t\tcode = '';\n\t\t}\n\n\t\tif (!previewSaving) {\n\t\t\tdatas = '';\n\t\t\tconst datas_containers = document.getElementsByClassName('wptb-element-datas');\n\n\t\t\tif (datas_containers.length > 0) {\n\t\t\t\tif (datas_containers[0].innerHTML) {\n\t\t\t\t\tdatas = datas_containers[0].innerHTML;\n\n\t\t\t\t\tif (paramIdsNecessaryChange) {\n\t\t\t\t\t\tdatas = WPTB_Helper.replaceAll(\n\t\t\t\t\t\t\tdatas,\n\t\t\t\t\t\t\t'tmpl-wptb-el-datas-main-table_setting-startedid-0',\n\t\t\t\t\t\t\t`tmpl-wptb-el-datas-main-table_setting-${postId}`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tdatas = WPTB_Helper.replaceAll(\n\t\t\t\t\t\t\tdatas,\n\t\t\t\t\t\t\t'data-wptb-el-main-table_setting-startedid-0',\n\t\t\t\t\t\t\t`data-wptb-el-main-table_setting-${postId}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet styleObjJson = WPTB_Helper.elementsStylesConvertToObject();\n\t\tif (paramIdsNecessaryChange) {\n\t\t\tstyleObjJson = WPTB_Helper.replaceAll(\n\t\t\t\tstyleObjJson,\n\t\t\t\t'.wptb-element-main-table_setting-startedid-0',\n\t\t\t\t`.wptb-element-main-table_setting-${postId}`\n\t\t\t);\n\t\t}\n\n\t\tif (t === '' && code === '') {\n\t\t\tlet messagingAreaText = '';\n\t\t\tif (t === '') messagingAreaText += 'You must assign a name to the table before saving it.</br>';\n\t\t\tif (code === '') messagingAreaText += \"Table wasn't created\";\n\t\t\tmessagingArea = document.getElementById('wptb-messaging-area');\n\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-error wptb-message\">Error: ${messagingAreaText}</div>`;\n\t\t\tmessagingArea.classList.add('wptb-warning');\n\t\t\tsetTimeout(function () {\n\t\t\t\tmessagingArea.removeChild(messagingArea.firstChild);\n\t\t\t}, 4000);\n\t\t\treturn;\n\t\t}\n\n\t\tlet params = {\n\t\t\ttitle: t,\n\t\t\tcontent: code,\n\t\t\telements_datas: datas,\n\t\t\telements_styles: styleObjJson,\n\t\t\tsecurity_code: wptb_admin_object.security_code,\n\t\t};\n\n\t\tif (previewSaving) {\n\t\t\tparams.preview_saving = previewSaving;\n\t\t}\n\n\t\tif (postId) {\n\t\t\tparams.id = postId;\n\t\t}\n\n\t\t// wptb save before event\n\t\tWPTB_Helper.wptbDocumentEventGenerate('wptb:save:before', document, params);\n\n\t\tparams = JSON.stringify(params);\n\n\t\thttp.open('POST', url, true);\n\n\t\thttp.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n\n\t\thttp.onreadystatechange = function (action) {\n\t\t\tif (this.readyState == 4) {\n\t\t\t\t// hide save indicator\n\t\t\t\tWPTB_Helper.tableSaveIndicator(false);\n\n\t\t\t\tif (this.status == 200) {\n\t\t\t\t\tconst data = JSON.parse(http.responseText);\n\t\t\t\t\tmessagingArea = document.getElementById('wptb-messaging-area');\n\n\t\t\t\t\tif (data[0] == 'saved') {\n\t\t\t\t\t\tlet builderPageUrl = document.location.href.replace('#', '');\n\t\t\t\t\t\tconst regex = new RegExp('&table=(.+)', 'i');\n\t\t\t\t\t\tbuilderPageUrl = builderPageUrl.replace(regex, '');\n\t\t\t\t\t\twindow.history.pushState(null, null, `${builderPageUrl}&table=${data[1]}`);\n\n\t\t\t\t\t\tdocument.wptbId = data[1];\n\t\t\t\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-success wptb-message\">Table \"${t}\" was successfully saved.</div>`;\n\n\t\t\t\t\t\tWPTB_NotificationManager.sendNotification({ message: `Table ${t} was successfully saved.` });\n\t\t\t\t\t\tdocument.getElementsByClassName('wptb-embed-btn')[0].classList.remove('wptb-button-disable');\n\n\t\t\t\t\t\t// update centralized data registry with new table id\n\t\t\t\t\t\tWPTB_Store.commit('setTableId', data[1]);\n\n\t\t\t\t\t\tconst wptbPreviewTable = document.querySelector('.wptb-preview-table');\n\t\t\t\t\t\tlet wptbPreviewBtn = document.getElementsByClassName('wptb-preview-btn');\n\t\t\t\t\t\tif (wptbPreviewBtn.length > 0) {\n\t\t\t\t\t\t\twptbPreviewBtn = wptbPreviewBtn[0];\n\t\t\t\t\t\t\twptbPreviewBtn.classList.remove('wptb-button-disable');\n\t\t\t\t\t\t\tlet wptbPreviewBtnHref = wptbPreviewBtn.dataset.previewHref;\n\t\t\t\t\t\t\twptbPreviewBtnHref = wptbPreviewBtnHref.replace('empty', data[1]);\n\t\t\t\t\t\t\twptbPreviewBtn.setAttribute('href', wptbPreviewBtnHref);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent.target.dataset.wptbTableStateNumberSave = window.wptbTableStateNumberShow;\n\t\t\t\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\t\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// WPTB_Helper.saveTable( event, true );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (data[0] == 'edited' && startSaving) {\n\t\t\t\t\t\tdocument.wptbId = data[1];\n\t\t\t\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-success wptb-message\">Table \"${t}\" was successfully saved.</div>`;\n\n\t\t\t\t\t\tWPTB_NotificationManager.sendNotification({ message: `Table ${t} was successfully saved.` });\n\t\t\t\t\t\tdocument.getElementsByClassName('wptb-embed-btn')[0].classList.remove('wptb-button-disable');\n\t\t\t\t\t\tdocument.getElementById('wptb-embed-shortcode').value = `[wptb id=${data[1]}]`;\n\t\t\t\t\t\tconst wptbPreviewTable = document.querySelector('.wptb-preview-table');\n\t\t\t\t\t\tlet wptbPreviewBtn = document.getElementsByClassName('wptb-preview-btn');\n\t\t\t\t\t\tif (wptbPreviewBtn.length > 0) {\n\t\t\t\t\t\t\twptbPreviewBtn = wptbPreviewBtn[0];\n\t\t\t\t\t\t\twptbPreviewBtn.classList.remove('wptb-button-disable');\n\t\t\t\t\t\t\tlet wptbPreviewBtnHref = wptbPreviewBtn.dataset.previewHref;\n\t\t\t\t\t\t\twptbPreviewBtnHref = wptbPreviewBtnHref.replace('empty', data[1]);\n\t\t\t\t\t\t\twptbPreviewBtn.setAttribute('href', wptbPreviewBtnHref);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent.target.dataset.wptbTableStateNumberSave = window.wptbTableStateNumberShow;\n\t\t\t\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\t\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (data[0] == 'edited') {\n\t\t\t\t\t\tmessagingArea.innerHTML = `<div class=\"wptb-success wptb-message\">Table \"${t}\" was successfully updated.</div>`;\n\n\t\t\t\t\t\tWPTB_NotificationManager.sendNotification({ message: `Table ${t} was successfully updated.` });\n\t\t\t\t\t\tevent.target.dataset.wptbTableStateNumberSave = window.wptbTableStateNumberShow;\n\n\t\t\t\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\t\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (data[0] == 'preview_edited') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessagingArea.innerHTML = '<div class=\"wptb-error wptb-message\">Safety problems</div>';\n\t\t\t\t\t}\n\t\t\t\t\tmessagingArea.classList.add('wptb-success');\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tmessagingArea.removeChild(messagingArea.firstChild);\n\t\t\t\t\t}, 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thttp.send(params);\n\t},\n\t//\n\tclickOnFreeSpace() {\n\t\tWPTB_Helper.editActionClassRemove();\n\t\t// if current active section is responsive menu, ignore this functionality\n\t\tif (this.getCurrentSection() === 'table_responsive_menu') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellModeBackground = document.querySelector('#wptb-cell_mode_background');\n\t\tif (cellModeBackground && cellModeBackground.classList.contains('visible')) {\n\t\t\treturn;\n\t\t}\n\t\t// document.getElementsByClassName( 'wptb-elements-container' )[0].style.display = 'table';\n\t\t// document.getElementsByClassName( 'wptb-settings-section' )[0].style.display = 'block';\n\t\t// document.getElementById( 'element-options-group' ).style.display = 'none';\n\t\tthis.activateSection('elements');\n\n\t\tconst wpcdFixedToolbar = document.getElementById('wpcd_fixed_toolbar');\n\t\tif (wpcdFixedToolbar.hasAttribute('data-toolbar-active-id')) {\n\t\t\tdocument\n\t\t\t\t.getElementById(wpcdFixedToolbar.getAttribute('data-toolbar-active-id'))\n\t\t\t\t.classList.remove('toolbar-active');\n\t\t}\n\t\tconst element = document.querySelector('.wptb-preview-table');\n\t\tif (element) {\n\t\t\tWPTB_Helper.elementOptionsSet('table_setting', element);\n\t\t}\n\t},\n\n\t/*\n\t * function for sending of element ajax request\n\t */\n\telementAjax(dataAjaxData, element) {\n\t\tconst http = new XMLHttpRequest();\n\t\tconst url = `${wptb_admin_object ? wptb_admin_object.ajaxurl : ajaxurl}?action=wptb_element_ajax`;\n\t\tlet element_name;\n\t\tconst infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\telement_name = infArr[1];\n\t\t}\n\n\t\tlet params = {\n\t\t\telement_ajax_data: dataAjaxData,\n\t\t\telement_name,\n\t\t\tsecurity_code: wptb_admin_object.security_code,\n\t\t};\n\t\tparams = JSON.stringify(params);\n\n\t\thttp.open('POST', url, true);\n\t\thttp.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n\n\t\thttp.onreadystatechange = function (action) {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tconst data = JSON.parse(http.responseText);\n\t\t\t\tlet detail;\n\t\t\t\tif (data && Array.isArray(data) && data[0] == 'element_ajax_responce') {\n\t\t\t\t\tdetail = { value: data[1] };\n\t\t\t\t} else {\n\t\t\t\t\tdetail = '';\n\t\t\t\t}\n\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('wptb-element:ajax-response', element, detail);\n\t\t\t}\n\t\t};\n\t\thttp.send(params);\n\t},\n\n\t/*\n\t * This just toggles visibility of cell edit bar, and toggles\n\t * cell selecting mode.\n\t */\n\ttoggleTableEditMode(close = false) {\n\t\tconst bar = document.getElementsByClassName('wptb-edit-bar');\n\t\tconst cellModeBackground = document.getElementById('wptb-cell_mode_background');\n\t\tconst leftScrollPanelCurtain = document.getElementById('wptb-left-scroll-panel-curtain');\n\t\tconst leftScrollPanelCellSettings = document.getElementById('wptb-left-scroll-panel-cell-settings');\n\t\tlet wptbPreviewTable = document.getElementsByClassName('wptb-preview-table');\n\t\tif (wptbPreviewTable.length > 0) {\n\t\t\twptbPreviewTable = wptbPreviewTable[0];\n\t\t}\n\n\t\tconst builderPanel = document.querySelector('.wptb-builder-panel');\n\n\t\tif (bar.length > 0) {\n\t\t\tlet toggleEditMode = '';\n\t\t\tfor (let i = 0; i < bar.length; i++) {\n\t\t\t\tif (close) {\n\t\t\t\t\tdocument.select.deactivateMultipleSelectMode();\n\t\t\t\t\tbar[i].classList.remove('visible');\n\t\t\t\t\tcellModeBackground.classList.remove('visible');\n\t\t\t\t\tleftScrollPanelCurtain.classList.remove('visible');\n\t\t\t\t\tleftScrollPanelCellSettings.classList.remove('visible');\n\t\t\t\t\twptbPreviewTable.parentNode.classList.remove('wptb-preview-table-manage-cells');\n\t\t\t\t\tconst wptbPreviewTableTds = wptbPreviewTable.getElementsByTagName('td');\n\t\t\t\t\tif (wptbPreviewTableTds.length > 0) {\n\t\t\t\t\t\tfor (let i = 0; i < wptbPreviewTableTds.length; i++) {\n\t\t\t\t\t\t\twptbPreviewTableTds[i].classList.remove('wptb-highlighted');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttoggleEditMode = 'closed';\n\n\t\t\t\t\tbuilderPanel.dataset.manageCellsActive = false;\n\n\t\t\t\t\t// @deprecated\n\t\t\t\t\t// WPTB_Helper.activateSection('elements');\n\t\t\t\t} else if (!close) {\n\t\t\t\t\tdocument.select.activateMultipleSelectMode();\n\t\t\t\t\tbar[i].classList.add('visible');\n\t\t\t\t\tcellModeBackground.classList.add('visible');\n\t\t\t\t\tleftScrollPanelCurtain.classList.add('visible');\n\t\t\t\t\twptbPreviewTable.parentNode.classList.add('wptb-preview-table-manage-cells');\n\n\t\t\t\t\ttoggleEditMode = 'opened';\n\n\t\t\t\t\tbuilderPanel.dataset.manageCellsActive = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tWPTB_Helper.wptbDocumentEventGenerate(\n\t\t\t\t`wp-table-builder/table-edit-mode/${toggleEditMode}`,\n\t\t\t\twptbPreviewTable\n\t\t\t);\n\t\t}\n\t},\n\n\t/*\n\t * checking of dimension of value\n\t */\n\tcheckingDimensionValue(value, dimension) {\n\t\tvalue = String(value);\n\t\tdimension = String(dimension);\n\t\tif (value && dimension) {\n\t\t\tconst searchIndex = value.indexOf(dimension);\n\t\t\tif (searchIndex != -1 && searchIndex == value.length - dimension.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/*\n\t * if dimension is included - checking and if it necessary setting value\n\t * without dimension - return value\n\t */\n\tcheckSetGetStyleSizeValue(element, styleName, computedStyleName, dimension) {\n\t\tlet elemStyleValue = element.style[styleName];\n\t\telemStyleValue = String(elemStyleValue);\n\n\t\tif (!elemStyleValue || dimension ? !WPTB_Helper.checkingDimensionValue(elemStyleValue, dimension) : false) {\n\t\t\tconst elementStyles = window.getComputedStyle(element);\n\t\t\tif (\n\t\t\t\tcomputedStyleName && elementStyles.getPropertyValue(computedStyleName) && dimension\n\t\t\t\t\t? WPTB_Helper.checkingDimensionValue(elementStyles.getPropertyValue(computedStyleName), dimension)\n\t\t\t\t\t: true\n\t\t\t) {\n\t\t\t\tif (!dimension) {\n\t\t\t\t\treturn elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t}\n\t\t\t\telement.style[styleName] = elementStyles.getPropertyValue(computedStyleName);\n\t\t\t} else if (!dimension) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\telement.style[styleName] = null;\n\t\t\t}\n\t\t} else if (!dimension) {\n\t\t\treturn elemStyleValue;\n\t\t}\n\n\t\treturn element.style[styleName];\n\t},\n\n\t/*\n\t * function checking that element has the style\n\t * if this style is present - checking the format color\n\t * if param set is true - setting style for element (consider hex format of color)\n\t * if param set is false - getting style from element\n\t */\n\tcheckSetGetStyleColorValue(element, styleName, computedStyleName, set = false) {\n\t\tlet elemStyleColorValue = element.style[styleName];\n\n\t\tif (!elemStyleColorValue) {\n\t\t\tconst elementStyles = window.getComputedStyle(element, null);\n\n\t\t\tif (elementStyles && elementStyles.getPropertyValue(computedStyleName)) {\n\t\t\t\tif (set) {\n\t\t\t\t\telemStyleColorValue = WPTB_Helper.rgbToHex(elementStyles.getPropertyValue(computedStyleName));\n\t\t\t\t\tif (WPTB_Helper.isHex(elemStyleColorValue)) {\n\t\t\t\t\t\telement.style[styleName] = elemStyleColorValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.style[styleName] = '';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t}\n\t\t\t} else if (set) {\n\t\t\t\telement.style[styleName] = '';\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t} else if (!set) {\n\t\t\treturn elemStyleColorValue;\n\t\t}\n\t},\n\n\t/*\n\t * function checking that element has the style\n\t * if this style is present - checking the format color\n\t * if param set is true - setting style for element (consider hex format of color)\n\t * if param set is false - getting style from element\n\t */\n\tcheckSetGetStyleValue(element, styleName, computedStyleName, set = false) {\n\t\tconst elemStyleColorValue = element.style[styleName];\n\n\t\tif (!elemStyleColorValue) {\n\t\t\tconst elementStyles = window.getComputedStyle(element, null);\n\n\t\t\tif (elementStyles && elementStyles.getPropertyValue(computedStyleName)) {\n\t\t\t\tif (set) {\n\t\t\t\t\telement.style[styleName] = elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t} else {\n\t\t\t\t\treturn elementStyles.getPropertyValue(computedStyleName);\n\t\t\t\t}\n\t\t\t} else if (!set) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t} else if (!set) {\n\t\t\treturn elemStyleColorValue;\n\t\t}\n\t},\n\n\t/*\n\t * get the value of the same elements that have the most count\n\t */\n\tgetValueMaxCountSameElementsInArray(arr) {\n\t\tif (arr && Array.isArray(arr)) {\n\t\t\tconst check = {};\n\t\t\tlet countEmpty = 0;\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i]) {\n\t\t\t\t\tif (check[arr[i]]) {\n\t\t\t\t\t\tcheck[arr[i]]++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcheck[arr[i]] = 1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcountEmpty++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet maxPropName;\n\t\t\tfor (const key in check) {\n\t\t\t\tif (!maxPropName) {\n\t\t\t\t\tmaxPropName = key;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (check[maxPropName] < check[key]) {\n\t\t\t\t\tmaxPropName = key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn check[maxPropName] >= countEmpty ? maxPropName : '';\n\t\t}\n\t},\n\n\t/*\n\t * For assigning to each cell xIndex and y Index attributes,\n\t * these are the column number and row number of cell in table.\n\t */\n\trecalculateIndexes(table) {\n\t\tWPTB_RecalculateIndexes(table);\n\t},\n\n\t/**\n\t * Table Rows colors reinstall\n\t *\n\t * @param table\n\t */\n\ttableRowsColorsReinstall(table) {\n\t\tif (table.rows.length) {\n\t\t\tconst infArr = table.className.match(/wptb-element-main(.+)-(\\d+)/i);\n\t\t\tif (infArr && Array.isArray(infArr)) {\n\t\t\t\tlet tableIndex = '';\n\t\t\t\tif (infArr[infArr.length - 1] == '0') {\n\t\t\t\t\ttableIndex = 'startedid-0';\n\t\t\t\t} else {\n\t\t\t\t\ttableIndex = infArr[infArr.length - 1];\n\t\t\t\t}\n\n\t\t\t\tconst tableHeaderBackground = document.querySelector(\n\t\t\t\t\t`.wptb-el-main-table_setting-${tableIndex}-tableHeaderBackground`\n\t\t\t\t);\n\t\t\t\tif (tableHeaderBackground) {\n\t\t\t\t\tconst details = { value: tableHeaderBackground.value };\n\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('controlColor:change', tableHeaderBackground, details);\n\t\t\t\t}\n\n\t\t\t\tconst tableEvenRowBackground = document.querySelector(\n\t\t\t\t\t`.wptb-el-main-table_setting-${tableIndex}-tableEvenRowBackground`\n\t\t\t\t);\n\t\t\t\tif (tableEvenRowBackground) {\n\t\t\t\t\tconst details = { value: tableEvenRowBackground.value };\n\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('controlColor:change', tableEvenRowBackground, details);\n\t\t\t\t}\n\n\t\t\t\tconst tableOddRowBackground = document.querySelector(\n\t\t\t\t\t`.wptb-el-main-table_setting-${tableIndex}-tableOddRowBackground`\n\t\t\t\t);\n\t\t\t\tif (tableOddRowBackground) {\n\t\t\t\t\tconst details = { value: tableOddRowBackground.value };\n\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('controlColor:change', tableOddRowBackground, details);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Get parent html element of given type\n\t *\n\t * @param {string} parentType type of parent element\n\t * @param {HTMLElement} el current element\n\t * @return {*} html element of type\n\t */\n\tgetParentOfType: (parentType, el) => {\n\t\tif (el.nodeName === parentType.toUpperCase()) {\n\t\t\treturn el;\n\t\t}\n\n\t\treturn WPTB_Helper.getParentOfType(parentType, el.parentElement);\n\t},\n\t// current relative type of drag element\n\t// this type is used on differentiating certain elements based on their positioning on table\n\tdragRelativeType: '',\n\t/**\n\t *\n\t * @param {string} val drag relative type\n\t */\n\tsetDragRelativeType(val) {\n\t\tthis.dragRelativeType = val;\n\t},\n\t// get drag relative type\n\tgetDragRelativeType() {\n\t\treturn this.dragRelativeType;\n\t},\n\t/**\n\t *\n\t * @param {HTMLElement} element\n\t * @param {string} styleName\n\t */\n\tgetElementColorStylesHex(element, styleName) {\n\t\tlet color = element.style[styleName];\n\t\tcolor = WPTB_Helper.rgbToHex(color);\n\t\tif (!WPTB_Helper.isHex(color)) {\n\t\t\tcolor = '';\n\t\t}\n\t\treturn color;\n\t},\n\t/**\n\t * Show element controls on adding them to table.\n\t */\n\tshowControlsOnElementMount() {\n\t\tdocument.addEventListener('element:mounted:dom', function (e) {\n\t\t\te.target.click();\n\t\t});\n\t},\n\t/**\n\t * Show elements list menu on left panel on removing element from table\n\t */\n\tshowElementsListOnRemove() {\n\t\tdocument.addEventListener('element:removed:dom', function () {\n\t\t\tWPTB_Helper.activateSection('elements');\n\t\t});\n\t},\n\t/**\n\t * Block tiny MCE initialization and element selected activation for data cells for specific active sections.\n\t * Sections: Manage cells, background menu\n\t */\n\tblockTinyMCE() {\n\t\tconst addBlocker = (parent) => {\n\t\t\tconst blockerElement = document.createElement('div');\n\t\t\tblockerElement.classList.add('wptb-plugin-blocker-element');\n\n\t\t\tconst haveChild = parent.childNodes.length > 0;\n\t\t\tparent.appendChild(blockerElement);\n\n\t\t\t// if don't have any children, then add before/after css element states to blocker in order to reflect table builder menu visuals\n\t\t\tif (!haveChild) {\n\t\t\t\tparent.classList.add('wptb-plugin-blocker-element-empty');\n\t\t\t}\n\t\t};\n\n\t\tconst removeBlocker = (parent) => {\n\t\t\tconst blockerElement = parent.querySelector('.wptb-plugin-blocker-element');\n\t\t\tif (blockerElement) {\n\t\t\t\tblockerElement.remove();\n\t\t\t}\n\n\t\t\tparent.classList.remove('wptb-plugin-blocker-element-empty');\n\t\t};\n\t\tdocument.addEventListener('wptbSectionChanged', ({ detail }) => {\n\t\t\tconst table = document.querySelector('.wptb-table-setup table.wptb-preview-table');\n\t\t\tif (table) {\n\t\t\t\tconst cells = Array.from(table.querySelectorAll('td'));\n\n\t\t\t\tcells.map(removeBlocker);\n\n\t\t\t\tconst allowedSections = ['manage_cells', 'cell_settings', 'background_menu'];\n\t\t\t\tif (allowedSections.includes(detail)) {\n\t\t\t\t\tcells.map(addBlocker);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('wptb:save:before', () => {\n\t\t\tconst table = document.querySelector('.wptb-table-setup table.wptb-preview-table');\n\t\t\tconst cells = Array.from(table.querySelectorAll('td'));\n\n\t\t\tcells.map(removeBlocker);\n\t\t});\n\t},\n\t/**\n\t * Setup for builder if called by gutenberg block.\n\t */\n\tcalledByBlock() {\n\t\tconst parsedUrl = new URL(window.location.href);\n\t\tconst isCalledByBlock = parsedUrl.searchParams.get('gutenberg');\n\t\tif (isCalledByBlock) {\n\t\t\tconst closeButton = document.querySelector('.wptb-plugin-header-close a');\n\n\t\t\tcloseButton.addEventListener(\n\t\t\t\t'click',\n\t\t\t\t(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tconst isTableClean = document.querySelector('.wptb-save-disabled');\n\n\t\t\t\t\tconst tableId = new URL(window.location.href).searchParams.get('table');\n\n\t\t\t\t\tif (!isTableClean) {\n\t\t\t\t\t\tconst confirmResult = window.confirm(WPTB_Store.getTranslation('dirtyConfirmation'));\n\t\t\t\t\t\tif (confirmResult) {\n\t\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('gutenbergClose', document, tableId);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tWPTB_Helper.wptbDocumentEventGenerate('gutenbergClose', document, tableId);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true }\n\t\t\t);\n\t\t}\n\t},\n\t/**\n\t * Clean any builder related artifacts from table.\n\t */\n\ttableClean() {\n\t\t// remove any hover artifacts from table\n\t\tArray.from(document.querySelectorAll('.wptb-directlyhovered')).map((el) => {\n\t\t\tel.classList.remove('wptb-directlyhovered');\n\t\t});\n\n\t\t// remove all data-placeholder from table\n\t\t// eslint-disable-next-line array-callback-return\n\t\tArray.from(document.querySelectorAll('.wptb-text-container p')).map((el) => {\n\t\t\tel.removeAttribute('data-placeholder');\n\t\t});\n\t},\n\t/**\n\t * Setup table save related visual styles and elements.\n\t *\n\t * @param {boolean} saveStatus whether saving or not\n\t */\n\ttableSaveIndicator(saveStatus) {\n\t\tconst builder = document.querySelector('#wptb_builder');\n\t\tif (builder) {\n\t\t\tif (saveStatus) {\n\t\t\t\tbuilder.dataset.wptbSaving = true;\n\t\t\t} else {\n\t\t\t\tdelete builder.dataset.wptbSaving;\n\t\t\t}\n\t\t}\n\t},\n};\n","var WPTB_Initializer = function () {\n\n    const MIN_COLUMNS = 1,\n        MIN_ROWS = 1,\n        MAX_COLUMNS = 30,\n        MAX_ROWS = 30;\n\n    var tableGenerator = document.body;\n    columnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0],\n            columnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0],\n            rowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1],\n            rowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1],\n            columnsInput = document.getElementById('wptb-columns-number'),\n            rowsInput = document.getElementById('wptb-rows-number');\n\n    // columnsDecrementButton.onclick = function () {\n    //         if (columnsInput.value > MIN_COLUMNS) {\n    //                 columnsInput.value--;\n    //         }\n    // };\n    //\n    // columnsIncrementButton.onclick = function () {\n    //         if (columnsInput.value < MAX_COLUMNS) {\n    //                 columnsInput.value++;\n    //         }\n    // };\n    //\n    // rowsDecrementButton.onclick = function () {\n    //         if (rowsInput.value > MIN_ROWS) {\n    //                 rowsInput.value--;\n    //         }\n    // };\n    //\n    // rowsIncrementButton.onclick = function () {\n    //         if (rowsInput.value < MAX_ROWS) {\n    //                 rowsInput.value++;\n    //         }\n    // };\n\n    // document.getElementById( 'wptb-generate-table' ).onclick = function (  ) {\n    //         var columns = document.getElementById('wptb-columns-number').value,\n    //             rows = document.getElementById('wptb-rows-number').value;\n    //\n    //         //wptbTableStateSaveManager.tableStateClear();\n    //\n    //         WPTB_Table(columns, rows);\n    //\n    //         let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n    //         wptbTableStateSaveManager.tableStateSet();\n    // }\n\n    // register and setup section buttons\n    WPTB_Helper.registerSections(['elements', 'table_settings', 'cell_settings', 'options_group' , 'table_responsive_menu', 'manage_cells', 'background_menu']);\n    WPTB_Helper.setupSectionButtons();\n\n    // activate elements section for startup\n    WPTB_Helper.activateSection('elements');\n\n    // side bar toggle setup\n    WPTB_Helper.setupSidebarToggle('.wptb-panel-toggle-section .wptb-panel-drawer-icon');\n\n    // setup panel sections that have the ability to be toggled on/off\n    WPTB_Helper.setupPanelToggleButtons();\n\n    // setup responsive menu both at left and builder panel\n    new WptbResponsive('table_responsive_menu', 'wptbResponsiveApp', '.wptb-builder-content');\n\n    // get builder section from url parameter for easy switch at page load\n    WPTB_Helper.getSectionFromUrl();\n\n    // automatically show element controls when dropped to table\n    WPTB_Helper.showControlsOnElementMount();\n\n    // show elements list menu on left panel on removing elements from table\n    WPTB_Helper.showElementsListOnRemove();\n\n    // block tinyMCE from activation at manage cells menu\n\tWPTB_Helper.blockTinyMCE();\n\n    // initialize header toolbox\n    new WPTB_HeaderToolbox('.wptb-plugin-header-toolbar').init();\n\n    // redirect active menu to elements after closing manage cells menu\n    document.addEventListener('wp-table-builder/table-edit-mode/closed', () => {\n        WPTB_Helper.activateSection('elements');\n    })\n\n    WPTB_Helper.calledByBlock();\n\n    // call what-is-new component\n    WPTB_ControlsManager.callControlScript('WhatIsNew');\n\n    // initialize notification manager\n    WPTB_NotificationManager.init();\n\n    // call table embed\n    WPTB_ControlsManager.callControlScript('TableEmbed', 'wptb-embed-modal');\n\n\t// start up extra styles for builder and make connections to necessary hooks\n\tdocument.addEventListener('wptb:table:generated', () => {\n\t\tWPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder);\n\n\t\t// subscribe to table settings changes to update extra styles\n\t\tWPTB_ControlsManager.subscribeToControl(\n\t\t\t'extraStyles',\n\t\t\t'extraTableStyles',\n\t\t\t() => {\n\t\t\t\tWPTB_ExtraStyles.applyStyles(WPTB_ExtraStyles.modes.builder);\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t});\n\n    // @deprecated\n    // // add scroll operation calculations to window\n    // new WPTB_RowMove().attachScrollOperationCalculations();\n};\n","var WPTB_LeftPanel = function () {\r\n\r\n    let table = document.getElementsByClassName('wptb-preview-table')[0],\r\n        wptbElementButtons = document.getElementsByClassName('wptb-element');\r\n\r\n    for (var i = 0; i < wptbElementButtons.length; i++) {\r\n        wptbElementButtons[i].ondragstart = function (e) {\r\n            e.dataTransfer.setData('wptbElement', this.dataset.wptbElement);\r\n            e.dataTransfer.setData( 'wptbElIndic-' + this.dataset.wptbElement, 'wptbElIndic-' + this.dataset.wptbElement );\r\n        }\r\n    };\r\n    \r\n    if( table ) {\r\n\r\n        document.querySelector('#wptb-left-scroll-panel-curtain .wptb-table-edit-mode-close').addEventListener('click', () => {\r\n            WPTB_Helper.toggleTableEditMode(true);\r\n        })\r\n\r\n        document.addEventListener('wptbSectionChanged', ({detail}) => {\r\n            if(detail === 'manage_cells'){\r\n                const wptbTablesEditModeCloseButtons = Array.from(document.querySelectorAll( '.wptb-management_table_container .wptb-table-edit-mode-close' ));\r\n                wptbTablesEditModeCloseButtons.map(closeButton => {\r\n                    closeButton.addEventListener('click', () => {\r\n                        WPTB_Helper.toggleTableEditMode(true);\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    };\r\n\r\n    // this code hides the \"element parameters\" area\r\n    // when clicked outside this element and its \"tinymce\" toolbar \r\n    let wptbBuilderPanel = document.getElementsByClassName( 'wptb-builder-panel' )[0];\r\n    wptbBuilderPanel.onclick = function( e ) {\r\n        if( ! e.target.classList.contains( 'wptb-ph-element' ) && ! WPTB_Helper.findAncestor( e.target, 'wptb-ph-element' ) && \r\n               ! e.target.classList.contains( 'wptb-fixed-toolbar' ) && ! WPTB_Helper.findAncestor( e.target, 'wptb-fixed-toolbar' ) ) {\r\n            if(WPTB_Helper.currentSection !== 'manage_cells'){\r\n\r\n                WPTB_Helper.clickOnFreeSpace();\r\n            }\r\n        }\r\n    };\r\n   \r\n    let wptbHeader = document.getElementsByClassName( 'wptb-header' );\r\n    if( wptbHeader.length > 0 ) wptbHeader = wptbHeader[0];\r\n    wptbHeader.onclick = function() {\r\n        WPTB_Helper.clickOnFreeSpace();\r\n    };\r\n};","(function UMD(key, context, factory) {\n\tif (typeof module !== 'undefined' && typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext[key] = factory();\n\t}\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_Logger', self || global, () => {\n\tconst format = '%c WP Table Builder %c {message} ';\n\tconst brandStyle =\n\t\t'border-radius:5px 0 0 5px; background-color: #3299D1; padding: 3px; color: #FFF; font-weight: bold;';\n\tconst messageStyle = 'background-color: {bgColor} ; padding: 3px; color: #FFF; border-radius: 0 5px 5px 0;';\n\n\t/**\n\t * Background colors for message.\n\t *\n\t * Add color property keys keeping in mind that internal function to use that colors will select them based on type of message, ie 'normal' color property for normal messages and 'error' color property for error message types.\n\t *\n\t * @type {Object}\n\t */\n\tconst bgColors = {\n\t\tnormal: '#48BB78',\n\t};\n\n\treturn {\n\t\t/**\n\t\t * Prepare format for incoming message.\n\t\t *\n\t\t * @param {string} message message to be used\n\t\t * @return {string} prepared message\n\t\t */\n\t\tprepareMessage(message) {\n\t\t\treturn format.replace('{message}', message);\n\t\t},\n\t\t/**\n\t\t * Prepare style of message.\n\t\t *\n\t\t * @param {string} messageType message type\n\t\t * @return {string} prepared style\n\t\t */\n\t\tprepareMessageStyle(messageType = 'normal') {\n\t\t\tlet keyName = 'normal';\n\n\t\t\tif (bgColors[messageType]) {\n\t\t\t\tkeyName = messageType;\n\t\t\t}\n\n\t\t\treturn messageStyle.replace('{bgColor}', bgColors[keyName]);\n\t\t},\n\t\t/**\n\t\t * Normal log function.\n\t\t *\n\t\t * @param {string} message message string\n\t\t */\n\t\tlog(message) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(this.prepareMessage(message), brandStyle, this.prepareMessageStyle('normal'));\n\t\t},\n\t};\n});\n","var MultipleSelect = function () {\n\n\tvar selectedCells = [],\n\t\tmultipleCellMode = false;\n\n\tthis.activateMultipleSelectMode = function () {\n\t\tselectedCells = [];\n\t\tvar tds = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n\t\tfor (var i = 0; i < tds.length; i++) {\n\t\t\ttds[i].classList.remove('wptb-highlighted');\n\t\t}\n\t\tmultipleCellMode = true;\n\t}\n\n\tthis.deactivateMultipleSelectMode = function () {\n\t\tmultipleCellMode = false;\n\t}\n\n\tthis.isActivated = function () {\n\t\treturn multipleCellMode;\n\t}\n\n\tthis.pushSelectedCell = function (cell) {\n\t\tif (!multipleCellMode) {\n\t\t\treturn;\n\t\t}\n\t\tselectedCells.push(cell);\n\t\tcell.classList.add('wptb-highlighted');\n\t};\n\n\tthis.selectedCells = function () {\n\t\treturn selectedCells;\n\t}\n\n\tthis.flushSelectedCells = function () {\n\t\tselectedCells = [];\n\t}\n\n\tthis.getFirst = function () {\n\t\tvar minXIndex = 1000, minYIndex = 1000, first;\n\t\tfor (var i = selectedCells.length - 1; i >= 0; i--) {\n\t\t\tif (minXIndex >= selectedCells[i].dataset.xIndex\n\t\t\t\t&& minYIndex >= selectedCells[i].dataset.yIndex) {\n\t\t\t\tfirst = selectedCells[i];\n\t\t\t\tminXIndex = selectedCells[i].dataset.xIndex;\n\t\t\t\tminYIndex = selectedCells[i].dataset.yIndex;\n\t\t\t}\n\t\t}\n\t\treturn first;\n\t}\n\n\tthis.getLast = function () {\n\t\tvar maxXIndex = -1, maxYIndex = -1, last;\n\t\tfor (var i = selectedCells.length - 1; i >= 0; i--) {\n\t\t\tif (maxXIndex <= selectedCells[i].dataset.xIndex\n\t\t\t\t&& maxYIndex <= selectedCells[i].dataset.yIndex) {\n\t\t\t\tlast = selectedCells[i];\n\t\t\t\tmaxXIndex = selectedCells[i].dataset.xIndex;\n\t\t\t\tmaxYIndex = selectedCells[i].dataset.yIndex;\n\t\t\t}\n\t\t}\n\t\treturn last;\n\t}\n\n\tthis.removeAllButFirst = function () {\n\t\tvar td = this.getFirst();\n\t\tfor (var i = 1; i < selectedCells.length; i++) {\n\t\t\tselectedCells[i].classList.add('wptb-fused-cell-' + td.dataset.xIndex + '-' + td.dataset.yIndex);\n\t\t}\n\t}\n\n\treturn this;\n\n};","/**\n * Builder notification manager.\n */\n(function assignToGlobal(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_NotificationManager', self || global, () => {\n\t// key for making sure notification manager is initialized only once\n\tlet initialized = false;\n\n\t// store will be populated with flux store implementation by ui components\n\tthis.store = null;\n\n\t// mount id to mount our dev tool\n\tconst devToolMountId = 'wptbNotificationManagerDevTool';\n\n\t/**\n\t * Builder notification manager class.\n\t *\n\t * @class\n\t */\n\t// eslint-disable-next-line camelcase\n\tfunction WPTB_NotificationManager() {\n\t\t/**\n\t\t * Valid notification types.\n\t\t *\n\t\t * It will be populated on initialization with the values from notification manager flux store.\n\t\t *\n\t\t * @type {Object} notification types\n\t\t */\n\t\tthis.types = {};\n\n\t\t// eslint-disable-next-line no-restricted-globals\n\t\tconst context = self || global;\n\n\t\t// eslint-disable-next-line no-undef\n\t\tconst managerData = context.wptb_admin_object?.notificationManager;\n\n\t\t/**\n\t\t * Create single notification object.\n\t\t *\n\t\t * @param {Object} options notification options\n\t\t * @return {Object} notification object\n\t\t */\n\t\tconst createNotificationObject = (options) => {\n\t\t\tconst { defaults } = this.store.getters;\n\n\t\t\t// merge only keys that is available in defaults to prevent non notification related properties to be sent to component\n\t\t\tconst parsedOptions = Object.keys(options).reduce((carry, key) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(options, key)) {\n\t\t\t\t\tif (defaults[key]) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tcarry[key] = options[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn carry;\n\t\t\t}, {});\n\n\t\t\treturn { ...defaults, ...parsedOptions };\n\t\t};\n\n\t\t/**\n\t\t * Send a notification to builder ui.\n\t\t *\n\t\t * Use a valid type that is defined inside types property of notification manager.\n\t\t *\n\t\t * @param {Object} notificationOptions notification options, available properties are message, type, queue, reveal,dismiss\n\t\t *\n\t\t */\n\t\tthis.sendNotification = (notificationOptions) => {\n\t\t\t// send action to store\n\t\t\tthis.store.dispatch('addNotification', createNotificationObject(notificationOptions));\n\t\t};\n\n\t\t// prepare mount point for dev tool\n\t\tconst addDevToolsToDOM = () => {\n\t\t\tconst builderElement = document.querySelector('.wptb-builder-panel');\n\n\t\t\tif (builderElement) {\n\t\t\t\tconst devToolMountPoint = document.createElement('div');\n\t\t\t\tdevToolMountPoint.setAttribute('id', devToolMountId);\n\t\t\t\tbuilderElement.appendChild(devToolMountPoint);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Initialize and setup notification manager.\n\t\t */\n\t\tthis.init = () => {\n\t\t\tif (!initialized) {\n\t\t\t\t// assign server sent notification data to control manager so that our compiled vue code can read it\n\t\t\t\tWPTB_ControlsManager.setControlData('NotificationManager', managerData);\n\n\t\t\t\t// call notification related components\n\t\t\t\tWPTB_ControlsManager.callControlScript('NotificationManager', 'NotificationManager');\n\n\t\t\t\t// assign notification types from store\n\t\t\t\tthis.notificationTypes = this.store.getters.notificationTypes;\n\t\t\t\t// assign queue types from store\n\t\t\t\tthis.queueTypes = this.store.getters.queueTypes;\n\t\t\t\t// assign reveal types from store\n\t\t\t\tthis.revealTypes = this.store.getters.revealTypes;\n\t\t\t\t// assign reveal types from store\n\t\t\t\tthis.revealTypes = this.store.getters.revealTypes;\n\t\t\t\t// assign dismiss types from store\n\t\t\t\tthis.dismissTypes = this.store.getters.dismissTypes;\n\n\t\t\t\t// // add dev tool mount point to DOM\n\t\t\t\t// addDevToolsToDOM();\n\t\t\t\t//\n\t\t\t\t// // data for dev tool\n\t\t\t\t// const devToolsData = {\n\t\t\t\t// \ttypes: this.notificationTypes,\n\t\t\t\t// \tqueue: this.queueTypes,\n\t\t\t\t// \treveal: this.revealTypes,\n\t\t\t\t// \tdismiss: this.dismissTypes,\n\t\t\t\t// \tsendNotification: this.sendNotification.bind(this),\n\t\t\t\t// \tmountId: devToolMountId,\n\t\t\t\t// };\n\t\t\t\t//\n\t\t\t\t// // assign dev tool data\n\t\t\t\t// WPTB_ControlsManager.setControlData('NotificationManagerDevTool', devToolsData);\n\t\t\t\t//\n\t\t\t\t// // call dev tool related components\n\t\t\t\t// WPTB_ControlsManager.callControlScript('NotificationManagerDevTool', 'NotificationManagerDevTool');\n\n\t\t\t\t// initialization process completed\n\t\t\t\tinitialized = true;\n\t\t\t}\n\t\t};\n\t}\n\n\t// return singleton manager instance to global context to assign\n\treturn new WPTB_NotificationManager();\n});\n","var WPTB_Parser = function ( code ) {\n    let div = document.createElement( 'div' );\n    div.innerHTML = code;\n    \n    let table = div.children[0];\n    let columnTitleMobile = [...table.querySelectorAll( '.wptb-column-title-mobile-container' )];\n    \n    for( let i = 0; i < columnTitleMobile.length; i++ ) {\n        let parent = columnTitleMobile[i].parentNode;\n        parent.removeChild( columnTitleMobile[i] );\n    }\n    \n    let tds = table.querySelectorAll( 'td' );\n    for ( let i = 0; i < tds.length; i++ ) {\n        tds[i].classList.add( 'wptb-droppable' );\n        tds[i].classList.remove( 'wptb-column-title-mobile-not-elements' );\n    }\n    \n    return table;\n}","// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\nif (!Object.keys) {\n    Object.keys = (function () {\n        'use strict';\n        var hasOwnProperty = Object.prototype.hasOwnProperty,\n                hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n                dontEnums = [\n                    'toString',\n                    'toLocaleString',\n                    'valueOf',\n                    'hasOwnProperty',\n                    'isPrototypeOf',\n                    'propertyIsEnumerable',\n                    'constructor'\n                ],\n                dontEnumsLength = dontEnums.length;\n\n        return function (obj) {\n            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n                throw new TypeError('Object.keys called on non-object');\n            }\n\n            var result = [], prop, i;\n\n            for (prop in obj) {\n                if (hasOwnProperty.call(obj, prop)) {\n                    result.push(prop);\n                }\n            }\n\n            if (hasDontEnumBug) {\n                for (i = 0; i < dontEnumsLength; i++) {\n                    if (hasOwnProperty.call(obj, dontEnums[i])) {\n                        result.push(dontEnums[i]);\n                    }\n                }\n            }\n            return result;\n        };\n    }());\n}","const WPTB_RecalculateIndexes = function (table) {\n    let trs = table.getElementsByTagName( 'tr' ),\n        tds, maxCols = 0, maxColsFull = 0, tdsArr = [];\n\n    for ( let i = 0; i < trs.length; i++ ) {\n        tds = trs[i].getElementsByTagName( 'td' );\n\n        if ( tdsArr[i] == undefined ) {\n            tdsArr[i] = [];\n        }\n\n        let jMainIter = 0;\n        for ( let j = 0; j < tds.length; j++ ) {\n            if ( tdsArr[i][j] != undefined ) {\n                for ( let y = 0; y < 100; y++ ) {\n                    if ( tdsArr[i][jMainIter] != undefined ) {\n                        jMainIter++;\n                        continue;\n                    }\n                    tdsArr[i][jMainIter] = tds[j];\n                    tds[j].dataset.xIndex = jMainIter;\n                    break;\n                }\n            } else {\n                tdsArr[i][j] = tds[j];\n                tds[j].dataset.xIndex = jMainIter;\n            }\n            tds[j].dataset.yIndex = i;\n\n            if ( tds[j].colSpan > 1 ) {\n                for ( let k = 1; k < tds[j].colSpan; k++ ) {\n                    jMainIter++;\n                    tdsArr[i][jMainIter] = 'tdDummy';\n                }\n            }\n\n            if ( tds[j].rowSpan > 1 ) {\n                for ( let x = 1; x < tds[j].rowSpan; x++ ) {\n                    if ( tdsArr[i + x] == undefined ) {\n                        tdsArr[i + x] = [];\n                    }\n                    for ( let z = 0; z < tds[j].colSpan; z++ ) {\n                        tdsArr[i + x][jMainIter - tds[j].colSpan + 1 + z ] = 'tdDummy';\n                    }\n                }\n            }\n            jMainIter++;\n        }\n\n        if ( tds.length > maxCols ) {\n            maxCols = tds.length;\n        }\n\n        if( i == 0 ) {\n            maxColsFull = jMainIter;\n        }\n    }\n    table.columns = maxCols;\n    table.maxCols = maxColsFull;\n}\n","/**\n * Responsive menu and options class.\n *\n * This class will be called and instanced at table builder menu to add it the responsive menu and its controls.\n *\n * @param {string} sectionName section name\n * @param {string} responsiveWrapperId id for mount point\n * @param {string} mainContainerQuery query to find parent container for responsive menu\n * @throws {Error} will throw an error if mainContainerQuery failed to find any element\n * @constructor\n */\n// eslint-disable-next-line no-unused-vars\nfunction WptbResponsive(sectionName, responsiveWrapperId, mainContainerQuery) {\n\tthis.sectionName = sectionName;\n\tthis.responsiveWrapperId = responsiveWrapperId;\n\tthis.responsiveTable = null;\n\tthis.loaded = false;\n\n\t/**\n\t * Add responsive container to dom.\n\t */\n\tthis.addContainerToDom = () => {\n\t\tconst responsiveContainer = document.querySelector(`#${this.responsiveWrapperId}`);\n\t\tif (!responsiveContainer) {\n\t\t\tconst mainContainer = document.querySelector(mainContainerQuery);\n\n\t\t\t// parent container not found, throw error\n\t\t\tif (!mainContainer) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`[WPTB_Responsive]: no parent container is found with the given query of [${mainContainerQuery}]`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst range = document.createRange();\n\t\t\trange.setStart(mainContainer, 0);\n\n\t\t\tconst responsiveElement = range.createContextualFragment(\n\t\t\t\t`<div class=\"wptb-responsive\" id=\"${this.responsiveWrapperId}\">responsive element</div>`\n\t\t\t);\n\t\t\tmainContainer.appendChild(responsiveElement);\n\t\t\tthis.loaded = true;\n\t\t}\n\n\t\tthis.responsiveTable = document.querySelector(`#${this.responsiveWrapperId}`);\n\t};\n\n\t/**\n\t * Load and make necessary mount preparations for component.\n\t */\n\tthis.load = () => {\n\t\tif (!this.loaded) {\n\t\t\tthis.addContainerToDom();\n\n\t\t\tWPTB_Helper.elementStartScript(this.responsiveTable, 'table_responsive_menu');\n\t\t\tWPTB_Helper.elementOptionsSet('table_responsive_menu', this.responsiveTable);\n\t\t\tWPTB_ControlsManager.callControlScript('ResponsiveTable', this.responsiveWrapperId);\n\t\t}\n\t};\n\n\t/**\n\t * Startup hook for the component.\n\t */\n\tthis.startUp = () => {\n\t\t// event listener for section change events\n\t\tdocument.addEventListener('wptbSectionChanged', (e) => {\n\t\t\tconst tablePreview = document.querySelector('.wptb-table-setup .wptb-preview-table');\n\n\t\t\t// check if activated section is related to responsive and there is a main table already in the view\n\t\t\tif (e.detail === this.sectionName && tablePreview) {\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t});\n\n\t\t// event listener for table ready signal\n\t\tdocument.addEventListener('wptb:table:generated', () => {\n\t\t\t// check current section to be sure that responsive menu is the active one before calling load related scripts\n\t\t\tif (WPTB_Helper.getCurrentSection() === 'table_responsive_menu') {\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.startUp();\n}\n","var WPTB_Settings = function () {\n    var elems = document.getElementsByClassName('wptb-element');\n\n    for ( var i = 0; i < elems.length; i++ ) {\n        elems[i].ondragstart = function ( event ) {\n            event.dataTransfer.effectAllowed = 'move';\n            event.dataTransfer.setData( 'wptbElement', event.target.dataset.wptbElement );\n            event.dataTransfer.setData( 'wptbElIndic-' + event.target.dataset.wptbElement, 'wptbElIndic-' + event.target.dataset.wptbElement );\n\n            // set drag relative helper field for future use\n            WPTB_Helper.setDragRelativeType(this.dataset.wptbRelativeElements || '');\n        }\n        elems[i].ondragend = function () {\n            WPTB_Helper.elementDragEndClear();\n        }\n    };\n\n    let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n    let wptbUndo = document.getElementsByClassName( 'wptb-undo' );\n    if( wptbUndo.length > 0 ) {\n        wptbUndo = wptbUndo[0];\n        \n        wptbUndo.onclick = function( event ) {\n            if( ! this.classList.contains( 'wptb-undoredo-disabled' ) ) {\n                wptbTableStateSaveManager.tableStateGet( this.dataset.wptbUndoredo );\n                let wptbUndoRedoContainer = document.getElementsByClassName( 'wptb-undo-redo-container' );\n                if(wptbUndoRedoContainer.length > 0) {\n                    wptbUndoRedoContainer = wptbUndoRedoContainer[0];\n                    wptbUndoRedoContainer.onmouseleave = function( event ) {\n                        event.target.onmouseleave = '';\n                        let table = document.querySelector( '.wptb-preview-table' );\n                        WPTB_Table();\n                    }\n                }\n            }\n        }\n    }\n    \n    let wptbRedo = document.getElementsByClassName( 'wptb-redo' );\n    if( wptbRedo.length > 0 ) {\n        wptbRedo = wptbRedo[0];\n        \n        wptbRedo.onclick = function( event ) {\n            if( ! this.classList.contains( 'wptb-undoredo-disabled' ) ) {\n                wptbTableStateSaveManager.tableStateGet( this.dataset.wptbUndoredo );\n                let wptbUndoRedoContainer = document.getElementsByClassName( 'wptb-undo-redo-container' );\n                if(wptbUndoRedoContainer.length > 0) {\n                    wptbUndoRedoContainer = wptbUndoRedoContainer[0];\n                    wptbUndoRedoContainer.onmouseleave = function( event ) {\n                        event.target.onmouseleave = '';\n                        let table = document.querySelector( '.wptb-preview-table' );\n                        WPTB_Table();\n                    }\n                }\n            }\n            \n        }\n    }\n\n    // @deprecated\n    // let shortcodePopupWindow = document.getElementsByClassName( 'wptb-popup-window-modal' )[0];\n    document.getElementsByClassName( 'wptb-embed-btn' )[0].onclick = function () {\n        if( ! this.classList.contains( 'wptb-button-disable' ) ) {\n            // show modal window for shortcode embed\n            WPTB_Store.commit('embed/showModal');\n        }\n    }\n    \n    window.onbeforeunload = function(e) {\n        let wptbSaveDisabled = document.getElementsByClassName( 'wptb-save-disabled' );\n        if( wptbSaveDisabled.length == 0 ) {\n            return true;\n        } else {\n            return null;\n        }\n    };\n    \n    \n    document.getElementsByClassName( 'wptb-popup-dark-area' )[0].onclick = function () {\n        shortcodePopupWindow.classList.remove( 'wptb-popup-show' );\n    }\n\n    // @deprecated\n    // document.getElementsByClassName( 'wptb-popup-window-close-icon' )[0].onclick = function () {\n    //     shortcodePopupWindow.classList.remove( 'wptb-popup-show' );\n    // }\n    \n    document.getElementsByClassName( 'wptb-preview-btn' )[0].onclick = function ( event ) {\n        if( this.classList.contains( 'wptb-button-disable' ) ) {\n            return;\n        } \n        \n        let previewId = Math.floor( Math.random() * 10000 );\n        \n        var newHref = new URL( event.target.href );\n        newHref.searchParams.set( 'preview_id', previewId );\n        event.target.href = newHref.toString();\n        WPTB_Helper.saveTable( event, false, previewId );\n    }\n\n    document.getElementsByClassName( 'wptb-save-btn' )[0].onclick = function ( event ) {\n        if( ! this.classList.contains( 'wptb-save-disabled' ) ) {\n            WPTB_Helper.saveTable( event );\n        }\n    }\n\n    let tableTitleField = document.querySelector( '#wptb-setup-name' );\n    if( tableTitleField ) {\n        tableTitleField.onchange = function () {\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n    }\n};\n","/**\n * Responsive class assignment for frontend operations.\n *\n * This file can be used as an UMD.\n */\n(function assignToGlobal(key, context, factory) {\n\tif (typeof exports === 'object' && typeof module !== 'undefined') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext[key] = factory();\n\t}\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_SortableTable', self || global, () => {\n\tfunction WPTB_SortTable(options = {}) {\n\t\tconst table = (this.table = options.table);\n\t\tWPTB_RecalculateIndexes(table);\n\t\tconst thisObject = this;\n\t\tthis.itemsPerHeader = 0;\n\t\tthis.tableMaxCols = table.maxCols;\n\t\tthis.cellsStylesScheme = {};\n\t\tthis.rowsStylesScheme = {};\n\n\t\t/**\n\t\t * sets the table to sort mode\n\t\t *\n\t\t * @param {string} type\n\t\t * @param {boolean} active\n\t\t * @param {number} number\n\t\t */\n\t\tthis.sortModeSwitcher = function (type, active) {\n\t\t\tif(active) {\n\t\t\t\tthis.sortModeSwitcher('horizontal', false);\n\t\t\t\tthis.sortModeSwitcher('vertical', false);\n\t\t\t}\n\n\t\t\tif (type === 'vertical') {\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableVerticalStart, false);\n\n\t\t\t\tif (active) {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', true);\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableVerticalStart, false);\n\t\t\t\t\tthis.table.dataset.wptbSortableTableVertical = '1';\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('vertical', false);\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableVertical;\n\t\t\t\t}\n\t\t\t} else if (type === 'horizontal') {\n\t\t\t\tthis.table.removeEventListener('click', this.sortableTableHorizontalStart, false);\n\n\t\t\t\tif (active) {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', true);\n\t\t\t\t\tthis.table.addEventListener('click', this.sortableTableHorizontalStart, false);\n\t\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal = '1';\n\t\t\t\t\tthis.createTableElementsStylesScheme('td');\n\t\t\t\t\tthis.createTableElementsStylesScheme('tr');\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortingCellMouseMoveSwitcher('horizontal', false);\n\t\t\t\t\tdelete this.table.dataset.wptbSortableTableHorizontal;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * changes table object for old reconstruction table type\n\t\t *\n\t\t * @param {boolean}start\n\t\t * @returns {*}\n\t\t */\n\t\tthis.tableObjectChange = function (start = true) {\n\t\t\tif(this.table.classList.contains('wptb-mobile-view-active') && start) {\n\t\t\t\tthis.table = table.parentNode.parentNode.querySelector('.wptb-preview-table-mobile');\n\t\t\t} else if(this.table.classList.contains('wptb-preview-table-mobile') && !start) {\n\t\t\t\tthis.table = table.parentNode.querySelector('.wptb-preview-table');\n\t\t\t}\n\t\t\treturn this.table;\n\t\t}\n\n\t\t/**\n\t\t * fills the object with data about cell styles for all locations (create scheme)\n\t\t *\n\t\t * @param elemSelector\n\t\t */\n\t\tthis.createTableElementsStylesScheme = function (elemSelector) {\n\t\t\tthis.tableObjectChange();\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\n\t\t\tif(elements.length) {\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\n\t\t\t\t\tlet elem = elements[i];\n\t\t\t\t\tlet cellFullStyleObj = window.getComputedStyle(elem, null);\n\t\t\t\t\tlet backgroundColor = cellFullStyleObj.getPropertyValue( 'background-color' );\n\t\t\t\t\tlet objectKey = '';\n\t\t\t\t\tif(elemSelector === 'td') {\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\n\t\t\t\t\t\tthis.cellsStylesScheme[objectKey] = {backgroundColor};\n\t\t\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\t\t\tobjectKey = String(i);\n\t\t\t\t\t\tthis.rowsStylesScheme[objectKey] = {backgroundColor};\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.tableObjectChange(false);\n\t\t}\n\n\t\t/**\n\t\t * applies saved cell styles data to all cells\n\t\t *\n\t\t * @param elemSelector\n\t\t */\n\t\tthis.reassignElementsStyles = function (elemSelector) {\n\t\t\tthis.tableObjectChange();\n\t\t\tlet elements = this.table.querySelectorAll(elemSelector);\n\t\t\tlet elementsStylesScheme;\n\t\t\tif(elemSelector === 'td') {\n\t\t\t\telementsStylesScheme = this.cellsStylesScheme;\n\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\telementsStylesScheme = this.rowsStylesScheme;\n\t\t\t}\n\t\t\tif(elements.length) {\n\t\t\t\tfor(let i = 0; i < elements.length; i++) {\n\t\t\t\t\tlet elem = elements[i];\n\t\t\t\t\tlet objectKey = '';\n\t\t\t\t\tif(elemSelector === 'td') {\n\t\t\t\t\t\tobjectKey = elem.dataset.xIndex + '-' + elem.dataset.yIndex;\n\t\t\t\t\t} else if(elemSelector === 'tr') {\n\t\t\t\t\t\tobjectKey = i;\n\t\t\t\t\t}\n\t\t\t\t\tif(elementsStylesScheme.hasOwnProperty(objectKey)) {\n\t\t\t\t\t\tlet elemStyles = elementsStylesScheme[objectKey];\n\t\t\t\t\t\tfor(let key in elemStyles) {\n\t\t\t\t\t\t\telem.style[key] = elemStyles[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tableObjectChange(false);\n\t\t}\n\n\t\t/**\n\t\t * checks whether the table should be in the sort state\n\t\t * and connects the necessary handlers\n\t\t *\n\t\t * @param {object} responsiveFront\n\t\t */\n\t\tthis.sortableTableInitialization = function (responsiveFront) {\n\t\t\tlet typeFirst;\n\t\t\tlet typeSecond;\n\t\t\tif (this.table.dataset.wptbSortableTableVertical && this.table.dataset.wptbSortableTableVertical === '1') {\n\t\t\t\ttypeFirst = 'vertical';\n\t\t\t\ttypeSecond = 'horizontal';\n\t\t\t} else if (\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal &&\n\t\t\t\tthis.table.dataset.wptbSortableTableHorizontal === '1'\n\t\t\t) {\n\t\t\t\ttypeFirst = 'horizontal';\n\t\t\t\ttypeSecond = 'vertical';\n\t\t\t}\n\n\t\t\tif(!typeFirst || typeof typeFirst !== 'string' || !typeSecond || typeof typeSecond !== 'string') return;\n\n\t\t\tlet switchMode = WPTB_GetDirectionAfterReconstruction(this.table, typeFirst, typeSecond, 'vertical', responsiveFront);\n\n\t\t\tif(typeof switchMode === 'object' && switchMode.hasOwnProperty('switch')) {\n\t\t\t\tfunction sortModeSwitcherRun (e) {\n\t\t\t\t\tlet switchModeObj = switchMode.switch(e);\n\t\t\t\t\tif(typeof switchModeObj === 'object') {\n\t\t\t\t\t\tthis.itemsPerHeader = switchModeObj.itemsPerHeader;\n\t\t\t\t\t\tif(switchModeObj.hasOwnProperty('newTable')) {\n\t\t\t\t\t\t\tlet tableOld = this.table;\n\t\t\t\t\t\t\tthis.table = switchModeObj.newTable;\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\n\t\t\t\t\t\t\tthis.table = tableOld;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.sortModeSwitcher(switchModeObj.type[0], true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsortModeSwitcherRun.call(thisObject);\n\t\t\t\tthis.table.addEventListener(\n\t\t\t\t\t'table:rebuilt',\n\t\t\t\t\tfunction (e) {\n\t\t\t\t\t\tsortModeSwitcherRun.call(thisObject, e);\n\t\t\t\t\t},\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * adds and deletes mousemove and mouseleave events handlers when happens switch sorting mode\n\t\t * and also can add necessary attributes\n\t\t *\n\t\t * @param {string} type\n\t\t * @param {boolean} active\n\t\t */\n\t\tthis.sortingCellMouseMoveSwitcher = function (type, active) {\n\t\t\t/**\n\t\t\t * removes and adds mousemove and mouseleave events handlers\n\t\t\t *\n\t\t\t * @param {HTMLElement} td\n\t\t\t * @param {func} sCMM\n\t\t\t * @param {boolean} active\n\t\t\t */\n\t\t\tfunction s(td, sCMM, active) {\n\t\t\t\ttd.removeEventListener('mousemove', sCMM, false);\n\t\t\t\ttd.removeEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\tif (active) {\n\t\t\t\t\ttd.addEventListener('mousemove', sCMM, false);\n\t\t\t\t\ttd.addEventListener('mouseleave', tdMouseLeave, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * removes and adds data sorted attributes\n\t\t\t *\n\t\t\t * @param {HTMLElement} td\n\t\t\t * @param {string} dataAttr\n\t\t\t * @param {boolean} active\n\t\t\t */\n\t\t\tfunction dataAttrSortChange(td, dataAttr, active) {\n\t\t\t\tif (active) {\n\t\t\t\t\tif (!td.dataset[dataAttr] || td.dataset[dataAttr] !== 'desk-disabled') {\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'ask';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttd.dataset[dataAttr] = 'desk';\n\t\t\t\t\t}\n\t\t\t\t} else if (td.dataset[dataAttr] === 'ask') {\n\t\t\t\t\ttd.dataset[dataAttr] = 'ask-disabled';\n\t\t\t\t} else if (td.dataset[dataAttr] === 'desk') {\n\t\t\t\t\ttd.dataset[dataAttr] = 'desk-disabled';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// removes all mousemove and mouseleave events handlers\n\t\t\t// and also removes all data sorted attributes from all cells\n\t\t\tlet tds = this.table.querySelectorAll('td');\n\t\t\tif (tds.length) {\n\t\t\t\ttds = [...tds];\n\t\t\t\ttds.map((td) => {\n\t\t\t\t\ts(td, sortingCellMouseMoveVertical, false);\n\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', false);\n\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, false);\n\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', false);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if active === true sets sorted events handlers\n\t\t\t// and data sorted attributes for all cells\n\t\t\tif (active) {\n\t\t\t\tif (type === 'vertical') {\n\t\t\t\t\tlet rowsLength = this.table.rows.length;\n\t\t\t\t\tlet dataYIndexStart = 0;\n\t\t\t\t\twhile (rowsLength > 0) {\n\t\t\t\t\t\tlet tds = this.table.querySelectorAll(`[data-y-index=\"${dataYIndexStart}\"]`);\n\t\t\t\t\t\ttds = [...tds];\n\t\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveVertical, active);\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedVertical', active);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.itemsPerHeader) {\n\t\t\t\t\t\t\trowsLength -= this.itemsPerHeader + 1;\n\t\t\t\t\t\t\tdataYIndexStart += this.itemsPerHeader + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowsLength = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (type === 'horizontal') {\n\t\t\t\t\tlet tds = this.table.querySelectorAll('[data-x-index=\"0\"]');\n\t\t\t\t\ttds = [...tds];\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tlet tdsPerAfter = this.table.querySelectorAll(`[data-y-index=\"${td.dataset.yIndex}\"]`);\n\t\t\t\t\t\tif(tdsPerAfter.length > 2) {\n\t\t\t\t\t\t\ts(td, sortingCellMouseMoveHorizontal, active);\n\t\t\t\t\t\t\tdataAttrSortChange(td, 'sortedHorizontal', active);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * adds a sortable-hover class for a cell when the cursor is over the sort icon (arrow)\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {string} type\n\t\t * @param {HTMLElement} element td\n\t\t */\n\t\tfunction sortingCellMouseMov(e, type, element) {\n\t\t\tif (e.target.tagName === 'TD') {\n\t\t\t\tconst x = e.offsetX == undefined ? e.layerX : e.offsetX;\n\t\t\t\tconst y = e.offsetY == undefined ? e.layerY : e.offsetY;\n\t\t\t\tlet xMatch = false;\n\t\t\t\tif ((type === 'vertical' && e.target.clientWidth - x <= 35) || (type === 'horizontal' && x <= 35)) {\n\t\t\t\t\txMatch = true;\n\t\t\t\t}\n\t\t\t\tif (xMatch && (e.target.clientHeight - 35) / 2 < y && (e.target.clientHeight + 35) / 2 > y) {\n\t\t\t\t\telement.classList.add('sortable-hover');\n\t\t\t\t} else {\n\t\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.classList.remove('sortable-hover');\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * calls sortingCellMouseMov with the type parameter set to vertical\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tfunction sortingCellMouseMoveVertical(e) {\n\t\t\tsortingCellMouseMov(e, 'vertical', this);\n\t\t}\n\n\t\t/**\n\t\t * calls sortingCellMouseMov with the type parameter set to horizontal\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tfunction sortingCellMouseMoveHorizontal(e) {\n\t\t\tsortingCellMouseMov(e, 'horizontal', this);\n\t\t}\n\n\t\t/**\n\t\t * remove sortable-hover class from cell when cursor leave cell\n\t\t */\n\t\tfunction tdMouseLeave() {\n\t\t\tthis.classList.remove('sortable-hover');\n\t\t}\n\n\t\t/**\n\t\t * function for sorting the table vertically by the numeric content of cells\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {HTMLElement} table\n\t\t * @param {string} type\n\t\t */\n\t\tfunction sortableTable(e, type) {\n\t\t\tif (\n\t\t\t\te.target &&\n\t\t\t\te.target.tagName === 'TD' &&\n\t\t\t\t!table.parentNode.classList.contains('wptb-preview-table-manage-cells')\n\t\t\t) {\n\t\t\t\tconst table = e.currentTarget;\n\t\t\t\tlet tableWasSorted = false;\n\t\t\t\tif (type === 'vertical' && e.target.dataset.hasOwnProperty('sortedVertical')) {\n\t\t\t\t\t/**\n\t\t\t\t\t * if table have enabled param topRowAsHeader and sellsStackDirection is column\n\t\t\t\t\t * the top and bottom rows that will not be sorted are temporarily removed from the table\n\t\t\t\t\t */\n\t\t\t\t\tconst tableRowsBefore = [];\n\t\t\t\t\tconst tableRowsAfter = [];\n\t\t\t\t\tif (this.itemsPerHeader && this.itemsPerHeader < table.rows.length) {\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\t\tconst tableRowsArr = [...table.rows];\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tfor (let i = 0; i < tableRowsArr.length; i++) {\n\t\t\t\t\t\t\tif (i < e.target.dataset.yIndex) {\n\t\t\t\t\t\t\t\ttableRowsBefore.push(tableRowsArr[i]);\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t\t} else if (i > parseInt(e.target.dataset.yIndex, 10) + this.itemsPerHeader) {\n\t\t\t\t\t\t\t\ttableRowsAfter.push(tableRowsArr[i]);\n\t\t\t\t\t\t\t\ttableLastCont.removeChild(tableRowsArr[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-x-index=\"${e.target.dataset.xIndex}\"]`);\n\t\t\t\t\ttds = [...tds];\n\n\t\t\t\t\t/**\n\t\t\t\t\t * preparing table for sorting\n\t\t\t\t\t */\n\t\t\t\t\tlet rowspan;\n\t\t\t\t\tlet rowNum;\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tif (!(rowspan = parseInt(td.rowSpan, 10))) {\n\t\t\t\t\t\t\trowspan = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trowNum = td.dataset.yIndex;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\t\trowNum += rowspan;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableHorizontally(rowNum, table);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst rowsValuesArr = [];\n\t\t\t\t\tlet rowsTdFirst;\n\t\t\t\t\tlet tdYCoordsRowSpanPrevious = 0;\n\t\t\t\t\tconst tableRowsPushed = [];\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\ttds,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\ttdYCoordsRowSpanPrevious,\n\t\t\t\t\t\t\t'vertical'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst td = tds[i];\n\n\t\t\t\t\t\tlet tdRowspan = parseInt(td.rowSpan, 10);\n\t\t\t\t\t\tif (!tdRowspan) tdRowspan = 1;\n\n\t\t\t\t\t\ttdYCoordsRowSpanPrevious = parseInt(td.dataset.yIndex, 10) + tdRowspan;\n\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\n\t\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\t\tfor (let j = 0; j < tdRowspan; j++) {\n\t\t\t\t\t\t\trowsTd.push(table.rows[parseInt(td.dataset.yIndex, 10) + j]);\n\t\t\t\t\t\t\ttableRowsPushed.push(parseInt(td.dataset.yIndex, 10) + j);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (td.dataset.yIndex > 0) {\n\t\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowsTdFirst = rowsTd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedVertical');\n\t\t\t\t\tif (!orderBy) return;\n\n\t\t\t\t\tif (rowsValuesArr.length) rowsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\t\trowsValuesArr.unshift({ rowsTd: rowsTdFirst });\n\n\t\t\t\t\tif (rowsValuesArr.length < table.rows.length) {\n\t\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\t\tif (tableRowsPushed.indexOf(i) > -1) continue;\n\t\t\t\t\t\t\tconst rowsTd = [];\n\t\t\t\t\t\t\trowsTd.push(table.rows[i]);\n\n\t\t\t\t\t\t\trowsValuesArr.push({\n\t\t\t\t\t\t\t\trowsTd,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tBody = table.querySelector('tbody');\n\t\t\t\t\ttBody.innerHTML = '';\n\n\t\t\t\t\trowsValuesArr.map((rowsValObj) => {\n\t\t\t\t\t\trowsValObj.rowsTd.map((row) => {\n\t\t\t\t\t\t\ttBody.appendChild(row);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t/**\n\t\t\t\t\t * returning previously deleted rows\n\t\t\t\t\t */\n\t\t\t\t\tif (tableRowsBefore.length) {\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tif (tableLastCont) {\n\t\t\t\t\t\t\tconst trRef = tableLastCont.querySelector('tr');\n\t\t\t\t\t\t\ttableRowsBefore.map((tr) => {\n\t\t\t\t\t\t\t\ttableLastCont.insertBefore(tr, trRef);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (tableRowsAfter.length) {\n\t\t\t\t\t\tconst tableLastCont = table.querySelector('tbody') ? table.querySelector('tbody') : table;\n\t\t\t\t\t\tif (tBody) {\n\t\t\t\t\t\t\ttableRowsAfter.map((tr) => {\n\t\t\t\t\t\t\t\ttableLastCont.appendChild(tr);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\t\tWPTB_CutGlueTable.glueTableHorizontally(table);\n\n\t\t\t\t\ttableWasSorted = true;\n\t\t\t\t} else if (type === 'horizontal' && e.target.dataset.xIndex === '0') {\n\t\t\t\t\tlet tds = table.querySelectorAll(`[data-y-index=\"${e.target.dataset.yIndex}\"]`);\n\t\t\t\t\ttds = [...tds];\n\n\t\t\t\t\t// preparing table for sorting\n\t\t\t\t\tlet colspan;\n\t\t\t\t\tlet colNum;\n\t\t\t\t\ttds.map((td) => {\n\t\t\t\t\t\tif (!(colspan = parseInt(td.colSpan, 10))) {\n\t\t\t\t\t\t\tcolspan = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolNum = td.dataset.xIndex;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\t\tcolNum += colspan;\n\t\t\t\t\t\tWPTB_CutGlueTable.cutTableVertically(colNum, table);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst columnsValuesArr = [];\n\t\t\t\t\tlet columnsTdFirst;\n\n\t\t\t\t\tlet tdXCoordsColSpanPrevious = 0;\n\t\t\t\t\tfor (let i = 0; i < tds.length; i++) {\n\t\t\t\t\t\tconst tdsChanged = changeSortingTdsCollection(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\ttds,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\ttdXCoordsColSpanPrevious,\n\t\t\t\t\t\t\t'horizontal'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (tdsChanged && tdsChanged.hasOwnProperty('i')) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t\ti = tdsChanged.i;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (tdsChanged) {\n\t\t\t\t\t\t\ttds = tdsChanged.tds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst td = tds[i];\n\t\t\t\t\t\tlet tdColspan = parseInt(td.colSpan, 10);\n\t\t\t\t\t\tif (!tdColspan) tdColspan = 1;\n\n\t\t\t\t\t\ttdXCoordsColSpanPrevious = parseInt(td.dataset.xIndex, 10) + tdColspan;\n\n\t\t\t\t\t\tconst textElementsValues = textElementsValuesGet(td);\n\t\t\t\t\t\tconst columnsTd = [];\n\t\t\t\t\t\tfor (let j = 0; j < tdColspan; j++) {\n\t\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t\t...table.querySelectorAll(`[data-x-index=\"${parseInt(td.dataset.xIndex, 10) + j}\"]`),\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tcolumnsTd.push(tdsColumn);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (td.dataset.xIndex > 0) {\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\t\tcolumnsTd,\n\t\t\t\t\t\t\t\tvalue: textElementsValues,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumnsTdFirst = columnsTd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst orderBy = setSortedAscDataAttr(e, 'sortedHorizontal');\n\t\t\t\t\tif (!orderBy) return;\n\n\t\t\t\t\tif (columnsValuesArr.length) columnsValuesArr.sort((prev, next) => sortOrder(orderBy, prev, next));\n\n\t\t\t\t\tcolumnsValuesArr.unshift({ columnsTd: columnsTdFirst });\n\n\t\t\t\t\tif (columnsValuesArr.length < table.maxCols) {\n\t\t\t\t\t\tconst difference = table.maxCols - columnsValuesArr.length;\n\t\t\t\t\t\tfor (let i = 0; i < difference; i++) {\n\t\t\t\t\t\t\tconst tdsColumn = [\n\t\t\t\t\t\t\t\t...table.querySelectorAll(\n\t\t\t\t\t\t\t\t\t`[data-x-index=\"${parseInt(table.maxCols, 10) - parseInt(difference, 10) + i}\"]`\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tcolumnsValuesArr.push({\n\t\t\t\t\t\t\t\tcolumnsTd: [tdsColumn],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let i = 0; i < table.rows.length; i++) {\n\t\t\t\t\t\ttable.rows[i].innerHTML = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumnsValuesArr.map((columnsValObj) => {\n\t\t\t\t\t\tcolumnsValObj.columnsTd.map((tdsColumn) => {\n\t\t\t\t\t\t\ttdsColumn.map((td) => {\n\t\t\t\t\t\t\t\ttable.rows[td.dataset.yIndex].appendChild(td);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tWPTB_RecalculateIndexes(table);\n\n\t\t\t\t\tWPTB_CutGlueTable.glueTableVertically(table);\n\n\t\t\t\t\ttableWasSorted = true;\n\t\t\t\t}\n\n\t\t\t\tif (tableWasSorted) {\n\t\t\t\t\tremoveCellsAttrAfterDivision(table);\n\n\t\t\t\t\tif (table.hasOwnProperty('tableSM')) {\n\t\t\t\t\t\tconst tableSM = table.tableSM();\n\t\t\t\t\t\tnew tableSM().tableStateSet();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.reassignElementsStyles('td');\n\t\t\t\t\tthis.reassignElementsStyles('tr');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Function that sets the data-attribute with the number of the row or column\n\t\t * that the table was sorted by. Returns the number of a row or column\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {string} dataAttr\n\t\t * @returns {null|boolean}\n\t\t */\n\t\tfunction setSortedAscDataAttr(e, dataAttr) {\n\t\t\tif (\n\t\t\t\te.currentTarget &&\n\t\t\t\t(e.currentTarget.classList.contains('wptb-preview-table') ||\n\t\t\t\t\te.currentTarget.classList.contains('wptb-preview-table-mobile'))\n\t\t\t) {\n\t\t\t\tif (!e.target.dataset[dataAttr] || e.target.dataset[dataAttr] === 'ask') {\n\t\t\t\t\te.target.dataset[dataAttr] = 'desk';\n\t\t\t\t} else {\n\t\t\t\t\te.target.dataset[dataAttr] = 'ask';\n\t\t\t\t}\n\n\t\t\t\treturn e.target.dataset[dataAttr];\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * defines the sorting order\n\t\t *\n\t\t * @param {string} orderBy\n\t\t * @param prev\n\t\t * @param next\n\t\t * @returns {number}\n\t\t */\n\t\tfunction sortOrder(orderBy = 'ask', prev, next) {\n\t\t\tlet prevValue = prev.value;\n\t\t\tlet nextValue = next.value;\n\t\t\tif (parseInt(prevValue) && parseInt(nextValue)) {\n\t\t\t\tprevValue = parseInt(prevValue);\n\t\t\t\tnextValue = parseInt(nextValue);\n\t\t\t}\n\n\t\t\tif (orderBy === 'ask') {\n\t\t\t\tif (prevValue < nextValue) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (prevValue === nextValue) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (prevValue < nextValue) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (prevValue === nextValue) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\t/**\n\t\t * return cell text elements values\n\t\t *\n\t\t * @param cell {HTMLElement}\n\t\t * @returns {string}\n\t\t */\n\t\tfunction textElementsValuesGet(cell) {\n\t\t\tlet textElements = cell.querySelectorAll('.wptb-text-container');\n\t\t\ttextElements = [...textElements];\n\t\t\tlet value = '';\n\t\t\tfor (let j = 0; j < textElements.length; j++) {\n\t\t\t\tvalue += textElements[j].innerText;\n\t\t\t\tif (j !== textElements.length - 1) value += ' ';\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\n\t\t/**\n\t\t * adds cells to the collection of cells in the row or column that the table is sorted by.\n\t\t * These added cells are not originally were added in the collection,\n\t\t * because they are combined with cells from higher rows or left-side columns\n\t\t *\n\t\t * @param {event} e\n\t\t * @param {HTMLElement} table\n\t\t * @param {array} tds\n\t\t * @param {number} i\n\t\t * @param {number} tdIndexSpanPrev\n\t\t * @param {string} type\n\t\t * @returns {{tds: *}|boolean|{tds: *, i: *}}\n\t\t */\n\t\tfunction changeSortingTdsCollection(e, table, tds, i, tdIndexSpanPrev, type) {\n\t\t\tconst td = tds[i];\n\t\t\tlet tdsCollectionChanged = false;\n\t\t\tlet collectionTds;\n\t\t\tlet collectionTdsJSpan;\n\t\t\tlet collectionTdsJSpanProperty;\n\t\t\tlet indexName;\n\t\t\tlet indexNameCamelCase;\n\t\t\tlet indexNamePerpendicularCamelCase;\n\t\t\tlet tdSpanProperty;\n\t\t\t// max rows or columns column\n\t\t\tlet tableGroupCount;\n\n\t\t\tif (type === 'vertical') {\n\t\t\t\tcollectionTdsJSpanProperty = 'colSpan';\n\t\t\t\tindexName = 'data-y-index';\n\t\t\t\tindexNameCamelCase = 'yIndex';\n\t\t\t\tindexNamePerpendicularCamelCase = 'xIndex';\n\t\t\t\ttdSpanProperty = 'rowSpan';\n\t\t\t\ttableGroupCount = table.rows.length;\n\t\t\t} else if (type === 'horizontal') {\n\t\t\t\tcollectionTdsJSpanProperty = 'rowSpan';\n\t\t\t\tindexName = 'data-x-index';\n\t\t\t\tindexNameCamelCase = 'xIndex';\n\t\t\t\tindexNamePerpendicularCamelCase = 'yIndex';\n\t\t\t\ttdSpanProperty = 'colSpan';\n\t\t\t\ttableGroupCount = table.maxCols;\n\t\t\t}\n\n\t\t\tif (td.dataset[indexNameCamelCase] - tdIndexSpanPrev > 0) {\n\t\t\t\tcollectionTds = table.querySelectorAll(`[${indexName}=\"${tdIndexSpanPrev}\"]`);\n\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttds.splice(i, 0, collectionTds[j]);\n\t\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tdsCollectionChanged) return { tds, i };\n\n\t\t\tlet tdSpan = parseInt(td[tdSpanProperty], 10);\n\t\t\tif (!tdSpan) tdSpan = 1;\n\t\t\tif (i == tds.length - 1 && parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan < tableGroupCount) {\n\t\t\t\tcollectionTds = table.querySelectorAll(\n\t\t\t\t\t`[${indexName}=\"${parseInt(td.dataset[indexNameCamelCase], 10) + tdSpan}\"]`\n\t\t\t\t);\n\t\t\t\tfor (let j = 0; j < collectionTds.length; j++) {\n\t\t\t\t\tcollectionTdsJSpan = collectionTds[j][collectionTdsJSpanProperty];\n\t\t\t\t\tif (!collectionTdsJSpan) collectionTdsJSpan = 1;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcollectionTds[j].dataset[indexNamePerpendicularCamelCase] <\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase] &&\n\t\t\t\t\t\tparseInt(collectionTds[j].dataset[indexNamePerpendicularCamelCase], 10) +\n\t\t\t\t\t\t\tparseInt(collectionTdsJSpan, 10) >\n\t\t\t\t\t\t\te.target.dataset[indexNamePerpendicularCamelCase]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttds.push(collectionTds[j]);\n\t\t\t\t\t\ttdsCollectionChanged = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tdsCollectionChanged) return { tds };\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * remove cells attributes which were used for division table\n\t\t *\n\t\t * @param {HTMLElement} table\n\t\t */\n\t\tfunction removeCellsAttrAfterDivision(table) {\n\t\t\tconst tdsAll = [...table.getElementsByTagName('td')];\n\t\t\tfor (let i = 0; i < tdsAll.length; i++) {\n\t\t\t\tif (tdsAll[i].hasAttribute('data-same-cell-before-division')) {\n\t\t\t\t\ttdsAll[i].removeAttribute('data-same-cell-before-division');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * function for run sorting table vertically\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tthis.sortableTableVerticalStart = function (e) {\n\t\t\tsortableTable.call(thisObject, e, 'vertical');\n\t\t};\n\n\t\t/**\n\t\t * function for run sorting table horizontally\n\t\t *\n\t\t * @param {event} e\n\t\t */\n\t\tthis.sortableTableHorizontalStart = function (e) {\n\t\t\tsortableTable.call(thisObject, e, 'horizontal');\n\t\t};\n\n\t\treturn this;\n\t}\n\n\treturn WPTB_SortTable;\n});\n","var WPTB_Stringifier = function ( codeMain ) {\n    if ( codeMain ) {\n        let code = codeMain.cloneNode( true );\n        code.dataset.tableColumns = codeMain.columns;\n        code.style.width = null;\n        code.style.minWidth = null;\n        code.style.maxWidth = null;\n\n        let tds = code.getElementsByTagName( 'td' );\n        if ( tds.length > 0 ) {\n            for ( let i = 0; i < tds.length; i++ ) {\n\n                // tds[i].removeAttribute( 'data-x-index' );\n                // tds[i].removeAttribute( 'data-y-index' );\n                tds[i].removeAttribute( 'draggable' );\n                tds[i].classList.remove( 'wptb-droppable' );\n                let infArr = tds[i].className.match( /wptb-element-((.+-)\\d+)/i );\n                if(infArr) tds[i].classList.remove(infArr[0]);\n                let innerElements = tds[i].getElementsByClassName( 'wptb-ph-element' );\n\n                if ( innerElements.length > 0 ) {\n                    for ( let j = 0; j < innerElements.length; j++ ) {\n\n                        let mceContentBodys = innerElements[j].querySelectorAll( '.mce-content-body' );\n                        if( mceContentBodys.length > 0 ) {\n                            for ( let k = 0; k < mceContentBodys.length; k++ ) {\n                                mceContentBodys[k].classList.remove( 'mce-content-body' );\n                            }\n                        }\n\n                        let dataMceStyle = innerElements[j].querySelectorAll( '[data-mce-style]' );\n                        if ( dataMceStyle.length > 0 ) {\n                            for ( let k = 0; k < dataMceStyle.length; k++ ) {\n                                dataMceStyle[k].removeAttribute( 'data-mce-style' );\n                            }\n                        }\n\n                        let contentEditable = innerElements[j].querySelectorAll( '[contenteditable]' );\n                        if ( contentEditable.length > 0 ) {\n                            for ( let k = 0; k < contentEditable.length; k++ ) {\n                                contentEditable[k].removeAttribute( 'contenteditable' );\n                            }\n                        }\n\n                        let spellCheck = innerElements[j].querySelectorAll( '[spellcheck]' );\n                        if ( spellCheck.length > 0 ) {\n                            for ( let k = 0; k < spellCheck.length; k++ ) {\n                                spellCheck[k].removeAttribute( 'spellcheck' );\n                            }\n                        }\n\n                        let mceIds = innerElements[j].querySelectorAll( '[id^=mce_]' );\n                        if ( mceIds.length > 0 ) {\n                            for ( let k = 0; k < mceIds.length; k++ ) {\n                                mceIds[k].removeAttribute( 'id' );\n                            }\n                        }\n\n                        let wptbActions = innerElements[j].querySelectorAll( '.wptb-actions' );\n                        let wptbActionsLength = wptbActions.length;\n                        while ( wptbActionsLength > 0 ) {\n                            if( wptbActions[0] && wptbActions[0].parentNode ) {\n                                wptbActions[0].parentNode.removeChild( wptbActions[0] );\n                                wptbActionsLength--;\n                            } else {\n                                break;\n                            }\n\n                        }\n\n                        let dataMceBogus = innerElements[j].querySelectorAll( '[data-mce-bogus]' );\n                        if( dataMceBogus.length > 0 ) {\n                            dataMceBogus = [...dataMceBogus];\n                            for( let k = 0; k < dataMceBogus.length; k++ ) {\n                                if( dataMceBogus[k] && dataMceBogus[k].parentNode ) {\n                                    dataMceBogus[k].parentNode.removeChild( dataMceBogus[k] );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                // TODO dataTitleColumnSet\n                // if( tds[i].hasAttribute( 'data-wptb-title-column' ) ) {\n                //     let columnNameDivContainer = document.createElement( 'div' ),\n                //         columnNameDiv = document.createElement( 'div' );\n                //     columnNameDivContainer.classList.add( 'wptb-column-title-mobile-container' );\n                //     columnNameDiv.classList.add( 'wptb-column-title-mobile' );\n                //     columnNameDiv.dataset.wptbTitleColumn = tds[i].dataset.wptbTitleColumn;\n                //     columnNameDiv.setAttribute( 'style', 'font-size:' + tds[i].dataset.wptbTitleColumnFontSize + '; \\n\\\n                //         color:' + tds[i].dataset.wptbTitleColumnColor + '; background-color:' + tds[i].dataset.wptbTitleBackgroundColor + '; text-align:' + tds[i].dataset.wptbTitleAlign + ';' );\n                //     columnNameDiv.style.padding = tds[i].style.padding;\n                //     if( tds[i].children.length == 0 ) {\n                //         tds[i].classList.add( 'wptb-column-title-mobile-not-elements' );\n                //     }\n                //     columnNameDivContainer.appendChild( columnNameDiv );\n                //     tds[i].insertBefore( columnNameDivContainer, tds[i].firstChild );\n                // }\n            }\n        }\n\n        return code;\n    }\n}\n","var array = [], WPTB_Table = function ( columns, rows, wptb_preview_table ) {\n\n    /* The members of the class */\n    var settings = document.getElementsByClassName('wptb-settings-items'),\n            wptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\n            table, row, cell,\n            maxAmountOfCells,\n            maxAmountOfRows;\n\n    //HERE ARE THE PRIVATE FUNCTIONS\n    /*\n     * This function toggles buttons visibility in cell edit mode\n     * (according to the amount of currently selected cells), and\n     * highlights visually the clicked cell if it is not highlighted, or\n     * removes highlight if clicked cell is already highlighted.\n     * It too toggles the bits of our abstract representation.\n     * @param Event this is the event instance of the click performed over a cell.\n     */\n    var mark = function ( event ) {\n        let thisElem = event.currentTarget;\n        let rs = thisElem.rowSpan,\n            cs = thisElem.colSpan,\n            noCells = document.getElementsByClassName('wptb-no-cell-action'),\n            singleCells = document.getElementsByClassName('wptb-single-action'),\n            multipleCells = document.getElementsByClassName('wptb-multiple-select-action'),\n            cellSettings = document.getElementById( 'wptb-left-scroll-panel-cell-settings' ),\n            position = getCoords(thisElem),\n            row = position[0],\n            column = position[1];\n\n        /**\n         * Cell select/deselect operation\n         *\n         * @param {HTMLElement} cellElement cell element\n         * @param {Boolean} select select/deselect cell\n         *\n         */\n        function cellSelectOperation(cellElement, select = false){\n           const classListOperation = select? 'add'  : 'remove';\n           cellElement.classList[classListOperation]('wptb-highlighted');\n\n            const [row, column] = getCoords(cellElement);\n            const {rowSpan, colSpan} = cellElement;\n\n            for (var i = 0; i < rowSpan; i++) {\n                for (var j = 0; j < colSpan; j++) {\n                    array[row + i][column + j] = select? 1 : 0;\n                }\n            }\n        }\n        if ( ! document.select.isActivated() ) {\n            return;\n        }\n\n        const isShiftActive = event.shiftKey;\n        if (thisElem.className.match(/wptb-highlighted/)) {\n            const selectedCells = Array.from(document.querySelectorAll('.wptb-highlighted'));\n\n            if(selectedCells.length > 1){\n                if(isShiftActive){\n                    cellSelectOperation(thisElem, false);\n                }else {\n                    cellSelectOperation(thisElem, true);\n                    // eslint-disable-next-line array-callback-return\n                    selectedCells.map(el => {\n                        if(el !== thisElem){\n                            cellSelectOperation(el, false);\n                        }\n                    })\n                }\n            }else{\n                cellSelectOperation(thisElem, false);\n            }\n        } else {\n            if(!isShiftActive){\n                Array.from(document.querySelectorAll('.wptb-highlighted')).map(ele => {\n                    if(ele !== thisElem){\n                        cellSelectOperation(ele, false);\n                    }\n                });\n            }\n            cellSelectOperation(thisElem,true );\n        }\n\n        let cellHighlighted = document.getElementsByClassName('wptb-highlighted'),\n            markedCells = cellHighlighted.length;\n        if (markedCells === 0) {\n            for (var i = 0; i < multipleCells.length; i++) {\n                multipleCells[i].classList.remove('visible');\n                multipleCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < noCells.length; i++) {\n                noCells[i].classList.add('visible');\n                noCells[i].removeAttribute('disabled');\n            }\n            for (var i = 0; i < singleCells.length; i++) {\n                singleCells[i].classList.remove('visible');\n                singleCells[i].setAttribute('disabled', 'disabled');\n            }\n            cellSettings.classList.remove( 'visible' );\n        } else if (markedCells === 1) {\n            for (var i = 0; i < multipleCells.length; i++) {\n                multipleCells[i].classList.remove('visible');\n                multipleCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < noCells.length; i++) {\n                noCells[i].classList.remove('visible');\n                noCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < singleCells.length; i++) {\n                singleCells[i].classList.add('visible');\n                singleCells[i].removeAttribute('disabled');\n            }\n\n            cellHighlighted = cellHighlighted[0];\n            WPTB_Helper.elementOptionsSet( 'table_cell_setting', cellHighlighted );\n\n            let infArr = cellHighlighted.className.match( /wptb-element-((.+-)\\d+)/i );\n\n            const controlElemIds = ['cellWidth', 'cellHeight'];\n\n            controlElemIds.map(s => {\n                let elementControlSizeUnicClass = `wptb-el-${infArr[1]}-${s}`,\n                    elementControlSizeFixedUnicClass = `wptb-el-${infArr[1]}-${s}Fixed`;\n                if(s === 'cellWidth' || s === 'cellHeight') {\n                    let sizeName = '',\n                        getSizeFunctionName = '';\n                    if(s === 'cellWidth') {\n                        sizeName = 'width';\n                        getSizeFunctionName = 'getColumnWidth';\n                    } else if(s === 'cellHeight') {\n                        sizeName = 'height';\n                        getSizeFunctionName = 'getRowHeight';\n                    }\n                    let size = cellHighlighted.style[sizeName],\n                        cellSizeInputs = document.querySelectorAll( '.' + elementControlSizeUnicClass ),\n                        cellSizeFixedInput = document.querySelector( '.' + elementControlSizeFixedUnicClass  );\n                    cellSizeInputs = [...cellSizeInputs];\n\n                    if(!size && !cellHighlighted.dataset[`wptbFixed${sizeName.toUpperCase()}`]) {\n                        size = WPTB_Helper[getSizeFunctionName](table, cellHighlighted);\n                        cellSizeInputs.map(s => {\n                            s.value = size;\n                        });\n\n                        cellSizeFixedInput.checked = false;\n                    } else {\n                        cellSizeInputs.map(s => {\n                            if( size ) {\n                                s.value = parseFloat( size, 10 );\n                            } else if( cellHighlighted.dataset[`wptbFixed${sizeName.toUpperCase()}`] ) {\n                                s.value = cellHighlighted.dataset[`wptbFixed${sizeName.toUpperCase()}`];\n                            }\n                        });\n\n                        cellSizeFixedInput.checked = true;\n                    }\n                }\n            });\n\n            cellSettings.classList.add( 'visible' );\n        } else {\n            for (var i = 0; i < multipleCells.length; i++) {\n                if (table.isSquare(array)) {\n                    multipleCells[i].classList.add('visible');\n                    multipleCells[i].removeAttribute('disabled');\n                } else {\n                    multipleCells[i].classList.remove('visible');\n                    multipleCells[i].setAttribute('disabled', 'disabled');\n                }\n            }\n            for (var i = 0; i < noCells.length; i++) {\n                noCells[i].classList.remove('visible');\n                noCells[i].setAttribute('disabled', 'disabled');\n            }\n            for (var i = 0; i < singleCells.length; i++) {\n                singleCells[i].classList.remove('visible');\n                singleCells[i].setAttribute('disabled', 'disabled');\n            }\n            cellSettings.classList.remove( 'visible' );\n        }\n\n        /**\n         * empty cell setting\n         */\n        // let emptySetting = document.\n        const infArr = thisElem.className.match(/wptb-element-table_cell_setting-((.+-)\\d+)/i);\n        if (infArr && infArr.length > 1) {\n            const controlKey = 'emptyCell';\n            const settingId = `wptb-el-table_cell_setting-${infArr[1]}-${controlKey}`;\n            const settingElem = document.getElementById(settingId);\n            if (settingElem) {\n                settingElem.querySelector('input[type=\"checkbox\"]').checked = thisElem.classList.contains('wptb-empty')\n            }\n        }\n\n\n        let details = {countMarkedCells:markedCells};\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/cell/mark', thisElem, details);\n\n\n        // split button disabled state calculation\n        const splitButton = document.querySelector('#wptb-split-cell');\n        if(splitButton){\n            const splitAvailable = markedCells === 1 && (rs !== 1 || cs !== 1);\n            if(splitAvailable){\n                splitButton.classList.add('visible');\n                splitButton.removeAttribute('disabled');\n            }else {\n                splitButton.classList.remove('visible');\n                splitButton.setAttribute('disabled', 'disabled');\n            }\n        }\n    };\n\n    /*\n     * This function fills an array with 1's according to the actual design\n     * of HTML table.\n     * @returns an array of arrays containing an abstract representation\n     * of HTML table.\n     * @deprecated\n     * */\n\n    var realTimeArray = function () {\n        var carried = [], tds, cols, matriz = [];\n\n        for (var i = 0; i < maxAmountOfCells; i++) {\n            carried[i] = 0;\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            cols = [];\n\n            var tds = table.rows[i].getElementsByTagName('td');\n\n            for (items = 0; items < tds.length; items++) {\n\n                for (var k = 0; k < tds[items].colSpan; k++) {\n                    cols.push(1);\n                }\n\n                if (tds[items].rowSpan > 1) {\n                    for (var k = 0; k < tds[items].colSpan; k++) {\n                        carried[items + k] = {\n                            justAssigned: true,\n                            amount: tds[items].rowSpan\n                        };\n                    }\n                }\n            }\n\n            for (var k = 0; k < maxAmountOfCells; k++) {\n                if (typeof carried[k] == 'object' && carried[k].amount > 0) {\n                    carried[k].amount--;\n                    if (carried[k].justAssigned) {\n                        carried[k].justAssigned = false;\n                    } else {\n                        cols.push(1);\n                    }\n                }\n            }\n\n            matriz.push(cols);\n\n        }\n        return matriz;\n    };\n\n    /*\n     * This function gets the number and position of cell spaces in current row that are occuped\n     * by upper rowspanned cells.\n     * @param number the number of row where we wish to calculate the carried rowspans up to.\n     * @return an array with the remaining rowspans in each column.\n     */\n    var carriedRowspans = function (row) {\n        var carried = [], tds, cols;\n\n        for (var i = 0; i < maxAmountOfCells; i++) {\n            carried[i] = 0;\n        }\n\n        if (row == -1) {\n            return carried;\n        }\n\n        for (var i = 0; i <= row; i++) {\n            cellsBuffer = table.rows[i].getElementsByTagName('td');\n            cellPointer = 0;\n\n            for (var xPosition = 0; xPosition < maxAmountOfCells; xPosition += stepsToMove) {\n                stepsToMove = 1;\n\n                if (carried[xPosition]) {\n                    carried[xPosition]--;\n                } else {\n                    celda = cellsBuffer[cellPointer++];\n                    if (celda.rowSpan > 1) {\n                        for (k = 0; k < celda.colSpan; k++) {\n                            carried[xPosition + k] = celda.rowSpan - 1;\n                        }\n                        stepsToMove = celda.colSpan;\n                    } else if (celda.colSpan > 1) {\n                        stepsToMove = celda.colSpan;\n                    }\n                }\n            }\n\n        }\n        return carried;\n    };\n\n    /*\n     * A helpful function for showing\n     * the abstract table in console.\n     * @param Array our abstract table.\n     */\n    var drawTable = function (a) {\n        var string = 'DRAWING TABLE:\\n';\n        for (var i = 0; i < a.length; i++) {\n\n            for (var j = 0; j < a[i].length; j++) {\n                string += ' ' + a[i][j];\n            }\n            string += '\\n';\n        }\n        table.isSquare(a);\n    };\n\n    /*\n     * It resets all the bits of our abstract representation\n     * to 0 and removes the highlighting class of all cells.\n     */\n\n    var undoSelect = function () {\n        let noCells = document.getElementsByClassName('wptb-no-cell-action'),\n            singleCells = document.getElementsByClassName('wptb-single-action'),\n            multipleCells = document.getElementsByClassName('wptb-multiple-select-action'),\n            cellSettings = document.getElementById( 'wptb-left-scroll-panel-cell-settings' ),\n            tds = table.getElementsByClassName('wptb-highlighted');\n        while (tds.length) {\n            tds[0].classList.remove('wptb-highlighted');\n        }\n        cellSettings.classList.remove( 'visible' );\n        for (let i = 0; i < array.length; i++) {\n            for (let j = 0; j < array[i].length; j++) {\n                array[i][j] = 0;\n            }\n        }\n        for (let i = 0; i < multipleCells.length; i++) {\n            multipleCells[i].classList.remove('visible');\n            multipleCells[i].setAttribute('disabled', 'disabled');\n        }\n        for (let i = 0; i < noCells.length; i++) {\n            noCells[i].classList.add('visible');\n            noCells[i].removeAttribute('disabled');\n        }\n        for (let i = 0; i < singleCells.length; i++) {\n            singleCells[i].classList.remove('visible');\n            singleCells[i].setAttribute('disabled', 'disabled');\n        }\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/undo-select/active', table);\n    };\n\n    /*\n     * This fills the abstract representation of our table with\n     * zeros, at the start. the max amount of cells is the greatest sum\n     * of all colspans for row.\n     */\n\n    var fillTableArray = function () {\n        var colspansSums = [], a = [];\n\n        //calculate max amount of cells inside a row\n        for (var i = 0; i < table.rows.length; i++) {\n            var cells = table.rows[i].getElementsByTagName('td'),\n                    colspanSumInRow = 0;\n            for (var j = 0; j < cells.length; j++) {\n                colspanSumInRow += cells[j].colSpan;\n            }\n            colspansSums.push(colspanSumInRow);\n        }\n\n        maxAmountOfCells = Math.max.apply(null, colspansSums);\n        //calculate max rows\n        var maxAmountOfRows = table.rows.length;\n\n        // fill with zeros from both values\n        for (var i = 0; i < maxAmountOfRows; i++) {\n            a[i] = [];\n            for (var j = 0; j < maxAmountOfCells; j++) {\n                a[i].push(0);\n            }\n        }\n        drawTable(a);\n        return a;\n    };\n\n    /*\n     * This function gets the sum of all colspans in a row.\n     * @param number the number of row to be used as reference.\n     */\n    var getActualPointsInRow = function (row) {\n        var tds = table.rows[row].getElementsByTagName('td'),\n                points = 0;\n        for (var i = 0; i < tds.length; i++) {\n            points += tds[i].colSpan;\n        }\n        return points;\n    }\n\n    /*\n     * This function gets us the exact coordinates of\n     * an exact cell, in a more reliable way than xIndex and yIndex,\n     * these last ones were meant to be used for getting the cell trough them.\n     * @param DOMElement the cell to get the coordinates.\n     */\n    var getCoords = function (search) {\n        var skipInCols = [], cell;\n\n        for (var i = 0; i < maxAmountOfCells; i++) {\n            skipInCols[i] = 0;\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            var cellsBuffer = table.rows[i].getElementsByTagName('td');\n            cellPointer = 0;\n            for (var xPosition = 0; xPosition < maxAmountOfCells; xPosition += stepsToMove) {\n                stepsToMove = 1;\n\n                if (skipInCols[xPosition]) {\n                    skipInCols[xPosition]--;\n                } else {\n                    var td = cellsBuffer[cellPointer++];\n                    if (td == search) {\n                        return [i, xPosition];\n                    }\n                    if (td.rowSpan > 1) {\n                        for ( let k = 0; k < td.colSpan; k++ ) {\n                            skipInCols[xPosition + k] = td.rowSpan - 1;\n                        }\n                        stepsToMove = td.colSpan;\n                    } else if (td.colSpan > 1) {\n                        stepsToMove = td.colSpan;\n                    }\n                }\n            }\n        }\n    };\n\n    jQuery('#wptb-table-border-color').val('');\n    jQuery('#wptb-table-padding-number,#wptb-table-padding-slider').val('15');\n\n    // Todo your code here\n    if ( columns || rows ) {\n        //END OF PRIVATE FUNCTIONS\n        for (var i = 0; i < settings.length; i++) {\n            if (settings[i].id !== 'wptb-apply-inner-border') {\n                settings[i].classList.add('visible');\n            }\n        }\n\n        //Create a HTML Table element.\n        table = document.createElement( 'table' );\n        table.classList.add( 'wptb-preview-table', 'wptb-element-main-table_setting-startedid-0' );\n        table.style.border = '1px solid #d1d1d1';\n        table.dataset.reconstraction = 1;\n        //table.dataset.wptbAdaptiveTable = 1;\n        //Add the data rows.\n        for (var i = 0; i < rows; i++) {\n\n            row = table.insertRow(-1);\n            row.classList.add( 'wptb-row' );\n\n            for (var j = 0; j < columns; j++) {\n                cell = new WPTB_Cell(mark);\n                cell.setCoords(i, j);\n                cell.getDOMElement().style.border = '1px solid #d1d1d1';\n                row.appendChild(cell.getDOMElement());\n            }\n        }\n    } else {\n        if( ! wptb_preview_table ) wptb_preview_table = document.querySelector( '.wptb-preview-table' );\n\n        if ( wptb_preview_table ) {\n            table = wptb_preview_table;\n\n            let cells = table.getElementsByTagName('td');\n\n            if (cells.length > 0) {\n                for (let i = 0; i < cells.length; i++) {\n                    WPTB_Cell(mark, cells[i]);\n                }\n            }\n        } else {\n            return;\n        }\n    }\n\n    /**\n     * this method run \"mark\" method of WPTB_Table object\n     * @param event\n     */\n    table.mark = (event) => {\n        mark(event);\n    }\n\n    table.wptbCell = (callback, DOMElement) => {\n        return WPTB_Cell(callback, DOMElement);\n    }\n\n    table.tableSM = () => {\n        return WPTB_TableStateSaveManager;\n    }\n\n    /**\n     * this method run \"undoSelect\" method of WPTB_Table object\n     * @param event\n     */\n    table.undoSelect = () => {\n        undoSelect();\n    }\n\n    /**\n     * method for set value for maxAmountOfCells\n     * @param value\n     */\n    table.setMaxAmountOfCells = (value) => {\n        maxAmountOfCells = value;\n    }\n\n    /**\n     * this method return maxAmountOfCells value\n     * @returns {*}\n     */\n    table.getMaxAmountOfCells = () => {\n        return maxAmountOfCells;\n    }\n\n    /**\n     * this method run \"fillTableArray\" method of WPTB_Table object\n     * @returns {[]}\n     */\n    table.fillTableArray = () => {\n        return fillTableArray();\n    }\n    /*\n     * For assigning to each cell xIndex and y Index attributes,\n     * these are the column number and row number of cell in table.\n     */\n\n    table.recalculateIndexes = function () {\n        WPTB_Helper.recalculateIndexes( this );\n    }\n\n    table.addColumnWidth = function( value, cleaner ) {\n        let highlighted  = table.getElementsByClassName( 'wptb-highlighted' );\n        if( highlighted.length > 0 ) {\n            for( let k = 0; k < highlighted.length; k++ ) {\n                let dataXIndex = highlighted[k].dataset.xIndex;\n                if( dataXIndex ) {\n                    function tableTdsFor( dataXIndex, colspan ) {\n                        let tableRows = table.rows;\n                        let widthIsSet = false;\n                        let arrayTdsFromPreviousRow = [];\n                        for( let i = 0; i < tableRows.length; i++ ) {\n                            let row = tableRows[i];\n                            let tds = row.children;\n                            for( let j = 0; j < tds.length; j++ ) {\n                                let td = tds[j];\n                                if( td.dataset.xIndex == dataXIndex ) {\n                                    if( value ) {\n                                        if( td.colSpan == colspan ) {\n                                            td.style.width = value + 'px';\n                                            td.removeAttribute( 'data-wptb-fixed-width' );\n                                            widthIsSet = true;\n                                        } else {\n                                            td.style.width = null;\n                                            td.dataset.wptbFixedWidth = value;\n                                            if( i == tableRows.length - 1 && ! widthIsSet ) {\n                                                tableTdsFor( dataXIndex, colspan + 1 );\n                                            }\n                                        }\n                                    } else if( cleaner ) {\n                                        td.style.width = null;\n                                        td.removeAttribute( 'data-wptb-fixed-width' );\n                                    } else {\n                                        if( td.dataset.wptbFixedWidth ) {\n                                            if( td.colSpan == colspan ) {\n                                                td.style.width = td.dataset.wptbFixedWidth + 'px';\n                                                td.removeAttribute( 'data-wptb-fixed-width' );\n                                            }\n                                        } else if( td.style.width ) {\n                                            for( let z = 0; z < arrayTdsFromPreviousRow.length; z++ ) {\n                                                arrayTdsFromPreviousRow[z].style.width = td.style.width;\n                                            }\n                                            arrayTdsFromPreviousRow = [];\n                                        } else {\n                                            arrayTdsFromPreviousRow.push( td );\n                                        }\n                                    }\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    tableTdsFor( dataXIndex, 1 );\n                }\n            }\n\n            table.tdDefaultWidth();\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n        }\n    }\n\n    table.tdDefaultWidth = function() {\n        let rows = table.rows;\n\n        let tableTdsSumMaxWidth = 0;\n        let tableTdsSumMaxWidthFixed = 0;\n        let tableTdsSumMaxWidthAuto = 0;\n\n        let wptbTableSetup = document.getElementsByClassName( 'wptb-table-setup' )[0];\n        let wptbTableSetupWidth = wptbTableSetup.offsetWidth;\n\n        let arrayCellsWidthFixedHelper = [];\n        let arrayCellsWidthAutoHelper = [];\n        let tdPaddingCommon = 0;\n        let tableTdBorderCommonWidth = 0;\n        let cssForTdsWidthAuto = '';\n\n\n        let tableFullStyleObj = window.getComputedStyle( table, null );\n        let borderLeftWidth = tableFullStyleObj.getPropertyValue( 'border-left-width' );\n        let borderRightWidth = tableFullStyleObj.getPropertyValue( 'border-right-width' );\n        let tableBorderCommon = parseFloat( borderLeftWidth, 10 ) + parseFloat( borderRightWidth, 10 );\n\n        for( let i = 0; i < rows.length; i++ ) {\n            let tds = rows[i].children;\n            for( let j = 0; j < tds.length; j++ ) {\n                let td = tds[j];\n\n                if( ! arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] && ! arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] ) {\n                    if( td.style.width ) {\n                        arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] = parseFloat( td.style.width );\n                        td.removeAttribute( 'data-wptb-css-td-auto-width' );\n                    } else {\n                        if( ! td.dataset.wptbFixedWidth ) {\n                            arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] = table.dataset.wptbTdWidthAuto ? parseFloat( table.dataset.wptbTdWidthAuto, 10 ) : 100;\n                            td.dataset.wptbCssTdAutoWidth = true;\n                        }\n                    }\n\n                    if( window.getComputedStyle( td, null ) ) {\n                        let tdStyleObj = window.getComputedStyle( td, null );\n                        let tdPaddingLeft = tdStyleObj.getPropertyValue( 'padding-left' );\n                        let tdPaddingRight = tdStyleObj.getPropertyValue( 'padding-right' );\n                        tdPaddingCommon = parseFloat( tdPaddingLeft, 10 ) + parseFloat( tdPaddingRight, 10 );\n\n                        let tableTdBorderLeftWidth = tdStyleObj.getPropertyValue( 'border-left-width' );\n                        let tableTdBorderRightWidth = tdStyleObj.getPropertyValue( 'border-right-width' );\n                        tableTdBorderCommonWidth = parseFloat( tableTdBorderLeftWidth, 10 ) + parseFloat( tableTdBorderRightWidth, 10 );\n                        tableTdBorderCommonWidth = tableTdBorderCommonWidth / 2;\n\n                        if( arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] ) {\n                            arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += tdPaddingCommon;\n                            arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += tableTdBorderCommonWidth;\n\n                            if( j == 0 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderLeftWidth, 10 ) / 2;\n                            } else if( j == 0 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderRightWidth, 10 ) / 2 ) );\n                            }\n\n                            if( j == tds.length - 1 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderRightWidth, 10 ) / 2;\n                            } else if( j == tds.length - 1 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderRightWidth, 10 ) / 2 ) );\n                            }\n                        } else if( arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] ) {\n                            arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += tdPaddingCommon;\n                            arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += tableTdBorderCommonWidth;\n\n                            if( j == 0 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderLeftWidth, 10 ) / 2;\n                            } else if( j == 0 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderLeftWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderLeftWidth, 10 ) / 2 ) );\n                            }\n\n                            if( j == tds.length - 1 && ( tableBorderCommon / 2 ) <= parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += parseFloat( tableTdBorderRightWidth, 10 ) / 2;\n                            } else if( j == tds.length - 1 && ( tableBorderCommon / 2 ) > parseFloat( tableTdBorderRightWidth, 10 ) ) {\n                                arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] += ( ( tableBorderCommon / 2 ) - ( parseFloat( tableTdBorderLeftWidth, 10 ) / 2 ) );\n                            }\n                        }\n                    }\n                } else if( arrayCellsWidthAutoHelper[parseFloat( td.dataset.xIndex )] ) {\n                    if( ! td.dataset.wptbFixedWidth ) {\n                        td.dataset.wptbCssTdAutoWidth = true;\n                    }\n                } else if( arrayCellsWidthFixedHelper[parseFloat( td.dataset.xIndex )] ) {\n                    td.removeAttribute( 'data-wptb-css-td-auto-width' );\n                }\n            }\n        }\n\n        for( let i = 0; i < arrayCellsWidthFixedHelper.length; i++ ) {\n            if( arrayCellsWidthFixedHelper[i] ) {\n                tableTdsSumMaxWidthFixed += arrayCellsWidthFixedHelper[i];\n            }\n        }\n\n        let CellsWidthAutoCount = 0;\n        for( let i = 0; i < arrayCellsWidthAutoHelper.length; i++ ) {\n            if( arrayCellsWidthAutoHelper[i] ) {\n                tableTdsSumMaxWidthAuto += arrayCellsWidthAutoHelper[i];\n                CellsWidthAutoCount++;\n            }\n        }\n\n        tableTdsSumMaxWidth = tableTdsSumMaxWidthFixed + tableTdsSumMaxWidthAuto;\n\n        table.dataset.wptbTableTdsSumMaxWidth = tableTdsSumMaxWidth;\n        if( CellsWidthAutoCount ) {\n            table.dataset.wptbCellsWidthAutoCount = CellsWidthAutoCount;\n            if( table.merging–°ellsHorizontally ) {\n                table.dataset.wptbFixedWidthSize = tableTdsSumMaxWidthFixed;\n            } else {\n                table.removeAttribute( 'data-wptb-fixed-width-size' );\n            }\n        } else {\n            table.removeAttribute( 'data-wptb-fixed-width-size' );\n            table.removeAttribute( 'data-wptb-cells-width-auto-count' );\n        }\n\n        let styleElementCreate = false;\n        let tableTdWidthAuto;\n        if( tableTdsSumMaxWidth < wptbTableSetupWidth ) {\n            if( CellsWidthAutoCount ) {\n                table.style.minWidth = '100%';\n                if( table.merging–°ellsHorizontally ) {\n                    table.style.width = 'auto';\n                    let tableTdsWidthAutoCommon = wptbTableSetupWidth - tableTdsSumMaxWidthFixed;\n                    tableTdWidthAuto = tableTdsWidthAutoCommon / CellsWidthAutoCount;\n                    tableTdWidthAuto = tableTdWidthAuto - tdPaddingCommon - tableTdBorderCommonWidth;\n                    styleElementCreate = true;\n                } else {\n                    table.style.width = '100%';\n                }\n            } else {\n                table.style.width = 'auto';\n                table.style.minWidth = null;\n                table.style.maxWidth = null;\n            }\n        } else {\n            table.style.maxWidth = null;\n            table.style.minWidth = tableTdsSumMaxWidth + 'px';\n            table.style.width = 'auto';\n            tableTdWidthAuto = table.dataset.wptbTdWidthAuto ? table.dataset.wptbTdWidthAuto : '100';\n            styleElementCreate = true;\n        }\n\n        let head = document.head;\n        if( head ) {\n            let cssForTdsWidthAutoOld = head.querySelector( 'style[data-wptb-td-auto-width=\"true\"]' );\n            if( cssForTdsWidthAutoOld ) {\n                head.removeChild( cssForTdsWidthAutoOld );\n            }\n        }\n\n        if( styleElementCreate ) {\n            cssForTdsWidthAuto = document.createElement( 'style' );\n            cssForTdsWidthAuto.setAttribute( 'data-wptb-td-auto-width', true );\n            cssForTdsWidthAuto.innerHTML = '[data-wptb-css-td-auto-width=true]{width:' + tableTdWidthAuto + 'px}';\n            if( head ) {\n                head.appendChild( cssForTdsWidthAuto );\n            }\n        }\n\n        if( table.dataset.wptbTableAlignment ) {\n            let wptbTableAlignment = table.dataset.wptbTableAlignment;\n\n            let wptbTableSetupWidth = wptbTableSetup.offsetWidth;\n            if( wptbTableSetupWidth < table.offsetWidth ) {\n                table.style.float = null;\n            } else {\n                if( wptbTableAlignment == 'center' ) {\n                    table.style.float = null;\n                } else {\n                    table.style.float = wptbTableAlignment;\n                }\n            }\n\n            if( wptbTableAlignment == 'center' ) {\n                wptbTableSetup.style.float = null;\n            } else {\n                wptbTableSetup.style.float = wptbTableAlignment;\n            }\n\n            if( tableTdWidthAuto && table.dataset.wptbTableContainerMaxWidth && table.offsetWidth < table.dataset.wptbTableContainerMaxWidth ) {\n                table.style.width = '100%';\n            }\n        } else {\n            table.style.float = null;\n        }\n    }\n\n    table.addRowHeight = function( value, cleaner ) {\n        let highlighted  = table.getElementsByClassName( 'wptb-highlighted' );\n        if( highlighted.length > 0 ) {\n            for( let k = 0; k < highlighted.length; k++ ) {\n                let dataYIndex = highlighted[k].dataset.yIndex;\n                if( dataYIndex ) {\n                    function tableTdsFor( dataYIndex, rowspan ) {\n                        let tableRows = table.rows;\n                        let heightIsSet = false;\n                        let arrayTdsPrevious = [];\n                        for( let i = 0; i < tableRows.length; i++ ) {\n                            let row = tableRows[i];\n                            let tds = row.children;\n                            for( let j = 0; j < tds.length; j++ ) {\n                                let td = tds[j];\n                                if( td.dataset.yIndex == dataYIndex ) {\n                                    if( value ) {\n                                        if( td.rowSpan == rowspan ) {\n                                            td.style.height = value + 'px';\n                                            td.removeAttribute( 'data-wptb-fixed-heidht' );\n                                            heightIsSet = true;\n                                            continue;\n                                        } else {\n                                            td.style.height = null;\n                                            td.dataset.wptbFixedHeight = value;\n                                            if( j == tds.length - 1 && ! heightIsSet ) {\n                                                tableTdsFor( dataYIndex , rowspan + 1 );\n                                            }\n                                        }\n                                    } else if( cleaner ) {\n                                        td.style.height = null;\n                                        td.removeAttribute( 'data-wptb-fixed-heidht' );\n                                    } else {\n                                        if( td.dataset.wptbFixedHeight ) {\n                                            if( td.rowSpan = rowspan ) {\n                                                td.style.height = td.dataset.wptbFixedHeight + 'px';\n                                                td.removeAttribute( 'data-wptb-fixed-width' );\n                                            }\n                                        } else if( td.style.height ) {\n                                            for( let z = 0; z < arrayTdsPrevious.length; z++ ) {\n                                                arrayTdsPrevious[z].style.height = td.style.height;\n                                            }\n                                            arrayTdsPrevious = [];\n                                        } else {\n                                            arrayTdsPrevious.push( td );\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    tableTdsFor( dataYIndex, 1 );\n                }\n            }\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n        }\n    }\n\n    table.reconstraction = function() {\n        let tds = table.getElementsByTagName( 'td' );\n        table.merging–°ellsHorizontally = false;\n        table.mergingCellsVertically = false;\n        table.dataset.reconstraction = 1;\n        let forBreak = 0;\n        for( let i = 0; i < tds.length; i++ ) {\n            if( tds[i].colSpan > 1 ) {\n                table.dataset.reconstraction = 0;\n                table.merging–°ellsHorizontally = true;\n                forBreak++;\n            }\n\n            if( tds[i].rowSpan > 1 ) {\n                table.dataset.reconstraction = 0;\n                table.mergingCellsVertically = true;\n                forBreak++;\n            }\n\n            if( forBreak == 2 ) {\n                break;\n            }\n        }\n    }\n\n    /*\n     * As simple as it is: adds a column to the end of table.\n     */\n    table.addColumnEnd = function () {\n        let td,\n            currentTable = document.getElementsByClassName('wptb-preview-table'),\n            currentTableTd,\n            currentTdStyle;\n        if (currentTable.length > 0) {\n            currentTableTd = currentTable[0].querySelector('td');\n        }\n\n        if (currentTableTd) {\n            currentTdStyle = currentTableTd.getAttribute('style');\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            td = new WPTB_Cell(mark);\n\n            if (currentTdStyle) {\n                td.getDOMElement().setAttribute('style', currentTdStyle);\n                td.getDOMElement().style.width = null;\n                td.getDOMElement().style.height = null;\n                td.getDOMElement().style.borderColor = WPTB_TableSettingsData.getTableSetting('borderColor');\n            }\n\n            table.rows[i].appendChild(td.getDOMElement());\n            array[i].push(0);\n        }\n\n        maxAmountOfCells++;\n        table.recalculateIndexes();\n        table.tdDefaultWidth();\n        table.addRowHeight();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * As simple as it looks: adds a column to the start of table.\n     */\n\n    table.addColumnStart = function () {\n        let td,\n            firstCell,\n            currentTable = document.getElementsByClassName('wptb-preview-table'),\n            currentTableTd,\n            currentTdStyle;\n        if ( currentTable.length > 0 ) {\n            currentTableTd = currentTable[0].querySelector('td');\n        }\n\n        if ( currentTableTd ) {\n            currentTdStyle = currentTableTd.getAttribute('style');\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            td = new WPTB_Cell(mark);\n            if (currentTdStyle) {\n                td.getDOMElement().setAttribute('style', currentTdStyle);\n                td.getDOMElement().style.width = null;\n                td.getDOMElement().style.height = null;\n                td.getDOMElement().style.borderColor = WPTB_TableSettingsData.getTableSetting('borderColor');\n            }\n            firstCell = table.rows[i].getElementsByTagName('td')[0];\n            if (firstCell) {\n                table.rows[i].insertBefore(td.getDOMElement(), firstCell);\n            } else {\n                table.rows[i].appendChild(td.getDOMElement());\n            }\n            array[i].push(0);\n        }\n\n        maxAmountOfCells++;\n        table.recalculateIndexes();\n        table.tdDefaultWidth();\n        table.addRowHeight();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * Well, not so simple as previous functions.\n     * It adds a column after a certain column of reference.\n     * @param integer the column number to be used as reference.\n     *\tIf empty, then the first highlighted cell is used as reference.\n     */\n\n    table.addColumnAfter = function (c_pos) {\n        let rows = table.rows,\n            cell,\n            cellStyle,\n            pos;\n\n        if(c_pos != undefined && typeof c_pos === 'number') {\n            pos = c_pos;\n            cell = document.querySelector('[data-x-index=\"' + pos + '\"]');\n        } else {\n            cell = document.querySelector('.wptb-highlighted');\n            pos = getCoords(cell)[1];\n        }\n\n        if(cell) {\n            cellStyle = cell.getAttribute('style');\n\n            if( maxAmountOfCells - pos - cell.colSpan + 1 == 1 ) {\n                table.addColumnEnd();\n            } else {\n                for(let i = 0; i < rows.length; i++) {\n                    let tds = rows[i].children;\n                    for(let j = 0; j < tds.length; j++) {\n                        if(parseInt(tds[j].dataset.xIndex) <= pos) {\n                            if(parseInt(tds[j].dataset.xIndex) + tds[j].colSpan == pos + cell.colSpan) {\n                                let td = newTd(cellStyle);\n                                let nextSib = tds[j].nextSibling;\n                                if (nextSib) {\n                                    rows[i].insertBefore(td.getDOMElement(), nextSib);\n                                } else {\n                                    rows[i].appendChild(td.getDOMElement());\n                                }\n\n                                break;\n                            } else if(parseInt(tds[j].dataset.xIndex) + tds[j].colSpan > pos + cell.colSpan) {\n                                tds[j].colSpan++;\n                                if(tds[j].rowSpan > 1) i += tds[j].rowSpan - 1;\n                                break;\n                            }\n                        } else if(parseInt(tds[j].dataset.xIndex) > pos) {\n                            let td = newTd(cellStyle);\n                            rows[i].insertBefore(td.getDOMElement(), tds[j]);\n                            break;\n                        }\n                    }\n                }\n\n                function newTd(cellStyle) {\n                    let td = new WPTB_Cell(mark);\n                    if (cellStyle) {\n                        td.getDOMElement().setAttribute('style', cellStyle);\n                        td.getDOMElement().style.width = null;\n                        td.getDOMElement().style.height = null;\n                    }\n                    td.getDOMElement().style.borderColor = WPTB_TableSettingsData.getTableSetting('borderColor');\n                    return td;\n                }\n\n                for (var i = 0; i < array.length; i++) {\n                    array[i].push(0);\n                }\n                maxAmountOfCells++;\n                drawTable(array);\n                table.recalculateIndexes();\n                table.addColumnWidth();\n                table.addRowHeight();\n                WPTB_Helper.dataTitleColumnSet( table );\n                undoSelect();\n\n                WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n                let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n                wptbTableStateSaveManager.tableStateSet();\n            }\n        }\n    };\n\n    /*\n     * For preventing us to take a lot of time,\n     * This is just calling the function addColumnAfter, but\n     * using the previous column to current one as reference.\n     * @see addColumnAfter\n     */\n\n    table.addColumnBefore = function () {\n        var cell = document.querySelector('.wptb-highlighted'),\n                pos = getCoords(cell)[1];\n\n        if (pos === 0) {\n            table.addColumnStart();\n        } else {\n            table.addColumnAfter(pos - 1);\n        }\n    };\n\n    /*\n     * Luckily, thisfunction is simple,\n     * it just add a row to the end of table.\n     */\n\n    table.addRowToTheEnd = function () {\n        let r = table.insertRow(-1),\n        td,\n        aux,\n        currentTable = document.getElementsByClassName('wptb-preview-table');\n        r.classList.add( 'wptb-row' );\n        if (currentTable.length > 0) {\n            currentTable = currentTable[0];\n\n            for (var i = 0; i < maxAmountOfCells; i++) {\n                td = new WPTB_Cell(mark);\n                let currentTableTd = currentTable.querySelector('[data-x-index=\"' + i + '\"]');\n                if( currentTableTd ) {\n                    let currentTdStyle = currentTableTd.getAttribute( 'style' );\n\n                    td.getDOMElement().setAttribute( 'style', currentTdStyle );\n                    td.getDOMElement().style.height = null;\n                }\n                r.appendChild(td.getDOMElement());\n            }\n\n            aux = Array.from(array[0]);\n            array.push(aux);\n            drawTable(array);\n            table.recalculateIndexes();\n            WPTB_Helper.tableRowsColorsReinstall(table);\n            table.addColumnWidth();\n            WPTB_Helper.dataTitleColumnSet( table );\n            undoSelect();\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n    };\n\n    /*\n     * Yet another simple function,\n     * it just add a row to the start of table.\n     */\n\n    table.addRowToTheStart = function () {\n        let r = table.insertRow(0),\n        td,\n        aux,\n        currentTable = document.getElementsByClassName('wptb-preview-table'),\n        currentTableTd,\n        currentTdStyle;\n        r.classList.add( 'wptb-row' );\n        if (currentTable.length > 0) {\n            currentTable = currentTable[0];\n\n            for (var i = 0; i < maxAmountOfCells; i++) {\n                td = new WPTB_Cell(mark);\n                let currentTableTd = currentTable.querySelector('[data-x-index=\"' + i + '\"]');\n                if( currentTableTd ) {\n                    let currentTdStyle = currentTableTd.getAttribute( 'style' );\n\n                    td.getDOMElement().setAttribute( 'style', currentTdStyle );\n                    td.getDOMElement().style.height = null;\n                }\n                r.appendChild(td.getDOMElement());\n            }\n\n            aux = Array.from(array[0]);\n            array.push(aux);\n            drawTable(array);\n            table.recalculateIndexes();\n            WPTB_Helper.tableRowsColorsReinstall( table );\n            table.addColumnWidth();\n            WPTB_Helper.dataTitleColumnSet( table );\n            undoSelect();\n\n            WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        }\n    };\n\n    /*\n     * This function adds a row before the current one.\n     * Since the biggest factor of problem is a not-started but ongoing rowspan,\n     * the most of the troubles is not here.\n     */\n\n    table.addRowBefore = function () {\n        let cell = document.querySelector('.wptb-highlighted'),\n            cellStyle = cell.getAttribute('style'),\n            row = getCoords(cell)[0],\n            cellNew;\n\n        if(row === 0){\n            row = -1;\n        }\n\n        for( let i = row - 1; i >= 0; i-- ) {\n            let rowChildren = table.rows[i].children;\n            let rowChildrenLength = rowChildren.length;\n            if( rowChildrenLength > 0 ) {\n                for( let j = 0; j < rowChildrenLength; j++ ) {\n                    if( rowChildren[j].rowSpan == 1 ) {\n                        row = i;\n                        cellNew = true;\n                        break;\n                    }\n                }\n            }\n            if ( cellNew ) {\n                break;\n            }\n        }\n\n\n        if (row === -1) {\n            table.addRowToTheStart();\n        } else {\n            table.addRowAfter( row, cellStyle );\n        }\n    };\n\n    /*\n     * Well... by the name convention of the previous 3 functions,\n     * it's pretty obvious that this functions attaches a new\n     * row after highlighted cell row. The greatest obstacle it was\n     * the possibility of a TR not having the exact amount of columns\n     * occuped by actual node but rowspanned upper cells. For that purpose\n     * it was created the function realTimeArray.\n     * @see realTimeArray\n     */\n\n    table.addRowAfter = function ( row, cellStyle ) {\n        let cellRowSpan,\n            rowAfter,\n            aux;\n\n        if ( ( row == undefined || typeof row !== 'number' ) && cellStyle == undefined ) {\n            let cell = document.querySelector('.wptb-highlighted');\n            cellStyle = cell.getAttribute('style'),\n            row = getCoords(cell)[0],\n            cellRowSpan = cell.rowSpan,\n            rowAfter = row + cellRowSpan - 1;\n        } else {\n            rowAfter = row;\n        }\n\n\n        let cellsColSpan = 0;\n        if ( rowAfter < table.rows.length -1 ) {\n            for( let i = 0; i <= rowAfter ; i++ ) {\n                let tableRowsIChildren = table.rows[i].children,\n                    tableRIChildrenLength = tableRowsIChildren.length;\n                if( tableRIChildrenLength > 0 ) {\n                    for( let j = 0; j < tableRIChildrenLength; j++ ) {\n                        let rowIRowSpan = tableRowsIChildren[j].rowSpan;\n\n                        if ( rowIRowSpan - 1  + i > rowAfter ) {\n                            tableRowsIChildren[j].rowSpan++;\n                        }\n                    }\n                }\n            }\n\n            let rNext = table.rows[rowAfter + 1],\n                rNextChildren = rNext.children,\n                rNextChildrenLength = rNextChildren.length;\n\n            if( rNextChildrenLength > 0 ) {\n                for ( let i = 0; i < rNextChildrenLength; i++ ) {\n                    cellsColSpan += rNextChildren[i].colSpan;\n                }\n            }\n        } else {\n            cellsColSpan = array[0].length;\n        }\n\n        let r = table.insertRow( rowAfter + 1 );\n        r.classList.add( 'wptb-row' );\n\n        for ( j = 0; j < cellsColSpan; j++ ) {\n            let td = new WPTB_Cell( mark );\n            let currentTableTd = table.querySelector('[data-x-index=\"' + j + '\"]');\n            if( currentTableTd ) {\n                let currentTdStyle = currentTableTd.getAttribute( 'style' );\n\n                td.getDOMElement().setAttribute( 'style', currentTdStyle );\n                td.getDOMElement().style.height = null;\n            }\n            r.appendChild( td.getDOMElement() );\n        }\n\n        aux = Array.from(array[0]);\n        array.push(aux);\n        drawTable(array);\n        table.recalculateIndexes();\n        WPTB_Helper.tableRowsColorsReinstall( table );\n        table.addColumnWidth();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after');\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * This function checks the current selected cells\n     * make a rectangular shape.\n     * @param Array the abstract table.\n     * @return false, if not making a rectangle, or\n     *\tArray an array containing number of rows and columns, if selection makes a rectangle.\n     */\n\n    table.isSquare = function (a) {\n        var rowStart = -1,\n            columnStart = -1,\n            rowEnd = -1,\n            columnEnd = -1,\n            height,\n            width,\n            itemsEstimate = 0,\n            items = 0;\n\n        for (var i = 0; i < a.length; i++) {\n            for (var j = 0; j < a[i].length; j++) {\n                if (a[i][j] == 1) {\n                    if ( j < columnStart || columnStart == -1 ) {\n                        columnStart = j;\n                    }\n                    if ( i < rowStart || rowStart == -1 ) {\n                        rowStart = i;\n                    }\n                }\n            }\n\n        }\n\n        for (var i = a.length - 1; i > -1; i--) {\n            for (var j = a[i].length - 1; j > -1; j--) {\n                if (a[i][j] == 1) {\n                    if ( j > columnEnd ) {\n                        columnEnd = j;\n                    }\n                    if ( i > rowEnd ) {\n                        rowEnd = i;\n                    }\n                }\n            }\n        }\n\n        for (var i = rowStart; i < rowEnd; i++) {\n            for (var j = columnStart; j < columnEnd; j++) {\n                if (a[i][j] == 0 || a[i][j] == undefined) {\n                    return false;\n                }\n            }\n        }\n\n        for (var i = 0; i < a.length; i++) {\n            for (var j = 0; j < a[i].length; j++) {\n                if (a[i][j] == 1) {\n                    items++;\n                }\n            }\n        }\n\n        height = rowEnd - rowStart + 1;\n        width = columnEnd - columnStart + 1;\n        itemsEstimate = height * width;\n\n        if (itemsEstimate !== items) {\n            return false;\n        }\n        return [height, width];\n    };\n\n    /*\n     * This function merges all selected cells.\n     * Well, actually sets the colspan and rowspan of first\n     * upper left  cell in selection and deletes the another selected cells.\n     */\n\n    table.mergeCells = function () {\n        var dimensions = table.isSquare(array),\n            rowspan = dimensions[0],\n            colspan = dimensions[1],\n            first = document.querySelector('.wptb-highlighted'),\n            tds = [].slice.call(document.getElementsByClassName('wptb-highlighted'), 1),\n            tdsChildrenNew = [];\n\n        for (let i = 0; i < tds.length; i++) {\n            let tdsInternalElements = tds[i].getElementsByClassName('wptb-ph-element');\n            if (tdsInternalElements.length > 0) {\n                let tdsIntElemLength = tdsInternalElements.length;\n                for (let j = 0; j < tdsIntElemLength; j++) {\n                    tdsChildrenNew.push(tdsInternalElements[j]);\n                }\n            }\n            let p = tds[i].parentNode;\n            p.removeChild(tds[i]);\n        }\n        if (tdsChildrenNew.length > 0) {\n            for (let i = 0; i < tdsChildrenNew.length; i++) {\n                first.appendChild(tdsChildrenNew[i]);\n            }\n        }\n\n        first.colSpan = colspan;\n        first.rowSpan = rowspan;\n        table.recalculateIndexes();\n        table.reconstraction();\n        let firstWidth = first.style.width;\n        let firstDataFixedWidth = first.dataset.wptbFixedWidth;\n        if( firstWidth ) {\n            table.addColumnWidth( parseFloat( firstWidth, 10 ) );\n        } else if( firstDataFixedWidth ) {\n            table.addColumnWidth();\n        } else {\n            table.addColumnWidth( false, true );\n        }\n\n        let firstHeight = first.style.height;\n        let firstDataFixedHeight = first.dataset.wptbFixedHeight;\n        if( firstHeight ) {\n            table.addRowHeight( parseFloat( firstHeight, 10 ) );\n        } else if( firstDataFixedHeight ) {\n            table.addRowHeight();\n        } else {\n            table.addRowHeight( false, true );\n        }\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * This functions makes the exact inverse as above.\n     * It resets colspan and rowspan and appends\n     * the same amount in cells to the table.\n     * @bug\n     */\n\n    table.splitCell = function () {\n        var cell = document.getElementsByClassName('wptb-highlighted')[0],\n            rowspan = cell.rowSpan,\n            colspan = cell.colSpan,\n            cellStyles = cell.getAttribute('style'),\n            row = getCoords(cell)[0],\n            thisRow = table.rows[row],\n            cellXIndex =cell.dataset.xIndex;\n\n        cell.rowSpan = 1;\n        cell.colSpan = 1;\n\n        for (let i = 1; i < colspan; i++) {\n            let td = new WPTB_Cell(mark);\n            td.getDOMElement().setAttribute('style', cellStyles);\n            td.getDOMElement().classList.add( 'wptb-highlighted' );\n            if ( cell.nextSibling ) {\n                thisRow.insertBefore( td.getDOMElement(), cell.nextSibling );\n            } else {\n                thisRow.appendChild( td.getDOMElement() );\n            }\n\n        }\n\n        if (rowspan > 1) {\n            for (let i = 1; i < rowspan; i++) {\n                let rowChildInsertBefore = undefined,\n                    rowNext = table.rows[row + i],\n                    rowChildren = rowNext.children,\n                    rowChildrenLength = rowChildren.length;\n\n                if ( rowChildrenLength > 0 ) {\n                    for ( let k = 0; k < rowChildrenLength; k++ ) {\n                        if ( Number( rowChildren[k].dataset.xIndex ) > Number( cellXIndex ) ) {\n                            rowChildInsertBefore = rowChildren[k];\n                            break;\n                        }\n                    }\n                }\n                for ( let j = 0; j < colspan; j++ ) {\n                    let td = new WPTB_Cell( mark );\n                    td.getDOMElement().setAttribute( 'style', cellStyles );\n                    if ( rowChildInsertBefore != undefined ) {\n                        rowNext.insertBefore( td.getDOMElement(), rowChildInsertBefore );\n                    } else {\n                        rowNext.appendChild( td.getDOMElement() );\n                    }\n                }\n            }\n        }\n\n        table.recalculateIndexes();\n        table.reconstraction();\n        table.addColumnWidth();\n        table.addRowHeight();\n        WPTB_Helper.dataTitleColumnSet( table );\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    /*\n     * Searches for rowspanned cells up to row number meeting it.\n     * @param number the number of row where the function\n     * must search up to.\n     */\n\n    table.findRowspannedCells = function (row) {\n        var array = [],\n                difference;\n        actualPoints = getActualPointsInRow(row);\n        if (actualPoints === maxAmountOfCells) {\n            return [];\n        }\n        difference = maxAmountOfCells - actualPoints;\n\n        for (var i = row - 1; i >= 0 && difference; i--) {\n            var tds = table.rows[i].getElementsByTagName('td');\n            for (var i = 0; i < tds.length; i++) {\n                if (tds[i].rowSpan > 1) {\n                    array.push(tds[i]);\n                    difference -= tds[i].colSpan;\n                }\n            }\n        }\n        return array;\n\n    }\n\n    /*\n     * This function explores the table and adds\n     * a cell for each lacking one for each row\n     * to meet an even amount of cells.\n     */\n\n    table.addLackingCells = function () {\n        var sumRows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            sumRows.push(0);\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            var tds = table.rows[i].getElementsByTagName('td');\n            for (var j = 0; j < tds.length; j++) {\n                if (tds[j].rowSpan > 1) {\n                    for (var k = 1; k < tds[j].rowSpan; k++) {\n                        sumRows[i + k]++;\n                    }\n                }\n            }\n        }\n\n        for (var i = 0; i < table.rows.length; i++) {\n            var tds = table.rows[i].getElementsByTagName('td'),\n                    totalColspan = 0;\n            for (var j = 0; j < tds.length; j++) {\n                totalColspan += tds[j].colSpan;\n            }\n            totalColspan += sumRows[i];\n            difference = maxAmountOfCells - totalColspan;\n            for (var j = 0; j < difference; j++) {\n                var td = new WPTB_Cell(mark);\n                table.rows[i].appendChild(td.getDOMElement());\n                //table.rows[i].insertBefore( td.getDOMElement(), rows[i].nextSibling );\n            }\n        }\n    };\n\n    /*\n     * This function deletes the row of currently\n     * selected cell.\n     */\n\n    table.deleteRow = function () {\n        let cell = document.querySelector('.wptb-highlighted'),\n            cellStyles = cell.getAttribute('style'),\n            rowspan = cell.rowSpan,\n            row = getCoords(cell)[0],\n            thisRow,\n            aux;\n\n        if ( rowspan == undefined ) rowspan = 1;\n\n        for ( let i = 0; i < rowspan; i++ ) {\n            thisRow = table.rows[row];\n            let thisRowChildren = thisRow.children,\n                nextRow = table.rows[row + 1],\n                nextRowChildren,\n                nextRowChildrenLength,\n                tdArr = [];\n\n            if( nextRow != undefined ) {\n                nextRowChildren = nextRow.children;\n                nextRowChildrenLength = nextRowChildren.length;\n                for (let j = 0; j < thisRowChildren.length; j++) {\n                    if ( thisRowChildren[j].rowSpan > 1 ) {\n                        let td = new WPTB_Cell(mark);\n                            td.getDOMElement().setAttribute('style', cellStyles);\n                            td.getDOMElement().colSpan = thisRowChildren[j].colSpan;\n                            td.getDOMElement().rowSpan = thisRowChildren[j].rowSpan - 1;\n\n                        let nextRowChildrenK = undefined;\n                        for ( let k = 0; k < nextRowChildrenLength; k++ ) {\n                            if ( Number( nextRowChildren[k].dataset.xIndex ) > Number( thisRowChildren[j].dataset.xIndex ) ) {\n                                nextRowChildrenK = nextRowChildren[k];\n                                break;\n                            }\n                        }\n\n                        if ( nextRowChildrenK ) {\n                            tdArr.push( [td, nextRowChildrenK] );\n                        } else {\n                            tdArr.push( [td] );\n                        }\n                    }\n                }\n\n                if ( tdArr.length > 0 ) {\n                    for ( let k = 0; k < tdArr.length; k++ ) {\n                        if ( tdArr[k][1] != undefined ) {\n                            nextRow.insertBefore( tdArr[k][0].getDOMElement(), tdArr[k][1] );\n                        } else {\n                            nextRow.appendChild( tdArr[k][0].getDOMElement() );\n                        }\n                    }\n                }\n            }\n\n            let tableRows = table.rows;\n            if ( tableRows.length > 0 ) {\n                for ( let j = 0; j < row; j++ ) {\n                    let jRowChildren = tableRows[j].children;\n                    if ( jRowChildren.length > 0 ) {\n                        for ( let x = 0; x < jRowChildren.length; x++ ) {\n                            if ( jRowChildren[x].rowSpan - 1 >= row - j ) {\n                                jRowChildren[x].rowSpan--;\n                            }\n                        }\n                    }\n                }\n            }\n            aux = Array.from(array[0]);\n            array.pop(aux);\n            drawTable(array);\n            table.getElementsByTagName('tbody')[0].removeChild(table.rows[row]);\n\n            if( table.rows.length == 0 ) {\n                WPTB_Helper.toggleTableEditMode();\n                wptbTableSetup.innerHTML = '';\n                document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n                let wptbSaveBtn = document.getElementsByClassName( 'wptb-save-btn' );\n                if( wptbSaveBtn.length > 0 ) {\n                    wptbSaveBtn = wptbSaveBtn[0];\n\n                    wptbSaveBtn.classList.add( 'wptb-save-disabled' );\n                    wptbSaveBtn.classList.remove('active');\n                }\n            } else {\n                table.recalculateIndexes();\n                WPTB_Helper.tableRowsColorsReinstall( table );\n                WPTB_Helper.dataTitleColumnSet( table );\n                table.reconstraction();\n            }\n        }\n\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    }\n\n    /*\n     * This function deletes the column of currently\n     * selected cell. Again, this is way more complicated than\n     * delete row case.\n     */\n\n    table.deleteColumn = function () {\n        let cell = document.querySelector('.wptb-highlighted'),\n            cellXIndex = cell.dataset.xIndex,\n            colspan = cell.colSpan;\n\n        for ( let i = 0; i < colspan; i++ ) {\n            for ( let j = 0; j < table.rows.length; j++ ) {\n                let rowChildren = table.rows[j].children;\n                let rowChildrenLength = rowChildren.length;\n                if( rowChildrenLength > 0 ) {\n                    for ( let k = rowChildrenLength - 1; k >= 0; k-- ) {\n                        if ( Number( rowChildren[k].dataset.xIndex ) == Number( cellXIndex ) ) {\n                            if ( rowChildren[k].colSpan > 1 ) {\n                                rowChildren[k].colSpan--;\n                            } else {\n                                table.rows[j].removeChild( rowChildren[k] );\n                            }\n                            break;\n                        } else if( Number( rowChildren[k].dataset.xIndex ) < Number( cellXIndex ) &&\n                                Number( rowChildren[k].dataset.xIndex ) +\n                                Number( rowChildren[k].colSpan -1 ) >= cellXIndex ) {\n                            if ( rowChildren[k].colSpan > 1 ) {\n                                rowChildren[k].colSpan--;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n\n            for ( let j = 0; j < table.rows.length; j++ ) {\n                if (array[j] != undefined)\n                    array[j].pop();\n            }\n\n            maxAmountOfCells--;\n\n            if( table.querySelectorAll( 'td' ).length == 0 ) {\n                WPTB_Helper.toggleTableEditMode();\n                wptbTableSetup.innerHTML = '';\n                document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n                let wptbSaveBtn = document.getElementsByClassName( 'wptb-save-btn' );\n                if( wptbSaveBtn.length > 0 ) {\n                    wptbSaveBtn = wptbSaveBtn[0];\n\n                    wptbSaveBtn.classList.add( 'wptb-save-disabled' );\n                    wptbSaveBtn.classList.remove('active');\n                }\n            } else {\n                table.recalculateIndexes();\n                table.tdDefaultWidth();\n                WPTB_Helper.dataTitleColumnSet( table );\n                table.reconstraction();\n            }\n        }\n\n        undoSelect();\n\n        WPTB_Helper.wptbDocumentEventGenerate('wp-table-builder/table-changed/after', table);\n\n        let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n        wptbTableStateSaveManager.tableStateSet();\n    };\n\n    // @deprecated old generate logic\n    // document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n\n    array = fillTableArray();\n\n    undoSelect();\n    drawTable(array);\n\n    wptbTableSetup.appendChild(table);\n    //if (columns || rows) {\n        table.recalculateIndexes( true );\n    //}\n    table.reconstraction();\n    table.tdDefaultWidth();\n\n    wptbTableSetup.onresize = function() {\n        table.tdDefaultWidth();\n    };\n\n    WPTB_LeftPanel();\n\n    // event hook to signal that table is generated and ready to be used\n    WPTB_Helper.wptbDocumentEventGenerate('wptb:table:generated', document);\n\n    WPTB_Helper.elementStartScript( table, 'table_setting' );\n    WPTB_Helper.elementOptionsSet( 'table_setting', table );\n\n    // this code gets the ID of the active element in the toolbar\n    // and stores it in the data attribute of the common container element \"wpcd_fixed_toolbar\"\n//    let wptbPhElement = document.getElementsByClassName( 'wptb-ph-element' );\n//    let wpcdFixedToolbar = document.getElementById( 'wpcd_fixed_toolbar' );\n//    for ( let i = 0; i < wptbPhElement.length; i++ ) {\n//        wptbPhElement[i].addEventListener( 'click', function( e ) {\n//            let wptbToolbar = document.getElementById( 'wpcd_fixed_toolbar' ).children;\n//            for ( let j = 0; j < wptbToolbar.length; j++ ) {\n//                let elementStyles = window.getComputedStyle( wptbToolbar[j], 'null' );\n//                if( elementStyles.getPropertyValue( 'display' ) == 'block' ) {\n//                    wpcdFixedToolbar.dataset.toolbarActiveId = wptbToolbar[j].getAttribute( 'id' );\n//                }\n//            }\n//        }, false );\n//    }\n\n//    let wptbPanelLeft = document.getElementsByClassName( 'wptb-panel-left' );\n//    if( wptbPanelLeft.length > 0 ) {\n//        wptbPanelLeft[0].addEventListener( 'click', function( e ) {\n//            let toolbarActiveElementId = wpcdFixedToolbar.dataset.toolbarActiveId;\n//            document.getElementById( toolbarActiveElementId ).style.display = '';\n//        }, false );\n//    }\n\n//    let body = document.getElementsByTagName( 'body' );\n//    if( body.length > 0 ) {\n//        body[0].addEventListener( 'click', function( e ) {\n//            if ( e.target.classList.contains( 'wptb-panel-left' ) || WPTB_Helper.findAncestor( e.target, 'wptb-panel-left' ) ) {\n//                let toolbarActiveElementId = wpcdFixedToolbar.dataset.toolbarActiveId;\n//                document.getElementById( toolbarActiveElementId ).style.display = '';\n//            }\n//        }, false );\n//    }\n};\n","const WPTB_TableSettingsData = {\n    borderColor: '',\n    /**\n     *\n     * @param {string} name\n     * @param {string} value\n     */\n    setTableSetting: function(name, value){\n        this[name] = value;\n    },\n    /**\n     *\n     * @param {string} name\n     * @returns {*}\n     */\n    getTableSetting: function (name) {\n        return this[name];\n    }\n}\n\n","const WPTB_TableStateSaveManager = function () {\n\tthis.tableStateSet = (generate) => {\n\t\tif (generate && window.wptbTableStateSaving && Array.isArray(window.wptbTableStateSaving)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get table setup\n\t\tlet wptbTableSetup = document.getElementsByClassName('wptb-table-setup');\n\t\tlet wptbPreviewTable = '';\n\t\tif (wptbTableSetup.length > 0) {\n\t\t\twptbTableSetup = wptbTableSetup[0];\n\n\t\t\twptbPreviewTable = wptbTableSetup.querySelector('.wptb-preview-table');\n\t\t} else {\n\t\t\twptbTableSetup = '';\n\t\t}\n\n\t\t// check if a global array doesn't exist with saved versions of the table\n\t\t// them create it\n\t\tif (!window.wptbTableStateSaving && !Array.isArray(window.wptbTableStateSaving)) {\n\t\t\twindow.wptbTableStateSaving = [];\n\t\t}\n\n\t\t// remove the extra part of the array after changing the table\n\t\t// when it is showed in the not last modified version\n\t\tif (window.wptbTableStateSaving.length > window.wptbTableStateNumberShow) {\n\t\t\twindow.wptbTableStateSaving = window.wptbTableStateSaving.slice(0, window.wptbTableStateNumberShow + 1);\n\t\t}\n\n\t\t// add new state of table\n\t\tlet wptbNewTableSetup = '';\n\t\tif (wptbTableSetup) {\n\t\t\twptbNewTableSetup = wptbTableSetup.cloneNode(true);\n\t\t\tconst wptbHighlighted = wptbNewTableSetup.getElementsByClassName('wptb-highlighted');\n\t\t\tfor (let i = 0; i < wptbHighlighted.length; i++) {\n\t\t\t\twptbHighlighted[i].classList.remove('wptb-highlighted');\n\t\t\t}\n\t\t\tconst wptbDirectlyhovered = wptbNewTableSetup.getElementsByClassName('wptb-directlyhovered');\n\t\t\tfor (let i = 0; i < wptbDirectlyhovered.length; i++) {\n\t\t\t\twptbDirectlyhovered[i].classList.remove('wptb-directlyhovered');\n\t\t\t}\n\t\t\tconst mceContentBodys = wptbNewTableSetup.querySelectorAll('.mce-content-body');\n\t\t\tif (mceContentBodys.length > 0) {\n\t\t\t\tfor (let k = 0; k < mceContentBodys.length; k++) {\n\t\t\t\t\tmceContentBodys[k].classList.remove('mce-content-body');\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst dataMceStyle = wptbNewTableSetup.querySelectorAll('[data-mce-style]');\n\t\t\tif (dataMceStyle.length > 0) {\n\t\t\t\tfor (let k = 0; k < dataMceStyle.length; k++) {\n\t\t\t\t\tdataMceStyle[k].removeAttribute('data-mce-style');\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst mceIds = wptbNewTableSetup.querySelectorAll('[id^=mce_]');\n\t\t\tif (mceIds.length > 0) {\n\t\t\t\tfor (let k = 0; k < mceIds.length; k++) {\n\t\t\t\t\tmceIds[k].removeAttribute('id');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet cssForTdsWidthAutoValue = '';\n\t\tconst { head } = document;\n\t\tif (head) {\n\t\t\tconst cssForTdsWidthAuto = head.querySelector('style[data-wptb-td-auto-width=\"true\"]');\n\t\t\tif (cssForTdsWidthAuto) {\n\t\t\t\tcssForTdsWidthAutoValue = cssForTdsWidthAuto.innerHTML;\n\t\t\t}\n\t\t}\n\n\t\tlet wptbTableTitle = '';\n\t\tconst wptbSetupName = document.getElementById('wptb-setup-name');\n\t\tif (wptbSetupName) wptbTableTitle = wptbSetupName.value;\n\n\t\twindow.wptbTableStateSaving.push([wptbNewTableSetup, cssForTdsWidthAutoValue, wptbTableTitle]);\n\n\t\t// set new number of state which is showed now\n\t\twindow.wptbTableStateNumberShow = window.wptbTableStateSaving.length - 1;\n\n\t\t// make undo arrow active when the table was changed\n\t\tif (window.wptbTableStateSaving.length - 1 > 0) {\n\t\t\tlet wptbUndo = document.getElementsByClassName('wptb-undo');\n\t\t\tif (wptbUndo.length > 0) {\n\t\t\t\twptbUndo = wptbUndo[0];\n\n\t\t\t\twptbUndo.classList.remove('wptb-undoredo-disabled');\n\t\t\t}\n\t\t}\n\n\t\t// make redo arrow not active when the table was changed\n\t\tlet wptbRedo = document.getElementsByClassName('wptb-redo');\n\t\tif (wptbRedo.length > 0) {\n\t\t\twptbRedo = wptbRedo[0];\n\n\t\t\twptbRedo.classList.add('wptb-undoredo-disabled');\n\t\t}\n\n\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\tif (wptbSaveBtn.length > 0) {\n\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\tif (\n\t\t\t\t(!wptbSaveBtn.dataset.wptbTableStateNumberSave && window.wptbTableStateNumberShow == 0) ||\n\t\t\t\twindow.wptbTableStateNumberShow == wptbSaveBtn.dataset.wptbTableStateNumberSave ||\n\t\t\t\t!wptbPreviewTable\n\t\t\t) {\n\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t} else {\n\t\t\t\twptbSaveBtn.classList.remove('wptb-save-disabled');\n\t\t\t\twptbSaveBtn.classList.add('active');\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.tableStateGet = (datawptbUndoredo) => {\n\t\tif (datawptbUndoredo && window.wptbTableStateSaving && window.wptbTableStateSaving.length > 0) {\n\t\t\t// changes the number of the state which displays now\n\t\t\tif (datawptbUndoredo == 'undo') {\n\t\t\t\tif (window.wptbTableStateNumberShow > 0) {\n\t\t\t\t\twindow.wptbTableStateNumberShow--;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (datawptbUndoredo == 'redo') {\n\t\t\t\tif (window.wptbTableStateNumberShow < window.wptbTableStateSaving.length) {\n\t\t\t\t\twindow.wptbTableStateNumberShow++;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add or delete class \"wptb-undoredo-disabled\" for undo button\n\t\t\tlet wptbUndo = document.getElementsByClassName('wptb-undo');\n\t\t\tif (wptbUndo.length > 0) {\n\t\t\t\twptbUndo = wptbUndo[0];\n\n\t\t\t\tif (window.wptbTableStateNumberShow == 0) {\n\t\t\t\t\tif (wptbUndo) {\n\t\t\t\t\t\twptbUndo.classList.add('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t} else if (window.wptbTableStateNumberShow > 0) {\n\t\t\t\t\tif (wptbUndo) {\n\t\t\t\t\t\twptbUndo.classList.remove('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add or delete class \"wptb-undoredo-disabled\" for redo button\n\t\t\tlet wptbRedo = document.getElementsByClassName('wptb-redo');\n\t\t\tif (wptbRedo.length > 0) {\n\t\t\t\twptbRedo = wptbRedo[0];\n\n\t\t\t\tif (window.wptbTableStateNumberShow == window.wptbTableStateSaving.length - 1) {\n\t\t\t\t\tif (wptbRedo) {\n\t\t\t\t\t\twptbRedo.classList.add('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t} else if (window.wptbTableStateNumberShow < window.wptbTableStateSaving.length - 1) {\n\t\t\t\t\tif (wptbRedo) {\n\t\t\t\t\t\twptbRedo.classList.remove('wptb-undoredo-disabled');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add or delete class \"wptb-save-disabled\" for save button\n\t\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\t\tif (wptbSaveBtn.length > 0) {\n\t\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\t\t\t\tif (\n\t\t\t\t\t(!wptbSaveBtn.dataset.wptbTableStateNumberSave && window.wptbTableStateNumberShow == 0) ||\n\t\t\t\t\twindow.wptbTableStateNumberShow == wptbSaveBtn.dataset.wptbTableStateNumberSave\n\t\t\t\t) {\n\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t} else {\n\t\t\t\t\twptbSaveBtn.classList.add('active');\n\t\t\t\t\twptbSaveBtn.classList.remove('wptb-save-disabled');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// load necessary saved table state\n\t\t\tlet wptbTableSetup = document.getElementsByClassName('wptb-table-setup');\n\t\t\tif (wptbTableSetup.length > 0) {\n\t\t\t\twptbTableSetup = wptbTableSetup[0];\n\n\t\t\t\t// wptbTableSetup.outerHTML = '';\n\t\t\t\tif (window.wptbTableStateSaving[window.wptbTableStateNumberShow]) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twindow.wptbTableStateSaving[window.wptbTableStateNumberShow][0] &&\n\t\t\t\t\t\ttypeof window.wptbTableStateSaving[window.wptbTableStateNumberShow][0] === 'object'\n\t\t\t\t\t) {\n\t\t\t\t\t\tif ('outerHTML' in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]) {\n\t\t\t\t\t\t\twptbTableSetup.outerHTML =\n\t\t\t\t\t\t\t\twindow.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wptbTableSetupNew = document.querySelector('.wptb-table-setup');\n\t\t\t\t\tif (wptbTableSetupNew && wptbTableSetupNew.children.length == 0) {\n\t\t\t\t\t\t// document.getElementsByClassName('wptb-table-generator')[0].style.display = 'table';\n\t\t\t\t\t\twptbSaveBtn.classList.add('wptb-save-disabled');\n\t\t\t\t\t\twptbSaveBtn.classList.remove('active');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\t// add or change or delete style element in the head for table cells who have auto width\n\t\t\t\t\tconst { head } = document;\n\t\t\t\t\tif (head) {\n\t\t\t\t\t\tconst cssForTdsWidthAutoOld = head.querySelector('style[data-wptb-td-auto-width=\"true\"]');\n\t\t\t\t\t\tif (cssForTdsWidthAutoOld) {\n\t\t\t\t\t\t\thead.removeChild(cssForTdsWidthAutoOld);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]) {\n\t\t\t\t\t\t\tconst cssForTdsWidthAuto = document.createElement('style');\n\t\t\t\t\t\t\tcssForTdsWidthAuto.setAttribute('data-wptb-td-auto-width', true);\n\t\t\t\t\t\t\tcssForTdsWidthAuto.innerHTML =\n\t\t\t\t\t\t\t\twindow.wptbTableStateSaving[window.wptbTableStateNumberShow][1];\n\t\t\t\t\t\t\thead.appendChild(cssForTdsWidthAuto);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// change value of table title field\n\t\t\t\t\tconst wptbSetupName = document.getElementById('wptb-setup-name');\n\t\t\t\t\tif (typeof window.wptbTableStateSaving[window.wptbTableStateNumberShow][2] !== 'undefined') {\n\t\t\t\t\t\tif (wptbSetupName)\n\t\t\t\t\t\t\twptbSetupName.value = window.wptbTableStateSaving[window.wptbTableStateNumberShow][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet body = document.getElementsByTagName('body');\n\t\t\t\tif (body.length > 0) {\n\t\t\t\t\tbody = body[0];\n\t\t\t\t}\n\n\t\t\t\tWPTB_Helper.elementOptionsPanelClear();\n\t\t\t\tWPTB_LeftPanel();\n\n\t\t\t\tconst wptbLeftScrollPanelCellSetting = document.getElementById('wptb-left-scroll-panel-cell-settings');\n\t\t\t\tif (wptbLeftScrollPanelCellSetting) {\n\t\t\t\t\twptbLeftScrollPanelCellSetting.classList.remove('visible');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.tableStateClear = function () {\n\t\tdelete window.wptbTableStateSaving;\n\t\tdelete window.wptbTableStateNumberShow;\n\n\t\tlet wptbSaveBtn = document.getElementsByClassName('wptb-save-btn');\n\t\tif (wptbSaveBtn.length > 0) {\n\t\t\twptbSaveBtn = wptbSaveBtn[0];\n\n\t\t\twptbSaveBtn.removeAttribute('data-wptb-table-state-number-save');\n\t\t}\n\n\t\tlet wptbUndo = document.getElementsByClassName('wptb-undo');\n\t\tif (wptbUndo.length > 0) {\n\t\t\twptbUndo = wptbUndo[0];\n\n\t\t\twptbUndo.classList.add('wptb-undoredo-disabled');\n\t\t}\n\n\t\tlet wptbRedo = document.getElementsByClassName('wptb-redo');\n\t\tif (wptbRedo.length > 0) {\n\t\t\twptbRedo = wptbRedo[0];\n\n\t\t\twptbRedo.classList.add('wptb-undoredo-disabled');\n\t\t}\n\t};\n};\n","/**\n * Add upsell related scripts.\n */\n(function upsellsHooks() {\n\t// add pro upsells to dummy pro table elements container\n\tif (wptb_admin_object.upsells && !wptb_admin_object.upsells.pro) {\n\t\tconst dummyWrapper = document.querySelector('.wptb-panel-toggle-group[id=\"pro\"] .wptb-panel-toggle-target');\n\n\t\tconst upsellContainer = document.createElement('div');\n\t\tupsellContainer.classList.add('wptb-upsells-pro-overlay');\n\n\t\tupsellContainer.innerHTML = wptb_admin_object.upsells.elements.leftPanel;\n\n\t\tdummyWrapper.style.position = 'relative';\n\t\tdummyWrapper.appendChild(upsellContainer);\n\t}\n})();\n","var WPTB_innerElementSet = function  ( element ) {\n    \n    element.ondragenter = function (e) {\n        var div;\n        if ( e.dataTransfer.types.indexOf( 'wptbelement' ) == -1 && e.dataTransfer.types.indexOf( 'wptb-moving-mode' ) == -1 ) {\n            return;\n        }\n        WPTB_DropHandle(this, e);\n        \n        element.classList.add( 'wptb-ondragenter' );\n    }\n    element.ondragover = function (e) {\n        e.preventDefault();\n        WPTB_DropHandle(this, e);\n    }\n    element.ondragleave = function (e) {\n        WPTB_DropHandle(this, e, true);\n\n    }\n    element.ondrop = function(e) {\n        this.classList.remove( 'wptb-ondragenter' );\n        let element, classId;\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!e.dataTransfer.getData('wptbElement') && !e.dataTransfer.getData('node')) {\n            return;\n        }\n        let wptbDropHandle,\n            wptbDropBorderMarker;\n        if ( document.getElementsByClassName( 'wptb-drop-handle' ).length > 0 ) {\n            wptbDropHandle = document.getElementsByClassName( 'wptb-drop-handle' )[0];\n        }\n        if( document.getElementsByClassName( 'wptb-drop-border-marker' ).length > 0 ) {\n            wptbDropBorderMarker = document.getElementsByClassName( 'wptb-drop-border-marker' )[0];\n        }\n\n        if ( e.dataTransfer.getData( 'wptbElement' ) ) {\n            element = WPTB_Helper.newElementProxy( e.dataTransfer.getData( 'wptbElement' ) );\n            element = element.getDOMElement();\n        } else {\n            classId = e.dataTransfer.getData( 'node' );\n            element = document.getElementsByClassName( classId )[0];\n            //element.classList.remove( 'wptb-moving-mode' );\n        }\n\n        if(WPTB_Helper.getDragRelativeType() === 'td_relative'){\n            WPTB_DropHandle(this, e, true);\n            const parentCell = WPTB_Helper.getParentOfType('td', e.target);\n\n            parentCell.appendChild(element);\n            WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n\n        }else if( wptbDropHandle.style.display == 'block' ) {\n            let td;\n            if( wptbDropHandle.dataset.text == 'Drop Here' ) {\n                td = wptbDropHandle.getDOMParentElement();\n                td.appendChild( element );\n                WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n            } else {\n                let innerElement = wptbDropHandle.getDOMParentElement();\n                td = innerElement.parentNode;\n\n                if( wptbDropHandle.dataset.text == 'Above Element' ) {\n                    td.insertBefore( element, innerElement );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                } else if( wptbDropHandle.dataset.text == 'Below Element' ) {\n                    let innerElementNext = innerElement.nextSibling;\n                    td.insertBefore( element, innerElementNext );\n                    WPTB_Helper.wptbDocumentEventGenerate('element:mounted:dom', element);\n                }\n            }\n            \n            let thisRow = td.parentNode;\n            if( WPTB_Helper.rowIsTop( thisRow ) ) { \n                let table = WPTB_Helper.findAncestor( thisRow, 'wptb-preview-table' );\n                \n                if( table.classList.contains( 'wptb-table-preview-head' ) ) {\n                    WPTB_Helper.dataTitleColumnSet( table );\n                }\n            }\n            \n            // start item javascript if item is new\n            let infArr = element.className.match(/wptb-element-(.+)-(\\d+)/i);\n            let elemKind = infArr[1];\n            if ( e.dataTransfer.getData( 'wptbElement' ) && ( elemKind == 'text' || elemKind == 'button' || elemKind == 'image' || elemKind == 'star_rating' || elemKind == 'list' ) ) {\n                //WPTB_Helper.elementStartScript( element );\n            }\n        } else {\n            return;\n        }\n\n        if(wptbDropHandle){\n            wptbDropHandle.style.display = 'none';\n            wptbDropBorderMarker.style.display = 'none';\n        }\n\n        WPTB_innerElementSet( element );\n        \n        if( ! element.classList.contains( 'wptb-image-container' ) || element.classList.contains( 'wptb-moving-mode' ) ) {\n            element.classList.remove( 'wptb-moving-mode' );\n            let wptbTableStateSaveManager = new WPTB_TableStateSaveManager();\n            wptbTableStateSaveManager.tableStateSet();\n        } \n        return true;\n    }\n    element.onmouseover = function(e) {\n        element.classList.remove( 'wptb-ondragenter' );\n    }\n}","var applyGenericItemSettings = function ( element, kindIndexProt, copy = false ) {\n    var node = element.getDOMElement(),\n        index,\n        copy;\n    if( node.classList.contains( 'wptb-ph-element' ) ) {\n        if ( kindIndexProt == undefined || copy == true ) {\n            //index = document.counter.nextIndex( element.kind );\n            // @deprecated\n            // let wptbElements = document.getElementsByClassName( 'wptb-ph-element' );\n            // let elementIndexesArr = [];\n            // for( let i = 0; i < wptbElements.length; i++ ) {\n            //     var regex = new RegExp( 'wptb-element-' + element.kind + '-(\\\\d+)', \"i\" );\n            //     let infArr = wptbElements[i].className.match( regex );\n            //     if( infArr ) {\n            //         elementIndexesArr.push( infArr[1] );\n            //     }\n            // }\n            // if( elementIndexesArr.length > 0 ) {\n            //     let elementIndexMax = Math.max( ...elementIndexesArr );\n            //     index = elementIndexMax + 1;\n            // } else {\n            //     index = 1;\n            // }\n\n            // get an id for table element\n            index = WPTB_ElementIdProvider.getNewId(element.kind);\n\n            if( copy ) {\n                // change all data-elements which save parameters for different controls\n                let wptbNodeattributes = [...node.attributes];\n                for( let i = 0; i < wptbNodeattributes.length; i++ ) {\n                    if( wptbNodeattributes[i] && typeof wptbNodeattributes[i] === 'object' && wptbNodeattributes[i].nodeName ) {\n                        let regularText = new RegExp( 'data-wptb-el-' + element.kind + '-(\\\\d+)-([a-zA-Z0-9_-]+)', \"i\" );\n                        let attr = wptbNodeattributes[i].nodeName.match( regularText );\n                        if( attr && Array.isArray( attr ) ) {\n                            let newDataAttributeName = wptbNodeattributes[i].nodeName.replace( element.kind + '-' + attr[1], element.kind + '-' + index );\n                            let newDataAttributeValue = wptbNodeattributes[i].nodeValue;\n                            node.removeAttribute( wptbNodeattributes[i].nodeName );\n                            node.setAttribute( newDataAttributeName, newDataAttributeValue );\n                        }\n                    }\n                }\n            }\n        } else if ( kindIndexProt && ! copy ) {\n            let kindIndexProtArr = kindIndexProt.split('-');\n            index = kindIndexProtArr[kindIndexProtArr.length - 1];\n            // start element javascript if element is new\n            \n        }\n\n        let node_wptb_element_kind_num = node.className.match(/wptb-element-(.+)-(\\d+)/i);\n        if ( node_wptb_element_kind_num ) {\n            node.classList.remove( node_wptb_element_kind_num[0] );\n        }\n        if ( ! node.classList.contains( 'wptb-ph-element' ) ) {\n            node.classList.add( 'wptb-ph-element' );\n            if( ! node.classList.contains( 'wptb-element-' + element.kind + '-' + index ) ) {\n                node.classList.add( 'wptb-element-' + element.kind + '-' + index );\n            }\n        } else {\n            if( ! node.classList.contains( 'wptb-element-' + element.kind + '-' + index ) ) {\n                node.classList.add( 'wptb-element-' + element.kind + '-' + index );\n            }\n        }\n        WPTB_Helper.elementStartScript( element.getDOMElement() );\n        new WPTB_ElementOptions( element, index, kindIndexProt );\n        document.counter.increment(element.kind);\n    }\n    \n    node.onmouseenter = function ( event ) {\n        \n        if (event.target.classList.contains( 'wptb-text-container' )) {\n            if (node.children.length === 1) {\n                let elemChild = node.children[0].lastChild;\n                \n                if (elemChild.children.length === 1) {\n                    if (elemChild.innerHTML === '<br>') {\n                        elemChild.innerHTML = '';\n                    }\n                }\n            }\n        }\n        \n        if( event.target.classList.contains( 'wptb-moving-mode' ) ) {\n            return;\n        }\n        \n        let wptbActionsField = new WPTB_ActionsField();\n        \n        wptbActionsField.addActionField( 1, node );\n        \n        wptbActionsField.setParameters( node );\n        \n        node.classList.remove( 'wptb-ondragenter' );\n    };\n    \n    node.onmouseleave = function ( event ) {\n        let wptbActionsField = new WPTB_ActionsField();\n        \n        wptbActionsField.leaveFromField( event, node );\n    };\n};","/**\n * Assign icon manager to global space.\n *\n * @param {string} key global key\n * @param {Object} context global context\n * @param {Function} factory factory function\n */\n(function assignToGlobal(key, context, factory) {\n\t// eslint-disable-next-line no-param-reassign\n\tcontext[key] = factory();\n\t// eslint-disable-next-line no-restricted-globals\n})('WPTB_IconManager', self || global, function iconManager() {\n\t/**\n\t * Frontend icon manager for WPTB builder.\n\t *\n\t * @param {Object} list all icon list\n\t * @class\n\t */\n\tfunction IconManager(list) {\n\t\tif (!list) {\n\t\t\tthrow new Error('no icon list is defined for WPTB_IconManager instance');\n\t\t}\n\t\tconst iconList = list;\n\n\t\t/**\n\t\t * Cached icons.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst cachedIcons = {};\n\n\t\t/**\n\t\t * Prepare an icon with a wrapper.\n\t\t *\n\t\t * @param {string} iconSvgString string representation of icon\n\t\t * @param {Array | string | null} extraClass name of extra class[es] to apply to icon wrapper\n\t\t * @param {boolean} stringifiedVersion get stringified html version of icon\n\t\t * @return {HTMLDivElement} created icon wrapper\n\t\t */\n\t\tconst prepareIcon = (iconSvgString, extraClass = null, stringifiedVersion = false) => {\n\t\t\tconst iconWrapper = document.createElement('div');\n\n\t\t\t// if an extra class is defined, add it to icon wrapper\n\t\t\tif (extraClass) {\n\t\t\t\tif (!Array.isArray(extraClass)) {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\textraClass = [extraClass];\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line array-callback-return\n\t\t\t\textraClass.map((eClass) => {\n\t\t\t\t\ticonWrapper.classList.add(eClass);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ticonWrapper.innerHTML = iconSvgString;\n\n\t\t\treturn stringifiedVersion ? iconWrapper.outerHTML : iconWrapper;\n\t\t};\n\n\t\t/**\n\t\t * Get a cached icon.\n\t\t *\n\t\t * @param {string} iconName name of the icon\n\t\t * @param {string | Array | null} extraClass extra class name[s] to add to icon wrapper\n\t\t * @param {boolean | null} getStringifiedVersion get stringified version of the icon\n\t\t * @return {null | Element} Prepared cached icon or null if no cached version is found\n\t\t */\n\t\tconst getCachedIcon = (iconName, extraClass = null, getStringifiedVersion = false) => {\n\t\t\tif (cachedIcons[iconName]) {\n\t\t\t\treturn prepareIcon(cachedIcons[iconName], extraClass, getStringifiedVersion);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n\t\t * Add an icon to cache.\n\t\t *\n\t\t * @param {string} iconName name of the icon to be stored\n\t\t * @param {string} stringifiedIcon stringified version of the icon\n\t\t */\n\t\tconst addToCache = (iconName, stringifiedIcon) => {\n\t\t\tcachedIcons[iconName] = stringifiedIcon;\n\t\t};\n\n\t\t/**\n\t\t * Get a list of all available icons.\n\t\t *\n\t\t * @return {Object} icon list\n\t\t */\n\t\tthis.getIconList = () => {\n\t\t\treturn iconList;\n\t\t};\n\n\t\t/**\n\t\t * Get an icon.\n\t\t *\n\t\t * Icons sent with this function are wrapped with a 'div' element.\n\t\t *\n\t\t * @param {string} iconName name of the icon\n\t\t * @param {string | Array | null} extraClass extra class[es] to add to icon wrapper\n\t\t * @param {boolean} getStringifiedVersion get stringified version of icon\n\t\t * @return {Promise<void>} a Promise that will be resolved when icon is fetched from server\n\t\t */\n\t\tthis.getIcon = (iconName, extraClass = null, getStringifiedVersion = false) => {\n\t\t\t// eslint-disable-next-line consistent-return\n\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t// if cached version is found, return that version\n\t\t\t\tconst cachedIcon = getCachedIcon(iconName, extraClass, getStringifiedVersion);\n\t\t\t\tif (cachedIcon) {\n\t\t\t\t\treturn res(cachedIcon);\n\t\t\t\t}\n\n\t\t\t\tif (iconList[iconName]) {\n\t\t\t\t\treturn fetch(iconList[iconName])\n\t\t\t\t\t\t.then((resp) => {\n\t\t\t\t\t\t\tif (resp.ok) {\n\t\t\t\t\t\t\t\treturn resp.text();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow new Error(`an error occurred while fetching icon [${iconName}]`);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((iconString) => {\n\t\t\t\t\t\t\tif (iconString.error) {\n\t\t\t\t\t\t\t\tthrow new Error(`an error occurred while fetching icon [${iconName}]`);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// add icon to cache\n\t\t\t\t\t\t\taddToCache(iconName, iconString);\n\n\t\t\t\t\t\t\treturn res(prepareIcon(iconString, extraClass, getStringifiedVersion));\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\treturn rej(new Error(err));\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn rej(new Error(`no icon found with the given name of [${iconName}]`));\n\t\t\t});\n\t\t};\n\t\tthis.getIconUrl = (iconName) => {\n\t\t\tlet iconUrl = null;\n\n\t\t\tif (iconList[iconName]) {\n\t\t\t\ticonUrl = iconList[iconName];\n\t\t\t}\n\n\t\t\treturn iconUrl;\n\t\t};\n\t}\n\n\t// eslint-disable-next-line no-restricted-globals\n\tconst context = self || global;\n\tif (context.wptb_admin_object) {\n\t\treturn new IconManager(wptb_admin_object.iconManager);\n\t}\n\n\treturn null;\n});\n"]}