{"version":3,"sources":["WPTB_Builder.js","WPTB_Button.js","WPTB_Cell.js","WPTB_ElementCounters.js","WPTB_ElementOptions.js","WPTB_Image.js","WPTB_Initializer.js","WPTB_LeftPanel.js","WPTB_List.js","WPTB_ListItem.js","WPTB_Settings.js","WPTB_Table.js","WPTB_Text.js","applyGenericItemSettings.js","wptb-builder.js"],"names":["WPTB_Builder","document","counter","ElementCounters","initializer","WPTB_Initializer","settings","WPTB_Settings","addEventListener","WPTB_Button","text","DOMElement","createElement","elButton2","el_B","kind","classList","add","innerHTML","undefined","appendChild","getDOMElement","applyGenericItemSettings","WPTB_Cell","newElementProxy","el","WPTB_List","WPTB_Image","WPTB_Text","onclick","relativeActions","cells","window","_wptbManagementModeActive","contains","remove","getElementsByClassName","getElementsByTagName","i","length","console","log","dataset","activeCell","ondragenter","div","ondragover","e","preventDefault","ondragleave","ondrop","element","classId","dataTransfer","getData","onmousedown","onmouseover","onmouseup","setCoords","y","x","yIndex","xIndex","getCoords","coords","appendElement","node","priv","increment","key","nextIndex","WPTB_ElementOptions","index","elemIdClass","prop","querySelector","cloneNode","properties","getElementById","infArr","className","match","optionsClass","style","display","children","childNodes","optionControls","jQuery","wpColorPicker","change","event","ui","parent","target","classe","type","ps","number","affectedEl","color","toString","slider","parentNode","oninput","value","onchange","n_Class","num","val","img","src","alt","width","height","fontSize","bullets","querySelectorAll","listStyleType","toLowerCase","file_frame","wp","media","frames","title","button","multiple","on","attachment","state","get","first","toJSON","url","open","MIN_COLUMNS","MIN_ROWS","MAX_COLUMNS","MAX_ROWS","tableGenerator","body","columnsDecrementButton","columnsIncrementButton","rowsDecrementButton","rowsIncrementButton","columnsInput","rowsInput","columns","rows","WPTB_Table","WPTB_LeftPanel","table","wptbElementButtons","tableRows","tds","j","backgroundColor","tableHeader","addInnerBorderSize","tableCells","border","addCellPadding","padding","addInnerBorder","checked","styles","marginBottom","addBorderSize","_val","ondragstart","setData","wptbElement","addRowToTheEnd","addRowToTheStart","addRowBefore","addRowAfter","addColumnToTheEnd","addColumnToTheStart","addColumnBefore","addColumnAfter","innerElements","el_L","item","WPTB_ListItem","divdot","divcontent","libullet","onkeyup","listItemKeyListener","onmouseenter","btnDelete","btnCopy","actions","previous","removeChild","article","content","html","duplicate","append","onmouseleave","onkeydown","which","keyCode","lastP","dontAddItems","nextSibling","insertBefore","focus","trim","elems","effectAllowed","getAttribute","wptbTableSetup","row","cell","insertRow","recalculateIndexes","trs","addColumn","pos","referenceTd","newTd","_this","buttons","evt","addRow","referenceRow","params","tbody","active","elText2","elP","listItems","btnMove","draggable","act","setDragImage","tinyMCE","init","inline","plugins","dialog_type","theme","menubar","fixed_toolbar_container","toolbar","setup","ed","execCommand","init_instance_callback","editor","getContent","setContent","range","selection","getRng","KeyID","startOffset","currentEditor","totalWidth","offsetWidth","scrollTop","bodyElement","position","right","top","paste_as_text","formerActions","par"],"mappings":"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","file":"admin.js","sourcesContent":["(function(){  \n\t\n\tvar WPTB_Builder = function(){ \n\t\tdocument.counter = new ElementCounters();\n\n\t\tvar initializer = WPTB_Initializer();\n\t\t\tsettings = WPTB_Settings();\n\t};\n\n\tdocument.addEventListener('DOMContentLoaded', WPTB_Builder); \n})();","var WPTB_Button = function(text){\n        var DOMElement = document.createElement('div'),\n        \telButton2 = document.createElement('div'),\n        \tel_B = document.createElement('p');\n\n\t\tthis.kind = 'button';\n\n        DOMElement.classList.add('wptb-button-container');\n        elButton2.classList.add('wptb-button-wrapper');\n        el_B.classList.add('wptb-button');\n        el_B.classList.add('editable');\n        el_B.innerHTML = text != undefined ? text : 'Button Text';\n        elButton2.appendChild(el_B);\n        DOMElement.appendChild(elButton2);\n\n        this.getDOMElement = function (){ \n        \treturn DOMElement;\n        }\n\n        applyGenericItemSettings(this);\n\n        return this;\n};","var WPTB_Cell = function (DOMElement) {\n\n    function newElementProxy(el) {\n        if (el == 'list') {\n            return new WPTB_List();\n        }\n        else if (el == 'image') {\n            return new WPTB_Image();\n        }\n        else if (el == 'text') {\n            return new WPTB_Text();\n        }\n        else if (el == 'button') {\n            return new WPTB_Button();\n        }\n    }\n\n    DOMElement = document.createElement(\"td\");\n\n    DOMElement.classList.add('wptb-droppable', 'wptb-cell');\n\n    DOMElement.onclick = function () {\n\n        var relativeActions, cells;\n\n        if (window._wptbManagementModeActive) {\n            return;\n        }\n        if (this.classList.contains('wptb-highlighted')) {\n            this.classList.remove('wptb-highlighted');\n        }\n        else {\n            relativeActions = document.getElementsByClassName('wptb-relative-action');\n            cells = document.getElementsByTagName('td');\n\n            for (var i = 0; i < relativeActions.length; i++) {\n                console.log(relativeActions[i]);\n                relativeActions[i].dataset.activeCell = this;\n            }\n\n            for (var i = 0; i < cells.length; i++) {\n                cells[i].classList.remove('wptb-highlighted');\n            }\n\n            this.classList.add('wptb-highlighted');\n\n        }\n\n    };\n\n    DOMElement.ondragenter = function () {\n        var div;\n        this.classList.add('wptb-drop-here-empty');\n    }\n\n    DOMElement.ondragover = function (e) {\n        e.preventDefault();\n    }\n\n    DOMElement.ondragleave = function () {\n        this.classList.remove('wptb-drop-here-empty');\n\n    }\n\n    DOMElement.ondrop = function (e) {\n        var element, classId;\n        e.preventDefault();\n        if (e.dataTransfer.getData('wptbElement')) {\n            element = newElementProxy(e.dataTransfer.getData('wptbElement'));\n            this.appendChild(element.getDOMElement());\n        }\n        else {\n            classId = e.dataTransfer.getData('node');\n            element = document.getElementsByClassName(classId)[0];\n            this.appendChild(element);\n        }\n        this.classList.remove('wptb-drop-here-empty');\n        return true;\n    }\n\n    DOMElement.onmousedown = function () {\n\n    };\n\n    DOMElement.onmouseover = function () {\n\n    };\n\n    DOMElement.onmouseup = function () {\n\n    };\n\n    this.getDOMElement = function () {\n        return DOMElement;\n    }\n\n    this.setCoords = function (y, x) {\n        var el = this.getDOMElement();\n        el.dataset.yIndex = y;\n        el.dataset.xIndex = x;\n    }\n\n    this.getCoords = function () {\n        var coords,\n            el = this.getDOMElement();\n        coords.x = el.dataset.xIndex;\n        coords.y = el.dataset.yIndex;\n        return coords;\n    }\n\n    this.appendElement = function (node) {\n        getDOMElement().appendChild(node);\n    }\n\n    return this;\n\n};","var ElementCounters = function(){\n\tvar priv = [];\n\tpriv['text'] = 0;\n\tpriv['image'] = 0;\n\tpriv['list'] = 0;\n\tpriv['button'] = 0; \n\n\tthis.increment = function(key){\n\n\t\tif(! (key in priv) ){\n\t\t\treturn;\n\t\t}\n\n\t\tpriv[key]++;\n\t}\n\tthis.nextIndex = function(key){\n\n\t\tif(! (key in priv) ){\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn priv[key] + 1;\n\t}\n\treturn this;\n};","var WPTB_ElementOptions = function (element, index) {\n\n    var node = element.getDOMElement(), elemIdClass;\n\n    prop = document.querySelector(\".wptb-\" + element.kind + \"-options-prototype\").cloneNode(true);\n    prop.classList.remove(\"wptb-\" + element.kind + \"-options-prototype\"); // remove prototype from the class\n    elemIdClass = 'wptb-options-' + element.kind + \"-\" + index;\n\n    var properties = prop.getElementsByClassName('wptb-element-property');\n\n    for (var i = 0; i < properties.length; i++) {\n        properties[i].dataset.element = elemIdClass;\n    }\n\n    prop.classList.add(elemIdClass);\n    document.getElementById(\"element-options-group\").appendChild(prop);\n\n    node.onclick = function () {\n        var infArr = this.className.match(/wptb-element-((.+-)\\d+)/i),\n            optionsClass = '.wptb-' + infArr[2] + 'options' +\n                '.wptb-options-' + infArr[1];\n\n        document.getElementById('add-elements').getElementsByTagName('a')[0].classList.remove('active');\n        document.getElementById('element-options').getElementsByTagName('a')[0].classList.add('active');\n\n        document.getElementsByClassName('wptb-elements-container')[0].style.display = 'none';\n        document.getElementsByClassName('wptb-settings-section')[0].style.display = 'none';\n        document.getElementById(\"element-options-group\").style.display = 'block';\n\n        var children = document.getElementById(\"element-options-group\").childNodes;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].style)\n                children[i].style.display = 'none';\n        }\n\n        document.querySelector(optionsClass).style.display = 'block';\n    };\n\n    var optionControls = prop.getElementsByClassName('wptb-element-property');\n    console.log(optionControls);\n    for (var i = 0; i < optionControls.length; i++) {\n        if (optionControls[i].classList.contains('wptb-color-picker')) {\n            jQuery(optionControls[i]).wpColorPicker({\n                change: function (event, ui) {\n                    var parent = event.target, classe, type, ps, number;\n\n\n\n                    classe = parent.dataset.element.match(/wptb-options-(.+)-(\\d+)/i);\n                    type = classe[1];\n                    number = classe[2];\n                    console.log('Element', 'wptb-element-' + type + '-' + number);\n                    affectedEl = document.getElementsByClassName('wptb-element-' + type + '-' + number)[0];\n                    ps = affectedEl.getElementsByTagName(\"p\");\n                    for (var i = 0; i < ps.length; i++) {\n                        ps[i].style.color = ui.color.toString();\n                    }\n                }\n            });\n        }\n\n        if (optionControls[i].dataset.type === 'font-size') {\n            var slider = optionControls[i].parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0];\n            slider.oninput = function () {\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].value = this.value;\n                this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-number')[0].onchange();\n            }\n        }\n\n        optionControls[i].onchange = function (event) {\n\n            var n_Class = this.dataset.element,\n                infArr = n_Class.match(/wptb-options-(.+)-(\\d+)/i),\n                type = infArr[1],\n                num = infArr[2],\n                affectedEl = document.getElementsByClassName('wptb-element-' + type + '-' + num)[0],\n                val = this.value;\n\n            switch (this.dataset.type) {\n                case 'src':\n                    var img = affectedEl.getElementsByTagName(\"img\");\n                    img.src = this.value;\n                    break;\n                    break;\n                case 'alternative-text':\n                    var img = affectedEl.getElementsByTagName(\"img\");\n                    img.alt = this.value;\n                    break;\n                case 'image-width':\n                    var img = affectedEl.getElementsByTagName(\"img\");\n                    img.width = this.value + 'px';\n                    break;\n                    break;\n                case 'image-height':\n                    var img = affectedEl.getElementsByTagName(\"img\");\n                    img.height = this.value + 'px';\n                    break;\n                    break;\n                case 'font-size':\n                    var ps = affectedEl.getElementsByTagName(\"p\");\n                    for (var i = 0; i < ps.length; i++) {\n                        ps[i].style.fontSize = val + 'px';\n                    }\n\n                    this.parentNode.parentNode.getElementsByClassName('wptb-text-font-size-slider')[0].value = this.value;\n\n                    break;\n                case 'color':\n                    var ps = affectedEl.getElementsByTagName(\"p\");\n                    for (var i = 0; i < ps.length; i++) {\n                        ps[i].style.color = val;\n                    }\n                    break;\n                case 'list-class':\n                    if (val == 'unordered') {\n                        affectedEl.querySelector('[data-type=list-style-type]').parentNode.style.display = 'flex';\n                        var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\n                        for (var i = 0; i < bullets.length; i++) {\n                            bullets[i].style.listStyleType = 'disc';\n                        }\n                        document.querySelector('[data-type=list-style-type]').value = 'disc';\n                    } else {\n                        affectedEl.querySelector('[data-type=list-style-type]').parentNode.style.display = 'none';\n                        var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\n                        for (var i = 0; i < bullets.length; i++) {\n                            bullets[i].style.listStyleType = 'decimal';\n                        }\n                    }\n                    break;\n                case 'list-style-type':\n                    var bullets = element.querySelectorAll('article .wptb-list-item-style-dot li');\n                    for (var i = 0; i < bullets.length; i++) {\n                        bullets[i].style.listStyleType = val.toLowerCase();\n                    }\n                    break;\n            }\n        };\n    }\n};","var WPTB_Image = function (text) {\n\tvar DOMElement = document.createElement('div'),\n\t\timg = document.createElement('img');\n\n\tthis.kind = 'image';\n\n\tDOMElement.appendChild(img);\n\n\tthis.getDOMElement = function () {\n\t\treturn DOMElement;\n\t}\n\tapplyGenericItemSettings(this);\n\n\tfile_frame = wp.media.frames.file_frame = wp.media({\n\t\ttitle: 'Select a image to upload',\n\t\tbutton: {\n\t\t\ttext: 'Use this image',\n\t\t},\n\t\tmultiple: false\n\t});\n\n\t// When an image is selected, run a callback.\n\tfile_frame.on('select', function () {\n\t\tattachment = file_frame.state().get('selection').first().toJSON();\n\t\timg.src = attachment.url;\n\t});\n\n\t// Finally, open the modal\n\tfile_frame.open();\n\n\treturn this;\n\n};","var WPTB_Initializer = function () {\n\tconst MIN_COLUMNS = 1,\n\t\tMIN_ROWS = 1,\n\t\tMAX_COLUMNS = 10,\n\t\tMAX_ROWS = 10;\n\n\tvar tableGenerator = document.body;\n\tcolumnsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[0],\n\t\tcolumnsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[0],\n\t\trowsDecrementButton = tableGenerator.getElementsByClassName('wptb-input-number-decrement')[1],\n\t\trowsIncrementButton = tableGenerator.getElementsByClassName('wptb-input-number-increment')[1],\n\t\tcolumnsInput = document.getElementById('wptb-columns-number'),\n\t\trowsInput = document.getElementById('wptb-rows-number');\n\n\n\tcolumnsDecrementButton.onclick = function () {\n\t\tif (columnsInput.value > MIN_COLUMNS) {\n\t\t\tcolumnsInput.value--;\n\t\t}\n\t};\n\n\tcolumnsIncrementButton.onclick = function () {\n\t\tif (columnsInput.value < MAX_COLUMNS) {\n\t\t\tcolumnsInput.value++;\n\t\t}\n\t};\n\n\trowsDecrementButton.onclick = function () {\n\t\tif (rowsInput.value > MIN_ROWS) {\n\t\t\trowsInput.value--;\n\t\t}\n\t};\n\n\trowsIncrementButton.onclick = function () {\n\t\tif (rowsInput.value < MAX_ROWS) {\n\t\t\trowsInput.value++;\n\t\t}\n\t};\n\n\tdocument.getElementById('wptb-generate-table').onclick = function () {\n\n\t\tvar columns = document.getElementById('wptb-columns-number').value,\n\t\t\trows = document.getElementById('wptb-rows-number').value;\n\n\t\tWPTB_Table(columns, rows);\n\t}\n\n};","var WPTB_LeftPanel = function () {\n\n\tvar table = document.getElementsByClassName('wptb-preview-table')[0],\n\t\twptbElementButtons = document.getElementsByClassName('wptb-element');\n\n\tjQuery('#wptb-even-row-bg').wpColorPicker({\n\t\tchange: function (event, ui) {\n\t\t\tvar tableRows = table.getElementsByTagName('tr');\n\t\t\tfor (var i = 1; i < tableRows.length; i += 2) {\n\t\t\t\ttds = tableRows[i].getElementsByTagName('td');\n\t\t\t\tfor (var j = 0; j < tds.length; j++) {\n\t\t\t\t\ttds[j].style.backgroundColor = ui.color.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}); //3MNRVA96 \n\n\tjQuery('#wptb-odd-row-bg').wpColorPicker({\n\t\tchange: function (event, ui) {\n\t\t\tvar tableRows = table.getElementsByTagName('tr');\n\t\t\tfor (var i = 2; i < tableRows.length; i += 2) {\n\t\t\t\ttds = tableRows[i].getElementsByTagName('td');\n\t\t\t\tfor (var j = 0; j < tds.length; j++) {\n\t\t\t\t\ttds[j].style.backgroundColor = ui.color.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tjQuery('#wptb-table-header-bg').wpColorPicker({\n\t\tchange: function (event, ui) {\n\t\t\tvar tableHeader = table.getElementsByTagName('tr')[0],\n\t\t\t\ttds = tableHeader.getElementsByTagName('td');\n\t\t\tfor (var j = 0; j < tds.length; j++) {\n\t\t\t\ttds[j].style.backgroundColor = ui.color.toString();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction addInnerBorderSize(value) {\n\t\tvar tableCells = table.getElementsByTagName('td');\n\t\tfor (var i = 0; i < tableCells.length; i++) {\n\t\t\ttableCells[i].style.border = value + 'px solid';\n\t\t}\n\t}\n\n\tfunction addCellPadding(value) {\n\t\tvar tableCells = table.getElementsByTagName('td');\n\t\tfor (var i = 0; i < tableCells.length; i++) {\n\t\t\ttableCells[i].style.padding = value + 'px';\n\t\t}\n\t}\n\n\tfunction addInnerBorder(checked) {\n\t\tvar styles;\n\n\t\tif (checked == 'checked') {\n\t\t\tdocument.getElementById('wptb-apply-inner-border').style.marginBottom = '0px';\n\t\t\tvar tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n\t\t\tfor (var i = 0; i < tableCells.length; i++) {\n\t\t\t\ttableCells[i].style.border = '1px solid';\n\t\t\t}\n\n\t\t\tdocument.getElementById('wptb-inner-border-settings').classList.add('visible');\n\t\t} else {\n\t\t\tdocument.getElementById('wptb-inner-border-settings').classList.remove('visible');\n\t\t\tvar tableCells = document.getElementsByClassName('wptb-preview-table')[0].getElementsByTagName('td');\n\t\t\tfor (var i = 0; i < tableCells.length; i++) {\n\t\t\t\ttableCells[i].style.border = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addBorderSize(value) {\n\t\ttable.style.border = value + 'px solid';\n\t}\n\n\tdocument.getElementById('wptb-table-cell-slider').oninput = function () {\n\t\tdocument.getElementById('wptb-table-cell-number').value = this.value;\n\t\taddCellPadding(this.value);\n\t};\n\n\tdocument.getElementById('wptb-table-cell-number').onchange = function () {\n\t\tdocument.getElementById('wptb-table-cell-slider').value = this.value;\n\t\taddCellPadding(this.value);\n\t};\n\n\tdocument.getElementById('wptb-table-border-slider').oninput = function () {\n\t\tdocument.getElementById('wptb-table-border-number').value = this.value;\n\t\taddBorderSize(this.value);\n\t};\n\n\tdocument.getElementById('wptb-table-border-number').onchange = function () {\n\t\tdocument.getElementById('wptb-table-border-slider').value = this.value;\n\t\taddBorderSize(this.value);\n\t};\n\n\tdocument.getElementById('wptb-table-inner-border-slider').oninput = function () {\n\t\tdocument.getElementById('wptb-table-inner-border-number').value = this.value;\n\t\taddInnerBorderSize(this.value);\n\t};\n\n\tdocument.getElementById('wptb-table-inner-border-number').onchange = function () {\n\t\tdocument.getElementById('wptb-table-inner-border-slider').value = this.value;\n\t\taddInnerBorderSize(this.value);\n\t};\n\n\tdocument.getElementById('wptb-inner-border-check').onchange = function () {\n\t\tvar _val = this.checked ? 'checked' : 'unchecked';\n\t\taddInnerBorder(_val);\n\t};\n\n\tfor (var i = 0; i < wptbElementButtons.length; i++) {\n\t\twptbElementButtons[i].ondragstart = function (e) {\n\t\t\te.dataTransfer.setData('wptbElement', this.dataset.wptbElement);\n\t\t}\n\t}\n\n\tdocument.getElementById('wptb-add-end-row').onclick = table.addRowToTheEnd;\n\tdocument.getElementById('wptb-add-start-row').onclick = table.addRowToTheStart;\n\tdocument.getElementById('wptb-add-row-before').onclick = table.addRowBefore;\n\tdocument.getElementById('wptb-add-row-after').onclick = table.addRowAfter;\n\tdocument.getElementById('wptb-add-end-column').onclick = table.addColumnToTheEnd;\n\tdocument.getElementById('wptb-add-start-column').onclick = table.addColumnToTheStart;\n\tdocument.getElementById('wptb-add-column-before').onclick = table.addColumnBefore;\n\tdocument.getElementById('wptb-add-column-after').onclick = table.addColumnAfter;\n\tdocument.getElementById('add-elements').onclick = function () {\n\t\tdocument.getElementById('element-options').getElementsByTagName('a')[0].classList.remove('active');\n\t\tdocument.getElementById('add-elements').getElementsByTagName('a')[0].classList.add('active');\n\t\tdocument.getElementsByClassName('wptb-elements-container')[0].style.display = 'table';\n\t\tdocument.getElementsByClassName('wptb-settings-section')[0].style.display = 'block';\n\t\tdocument.getElementById(\"element-options-group\").style.display = 'none';\n\t};\n};","var WPTB_List = function (innerElements) {\n\n    var el_L = document.createElement('ul'), item,\n        DOMElement = document.createElement('div');\n\n    this.kind = 'list';\n\n    if (!innerElements)\n        for (var i = 0; i < 3; i++) {\n            item = new WPTB_ListItem('List Item ' + (i + 1));\n            el_L.appendChild(item.getDOMElement());\n        }\n    else {\n        for (var i = 0; i < innerElements.length; i++) {\n            item = new WPTB_ListItem(innerElements[i]);\n            el_L.appendChild(item.getDOMElement());\n        }\n    }\n    DOMElement.appendChild(el_L);\n    //window.addElementOptions('list', elList);\n\n    this.getDOMElement = function () {\n        return DOMElement;\n    }\n    applyGenericItemSettings(this);\n\n    return this;\n\n};","var WPTB_ListItem = function (text) {\n\n    if (text == undefined) text = 'New List Item';\n    var DOMElement = document.createElement('article'),\n        divdot = document.createElement('div'),\n        divcontent = document.createElement('div'),\n        libullet = document.createElement('li');\n    divdot.classList.add('wptb-list-item-style-dot');\n    divcontent.classList.add('wptb-list-item-content');\n    libullet.classList.add('wptb-bullet');\n    DOMElement.appendChild(divdot);\n    DOMElement.appendChild(divcontent);\n    divdot.appendChild(libullet);\n    divcontent.innerHTML = text;\n    divcontent.onkeyup = window.listItemKeyListener;\n\n    DOMElement.onmouseenter = function (event) {\n\n        var btnDelete = document.createElement('span'),\n            btnCopy = document.createElement('span'),\n            actions = document.createElement('span'),\n            previous, i;\n        actions.classList.add('wptb-actions');\n        btnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n        btnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n        this.classList.add('wptb-directlyhovered');\n\n        btnDelete.onclick = function () {\n            var item = this.parentNode.parentNode,\n                parent = item.parentNode;\n            parent.removeChild(item);\n        };\n\n        btnCopy.onclick = function (event) {\n            var article = event.target.parentNode.parentNode,\n                content = article.querySelector('.wptb-list-item-content'),\n                html = content.innerHTML;\n            var duplicate = new WPTB_ListItem(html);\n            article.parentNode.appendChild(duplicate.getDOMElement());\n        };\n\n        actions.append(btnCopy, btnDelete);\n        this.appendChild(actions);\n    };\n\n    DOMElement.onmouseleave = function (event) {\n        this.classList.remove('wptb-directlyhovered');\n        var actions = this.parentNode.querySelector('.wptb-actions');\n        if (actions != undefined) {\n            let parent = actions.parentNode;\n            parent.removeChild(actions);\n        }\n    };\n\n    divcontent.onkeydown = function (event) {\n        var key = (event.which != undefined) ? event.which :\n            event.keyCode,\n            duplicate, lastP;\n        if (key !== 13 ||\n            (window.dontAddItems !== undefined && window.dontAddItems === true)) {\n            return;\n        }\n        event.preventDefault();\n        duplicate = new WPTB_ListItem();\n        if (DOMElement.nextSibling != undefined) {\n            DOMElement.parentNode.insertBefore(duplicate.getDOMElement(), DOMElement.nextSibling);\n        }\n        else {\n            DOMElement.parentNode.appendChild(duplicate.getDOMElement());\n        }\n\n\n        duplicate.getDOMElement().querySelector('.wptb-list-item-content').focus();\n\n        lastP = this.childNodes[this.childNodes.length - 1];\n        this.removeChild(lastP);\n        if (this.innerHTML.trim() == '<p><br data-mce-bogus=\"1\"></p>') {\n            this.innerHTML = 'New List Item';\n        }\n        return false;\n    };\n\n    this.getDOMElement = function () {\n        return DOMElement;\n    }\n\n    return this;\n\n};","var WPTB_Settings = function(){\n\t\n\tvar elems = document.getElementsByClassName('wptb-element');\n\n\tfor (var i = 0; i < elems.length; i++) {\n\t\telems[i].ondragstart = function(event){\n\t\tevent.dataTransfer.effectAllowed = 'move';\n        event.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));\n\t}\n\t};\n};\n","var WPTB_Table = function(columns, rows){\n\t\t\t\n\t\t\tvar settings = document.getElementsByClassName('wptb-settings-items'),\n\t\t\t\twptbTableSetup = document.getElementsByClassName(\"wptb-table-setup\")[0],\n\t\t\t\ttable, row, cell;\n\n            for (var i = 0; i < settings.length; i++) {\n                settings[i].classList.add('visible');\n            }\n\n            document.getElementsByClassName('wptb-table-generator')[0].style.display = 'none';\n            \n\n            //Create a HTML Table element.\n            table = document.createElement('table');\n            table.classList.add('wptb-preview-table');\n\n\n            //Add the header row.\n            row = table.insertRow(-1);\n            row.classList.add('wptb-table-head', 'wptb-row');\n\n            for (var i = 0; i < columns; i++) {\n                cell = new WPTB_Cell();\n                cell.setCoords(0,i); \n                row.appendChild(cell.getDOMElement()); \n            }\n\n            //Add the data rows.\n            for (var i = 1; i < rows; i++) {\n\n                row = table.insertRow(-1);\n                row.classList.add('wptb-row');\n\n                for (var j = 0; j < columns; j++) {\n                    cell = new WPTB_Cell();\n                \tcell.setCoords(i,j); \n                    row.appendChild(cell.getDOMElement());\n                }\n            }\n\n    \t\ttable.recalculateIndexes = function(){\n    \t\t\tvar trs = this.getElementsByTagName('tr'), tds;\n\n\t\t        for (var i = 0; i < trs.length; i++) {\n\t\t            tds = trs[i].getElementsByTagName('td');\n\t\t            for (var j = 0; j < tds.length; j++) {\n\n\t\t                if(i==0){ \n\t\t                    tds[j].parentNode.className=''; \n\t\t                    tds[j].parentNode.classList.add('wptb-row','wptb-table-head');\n\t\t                }\n\t\t                else{\n\t\t                    tds[j].parentNode.className=''; \n\t\t                    tds[j].parentNode.classList.add('wptb-row'); \n\t\t                }\n\n\t\t                tds[j].dataset.xIndex = j;\n\t\t                tds[j].dataset.yIndex = i;\n\t\t            }\n\t\t        }\n    \t\t}\n\n    \t\ttable.addColumn = function(pos){\n\t\t        var referenceTd, newTd, _this;\n\t\t        for (var i = 0; i < this.rows.length; i++) {\n\t\t            \n\t\t            var newTd = new WPTB_Cell(); \n\n\t\t            if(pos == 'before' || pos == 'after')\n\t\t            {\n\t\t                referenceTd = this.rows\n\t\t                        .getElementsByTagName('td')[_this.dataset.xIndex];\n\t\t                if(pos=='before'){\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd);\n\t\t                    var buttons = document.getElementsByClassName('wptb-relative-action');\n\t\t                    for (var i = 0; i < buttons.length; i++) {\n\t\t                        buttons[i].dataset.xIndex++;\n\t\t                    } \n\t\t                }\n\t\t                else{\n\t\t                    this.rows[i].insertBefore(newTd.getDOMElement(),referenceTd.nextSibling);\n\t\t                }\n\t\t            }\n\t\t            else if(pos=='end'){\n\t\t                this.rows[i].appendChild(newTd.getDOMElement());  \n\t\t            }\n\t\t            else{\n\t\t                this.rows[i].innerHTML = '<td class=\"wptb-droppable wptb-cell\"></td>' + this.rows[i].innerHTML; \n\t\t            }\n\t\t        }\n\n\t\t        this.recalculateIndexes();\n\t\t    };\n\n    \t\ttable.addColumnToTheEnd = function(evt){\n\t\t        table.addColumn('end',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnToTheStart = function(evt){\n\t\t        table.addColumn('start',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnBefore = function(){\n\t\t        table.addColumn('before',this.dataset.activeCell);\n\t\t    };\n\n\t\t    table.addColumnAfter = function(){\n\t\t        table.addColumn('after',this.dataset.activeCell);\n\t\t    };\n\n    \t\ttable.addRow = function(pos){\n    \t\t\tvar _this, row, referenceRow = undefined;\n\t\t            \n\t\t        if(pos == 'end' || pos == 'start'){ \n\t\t            row = this.insertRow( pos == 'end' ? -1 : 0);\n\t\t        }else{\n\t\t            row = document.createElement('tr');\n\t\t        }\n\t\t            \n\t\t        for (var j = 0; j < this.columns; j++) {\n\t\t            var cell = new WPTB_Cell();\n\t\t            row.appendChild(cell.getDOMElement());\n\t\t        }\n\n\t\t        row.classList.add('wptb-row'); \n\n\t\t        if(pos == 'before' || pos == 'after' ){\n\t\t        \t_this = this.getElementsByClassName('wptb-highlighted')[0];\n\t\t            referenceRow = this.getElementsByTagName('tr')[_this.dataset.yIndex];\n\t\t            if(pos == \"before\"){\n\t\t                params.tbody.insertBefore(row,referenceRow);\n\t\t                var buttons = document.getElementsByClassName('wptb-relative-action');\n\t\t                for (var i = 0; i < buttons.length; i++) {\n\t\t                    buttons[i].dataset.yIndex++;\n\t\t                } \n\t\t            }else{\n\t\t                this.getElementsByTagName('tbody')[0].insertBefore(row,referenceRow.nextSibling);\n\t\t            }\n\t\t        }\n\n\t\t        if(pos =='before' || pos == 'start'){\n\t\t        \tvar active = document.querySelector('wptb-highlighted');\n\t\t        \tif(active){\n\t\t        \t\tactive.onclick();\n\t\t        \t}\n\t\t        }\n\n\t\t        this.recalculateIndexes();\n    \t\t};\n\n    \t\ttable.addRowToTheEnd = function(evt){\n\t\t        table.addRow('end');\n\t\t    };\n\n\t\t    table.addRowToTheStart = function(evt){\n\t\t        table.addRow('start');\n\t\t    };\n\n\t\t    table.addRowBefore = function(){\n\t\t        table.addRow('before');\n\t\t    };\n\n\t\t    table.addRowAfter = function(){\n\t\t        table.addRow('after');\n\t\t    };\n\n\t\t    table.columns = columns;\n\n            wptbTableSetup.appendChild(table);\n\n\t\t    WPTB_LeftPanel();\n\n             \n};","var WPTB_Text = function(text){\n        var DOMElement = document.createElement('div'),\n                elText2 = document.createElement('div'),\n                elP = document.createElement('p');\n\n                this.kind = 'text';\n\n        elText2.classList.add('editable');\n        elP.innerHTML = text != undefined ? text : 'Text';\n        elText2.appendChild(elP);\n        DOMElement.appendChild(elText2);\n\n        this.getDOMElement = function (){ \n                return DOMElement;\n        }\n        applyGenericItemSettings(this);\n\n        return this;\n};","var applyGenericItemSettings = function (element) {\n\n\tvar node = element.getDOMElement(),\n\t\tindex = document.counter.nextIndex(element.kind),\n\t\tlistItems;\n\n\tnode.onmouseenter = function (event) {\n\t\tthis.classList.add('wptb-directlyhovered');\n\t\tvar btnDelete = document.createElement('span'),\n\t\t\tbtnCopy = document.createElement('span'),\n\t\t\tbtnMove = document.createElement('span'),\n\t\t\tactions = document.createElement('span'),\n\t\t\tprevious, i;\n\t\tactions.classList.add('wptb-actions');\n\t\tbtnDelete.classList.add('dashicons', 'dashicons-trash', 'delete-action');\n\t\tbtnCopy.classList.add('dashicons', 'dashicons-admin-page', 'duplicate-action');\n\t\tbtnMove.classList.add(\"dashicons\", \"dashicons-move\", 'move-action');\n\t\tbtnMove.draggable = true;\n\t\tbtnDelete.onclick = function (event) {\n\t\t\tvar act = this.parentNode.parentNode,\n\t\t\t\tel = act.parentNode;\n\t\t\tel.removeChild(act);\n\t\t};\n\t\t//btnCopy.onclick = window.copyButton;\n\t\tbtnMove.ondragstart = function (event) {\n\t\t\tvar parent = this, infArr, type;\n\n\t\t\twhile (parent.className == '' ||\n\t\t\t\t!parent.classList.contains('wptb-ph-element')) {\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\n\n\t\t\tinfArr = parent.className.match(/wptb-element-(.+)-(\\d+)/i);\n\t\t\ttype = infArr[1];\n\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\timg.src = \"http://localhost/sandbox/wp-content/plugins/wp-table-builder/inc/admin/views/builder/icons/\" + type + \".png\";\n\t\t\tconsole.log(img.src);\n\t\t\tevent.dataTransfer.setDragImage(img, 0, 0);\n\t\t\tevent.dataTransfer.setData('node', 'wptb-element-' + infArr[1] + '-' + infArr[2]);\n\t\t};\n\n\n\t\tif (element.kind === 'button') {\n\t\t\ttinyMCE.init({\n\t\t\t\ttarget: node.childNodes[0].childNodes[0],\n\t\t\t\tinline: true,\n\t\t\t\tplugins: \"link\",\n\t\t\t\tdialog_type: \"modal\",\n\t\t\t\ttheme: 'modern',\n\t\t\t\tmenubar: false,\n\t\t\t\tfixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t\t\t\ttoolbar: 'bold italic strikethrough',\n\t\t\t\tsetup: function (ed) {\n\t\t\t\t\ted.on(\"init\",\n\t\t\t\t\t\tfunction (ed) {\n\t\t\t\t\t\t\ttinyMCE.execCommand('mceRepaint');\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tinit_instance_callback: function (editor) {\n\t\t\t\t\teditor.on('change', function (e) {\n\t\t\t\t\t\t// check if it becomes empty because if there's no value it's hard to edit the editor in button element\n\t\t\t\t\t\tif (editor.getContent() == \"\") {\n\t\t\t\t\t\t\teditor.setContent(\"<p class='wptb-button'>Button Text</p>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\teditor.on('KeyDown', function (e) {\n\t\t\t\t\t\tvar range = editor.selection.getRng();\n\t\t\t\t\t\tvar KeyID = e.keyCode;\n\t\t\t\t\t\tif (range.startOffset == 0 && (KeyID == 8 || KeyID == 46)) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\teditor.setContent(\"<p class='wptb-button'></p>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\twindow.currentEditor = editor;\n\t\t\t\t\teditor.on('focus', function (e) {\n\n\t\t\t\t\t\tvar totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t\t\tif (window.currentEditor &&\n\t\t\t\t\t\t\tdocument.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t\t\t\twindow.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t\t\t\tdelete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t\t\t\tdelete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (element.kind === 'text') {\n\t\t\ttinyMCE.init({\n\t\t\t\ttarget: node.childNodes[0],\n\t\t\t\tinline: true,\n\t\t\t\tplugins: \"link, paste\",\n\t\t\t\tdialog_type: \"modal\",\n\t\t\t\ttheme: 'modern',\n\t\t\t\tmenubar: false,\n\t\t\t\tfixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t\t\t\tpaste_as_text: true,\n\t\t\t\ttoolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n\t\t\t\tinit_instance_callback: function (editor) {\n\t\t\t\t\twindow.currentEditor = editor;\n\t\t\t\t\teditor.on('focus', function (e) {\n\n\t\t\t\t\t\tvar totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t\t\tif (window.currentEditor &&\n\t\t\t\t\t\t\tdocument.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t\t\t\twindow.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t\t\t\tdelete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t\t\t\tdelete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\telse {\n\t\t\tlistItems = node.getElementsByClassName('wptb-list-item-content');\n\t\t\tfor (var i = 0; i < listItems.length; i++) {\n\t\t\t\ttinyMCE.init({\n\t\t\t\t\ttarget: listItems[i],\n\t\t\t\t\tinline: true,\n\t\t\t\t\tplugins: \"link, paste\",\n\t\t\t\t\tdialog_type: \"modal\",\n\t\t\t\t\ttheme: 'modern',\n\t\t\t\t\tmenubar: false,\n\t\t\t\t\tfixed_toolbar_container: '#wpcd_fixed_toolbar',\n\t\t\t\t\tpaste_as_text: true,\n\t\t\t\t\ttoolbar: 'bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify',\n\t\t\t\t\tinit_instance_callback: function (editor) {\n\t\t\t\t\t\twindow.currentEditor = editor;\n\t\t\t\t\t\teditor.on('focus', function (e) {\n\t\t\t\t\t\t\tvar totalWidth = document.getElementsByClassName('wptb-builder-panel')[0].offsetWidth;\n\t\t\t\t\t\t\tif (window.currentEditor &&\n\t\t\t\t\t\t\t\tdocument.getElementById('wptb_builder').scrollTop >= 55 &&\n\t\t\t\t\t\t\t\twindow.currentEditor.bodyElement.style.display != 'none') {\n\t\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.position = 'fixed';\n\t\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.right = (totalWidth / 2 - document.getElementById('wpcd_fixed_toolbar').offsetWidth / 2) + 'px';\n\t\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.top = '100px';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdocument.getElementById('wpcd_fixed_toolbar').style.position = 'static';\n\t\t\t\t\t\t\t\tdelete document.getElementById('wpcd_fixed_toolbar').style.right;\n\t\t\t\t\t\t\t\tdelete document.getElementById('wpcd_fixed_toolbar').style.top;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tactions.appendChild(btnMove);\n\t\tactions.appendChild(btnCopy);\n\t\tactions.appendChild(btnDelete);\n\t\tthis.appendChild(actions);\n\t};\n\n\tnode.onmouseleave = function (event) {\n\t\tvar formerActions = this.getElementsByClassName('wptb-actions');\n\t\tif (formerActions && formerActions[0]) {\n\t\t\tlet par = formerActions[0].parentNode;\n\t\t\tpar.removeChild(formerActions[0]);\n\t\t}\n\t\tthis.classList.remove('wptb-directlyhovered');\n\t};\n\n\tnode.classList.add('wptb-ph-element', 'wptb-element-' + element.kind + '-' +\n\t\tindex);\n\n\tnew WPTB_ElementOptions(element, index);\n\n\tdocument.counter.increment(element.kind);\n\n};",""]}