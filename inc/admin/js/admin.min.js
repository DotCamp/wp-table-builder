var applyGenericItemSettings=function(o){var s,i=o.getDOMElement(),e=document.counter.nextIndex(o.kind);i.onmouseenter=function(e){this.classList.add("wptb-directlyhovered");var t=document.createElement("span"),n=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span");if(l.classList.add("wptb-actions"),t.classList.add("dashicons","dashicons-trash","delete-action"),n.classList.add("dashicons","dashicons-admin-page","duplicate-action"),a.classList.add("dashicons","dashicons-move","move-action"),a.draggable=!0,t.onclick=function(e){var t,n=this.parentNode.parentNode,a=n.parentNode,l=n.nextSibling;a.removeChild(n),a.removeChild(l),a.getElementsByClassName("wptb-ph-element").length||(t=a.getElementsByClassName("wptb-space-between")[0])&&a.removeChild(t)},n.onclick=function(e){if("list"==o.kind){for(var t=e.target.parentNode.parentNode.parentNode,n=[],a=e.target.parentNode.parentNode.querySelectorAll("ul article .wptb-list-item-content"),l=0;l<a.length;l++)n.push(a[l].innerHTML);var r=new WPTB_List(n);t.appendChild(r.getDOMElement())}else if("text"==o.kind){t=e.target.parentNode.parentNode.parentNode,r=new WPTB_Text(e.target.parentNode.parentNode.childNodes[0].innerHTML,i);i.parentNode.insertBefore(r.getDOMElement(),i.nextSibling),i.parentNode.insertBefore(new WPTB_Space,r.getDOMElement())}else if("image"==o.kind){t=e.target.parentNode.parentNode.parentNode,r=new WPTB_Image(e.target.parentNode.parentNode.children[0].children[0].src,i);i.parentNode.insertBefore(r.getDOMElement(),i.nextSibling),i.parentNode.insertBefore(new WPTB_Space,r.getDOMElement())}else{t=e.target.parentNode.parentNode.parentNode,r=new WPTB_Button(e.target.parentNode.parentNode.childNodes[0].innerHTML,i);i.parentNode.insertBefore(r.getDOMElement(),i.nextSibling),i.parentNode.insertBefore(new WPTB_Space,r.getDOMElement())}},a.ondragstart=function(e){for(var t,n,a=this;""==a.className||!a.classList.contains("wptb-ph-element");)a=a.parentNode;n=(t=a.className.match(/wptb-element-(.+)-(\d+)/i))[1];var l=document.createElement("img");l.src="http://localhost/sandbox/wp-content/plugins/wp-table-builder/inc/admin/views/builder/icons/"+n+".png",e.dataTransfer.setDragImage(l,0,0),e.dataTransfer.setData("node","wptb-element-"+t[1]+"-"+t[2])},"button"===o.kind)tinyMCE.init({target:i.childNodes[0].childNodes[0],inline:!0,plugins:"link",dialog_type:"modal",theme:"modern",menubar:!1,fixed_toolbar_container:"#wpcd_fixed_toolbar",toolbar:"bold italic strikethrough",verify_html:!1,setup:function(e){e.on("init",function(e){tinyMCE.execCommand("mceRepaint")})},init_instance_callback:function(a){a.on("change",function(e){""==a.getContent().trim()&&a.setContent("<a class='wptb-button'>Button Text</a>")}),a.on("KeyDown",function(e){var t=a.selection.getRng(),n=e.keyCode;0!=t.startOffset||8!=n&&46!=n||(e.preventDefault(),a.setContent("<p class='wptb-button'></p>"))}),(window.currentEditor=a).on("focus",function(e){var t=document.getElementsByClassName("wptb-builder-panel")[0].offsetWidth;window.currentEditor&&55<=document.getElementById("wptb_builder").scrollTop&&"none"!=window.currentEditor.bodyElement.style.display?(document.getElementById("wpcd_fixed_toolbar").style.position="fixed",document.getElementById("wpcd_fixed_toolbar").style.right=t/2-document.getElementById("wpcd_fixed_toolbar").offsetWidth/2+"px",document.getElementById("wpcd_fixed_toolbar").style.top="100px"):(document.getElementById("wpcd_fixed_toolbar").style.position="static",delete document.getElementById("wpcd_fixed_toolbar").style.right,delete document.getElementById("wpcd_fixed_toolbar").style.top)})}});else if("text"===o.kind)tinyMCE.init({target:i.childNodes[0],inline:!0,plugins:"link, paste",dialog_type:"modal",theme:"modern",menubar:!1,fixed_toolbar_container:"#wpcd_fixed_toolbar",paste_as_text:!0,toolbar:"bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify",init_instance_callback:function(e){(window.currentEditor=e).on("focus",function(e){var t=document.getElementsByClassName("wptb-builder-panel")[0].offsetWidth;window.currentEditor&&55<=document.getElementById("wptb_builder").scrollTop&&"none"!=window.currentEditor.bodyElement.style.display?(document.getElementById("wpcd_fixed_toolbar").style.position="fixed",document.getElementById("wpcd_fixed_toolbar").style.right=t/2-document.getElementById("wpcd_fixed_toolbar").offsetWidth/2+"px",document.getElementById("wpcd_fixed_toolbar").style.top="100px"):(document.getElementById("wpcd_fixed_toolbar").style.position="static",delete document.getElementById("wpcd_fixed_toolbar").style.right,delete document.getElementById("wpcd_fixed_toolbar").style.top)})}});else{s=i.getElementsByClassName("wptb-list-item-content");for(var r=0;r<s.length;r++)tinyMCE.init({target:s[r],inline:!0,plugins:"link, paste",dialog_type:"modal",theme:"modern",menubar:!1,fixed_toolbar_container:"#wpcd_fixed_toolbar",paste_as_text:!0,toolbar:"bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify",init_instance_callback:function(e){(window.currentEditor=e).on("focus",function(e){var t=document.getElementsByClassName("wptb-builder-panel")[0].offsetWidth;window.currentEditor&&55<=document.getElementById("wptb_builder").scrollTop&&"none"!=window.currentEditor.bodyElement.style.display?(document.getElementById("wpcd_fixed_toolbar").style.position="fixed",document.getElementById("wpcd_fixed_toolbar").style.right=t/2-document.getElementById("wpcd_fixed_toolbar").offsetWidth/2+"px",document.getElementById("wpcd_fixed_toolbar").style.top="100px"):(document.getElementById("wpcd_fixed_toolbar").style.position="static",delete document.getElementById("wpcd_fixed_toolbar").style.right,delete document.getElementById("wpcd_fixed_toolbar").style.top)})}})}l.appendChild(a),l.appendChild(n),l.appendChild(t),this.appendChild(l)},i.onmouseleave=function(e){var t=this.getElementsByClassName("wptb-actions");t&&t[0]&&t[0].parentNode.removeChild(t[0]);this.classList.remove("wptb-directlyhovered")};var t=i.className.match(/wptb-element-(.+)-(\d+)/i);t&&i.classList.remove(t[0]),i.classList.contains("wptb-ph-element")||i.classList.add("wptb-ph-element"),i.classList.contains("wptb-element-"+o.kind+"-"+e)||i.classList.add("wptb-element-"+o.kind+"-"+e),new WPTB_ElementOptions(o,e),document.counter.increment(o.kind)};document.addEventListener("DOMContentLoaded",function(){var e,t,n=(e=window.location.href,!!(t=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e))&&(t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):""));if(n){var a=new XMLHttpRequest,l=ajaxurl+"?action=get_table&id="+n;a.open("GET",l,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(a.responseText);return document.getElementById("wptb-setup-name").value=t[0],document.getElementsByClassName("wptb-table-generator")[0].style.display="none",document.getElementsByClassName("wptb-table-setup")[0].appendChild(WPTB_Parser(t[1])),WPTB_Table(),WPTB_LeftPanel(),void WPTB_Settings()}},a.send(null)}document.counter=new ElementCounters,document.select=new MultipleSelect,WPTB_Initializer(),settings=WPTB_Settings()});var WPTB_Button=function(e,t){if(null==t){t=document.createElement("div");var n=document.createElement("div"),a=document.createElement("a");t.classList.add("wptb-button-container","wptb-size-M","wptb-"),n.classList.add("wptb-button-wrapper"),a.classList.add("wptb-button"),a.classList.add("editable"),a.innerHTML=null!=e?e:"Button Text",n.appendChild(a),t.appendChild(n)}else t=t.cloneNode(!0);return this.kind="button",this.getDOMElement=function(){return t},applyGenericItemSettings(this),this},WPTB_Cell=function(e,s){if(!s){(s=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px";var t=jQuery("#wptb-table-inner-border-number").val();""!=t&&0!=parseInt(t)?s.style.border=t+"px solid "+jQuery("#wptb-table-border-color").val():s.style.border="1px dashed #969fa6",s.classList.add("wptb-droppable","wptb-cell")}s.draggable=!1,e&&(s.onclick=e),s.ondragenter=function(e){(e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node"))&&this.classList.add("wptb-drop-here-empty")},s.ondragover=function(e){e.preventDefault()},s.ondragleave=function(){this.classList.remove("wptb-drop-here-empty")},s.ondrop=function(e){var t,n,a,l,r,o;if(e.preventDefault(),a=new WPTB_Space,e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node"))return e.dataTransfer.getData("wptbElement")?(t="list"==(o=e.dataTransfer.getData("wptbElement"))?new WPTB_List:"image"==o?new WPTB_Image:"text"==o?new WPTB_Text:"button"==o?new WPTB_Button:void 0,""==this.innerHTML&&this.appendChild(new WPTB_Space),this.appendChild(t.getDOMElement())):(n=e.dataTransfer.getData("node"),t=document.getElementsByClassName(n)[0],""==this.innerHTML&&(l=t.nextSibling,r=t.parentNode,null!=l&&r.removeChild(l),this.appendChild(new WPTB_Space)),this.appendChild(t)),this.appendChild(a),this.classList.remove("wptb-drop-here-empty"),!0};var i=s.getElementsByClassName("wptb-ph-element");if(0<i.length)for(var n=function(e){var t=s.getElementsByClassName("wptb-space-between");if(0<t.length)for(var n=0;n<t.length;n++)WPTB_Space(t[n]);i[e].getDOMElement=function(){return i[e]};var a=i[e].className.match(/wptb-element-((.+-)\d+)/i);if(a&&Array.isArray(a)){var l=a[1].split("-");if(i[e].kind=l[0],applyGenericItemSettings(i[e]),"list"==i[e].kind){console.log(i[e]);var r=i[e].getElementsByTagName("article");if(0<r.length)for(var o=0;o<r.length;o++)console.log(r),WPTB_ListItem(void 0,r[o])}}},a=0;a<i.length;a++)n(a);return this.getDOMElement=function(){return s},this.setCoords=function(e,t){var n=this.getDOMElement();n.dataset.yIndex=e,n.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},this},ElementCounters=function(){var t=[];return t.text=0,t.image=0,t.list=0,t.button=0,this.increment=function(e){e in t&&t[e]++},this.nextIndex=function(e){if(e in t)return t[e]+1},this},WPTB_ElementOptions=function(o,e){var t,s=o.getDOMElement();prop=document.querySelector(".wptb-"+o.kind+"-options-prototype").cloneNode(!0),prop.classList.remove("wptb-"+o.kind+"-options-prototype"),t="wptb-options-"+o.kind+"-"+e;for(var n=prop.getElementsByClassName("wptb-element-property"),a=0;a<n.length;a++)n[a].dataset.element=t;if(prop.classList.add(t),document.getElementById("element-options-group").appendChild(prop),s.onclick=function(){var e=this.className.match(/wptb-element-((.+-)\d+)/i),t=".wptb-"+e[2]+"options.wptb-options-"+e[1];document.getElementById("add-elements").getElementsByTagName("a")[0].classList.remove("active"),document.getElementById("element-options").getElementsByTagName("a")[0].classList.add("active"),document.getElementsByClassName("wptb-elements-container")[0].style.display="none",document.getElementsByClassName("wptb-settings-section")[0].style.display="none",document.getElementById("element-options-group").style.display="block";for(var n,a,l=document.getElementById("element-options-group").childNodes,r=0;r<l.length;r++)l[r].style&&(l[r].style.display="none");switch(document.querySelector(t).style.display="block",o.kind){case"text":jQuery(prop).find("[data-type=color]").wpColorPicker({defaultColor:s.style.color}),prop.querySelector("[type=number][data-type=font-size]").value=prop.querySelector("[type=ran][data-type=font-size]").value=s.style.fontSize.substring(0,s.style.fontSize.length-2);break;case"list":a=s.querySelector("article").style.justifyContent,n=s.querySelector("article .wptb-list-item-style-dot li").style.listStyleType,prop.querySelector("[type=ran][data-type=list-class]").selectedIndex="decimal"==n?0:1,prop.querySelector("[type=ran][data-type=list-style-type]").selectedIndex="circle"==n?0:"square"==n?1:2,prop.querySelector("[type=ran][data-type=list-alignment]").selectedIndex="flex-start"==a?0:"center"==a?1:2;break;case"image":break;case"button":jQuery(prop).find("[data-type=button-color]").wpColorPicker({defaultColor:s.style.backgroundColor})}},"button"==o.kind){var l=prop.getElementsByClassName("wptb-btn-size-btn");for(a=0;a<l.length;a++)l[a].onclick=function(){var e=this.innerHTML,t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),n=t[1],a=t[2],l=document.getElementsByClassName("wptb-element-"+n+"-"+a)[0];l.classList.remove("wptb-size-S"),l.classList.remove("wptb-size-M"),l.classList.remove("wptb-size-L"),l.classList.remove("wptb-size-XL"),l.classList.add("wptb-size-"+e);for(var r=prop.getElementsByClassName("wptb-btn-size-btn"),o=0;o<r.length;o++)r[o].classList.remove("selected");this.classList.add("selected")}}var r=prop.getElementsByClassName("wptb-element-property");for(a=0;a<r.length;a++){if(r[a].classList.contains("wptb-color-picker")&&jQuery(r[a]).wpColorPicker({change:function(e,t){var n,a,l,r=e.target;a=(n=r.dataset.element.match(/wptb-options-(.+)-(\d+)/i))[1],l=n[2],affectedEl=document.getElementsByClassName("wptb-element-"+a+"-"+l)[0],"button"==a?"button-text-color"==r.dataset.type?affectedEl.getElementsByClassName("wptb-button")[0].style.color=t.color.toString():affectedEl.getElementsByClassName("wptb-button")[0].style.backgroundColor=t.color.toString():affectedEl.style.color=t.color.toString()}}),"font-size"===r[a].dataset.type)r[a].parentNode.parentNode.getElementsByClassName("wptb-text-font-size-slider")[0].oninput=function(){this.parentNode.parentNode.getElementsByClassName("wptb-text-font-size-number")[0].value=this.value,this.parentNode.parentNode.getElementsByClassName("wptb-text-font-size-number")[0].onchange()};if("image-size"===r[a].dataset.type)r[a].parentNode.parentNode.getElementsByClassName("wptb-image-size-slider")[0].oninput=function(){this.parentNode.parentNode.getElementsByClassName("wptb-image-width-number")[0].value=this.value,this.parentNode.parentNode.getElementsByClassName("wptb-image-width-number")[0].onchange()};r[a].onchange=function(e){var t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),n=t[1],a=t[2],l=document.getElementsByClassName("wptb-element-"+n+"-"+a)[0],r=this.value;switch(this.dataset.type){case"src":l.getElementsByTagName("img")[0].src=this.value;break;case"alternative-text":l.getElementsByTagName("img")[0].alt=this.value;break;case"image-link":l.getElementsByTagName("a")[0].href=this.value;break;case"button-link-target":1==this.checked?l.getElementsByTagName("a")[0].target="_blank":l.getElementsByTagName("a")[0].target="_self";break;case"image-size":l.getElementsByTagName("img")[0].style.width=this.value+"%",l.getElementsByTagName("img")[0].style.height="auto",this.parentNode.parentNode.getElementsByClassName("wptb-image-size-slider")[0].value=this.value;break;case"image-alignment":l.getElementsByTagName("img")[0].parentNode.style.textAlign=this.value;break;case"font-size":l.style.fontSize=r+"px";break;case"button-alignment":var o="";o="left"==this.value?"start":"right"==this.value?"flex-end":"center",l.getElementsByClassName("wptb-button-wrapper")[0].style.justifyContent=o;break;case"button-link":l.getElementsByTagName("a")[0].href=this.value;break;case"button-link-target":1==this.checked?l.getElementsByTagName("a")[0].target="_blank":l.getElementsByTagName("a")[0].target="_self";break;case"button-color":break;case"list-alignment":o="";o="left"==this.value?"flex-start":"right"==this.value?"flex-end":"center";for(var s=l.querySelectorAll("article"),i=0;i<s.length;i++)s[i].style.justifyContent=o;break;case"list-class":if("unordered"==r){e.target.parentNode.parentNode.querySelector("[data-type=list-style-type]").parentNode.style.display="flex",document.querySelector("#wptb-list-icon-select-label").style.display="flex";var d=l.querySelectorAll("article .wptb-list-item-style-dot li");for(i=0;i<d.length;i++)d[i].style.listStyleType="disc";document.querySelector("[data-type=list-style-type]").value="disc"}else{e.target.parentNode.parentNode.querySelector("[data-type=list-style-type]").parentNode.style.display="none",document.querySelector("#wptb-list-icon-select-label").style.display="none";for(d=l.querySelectorAll("article .wptb-list-item-style-dot li"),i=0;i<d.length;i++)d[i].style.listStyleType="decimal"}break;case"list-style-type":for(d=l.querySelectorAll("article .wptb-list-item-style-dot li"),i=0;i<d.length;i++)d[i].style.listStyleType=r.toLowerCase()}}}},WPTB_Image=function(e,t){if(null==t){t=document.createElement("div");var n=document.createElement("a"),a=document.createElement("img");n.style.display="inline-block",n.appendChild(a),t.appendChild(n),file_frame=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1}),file_frame.on("select",function(){attachment=file_frame.state().get("selection").first().toJSON(),a.src=attachment.url}),null==e?file_frame.open():a.src=e}else t=t.cloneNode(!0);return this.kind="image",this.getDOMElement=function(){return t},applyGenericItemSettings(this),this},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),columnsDecrementButton.onclick=function(){1<columnsInput.value&&columnsInput.value--},columnsIncrementButton.onclick=function(){columnsInput.value<10&&columnsInput.value++},rowsDecrementButton.onclick=function(){1<rowsInput.value&&rowsInput.value--},rowsIncrementButton.onclick=function(){rowsInput.value<10&&rowsInput.value++},document.getElementById("wptb-generate-table").onclick=function(){var e=document.getElementById("wptb-columns-number").value,t=document.getElementById("wptb-rows-number").value;WPTB_Table(e,t)}},WPTB_LeftPanel=function(){var r=document.getElementsByClassName("wptb-preview-table")[0],e=document.getElementsByClassName("wptb-element");function t(e){for(var t,n,a=r.getElementsByTagName("td"),l=0;l<a.length;l++)a[l].style.border=document.querySelector("#wptb-table-inner-border-number").value+"px solid "+(t=jQuery("#wptb-table-border-color").val(),void 0,(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?"rgb("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+")":null)}function n(e){for(var t=r.getElementsByTagName("td"),n=0;n<t.length;n++)t[n].style.padding=e+"px"}function a(e){r.style.border=e+"px solid"}jQuery("#wptb-even-row-bg").wpColorPicker({change:function(e,t){for(var n=r.getElementsByTagName("tr"),a=1;a<n.length;a+=2){tds=n[a].getElementsByTagName("td");for(var l=0;l<tds.length;l++)tds[l].style.backgroundColor=t.color.toString()}}}),jQuery("#wptb-odd-row-bg").wpColorPicker({change:function(e,t){for(var n=r.getElementsByTagName("tr"),a=2;a<n.length;a+=2){tds=n[a].getElementsByTagName("td");for(var l=0;l<tds.length;l++)tds[l].style.backgroundColor=t.color.toString()}}}),jQuery("#wptb-table-header-bg").wpColorPicker({change:function(e,t){for(var n=r.getElementsByTagName("tr")[0].getElementsByTagName("td"),a=0;a<n.length;a++)n[a].style.backgroundColor=t.color.toString()}}),jQuery("#wptb-table-border-color").wpColorPicker({change:function(e,t){var n=r.getElementsByTagName("td");r.style.border=document.querySelector("#wptb-table-border-number").value+"px solid "+t.color.toString();for(var a=0;a<n.length;a++)n[a].style.border=document.querySelector("#wptb-table-inner-border-number").value+"px solid "+t.color.toString()}}),document.getElementById("wptb-table-cell-slider").oninput=function(){document.getElementById("wptb-table-cell-number").value=this.value,n(this.value)},document.getElementById("wptb-table-cell-number").onchange=function(){document.getElementById("wptb-table-cell-slider").value=this.value,n(this.value)},document.getElementById("wptb-table-border-slider").oninput=function(){document.getElementById("wptb-table-border-number").value=this.value,a(this.value)},document.getElementById("wptb-table-border-number").onchange=function(){document.getElementById("wptb-table-border-slider").value=this.value,a(this.value)},document.getElementById("wptb-table-inner-border-slider").oninput=function(){document.getElementById("wptb-table-inner-border-number").value=this.value,t(this.value)},document.getElementById("wptb-table-inner-border-number").onchange=function(){document.getElementById("wptb-table-inner-border-slider").value=this.value,t(this.value)},document.getElementById("wptb-inner-border-check").onchange=function(){!function(e){var t=null!=document.querySelector("#wptb-table-border-color").value?document.querySelector("#wptb-table-border-color").value:"rgb(0,0,0)";if("checked"==e){document.getElementById("wptb-apply-inner-border").style.marginBottom="0px";for(var n=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),a=0;a<n.length;a++)n[a].style.border="1px solid "+t;document.getElementById("wptb-inner-border-settings").classList.add("visible")}else for(document.getElementById("wptb-inner-border-settings").classList.remove("visible"),n=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),a=0;a<n.length;a++)n[a].style.border="0px solid "+t}(this.checked?"checked":"unchecked")};for(var l=0;l<e.length;l++)e[l].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement)};document.getElementById("wptb-activate-cell-management-mode").onclick=r.toggleTableEditMode,document.getElementById("wptb-add-end-row").onclick=r.addRowToTheEnd,document.getElementById("wptb-add-start-row").onclick=r.addRowToTheStart,document.getElementById("wptb-add-row-before").onclick=r.addRowBefore,document.getElementById("wptb-add-row-after").onclick=r.addRowAfter,document.getElementById("wptb-add-end-column").onclick=r.addColumnEnd,document.getElementById("wptb-add-start-column").onclick=r.addColumnStart,document.getElementById("wptb-add-column-before").onclick=r.addColumnBefore,document.getElementById("wptb-add-column-after").onclick=r.addColumnAfter,document.getElementById("wptb-delete-column").onclick=r.deleteColumn,document.getElementById("wptb-delete-row").onclick=r.deleteRow,document.getElementById("wptb-merge-cells").onclick=r.mergeCells,document.getElementById("wptb-split-cell").onclick=r.splitCell,document.getElementById("add-elements").onclick=function(){document.getElementById("element-options").getElementsByTagName("a")[0].classList.remove("active"),document.getElementById("add-elements").getElementsByTagName("a")[0].classList.add("active"),document.getElementsByClassName("wptb-elements-container")[0].style.display="table",document.getElementsByClassName("wptb-settings-section")[0].style.display="block",document.getElementById("element-options-group").style.display="none"}},WPTB_List=function(e){var t,n=document.createElement("ul"),a=document.createElement("div");if(this.kind="list",""===e);else if(e)for(l=0;l<e.length;l++)t=new WPTB_ListItem(e[l]),n.appendChild(t.getDOMElement());else for(var l=0;l<3;l++)t=new WPTB_ListItem("List Item "+(l+1)),n.appendChild(t.getDOMElement());return a.appendChild(n),this.getDOMElement=function(){return a},applyGenericItemSettings(this),this},WPTB_ListItem=function l(e,n){var t=void 0;if(null==n){null==e&&(e="New List Item");n=document.createElement("article");var a=document.createElement("div"),r=document.createElement("div"),o=document.createElement("li");a.classList.add("wptb-list-item-style-dot"),r.classList.add("wptb-list-item-content"),o.classList.add("wptb-bullet"),n.appendChild(a),n.appendChild(r),a.appendChild(o),r.innerHTML=e,r.onkeyup=window.listItemKeyListener,t=!0}else{a=n.getElementsByClassName("wptb-list-item-style-dot")[0],r=n.getElementsByClassName("wptb-list-item-content")[0],o=a.getElementsByClassName("wptb-bullet")[0];r.onkeyup=window.listItemKeyListener,t=!1}if(n.onmouseenter=function(e){var t=document.createElement("span"),n=document.createElement("span"),a=document.createElement("span");a.classList.add("wptb-actions"),t.classList.add("dashicons","dashicons-trash","delete-action"),n.classList.add("dashicons","dashicons-admin-page","duplicate-action"),this.classList.add("wptb-directlyhovered"),t.onclick=function(){var e=this.parentNode.parentNode;e.parentNode.removeChild(e)},n.onclick=function(e){var t=e.target.parentNode.parentNode,n=t.querySelector(".wptb-list-item-content").innerHTML,a=new l(n);t.parentNode.appendChild(a.getDOMElement())},a.append(n,t),this.appendChild(a)},n.onmouseleave=function(e){this.classList.remove("wptb-directlyhovered");var t=this.parentNode.querySelector(".wptb-actions");null!=t&&t.parentNode.removeChild(t)},r.onkeydown=function(e){var t;if(13===(null!=e.which?e.which:e.keyCode)&&(void 0===window.dontAddItems||!0!==window.dontAddItems))return e.preventDefault(),t=new l(this.innerHTML),n.parentNode.insertBefore(t.getDOMElement(),n),setTimeout(function(){r.innerHTML="",tinyMCE.execCommand("mceInsertContent",!1,"New List Item")},10),!1},this.getDOMElement=function(){return n},t)return this},MultipleSelect=function(){var l=[],n=!1;return this.activateMultipleSelectMode=function(){l=[];for(var e=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),t=0;t<e.length;t++)e[t].classList.remove("wptb-highlighted");n=!0},this.deactivateMultipleSelectMode=function(){n=!1},this.isActivated=function(){return n},this.pushSelectedCell=function(e){n&&(l.push(e),e.classList.add("wptb-highlighted"))},this.selectedCells=function(){return l},this.flushSelectedCells=function(){l=[]},this.getFirst=function(){for(var e,t=1e3,n=1e3,a=l.length-1;0<=a;a--)t>=l[a].dataset.xIndex&&n>=l[a].dataset.yIndex&&(e=l[a],t=l[a].dataset.xIndex,n=l[a].dataset.yIndex);return e},this.getLast=function(){for(var e,t=-1,n=-1,a=l.length-1;0<=a;a--)t<=l[a].dataset.xIndex&&n<=l[a].dataset.yIndex&&(e=l[a],t=l[a].dataset.xIndex,n=l[a].dataset.yIndex);return e},this.removeAllButFirst=function(){for(var e=this.getFirst(),t=1;t<l.length;t++)l[t].classList.add("wptb-fused-cell-"+e.dataset.xIndex+"-"+e.dataset.yIndex)},this},WPTB_Parser=function e(t){if(Array.isArray(t)){var n=void 0;if(1==t.length)return console.log("Hello 1"),n.appendChild(document.createTextNode(t[0]));if(0 in t){var a=t[0];if(n=document.createElement(a),1 in t&&Array.isArray(t[1]))for(var l=t[1],r=0;r<l.length;r++)Array.isArray(l[r])&&n.setAttribute(l[r][0],l[r][1]);if(2 in t)if(Array.isArray(t[2]))for(var o=0;o<t[2].length;o++)"string"!=typeof t[2][o]||"p"!=a.toLowerCase()?e(t[2][o])&&n.appendChild(e(t[2][o])):n.appendChild(document.createTextNode(t[2][o]));else"string"==typeof t[2]&&n.appendChild(document.createTextNode(t[2]))}return n}return!1},WPTB_Settings=function(){var e=document.getElementsByClassName("wptb-element");for(var t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement)};document.getElementsByClassName("wptb-save-btn")[0].onclick=function(){var n=new XMLHttpRequest,e=ajaxurl+"?action=save_table",a=document.getElementById("wptb-setup-name").value.trim(),l=void 0,t=WPTB_Stringifier(document.getElementsByClassName("wptb-preview-table")[0],!0);if(""===a)return(l=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: You must assign a name to the table before saving it.</div>',l.classList.add("wptb-warning"),void setTimeout(function(){l.removeChild(l.firstChild)},4e3);t=JSON.stringify(t);var r,o,s="title="+a+"&content="+t;((rs=(r=window.location.href,!!(o=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(r))&&(o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"")))||(rs=document.wptbId))&&(s+="&id="+rs),n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(n.responseText);l=document.getElementById("wptb-messaging-area"),"saved"==t[0]?(document.wptbId=t[1],l.innerHTML='<div class="wptb-success wptb-message">Table "'+a+'" was successfully saved.</div>'):l.innerHTML='<div class="wptb-success wptb-message">Table "'+a+'" was successfully updated.</div>',l.classList.add("wptb-success"),setTimeout(function(){l.removeChild(l.firstChild)},4e3)}},n.send(s)}},WPTB_Space=function s(e){var t=void 0;if(e?t=e:(t=document.createElement("div")).classList.add("wptb-space-between"),t.ondragenter=function(){this.classList.add("visible")},t.ondragover=function(e){e.preventDefault()},t.ondragleave=function(){this.classList.remove("visible")},t.ondrop=function(e){e.stopPropagation();for(var t,n,a,l,r=e.target.nextSibling,o=e.target;!o.classList.contains("wptb-droppable");)o=o.parentNode;e.dataTransfer.getData("wptbElement")?(t=(l=e.dataTransfer.getData("wptbElement")).includes("list")?new WPTB_List:l.includes("image")?new WPTB_Image:l.includes("text")?new WPTB_Text:l.includes("button")?new WPTB_Button:void 0,this.classList.remove("visible"),null==r?(o.appendChild(t.getDOMElement()),o.appendChild(new s)):(o.insertBefore(t.getDOMElement(),r),o.insertBefore(new s,r))):(n=(t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).nextSibling,a=t.parentNode,null!=n&&a.removeChild(n),null==r?(o.appendChild(t),o.appendChild(new s)):(o.insertBefore(t,r),o.insertBefore(new s,r))),this.classList.remove("visible")},!e)return t};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var WPTB_Stringifier=function e(t){1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(null==t)return"";if(null==t.tagName&&3==t.nodeType)return t.nodeValue;var n=[],a=void 0,l=!1,r=[].concat(_toConsumableArray(t.attributes)),o=[],s=[];if((t.parentNode.classList.contains("wptb-list-item-content")||t.parentNode.classList.contains("mce-content-body"))&&"p"==t.tagName.toLowerCase()?(a=t.childNodes,l=!0):a=0<t.children.length?t.children:t.childNodes,console.log(t),0<r.length)for(var i=0;i<r.length;i++)o[i]=[r[i].name,r[i].value];else o="";if(0<a.length)for(var d=0;d<a.length;d++){var c=e(a[d]);Array.isArray(c)||l?s[d]=c:"string"==typeof c&&c&&(s=c)}else s="";return n.push(t.tagName.toLowerCase(),o,s),n},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},array=[],WPTB_Table=function(e,t){var f,n,a,b,l=document.getElementsByClassName("wptb-settings-items"),r=document.getElementsByClassName("wptb-table-setup")[0],y=function(e){var t,n=this.rowSpan,a=this.colSpan,l=document.getElementsByClassName("no-cell-action"),r=document.getElementsByClassName("single-action"),o=document.getElementsByClassName("multiple-select-action"),s=v(this),i=s[0],d=s[1];if(document.select.isActivated()){if(this.className.match(/wptb-highlighted/)){this.classList.remove("wptb-highlighted");for(var c=0;c<n;c++)for(var m=0;m<a;m++)array[i+c][d+m]=0}else{this.classList.add("wptb-highlighted");for(c=0;c<n;c++)for(m=0;m<a;m++)array[i+c][d+m]=1}if(0===(t=document.getElementsByClassName("wptb-highlighted").length)){for(c=0;c<o.length;c++)o[c].classList.remove("visible");for(c=0;c<l.length;c++)l[c].classList.add("visible");for(c=0;c<r.length;c++)r[c].classList.remove("visible")}else if(1===t){for(c=0;c<o.length;c++)o[c].classList.remove("visible");for(c=0;c<l.length;c++)l[c].classList.remove("visible");for(c=0;c<r.length;c++)r[c].classList.add("visible")}else{for(c=0;c<o.length;c++)f.isSquare(array)?o[c].classList.add("visible"):o[c].classList.remove("visible");for(c=0;c<l.length;c++)l[c].classList.remove("visible");for(c=0;c<r.length;c++)r[c].classList.remove("visible")}}},i=function(){for(var e,t=[],n=[],a=0;a<b;a++)t[a]=0;for(a=0;a<f.rows.length;a++){e=[];var l=f.rows[a].getElementsByTagName("td");for(items=0;items<l.length;items++){for(var r=0;r<l[items].colSpan;r++)e.push(1);if(1<l[items].rowSpan)for(r=0;r<l[items].colSpan;r++)t[items+r]={justAssigned:!0,amount:l[items].rowSpan}}for(r=0;r<b;r++)"object"==_typeof(t[r])&&0<t[r].amount&&(t[r].amount--,t[r].justAssigned?t[r].justAssigned=!1:e.push(1));n.push(e)}return n},d=function(e){for(var t=[],n=0;n<b;n++)t[n]=0;if(-1==e)return t;for(n=0;n<=e;n++){cellsBuffer=f.rows[n].getElementsByTagName("td");for(var a=cellPointer=0;a<b;a+=stepsToMove)if(stepsToMove=1,t[a])t[a]--;else if(celda=cellsBuffer[cellPointer++],1<celda.rowSpan){for(k=0;k<celda.colSpan;k++)t[a+k]=celda.rowSpan-1;stepsToMove=celda.colSpan}else 1<celda.colSpan&&(stepsToMove=celda.colSpan)}return t},h=function(e){for(var t=0;t<e.length;t++){for(var n=0;n<e[t].length;n++)" "+e[t][n];"\n"}f.isSquare(e)},w=function(){for(var e=document.getElementsByClassName("no-cell-action"),t=document.getElementsByClassName("single-action"),n=document.getElementsByClassName("multiple-select-action"),a=f.getElementsByClassName("wptb-highlighted");a.length;)a[0].classList.remove("wptb-highlighted");for(var l=0;l<array.length;l++)for(var r=0;r<array[l].length;r++)array[l][r]=0;for(l=0;l<n.length;l++)n[l].classList.remove("visible");for(l=0;l<e.length;l++)e[l].classList.add("visible");for(l=0;l<t.length;l++)t[l].classList.remove("visible")},v=function(e){for(var t=[],n=0;n<b;n++)t[n]=0;for(n=0;n<f.rows.length;n++)for(var a=f.rows[n].getElementsByTagName("td"),l=cellPointer=0;l<b;l+=stepsToMove)if(stepsToMove=1,t[l])t[l]--;else{var r=a[cellPointer++];if(r==e)return[n,l];if(1<r.rowSpan){for(k=0;k<r.colSpan;k++)t[l+k]=r.rowSpan-1;stepsToMove=r.colSpan}else 1<r.colSpan&&(stepsToMove=r.colSpan)}};if(jQuery("#wptb-table-header-bg").val(""),jQuery("#wptb-even-row-bg").val(""),jQuery("#wptb-odd-row-bg").val(""),jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-inner-border-number,#wptb-table-inner-border-slider").val("0"),jQuery("#wptb-table-border-number,#wptb-table-border-slider").val("0"),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var o=0;o<l.length;o++)"wptb-apply-inner-border"!==l[o].id&&l[o].classList.add("visible");(f=document.createElement("table")).classList.add("wptb-preview-table"),(n=f.insertRow(-1)).classList.add("wptb-table-head","wptb-row");for(o=0;o<e;o++)(a=new WPTB_Cell(y)).setCoords(0,o),n.appendChild(a.getDOMElement());for(o=1;o<t;o++){(n=f.insertRow(-1)).classList.add("wptb-row");for(var s=0;s<e;s++)(a=new WPTB_Cell(y)).setCoords(o,s),n.appendChild(a.getDOMElement())}}else{var c=document.getElementsByClassName("wptb-preview-table");if(0<c.length){var m=(f=c[0]).getElementsByTagName("td");if(0<m.length)for(var p=0;p<m.length;p++)WPTB_Cell(y,m[p])}}f.toggleTableEditMode=function(){var e=document.getElementById("edit-bar");e.classList.contains("visible")?(document.select.deactivateMultipleSelectMode(),e.classList.remove("visible")):(document.select.activateMultipleSelectMode(),e.classList.add("visible"))},f.recalculateIndexes=function(){for(var e,t=this.getElementsByTagName("tr"),n=0,a=0;a<t.length;a++){e=t[a].getElementsByTagName("td");for(var l=0;l<e.length;l++)0==a?(e[l].parentNode.className="",e[l].style.backgroundColor=jQuery("#wptb-table-header-bg").val(),e[l].parentNode.classList.add("wptb-row","wptb-table-head")):(e[l].style.backgroundColor=a%2==0?jQuery("#wptb-odd-row-bg").val():jQuery("#wptb-even-row-bg").val(),e[l].parentNode.className="",e[l].parentNode.classList.add("wptb-row")),e[l].dataset.xIndex=l,e[l].dataset.yIndex=a;n<l&&(n=l)}this.columns=n},f.addColumnEnd=function(){for(var e=0;e<f.rows.length;e++)td=new WPTB_Cell(y),f.rows[e].appendChild(td.getDOMElement()),array[e].push(0);b++,recalculateIndexes(),w()},f.addColumnStart=function(){for(var e=0;e<f.rows.length;e++)td=new WPTB_Cell(y),firstCell=f.rows[e].getElementsByTagName("td")[0],firstCell?f.rows[e].insertBefore(td.getDOMElement(),firstCell):f.rows[e].appendChild(td.getDOMElement()),array[e].push(0);b++,recalculateIndexes(),w()},f.addColumnAfter=function(e){for(var t,n,a,l,r,o=f.rows,s=document.querySelector(".wptb-highlighted"),i=null!=e&&"number"==typeof e?e:v(s)[1],d=!1,c=[],m=0;m<b;m++)c.push(0);for(m=0;m<o.length;m++){cellPointer=0,t=o[m].getElementsByTagName("td"),d=!1;for(var p=0;p<b;p+=n){if(n=1,d){a=new WPTB_Cell(y),r&&o[m].contains(r)?(l=r.nextSibling)?o[m].insertBefore(a.getDOMElement(),l):o[m].appendChild(a.getDOMElement()):o[m].insertBefore(a.getDOMElement(),t[0]);break}if(0<c[p])i==p&&(d=!0);else if(1<(r=t[cellPointer++]).rowSpan){n=r.colSpan;for(var u=0;u<r.colSpan;u++)c[p+u]=r.rowSpan,p+u==i&&(d=!0)}else if(1<r.colSpan){n=r.colSpan;for(u=0;u<r.colSpan;u++)p+u==i&&(d=!0)}else p==i&&(d=!0)}for(var g=0;g<b;g++)0<c[g]&&c[g]--}for(m=0;m<array.length;m++)array[m].push(0);b++,h(array),f.recalculateIndexes(),w()},f.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),t=v(e)[1];0===t?f.addColumnStart():f.addColumnAfter(t-1)},f.addRowToTheEnd=function(){for(var e,t,n=f.insertRow(-1),a=0;a<b;a++)e=new WPTB_Cell(y),n.appendChild(e.getDOMElement());t=Array.from(array[0]),array.push(t),h(array),f.recalculateIndexes(),w()},f.addRowToTheStart=function(){for(var e=f.insertRow(0),t=0;t<b;t++)td=new WPTB_Cell(y),e.appendChild(td.getDOMElement());aux=Array.from(array[0]),array.push(aux),h(array),f.recalculateIndexes(),w()},f.addRowBefore=function(){var e,t=document.querySelector(".wptb-highlighted"),n=v(t)[0],a=f.insertRow(n),l=d(n-1);noPending=l.filter(function(e){return 0==e});for(var r=0;r<noPending.length;r++){var o=new WPTB_Cell(y);a.appendChild(o.getDOMElement())}arr=i();for(r=0;r<arr.length;r++)if(arr[r].length,arr[r].length<b)for(var s=arr[r].length;s<b;s++)o=new WPTB_Cell(y),f.rows[r].appendChild(o.getDOMElement());e=Array.from(array[0]),array.push(e),h(array),f.recalculateIndexes(),w()},f.addRowAfter=function(){var e,t=document.querySelector(".wptb-highlighted"),n=v(t)[0],a=f.insertRow(n+1),l=d(n);noPending=l.filter(function(e){return 0==e});for(var r=0;r<noPending.length;r++)td=new WPTB_Cell(y),a.appendChild(td.getDOMElement());arr=i();for(r=0;r<arr.length;r++)if(arr[r].length,arr[r].length<b)for(var o=arr[r].length;o<b;o++)td=new WPTB_Cell(y),f.rows[r].appendChild(td.getDOMElement());e=Array.from(array[0]),array.push(e),h(array),f.recalculateIndexes(),w()},f.isSquare=function(e){for(var t,n,a=-1,l=-1,r=-1,o=-1,s=0,i=0;i<e.length;i++){for(var d=0;d<e[i].length;d++)if(1==e[i][d]){a=i,l=d;break}if(-1!==a&&-1!==l)break}for(i=e.length-1;-1<i;i--){for(d=e[i].length-1;-1<d;d--)if(1==e[i][d]){r=i,o=d;break}if(-1!==r&&-1!==o)break}for(i=a;i<r;i++)for(d=l;d<o;d++)if(0==e[i][d]||null==e[i][d])return!1;for(i=0;i<e.length;i++)for(d=0;d<e[i].length;d++)1==e[i][d]&&s++;return(t=r-a+1)*(n=o-l+1)===s&&[t,n]},f.mergeCells=function(){for(var e=f.isSquare(array),t=e[0],n=e[1],a=document.querySelector(".wptb-highlighted"),l=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),r=0;r<l.length;r++){l[r].parentNode.removeChild(l[r])}a.colSpan=n,a.rowSpan=t,w()},f.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0];e.rowSpan,e.colSpan;e.rowSpan=1,e.colSpan=1,f.addLackingCells(),w()},f.findRowspannedCells=function(e){var t,n=[];if(actualPoints=function(e){for(var t=f.rows[e].getElementsByTagName("td"),n=0,a=0;a<t.length;a++)n+=t[a].colSpan;return n}(e),actualPoints===b)return[];t=b-actualPoints;for(var a=e-1;0<=a&&t;a--){var l=f.rows[a].getElementsByTagName("td");for(a=0;a<l.length;a++)1<l[a].rowSpan&&(n.push(l[a]),t-=l[a].colSpan)}return n},f.addLackingCells=function(){for(var e=[],t=0;t<f.rows.length;t++)e.push(0);for(t=0;t<f.rows.length;t++)for(var n=f.rows[t].getElementsByTagName("td"),a=0;a<n.length;a++)if(1<n[a].rowSpan)for(var l=1;l<n[a].rowSpan;l++)e[t+l]++;for(t=0;t<f.rows.length;t++){n=f.rows[t].getElementsByTagName("td");var r=0;for(a=0;a<n.length;a++)r+=n[a].colSpan;r+=e[t],difference=b-r;for(a=0;a<difference;a++){var o=new WPTB_Cell(y);f.rows[t].appendChild(o.getDOMElement())}}},f.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=v(e)[0],n=f.findRowspannedCells(t);for(o=0;o<n.length;o++)n[o].rowSpan--;f.getElementsByTagName("tbody")[0].removeChild(f.rows[t]),array.pop(),w(),f.addLackingCells()},f.deleteColumn=function(){for(var e,t,n=document.querySelector(".wptb-highlighted"),a=v(n)[1],l=[],r=0;r<b;r++)l.push(0);for(r=0;r<f.rows.length;r++){e=f.rows[r].getElementsByTagName("td"),stepsToMove=1;for(var o=cellPointer=0;o<b;o+=stepsToMove)if(stepsToMove=1,0==l[o]){if(1<(t=e[cellPointer++]).rowSpan){stepsToMove=t.colSpan;for(var s=0;s<t.colSpan;s++)l[o+s]=t.rowSpan;if(o<a&&a<=o+s-1){t.colSpan--;break}}else if(1<t.colSpan&&(stepsToMove=t.colSpan,o<a&&a<=o+t.colSpan-1)){t.colSpan--;break}if(a==o){f.rows[r].removeChild(t);break}}for(var i=0;i<l.length;i++)0<l[i]&&l[i]--}b--;for(r=0;r<f.rows.length;r++)null!=array[r]&&array[r].pop();w()},document.getElementsByClassName("wptb-table-generator")[0].style.display="none",array=function(){for(var e=[],t=[],n=0;n<f.rows.length;n++){for(var a=f.rows[n].getElementsByTagName("td"),l=0,r=0;r<a.length;r++)l+=a[r].colSpan;e.push(l)}b=Math.max.apply(null,e);var o=f.rows.length;for(n=0;n<o;n++)for(t[n]=[],r=0;r<b;r++)t[n].push(0);return h(t),t}(),w(),h(array),r.appendChild(f),f.recalculateIndexes(),WPTB_LeftPanel()},WPTB_Text=function(e,t){if(null==t){t=document.createElement("div");var n=document.createElement("div"),a=document.createElement("p");n.classList.add("editable"),a.innerHTML=null!=e?e:"Text",n.appendChild(a),t.appendChild(n)}else t=t.cloneNode(!0);return this.kind="text",this.getDOMElement=function(){return t},applyGenericItemSettings(this),this};