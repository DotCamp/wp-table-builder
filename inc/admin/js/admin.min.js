var applyGenericItemSettings=function(r,e){var t,s,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=r.getDOMElement();if(null==e||1==a){t=document.counter.nextIndex(r.kind);for(var n=document.getElementsByClassName("wptb-ph-element"),l=[],i=0;i<n.length;i++){var d=new RegExp("wptb-element-"+r.kind+"-(\\d+)","i"),c=n[i].className.match(d);c&&l.push(c[1])}if(0<l.length)t=Math.max.apply(Math,l)+1;else t=1}else if(e&&!a){var p=e.split("-");t=p[p.length-1]}o.onmouseenter=function(e){if(!e.target.classList.contains("wptb-moving-mode")){var t=new WPTB_ActionsField;if(t.addActionField(1,o),t.setParameters(o),o.classList.remove("wptb-ondragenter"),"button"===r.kind){var a=o.querySelector("a"),n=a.querySelector("div");a.onclick=function(e){e.preventDefault()},WPTB_Helper.buttonsTinyMceInit(n)}else if("text"===r.kind)tinyMCE.init({target:o.childNodes[0],inline:!0,plugins:"link, paste",dialog_type:"modal",theme:"modern",menubar:!1,force_br_newlines:!1,force_p_newlines:!1,forced_root_block:"",fixed_toolbar_container:"#wpcd_fixed_toolbar",paste_as_text:!0,toolbar:"bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify",setup:function(e){e.on("change",function(e){var t=WPTB_Helper.findAncestor(o,"wptb-row");if(t.classList.contains("wptb-table-head")){var a=WPTB_Helper.findAncestor(t,"wptb-preview-table");WPTB_Helper.dataTitleColumnSet(a)}}),e.on("keydown",function(e){var t=new WPTB_ActionsField;t.addActionField(1,o),t.setParameters(o)}),e.on("keyup",function(e){var t=new WPTB_ActionsField;t.addActionField(1,o),t.setParameters(o),e.target.onblur=function(){(new WPTB_TableStateSaveManager).tableStateSet()}})},init_instance_callback:function(e){(window.currentEditor=e).on("focus",function(e){var t=document.getElementsByClassName("wptb-builder-panel")[0].offsetWidth;window.currentEditor&&55<=document.getElementById("wptb_builder").scrollTop&&"none"!=window.currentEditor.bodyElement.style.display?(document.getElementById("wpcd_fixed_toolbar").style.position="fixed",document.getElementById("wpcd_fixed_toolbar").style.right=t/2-document.getElementById("wpcd_fixed_toolbar").offsetWidth/2+"px",document.getElementById("wpcd_fixed_toolbar").style.top="100px"):(document.getElementById("wpcd_fixed_toolbar").style.position="static",delete document.getElementById("wpcd_fixed_toolbar").style.right,delete document.getElementById("wpcd_fixed_toolbar").style.top)})}});else if("list"===r.kind){s=o.getElementsByClassName("wptb-list-item-content");for(var l=0;l<s.length;l++)WPTB_Helper.listItemsTinyMceInit(s[l])}}},o.onmouseleave=function(e){var t=new WPTB_ActionsField;t.wptbActions&&"1"!=t.wptbActions.type||t.leaveFromField(e,o,1)};var m=document.getElementsByClassName("wptb-actions");if(0<m.length&&(m=m[0]),"text"==r.kind){new MutationObserver(function(e){var t=WPTB_Helper.findAncestor(o,"wptb-row");if(t.classList.contains("wptb-table-head")){var a=WPTB_Helper.findAncestor(t,"wptb-preview-table");WPTB_Helper.dataTitleColumnSet(a)}}).observe(r.getDOMElement(),{attributes:!0,attributeFilter:["style"]})}else if("star_rating"==r.kind)for(var u=o.getElementsByClassName("wptb-rating-star"),b=0;b<u.length;b++){var g=u[b];WPTB_Helper.starRatingEventHandlersAdd(g);var w=g.querySelector(".wptb-rating-star-zero-set");w&&(w.onclick=function(e){var t=WPTB_Helper.findAncestor(e.target,"wptb-rating-stars-list");if(t)for(var a=t.children,n=0;n<a.length;n++)a[n].classList.remove("wptb-rating-star-selected-full"),a[n].classList.remove("wptb-rating-star-selected-half")})}var v=o.className.match(/wptb-element-(.+)-(\d+)/i);v&&o.classList.remove(v[0]),o.classList.contains("wptb-ph-element")||o.classList.add("wptb-ph-element"),o.classList.contains("wptb-element-"+r.kind+"-"+t)||o.classList.add("wptb-element-"+r.kind+"-"+t),new WPTB_ElementOptions(r,t,e),document.counter.increment(r.kind)},WPTB_ActionsField=function p(){var m=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(e,o){var t=document.getElementsByTagName("body")[0],a=document.getElementsByClassName("wptb-actions");if(0!=a.length){var n=a[0].activeElem;for(n&&n.classList.remove("wptb-directlyhovered");0!=a.length;)a[0].parentNode.removeChild(a[0])}if(1==e){var l=void 0,r=void 0,s=void 0;l=document.createElement("span"),r=document.createElement("span"),s=document.createElement("span"),(a=document.createElement("div")).classList.add("wptb-actions"),l.classList.add("dashicons","dashicons-trash","wptb-delete-action"),r.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),s.classList.add("dashicons","dashicons-move","wptb-move-action"),s.draggable=!0,a.appendChild(s),a.appendChild(r),a.appendChild(l),t.appendChild(a),a.activeElem=o,a.type=1,l.onclick=function(e){var t=e.target.parentNode.activeElem,a=t.parentNode;if(a.removeChild(t),"text"==t.kind){var n=a.parentNode;if(n.classList.contains("wptb-table-head")){var l=WPTB_Helper.findAncestor(n,"wptb-preview-table");WPTB_Helper.dataTitleColumnSet(l)}}(new p).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet()},r.onclick=function(e){var t=void 0,a=void 0,n=e.target.parentNode.activeElem,l=n.cloneNode(!0);l.classList.remove("wptb-directlyhovered"),a=n.className.match(/wptb-element-(.+)-(\d+)/i)[1];var r=n.parentNode;if("list"==a){for(var s=[],o=n.querySelectorAll("ul li .wptb-list-item-content"),i=0;i<o.length;i++)s.push(o[i].innerHTML);t=new WPTB_List(s,l),r.insertBefore(t.getDOMElement(),n.nextSibling)}else if("text"==a)t=new WPTB_Text(l.childNodes[0].innerHTML,l),r.insertBefore(t.getDOMElement(),n.nextSibling);else if("image"==a)t=new WPTB_Image("",n),r.insertBefore(t.getDOMElement(),n.nextSibling);else if("button"==a){var d=l.childNodes[0].querySelector("p").innerHTML;t=new WPTB_Button(d,l),r.insertBefore(t.getDOMElement(),n.nextSibling)}else(a="star_rating")&&(t=new WPTB_StarRating(l),r.insertBefore(t.getDOMElement(),n.nextSibling));WPTB_innerElementSet(t.getDOMElement()),new p(1,n).setParameters(n),(new WPTB_TableStateSaveManager).tableStateSet()},s.ondragstart=function(e){var t,a,n=WPTB_Helper.dragImagesArr(),l=e.target.parentNode.activeElem;a=(t=l.className.match(/wptb-element-(.+)-(\d+)/i))[1],l.classList.add("wptb-moving-mode"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(n[a],0,0),e.dataTransfer.setData("node","wptb-element-"+t[1]+"-"+t[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+t[1]+"-"+t[2]),e.dataTransfer.setData("wptbElIndic-"+t[1],"wptbElIndic-"+t[1]);var r=e.target.parentNode.activeElem;if("text"==r.kind){var s=r.parentNode.parentNode;if(s.classList.contains("wptb-table-head")){var o=WPTB_Helper.findAncestor(s,"wptb-preview-table");WPTB_Helper.dataTitleColumnSet(o)}}m.actionsHide()},a.style.display="block",m.wptbActions=a}else if(2==e){var i=void 0,d=void 0;i=document.createElement("span"),d=document.createElement("span"),(a=document.createElement("span")).classList.add("wptb-actions"),i.classList.add("dashicons","dashicons-trash","wptb-delete-action"),d.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),a.append(d,i),t.appendChild(a),a.activeElem=o;var c=WPTB_Helper.findAncestor(o,"wptb-directlyhovered");c&&c.classList.remove("wptb-directlyhovered"),a.type=2,i.onclick=function(e){var t=e.target.parentNode.activeElem,a=t.parentNode;new p(4).actionsRemove(),a.removeChild(t),WPTB_Helper.listItemsRecalculateIndex(a),(new WPTB_TableStateSaveManager).tableStateSet()},d.onclick=function(e){var t=o.getBoundingClientRect(),a=t.top,n=e.target.parentNode.activeElem,l=n.querySelector(".wptb-list-item-content").innerHTML,r=new WPTB_ListItem(l,n,!0);n.parentNode.insertBefore(r.getDOMElement(),o.nextSibling),WPTB_Helper.listItemsTinyMceInit(r.getDOMElement().firstChild);var s=o.getElementsByClassName("wptb-list-item-content");(0<s.length&&(s=s[0]),setTimeout(function(){s.innerHTML=l,WPTB_Helper.listItemsRecalculateIndex(n.parentNode)},5),a!=(t=o.getBoundingClientRect()).top)&&new p(2,o).setParameters(o);(new WPTB_TableStateSaveManager).tableStateSet()},a.style.display="block",m.wptbActions=a}},this.setParameters=function(t){if(!m.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(m.wptbActions=e[0])}m.wptbActions&&(m.wptbActions.style.display="block");var a=t.getBoundingClientRect(),n=document.getElementsByClassName("wptb-container")[0],l=function(){var e=t.getBoundingClientRect();m.wptbActions.style.top=parseFloat(e.top)-15+"px"};n.removeEventListener("scroll",l,!1),m.wptbActions.style.top=parseFloat(a.top)-15+"px",m.wptbActions.style.left=parseFloat(a.right)-parseFloat(m.wptbActions.clientWidth)+1+"px",m.wptbActions.style.display="block",t.classList.add("wptb-directlyhovered"),n.addEventListener("scroll",l,!1)},this.leaveFromField=function(e,t,a){if(e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-actions")||e.relatedTarget.classList.contains("wptb-move-action")||e.relatedTarget.classList.contains("wptb-duplicate-action")||e.relatedTarget.classList.contains("wptb-delete-action")))return m.wptbActions||(m.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void(m.wptbActions.onmouseleave=function(e){if(null!=e.relatedTarget&&e.relatedTarget!=m.wptbActions.activeElem&&WPTB_Helper.findAncestor(e.relatedTarget,"wptb-directlyhovered")!=m.wptbActions.activeElem&&(e.target.activeElem.classList.remove("wptb-directlyhovered"),m.wptbActions.style.display="none",2==m.wptbActions.type)){var t=new p;t.addActionField(1,e.relatedTarget.parentNode.parentNode),t.setParameters(e.relatedTarget.parentNode.parentNode)}});t.classList.remove("wptb-directlyhovered"),m.wptbActions.style.display="none",2==m.wptbActions.type&&e.relatedTarget&&"ul"==e.relatedTarget.localName&&(m.addActionField(1,e.relatedTarget.parentNode),m.setParameters(e.relatedTarget.parentNode))},this.actionsRemove=function(){if(!m.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(m.wptbActions=e[0])}m.wptbActions&&m.wptbActions.parentNode.removeChild(m.wptbActions)},this.actionsHide=function(){if(!m.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(m.wptbActions=e[0])}m.wptbActions&&(m.wptbActions.style.opacity=0)}};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}document.addEventListener("DOMContentLoaded",function(){var e=WPTB_Helper.detectMode();if(e){var a=new XMLHttpRequest,t=ajaxurl+"?action=get_table&id="+e;a.open("GET",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(e){if(4!=this.readyState||200!=this.status);else{var t=JSON.parse(a.responseText);document.getElementById("wptb-setup-name").value=t[0],t[1]?(document.getElementsByClassName("wptb-table-generator")[0].style.display="none",document.getElementsByClassName("wptb-table-setup")[0].appendChild(WPTB_Parser(t[1])),WPTB_Table(),WPTB_LeftPanel(),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet()):document.getElementsByClassName("wptb-table-generator")[0].style.display="table"}},a.send(null)}else document.getElementsByClassName("wptb-table-generator")[0].style.display="table";document.counter=new ElementCounters,document.select=new MultipleSelect,WPTB_Initializer(),settings=WPTB_Settings()});var WPTB_Button=function(e,t){var a=document.createElement("div"),n=document.createElement("div"),l=document.createElement("a"),r=document.createElement("div"),s=document.createElement("p"),o=void 0,i=!1;if(a.classList.add("wptb-button-container","wptb-size-M","wptb-"),n.classList.add("wptb-button-wrapper"),r.classList.add("wptb-button"),s.innerHTML=null!=e?e:"Button Text",t){var d=t.className.match(/wptb-element-((.+-)\d+)/i);d&&Array.isArray(d)&&(o=d[1],i=!0);var c=[].concat(_toConsumableArray(t.attributes));if(0<c.length)for(var p=0;p<c.length;p++)a.setAttribute(c[p].name,c[p].value);var m=t.querySelector(".wptb-button-wrapper");if(m){var u=[].concat(_toConsumableArray(m.attributes));if(0<u.length)for(var b=0;b<u.length;b++)"style"==u[b].name&&n.setAttribute(u[b].name,u[b].value)}var g=t.querySelector("a");if(g)if(0<(v=[].concat(_toConsumableArray(g.attributes))).length)for(var w=0;w<v.length;w++)"style"!=v[w].name&&"href"!=v[w].name&&"target"!=v[w].name||l.setAttribute(v[w].name,v[w].value);var v,h=t.querySelector(".wptb-button");if(h)if(0<(v=[].concat(_toConsumableArray(h.attributes))).length)for(var y=0;y<v.length;y++)"style"==v[y].name&&r.setAttribute(v[y].name,v[y].value)}return n.appendChild(l),l.appendChild(r),r.appendChild(s),a.appendChild(n),this.kind="button",this.getDOMElement=function(){return a},applyGenericItemSettings(this,o,i),this},WPTB_Cell=function(e,o){if(!o){(o=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px";var t=jQuery("#wptb-table-inner-border-number").val();""!=t&&0!=parseInt(t)&&(o.style.border=t+"px solid "+jQuery("#wptb-table-border-color").val()),o.classList.add("wptb-droppable","wptb-cell")}o.draggable=!1,e&&(o.onclick=e),WPTB_innerElementSet(o);var i=o.getElementsByClassName("wptb-ph-element");if(0<i.length)for(var a=function(e){var t=o.getElementsByClassName("wptb-space-between");if(0<t.length)for(var a=0;a<t.length;a++)WPTB_Space(t[a]);i[e].getDOMElement=function(){return i[e]},WPTB_innerElementSet(i[e]);var n=i[e].className.match(/wptb-element-((.+-)\d+)/i);if(n&&Array.isArray(n)){var l=n[1].split("-");if(i[e].kind=l[0],applyGenericItemSettings(i[e],n[1]),"list"==i[e].kind){var r=i[e].getElementsByTagName("li");if(0<r.length)for(var s=0;s<r.length;s++)WPTB_ListItem(void 0,r[s])}}},n=0;n<i.length;n++)a(n);return this.getDOMElement=function(){return o},this.setCoords=function(e,t){var a=this.getDOMElement();a.dataset.yIndex=e,a.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},o.getCellDimensions=function(){var e=window.getComputedStyle(this,null),t=e.getPropertyValue("padding-left"),a=e.getPropertyValue("padding-right"),n=e.getPropertyValue("border-left-width"),l=e.getPropertyValue("border-right-width"),r=e.getPropertyValue("padding-top"),s=e.getPropertyValue("padding-bottom"),o=e.getPropertyValue("border-top-width"),i=e.getPropertyValue("border-bottom-width");return{width:parseFloat(this.offsetWidth,10)-parseFloat(t,10)-parseFloat(a,10)-parseFloat(n,10)-parseFloat(l,10),height:parseFloat(this.offsetHeight,10)-parseFloat(r,10)-parseFloat(s,10)-parseFloat(o,10)-parseFloat(i,10)}},this},WPTB_DropHandle=function(o,e){var i=void 0,d=void 0;if(0==document.getElementsByClassName("wptb-drop-handle").length){(i=document.createElement("div")).classList.add("wptb-drop-handle"),(d=document.createElement("div")).classList.add("wptb-drop-border-marker");var t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),l=document.createElement("div");t.classList.add("wptb-drop-border-marker-top"),a.classList.add("wptb-drop-border-marker-right"),n.classList.add("wptb-drop-border-marker-bottom"),l.classList.add("wptb-drop-border-marker-left"),d.appendChild(t),d.appendChild(a),d.appendChild(n),d.appendChild(l);var r=document.getElementsByTagName("body");0<r.length&&(r[0].appendChild(i),r[0].appendChild(d)),i.ondragenter=function(){},i.ondragover=function(e){e.preventDefault()},i.ondragleave=function(){},i.ondrop=function(e){e.preventDefault();var t=void 0;e.dataTransfer.getData("wptbElement")?t=(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():((t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),t.classList.remove("wptb-moving-into-same-elem"),t.wptbMovingMode=1);var a=void 0;if("Drop Here"==i.dataset.text)"td"==(o=i.getDOMParentElement()).nodeName.toLowerCase()&&(a=i.getDOMParentElement()).appendChild(t);else{var n=i.getDOMParentElement();if(a=n.parentNode,"Above Element"==i.dataset.text)a.insertBefore(t,n);else if("Below Element"==i.dataset.text){var l=n.nextSibling;a.insertBefore(t,l)}}var r=a.parentNode;if(r.classList.contains("wptb-table-head")){var s=WPTB_Helper.findAncestor(r,"wptb-preview-table");WPTB_Helper.dataTitleColumnSet(s)}(i.style.display="none",d.style.display="none",WPTB_innerElementSet(t),console.log(t),t.classList.contains("wptb-image-container")&&1!=t.wptbMovingMode)||((new WPTB_TableStateSaveManager).tableStateSet(),t.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){i.style.display="none",d.style.display="none"}}else i=document.getElementsByClassName("wptb-drop-handle")[0],d=document.getElementsByClassName("wptb-drop-border-marker")[0];if(!o||"td"!=o.nodeName.toLowerCase()||0==o.getElementsByClassName("wptb-ph-element").length){var s=void 0;if("td"==o.localName?s=o.parentNode:"div"==o.localName&&o.classList.contains("wptb-ph-element")&&(s=o.parentNode.parentNode),s.classList.contains("wptb-table-head")){for(var c=e.dataTransfer.types,p=!1,m=0;m<c.length;m++){var u=c[m].match(/wptbelindic-([a-z]+)/i);if(u&&"text"!=u[1]){p=!0;break}}if(p)return}i.style.width=o.offsetWidth+"px";var b=o.offsetHeight,g=o.getBoundingClientRect(),w=parseFloat(g.left),v=void 0;if(i.style.left=w+"px",-1!=e.dataTransfer.types.indexOf("wptb-moving-mode")){var h=document.getElementsByClassName("wptb-moving-mode")[0];o==h?(i.classList.add("wptb-moving-into-same-elem"),d.classList.add("wptb-moving-into-same-elem")):(i.classList.remove("wptb-moving-into-same-elem"),d.classList.remove("wptb-moving-into-same-elem"))}if(i.getDOMParentElement=function(){return o},i.style.display="block",d.style.display="block","td"!=o.nodeName.toLowerCase()){var y=null==e.offsetY?e.layerY:e.offsetY;v=parseFloat(g.top)-parseFloat(11),i.dataset.text="Above Element",b/2<y&&(v=parseFloat(g.top)+b-1,i.dataset.text="Below Element")}else i.dataset.text="Drop Here",v=parseFloat(g.top)+b/2-5;i.style.top=v+"px",d.style.top=g.top+"px",d.style.left=g.left+"px",wptbDropBorderMarkerTop=d.querySelector(".wptb-drop-border-marker-top"),wptbDropBorderMarkerTop.style.width=parseFloat(o.offsetWidth)-parseFloat(1)+"px",wptbDropBorderMarkerRight=d.querySelector(".wptb-drop-border-marker-right"),wptbDropBorderMarkerRight.style.height=parseFloat(g.bottom)-parseFloat(g.top)-1+"px",wptbDropBorderMarkerRight.style.left=wptbDropBorderMarkerTop.style.width,wptbDropBorderMarkerBottom=d.querySelector(".wptb-drop-border-marker-bottom"),wptbDropBorderMarkerBottom.style.width=wptbDropBorderMarkerTop.style.width,wptbDropBorderMarkerBottom.style.top=wptbDropBorderMarkerRight.style.height,wptbDropBorderMarkerLeft=d.querySelector(".wptb-drop-border-marker-left"),wptbDropBorderMarkerLeft.style.height=wptbDropBorderMarkerRight.style.height}},ElementCounters=function(){var t=[];return t.text=0,t.image=0,t.list=0,t.button=0,this.increment=function(e){e in t&&t[e]++},this.nextIndex=function(e){if(e in t)return t[e]+1},this},WPTB_ElementOptions=function(e,t,a){var n,l=e.getDOMElement();prop=document.querySelector(".wptb-"+e.kind+"-options-prototype").cloneNode(!0),prop.classList.remove("wptb-"+e.kind+"-options-prototype"),n="wptb-options-"+e.kind+"-"+t;for(var r=prop.getElementsByClassName("wptb-element-property"),s=0;s<r.length;s++)r[s].dataset.element=n;if(prop.classList.add(n),document.getElementById("element-options-group").appendChild(prop),a)if("button"==e.kind){var o=document.getElementsByClassName("wptb-element-"+a)[0],i=void 0,d=void 0,c=void 0,p=void 0;if(o&&(p=o.className.match(/wptb-size-([a-z]+)/i)),p&&Array.isArray(p)){var m=prop.getElementsByClassName("wptb-btn-size-btn");for(s=0;s<m.length;s++)m[s].classList.remove("selected"),m[s].innerHTML==p[1]&&m[s].classList.add("selected")}if(o&&(i=o.getElementsByClassName("wptb-button-wrapper"),d=o.getElementsByTagName("a"),c=o.getElementsByClassName("wptb-button")),i){var u=i[0].style.justifyContent,b="";"start"==u?b="left":"center"!=u&&u?"flex-end"==u&&(b="right"):b="center";var g=prop.getElementsByClassName("wptb-button-alignment-btn");for(s=0;s<g.length;s++)g[s].classList.remove("selected"),g[s].getAttribute("data-button_alignment")==b&&g[s].classList.add("selected")}if(0<d.length){var w=d[0].getAttribute("href"),v=d[0].getAttribute("target"),h=d[0].getAttribute("id"),y=prop.querySelector('input[data-type="button-link"]'),f=prop.querySelector('input[data-type="button-link-target"]'),B=f.getAttribute("id"),S=f.parentNode.getElementsByTagName("label")[0],T=prop.querySelector('input[data-type="button-id"]');B=B+"-"+a.split("-")[1],f.setAttribute("id",B),S.setAttribute("for",B),y.value=w,v&&"_blank"==v&&(f.checked=!0),T.value=h}if(c){var E=c[0].style.color,C=c[0].style.backgroundColor,x=prop.querySelector('input[data-type="button-text-color"]'),_=prop.querySelector('input[data-type="button-color"]');x.value=WPTB_Helper.rgbToHex(E),_.value=WPTB_Helper.rgbToHex(C)}}else if("image"==e.kind){var N=document.getElementsByClassName("wptb-element-"+a);if(0<N.length){var I=N[0].getElementsByTagName("a");if(0<I.length){var A=I[0];if(A){var P=void 0;P="none"!=A.style.float&&A.style.float?A.style.float:"center";var L=prop.getElementsByClassName("wptb-image-alignment-btn");for(s=0;s<L.length;s++)L[s].classList.remove("selected"),L[s].getAttribute("data-image_alignment")==P&&L[s].classList.add("selected");A.onclick=function(e){e.preventDefault()};var k=A.getAttribute("href"),W=prop.querySelector('input[data-type="image-link"]');k&&(W.value=k);var M=A.getAttribute("target"),H=prop.querySelector('input[data-type="image-link-target"]'),D=H.getAttribute("id"),q=H.parentNode.getElementsByTagName("label")[0];D=D+"-"+a.split("-")[1],H.setAttribute("id",D),q.setAttribute("for",D),M&&"_blank"==M&&(H.checked=!0);var F=A.style.width;if(F){var O=prop.querySelector('input[type="range"][data-type="image-size"]'),z=prop.querySelector('input[type="number"][data-type="image-size"]');O.value=parseInt(F),z.value=parseInt(F)}var R=A.getElementsByTagName("img");if(0<R.length){var j=R[0].getAttribute("alt");prop.querySelector('input[type="text"][data-type="alternative-text"]').value=j}}}}}else if("text"==e.kind){var Q=document.getElementsByClassName("wptb-element-"+a);if(0<Q.length){var V=Q[0].style.fontSize,G=Q[0].style.color,J=prop.querySelector('input[type="range"][data-type="font-size"]'),U=prop.querySelector('input[type="number"][data-type="font-size"]'),Y=prop.querySelector('input[type="text"][data-type="color"]');J.value=parseInt(V)?parseInt(V):10,U.value=parseInt(V)?parseInt(V):10,Y.value=WPTB_Helper.rgbToHex(G)}}else if("list"==e.kind){var X=document.getElementsByClassName("wptb-element-"+a);if(0<X.length){var K=X[0].querySelector("p").style.color;prop.querySelector('input[type="text"][data-type="list-text-color"]').value=WPTB_Helper.rgbToHex(K);var $=X[0].querySelectorAll("li");if(0<$.length){var Z=$[0].querySelector("p").classList;if(0<Z.length){var ee=prop.querySelector('select[data-type="list-class"]');if(ee){ee.value="unordered";for(var te=ee.parentNode.nextSibling,ae=0;ae<10&&"1"!=te.nodeType;ae++)te=te.nextSibling;if(te){var ne=te.getAttribute("id");te.setAttribute("id",ne+"-"+a),te.style.display="flex"}var le=prop.querySelector('select[data-type="list-style-type"]');le&&(le.parentNode.style.display="flex",Z.contains("wptb-list-style-type-disc")?le.value="disc":Z.contains("wptb-list-style-type-circle")?le.value="circle":Z.contains("wptb-list-style-type-square")?le.value="square":Z.contains("wptb-list-style-type-none")&&(le.value="none"))}}}var re=X[0].getElementsByClassName("wptb-list-item-content");if(0<re.length){for(var se=[],oe=0;oe<re.length;oe++){var ie=re[oe].querySelector("p");ie&&(ie.style.textAlign?se.push(ie.style.textAlign):se.push("left"))}var de=0,ce=0,pe=0;if(0<se.length)for(var me=0;me<se.length;me++)se[me]&&("left"==se[me]?de++:"center"==se[me]?ce++:"right"==se[me]&&pe++);var ue=prop.getElementsByClassName("wptb-list-alignment-btn"),be=Math.max(de,ce,pe),ge=void 0;de==be?ge="left":ce==be?ge="center":pe==be&&(ge="right");for(s=0;s<ue.length;s++)ue[s].classList.remove("selected"),ue[s].getAttribute("data-list_alignment")==ge&&ue[s].classList.add("selected")}}}else if("star_rating"==e.kind){var we=document.getElementsByClassName("wptb-element-"+a),ve=void 0;if(0<we.length){var he=(we=we[0]).querySelector("li");if(he){var ye=he.style.width,fe=prop.querySelector('input[type="range"][data-type="star-size"]'),Be=prop.querySelector('input[type="number"][data-type="star-size"]');if(fe.value=parseInt(ye)?parseInt(ye):10,Be.value=parseInt(ye)?parseInt(ye):10,he.querySelector("span")){var Se=prop.querySelector('input[type="text"][data-type="star-color"]'),Te=he.querySelector("span").style.fill;Se.value=WPTB_Helper.rgbToHex(Te)}}var Ee=we.querySelectorAll("li"),Ce=prop.querySelector('input[type="number"][data-type="stars-count"]');if(1==Ee.length&&"none"==Ee[0].style.display?Ce.value=0:Ce.value=Ee.length,we&&(ve=we.style.textAlign),ve)for(m=prop.getElementsByClassName("wptb-rating-alignment-btn"),s=0;s<m.length;s++)m[s].classList.remove("selected"),m[s].getAttribute("data-star_alignment")==ve&&m[s].classList.add("selected");var xe=we.querySelector(".wptb-success-box");if(xe){var _e=prop.querySelector('input[type="checkbox"][data-type="show-number-rating"]');if("block"==xe.style.display){_e.checked=!0;for(var Ne=prop.getElementsByClassName("wptb-numeral-rating-option-container"),Ie=0;Ie<Ne.length;Ie++)Ne[Ie].style.display="block"}else _e.checked=!1;var Ae=xe.querySelector(".wptb-text-message");if(Ae){var Pe=Ae.style.fontSize,Le=Ae.style.color,ke=prop.querySelector('input[type="range"][data-type="numeral-rating-size"]'),We=prop.querySelector('input[type="number"][data-type="numeral-rating-size"]'),Me=prop.querySelector('input[type="text"][data-type="numeral-rating-color"]');ke.value=parseInt(Pe)?parseInt(Pe):10,We.value=parseInt(Pe)?parseInt(Pe):10,Me.value=WPTB_Helper.rgbToHex(Le)}}}}if(l.onclick=function(){var e=this.className.match(/wptb-element-((.+-)\d+)/i),t=".wptb-"+e[2]+"options.wptb-options-"+e[1];document.getElementsByClassName("wptb-elements-container")[0].style.display="none",document.getElementsByClassName("wptb-settings-section")[0].style.display="none",document.getElementById("element-options-group").style.display="block";for(var a=document.getElementById("element-options-group").childNodes,n=0;n<a.length;n++)a[n].style&&(a[n].style.display="none");document.querySelector(t).style.display="block"},"button"==e.kind){var He=prop.getElementsByClassName("wptb-btn-size-btn");for(s=0;s<He.length;s++)He[s].onclick=function(){var e=this.innerHTML,t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=t[1],n=t[2],l=document.getElementsByClassName("wptb-element-"+a+"-"+n)[0];l.classList.remove("wptb-size-S"),l.classList.remove("wptb-size-M"),l.classList.remove("wptb-size-L"),l.classList.remove("wptb-size-XL"),l.classList.add("wptb-size-"+e);for(var r=this.parentNode.getElementsByClassName("wptb-btn-size-btn"),s=0;s<r.length;s++)r[s].classList.remove("selected");this.classList.add("selected"),(new WPTB_TableStateSaveManager).tableStateSet()}}if("star_rating"==e.kind)for(He=prop.getElementsByClassName("wptb-rating-alignment-btn"),s=0;s<He.length;s++)He[s].onclick=function(){var e=this.getAttribute("data-star_alignment"),t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=t[1],n=t[2];document.getElementsByClassName("wptb-element-"+a+"-"+n)[0].style.textAlign=e;for(var l=this.parentNode.getElementsByClassName("wptb-rating-alignment-btn"),r=0;r<l.length;r++)l[r].classList.remove("selected");this.classList.add("selected"),(new WPTB_TableStateSaveManager).tableStateSet()};if("list"==e.kind)for(He=prop.getElementsByClassName("wptb-list-alignment-btn"),s=0;s<He.length;s++)He[s].onclick=function(){for(var e=this.getAttribute("data-list_alignment"),t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=t[1],n=t[2],l=document.getElementsByClassName("wptb-element-"+a+"-"+n)[0].querySelectorAll("li"),r=0;r<l.length;r++){var s=l[r].querySelector("p");s&&(s.style.textAlign=e)}var o=this.parentNode.getElementsByClassName("wptb-list-alignment-btn");for(r=0;r<o.length;r++)o[r].classList.remove("selected");this.classList.add("selected"),(new WPTB_TableStateSaveManager).tableStateSet()};if("button"==e.kind)for(He=prop.getElementsByClassName("wptb-button-alignment-btn"),s=0;s<He.length;s++)He[s].onclick=function(){var e=this.getAttribute("data-button_alignment"),t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=t[1],n=t[2],l="";l="left"==e?"start":"right"==e?"flex-end":"center",document.getElementsByClassName("wptb-element-"+a+"-"+n)[0].getElementsByClassName("wptb-button-wrapper")[0].style.justifyContent=l;for(var r=this.parentNode.getElementsByClassName("wptb-button-alignment-btn"),s=0;s<r.length;s++)r[s].classList.remove("selected");this.classList.add("selected"),(new WPTB_TableStateSaveManager).tableStateSet()};if("image"==e.kind)for(He=prop.getElementsByClassName("wptb-image-alignment-btn"),s=0;s<He.length;s++)He[s].onclick=function(){var e=this.getAttribute("data-image_alignment"),t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=t[1],n=t[2],l="";l="left"==e?"left":"right"==e?"right":"none",document.getElementsByClassName("wptb-element-"+a+"-"+n)[0].querySelector(".wptb-image-wrapper a").style.float=l;for(var r=this.parentNode.getElementsByClassName("wptb-image-alignment-btn"),s=0;s<r.length;s++)r[s].classList.remove("selected");this.classList.add("selected"),(new WPTB_TableStateSaveManager).tableStateSet()};var De=prop.getElementsByClassName("wptb-element-property");for(s=0;s<De.length;s++){if(De[s].classList.contains("wptb-color-picker")&&jQuery(De[s]).wpColorPicker({change:function(e,t){WPTB_Helper.wpColorPickerChange(e,t),WPTB_Helper.wpColorPickerCheckChangeForTableStateSaving(e)},clear:function(e){WPTB_Helper.wpColorPickerChange(e)}}),De[s].classList.contains("wptb-stars-count-field")&&WPTB_Helper.numberImputSize(De[s],1,10),"font-size"===De[s].dataset.type||"image-size"===De[s].dataset.type||"star-size"===De[s].dataset.type||"numeral-rating-size"===De[s].dataset.type)De[s].parentNode.parentNode.getElementsByClassName("wptb-size-slider")[0].oninput=function(){this.parentNode.parentNode.getElementsByClassName("wptb-size-number")[0].value=this.value,this.parentNode.parentNode.getElementsByClassName("wptb-size-number")[0].onchange(event)};De[s].onchange=function(e){var t=this.dataset.element.match(/wptb-options-(.+)-(\d+)/i),a=t[1],n=t[2],l=document.getElementsByClassName("wptb-element-"+a+"-"+n)[0],r=this.value;switch(this.dataset.type){case"src":l.getElementsByTagName("img")[0].src=this.value;break;case"alternative-text":l.getElementsByTagName("img")[0].alt=this.value;break;case"image-link":l.getElementsByTagName("a")[0].href=WPTB_Helper.linkHttpCheckChange(this.value);break;case"image-link-target":1==this.checked?l.getElementsByTagName("a")[0].target="_blank":l.getElementsByTagName("a")[0].target="_self";break;case"image-link-nofollow":1==this.checked?l.getElementsByTagName("a")[0].rel="nofollow":l.getElementsByTagName("a")[0].removeAttribute("rel");break;case"image-size":l.getElementsByTagName("a")[0].style.width=this.value+"%",l.getElementsByTagName("a")[0].style.height="auto",this.parentNode.parentNode.getElementsByClassName("wptb-size-slider")[0].value=this.value;break;case"font-size":l.style.fontSize=r+"px",this.parentNode.parentNode.getElementsByClassName("wptb-size-slider")[0].value=this.value;break;case"rating-alignment":var s="";s="left"==this.value?"start":"right"==this.value?"right":"center",l.style.textAlign=s;break;case"button-link":this.value?l.getElementsByTagName("a")[0].href=WPTB_Helper.linkHttpCheckChange(this.value):l.getElementsByTagName("a")[0].removeAttribute("href");break;case"button-link-target":1==this.checked?l.getElementsByTagName("a")[0].target="_blank":l.getElementsByTagName("a")[0].target="_self";break;case"button-link-nofollow":1==this.checked?l.getElementsByTagName("a")[0].rel="nofollow":l.getElementsByTagName("a")[0].removeAttribute("rel");break;case"button-id":this.value?l.getElementsByTagName("a")[0].id=this.value:l.getElementsByTagName("a")[0].removeAttribute("id");case"button-color":break;case"list-class":var o=e.target.parentNode.parentNode.querySelector("[data-type=list-style-type]").parentNode,i=o.parentNode;if("unordered"==r){o.style.display="flex",i.querySelector(".wptb-list-icon-select-label").style.display="flex";for(var d=l.querySelectorAll("li"),c=0;c<d.length;c++){var p=d[c].querySelector("p");p.removeAttribute("class"),p.classList.add("wptb-list-style-type-disc")}i.querySelector("[data-type=list-style-type]").value="disc"}else{o.style.display="none",i.querySelector(".wptb-list-icon-select-label").style.display="none";var m=l.querySelectorAll("li");for(c=0;c<m.length;c++){m[c].querySelector("p").removeAttribute("class")}}break;case"list-style-type":for(m=l.querySelectorAll("li"),c=0;c<m.length;c++){var u=m[c].querySelector("p");u.removeAttribute("class"),u.classList.add("wptb-list-style-type-"+r.toLowerCase())}break;case"star-size":for(var b=l.querySelectorAll("li"),g=0;g<b.length;g++){b[g].style.width=r+"px",b[g].style.height=r+"px";for(var w=b[g].querySelectorAll("span"),v=0;v<w.length;v++)w[v].querySelector("svg")&&(w[v].style.width=r+"px",w[v].style.height=r+"px",w[v].querySelector("svg").style.width=r+"px")}break;case"show-number-rating":var h=WPTB_Helper.findAncestor(this,"wptb-star_rating-options").getElementsByClassName("wptb-numeral-rating-option-container");if(WPTB_Helper.starRatingTextMessageChenge(l),0<h.length){var y=l.querySelector(".wptb-text-message"),f=this.checked?"checked":"unchecked";if("checked"==f){for(var B=0;B<h.length;B++)h[B].style.display="block";y.parentNode.style.display="block"}else if("unchecked"==f){for(var S=0;S<h.length;S++)h[S].style.display="none";y.parentNode.style.display="none"}}break;case"numeral-rating-size":var T=l.querySelector(".wptb-text-message");T.style.fontSize=r+"px",T.style.height=r+"px",T.style.lineHeight=r+"px";break;case"stars-count":var E=l.querySelectorAll("li"),C=E.length;if(C<r)for(var x=r-C,_=E[E.length-1],N=_.parentNode,I=0;I<x;I++){var A=_.cloneNode(!0);A.removeAttribute("class"),A.setAttribute("class","wptb-rating-star"),A.dataset.value=parseInt(_.dataset.value)+I+1,WPTB_Helper.starRatingEventHandlersAdd(A),N.appendChild(A)}else if(r<C){var P=parseInt(C)-parseInt(r);0==r&&(P--,E[0].removeAttribute("class"),E[0].setAttribute("class","wptb-rating-star"),E[0].style.display="none");var L=E.length;for(c=0;c<P;c++)E[0].parentNode.removeChild(E[L-c-1])}else r==C&&1==C&&(E[0].style.display="inline-block");WPTB_Helper.starRatingTextMessageChenge(l)}e.target.classList.contains("wptb-size-slider")||e.target.classList.contains("wptb-size-slider")?e.target.onmouseup=function(){(new WPTB_TableStateSaveManager).tableStateSet()}:(new WPTB_TableStateSaveManager).tableStateSet()}}},WPTB_Helper={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":null},rgbToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},getDragImageCustom:function(e){var t=location.protocol+"//"+location.hostname,a=document.createElement("img");return a.src=t+"/wp-content/plugins/wp-table-builder/inc/admin/views/builder/icons/"+e+".png",a},dragImagesArr:function(){return{text:WPTB_Helper.getDragImageCustom("text"),image:WPTB_Helper.getDragImageCustom("image"),button:WPTB_Helper.getDragImageCustom("button"),list:WPTB_Helper.getDragImageCustom("list"),star_rating:WPTB_Helper.getDragImageCustom("half-filled-rating-star")}},listItemsRecalculateIndex:function(e){var t=e.querySelectorAll("p");if(0<t.length)for(var a=0;a<t.length;a++)t[a].dataset.listStyleTypeIndex=Number(a)+1+"."},listItemsTinyMceInit:function(e){tinyMCE.init({target:e,inline:!0,plugins:"link, paste",dialog_type:"modal",theme:"modern",menubar:!1,fixed_toolbar_container:"#wpcd_fixed_toolbar",paste_as_text:!0,toolbar:"bold italic strikethrough link unlink | alignleft aligncenter alignright alignjustify",setup:function(e){e.on("keydown",function(e){var t=e.target.parentNode;if(13==e.keyCode){e.preventDefault();var a=e.target.innerHTML,n=new WPTB_ListItem(a,t,!0);return t.parentNode.insertBefore(n.getDOMElement(),t),WPTB_Helper.listItemsTinyMceInit(n.getDOMElement().firstChild),e.target.querySelector("p").innerText="New List Item",void WPTB_Helper.listItemsRecalculateIndex(t.parentNode)}if("8"==e.keyCode||"46"==e.keyCode){var l=e.target.querySelector("p").innerHTML.replace(/<[^>]+>/g,"");if(""==(l=(l=l.replace(/\s+/g," ").trim()).replace(/&nbsp;/g,"").trim()))e.preventDefault(),e.target.querySelector("p").innerText="\n";else{var r=WPTB_Helper.getSelectionText();(r=(r=r.replace(/\s+/g," ").trim()).replace(/&nbsp;/g,"").trim())==l&&(e.preventDefault(),e.target.querySelector("p").innerText="\n")}}var s=e.target.parentNode,o=new WPTB_ActionsField;o.addActionField(2,s),o.setParameters(s)}),e.on("keyup",function(e){var t=e.target.parentNode,a=new WPTB_ActionsField;a.addActionField(2,t),a.setParameters(t),e.target.onblur=function(){(new WPTB_TableStateSaveManager).tableStateSet()}})},init_instance_callback:function(e){(window.currentEditor=e).on("focus",function(e){var t=document.getElementsByClassName("wptb-builder-panel")[0].offsetWidth;window.currentEditor&&55<=document.getElementById("wptb_builder").scrollTop&&"none"!=window.currentEditor.bodyElement.style.display?(document.getElementById("wpcd_fixed_toolbar").style.position="fixed",document.getElementById("wpcd_fixed_toolbar").style.right=t/2-document.getElementById("wpcd_fixed_toolbar").offsetWidth/2+"px",document.getElementById("wpcd_fixed_toolbar").style.top="100px"):(document.getElementById("wpcd_fixed_toolbar").style.position="static",delete document.getElementById("wpcd_fixed_toolbar").style.right,delete document.getElementById("wpcd_fixed_toolbar").style.top)})}})},buttonsTinyMceInit:function(n){tinyMCE.init({target:n,inline:!0,plugins:"link",dialog_type:"modal",theme:"modern",menubar:!1,fixed_toolbar_container:"#wpcd_fixed_toolbar",toolbar:"bold italic strikethrough",setup:function(e){e.on("keydown",function(e){13==e.keyCode&&e.preventDefault();var t=WPTB_Helper.findAncestor(n,"wptb-button-container"),a=new WPTB_ActionsField;a.addActionField(1,t),a.setParameters(t)}),e.on("keyup",function(e){var t=WPTB_Helper.findAncestor(n,"wptb-button-container"),a=new WPTB_ActionsField;a.addActionField(1,t),a.setParameters(t),e.target.onblur=function(){(new WPTB_TableStateSaveManager).tableStateSet()}})},init_instance_callback:function(e){(window.currentEditor=e).on("focus",function(e){var t=document.getElementsByClassName("wptb-builder-panel")[0].offsetWidth;window.currentEditor&&55<=document.getElementById("wptb_builder").scrollTop&&"none"!=window.currentEditor.bodyElement.style.display?(document.getElementById("wpcd_fixed_toolbar").style.position="fixed",document.getElementById("wpcd_fixed_toolbar").style.right=t/2-document.getElementById("wpcd_fixed_toolbar").offsetWidth/2+"px",document.getElementById("wpcd_fixed_toolbar").style.top="100px"):(document.getElementById("wpcd_fixed_toolbar").style.position="static",delete document.getElementById("wpcd_fixed_toolbar").style.right,delete document.getElementById("wpcd_fixed_toolbar").style.top)})}})},linkHttpCheckChange:function(e){if(e){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))return e;var t=e.split("/"),a=void 0;return Array.isArray(t)&&0<t.length&&(a=t[t.length-1]),document.location.protocol+"//"+a}return""},dataTitleColumnSet:function(e){for(var t=e.rows,a=t[0],n=getComputedStyle(a),l=a.children,r={},s=0;s<l.length;s++){for(var o=l[s].children,i=0;i<o.length;i++){var d=o[i];if(d.classList.contains("wptb-ph-element"))if("text"==d.className.match(/wptb-element-(.+)-(\d+)/i)[1]){var c=d.querySelector("p"),p=c.textContent,m=c.style.textAlign;r[l[s].dataset.xIndex]=[p,d.style.fontSize,d.style.color,n.backgroundColor,m];break}}r[l[s].dataset.xIndex]||(r[l[s].dataset.xIndex]=["","","",n.backgroundColor,""])}for(var u=1;u<t.length;u++)for(var b=t[u].children,g=0;g<b.length;g++)r[b[g].dataset.xIndex]?(b[g].dataset.wptbTitleColumn=r[b[g].dataset.xIndex][0],b[g].dataset.wptbTitleColumnFontSize=r[b[g].dataset.xIndex][1],b[g].dataset.wptbTitleColumnColor=r[b[g].dataset.xIndex][2],b[g].dataset.wptbTitleBackgroundColor=r[b[g].dataset.xIndex][3],b[g].dataset.wptbTitleAlign=r[b[g].dataset.xIndex][4]):(b[g].dataset.wptbTitleColumn="",b[g].dataset.wptbTitleColumnFontSize="",b[g].dataset.wptbTitleColumnColor="",b[g].dataset.wptbTitleBackgroundColor="",b[g].dataset.wptbTitleAlign="")},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},settingsPanelClear:function(){document.getElementById("wptb-adaptive-table-checkbox").checked=!1,document.getElementById("wptb-top-row-as-header").checked=!1,document.getElementById("wptb-table-border-slider").value=0,document.getElementById("wptb-table-border-number").value=0,document.getElementById("wptb-inner-border-check").checked=!1,document.getElementById("wptb-apply-inner-border").classList.remove("visible"),document.getElementById("wptb-table-inner-border-slider").value=1,document.getElementById("wptb-table-inner-border-number").value=1,WPTB_Helper.wpColorPickerClear("wptb-table-border-color",!0),WPTB_Helper.wpColorPickerClear("wptb-table-header-bg",!0),WPTB_Helper.wpColorPickerClear("wptb-even-row-bg",!0),WPTB_Helper.wpColorPickerClear("wptb-odd-row-bg",!0),document.getElementById("wptb-table-cell-slider").value=15,document.getElementById("wptb-table-cell-number").value=15},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){if("external"==e.originalEvent.type){(new WPTB_TableStateSaveManager).tableStateSet()}else{var t=WPTB_Helper.findAncestor(e.target,"wp-picker-container");if(t)if("square"==e.originalEvent.type){var a=t.getElementsByClassName("iris-square-handle");0<a.length&&((a=a[0]).onmouseup=function(){(new WPTB_TableStateSaveManager).tableStateSet()})}else if("strip"==e.originalEvent.type){var n=t.getElementsByClassName("iris-slider-offset");0<n.length&&((n=n[0]).onmouseup=function(){(new WPTB_TableStateSaveManager).tableStateSet()})}}},wpColorPickerClear:function(e,t){var a=void 0;t?(a=[document.getElementById(e)]).length=1:a=document.getElementsByClassName(e);for(var n=0;n<a.length;n++){var l=WPTB_Helper.findAncestor(a[n],"wp-picker-container");if(l){var r=l.parentNode;r.removeChild(l);var s=document.createElement("input");t?s.setAttribute("id",e):s.classList.add("wptb-element-property",e),s.value="",r.appendChild(s)}}},detectMode:function(){var e=window.location.href,t=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!t&&(t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"")},getColumnWidth:function(e,t){for(var a=t.dataset.xIndex,n=e.querySelectorAll('[data-x-index="'+a+'"]'),l=t.getCellDimensions().width,r=0;r<n.length;r++)l>n[r].getCellDimensions().width&&(l=n[r].getCellDimensions().width);return l},getRowHeight:function(e,t){for(var a=t.dataset.yIndex,n=e.querySelectorAll('[data-y-index="'+a+'"]'),l=t.getCellDimensions().height,r=0;r<n.length;r++)l>n[r].getCellDimensions().height&&(l=n[r].getCellDimensions().height);return l},newElementProxy:function(e){return"list"==e?new WPTB_List:"image"==e?new WPTB_Image:"text"==e?new WPTB_Text:"button"==e?new WPTB_Button:"star_rating"==e?new WPTB_StarRating:void 0},wpColorPickerChange:function(e,t){var a=void 0;a=t?t.color.toString():"";var n,l,r,s=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0];l=(n=s.dataset.element.match(/wptb-options-(.+)-(\d+)/i))[1],r=n[2];var o=document.getElementsByClassName("wptb-element-"+l+"-"+r)[0];if("button"==l)"button-text-color"==s.dataset.type?o.getElementsByClassName("wptb-button")[0].style.color=a:o.getElementsByClassName("wptb-button")[0].style.backgroundColor=a;else if("list"==l){var i=o.querySelectorAll("p");if(0<i.length)for(var d=0;d<i.length;d++)i[d].style.color=a}else if("star_rating"==l){if("star-color"==s.dataset.type)for(var c=o.querySelectorAll("li"),p=0;p<c.length;p++)for(var m=c[p].getElementsByTagName("span"),u=0;u<m.length;u++)m[u].style.fill=a;else if("numeral-rating-color"==s.dataset.type){o.querySelector(".wptb-text-message").style.color=a}}else o.style.color=a},starRatingSelectHoverSet:function(e){var t=void 0;t=e.target.classList.contains("wptb-rating-star")?e.target:WPTB_Helper.findAncestor(e.target,"wptb-rating-star");var a=parseInt(t.dataset.value,10),n=t.parentNode.children;if("mouseover"==e.type)for(var l=0;l<n.length;l++)l<a?l==a-1?e.target.classList.contains("wptb-rating-star-left-signal-part")?(n[l].classList.add("wptb-rating-star-hover-half"),n[l].classList.remove("wptb-rating-star-hover-full")):e.target.classList.contains("wptb-rating-star-right-signal-part")&&(n[l].classList.add("wptb-rating-star-hover-full"),n[l].classList.remove("wptb-rating-star-hover-half")):(n[l].classList.add("wptb-rating-star-hover-full"),n[l].classList.remove("wptb-rating-star-hover-half")):(n[l].classList.remove("wptb-rating-star-hover-full"),n[l].classList.remove("wptb-rating-star-hover-half"));else if("click"==e.type)for(var r=0;r<n.length;r++)r<a?r==a-1?e.target.classList.contains("wptb-rating-star-left-signal-part")?(n[r].classList.add("wptb-rating-star-selected-half"),n[r].classList.remove("wptb-rating-star-selected-full")):e.target.classList.contains("wptb-rating-star-right-signal-part")&&(n[r].classList.add("wptb-rating-star-selected-full"),n[r].classList.remove("wptb-rating-star-selected-half")):(n[r].classList.add("wptb-rating-star-selected-full"),n[r].classList.remove("wptb-rating-star-selected-half")):(n[r].classList.remove("wptb-rating-star-selected-full"),n[r].classList.remove("wptb-rating-star-selected-half"))},starRatingEventHandlersAdd:function(e){e.onmouseover=function(e){e.stopPropagation(),WPTB_Helper.starRatingSelectHoverSet(e)},e.onmouseout=function(){for(var e=this.parentNode.children,t=0;t<e.length;t++)e[t].classList.remove("wptb-rating-star-hover-half"),e[t].classList.remove("wptb-rating-star-hover-full")},e.onclick=function(e){WPTB_Helper.starRatingSelectHoverSet(e);var t=WPTB_Helper.findAncestor(e.target,"wptb-star_rating-container");WPTB_Helper.starRatingTextMessageChenge(t),new WPTB_ActionsField(1,t).setParameters(t),(new WPTB_TableStateSaveManager).tableStateSet()}},numberImputSize:function(e,t,a){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;e=String(e),a<e&&(this.value=a)}},starRatingTextMessageChenge:function(e){var t=e.getElementsByClassName("wptb-rating-star-selected-full").length;0<e.getElementsByClassName("wptb-rating-star-selected-half").length&&(t=parseInt(t)+.5);var a=e.querySelectorAll("li"),n=a.length,l=e.querySelector(".wptb-text-message");1!=n||"none"!=a[0].style.display?l.innerHTML=t+"/"+n:l.innerHTML=""}},WPTB_Image=function(e,t){var a=void 0,n=void 0,l=void 0,r=!1;if(null==t){a=document.createElement("div"),n=document.createElement("div");var s=document.createElement("a"),o=document.createElement("img");s.style.display="block",s.appendChild(o),a.classList.add("wptb-image-container"),n.classList.add("wptb-image-wrapper"),n.appendChild(s),a.appendChild(n),s.onclick=function(e){e.preventDefault()},file_frame=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1}),file_frame.on("select",function(){attachment=file_frame.state().get("selection").first().toJSON();var e=attachment.url.split(":"),t=void 0;Array.isArray(e)&&0<e.length&&(t=e[e.length-1]),o.src=t,o.height=attachment.height,o.width=attachment.width,o.style.width="100%",(new WPTB_TableStateSaveManager).tableStateSet()}),null==e?file_frame.open():o.src=e}else{(a=t.cloneNode(!0)).getElementsByTagName("a")[0].onclick=function(e){e.preventDefault()};var i=t.className.match(/wptb-element-((.+-)\d+)/i);i&&Array.isArray(i)&&(l=i[1],r=!0)}return this.kind="image",this.getDOMElement=function(){return a},applyGenericItemSettings(this,l,r),this},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),columnsDecrementButton.onclick=function(){1<columnsInput.value&&columnsInput.value--},columnsIncrementButton.onclick=function(){columnsInput.value<30&&columnsInput.value++},rowsDecrementButton.onclick=function(){1<rowsInput.value&&rowsInput.value--},rowsIncrementButton.onclick=function(){rowsInput.value<30&&rowsInput.value++},document.getElementById("wptb-generate-table").onclick=function(){var e=document.getElementById("wptb-columns-number").value,t=document.getElementById("wptb-rows-number").value;WPTB_Table(e,t),(new WPTB_TableStateSaveManager).tableStateSet()}},WPTB_innerElementSet=function c(t){t.ondragenter=function(e){-1==e.dataTransfer.types.indexOf("wptbelement")&&-1==e.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,e),t.classList.add("wptb-ondragenter"))},t.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},t.ondragleave=function(){},t.ondrop=function(e){this.classList.remove("wptb-ondragenter");var t=void 0,a=void 0;if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node")){var n=void 0,l=void 0;if(0<document.getElementsByClassName("wptb-drop-handle").length&&(n=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(l=document.getElementsByClassName("wptb-drop-border-marker")[0]),t=e.dataTransfer.getData("wptbElement")?(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():(a=e.dataTransfer.getData("node"),document.getElementsByClassName(a)[0]),"block"==n.style.display){var r=void 0;if("Drop Here"==n.dataset.text)(r=n.getDOMParentElement()).appendChild(t);else{var s=n.getDOMParentElement();if(r=s.parentNode,"Above Element"==n.dataset.text)r.insertBefore(t,s);else if("Below Element"==n.dataset.text){var o=s.nextSibling;r.insertBefore(t,o)}}var i=r.parentNode;if(i.classList.contains("wptb-table-head")){var d=WPTB_Helper.findAncestor(i,"wptb-preview-table");WPTB_Helper.dataTitleColumnSet(d)}if(n.style.display="none",l.style.display="none",c(t),!t.classList.contains("wptb-image-container")||t.classList.contains("wptb-moving-mode"))t.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet();return!0}}},t.onmouseover=function(e){t.classList.remove("wptb-ondragenter")}},WPTB_LeftPanel=function(){var e,t,a,n,r=document.getElementsByClassName("wptb-preview-table")[0],l=document.getElementsByClassName("wptb-element");function s(e,t){if(!(3<t)&&r){var a=r.getElementsByTagName("tr");if(a.length>t){var n=a[t].style.backgroundColor,l=document.getElementById(e);l&&n&&(l.value=WPTB_Helper.rgbToHex(n))}}}function o(e){for(var t=r.getElementsByTagName("td"),a=0;a<t.length;a++)t[a].style.borderWidth=document.querySelector("#wptb-table-inner-border-number").value+"px",t[a].style.borderStyle="solid"}function i(e){for(var t=r.getElementsByTagName("td"),a=0;a<t.length;a++)t[a].style.padding=e+"px"}function d(e){r.style.borderWidth=e+"px",r.style.borderStyle="solid"}s("wptb-even-row-bg",1),jQuery("#wptb-even-row-bg").wpColorPicker({change:function(e,t){for(var a=r.getElementsByTagName("tr"),n=1;n<a.length;n+=2)a[n].style.backgroundColor=t.color.toString();console.log(e),console.log(this),WPTB_Helper.wpColorPickerCheckChangeForTableStateSaving(e)},clear:function(){for(var e=r.getElementsByTagName("tr"),t=1;t<e.length;t+=2){e[t].style.backgroundColor="";for(var a=e[t].getElementsByTagName("td"),n=0;n<a.length;n++)a[n].style.backgroundColor=""}(new WPTB_TableStateSaveManager).tableStateSet()}}),s("wptb-odd-row-bg",2),jQuery("#wptb-odd-row-bg").wpColorPicker({change:function(e,t){for(var a=r.getElementsByTagName("tr"),n=2;n<a.length;n+=2)a[n].style.backgroundColor=t.color.toString();WPTB_Helper.wpColorPickerCheckChangeForTableStateSaving(e)},clear:function(){for(var e=r.getElementsByTagName("tr"),t=2;t<e.length;t+=2){e[t].style.backgroundColor="";for(var a=e[t].getElementsByTagName("td"),n=0;n<a.length;n++)a[n].style.backgroundColor=""}(new WPTB_TableStateSaveManager).tableStateSet()}}),s("wptb-table-header-bg",0),jQuery("#wptb-table-header-bg").wpColorPicker({change:function(e,t){r.getElementsByTagName("tr")[0].style.backgroundColor=t.color.toString(),(new WPTB_TableStateSaveManager).tableStateSet()},clear:function(){var e=r.getElementsByTagName("tr")[0];e.style.backgroundColor="";for(var t=e.getElementsByTagName("td"),a=0;a<t.length;a++)t[a].style.backgroundColor="";WPTB_Helper.wpColorPickerCheckChangeForTableStateSaving(event)}}),e=r,t=document.getElementById("wptb-adaptive-table-checkbox"),e&&e.dataset.wptbAdaptiveTable&&"1"==e.dataset.wptbAdaptiveTable?t.checked=!0:t.checked=!1,a=r,n=document.getElementById("wptb-top-row-as-header"),a&&a.classList.contains("wptb-table-preview-head")?n.checked=!0:n.checked=!1,function(){var e=document.getElementsByClassName("wptb-preview-table");if(0<e.length){var t=e[0].style.borderColor;if(t){var a=document.getElementById("wptb-table-border-color");a&&(a.value=WPTB_Helper.rgbToHex(t))}var n=e[0].style.borderWidth;if(n){var l=document.getElementById("wptb-table-border-slider"),r=document.getElementById("wptb-table-border-number");l&&(l.value=parseInt(n)),r&&(r.value=parseInt(n))}var s=e[0].querySelector("td").style.borderWidth;if(s){var o=document.getElementById("wptb-inner-border-check"),i=document.getElementById("wptb-apply-inner-border");if(s&&0<parseInt(s)){if(o&&(o.checked=!0,i)){i.classList.add("visible");var d=document.getElementById("wptb-table-inner-border-slider"),c=document.getElementById("wptb-table-inner-border-number");d.value=parseInt(s),c.value=parseInt(s)}}else o.checked=!1}(n&&0<parseInt(n)||s&&0<parseInt(s))&&(document.getElementById("wptb-table-border-color-set-area").style.display="")}}(),jQuery("#wptb-table-border-color").wpColorPicker({change:function(e,t){var a=r.getElementsByTagName("td");r.style.border=document.querySelector("#wptb-table-border-number").value+"px solid "+t.color.toString();for(var n=0;n<a.length;n++){var l=document.querySelector("#wptb-table-inner-border-number").value;document.getElementById("wptb-inner-border-check").checked&&(a[n].style.border=(0!=l?l:1)+"px solid "+t.color.toString())}WPTB_Helper.wpColorPickerCheckChangeForTableStateSaving(e)},clear:function(){var e=r.getElementsByTagName("td");r.style.borderColor="";for(var t=0;t<e.length;t++)e[t].style.borderColor="";(new WPTB_TableStateSaveManager).tableStateSet()}}),function(){var e=document.getElementsByClassName("wptb-preview-table");if(0<e.length){var t=e[0].querySelector("td");if(t){var a=t.style.padding;if(a){var n=document.getElementById("wptb-table-cell-slider"),l=document.getElementById("wptb-table-cell-number");n&&(n.value=parseInt(a)),l&&(l.value=parseInt(a))}}}}();var c=document.getElementById("wptb-table-border-number");WPTB_Helper.numberImputSize(c,1,50);var p=document.getElementById("wptb-table-inner-border-number");WPTB_Helper.numberImputSize(p,1,50);var m=document.getElementById("wptb-table-cell-number");WPTB_Helper.numberImputSize(m,1,50);var u=document.getElementById("wptb-size-number");WPTB_Helper.numberImputSize(u,1,50);var b=document.getElementById("wptb-size-number");WPTB_Helper.numberImputSize(b,2,100);var g=document.getElementById("wptb-table-column-width-number");WPTB_Helper.numberImputSize(g,2,500);var w=document.getElementById("wptb-table-row-height-number");WPTB_Helper.numberImputSize(w,2,200),document.getElementById("wptb-table-cell-slider").oninput=function(){document.getElementById("wptb-table-cell-number").value=this.value,i(this.value),r.tdDefaultWidth()},document.getElementById("wptb-table-cell-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-cell-number").onchange=function(){document.getElementById("wptb-table-cell-slider").value=this.value,i(this.value),r.tdDefaultWidth(),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-border-slider").oninput=function(){document.getElementById("wptb-table-border-number").value=this.value,d(this.value),r.tdDefaultWidth();var e=document.getElementById("wptb-inner-border-check").checked,t=document.getElementById("wptb-table-border-color-set-area");0==this.value&&0==e?t.style.display="none":t.style.display=""},document.getElementById("wptb-table-border-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-border-number").onchange=function(){document.getElementById("wptb-table-border-slider").value=this.value,d(this.value),r.tdDefaultWidth(),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-inner-border-slider").oninput=function(){document.getElementById("wptb-table-inner-border-number").value=this.value,o(this.value),r.tdDefaultWidth()},document.getElementById("wptb-table-inner-border-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-inner-border-number").onchange=function(){document.getElementById("wptb-table-inner-border-slider").value=this.value,o(this.value),r.tdDefaultWidth(),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-inner-border-check").onchange=function(){if(r){var e=this.checked?"checked":"unchecked";!function(e){var t=null!=document.querySelector("#wptb-table-border-color").value?document.querySelector("#wptb-table-border-color").value:"rgb(0,0,0)";0!=document.querySelector("#wptb-table-inner-border-slider").value&&0!=document.querySelector("#wptb-table-inner-border-number").value||(document.querySelector("#wptb-table-inner-border-slider").value=1,document.querySelector("#wptb-table-inner-border-number").value=1);var a=document.querySelector("#wptb-table-inner-border-slider").value+"px",n=document.getElementsByClassName("wptb-preview-table");if(0<n.length)if("checked"==e){document.getElementById("wptb-apply-inner-border").style.marginBottom="0px";for(var l=n[0].getElementsByTagName("td"),r=0;r<l.length;r++)l[r].style.border=a+" solid "+t;document.getElementById("wptb-apply-inner-border").classList.add("visible")}else for(document.getElementById("wptb-apply-inner-border").classList.remove("visible"),l=n[0].getElementsByTagName("td"),r=0;r<l.length;r++)l[r].style.border="0px solid "+t,l[r].style.border=null}(e);var t=document.getElementById("wptb-table-border-slider").value,a=document.getElementById("wptb-table-border-color-set-area");a.style.display="unchecked"==e&&0==t?"none":"",(new WPTB_TableStateSaveManager).tableStateSet()}},document.getElementById("wptb-table-column-width-slider").oninput=function(){document.getElementById("wptb-table-column-width-number").value=this.value,r.addColumnWidth(this.value)},document.getElementById("wptb-table-column-width-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-column-width-number").onchange=function(){document.getElementById("wptb-table-column-width-slider").value=this.value,r.addColumnWidth(this.value),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-column-width-auto-fixed").onchange=function(){if(this.checked){var e=r.querySelector(".wptb-highlighted"),t=WPTB_Helper.getColumnWidth(r,e);r.addColumnWidth(t)}else{r.addColumnWidth(!1,!0);var a=r.querySelector(".wptb-highlighted"),n=WPTB_Helper.getColumnWidth(r,a);document.getElementById("wptb-table-column-width-number").value=n,document.getElementById("wptb-table-column-width-slider").value=n}(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-row-height-slider").oninput=function(){document.getElementById("wptb-table-row-height-number").value=this.value,r.addRowHeight(this.value)},document.getElementById("wptb-table-row-height-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-row-height-number").onchange=function(){document.getElementById("wptb-table-row-height-slider").value=this.value,r.addRowHeight(this.value),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-row-height-auto-fixed").onchange=function(){if(this.checked){var e=r.querySelector(".wptb-highlighted"),t=WPTB_Helper.getRowHeight(r,e);r.addRowHeight(t)}else{r.addRowHeight(!1,!0);var a=r.querySelector(".wptb-highlighted"),n=WPTB_Helper.getRowHeight(r,a);document.getElementById("wptb-table-row-height-number").value=n,document.getElementById("wptb-table-row-height-slider").value=n}(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-adaptive-table-checkbox").onchange=function(){this.checked?r.dataset.wptbAdaptiveTable=1:r.dataset.wptbAdaptiveTable=0,(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-top-row-as-header").onchange=function(){!function(e,t){if(t.checked)WPTB_Helper.dataTitleColumnSet(e),e.classList.add("wptb-table-preview-head"),e.rows[0].classList.add("wptb-table-head");else{var a=e.rows;e.classList.remove("wptb-table-preview-head"),a[0].classList.remove("wptb-table-head");for(var n=1;n<a.length;n++)for(var l=a[n].children,r=0;r<l.length;r++)l[r].removeAttribute("data-wptb-title-column"),l[r].removeAttribute("data-wptb-title-column-font-size"),l[r].removeAttribute("data-wptb-title-column-color"),l[r].removeAttribute("data-wptb-title-background-color"),l[r].removeAttribute("data-wptb-title-align")}}(r,this),(new WPTB_TableStateSaveManager).tableStateSet()};for(var v=0;v<l.length;v++)l[v].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};r&&(document.getElementById("wptb-activate-cell-management-mode").onclick=r.toggleTableEditMode,document.getElementById("wptb-table-edit-mode-close").onclick=r.toggleTableEditMode,document.getElementById("wptb-left-scroll-panel-curtain-close").onclick=r.toggleTableEditMode,document.getElementById("wptb-add-end-row").onclick=r.addRowToTheEnd,document.getElementById("wptb-add-start-row").onclick=r.addRowToTheStart,document.getElementById("wptb-add-row-before").onclick=r.addRowBefore,document.getElementById("wptb-add-row-after").onclick=r.addRowAfter,document.getElementById("wptb-add-end-column").onclick=r.addColumnEnd,document.getElementById("wptb-add-start-column").onclick=r.addColumnStart,document.getElementById("wptb-add-column-before").onclick=r.addColumnBefore,document.getElementById("wptb-add-column-after").onclick=r.addColumnAfter,document.getElementById("wptb-delete-column").onclick=r.deleteColumn,document.getElementById("wptb-delete-row").onclick=r.deleteRow,document.getElementById("wptb-merge-cells").onclick=r.mergeCells,document.getElementById("wptb-split-cell").onclick=r.splitCell),document.querySelector(".wptb-left-panel-extend").onclick=function(){var e=document.querySelector(".wptb-container");e&&(e.classList.contains("collapsed")?e.classList.remove("collapsed"):e.classList.add("collapsed"))},document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||y()};var h=document.getElementsByClassName("wptb-header");function y(){document.getElementsByClassName("wptb-elements-container")[0].style.display="table",document.getElementsByClassName("wptb-settings-section")[0].style.display="block",document.getElementById("element-options-group").style.display="none";var e=document.getElementById("wpcd_fixed_toolbar");e.hasAttribute("data-toolbar-active-id")&&document.getElementById(e.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active")}0<h.length&&(h=h[0]),h.onclick=function(){y()},document.querySelector(".wptb-panel-left").addEventListener("click",function(e){e.target.classList.contains("wptb-exit-options")&&y()})},WPTB_List=function(e,t){var a,n=document.createElement("ul"),l=document.createElement("div"),r=void 0,s=!1;if(l.classList.add("wptb-list-item-container"),this.kind="list",""===e);else if(e){var o=t.className.match(/wptb-element-((.+-)\d+)/i);o&&Array.isArray(o)&&(r=o[1],s=!0);for(d=0;d<e.length;d++){var i=t.querySelector("li");a=new WPTB_ListItem(e[d],i,!0),n.appendChild(a.getDOMElement())}}else for(var d=0;d<3;d++)a=new WPTB_ListItem("<p>List Item "+(d+1)+"</p>"),n.appendChild(a.getDOMElement());return l.appendChild(n),this.getDOMElement=function(){return l},applyGenericItemSettings(this,r,s),WPTB_Helper.listItemsRecalculateIndex(n),this},WPTB_ListItem=function(e,t,a){var n=void 0;if(null==t||t&&a){null==e&&(e="New List Item");var l=document.createElement("li");if((s=document.createElement("div")).classList.add("wptb-list-item-content"),t){var r=t.getAttribute("style");r&&l.setAttribute("style",r)}l.appendChild(s),s.innerHTML=e,s.onkeyup=window.listItemKeyListener,n=!0}else{var s;(s=(l=t).getElementsByClassName("wptb-list-item-content")[0]).onkeyup=window.listItemKeyListener,n=!1}if(l.onmouseenter=function(e){var t=new WPTB_ActionsField;t.addActionField(2,l),t.setParameters(l),console.log(l)},l.onmouseleave=function(e){return(new WPTB_ActionsField).leaveFromField(e,l,2),!1},this.getDOMElement=function(){return l},n)return this},MultipleSelect=function(){var l=[],a=!1;return this.activateMultipleSelectMode=function(){l=[];for(var e=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),t=0;t<e.length;t++)e[t].classList.remove("wptb-highlighted");a=!0},this.deactivateMultipleSelectMode=function(){a=!1},this.isActivated=function(){return a},this.pushSelectedCell=function(e){a&&(l.push(e),e.classList.add("wptb-highlighted"))},this.selectedCells=function(){return l},this.flushSelectedCells=function(){l=[]},this.getFirst=function(){for(var e,t=1e3,a=1e3,n=l.length-1;0<=n;n--)t>=l[n].dataset.xIndex&&a>=l[n].dataset.yIndex&&(e=l[n],t=l[n].dataset.xIndex,a=l[n].dataset.yIndex);return e},this.getLast=function(){for(var e,t=-1,a=-1,n=l.length-1;0<=n;n--)t<=l[n].dataset.xIndex&&a<=l[n].dataset.yIndex&&(e=l[n],t=l[n].dataset.xIndex,a=l[n].dataset.yIndex);return e},this.removeAllButFirst=function(){for(var e=this.getFirst(),t=1;t<l.length;t++)l[t].classList.add("wptb-fused-cell-"+e.dataset.xIndex+"-"+e.dataset.yIndex)},this};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Parser=function(e){var t=document.createElement("div");t.innerHTML=e;for(var a=t.children[0],n=[].concat(_toConsumableArray(a.querySelectorAll(".wptb-column-title-mobile-container"))),l=0;l<n.length;l++){n[l].parentNode.removeChild(n[l])}for(var r=a.querySelectorAll("td"),s=0;s<r.length;s++)r[s].classList.add("wptb-droppable"),r[s].classList.remove("wptb-column-title-mobile-not-elements");return a},WPTB_Parser2=function(e){if(Array.isArray(e)){var t=void 0;if(1==e.length)return t.appendChild(document.createTextNode(e[0]));if(0 in e){var a=e[0];if(t=document.createElement(a),1 in e&&Array.isArray(e[1]))for(var n=e[1],l=0;l<n.length;l++)Array.isArray(n[l])&&t.setAttribute(n[l][0],n[l][1]);if(2 in e)if(Array.isArray(e[2]))for(var r=0;r<e[2].length;r++)"string"!=typeof e[2][r]||"p"!=a.toLowerCase()?WPTB_Parser(e[2][r])&&t.appendChild(WPTB_Parser(e[2][r])):t.appendChild(document.createTextNode(e[2][r]));else"string"==typeof e[2]&&t.appendChild(document.createTextNode(e[2]))}return t}return!1},WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement)},e[t].ondragend=function(){var e=document.querySelector(".wptb-drop-handle"),t=document.querySelector(".wptb-drop-border-marker");(e||t)&&(e.style.display="none",t.style.display="none")};var a=new WPTB_TableStateSaveManager,n=document.getElementsByClassName("wptb-undo");0<n.length&&((n=n[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){a.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");0<t.length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="",WPTB_Table()})}});var l=document.getElementsByClassName("wptb-redo");0<l.length&&((l=l[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){a.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");0<t.length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="",WPTB_Table()})}});var r=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||r.classList.add("wptb-popup-show")},window.onbeforeunload=function(e){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){r.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){r.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){this.classList.contains("wptb-button-disable")&&e.preventDefault()},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(r){if((r.target.dataset.wptbTableStateNumberSave||0!=window.wptbTableStateNumberShow)&&window.wptbTableStateNumberShow!=r.target.dataset.wptbTableStateNumberSave){var e=document.querySelector(".wptb-edit-bar");if(e&&e.classList.contains("visible"))document.getElementsByClassName("wptb-preview-table")[0].toggleTableEditMode();var s=new XMLHttpRequest,t=(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl)+"?action=save_table",o=document.getElementById("wptb-setup-name").value.trim(),i=void 0,a=document.getElementsByClassName("wptb-preview-table");if(a=0<a.length?(a=WPTB_Stringifier(a[0])).outerHTML:"",""===o||""===a){var n="";return""===o&&(n+="You must assign a name to the table before saving it.</br>"),""===a&&(n+="Table wasn't created"),(i=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '+n+"</div>",i.classList.add("wptb-warning"),void setTimeout(function(){i.removeChild(i.firstChild)},4e3)}var l={title:o,content:a,security_code:wptb_admin_object.security_code};((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(l.id=rs),l=JSON.stringify(l),s.open("POST",t,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(s.responseText);if(i=document.getElementById("wptb-messaging-area"),"saved"==t[0]){document.wptbId=t[1],i.innerHTML='<div class="wptb-success wptb-message">Table "'+o+'" was successfully saved.</div>',document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id="+t[1]+"]";var a=document.getElementsByClassName("wptb-preview-btn");if(0<a.length){(a=a[0]).classList.remove("wptb-button-disable");var n=a.dataset.previewHref;n=n.replace("empty",t[1]),a.setAttribute("href",n)}}else if("edited"==t[0]){i.innerHTML='<div class="wptb-success wptb-message">Table "'+o+'" was successfully updated.</div>',r.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var l=document.getElementsByClassName("wptb-save-btn");0<l.length&&(l=l[0]).classList.add("wptb-save-disabled")}else i.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>';i.classList.add("wptb-success"),setTimeout(function(){i.removeChild(i.firstChild)},4e3)}},s.send(l)}}},WPTB_Space=function o(e){var t=void 0;if(e?t=e:(t=document.createElement("div")).classList.add("wptb-space-between"),t.ondragenter=function(){this.classList.add("visible")},t.ondragover=function(e){e.preventDefault()},t.ondragleave=function(){this.classList.remove("visible")},t.ondrop=function(e){e.stopPropagation();for(var t,a,n,l,r=e.target.nextSibling,s=e.target;!s.classList.contains("wptb-droppable");)s=s.parentNode;e.dataTransfer.getData("wptbElement")?(t=(l=e.dataTransfer.getData("wptbElement")).includes("list")?new WPTB_List:l.includes("image")?new WPTB_Image:l.includes("text")?new WPTB_Text:l.includes("button")?new WPTB_Button:void 0,this.classList.remove("visible"),null==r?(s.appendChild(t.getDOMElement()),s.appendChild(new o)):(s.insertBefore(t.getDOMElement(),r),s.insertBefore(new o,r))):(alert(e.dataTransfer.getData("node")),a=(t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).nextSibling,n=t.parentNode,null!=a&&n.removeChild(a),null==r?(s.appendChild(t),s.appendChild(new o)):(s.insertBefore(t,r),s.insertBefore(new o,r))),this.classList.remove("visible")},!e)return t};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_StarRating=function(e,t){t||(t=e?e.querySelectorAll("li").length:5);var a=document.createElement("div"),n=document.createElement("div"),l=document.createElement("ul"),r=document.createElement("div"),s=document.createElement("div"),o=void 0,i=!1;a.classList.add("wptb-star_rating-container"),n.classList.add("wptb-rating-stars-box"),l.classList.add("wptb-rating-stars-list"),r.classList.add("wptb-success-box"),r.style.display="none",s.classList.add("wptb-text-message"),s.style.fontSize="25px";for(var d=0;d<t;d++){var c=document.createElement("li");c.classList.add("wptb-rating-star"),c.style.width="20px";var p="";0==d&&(p='<span class="wptb-rating-star-zero-set"></span>'),c.innerHTML='<span class="wptb-rating-star-left-signal-part">'+p+'</span><span class="wptb-filled-rating-star"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" \n        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" style="width: 20px;" viewBox="0 0 426.667 426.667" \n        style="enable-background:new 0 0 426.667 426.667;" xml:space="preserve">\n        <polygon points="426.667,165.12 273.28,152.107 213.333,10.667 153.387,152.107 0,165.12 \n        116.48,266.027 81.493,416 213.333,336.427 345.173,416 310.187,266.027"/></svg></span><span class="wptb-not-filled-rating-star"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" \n        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" style="width: 20px;" viewBox="0 0 426.667 426.667" \n        style="enable-background:new 0 0 426.667 426.667;" xml:space="preserve">\n        <path d="M426.667,165.12L273.28,151.893L213.333,10.667l-59.947,141.44L0,165.12l116.48,100.907L81.493,416l131.84-79.573\n        L345.173,416L310.4,266.027L426.667,165.12z M213.333,296.533L133.12,344.96l21.333-91.307l-70.827-61.44l93.44-8.107 \n        l36.267-85.973l36.48,86.187l93.44,8.107l-70.827,61.44l21.333,91.307L213.333,296.533z"/></svg></span><span class="wptb-half-filled-rating-star"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" \n        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" style="width: 20px;" viewBox="0 0 426.667 426.667" \n        style="enable-background:new 0 0 426.667 426.667;" xml:space="preserve">\n        <path d="M426.667,165.12L273.28,151.893L213.333,10.667l-59.947,141.44L0,165.12l116.48,100.907L81.493,416l131.84-79.573 \n        L345.173,416L310.4,266.027L426.667,165.12z M213.333,296.533v-198.4l36.48,86.187l93.44,8.107l-70.827,61.44l21.333,91.307 \n        L213.333,296.533z"/></svg></span><span  class="wptb-rating-star-right-signal-part"></span>',c.dataset.value=d+1,l.appendChild(c)}if(r.appendChild(s),n.appendChild(l),n.appendChild(r),a.appendChild(n),e){var m=e.className.match(/wptb-element-((.+-)\d+)/i);m&&Array.isArray(m)&&(o=m[1],i=!0);var u=e.querySelector(".wptb-rating-stars-box");if(u){var b=[].concat(_toConsumableArray(u.attributes));if(0<b.length)for(var g=0;g<b.length;g++)"style"==b[g].name&&n.setAttribute(b[g].name,b[g].value)}var w=u.querySelectorAll("li"),v=l.querySelectorAll("li");if(0<w.length&&0<v.length){w.length<t&&w.length;for(var h=0;h<w.length;h++){var y=[].concat(_toConsumableArray(w[h].attributes));if(0<y.length)for(var f=0;f<y.length;f++)v[h].setAttribute(y[f].name,y[f].value);for(var B=w[h].children,S=v[h].children,T=0;T<B.length;T++){var E=[].concat(_toConsumableArray(B[T].attributes));if(0<E.length)for(var C=0;C<E.length;C++){S[T].setAttribute(E[C].name,E[C].value);var x=B[T].querySelector("svg");if(x){var _=x.getAttribute("style");S[T].querySelector("svg").setAttribute("style",_)}}}}}var N=u.querySelector(".wptb-success-box");if(N)for(var I=[].concat(_toConsumableArray(N.attributes)),A=0;A<I.length;A++)"style"==I[A].name&&r.setAttribute(I[A].name,I[A].value);var P=N.querySelector(".wptb-text-message");if(P){s.innerHTML=P.innerHTML;for(var L=[].concat(_toConsumableArray(P.attributes)),k=0;k<L.length;k++)"style"==L[k].name&&s.setAttribute(L[k].name,L[k].value)}}return this.kind="star_rating",this.getDOMElement=function(){return a},applyGenericItemSettings(this,o,i),this},WPTB_Stringifier=function(e){if(e){var t=e.cloneNode(!0);t.classList.add("wptb-table-preview-static-indic"),t.dataset.tableColumns=e.columns,t.style.width=null,t.style.minWidth=null,t.style.maxWidth=null;var a=t.getElementsByTagName("td");if(0<a.length)for(var n=0;n<a.length;n++){e.querySelector("wptb-table-preview-head")&&a[n].removeAttribute("data-x-index"),a[n].removeAttribute("data-y-index"),a[n].removeAttribute("draggable"),a[n].classList.remove("wptb-droppable");var l=a[n].getElementsByClassName("wptb-ph-element");if(0<l.length)for(var r=0;r<l.length;r++){var s=l[r].querySelectorAll(".mce-content-body");if(0<s.length)for(var o=0;o<s.length;o++)s[o].classList.remove("mce-content-body");var i=l[r].querySelectorAll("[data-mce-style]");if(0<i.length)for(var d=0;d<i.length;d++)i[d].removeAttribute("data-mce-style");var c=l[r].querySelectorAll("[contenteditable]");if(0<c.length)for(var p=0;p<c.length;p++)c[p].removeAttribute("contenteditable");var m=l[r].querySelectorAll("[spellcheck]");if(0<m.length)for(var u=0;u<m.length;u++)m[u].removeAttribute("spellcheck");var b=l[r].querySelectorAll("[id^=mce_]");if(0<b.length)for(var g=0;g<b.length;g++)b[g].removeAttribute("id");for(var w=l[r].querySelectorAll(".wptb-actions"),v=w.length;0<v&&w[0]&&w[0].parentNode;)w[0].parentNode.removeChild(w[0]),v--}if(a[n].hasAttribute("data-wptb-title-column")){var h=document.createElement("div"),y=document.createElement("div");h.classList.add("wptb-column-title-mobile-container"),y.classList.add("wptb-column-title-mobile"),y.dataset.wptbTitleColumn=a[n].dataset.wptbTitleColumn,y.setAttribute("style","font-size:"+a[n].dataset.wptbTitleColumnFontSize+"; \n                        color:"+a[n].dataset.wptbTitleColumnColor+"; background-color:"+a[n].dataset.wptbTitleBackgroundColor+"; text-align:"+a[n].dataset.wptbTitleAlign+";"),y.style.padding=a[n].style.padding,0==a[n].children.length&&a[n].classList.add("wptb-column-title-mobile-not-elements"),h.appendChild(y),a[n].insertBefore(h,a[n].firstChild)}}return t}};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Stringifier2=function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(null==e)return"";if(null==e.tagName&&3==e.nodeType)return e.nodeValue;var t=[],a=void 0,n=!1,l=[].concat(_toConsumableArray(e.attributes)),r=[],s=[];if((e.parentNode.classList.contains("wptb-list-item-content")||e.parentNode.classList.contains("mce-content-body"))&&"p"==e.tagName.toLowerCase()?(a=e.childNodes,n=!0):a=0<e.children.length?e.children:e.childNodes,0<l.length)for(var o=0;o<l.length;o++)r[o]=[l[o].name,l[o].value];else r="";if(0<a.length)for(var i=0;i<a.length;i++){var d=WPTB_Stringifier(a[i]);Array.isArray(d)||n?s[i]=d:"string"==typeof d&&d&&(s=d)}else s="";return t.push(e.tagName.toLowerCase(),r,s),t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},array=[],WPTB_Table=function(e,t){var A,a,n,v,l=document.getElementsByClassName("wptb-settings-items"),f=document.getElementsByClassName("wptb-table-setup")[0],B=function(e){var t,a=this.rowSpan,n=this.colSpan,l=document.getElementsByClassName("wptb-no-cell-action"),r=document.getElementsByClassName("wptb-single-action"),s=document.getElementsByClassName("wptb-multiple-select-action"),o=document.getElementById("wptb-left-scroll-panel-cell-settings"),i=E(this),d=i[0],c=i[1];if(document.select.isActivated()){if(this.className.match(/wptb-highlighted/)){this.classList.remove("wptb-highlighted");for(var p=0;p<a;p++)for(var m=0;m<n;m++)array[d+p][c+m]=0}else{this.classList.add("wptb-highlighted");for(p=0;p<a;p++)for(m=0;m<n;m++)array[d+p][c+m]=1}if(0===(t=document.getElementsByClassName("wptb-highlighted").length)){for(p=0;p<s.length;p++)s[p].classList.remove("visible"),s[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.add("visible"),l[p].removeAttribute("disabled");for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");o.classList.remove("visible")}else if(1===t){for(p=0;p<s.length;p++)s[p].classList.remove("visible"),s[p].setAttribute("disabled","disabled");for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.add("visible"),r[p].removeAttribute("disabled");var u=document.querySelector(".wptb-highlighted");if(u){var b=document.getElementById("wptb-table-column-width-slider"),g=document.getElementById("wptb-table-column-width-number"),w=document.getElementById("wptb-table-column-width-auto-fixed"),v=u.style.width;if(v)b.value=parseFloat(v,10),g.value=parseFloat(v,10),w.checked=!0;else if(u.dataset.wptbFixedWidth)b.value=u.dataset.wptbFixedWidth,g.value=u.dataset.wptbFixedWidth,w.checked=!0;else{var h=WPTB_Helper.getColumnWidth(A,u);b.value=h,g.value=h,w.checked=!1}var y=document.getElementById("wptb-table-row-height-slider"),f=document.getElementById("wptb-table-row-height-number"),B=document.getElementById("wptb-table-row-height-auto-fixed"),S=u.style.height;if(S)y.value=parseFloat(S,10),f.value=parseFloat(S,10),B.checked=!0;else if(u.dataset.wptbFixedHeight)y.value=u.dataset.wptbFixedHeight,f.value=u.dataset.wptbFixedHeight,B.checked=!0;else{var T=WPTB_Helper.getRowHeight(A,u);y.value=T,f.value=T,B.checked=!1}}o.classList.add("visible")}else{for(p=0;p<s.length;p++)A.isSquare(array)?(s[p].classList.add("visible"),s[p].removeAttribute("disabled")):(s[p].classList.remove("visible"),s[p].setAttribute("disabled","disabled"));for(p=0;p<l.length;p++)l[p].classList.remove("visible"),l[p].setAttribute("disabled","disabled");for(p=0;p<r.length;p++)r[p].classList.remove("visible"),r[p].setAttribute("disabled","disabled");o.classList.remove("visible")}}},S=function(e){for(var t=0;t<e.length;t++){for(var a=0;a<e[t].length;a++)" "+e[t][a];"\n"}A.isSquare(e)},T=function(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),a=document.getElementsByClassName("wptb-multiple-select-action"),n=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=A.getElementsByClassName("wptb-highlighted");l.length;)l[0].classList.remove("wptb-highlighted");n.classList.remove("visible");for(var r=0;r<array.length;r++)for(var s=0;s<array[r].length;s++)array[r][s]=0;for(r=0;r<a.length;r++)a[r].classList.remove("visible"),a[r].setAttribute("disabled","disabled");for(r=0;r<e.length;r++)e[r].classList.add("visible"),e[r].removeAttribute("disabled");for(r=0;r<t.length;r++)t[r].classList.remove("visible"),t[r].setAttribute("disabled","disabled")},E=function(e){for(var t=[],a=0;a<v;a++)t[a]=0;for(a=0;a<A.rows.length;a++)for(var n=A.rows[a].getElementsByTagName("td"),l=cellPointer=0;l<v;l+=stepsToMove)if(stepsToMove=1,t[l])t[l]--;else{var r=n[cellPointer++];if(r==e)return[a,l];if(1<r.rowSpan){for(var s=0;s<r.colSpan;s++)t[l+s]=r.rowSpan-1;stepsToMove=r.colSpan}else 1<r.colSpan&&(stepsToMove=r.colSpan)}};if(jQuery("#wptb-table-header-bg").val(""),jQuery("#wptb-even-row-bg").val(""),jQuery("#wptb-odd-row-bg").val(""),jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-inner-border-number,#wptb-table-inner-border-slider").val("0"),jQuery("#wptb-table-border-number,#wptb-table-border-slider").val("0"),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var r=0;r<l.length;r++)"wptb-apply-inner-border"!==l[r].id&&l[r].classList.add("visible");(A=document.createElement("table")).classList.add("wptb-preview-table"),A.dataset.reconstraction=1,A.dataset.wptbAdaptiveTable=1;for(r=0;r<t;r++){(a=A.insertRow(-1)).classList.add("wptb-row");for(var g=0;g<e;g++)(n=new WPTB_Cell(B)).setCoords(r,g),a.appendChild(n.getDOMElement())}}else{var s=document.getElementsByClassName("wptb-preview-table");if(0<s.length){var o=(A=s[0]).getElementsByTagName("td");if(0<o.length)for(var i=0;i<o.length;i++)WPTB_Cell(B,o[i])}}A.toggleTableEditMode=function(){var e=document.getElementsByClassName("wptb-edit-bar"),t=document.getElementById("wptb-cell_mode_background"),a=document.getElementById("wptb-left-scroll-panel-curtain"),n=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=document.getElementsByClassName("wptb-preview-table");if(0<l.length&&(l=l[0]),0<e.length)for(var r=0;r<e.length;r++)if(e[r].classList.contains("visible")){document.select.deactivateMultipleSelectMode(),e[r].classList.remove("visible"),t.classList.remove("visible"),a.classList.remove("visible"),n.classList.remove("visible"),l.parentNode.classList.remove("wptb-preview-table-manage-cells");var s=l.getElementsByTagName("td");if(0<s.length)for(var o=0;o<s.length;o++)s[o].classList.remove("wptb-highlighted")}else document.select.activateMultipleSelectMode(),e[r].classList.add("visible"),t.classList.add("visible"),a.classList.add("visible"),l.parentNode.classList.add("wptb-preview-table-manage-cells")},A.recalculateIndexes=function(e){for(var t=this.getElementsByTagName("tr"),a=void 0,n=0,l=0,r=[],s=document.getElementById("wptb-top-row-as-header"),o=0;o<t.length;o++){0==o?(null==e&&(t[o].style.backgroundColor=jQuery("#wptb-table-header-bg").val()),s.checked?null==e&&(this.classList.add("wptb-table-preview-head"),t[o].classList.add("wptb-table-head")):null==e&&(this.classList.remove("wptb-table-preview-head"),t[o].classList.remove("wptb-table-head"))):(o%2==0?null==e&&(t[o].style.backgroundColor=jQuery("#wptb-odd-row-bg").val()):null==e&&(t[o].style.backgroundColor=jQuery("#wptb-even-row-bg").val()),t[o].classList.remove("wptb-table-head")),r[o],a=t[o].getElementsByTagName("td"),null==r[o]&&(r[o]=[]);for(var i=0,d=0;d<a.length;d++){if(null!=r[o][d])for(var c=0;c<100;c++){if(null==r[o][i]){r[o][i]=a[d],a[d].dataset.xIndex=i;break}i++}else r[o][d]=a[d],a[d].dataset.xIndex=i;if(a[d].dataset.yIndex=o,1<a[d].colSpan)for(var p=1;p<a[d].colSpan;p++)i++,r[o][i]="tdDummy";if(1<a[d].rowSpan)for(var m=1;m<a[d].rowSpan;m++){null==r[o+m]&&(r[o+m]=[]);for(var u=0;u<a[d].colSpan;u++)r[o+m][i-a[d].colSpan+1+u]="tdDummy"}i++,0==o&&(l=i)}n<d&&(n=d)}this.columns=n,this.maxCols=l},A.addColumnWidth=function(m,u){var e=A.getElementsByClassName("wptb-highlighted");if(0<e.length){for(var t=0;t<e.length;t++){var a=e[t].dataset.xIndex;a&&function e(t,a){for(var n=A.rows,l=!1,r=[],s=0;s<n.length;s++)for(var o=n[s].children,i=0;i<o.length;i++){var d=o[i];if(d.dataset.xIndex==t){if(m)if(d.colSpan==a){d.style.width=m+"px",d.removeAttribute("data-wptb-fixed-width"),l=!0;var c=document.getElementById("wptb-table-column-width-auto-fixed");c.checked||(c.checked=!0)}else d.style.width=null,d.dataset.wptbFixedWidth=m,s!=n.length-1||l||e(t,a+1);else if(u)d.style.width=null,d.removeAttribute("data-wptb-fixed-width");else if(d.dataset.wptbFixedWidth)d.colSpan==a&&(d.style.width=d.dataset.wptbFixedWidth+"px",d.removeAttribute("data-wptb-fixed-width"));else if(d.style.width){for(var p=0;p<r.length;p++)r[p].style.width=d.style.width;r=[]}else r.push(d);break}}}(a,1)}A.tdDefaultWidth()}},A.tdDefaultWidth=function(){for(var e,t=A.rows,a=0,n=0,l=document.getElementsByClassName("wptb-table-setup")[0].offsetWidth,r=[],s=[],o=0,i=0,d="",c=0;c<t.length;c++)for(var p=t[c].children,m=0;m<p.length;m++){var u=p[m];if(r[parseInt(u.dataset.xIndex)]||s[parseInt(u.dataset.xIndex)])s[parseInt(u.dataset.xIndex)]?u.dataset.wptbFixedWidth||(u.dataset.wptbCssTdAutoWidth=!0):r[parseInt(u.dataset.xIndex)]&&u.removeAttribute("data-wptb-css-td-auto-width");else if(u.style.width?(r[parseInt(u.dataset.xIndex)]=parseFloat(u.style.width),u.removeAttribute("data-wptb-css-td-auto-width")):u.dataset.wptbFixedWidth||(s[parseInt(u.dataset.xIndex)]=100,u.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(u,null)){var b=window.getComputedStyle(u,null),g=b.getPropertyValue("padding-left"),w=b.getPropertyValue("padding-right");o=parseFloat(g,10)+parseFloat(w,10);var v=b.getPropertyValue("border-left-width"),h=b.getPropertyValue("border-right-width");i=parseFloat(v,10)+parseFloat(h,10),r[parseInt(u.dataset.xIndex)]?(r[parseInt(u.dataset.xIndex)]+=o,r[parseInt(u.dataset.xIndex)]+=i):(s[parseInt(u.dataset.xIndex)]+=o,s[parseInt(u.dataset.xIndex)]+=i)}}for(var y=0;y<r.length;y++)r[y]&&(a+=r[y]);for(var f=0,B=0;B<s.length;B++)s[B]&&(n+=s[B],f++);var S=window.getComputedStyle(A,null),T=S.getPropertyValue("border-left-width"),E=S.getPropertyValue("border-right-width"),C=parseFloat(T,10)+parseFloat(E,10);e=a+n+C,A.dataset.wptbTableTdsSumMaxWidth=e,f?(A.dataset.wptbCellsWidthAutoCount=f,A.mergingellsHorizontally?A.dataset.wptbFixedWidthSize=a-C:A.removeAttribute("data-wptb-fixed-width-size")):(A.removeAttribute("data-wptb-fixed-width-size"),A.removeAttribute("data-wptb-cells-width-auto-count"));var x=!1,_=void 0;e<l?f?(A.style.minWidth="100%",A.mergingellsHorizontally?(_=(_=(l-a-C)/f)-o-i,x=!(A.style.width=null)):A.style.width="100%"):(A.style.width=null,A.style.minWidth=null,A.style.maxWidth=e+"px"):(A.style.maxWidth=null,A.style.minWidth=e+"px",_="100",x=!(A.style.width=null));var N=document.head;if(N){var I=N.querySelector('style[data-wptb-td-auto-width="true"]');I&&N.removeChild(I)}x&&((d=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),d.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+_+"px}",N&&N.appendChild(d))},A.addRowHeight=function(m,u){var e=A.getElementsByClassName("wptb-highlighted");if(0<e.length)for(var t=0;t<e.length;t++){var a=e[t].dataset.yIndex;a&&function e(t,a){for(var n=A.rows,l=!1,r=[],s=0;s<n.length;s++)for(var o=n[s].children,i=0;i<o.length;i++){var d=o[i];if(d.dataset.yIndex==t)if(m){if(d.rowSpan==a){d.style.height=m+"px",d.removeAttribute("data-wptb-fixed-heidht"),l=!0;var c=document.getElementById("wptb-table-row-height-auto-fixed");c.checked||(c.checked=!0);continue}d.style.height=null,d.dataset.wptbFixedHeight=m,i!=o.length-1||l||e(t,a+1)}else if(u)d.style.height=null,d.removeAttribute("data-wptb-fixed-heidht");else if(d.dataset.wptbFixedHeight)(d.rowSpan=a)&&(d.style.height=d.dataset.wptbFixedHeight+"px",d.removeAttribute("data-wptb-fixed-width"));else if(d.style.height){for(var p=0;p<r.length;p++)r[p].style.height=d.style.height;r=[]}else r.push(d)}}(a,1)}},A.reconstraction=function(){var e=A.getElementsByTagName("td"),t=document.getElementsByClassName("wptb-adaptive-table-chose-block");0<t.length&&(t=t[0]),A.mergingellsHorizontally=!1,A.mergingCellsVertically=!1,A.dataset.reconstraction=1,t.style.display="block";for(var a=0,n=0;n<e.length&&(1<e[n].colSpan&&(A.dataset.reconstraction=0,t.style.display="none",A.mergingellsHorizontally=!0,a++),1<e[n].rowSpan&&(A.dataset.reconstraction=0,t.style.display="none",A.mergingCellsVertically=!0,a++),2!=a);n++);},A.addColumnEnd=function(){var e=void 0,t=document.getElementsByClassName("wptb-preview-table"),a=void 0,n=void 0;0<t.length&&(a=t[0].querySelector("td")),a&&(n=a.getAttribute("style"));for(var l=0;l<A.rows.length;l++)e=new WPTB_Cell(B),n&&(e.getDOMElement().setAttribute("style",n),e.getDOMElement().style.width=null),A.rows[l].appendChild(e.getDOMElement()),array[l].push(0);v++,A.recalculateIndexes(),A.tdDefaultWidth(),A.addRowHeight(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.addColumnStart=function(){var e=void 0,t=void 0,a=document.getElementsByClassName("wptb-preview-table"),n=void 0,l=void 0;0<a.length&&(n=a[0].querySelector("td")),n&&(l=n.getAttribute("style"));for(var r=0;r<A.rows.length;r++)e=new WPTB_Cell(B),l&&(e.getDOMElement().setAttribute("style",l),e.getDOMElement().style.width=null),(t=A.rows[r].getElementsByTagName("td")[0])?A.rows[r].insertBefore(e.getDOMElement(),t):A.rows[r].appendChild(e.getDOMElement()),array[r].push(0);v++,A.recalculateIndexes(),A.tdDefaultWidth(),A.addRowHeight(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.addColumnAfter=function(e){var t=A.rows,a=void 0,n=void 0,l=document.querySelector(".wptb-highlighted"),r=l.getAttribute("style"),s=null!=e&&"number"==typeof e?e:E(l)[1];if(v-s-l.colSpan+1==1)A.addColumnEnd();else{for(var o=!1,i=void 0,d=void 0,c=void 0,p=[],m=void 0,u=0;u<v;u++)p.push(0);for(u=0;u<t.length;u++){a=0,n=t[u].getElementsByTagName("td"),o=!1;for(var b=0;b<v;b+=i){if(i=1,o){d=new WPTB_Cell(B),r&&(d.getDOMElement().setAttribute("style",r),d.getDOMElement().style.width=null),m&&t[u].contains(m)?(c=m.nextSibling)?t[u].insertBefore(d.getDOMElement(),c):t[u].appendChild(d.getDOMElement()):t[u].insertBefore(d.getDOMElement(),n[0]);break}if(0<p[b])s==b&&(o=!0);else if(1<(m=n[a++]).rowSpan){i=m.colSpan;for(var g=0;g<m.colSpan;g++)p[b+g]=m.rowSpan,b+g==s&&(o=!0)}else if(1<m.colSpan){i=m.colSpan;for(g=0;g<m.colSpan;g++)b+g==s&&(o=!0)}else b==s&&(o=!0)}for(var w=0;w<v;w++)0<p[w]&&p[w]--}for(u=0;u<array.length;u++)array[u].push(0);v++,S(array),A.recalculateIndexes(),A.addColumnWidth(),A.addRowHeight(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()}},A.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),t=E(e)[1];0===t?A.addColumnStart():A.addColumnAfter(t-1)},A.addRowToTheEnd=function(){var e,t=A.insertRow(-1),a=void 0,n=document.getElementsByClassName("wptb-preview-table"),l=void 0,r=void 0;t.classList.add("wptb-row"),0<n.length&&(l=n[0].querySelector("td")),l&&(r=l.getAttribute("style"));for(var s=0;s<v;s++)a=new WPTB_Cell(B),r&&a.getDOMElement().setAttribute("style",r),t.appendChild(a.getDOMElement());e=Array.from(array[0]),array.push(e),S(array),A.recalculateIndexes(),A.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.addRowToTheStart=function(){var e,t=A.insertRow(0),a=void 0,n=document.getElementsByClassName("wptb-preview-table"),l=void 0,r=void 0;t.classList.add("wptb-row"),0<n.length&&(l=n[0].querySelector("td")),l&&(r=l.getAttribute("style"));for(var s=0;s<v;s++)a=new WPTB_Cell(B),r&&a.getDOMElement().setAttribute("style",r),t.appendChild(a.getDOMElement());e=Array.from(array[0]),array.push(e),S(array),A.recalculateIndexes(),A.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.addRowBefore=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=E(e)[0],n=void 0,l=a-1;0<=l;l--){var r=A.rows[l].children,s=r.length;if(0<s)for(var o=0;o<s;o++)if(1==r[o].rowSpan){a=l,n=!0;break}if(n)break}0===a?A.addRowToTheStart():A.addRowAfter(a,t)},A.addRowAfter=function(e,t){var a,n=void 0;if(null!=e&&"number"==typeof e||null!=t)n=e;else{var l=document.querySelector(".wptb-highlighted");t=l.getAttribute("style"),n=(e=E(l)[0])+l.rowSpan-1}var r=0;if(n<A.rows.length-1){for(var s=0;s<=n;s++){var o=A.rows[s].children,i=o.length;if(0<i)for(var d=0;d<i;d++){n<o[d].rowSpan-1+s&&o[d].rowSpan++}}var c=A.rows[n+1].children,p=c.length;if(0<p)for(var m=0;m<p;m++)r+=c[m].colSpan}else r=array[0].length;var u=A.insertRow(n+1);for(u.classList.add("wptb-row"),g=0;g<r;g++){var b=new WPTB_Cell(B);b.getDOMElement().setAttribute("style",t),b.getDOMElement().style.width=null,b.getDOMElement().style.height=null,u.appendChild(b.getDOMElement())}a=Array.from(array[0]),array.push(a),S(array),A.recalculateIndexes(),A.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.isSquare=function(e){for(var t,a,n=-1,l=-1,r=-1,s=-1,o=0,i=0;i<e.length;i++)for(var d=0;d<e[i].length;d++)1==e[i][d]&&((d<l||-1==l)&&(l=d),(i<n||-1==n)&&(n=i));for(i=e.length-1;-1<i;i--)for(d=e[i].length-1;-1<d;d--)1==e[i][d]&&(s<d&&(s=d),r<i&&(r=i));for(i=n;i<r;i++)for(d=l;d<s;d++)if(0==e[i][d]||null==e[i][d])return!1;for(i=0;i<e.length;i++)for(d=0;d<e[i].length;d++)1==e[i][d]&&o++;return(t=r-n+1)*(a=s-l+1)===o&&[t,a]},A.mergeCells=function(){for(var e=A.isSquare(array),t=e[0],a=e[1],n=document.querySelector(".wptb-highlighted"),l=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),r=[],s=0;s<l.length;s++){var o=l[s].getElementsByClassName("wptb-ph-element");if(0<o.length)for(var i=o.length,d=0;d<i;d++)r.push(o[d]);l[s].parentNode.removeChild(l[s])}if(0<r.length)for(var c=0;c<r.length;c++)n.appendChild(r[c]);n.colSpan=a,n.rowSpan=t,A.recalculateIndexes(),A.reconstraction();var p=n.style.width,m=n.dataset.wptbFixedWidth;p?A.addColumnWidth(parseFloat(p,10)):m?A.addColumnWidth():A.addColumnWidth(!1,!0);var u=n.style.height,b=n.dataset.wptbFixedHeight;u?A.addRowHeight(parseFloat(u,10)):b?A.addRowHeight():A.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,a=e.colSpan,n=e.getAttribute("style"),l=E(e)[0],r=A.rows[l],s=e.dataset.xIndex;e.rowSpan=1;for(var o=e.colSpan=1;o<a;o++){var i=new WPTB_Cell(B);i.getDOMElement().setAttribute("style",n),i.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?r.insertBefore(i.getDOMElement(),e.nextSibling):r.appendChild(i.getDOMElement())}if(1<t)for(var d=1;d<t;d++){var c=void 0,p=A.rows[l+d],m=p.children,u=m.length;if(0<u)for(var b=0;b<u;b++)if(Number(m[b].dataset.xIndex)>Number(s)){c=m[b];break}for(var g=0;g<a;g++){var w=new WPTB_Cell(B);w.getDOMElement().setAttribute("style",n),null!=c?p.insertBefore(w.getDOMElement(),c):p.appendChild(w.getDOMElement())}}A.recalculateIndexes(),A.reconstraction(),A.addColumnWidth(),A.addRowHeight(),WPTB_Helper.dataTitleColumnSet(A),T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.findRowspannedCells=function(e){var t,a=[];if(actualPoints=function(e){for(var t=A.rows[e].getElementsByTagName("td"),a=0,n=0;n<t.length;n++)a+=t[n].colSpan;return a}(e),actualPoints===v)return[];t=v-actualPoints;for(var n=e-1;0<=n&&t;n--){var l=A.rows[n].getElementsByTagName("td");for(n=0;n<l.length;n++)1<l[n].rowSpan&&(a.push(l[n]),t-=l[n].colSpan)}return a},A.addLackingCells=function(){for(var e=[],t=0;t<A.rows.length;t++)e.push(0);for(t=0;t<A.rows.length;t++)for(var a=A.rows[t].getElementsByTagName("td"),n=0;n<a.length;n++)if(1<a[n].rowSpan)for(var l=1;l<a[n].rowSpan;l++)e[t+l]++;for(t=0;t<A.rows.length;t++){a=A.rows[t].getElementsByTagName("td");var r=0;for(n=0;n<a.length;n++)r+=a[n].colSpan;r+=e[t],difference=v-r;for(n=0;n<difference;n++){var s=new WPTB_Cell(B);A.rows[t].appendChild(s.getDOMElement())}}},A.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=e.rowSpan,n=E(e)[0],l=void 0;null==a&&(a=1);for(var r=0;r<a;r++){var s=A.rows[n].children,o=A.rows[n+1],i=void 0,d=void 0,c=[];if(null!=o){d=(i=o.children).length;for(var p=0;p<s.length;p++)if(1<s[p].rowSpan){var m=new WPTB_Cell(B);m.getDOMElement().setAttribute("style",t),m.getDOMElement().colSpan=s[p].colSpan,m.getDOMElement().rowSpan=s[p].rowSpan-1;for(var u=void 0,b=0;b<d;b++)if(Number(i[b].dataset.xIndex)>Number(s[p].dataset.xIndex)){u=i[b];break}u?c.push([m,u]):c.push([m])}if(0<c.length)for(var g=0;g<c.length;g++)null!=c[g][1]?o.insertBefore(c[g][0].getDOMElement(),c[g][1]):o.appendChild(c[g][0].getDOMElement())}var w=A.rows;if(0<w.length)for(var v=0;v<n;v++){var h=w[v].children;if(0<h.length)for(var y=0;y<h.length;y++)h[y].rowSpan-1>=n-v&&h[y].rowSpan--}l=Array.from(array[0]),array.pop(l),S(array),A.getElementsByTagName("tbody")[0].removeChild(A.rows[n]),0==A.rows.length&&(A.toggleTableEditMode(),f.innerHTML="",WPTB_Helper.settingsPanelClear(),document.getElementsByClassName("wptb-table-generator")[0].style.display="table"),A.recalculateIndexes(),WPTB_Helper.dataTitleColumnSet(A)}T(),(new WPTB_TableStateSaveManager).tableStateSet()},A.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,a=e.colSpan,n=0;n<a;n++){for(var l=0;l<A.rows.length;l++){var r=A.rows[l].children,s=r.length;if(0<s)for(var o=s-1;0<=o;o--){if(Number(r[o].dataset.xIndex)==Number(t)){1<r[o].colSpan?r[o].colSpan--:A.rows[l].removeChild(r[o]);break}if(Number(r[o].dataset.xIndex)<Number(t)&&Number(r[o].dataset.xIndex)+Number(r[o].colSpan-1)>=t){1<r[o].colSpan&&r[o].colSpan--;break}}}for(var i=0;i<A.rows.length;i++)null!=array[i]&&array[i].pop();v--,0==A.querySelectorAll("td").length&&(A.toggleTableEditMode(),f.innerHTML="",WPTB_Helper.settingsPanelClear(),document.getElementsByClassName("wptb-table-generator")[0].style.display="table"),A.recalculateIndexes(),A.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(A)}T(),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementsByClassName("wptb-table-generator")[0].style.display="none",array=function(){for(var e=[],t=[],a=0;a<A.rows.length;a++){for(var n=A.rows[a].getElementsByTagName("td"),l=0,r=0;r<n.length;r++)l+=n[r].colSpan;e.push(l)}v=Math.max.apply(null,e);var s=A.rows.length;for(a=0;a<s;a++)for(t[a]=[],r=0;r<v;r++)t[a].push(0);return S(t),t}(),T(),S(array),f.appendChild(A),A.recalculateIndexes(!0),A.reconstraction(),A.tdDefaultWidth(),f.onresize=function(){A.tdDefaultWidth()},WPTB_LeftPanel()},WPTB_TableStateSaveManager=function(){this.tableStateSet=function(){var e=document.getElementsByClassName("wptb-preview-table");if(0<e.length){e=e[0],window.wptbTableStateSaving||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow+1&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));for(var t=e.cloneNode(!0),a=t.getElementsByClassName("wptb-highlighted"),n=0;n<a.length;n++)a[n].classList.remove("wptb-highlighted");for(var l=t.getElementsByClassName("wptb-directlyhovered"),r=0;r<l.length;r++)l[r].classList.remove("wptb-directlyhovered");var s="",o=document.head;if(o){var i=o.querySelector('style[data-wptb-td-auto-width="true"]');i&&(s=i.innerHTML)}var d=t.querySelectorAll(".mce-content-body");if(0<d.length)for(var c=0;c<d.length;c++)d[c].classList.remove("mce-content-body");var p=t.querySelectorAll("[data-mce-style]");if(0<p.length)for(var m=0;m<p.length;m++)p[m].removeAttribute("data-mce-style");var u=t.querySelectorAll("[id^=mce_]");if(0<u.length)for(var b=0;b<u.length;b++)u[b].removeAttribute("id");if(window.wptbTableStateSaving.push([t,s]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,1<window.wptbTableStateSaving.length){var g=document.getElementsByClassName("wptb-undo");0<g.length&&(g=g[0]).classList.remove("wptb-undoredo-disabled")}var w=document.getElementsByClassName("wptb-redo");0<w.length&&(w=w[0]).classList.add("wptb-undoredo-disabled");var v=document.getElementsByClassName("wptb-save-btn");0<v.length&&(!(v=v[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==v.dataset.wptbTableStateNumberSave?v.classList.add("wptb-save-disabled"):v.classList.remove("wptb-save-disabled"))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&1<window.wptbTableStateSaving.length){if("undo"==e){if(!(0<window.wptbTableStateNumberShow))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1))return!1;window.wptbTableStateNumberShow++}var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0]),0==window.wptbTableStateNumberShow?t&&t.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&t&&t.classList.remove("wptb-undoredo-disabled");var a=document.getElementsByClassName("wptb-redo");0<a.length&&(a=a[0]),window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?a&&a.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&a&&a.classList.remove("wptb-undoredo-disabled");var n=document.getElementsByClassName("wptb-save-btn");0<n.length&&(!(n=n[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==n.dataset.wptbTableStateNumberSave?n.classList.add("wptb-save-disabled"):n.classList.remove("wptb-save-disabled"));var l=document.getElementsByClassName("wptb-table-setup");if(0<l.length){if((l=l[0]).innerHTML="",l.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML,window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]){var r=document.createElement("style");r.setAttribute("data-wptb-td-auto-width",!0),r.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1];var s=document.head;if(s){var o=s.querySelector('style[data-wptb-td-auto-width="true"]');o&&s.removeChild(o),s.appendChild(r)}}WPTB_Helper.settingsPanelClear(),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel();var i=document.getElementById("wptb-left-scroll-panel-cell-settings");i&&i.classList.remove("visible")}}}};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Text=function(e,t){var a=document.createElement("div"),n=document.createElement("div"),l=document.createElement("p"),r=void 0,s=!1;if(a.classList.add("wptb-text-container"),l.innerHTML=null!=e?e:"Text",n.appendChild(l),a.appendChild(n),t){var o=t.className.match(/wptb-element-((.+-)\d+)/i);o&&Array.isArray(o)&&(r=o[1],s=!0);for(var i=[].concat(_toConsumableArray(t.attributes)),d=0;d<i.length;d++)a.setAttribute(i[d].name,i[d].value)}return this.kind="text",this.getDOMElement=function(){return a},applyGenericItemSettings(this,r,s),this};