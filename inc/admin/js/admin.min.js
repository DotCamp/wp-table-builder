var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WPTB_ActionsField=function s(){var p=this;this.wptbActions,0!=document.getElementsByClassName("wptb-actions").length&&(this.wptbActions=document.getElementsByClassName("wptb-actions")[0]),this.addActionField=function(e,t){var a=document.getElementsByTagName("body")[0],n=document.getElementsByClassName("wptb-actions");if(0!=n.length){var l=n[0].activeElem;for(l&&l.classList.remove("wptb-directlyhovered");0!=n.length;)n[0].parentNode.removeChild(n[0])}if(1==e){var r=void 0,o=void 0;if(r=document.createElement("span"),o=document.createElement("span"),(n=document.createElement("div")).classList.add("wptb-actions"),r.classList.add("dashicons","dashicons-trash","wptb-delete-action"),o.classList.add("dashicons","dashicons-admin-page","wptb-duplicate-action"),n.appendChild(o),n.appendChild(r),a.appendChild(n),n.activeElem=t,n.type=1,r.onclick=function(e){var t=e.target.parentNode.activeElem,a=t.parentNode;t.className.match(/wptb-element-(.+)-(\d+)/i);if(t&&a.removeChild(t),t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.hasOwnProperty("kind")&&"text"==t.kind){var n=a.parentNode;if(WPTB_Helper.rowIsTop(n)){var l=WPTB_Helper.findAncestor(n,"wptb-preview-table");l.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(l)}}(new s).actionsRemove(),(new WPTB_TableStateSaveManager).tableStateSet()},o.onclick=function(e){var t,a=void 0,n=void 0,l=e.target.parentNode.activeElem,r=l.parentNode;if((t=l.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)){n=t[1];var o={};o.kind=n,o.elemProt=l,o.tinyMceClear=!0,a=new WPTB_ElementObject(o),r.insertBefore(a.getDOMElement(),l.nextSibling)}else{a={};var i=l.cloneNode(!0);i.classList.remove("wptb-directlyhovered"),a.getDOMElement=function(){return i},applyGenericItemSettings(a),r.insertBefore(a.getDOMElement(),l.nextSibling),WPTB_Helper.wptbDocumentEventGenerate("wptb-inner-element:copy",l,a.getDOMElement())}WPTB_innerElementSet(a.getDOMElement()),new s(1,l).setParameters(l),(new WPTB_TableStateSaveManager).tableStateSet()},t.classList.contains("wptb-ph-element")){var i=void 0;(i=document.createElement("span")).classList.add("dashicons","dashicons-move","wptb-move-action"),i.draggable=!0,n.appendChild(i),i.ondragstart=function(e){var t,a=wp.template("wptb-element-icons-directories")({}),n=JSON.parse(a),l=void 0,r=e.target.parentNode.activeElem,o=void 0;if((t=r.className.match(/wptb-element-(.+)-(\d+)/i))&&Array.isArray(t)){o=t[1],r.classList.add("wptb-moving-mode"),n&&"object"===(void 0===n?"undefined":_typeof(n))&&n[o]&&(l=WPTB_Helper.getElementIcon(n[o])),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(l,0,0),e.dataTransfer.setData("node","wptb-element-"+t[1]+"-"+t[2]),e.dataTransfer.setData("wptb-moving-mode","wptb-element-"+t[1]+"-"+t[2]),e.dataTransfer.setData("wptbElIndic-"+t[1],"wptbElIndic-"+t[1]);var i=e.target.parentNode.activeElem;if("text"==i.kind){var s=i.parentNode.parentNode;if(WPTB_Helper.rowIsTop(s)){var d=WPTB_Helper.findAncestor(s,"wptb-preview-table");d.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(d)}}}else p.style.display="none";p.actionsHide()},i.ondragend=function(e){WPTB_Helper.elementDragEndClear()}}n.style.display="block",p.wptbActions=n}},this.setParameters=function(t){if(!p.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length?p.wptbActions=e[0]:p.wptbActions=!1}if(p.wptbActions&&p.wptbActions.classList.contains("wptb-actions")){p.wptbActions.style.display="block";var a=t.getBoundingClientRect(),n=document.getElementsByClassName("wptb-container")[0],l=function(){var e=t.getBoundingClientRect();p.wptbActions.style.top=parseFloat(e.top)-15+"px"};n.removeEventListener("scroll",l,!1),p.wptbActions.style.top=parseFloat(a.top)-15+"px",p.wptbActions.style.left=parseFloat(a.right)-parseFloat(p.wptbActions.clientWidth)+1+"px",p.wptbActions.style.display="block",t.classList.add("wptb-directlyhovered"),n.addEventListener("scroll",l,!1)}},this.leaveFromField=function(e,t,a){if(!p.wptbActions){var n=document.getElementsByClassName("wptb-actions");0<n.length?p.wptbActions=n[0]:p.wptbActions=!1}if(p.wptbActions){if(e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-actions")||e.relatedTarget.classList.contains("wptb-move-action")||e.relatedTarget.classList.contains("wptb-duplicate-action")||e.relatedTarget.classList.contains("wptb-delete-action")))return p.wptbActions||(p.wptbActions=document.getElementsByClassName("wptb-actions")[0]),void(p.wptbActions.onmouseleave=function(e){null!=e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&e.relatedTarget!=p.wptbActions.activeElem&&(WPTB_Helper.findAncestor(e.relatedTarget,"wptb-directlyhovered"),p.wptbActions.activeElem),(new s).leaveFromField(e,e.relatedTarget.parentNode.parentNode),e.target.activeElem.classList.remove("wptb-directlyhovered")});t.classList.remove("wptb-directlyhovered"),p.wptbActions.style.display="none",e.relatedTarget&&(e.relatedTarget.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.relatedTarget,"wptb-ph-element"))&&(p.addActionField(1,e.relatedTarget.parentNode),p.setParameters(e.relatedTarget.parentNode))}},this.actionsRemove=function(){if(!p.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(p.wptbActions=e[0])}p.wptbActions&&p.wptbActions.parentNode.removeChild(p.wptbActions)},this.actionsHide=function(){if(!p.wptbActions){var e=document.getElementsByClassName("wptb-actions");0<e.length&&(p.wptbActions=e[0])}p.wptbActions&&(p.wptbActions.style.opacity=0)}};document.addEventListener("DOMContentLoaded",function(){var l=WPTB_Helper.detectMode();if(l){var r=new XMLHttpRequest,e=ajaxurl+"?action=get_table&id="+l;r.open("GET",e,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(e){if(4!=this.readyState||200!=this.status);else{var t=JSON.parse(r.responseText);if(document.getElementById("wptb-setup-name").value=t[0],t[1]){document.getElementsByClassName("wptb-table-generator")[0].style.display="none";var a=document.getElementsByClassName("wptb-table-setup")[0];a.appendChild(WPTB_Parser(t[1])),document.getElementsByTagName("body")[0],WPTB_Table();var n=document.querySelector(".wptb-preview-table");n&&(n.className.match(/wptb-element-((.+-)\d+)/i)||n.classList.add("wptb-element-main-table_setting-"+l),n.dataset.wptbTableContainerMaxWidth&&(a.style.maxWidth=n.dataset.wptbTableContainerMaxWidth+"px",n.tdDefaultWidth())),WPTB_Settings(),(new WPTB_TableStateSaveManager).tableStateSet(),WPTB_Helper.elementOptionsSet("table_setting",n)}else document.getElementsByClassName("wptb-table-generator")[0].style.display="table"}},r.send(null)}else document.getElementsByClassName("wptb-table-generator")[0].style.display="table";document.counter=new ElementCounters,document.select=new MultipleSelect,WPTB_Initializer(),settings=WPTB_Settings()});var WPTB_Cell=function(e,a){if(!a){(a=document.createElement("td")).style.padding=jQuery("#wptb-table-padding-number").val()+"px";var t=jQuery("#wptb-table-inner-border-number").val();""!=t&&0!=parseInt(t)&&(a.style.border=t+"px solid "+jQuery("#wptb-table-border-color").val()),a.classList.add("wptb-droppable","wptb-cell")}a.draggable=!1,e&&(a.onclick=e),a.ondblclick=function(e){if(e.stopPropagation(),!WPTB_Helper.findAncestor(a,"wptb-preview-table-manage-cells")&&e.target==e.currentTarget){WPTB_Helper.wptbDocumentEventGenerate("table:cell:dblclick",e.target);var t=WPTB_Helper.newElementProxy("text");t=t.getDOMElement(),a.appendChild(t),WPTB_innerElementSet(t)}},WPTB_innerElementSet(a);var o=a.getElementsByClassName("wptb-ph-element");if(0<o.length)for(var n=function(l){o[l].getDOMElement=function(){return o[l]},WPTB_innerElementSet(o[l]);var r=o[l].className.match(/wptb-element-((.+-)\d+)/i);r&&Array.isArray(r)&&function(){var e=r[1].split("-");o[l].kind=e[0],applyGenericItemSettings(o[l],r[1]);var a=o[l].getElementsByClassName("wptb-in-element");if(0<a.length)for(var t=function(e){var t={getDOMElement:function(){return a[e]}};applyGenericItemSettings(t)},n=0;n<a.length;n++)t(n)}()},l=0;l<o.length;l++)n(l);return this.getDOMElement=function(){return a},this.setCoords=function(e,t){var a=this.getDOMElement();a.dataset.yIndex=e,a.dataset.xIndex=t},this.getCoords=function(){var e,t=this.getDOMElement();return e.x=t.dataset.xIndex,e.y=t.dataset.yIndex,e},this.appendElement=function(e){getDOMElement().appendChild(e)},a.getCellDimensions=function(){var e=window.getComputedStyle(this,null),t=e.getPropertyValue("padding-left"),a=e.getPropertyValue("padding-right"),n=e.getPropertyValue("border-left-width"),l=e.getPropertyValue("border-right-width"),r=e.getPropertyValue("padding-top"),o=e.getPropertyValue("padding-bottom"),i=e.getPropertyValue("border-top-width"),s=e.getPropertyValue("border-bottom-width"),d=parseInt(this.offsetWidth,10)-parseInt(t,10)-parseInt(a,10)-parseInt(n,10)/2-parseInt(l,10)/2,p=parseInt(this.offsetHeight,10)-parseInt(r,10)-parseInt(o,10)-parseInt(i,10)/2-parseInt(s,10)/2,c=WPTB_Helper.findAncestor(this,"wptb-preview-table");if(c){var m=window.getComputedStyle(c,null),b=m.getPropertyValue("border-left-width"),u=m.getPropertyValue("border-right-width"),w=m.getPropertyValue("border-top-width"),g=m.getPropertyValue("border-bottom-width"),h=this.parentNode;if(h&&"tr"===h.nodeName.toLowerCase()){h.firstChild&&h.firstChild.dataset.xIndex===this.dataset.xIndex&&parseInt(b,10)>parseInt(n,10)&&(d+=-(parseInt(b,10)-parseInt(n,10))/2),h.lastChild&&h.lastChild.dataset.xIndex===this.dataset.xIndex&&parseInt(u,10)>parseInt(l,10)&&(d+=-(parseInt(u,10)-parseInt(l,10))/2);var v=h.parentNode;v&&"body"===v.nodeName.toLowerCase()&&(v.firstChild&&v.firstChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(w,10)>parseInt(i,10)&&(p+=(parseInt(w,10)-parseInt(i,10))/2),v.lastChild&&v.lastChild.firstChild.dataset.yIndex===this.dataset.yIndex&&parseInt(g,10)>parseInt(s,10)&&(p+=(parseInt(g,10)-parseInt(s,10))/2))}}return{width:parseInt(d),height:parseInt(p)}},this},WPTB_DropHandle=function(i,e){var s=void 0,d=void 0;if(0==document.getElementsByClassName("wptb-drop-handle").length){(s=document.createElement("div")).classList.add("wptb-drop-handle"),(d=document.createElement("div")).classList.add("wptb-drop-border-marker");var t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),l=document.createElement("div");t.classList.add("wptb-drop-border-marker-top"),a.classList.add("wptb-drop-border-marker-right"),n.classList.add("wptb-drop-border-marker-bottom"),l.classList.add("wptb-drop-border-marker-left"),d.appendChild(t),d.appendChild(a),d.appendChild(n),d.appendChild(l);var r=document.getElementsByTagName("body");0<r.length&&(r[0].appendChild(s),r[0].appendChild(d)),s.ondragenter=function(){},s.ondragover=function(e){e.preventDefault()},s.ondragleave=function(){},s.ondrop=function(e){e.preventDefault();var t=void 0;e.dataTransfer.getData("wptbElement")?t=(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():((t=document.getElementsByClassName(e.dataTransfer.getData("node"))[0]).classList.remove("wptb-moving-mode"),t.classList.remove("wptb-moving-into-same-elem"),t.wptbMovingMode=1);var a=void 0;if("Drop Here"==s.dataset.text)"td"==(i=s.getDOMParentElement()).nodeName.toLowerCase()&&(a=s.getDOMParentElement()).appendChild(t);else{var n=s.getDOMParentElement();if(a=n.parentNode,"Above Element"==s.dataset.text)a.insertBefore(t,n);else if("Below Element"==s.dataset.text){var l=n.nextSibling;a.insertBefore(t,l)}}var r=a.parentNode;if(WPTB_Helper.rowIsTop(r)){var o=WPTB_Helper.findAncestor(r,"wptb-preview-table");o.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(o)}t.className.match(/wptb-element-(.+)-(\d+)/i)[1];(e.dataTransfer.getData("wptbElement"),s.style.display="none",d.style.display="none",WPTB_innerElementSet(t),t.classList.contains("wptb-image-container")&&1!=t.wptbMovingMode)||((new WPTB_TableStateSaveManager).tableStateSet(),t.wptbMovingMode)},document.querySelector(".wptb-container").onscroll=function(){s.style.display="none",d.style.display="none"}}else s=document.getElementsByClassName("wptb-drop-handle")[0],d=document.getElementsByClassName("wptb-drop-border-marker")[0];if(!i||"td"!=i.nodeName.toLowerCase()||0==i.getElementsByClassName("wptb-ph-element").length){var o=void 0;if("td"==i.localName?o=i.parentNode:"div"==i.localName&&i.classList.contains("wptb-ph-element")&&(o=i.parentNode.parentNode),WPTB_Helper.rowIsTop(o))if(WPTB_Helper.findAncestor(o,"wptb-preview-table").classList.contains("wptb-table-preview-head")){for(var p=e.dataTransfer.types,c=!1,m=0;m<p.length;m++){var b=p[m].match(/wptbelindic-([a-z]+)/i);if(b&&"text"!=b[1]){c=!0;break}}if(c)return}s.style.width=i.offsetWidth+"px";var u=i.offsetHeight,w=i.getBoundingClientRect(),g=parseFloat(w.left),h=void 0;if(s.style.left=g+"px",-1!=e.dataTransfer.types.indexOf("wptb-moving-mode")){var v=document.getElementsByClassName("wptb-moving-mode")[0];i==v?(s.classList.add("wptb-moving-into-same-elem"),d.classList.add("wptb-moving-into-same-elem")):(s.classList.remove("wptb-moving-into-same-elem"),d.classList.remove("wptb-moving-into-same-elem"))}if(s.getDOMParentElement=function(){return i},s.style.display="block",d.style.display="block","td"!=i.nodeName.toLowerCase()){var f=null==e.offsetY?e.layerY:e.offsetY;h=parseFloat(w.top)-parseFloat(11),s.dataset.text="Above Element",u/2<f&&(h=parseFloat(w.top)+u-1,s.dataset.text="Below Element")}else s.dataset.text="Drop Here",h=parseFloat(w.top)+u/2-5;s.style.top=h+"px",d.style.top=w.top+"px",d.style.left=w.left+"px",wptbDropBorderMarkerTop=d.querySelector(".wptb-drop-border-marker-top"),wptbDropBorderMarkerTop.style.width=parseFloat(i.offsetWidth)-parseFloat(1)+"px",wptbDropBorderMarkerRight=d.querySelector(".wptb-drop-border-marker-right"),wptbDropBorderMarkerRight.style.height=parseFloat(w.bottom)-parseFloat(w.top)-1+"px",wptbDropBorderMarkerRight.style.left=wptbDropBorderMarkerTop.style.width,wptbDropBorderMarkerBottom=d.querySelector(".wptb-drop-border-marker-bottom"),wptbDropBorderMarkerBottom.style.width=wptbDropBorderMarkerTop.style.width,wptbDropBorderMarkerBottom.style.top=wptbDropBorderMarkerRight.style.height,wptbDropBorderMarkerLeft=d.querySelector(".wptb-drop-border-marker-left"),wptbDropBorderMarkerLeft.style.height=wptbDropBorderMarkerRight.style.height}},ElementCounters=function(){var t=[];return t.text=0,t.image=0,t.list=0,t.button=0,this.increment=function(e){e in t&&t[e]++},this.nextIndex=function(e){if(e in t)return t[e]+1},this},WPTB_ElementObject=function(e){var t=void 0,a=void 0,n=void 0;if(e.elemProt){(t=e.elemProt.cloneNode(!0)).classList.remove("wptb-directlyhovered");var l=e.elemProt.className.match(/wptb-element-((.+-)\d+)/i);l&&Array.isArray(l)&&(a=l[1]),n=!0,e.tinyMceClear&&(t=WPTB_Helper.elementClearFromTinyMce(t))}else{a=void 0,n=!1,(t=document.createElement("div")).classList.add("wptb-"+e.kind+"-container","wptb-ph-element","wptb-item-javascript-indic");var r="wptb-"+e.kind+"-content",o=wp.template(r);e.node=t;var i=o(e);i=i.replace(/\r|\n|\t/g,"").trim(),t.innerHTML=i}var s=t.querySelectorAll(".wptb-in-element");if(0<s.length)for(var d=function(e){var t={getDOMElement:function(){return s[e]}};applyGenericItemSettings(t)},p=0;p<s.length;p++)d(p);return window.addEventListener("item:onmouseenter",function(e){},!1),this.kind=e.kind,this.getDOMElement=function(){return t},applyGenericItemSettings(this,a,n),this},WPTB_ElementOptions=function(e,t,a){e.getDOMElement().addEventListener("click",function(){WPTB_Helper.elementOptionsSet(e.kind,this)},{capture:!0})};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Helper={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":null},rgbToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},isHex:function(e){return new RegExp("^#(?:[A-Fa-f0-9]{3}){1,2}$").test(e)},getElementIcon:function(e){location.protocol,location.hostname;var t=document.createElement("img");return t.src=e,t},elementDragEndClear:function(){var e=document.getElementsByClassName("wptb-moving-mode");if(0<e.length)for(var t=0;t<e.length;t++)e[t].classList.remove("wptb-moving-mode");var a=document.getElementsByClassName("wptb-drop-handle");if(0<a.length)for(var n=0;n<a.length;n++)a[n].style.display="none";var l=document.getElementsByClassName("wptb-drop-border-marker");if(0<l.length)for(var r=0;r<l.length;r++)l[r].style.display="none"},linkHttpCheckChange:function(e){if(e){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))return e;var t=e.split("/"),a=void 0;return Array.isArray(t)&&0<t.length&&(a=t[t.length-1]),document.location.protocol+"//"+a}return""},dataTitleColumnSet:function(e){for(var t=e.rows,a=t[0],n=getComputedStyle(a),l=a.children,r={},o=0;o<l.length;o++){for(var i=l[o].children,s=0;s<i.length;s++){var d=i[s];if(d.classList.contains("wptb-ph-element"))if("text"==d.className.match(/wptb-element-(.+)-(\d+)/i)[1]){var p=d.querySelector("p"),c=p.textContent,m=p.style.textAlign;r[l[o].dataset.xIndex]=[c,d.style.fontSize,d.style.color,n.backgroundColor,m];break}}r[l[o].dataset.xIndex]||(r[l[o].dataset.xIndex]=["","","",n.backgroundColor,""])}for(var b=1;b<t.length;b++)for(var u=t[b].children,w=0;w<u.length;w++)r[u[w].dataset.xIndex]?(u[w].dataset.wptbTitleColumn=r[u[w].dataset.xIndex][0],u[w].dataset.wptbTitleColumnFontSize=r[u[w].dataset.xIndex][1],u[w].dataset.wptbTitleColumnColor=r[u[w].dataset.xIndex][2],u[w].dataset.wptbTitleBackgroundColor=r[u[w].dataset.xIndex][3],u[w].dataset.wptbTitleAlign=r[u[w].dataset.xIndex][4]):(u[w].dataset.wptbTitleColumn="",u[w].dataset.wptbTitleColumnFontSize="",u[w].dataset.wptbTitleColumnColor="",u[w].dataset.wptbTitleBackgroundColor="",u[w].dataset.wptbTitleAlign="")},findAncestor:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},rowIsTop:function(e){return e.parentNode.children[0]==e},getSelectionText:function(){return window.getSelection?window.getSelection().toString():document.selection.createRange().text},elementOptionsPanelClear:function(){var e=document.getElementById("element-options-group");e&&(e.innerHTML="")},wpColorPickerCheckChangeForTableStateSaving:function(e){if("external"==e.originalEvent.type)(new WPTB_TableStateSaveManager).tableStateSet();else if(WPTB_Helper.findAncestor(e.target,"wp-picker-container")&&("square"==e.originalEvent.type||"strip"==e.originalEvent.type)){var t=document.getElementsByTagName("body")[0];t.removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1),t.addEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)}},irisStripMouseUpStateSaveManager:function(){(new WPTB_TableStateSaveManager).tableStateSet(),document.getElementsByTagName("body")[0].removeEventListener("mouseup",WPTB_Helper.irisStripMouseUpStateSaveManager,!1)},wpColorPickerClear:function(e,t){var a=void 0;t?(a=[document.getElementById(e)]).length=1:a=document.getElementsByClassName(e);for(var n=0;n<a.length;n++){var l=WPTB_Helper.findAncestor(a[n],"wp-picker-container");if(l){var r=l.parentNode;r.removeChild(l);var o=document.createElement("input");t?o.setAttribute("id",e):o.classList.add("wptb-element-property",e),o.value="",r.appendChild(o)}}},detectMode:function(){var e=window.location.href,t=new RegExp("[?&]table(=([^&#]*)|&|#|$)").exec(e);return!!t&&(t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"")},getColumnWidth:function(e,t){for(var a=t.dataset.xIndex,n=e.querySelectorAll('[data-x-index="'+a+'"]'),l=t.getCellDimensions().width,r=0;r<n.length;r++)l>n[r].getCellDimensions().width&&(l=n[r].getCellDimensions().width);return l},getRowHeight:function(e,t){for(var a=t.dataset.yIndex,n=e.querySelectorAll('[data-y-index="'+a+'"]'),l=t.getCellDimensions().height,r=0;r<n.length;r++)l>n[r].getCellDimensions().height&&(l=n[r].getCellDimensions().height);return l},newElementProxy:function(e){if(e)return new WPTB_ElementObject({kind:e})},wpColorPickerChange:function(e,t){var a=void 0;a=t?t.color.toString():"";var n,l,r,o=WPTB_Helper.findAncestor(e.target,"wp-picker-input-wrap").getElementsByClassName("wptb-color-picker")[0];l=(n=o.dataset.element.match(/wptb-options-(.+)-(\d+)/i))[1],r=n[2];var i=document.getElementsByClassName("wptb-element-"+l+"-"+r)[0];if("button"==l)"button-text-color"==o.dataset.type?i.getElementsByClassName("wptb-button")[0].style.color=a:i.getElementsByClassName("wptb-button")[0].style.backgroundColor=a;else if("list"==l){var s=i.querySelectorAll("p");if(0<s.length)for(var d=0;d<s.length;d++)s[d].style.color=a}else if("star_rating"==l){if("star-color"==o.dataset.type)for(var p=i.querySelectorAll("li"),c=0;c<p.length;c++)for(var m=p[c].getElementsByTagName("span"),b=0;b<m.length;b++)m[b].style.fill=a;else if("numeral-rating-color"==o.dataset.type){i.querySelector(".wptb-number-rating").style.color=a}}else i.style.color=a},numberImputSize:function(e,t,a){e.onkeydown=function(){var e=this.value;0==(e=String(e))[0]?this.value="":(e=e.substring(0,t),this.value=e)},e.onkeyup=function(){var e=this.value;parseInt(e,10)>parseInt(a,10)&&(this.value=a),(new WPTB_TableStateSaveManager).tableStateSet()}},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wptbDocumentEventGenerate:function(e,t,a){if(e&&t){a||(a=!0);var n=new CustomEvent(e,{detail:a,bubbles:!0});t.dispatchEvent(n)}},elementStartScript:function(e){var t=e.className.match(/wptb-element-(.+)-(\d+)/i);if(t&&Array.isArray(t)){var a=t[1];a&&a in WPTB_ElementsScriptsLauncher&&WPTB_ElementsScriptsLauncher[a](e)}},deleteEventHandlers:function(e){if(e){jQuery(e).off();var t=e.children;if(t)for(var a=0;a<t.length;a++)WPTB_Helper.deleteEventHandlers(t[a])}},replaceAll:function(e,t,a){return e.split(t).join(a)},elementClearFromTinyMce:function(e){var t=e.querySelectorAll(".mce-content-body");if(0<t.length)for(var a=0;a<t.length;a++)t[a].classList.remove("mce-content-body");var n=e.querySelectorAll("[data-mce-style]");if(0<n.length)for(var l=0;l<n.length;l++)n[l].removeAttribute("data-mce-style");var r=e.querySelectorAll(".mce-edit-focus");if(0<r.length)for(var o=0;o<r.length;o++)r[o].classList.remove("mce-edit-focus");var i=e.querySelectorAll("[contenteditable]");if(0<i.length)for(var s=0;s<i.length;s++)i[s].removeAttribute("contenteditable");var d=e.querySelectorAll("[spellcheck]");if(0<d.length)for(var p=0;p<d.length;p++)d[p].removeAttribute("spellcheck");var c=e.querySelectorAll("[id^=mce_]");if(0<c.length)for(var m=0;m<c.length;m++)c[m].removeAttribute("id");return e},elementOptionContainerCustomClassSet:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option");a&&a.classList.add(t)}},elementOptionContainerAdditionalStyles:function(e,t){if(e&&t){var a=WPTB_Helper.findAncestor(e,"wptb-element-option"),n=t.split(";");if(a&&n){var l=function(e,t){e&&(containerStyleStrArr=e.split(":"),containerStyleStrArr&&Array.isArray(containerStyleStrArr)&&(t.style[containerStyleStrArr[0]]=containerStyleStrArr[1]))};if(n&&Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&l(n[r],a);else l(n,a)}}},controlsInclude:function(i,s){i&&"object"===(void 0===i?"undefined":_typeof(i))&&"function"==typeof s&&i.addEventListener("element:controls:active",function(){if(!i.hasOwnProperty("сontrolsConnectIndic")||!0!==i.сontrolsConnectIndic){var e=i.className.match(/wptb-element-(.+)-(\d+)/i),t=void 0;if(e&&Array.isArray(e)&&(t=e[1]),t)for(var a=document.querySelector(".wptb-element-options.wptb-options-"+e[1]+"-"+e[2]).querySelectorAll(".wptb-element-option"),n=0;n<a.length;n++){var o=a[n].querySelector(".wptb-element-property");o&&function(){var e=new RegExp("wptb-el-"+t+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),l=o.className.match(e);if(l&&Array.isArray(l)){var r=l[0];i.addEventListener("wptb-control:"+r,function(){var e={},t=l[2],a=document.getElementsByClassName(r);if(0<a.length&&t){var n=WPTB_Helper.targetControlValueGet(a);e[t]=n}s(e,i)},!1)}i.сontrolsConnectIndic=!0}()}}},!1)},oneControlInclude:function(n,l,e){if(!n||"object"!==(void 0===n?"undefined":_typeof(n))||"function"!=typeof l||"string"!=typeof e)return!1;var t=n.className.match(/wptb-element-((.+-)\d+)/i);if(t&&Array.isArray(t)){var a="wptb-"+t[1].split("-")[0]+"-control-stack",r=wp.template(a)({container:"."+t[0]}),o=JSON.parse(r);if(o&&"object"===(void 0===o?"undefined":_typeof(o))&&o.hasOwnProperty(e)){var i="wptb-el-"+t[1]+"-"+e;n.addEventListener("wptb-control:"+i,function(e){var t=document.getElementsByClassName(i);if(0<t.length){var a=WPTB_Helper.targetControlValueGet(t);l(a,n)}},!1)}}},innerElementCopyIncludeHandler:function(a,n){a&&"object"===(void 0===a?"undefined":_typeof(a))&&"function"==typeof n&&a.addEventListener("wptb-inner-element:copy",function(e){var t=e.detail;t&&(WPTB_Helper.elementClearFromTinyMce(t),n(t,a))},!1)},appearDependOnControl:function(t,e){if(Array.isArray(t)){var a=t[0],n=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(n&&Array.isArray(n)){var l=n[3],r=e.replace(l,a),o=document.getElementsByClassName(r);if(0<o.length){o=o[0];var i=document.getElementsByClassName(e);if(0<i.length){i=i[0];var s=WPTB_Helper.findAncestor(i,"wptb-element-option");if(s){var d=function(e,t){if(e){var a=document.getElementsByClassName(e);if(0<a.length){var n=WPTB_Helper.targetControlValueGet(a);t[1]&&Array.isArray(t[1])&&-1!==t[1].indexOf(n)?s.style.display="block":t[2]&&Array.isArray(t[2])&&-1!==t[2].indexOf(n)&&(s.style.display="none")}}};d(r,t),o.addEventListener("change",function(e){d(r,t)},!1)}}}}}},controlsStateManager:function(e,t){var a=document.getElementsByClassName(e);if(0<a.length){var n=e.match(/wptb-el-((.+-)\d+)-(.+)/i);if(n&&Array.isArray(n)){if(document.querySelector(".wptb-element-"+n[1])){var l=void 0,r={},o=void 0;if(0==(l=document.getElementsByClassName("wptb-element-datas")).length||""==l[0].innerHTML){var i=WPTB_Helper.targetControlValueGet(a);r["data-"+e]=i,(o={})["tmpl-wptb-el-datas-"+n[1]]=r,o=JSON.stringify(o),0==l.length?((l=document.createElement("script")).setAttribute("type","text/html"),l.setAttribute("class","wptb-element-datas")):l=l[0],l.innerHTML=o,document.getElementsByTagName("body")[0].appendChild(l)}else if((o=(l=l[0]).innerHTML)&&(o=o.trim(),(o=JSON.parse(o))&&"object"===(void 0===o?"undefined":_typeof(o))))if(t){var s=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])||(o["tmpl-wptb-el-datas-"+n[1]]={}),o["tmpl-wptb-el-datas-"+n[1]]["data-"+e]=s,l.innerHTML=JSON.stringify(o)}else if("tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])&&"data-"+e in o["tmpl-wptb-el-datas-"+n[1]]){if("tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])&&"data-"+e in o["tmpl-wptb-el-datas-"+n[1]])for(var d=0;d<a.length;d++)if("checkbox"==a[d].type){var p=void 0;"checked"==(p=a[d].name?o["tmpl-wptb-el-datas-"+n[1]]["data-"+e][a[d].name]:o["tmpl-wptb-el-datas-"+n[1]]["data-"+e])?a[d].checked=!0:"unchecked"==p&&(a[d].checked=!1)}else a[d].value=o["tmpl-wptb-el-datas-"+n[1]]["data-"+e]}else{var c=WPTB_Helper.targetControlValueGet(a);"tmpl-wptb-el-datas-"+n[1]in o&&"object"===_typeof(o["tmpl-wptb-el-datas-"+n[1]])||(o["tmpl-wptb-el-datas-"+n[1]]={}),o["tmpl-wptb-el-datas-"+n[1]]["data-"+e]=c,l.innerHTML=JSON.stringify(o)}}}}},targetControlValueGet:function(e){for(var t=void 0,a=0;a<e.length;a++)"checkbox"==e[a].type&&e[a].name?(t||(t={}),1==e[a].checked?t[e[a].name]="checked":t[e[a].name]="unchecked"):"checkbox"==e[a].type?t=1==e[a].checked?"checked":"unchecked":e[a].type?t=e[a].value:e[a].dataset.alignmentValue&&e[a].classList.contains("selected")&&(t=e[a].dataset.alignmentValue);return t},elementControlsStateCopy:function(e,t){if(e&&t){var a=e.className.match(/wptb-element-((.+-)\d+)/i),n=t.className.match(/wptb-element-((.+-)\d+)/i);if(a&&Array.isArray(a)&&n&&Array.isArray(n)){var l=a[1],r=n[1],o=document.getElementsByClassName("wptb-element-datas");if(0<o.length){var i=(o=o[0]).innerHTML;if(i&&(i=i.trim(),(i=JSON.parse(i))&&"object"===(void 0===i?"undefined":_typeof(i)))){var s=i["tmpl-wptb-el-datas-"+l];if(s&&"object"===(void 0===s?"undefined":_typeof(s))){var d={};Object.keys(s).forEach(function(e){var t=s[e],a=e.replace(l,r);d[a]=t}),0<Object.keys(d).length&&(i["tmpl-wptb-el-datas-"+r]=d,i=JSON.stringify(i),o.innerHTML=i)}}}}}},elementControlsStateDelete:function(e,t){var a=e.className.match(/wptb-element-(.+)-(\d+)/i),n=document.getElementsByTagName("body")[0],l=n.getElementsByClassName("wptb-element-datas");if(a&&Array.isArray(a)&&0<l.length){var r=(l=l[0]).innerHTML;r&&(r=r.trim(),(r=JSON.parse(r))&&"object"===(void 0===r?"undefined":_typeof(r))&&"tmpl-wptb-el-datas-"+a[1]+"-"+a[2]in r&&(t?r["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]]&&"object"===_typeof(r["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]])&&"data-wptb-el-"+a[1]+"-"+a[2]+"-"+t in r["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]]&&delete r["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]]["data-wptb-el-"+a[1]+"-"+a[2]+"-"+t]:delete r["tmpl-wptb-el-datas-"+a[1]+"-"+a[2]],0==Object.keys(r).length?n.removeChild(l):(r=JSON.stringify(r),l.innerHTML=r)))}},elementOptionsSet:function(e,t){var a,s,d,n="wptb-"+e+"-control-stack",l=wp.template(n),r=void 0,o=void 0,p=void 0,c=document.createElement("div"),i=document.createElement("div"),m=t.className.match(/wptb-element-((.+-)\d+)/i);if(!m&&t.classList.contains("wptb-preview-table")){var b=WPTB_Helper.detectMode();t.classList.add("wptb-element-main-table_setting-"+b),m=t.className.match(/wptb-element-((.+-)\d+)/i)}if(a={container:"."+m[0]},s=m[0],d=m[1],t.classList.contains("wptb-preview-table"))o="table-settings-group",p="wptb-element-option";else{for(var u=document.getElementById("element-options-group").childNodes,w=0;w<u.length;w++)u[w].style&&(u[w].style.display="none");document.getElementsByClassName("wptb-elements-container")[0].style.display="none",document.getElementsByClassName("wptb-settings-section")[0].style.display="none",document.getElementById("element-options-group").style.display="block",o="element-options-group",p="wptb-element-option"}c.classList.add("wptb-element-options","wptb-options-"+m[1]),i.classList.add("wptb-element-options-scripts","wptb-options-"+m[1]);var g=l(a),h=JSON.parse(g);r=document.getElementById(o);for(var v=[].concat(_toConsumableArray(r.children)),f=0;f<v.length;f++)r.removeChild(v[f]);document.getElementById(o).appendChild(c),document.getElementById(o).appendChild(i),c.style.display="block";var y=[],S=[];if(Object.keys(h).forEach(function(e){var t=h[e];t.controlKey=e;var a=wp.template("wptb-"+t.type+"-control");t.elemContainer=s,t.elementControlTargetUnicClass="wptb-el-"+d+"-"+t.controlKey;var n=a(t);"appearDependOnControl"in t&&Array.isArray(t.appearDependOnControl)&&S.push([t.appearDependOnControl,t.elementControlTargetUnicClass]);var l=document.createElement("div");l.classList.add(p,"wptb-settings-items"),t.customClassForContainer&&l.classList.add(t.customClassForContainer),t.containerAdditionalStyles&&l.setAttribute("style",t.containerAdditionalStyles),l.innerHTML=n,c.appendChild(l);var r=l.getElementsByTagName("wptb-template-script");if(0<r.length){var o=(r=r[0]).innerText;l.removeChild(r);var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.innerHTML=o.replace(/\r|\n|\t/g,"").trim(),y.push(i)}0}),0<y.length)for(var T=0;T<y.length;T++)i.appendChild(y[T]);for(var B=0;B<S.length;B++)WPTB_Helper.appearDependOnControl(S[B][0],S[B][1]);WPTB_Helper.wptbDocumentEventGenerate("element:controls:active",t)},managerExternalCssStyles:function(e,t,a,n){var l=e.match(/wptb-element-main(.+)-(\d+)/i);if(!l||!Array.isArray(l)){var r=document.getElementsByClassName("wptb-preview-table");if(0<r.length){var o=(r=r[0]).className.match(/wptb-element-main(.+)-(\d+)/i);o&&Array.isArray(o)&&(t="."+o[0]+" "+t)}}var i=document.head;if(i){var s=i.querySelector("#styles-"+e);if(s){var d=s.innerHTML;if(d){var p=d.split("}");p.pop();for(var c=!1,m=0;m<p.length;m++){var b=p[m].split("{");if(b[0]===t){var u=b[1].split(";");u.pop();for(var w=!1,g=0;g<u.length;g++){if(u[g].split(":")[0]===a){n?u[g]=a+":"+n:u.splice(g,1),b[1]=u.join(";")?u.join(";")+";":"",w=!0;break}}w||n&&(b[1]+=a+":"+n+";"),b[1]?p[m]=b[0]+"{"+b[1]:p.splice(m,1),p.join("}")?s.innerHTML=p.join("}")+"}":i.removeChild(s),c=!0;break}}c||(s.innerHTML=n?d+t+"{"+a+":"+n+";}":d)}else n?s.innerHTML=t+"{"+a+":"+n+";}":i.removeChild(s)}else if(n){var h=document.createElement("style");h.setAttribute("id","styles-"+e),h.classList.add("styles-wptb-elements"),h.innerHTML=t+"{"+a+":"+n+";}",i.appendChild(h)}}},externalCssStylesDelete:function(e){var t=document.head;if(t){var a=t.querySelector("#styles-"+e);a&&t.removeChild(a)}},externalCssStylesCopy:function(e,t){if(e){var a=e.className.match(/wptb-element-(.+)-(\d+)/i);if(a&&Array.isArray(a)){var n=a[0],l=document.head;if(l){var r=l.querySelector("#styles-"+n);if(r){var o=r.cloneNode(!0);o.removeAttribute("id","styles-"+n);var i=t.className.match(/wptb-element-(.+)-(\d+)/i);if(i&&Array.isArray(i)){o.setAttribute("id","styles-"+i[0]);var s=r.innerHTML,d=WPTB_Helper.replaceAll(s,n,i[0]);o.innerHTML=d,l.appendChild(o)}}}}}},elementsStylesConvertToObject:function(){for(var e=document.head.querySelectorAll(".styles-wptb-elements"),t={},a=0;a<e.length;a++){var n=e[a].getAttribute("id");n&&e[a].innerHTML&&(t[n]=e[a].innerHTML)}return 0!=Object.keys(t).length?JSON.stringify(t):""},elementsStylesSetFromObject:function(e){var n=document.head;if(n){var t=n.querySelectorAll(".styles-wptb-elements");if(0<t.length){t=[].concat(_toConsumableArray(t));for(var a=0;a<t.length;a++)n.removeChild(t[a])}if(e){var l=JSON.parse(e);0!=Object.keys(l).length&&Object.keys(l).forEach(function(e){var t=l[e],a=document.createElement("style");a.setAttribute("id",e),a.classList.add("styles-wptb-elements"),a.innerHTML=t,n.appendChild(a)})}}},saveTable:function(s,d,e){if(e||d||!s.target.dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||(window.wptbTableStateNumberShow,s.target.dataset.wptbTableStateNumberSave),!e){var t=document.querySelector(".wptb-edit-bar");if(t&&t.classList.contains("visible")){document.getElementsByClassName("wptb-preview-table")[0];WPTB_Helper.toggleTableEditMode()}}var p=new XMLHttpRequest,a=(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl)+"?action=save_table",c=document.getElementById("wptb-setup-name").value.trim(),m=void 0,n=void 0,l=void 0;n=document.getElementsByClassName("wptb-preview-table");var r=void 0;((rs=WPTB_Helper.detectMode())||(rs=document.wptbId))&&(r=rs);var o=!1;if(0<n.length){var i=(n=n[0]).cloneNode(!0);r&&i.classList.contains("wptb-element-main-table_setting-startedid-0")&&(i.classList.remove("wptb-element-main-table_setting-startedid-0"),i.classList.add("wptb-element-main-table_setting-"+r),o=!0),i.columns=n.columns,n=(n=WPTB_Stringifier(i)).outerHTML}else n="";if(!e){l="";var b=document.getElementsByClassName("wptb-element-datas");0<b.length&&b[0].innerHTML&&(l=b[0].innerHTML,o&&(l=WPTB_Helper.replaceAll(l,"tmpl-wptb-el-datas-main-table_setting-startedid-0","tmpl-wptb-el-datas-main-table_setting-"+r),l=WPTB_Helper.replaceAll(l,"data-wptb-el-main-table_setting-startedid-0","data-wptb-el-main-table_setting-"+r)))}var u=WPTB_Helper.elementsStylesConvertToObject();if(o&&(u=WPTB_Helper.replaceAll(u,".wptb-element-main-table_setting-startedid-0",".wptb-element-main-table_setting-"+r)),""===c&&""===n){var w="";return""===c&&(w+="You must assign a name to the table before saving it.</br>"),""===n&&(w+="Table wasn't created"),(m=document.getElementById("wptb-messaging-area")).innerHTML='<div class="wptb-error wptb-message">Error: '+w+"</div>",m.classList.add("wptb-warning"),void setTimeout(function(){m.removeChild(m.firstChild)},4e3)}var g={title:c,content:n,elements_datas:l,elements_styles:u,security_code:wptb_admin_object.security_code};e&&(g.preview_saving=e),r&&(g.id=r),g=JSON.stringify(g),p.open("POST",a,!0),p.setRequestHeader("Content-type","application/json; charset=utf-8"),p.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(p.responseText);if(m=document.getElementById("wptb-messaging-area"),"saved"==t[0]){var a=document.location.href.replace("#",""),n=new RegExp("&table=(.+)","i");return a=a.replace(n,""),window.history.pushState(null,null,a+"&table="+t[1]),void WPTB_Helper.saveTable(s,!0)}if("edited"==t[0]&&d){document.wptbId=t[1],m.innerHTML='<div class="wptb-success wptb-message">Table "'+c+'" was successfully saved.</div>',document.getElementsByClassName("wptb-embed-btn")[0].classList.remove("wptb-button-disable"),document.getElementById("wptb-embed-shortcode").value="[wptb id="+t[1]+"]";document.querySelector(".wptb-preview-table");var l=document.getElementsByClassName("wptb-preview-btn");if(0<l.length){(l=l[0]).classList.remove("wptb-button-disable");var r=l.dataset.previewHref;r=r.replace("empty",t[1]),l.setAttribute("href",r)}s.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var o=document.getElementsByClassName("wptb-save-btn");0<o.length&&(o=o[0]).classList.add("wptb-save-disabled")}else if("edited"==t[0]){m.innerHTML='<div class="wptb-success wptb-message">Table "'+c+'" was successfully updated.</div>',s.target.dataset.wptbTableStateNumberSave=window.wptbTableStateNumberShow;var i=document.getElementsByClassName("wptb-save-btn");0<i.length&&(i=i[0]).classList.add("wptb-save-disabled")}else{if("preview_edited"==t[0])return;m.innerHTML='<div class="wptb-error wptb-message">Safety problems</div>'}m.classList.add("wptb-success"),setTimeout(function(){m.removeChild(m.firstChild)},4e3)}},p.send(g)},clickOnFreeSpace:function(){document.getElementsByClassName("wptb-elements-container")[0].style.display="table",document.getElementsByClassName("wptb-settings-section")[0].style.display="block",document.getElementById("element-options-group").style.display="none";var e=document.getElementById("wpcd_fixed_toolbar");e.hasAttribute("data-toolbar-active-id")&&document.getElementById(e.getAttribute("data-toolbar-active-id")).classList.remove("toolbar-active");var t=document.querySelector(".wptb-preview-table");t&&WPTB_Helper.elementOptionsSet("table_setting",t)},elementAjax:function(e,n){var l=new XMLHttpRequest,t=(wptb_admin_object?wptb_admin_object.ajaxurl:ajaxurl)+"?action=wptb_element_ajax",a=void 0,r=n.className.match(/wptb-element-(.+)-(\d+)/i);r&&Array.isArray(r)&&(a=r[1]);var o={element_ajax_data:e,element_name:a,security_code:wptb_admin_object.security_code};o=JSON.stringify(o),l.open("POST",t,!0),l.setRequestHeader("Content-type","application/json; charset=utf-8"),l.onreadystatechange=function(e){if(4==this.readyState&&200==this.status){var t=JSON.parse(l.responseText),a=void 0;a=t&&Array.isArray(t)&&"element_ajax_responce"==t[0]?{value:t[1]}:"",WPTB_Helper.wptbDocumentEventGenerate("wptb-element:ajax-response",n,a)}},l.send(o)},toggleTableEditMode:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.getElementsByClassName("wptb-edit-bar"),a=document.getElementById("wptb-cell_mode_background"),n=document.getElementById("wptb-left-scroll-panel-curtain"),l=document.getElementById("wptb-left-scroll-panel-cell-settings"),r=document.getElementsByClassName("wptb-preview-table");if(0<r.length&&(r=r[0]),0<t.length)for(var o=0;o<t.length;o++)if(t[o].classList.contains("visible")){document.select.deactivateMultipleSelectMode(),t[o].classList.remove("visible"),a.classList.remove("visible"),n.classList.remove("visible"),l.classList.remove("visible"),r.parentNode.classList.remove("wptb-preview-table-manage-cells");var i=r.getElementsByTagName("td");if(0<i.length)for(var s=0;s<i.length;s++)i[s].classList.remove("wptb-highlighted")}else e||(document.select.activateMultipleSelectMode(),t[o].classList.add("visible"),a.classList.add("visible"),n.classList.add("visible"),r.parentNode.classList.add("wptb-preview-table-manage-cells"))}},WPTB_Initializer=function(){var e=document.body;columnsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[0],columnsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[0],rowsDecrementButton=e.getElementsByClassName("wptb-input-number-decrement")[1],rowsIncrementButton=e.getElementsByClassName("wptb-input-number-increment")[1],columnsInput=document.getElementById("wptb-columns-number"),rowsInput=document.getElementById("wptb-rows-number"),columnsDecrementButton.onclick=function(){1<columnsInput.value&&columnsInput.value--},columnsIncrementButton.onclick=function(){columnsInput.value<30&&columnsInput.value++},rowsDecrementButton.onclick=function(){1<rowsInput.value&&rowsInput.value--},rowsIncrementButton.onclick=function(){rowsInput.value<30&&rowsInput.value++},document.getElementById("wptb-generate-table").onclick=function(){var e=document.getElementById("wptb-columns-number").value,t=document.getElementById("wptb-rows-number").value,a=new WPTB_TableStateSaveManager;a.tableStateSet(!0),WPTB_Table(e,t),a.tableStateSet()}},WPTB_LeftPanel=(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},function(){var l=document.getElementsByClassName("wptb-preview-table")[0],e=document.getElementsByClassName("wptb-element"),t=document.getElementById("wptb-table-column-width-number");WPTB_Helper.numberImputSize(t,2,500);var a=document.getElementById("wptb-table-row-height-number");WPTB_Helper.numberImputSize(a,2,200),document.getElementById("wptb-table-column-width-slider").oninput=function(){document.getElementById("wptb-table-column-width-number").value=this.value,l.addColumnWidth(this.value)},document.getElementById("wptb-table-column-width-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-column-width-number").onchange=function(){document.getElementById("wptb-table-column-width-slider").value=this.value,l.addColumnWidth(this.value),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-column-width-auto-fixed").onchange=function(){if(this.checked){var e=l.querySelector(".wptb-highlighted"),t=WPTB_Helper.getColumnWidth(l,e);l.addColumnWidth(t)}else{l.addColumnWidth(!1,!0);var a=l.querySelector(".wptb-highlighted"),n=WPTB_Helper.getColumnWidth(l,a);document.getElementById("wptb-table-column-width-number").value=n,document.getElementById("wptb-table-column-width-slider").value=n}(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-row-height-slider").oninput=function(){document.getElementById("wptb-table-row-height-number").value=this.value,l.addRowHeight(this.value)},document.getElementById("wptb-table-row-height-slider").onchange=function(){(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-row-height-number").onchange=function(){document.getElementById("wptb-table-row-height-slider").value=this.value,l.addRowHeight(this.value),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementById("wptb-table-row-height-auto-fixed").onchange=function(){if(this.checked){var e=l.querySelector(".wptb-highlighted"),t=WPTB_Helper.getRowHeight(l,e);l.addRowHeight(t)}else{l.addRowHeight(!1,!0);var a=l.querySelector(".wptb-highlighted"),n=WPTB_Helper.getRowHeight(l,a);document.getElementById("wptb-table-row-height-number").value=n,document.getElementById("wptb-table-row-height-slider").value=n}(new WPTB_TableStateSaveManager).tableStateSet()},WPTB_Helper.controlsInclude(l,function(e,t){if(e&&"object"===(void 0===e?"undefined":_typeof(e)))if(e.hasOwnProperty("tableTopRowsAsHeader"));else if(e.hasOwnProperty("makeTableResponsive"));else if(e.hasOwnProperty("applyTableContainerMaxWidth")){var a=document.querySelector(".wptb-table-setup");if("checked"==e.applyTableContainerMaxWidth){var n=WPTB_Helper.detectMode();n||(n="startedid-0");var l=document.getElementsByClassName("wptb-el-main-table_setting-"+n+"-tableContainerMaxWidth"),r=850;0<l.length&&(l=l[0]).value&&(r=l.value),t.dataset.wptbTableContainerMaxWidth=r,a&&(a.style.maxWidth=r+"px")}else"unchecked"==e.applyTableContainerMaxWidth&&(t.removeAttribute("data-wptb-table-container-max-width"),a&&(a.style.maxWidth=null));t.tdDefaultWidth()}else if(e.hasOwnProperty("tableContainerMaxWidth")){if(e.tableContainerMaxWidth){t.dataset.wptbTableContainerMaxWidth=e.tableContainerMaxWidth;var o=document.querySelector(".wptb-table-setup");o&&(o.style.maxWidth=e.tableContainerMaxWidth+"px"),t.tdDefaultWidth()}}else e.hasOwnProperty("tableManageCells")?WPTB_Helper.toggleTableEditMode():e.hasOwnProperty("tableAlignmentCheckbox")&&t.tdDefaultWidth()});for(var n=0;n<e.length;n++)e[n].ondragstart=function(e){e.dataTransfer.setData("wptbElement",this.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+this.dataset.wptbElement,"wptbElIndic-"+this.dataset.wptbElement)};l&&(document.getElementById("wptb-table-edit-mode-close").onclick=WPTB_Helper.toggleTableEditMode,document.getElementById("wptb-left-scroll-panel-curtain-close").onclick=WPTB_Helper.toggleTableEditMode,document.getElementById("wptb-add-end-row").onclick=l.addRowToTheEnd,document.getElementById("wptb-add-start-row").onclick=l.addRowToTheStart,document.getElementById("wptb-add-row-before").onclick=l.addRowBefore,document.getElementById("wptb-add-row-after").onclick=l.addRowAfter,document.getElementById("wptb-add-end-column").onclick=l.addColumnEnd,document.getElementById("wptb-add-start-column").onclick=l.addColumnStart,document.getElementById("wptb-add-column-before").onclick=l.addColumnBefore,document.getElementById("wptb-add-column-after").onclick=l.addColumnAfter,document.getElementById("wptb-delete-column").onclick=l.deleteColumn,document.getElementById("wptb-delete-row").onclick=l.deleteRow,document.getElementById("wptb-merge-cells").onclick=l.mergeCells,document.getElementById("wptb-split-cell").onclick=l.splitCell),document.querySelector(".wptb-left-panel-extend").onclick=function(){var e=document.querySelector(".wptb-container");e&&(e.classList.contains("collapsed")?e.classList.remove("collapsed"):e.classList.add("collapsed"))},document.getElementsByClassName("wptb-builder-panel")[0].onclick=function(e){e.target.classList.contains("wptb-ph-element")||WPTB_Helper.findAncestor(e.target,"wptb-ph-element")||e.target.classList.contains("wptb-fixed-toolbar")||WPTB_Helper.findAncestor(e.target,"wptb-fixed-toolbar")||WPTB_Helper.clickOnFreeSpace()};var r=document.getElementsByClassName("wptb-header");0<r.length&&(r=r[0]),r.onclick=function(){WPTB_Helper.clickOnFreeSpace()}}),MultipleSelect=function(){var l=[],a=!1;return this.activateMultipleSelectMode=function(){l=[];for(var e=document.getElementsByClassName("wptb-preview-table")[0].getElementsByTagName("td"),t=0;t<e.length;t++)e[t].classList.remove("wptb-highlighted");a=!0},this.deactivateMultipleSelectMode=function(){a=!1},this.isActivated=function(){return a},this.pushSelectedCell=function(e){a&&(l.push(e),e.classList.add("wptb-highlighted"))},this.selectedCells=function(){return l},this.flushSelectedCells=function(){l=[]},this.getFirst=function(){for(var e,t=1e3,a=1e3,n=l.length-1;0<=n;n--)t>=l[n].dataset.xIndex&&a>=l[n].dataset.yIndex&&(e=l[n],t=l[n].dataset.xIndex,a=l[n].dataset.yIndex);return e},this.getLast=function(){for(var e,t=-1,a=-1,n=l.length-1;0<=n;n--)t<=l[n].dataset.xIndex&&a<=l[n].dataset.yIndex&&(e=l[n],t=l[n].dataset.xIndex,a=l[n].dataset.yIndex);return e},this.removeAllButFirst=function(){for(var e=this.getFirst(),t=1;t<l.length;t++)l[t].classList.add("wptb-fused-cell-"+e.dataset.xIndex+"-"+e.dataset.yIndex)},this};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Parser=function(e){var t=document.createElement("div");t.innerHTML=e;for(var a=t.children[0],n=[].concat(_toConsumableArray(a.querySelectorAll(".wptb-column-title-mobile-container"))),l=0;l<n.length;l++){n[l].parentNode.removeChild(n[l])}for(var r=a.querySelectorAll("td"),o=0;o<r.length;o++)r[o].classList.add("wptb-droppable"),r[o].classList.remove("wptb-column-title-mobile-not-elements");return a};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.keys||(Object.keys=function(){"use strict";var l=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=o.length;return function(e){if("object"!==(void 0===e?"undefined":_typeof(e))&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,a,n=[];for(t in e)l.call(e,t)&&n.push(t);if(r)for(a=0;a<i;a++)l.call(e,o[a])&&n.push(o[a]);return n}}());var WPTB_Settings=function(){for(var e=document.getElementsByClassName("wptb-element"),t=0;t<e.length;t++)e[t].ondragstart=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("wptbElement",e.target.dataset.wptbElement),e.dataTransfer.setData("wptbElIndic-"+e.target.dataset.wptbElement,"wptbElIndic-"+e.target.dataset.wptbElement)},e[t].ondragend=function(){WPTB_Helper.elementDragEndClear()};var a=document.getElementsByClassName("wptb-preview-table"),n=new WPTB_TableStateSaveManager,l=document.getElementsByClassName("wptb-undo");0<l.length&&((l=l[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){n.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");0<t.length&&0<a.length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="",WPTB_Table()})}});var r=document.getElementsByClassName("wptb-redo");0<r.length&&((r=r[0]).onclick=function(e){if(!this.classList.contains("wptb-undoredo-disabled")){n.tableStateGet(this.dataset.wptbUndoredo);var t=document.getElementsByClassName("wptb-undo-redo-container");0<t.length&&0<a.length&&((t=t[0]).onmouseleave=function(e){e.target.onmouseleave="",WPTB_Table()})}});var o=document.getElementsByClassName("wptb-popup-window-modal")[0];document.getElementsByClassName("wptb-embed-btn")[0].onclick=function(){this.classList.contains("wptb-button-disable")||o.classList.add("wptb-popup-show")},window.onbeforeunload=function(e){return 0==document.getElementsByClassName("wptb-save-disabled").length||null},document.getElementsByClassName("wptb-popup-dark-area")[0].onclick=function(){o.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-popup-window-close-icon")[0].onclick=function(){o.classList.remove("wptb-popup-show")},document.getElementsByClassName("wptb-preview-btn")[0].onclick=function(e){if(!this.classList.contains("wptb-button-disable")){var t=Math.floor(1e4*Math.random()),a=new URL(e.target.href);a.searchParams.set("preview_id",t),e.target.href=a.toString(),WPTB_Helper.saveTable(e,!1,t)}},document.getElementsByClassName("wptb-save-btn")[0].onclick=function(e){this.classList.contains("wptb-save-disabled")||WPTB_Helper.saveTable(e)}};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var WPTB_Stringifier=function(e){if(e){var t=e.cloneNode(!0);t.classList.add("wptb-table-preview-static-indic"),t.dataset.tableColumns=e.columns,t.style.width=null,t.style.minWidth=null,t.style.maxWidth=null;var a=t.getElementsByTagName("td");if(0<a.length)for(var n=0;n<a.length;n++){e.querySelector("wptb-table-preview-head")&&a[n].removeAttribute("data-x-index"),a[n].removeAttribute("data-y-index"),a[n].removeAttribute("draggable"),a[n].classList.remove("wptb-droppable");var l=a[n].getElementsByClassName("wptb-ph-element");if(0<l.length)for(var r=0;r<l.length;r++){var o=l[r].querySelectorAll(".mce-content-body");if(0<o.length)for(var i=0;i<o.length;i++)o[i].classList.remove("mce-content-body");var s=l[r].querySelectorAll("[data-mce-style]");if(0<s.length)for(var d=0;d<s.length;d++)s[d].removeAttribute("data-mce-style");var p=l[r].querySelectorAll("[contenteditable]");if(0<p.length)for(var c=0;c<p.length;c++)p[c].removeAttribute("contenteditable");var m=l[r].querySelectorAll("[spellcheck]");if(0<m.length)for(var b=0;b<m.length;b++)m[b].removeAttribute("spellcheck");var u=l[r].querySelectorAll("[id^=mce_]");if(0<u.length)for(var w=0;w<u.length;w++)u[w].removeAttribute("id");for(var g=l[r].querySelectorAll(".wptb-actions"),h=g.length;0<h&&g[0]&&g[0].parentNode;)g[0].parentNode.removeChild(g[0]),h--;var v=l[r].querySelectorAll("[data-mce-bogus]");if(0<v.length){v=[].concat(_toConsumableArray(v));for(var f=0;f<v.length;f++)v[f]&&v[f].parentNode&&v[f].parentNode.removeChild(v[f])}}if(a[n].hasAttribute("data-wptb-title-column")){var y=document.createElement("div"),S=document.createElement("div");y.classList.add("wptb-column-title-mobile-container"),S.classList.add("wptb-column-title-mobile"),S.dataset.wptbTitleColumn=a[n].dataset.wptbTitleColumn,S.setAttribute("style","font-size:"+a[n].dataset.wptbTitleColumnFontSize+"; \n                        color:"+a[n].dataset.wptbTitleColumnColor+"; background-color:"+a[n].dataset.wptbTitleBackgroundColor+"; text-align:"+a[n].dataset.wptbTitleAlign+";"),S.style.padding=a[n].style.padding,0==a[n].children.length&&a[n].classList.add("wptb-column-title-mobile-not-elements"),y.appendChild(S),a[n].insertBefore(y,a[n].firstChild)}}return t}},array=(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},[]),WPTB_Table=function(e,t){var L,a,n,h,l=document.getElementsByClassName("wptb-settings-items"),S=document.getElementsByClassName("wptb-table-setup")[0],T=function(e){var t,a=this.rowSpan,n=this.colSpan,l=document.getElementsByClassName("wptb-no-cell-action"),r=document.getElementsByClassName("wptb-single-action"),o=document.getElementsByClassName("wptb-multiple-select-action"),i=document.getElementById("wptb-left-scroll-panel-cell-settings"),s=C(this),d=s[0],p=s[1];if(document.select.isActivated()){if(this.className.match(/wptb-highlighted/)){this.classList.remove("wptb-highlighted");for(var c=0;c<a;c++)for(var m=0;m<n;m++)array[d+c][p+m]=0}else{this.classList.add("wptb-highlighted");for(c=0;c<a;c++)for(m=0;m<n;m++)array[d+c][p+m]=1}if(0===(t=document.getElementsByClassName("wptb-highlighted").length)){for(c=0;c<o.length;c++)o[c].classList.remove("visible"),o[c].setAttribute("disabled","disabled");for(c=0;c<l.length;c++)l[c].classList.add("visible"),l[c].removeAttribute("disabled");for(c=0;c<r.length;c++)r[c].classList.remove("visible"),r[c].setAttribute("disabled","disabled");i.classList.remove("visible")}else if(1===t){for(c=0;c<o.length;c++)o[c].classList.remove("visible"),o[c].setAttribute("disabled","disabled");for(c=0;c<l.length;c++)l[c].classList.remove("visible"),l[c].setAttribute("disabled","disabled");for(c=0;c<r.length;c++)r[c].classList.add("visible"),r[c].removeAttribute("disabled");var b=document.querySelector(".wptb-highlighted");if(b){var u=document.getElementById("wptb-table-column-width-slider"),w=document.getElementById("wptb-table-column-width-number"),g=document.getElementById("wptb-table-column-width-auto-fixed"),h=b.style.width;if(h)u.value=parseFloat(h,10),w.value=parseFloat(h,10),g.checked=!0;else if(b.dataset.wptbFixedWidth)u.value=b.dataset.wptbFixedWidth,w.value=b.dataset.wptbFixedWidth,g.checked=!0;else{var v=WPTB_Helper.getColumnWidth(L,b);u.value=v,w.value=v,g.checked=!1}var f=document.getElementById("wptb-table-row-height-slider"),y=document.getElementById("wptb-table-row-height-number"),S=document.getElementById("wptb-table-row-height-auto-fixed"),T=b.style.height;if(T)f.value=parseFloat(T,10),y.value=parseFloat(T,10),S.checked=!0;else if(b.dataset.wptbFixedHeight)f.value=b.dataset.wptbFixedHeight,y.value=b.dataset.wptbFixedHeight,S.checked=!0;else{var B=WPTB_Helper.getRowHeight(L,b);f.value=B,y.value=B,S.checked=!1}}i.classList.add("visible")}else{for(c=0;c<o.length;c++)L.isSquare(array)?(o[c].classList.add("visible"),o[c].removeAttribute("disabled")):(o[c].classList.remove("visible"),o[c].setAttribute("disabled","disabled"));for(c=0;c<l.length;c++)l[c].classList.remove("visible"),l[c].setAttribute("disabled","disabled");for(c=0;c<r.length;c++)r[c].classList.remove("visible"),r[c].setAttribute("disabled","disabled");i.classList.remove("visible")}}},B=function(e){for(var t=0;t<e.length;t++){for(var a=0;a<e[t].length;a++)" "+e[t][a];"\n"}L.isSquare(e)},E=function(){for(var e=document.getElementsByClassName("wptb-no-cell-action"),t=document.getElementsByClassName("wptb-single-action"),a=document.getElementsByClassName("wptb-multiple-select-action"),n=document.getElementById("wptb-left-scroll-panel-cell-settings"),l=L.getElementsByClassName("wptb-highlighted");l.length;)l[0].classList.remove("wptb-highlighted");n.classList.remove("visible");for(var r=0;r<array.length;r++)for(var o=0;o<array[r].length;o++)array[r][o]=0;for(r=0;r<a.length;r++)a[r].classList.remove("visible"),a[r].setAttribute("disabled","disabled");for(r=0;r<e.length;r++)e[r].classList.add("visible"),e[r].removeAttribute("disabled");for(r=0;r<t.length;r++)t[r].classList.remove("visible"),t[r].setAttribute("disabled","disabled")},C=function(e){for(var t=[],a=0;a<h;a++)t[a]=0;for(a=0;a<L.rows.length;a++)for(var n=L.rows[a].getElementsByTagName("td"),l=cellPointer=0;l<h;l+=stepsToMove)if(stepsToMove=1,t[l])t[l]--;else{var r=n[cellPointer++];if(r==e)return[a,l];if(1<r.rowSpan){for(var o=0;o<r.colSpan;o++)t[l+o]=r.rowSpan-1;stepsToMove=r.colSpan}else 1<r.colSpan&&(stepsToMove=r.colSpan)}};if(jQuery("#wptb-table-border-color").val(""),jQuery("#wptb-table-padding-number,#wptb-table-padding-slider").val("15"),e||t){for(var r=0;r<l.length;r++)"wptb-apply-inner-border"!==l[r].id&&l[r].classList.add("visible");(L=document.createElement("table")).classList.add("wptb-preview-table","wptb-element-main-table_setting-startedid-0"),L.style.border="0px solid",L.dataset.reconstraction=1,L.dataset.wptbAdaptiveTable=1;for(r=0;r<t;r++){(a=L.insertRow(-1)).classList.add("wptb-row");for(var w=0;w<e;w++)(n=new WPTB_Cell(T)).setCoords(r,w),n.getDOMElement().style.borderWidth="1px",a.appendChild(n.getDOMElement())}}else{var o=document.getElementsByClassName("wptb-preview-table");if(!(0<o.length))return;var i=(L=o[0]).getElementsByTagName("td");if(0<i.length)for(var s=0;s<i.length;s++)WPTB_Cell(T,i[s])}L.recalculateIndexes=function(e){for(var t=this.getElementsByTagName("tr"),a=void 0,n=0,l=0,r=[],o=0;o<t.length;o++){r[o],a=t[o].getElementsByTagName("td"),null==r[o]&&(r[o]=[]);for(var i=0,s=0;s<a.length;s++){if(null!=r[o][s])for(var d=0;d<100;d++){if(null==r[o][i]){r[o][i]=a[s],a[s].dataset.xIndex=i;break}i++}else r[o][s]=a[s],a[s].dataset.xIndex=i;if(a[s].dataset.yIndex=o,1<a[s].colSpan)for(var p=1;p<a[s].colSpan;p++)i++,r[o][i]="tdDummy";if(1<a[s].rowSpan)for(var c=1;c<a[s].rowSpan;c++){null==r[o+c]&&(r[o+c]=[]);for(var m=0;m<a[s].colSpan;m++)r[o+c][i-a[s].colSpan+1+m]="tdDummy"}i++,0==o&&(l=i)}n<s&&(n=s)}this.columns=n,this.maxCols=l},L.addColumnWidth=function(m,b){var e=L.getElementsByClassName("wptb-highlighted");if(0<e.length){for(var t=0;t<e.length;t++){var a=e[t].dataset.xIndex;a&&function e(t,a){for(var n=L.rows,l=!1,r=[],o=0;o<n.length;o++)for(var i=n[o].children,s=0;s<i.length;s++){var d=i[s];if(d.dataset.xIndex==t){if(m)if(d.colSpan==a){d.style.width=m+"px",d.removeAttribute("data-wptb-fixed-width"),l=!0;var p=document.getElementById("wptb-table-column-width-auto-fixed");p.checked||(p.checked=!0)}else d.style.width=null,d.dataset.wptbFixedWidth=m,o!=n.length-1||l||e(t,a+1);else if(b)d.style.width=null,d.removeAttribute("data-wptb-fixed-width");else if(d.dataset.wptbFixedWidth)d.colSpan==a&&(d.style.width=d.dataset.wptbFixedWidth+"px",d.removeAttribute("data-wptb-fixed-width"));else if(d.style.width){for(var c=0;c<r.length;c++)r[c].style.width=d.style.width;r=[]}else r.push(d);break}}}(a,1)}L.tdDefaultWidth()}},L.tdDefaultWidth=function(){for(var e,t=L.rows,a=0,n=0,l=document.getElementsByClassName("wptb-table-setup")[0],r=l.offsetWidth,o=[],i=[],s=0,d=0,p="",c=window.getComputedStyle(L,null),m=c.getPropertyValue("border-left-width"),b=c.getPropertyValue("border-right-width"),u=parseFloat(m,10)+parseFloat(b,10),w=0;w<t.length;w++)for(var g=t[w].children,h=0;h<g.length;h++){var v=g[h];if(o[parseFloat(v.dataset.xIndex)]||i[parseFloat(v.dataset.xIndex)])i[parseFloat(v.dataset.xIndex)]?v.dataset.wptbFixedWidth||(v.dataset.wptbCssTdAutoWidth=!0):o[parseFloat(v.dataset.xIndex)]&&v.removeAttribute("data-wptb-css-td-auto-width");else if(v.style.width?(o[parseFloat(v.dataset.xIndex)]=parseFloat(v.style.width),v.removeAttribute("data-wptb-css-td-auto-width")):v.dataset.wptbFixedWidth||(i[parseFloat(v.dataset.xIndex)]=100,v.dataset.wptbCssTdAutoWidth=!0),window.getComputedStyle(v,null)){var f=window.getComputedStyle(v,null),y=f.getPropertyValue("padding-left"),S=f.getPropertyValue("padding-right");s=parseFloat(y,10)+parseFloat(S,10);var T=f.getPropertyValue("border-left-width"),B=f.getPropertyValue("border-right-width");d=parseFloat(T,10)+parseFloat(B,10),d/=2,o[parseFloat(v.dataset.xIndex)]?(o[parseFloat(v.dataset.xIndex)]+=s,o[parseFloat(v.dataset.xIndex)]+=d,0==h&&u/2<=parseFloat(T,10)?o[parseFloat(v.dataset.xIndex)]+=parseFloat(T,10)/2:0==h&&u/2>parseFloat(T,10)&&(o[parseFloat(v.dataset.xIndex)]+=u/2-parseFloat(B,10)/2),h==g.length-1&&u/2<=parseFloat(B,10)?o[parseFloat(v.dataset.xIndex)]+=parseFloat(B,10)/2:h==g.length-1&&u/2>parseFloat(B,10)&&(o[parseFloat(v.dataset.xIndex)]+=u/2-parseFloat(B,10)/2)):i[parseFloat(v.dataset.xIndex)]&&(i[parseFloat(v.dataset.xIndex)]+=s,i[parseFloat(v.dataset.xIndex)]+=d,0==h&&u/2<=parseFloat(T,10)?i[parseFloat(v.dataset.xIndex)]+=parseFloat(T,10)/2:0==h&&u/2>parseFloat(T,10)&&(i[parseFloat(v.dataset.xIndex)]+=u/2-parseFloat(T,10)/2),h==g.length-1&&u/2<=parseFloat(B,10)?i[parseFloat(v.dataset.xIndex)]+=parseFloat(B,10)/2:h==g.length-1&&u/2>parseFloat(B,10)&&(i[parseFloat(v.dataset.xIndex)]+=u/2-parseFloat(T,10)/2))}}for(var E=0;E<o.length;E++)o[E]&&(a+=o[E]);for(var C=0,x=0;x<i.length;x++)i[x]&&(n+=i[x],C++);e=a+n,L.dataset.wptbTableTdsSumMaxWidth=e,C?(L.dataset.wptbCellsWidthAutoCount=C,L.mergingСellsHorizontally?L.dataset.wptbFixedWidthSize=a:L.removeAttribute("data-wptb-fixed-width-size")):(L.removeAttribute("data-wptb-fixed-width-size"),L.removeAttribute("data-wptb-cells-width-auto-count"));var A=!1,N=void 0;e<r?C?(L.style.minWidth="100%",L.mergingСellsHorizontally?(L.style.width="auto",N=(N=(r-a)/C)-s-d,A=!0):L.style.width="100%"):(L.style.width="auto",L.style.minWidth=null,L.style.maxWidth=null):(L.style.maxWidth=null,L.style.minWidth=e+"px",L.style.width="auto",N="100",A=!0);var _=document.head;if(_){var W=_.querySelector('style[data-wptb-td-auto-width="true"]');W&&_.removeChild(W)}if(A&&((p=document.createElement("style")).setAttribute("data-wptb-td-auto-width",!0),p.innerHTML="[data-wptb-css-td-auto-width=true]{width:"+N+"px}",_&&_.appendChild(p)),L.dataset.wptbTableAlignment){var P=L.dataset.wptbTableAlignment;l.offsetWidth<L.offsetWidth?L.style.float=null:L.style.float="center"==P?null:P,l.style.float="center"==P?null:P,N&&L.dataset.wptbTableContainerMaxWidth&&L.offsetWidth<L.dataset.wptbTableContainerMaxWidth&&(L.style.width="100%")}else L.style.float=null},L.addRowHeight=function(m,b){var e=L.getElementsByClassName("wptb-highlighted");if(0<e.length)for(var t=0;t<e.length;t++){var a=e[t].dataset.yIndex;a&&function e(t,a){for(var n=L.rows,l=!1,r=[],o=0;o<n.length;o++)for(var i=n[o].children,s=0;s<i.length;s++){var d=i[s];if(d.dataset.yIndex==t)if(m){if(d.rowSpan==a){d.style.height=m+"px",d.removeAttribute("data-wptb-fixed-heidht"),l=!0;var p=document.getElementById("wptb-table-row-height-auto-fixed");p.checked||(p.checked=!0);continue}d.style.height=null,d.dataset.wptbFixedHeight=m,s!=i.length-1||l||e(t,a+1)}else if(b)d.style.height=null,d.removeAttribute("data-wptb-fixed-heidht");else if(d.dataset.wptbFixedHeight)(d.rowSpan=a)&&(d.style.height=d.dataset.wptbFixedHeight+"px",d.removeAttribute("data-wptb-fixed-width"));else if(d.style.height){for(var c=0;c<r.length;c++)r[c].style.height=d.style.height;r=[]}else r.push(d)}}(a,1)}},L.reconstraction=function(){var e=L.getElementsByTagName("td");L.mergingСellsHorizontally=!1,L.mergingCellsVertically=!1,L.dataset.reconstraction=1;for(var t=0,a=0;a<e.length&&(1<e[a].colSpan&&(L.dataset.reconstraction=0,L.mergingСellsHorizontally=!0,t++),1<e[a].rowSpan&&(L.dataset.reconstraction=0,L.mergingCellsVertically=!0,t++),2!=t);a++);},L.addColumnEnd=function(){var e=void 0,t=document.getElementsByClassName("wptb-preview-table"),a=void 0,n=void 0;0<t.length&&(a=t[0].querySelector("td")),a&&(n=a.getAttribute("style"));for(var l=0;l<L.rows.length;l++)e=new WPTB_Cell(T),n&&(e.getDOMElement().setAttribute("style",n),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null),L.rows[l].appendChild(e.getDOMElement()),array[l].push(0);h++,L.recalculateIndexes(),L.tdDefaultWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()},L.addColumnStart=function(){var e=void 0,t=void 0,a=document.getElementsByClassName("wptb-preview-table"),n=void 0,l=void 0;0<a.length&&(n=a[0].querySelector("td")),n&&(l=n.getAttribute("style"));for(var r=0;r<L.rows.length;r++)e=new WPTB_Cell(T),l&&(e.getDOMElement().setAttribute("style",l),e.getDOMElement().style.width=null,e.getDOMElement().style.height=null),(t=L.rows[r].getElementsByTagName("td")[0])?L.rows[r].insertBefore(e.getDOMElement(),t):L.rows[r].appendChild(e.getDOMElement()),array[r].push(0);h++,L.recalculateIndexes(),L.tdDefaultWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()},L.addColumnAfter=function(e){var t=L.rows,a=void 0,n=void 0,l=document.querySelector(".wptb-highlighted"),r=l.getAttribute("style"),o=null!=e&&"number"==typeof e?e:C(l)[1];if(h-o-l.colSpan+1==1)L.addColumnEnd();else{for(var i=!1,s=void 0,d=void 0,p=void 0,c=[],m=void 0,b=0;b<h;b++)c.push(0);for(b=0;b<t.length;b++){a=0,n=t[b].getElementsByTagName("td"),i=!1;for(var u=0;u<h;u+=s){if(s=1,i){d=new WPTB_Cell(T),r&&(d.getDOMElement().setAttribute("style",r),d.getDOMElement().style.width=null,d.getDOMElement().style.height=null),m&&t[b].contains(m)?(p=m.nextSibling)?t[b].insertBefore(d.getDOMElement(),p):t[b].appendChild(d.getDOMElement()):t[b].insertBefore(d.getDOMElement(),n[0]);break}if(0<c[u])o==u&&(i=!0);else if(1<(m=n[a++]).rowSpan){s=m.colSpan;for(var w=0;w<m.colSpan;w++)c[u+w]=m.rowSpan,u+w==o&&(i=!0)}else if(1<m.colSpan){s=m.colSpan;for(w=0;w<m.colSpan;w++)u+w==o&&(i=!0)}else u==o&&(i=!0)}for(var g=0;g<h;g++)0<c[g]&&c[g]--}for(b=0;b<array.length;b++)array[b].push(0);h++,B(array),L.recalculateIndexes(),L.addColumnWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()}},L.addColumnBefore=function(){var e=document.querySelector(".wptb-highlighted"),t=C(e)[1];0===t?L.addColumnStart():L.addColumnAfter(t-1)},L.addRowToTheEnd=function(){var e=L.insertRow(-1),t=void 0,a=void 0,n=document.getElementsByClassName("wptb-preview-table");if(e.classList.add("wptb-row"),0<n.length){n=n[0];for(var l=0;l<h;l++){t=new WPTB_Cell(T);var r=n.querySelector('[data-x-index="'+l+'"]');if(r){var o=r.getAttribute("style");t.getDOMElement().setAttribute("style",o),t.getDOMElement().style.height=null}e.appendChild(t.getDOMElement())}a=Array.from(array[0]),array.push(a),B(array),L.recalculateIndexes(),L.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()}},L.addRowToTheStart=function(){var e=L.insertRow(0),t=void 0,a=void 0,n=document.getElementsByClassName("wptb-preview-table");if(e.classList.add("wptb-row"),0<n.length){n=n[0];for(var l=0;l<h;l++){t=new WPTB_Cell(T);var r=n.querySelector('[data-x-index="'+l+'"]');if(r){var o=r.getAttribute("style");t.getDOMElement().setAttribute("style",o),t.getDOMElement().style.height=null}e.appendChild(t.getDOMElement())}a=Array.from(array[0]),array.push(a),B(array),L.recalculateIndexes(),L.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()}},L.addRowBefore=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=C(e)[0],n=void 0,l=a-1;0<=l;l--){var r=L.rows[l].children,o=r.length;if(0<o)for(var i=0;i<o;i++)if(1==r[i].rowSpan){a=l,n=!0;break}if(n)break}0===a?L.addRowToTheStart():L.addRowAfter(a,t)},L.addRowAfter=function(e,t){var a,n=void 0;if(null!=e&&"number"==typeof e||null!=t)n=e;else{var l=document.querySelector(".wptb-highlighted");t=l.getAttribute("style"),n=(e=C(l)[0])+l.rowSpan-1}var r=0;if(n<L.rows.length-1){for(var o=0;o<=n;o++){var i=L.rows[o].children,s=i.length;if(0<s)for(var d=0;d<s;d++){n<i[d].rowSpan-1+o&&i[d].rowSpan++}}var p=L.rows[n+1].children,c=p.length;if(0<c)for(var m=0;m<c;m++)r+=p[m].colSpan}else r=array[0].length;var b=L.insertRow(n+1);for(b.classList.add("wptb-row"),w=0;w<r;w++){var u=new WPTB_Cell(T);u.getDOMElement().setAttribute("style",t),u.getDOMElement().style.width=null,u.getDOMElement().style.height=null,b.appendChild(u.getDOMElement())}a=Array.from(array[0]),array.push(a),B(array),L.recalculateIndexes(),L.addColumnWidth(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()},L.isSquare=function(e){for(var t,a,n=-1,l=-1,r=-1,o=-1,i=0,s=0;s<e.length;s++)for(var d=0;d<e[s].length;d++)1==e[s][d]&&((d<l||-1==l)&&(l=d),(s<n||-1==n)&&(n=s));for(s=e.length-1;-1<s;s--)for(d=e[s].length-1;-1<d;d--)1==e[s][d]&&(o<d&&(o=d),r<s&&(r=s));for(s=n;s<r;s++)for(d=l;d<o;d++)if(0==e[s][d]||null==e[s][d])return!1;for(s=0;s<e.length;s++)for(d=0;d<e[s].length;d++)1==e[s][d]&&i++;return(t=r-n+1)*(a=o-l+1)===i&&[t,a]},L.mergeCells=function(){for(var e=L.isSquare(array),t=e[0],a=e[1],n=document.querySelector(".wptb-highlighted"),l=[].slice.call(document.getElementsByClassName("wptb-highlighted"),1),r=[],o=0;o<l.length;o++){var i=l[o].getElementsByClassName("wptb-ph-element");if(0<i.length)for(var s=i.length,d=0;d<s;d++)r.push(i[d]);l[o].parentNode.removeChild(l[o])}if(0<r.length)for(var p=0;p<r.length;p++)n.appendChild(r[p]);n.colSpan=a,n.rowSpan=t,L.recalculateIndexes(),L.reconstraction();var c=n.style.width,m=n.dataset.wptbFixedWidth;c?L.addColumnWidth(parseFloat(c,10)):m?L.addColumnWidth():L.addColumnWidth(!1,!0);var b=n.style.height,u=n.dataset.wptbFixedHeight;b?L.addRowHeight(parseFloat(b,10)):u?L.addRowHeight():L.addRowHeight(!1,!0),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()},L.splitCell=function(){var e=document.getElementsByClassName("wptb-highlighted")[0],t=e.rowSpan,a=e.colSpan,n=e.getAttribute("style"),l=C(e)[0],r=L.rows[l],o=e.dataset.xIndex;e.rowSpan=1;for(var i=e.colSpan=1;i<a;i++){var s=new WPTB_Cell(T);s.getDOMElement().setAttribute("style",n),s.getDOMElement().classList.add("wptb-highlighted"),e.nextSibling?r.insertBefore(s.getDOMElement(),e.nextSibling):r.appendChild(s.getDOMElement())}if(1<t)for(var d=1;d<t;d++){var p=void 0,c=L.rows[l+d],m=c.children,b=m.length;if(0<b)for(var u=0;u<b;u++)if(Number(m[u].dataset.xIndex)>Number(o)){p=m[u];break}for(var w=0;w<a;w++){var g=new WPTB_Cell(T);g.getDOMElement().setAttribute("style",n),null!=p?c.insertBefore(g.getDOMElement(),p):c.appendChild(g.getDOMElement())}}L.recalculateIndexes(),L.reconstraction(),L.addColumnWidth(),L.addRowHeight(),WPTB_Helper.dataTitleColumnSet(L),E(),(new WPTB_TableStateSaveManager).tableStateSet()},L.findRowspannedCells=function(e){var t,a=[];if(actualPoints=function(e){for(var t=L.rows[e].getElementsByTagName("td"),a=0,n=0;n<t.length;n++)a+=t[n].colSpan;return a}(e),actualPoints===h)return[];t=h-actualPoints;for(var n=e-1;0<=n&&t;n--){var l=L.rows[n].getElementsByTagName("td");for(n=0;n<l.length;n++)1<l[n].rowSpan&&(a.push(l[n]),t-=l[n].colSpan)}return a},L.addLackingCells=function(){for(var e=[],t=0;t<L.rows.length;t++)e.push(0);for(t=0;t<L.rows.length;t++)for(var a=L.rows[t].getElementsByTagName("td"),n=0;n<a.length;n++)if(1<a[n].rowSpan)for(var l=1;l<a[n].rowSpan;l++)e[t+l]++;for(t=0;t<L.rows.length;t++){a=L.rows[t].getElementsByTagName("td");var r=0;for(n=0;n<a.length;n++)r+=a[n].colSpan;r+=e[t],difference=h-r;for(n=0;n<difference;n++){var o=new WPTB_Cell(T);L.rows[t].appendChild(o.getDOMElement())}}},L.deleteRow=function(){var e=document.querySelector(".wptb-highlighted"),t=e.getAttribute("style"),a=e.rowSpan,n=C(e)[0],l=void 0;null==a&&(a=1);for(var r=0;r<a;r++){var o=L.rows[n].children,i=L.rows[n+1],s=void 0,d=void 0,p=[];if(null!=i){d=(s=i.children).length;for(var c=0;c<o.length;c++)if(1<o[c].rowSpan){var m=new WPTB_Cell(T);m.getDOMElement().setAttribute("style",t),m.getDOMElement().colSpan=o[c].colSpan,m.getDOMElement().rowSpan=o[c].rowSpan-1;for(var b=void 0,u=0;u<d;u++)if(Number(s[u].dataset.xIndex)>Number(o[c].dataset.xIndex)){b=s[u];break}b?p.push([m,b]):p.push([m])}if(0<p.length)for(var w=0;w<p.length;w++)null!=p[w][1]?i.insertBefore(p[w][0].getDOMElement(),p[w][1]):i.appendChild(p[w][0].getDOMElement())}var g=L.rows;if(0<g.length)for(var h=0;h<n;h++){var v=g[h].children;if(0<v.length)for(var f=0;f<v.length;f++)v[f].rowSpan-1>=n-h&&v[f].rowSpan--}if(l=Array.from(array[0]),array.pop(l),B(array),L.getElementsByTagName("tbody")[0].removeChild(L.rows[n]),0==L.rows.length){WPTB_Helper.toggleTableEditMode(),S.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table";var y=document.getElementsByClassName("wptb-save-btn");0<y.length&&(y=y[0]).classList.add("wptb-save-disabled")}else L.recalculateIndexes(),WPTB_Helper.dataTitleColumnSet(L)}E(),(new WPTB_TableStateSaveManager).tableStateSet()},L.deleteColumn=function(){for(var e=document.querySelector(".wptb-highlighted"),t=e.dataset.xIndex,a=e.colSpan,n=0;n<a;n++){for(var l=0;l<L.rows.length;l++){var r=L.rows[l].children,o=r.length;if(0<o)for(var i=o-1;0<=i;i--){if(Number(r[i].dataset.xIndex)==Number(t)){1<r[i].colSpan?r[i].colSpan--:L.rows[l].removeChild(r[i]);break}if(Number(r[i].dataset.xIndex)<Number(t)&&Number(r[i].dataset.xIndex)+Number(r[i].colSpan-1)>=t){1<r[i].colSpan&&r[i].colSpan--;break}}}for(var s=0;s<L.rows.length;s++)null!=array[s]&&array[s].pop();if(h--,0==L.querySelectorAll("td").length){WPTB_Helper.toggleTableEditMode(),S.innerHTML="",document.getElementsByClassName("wptb-table-generator")[0].style.display="table";var d=document.getElementsByClassName("wptb-save-btn");0<d.length&&(d=d[0]).classList.add("wptb-save-disabled")}else L.recalculateIndexes(),L.tdDefaultWidth(),WPTB_Helper.dataTitleColumnSet(L)}E(),(new WPTB_TableStateSaveManager).tableStateSet()},document.getElementsByClassName("wptb-table-generator")[0].style.display="none",array=function(){for(var e=[],t=[],a=0;a<L.rows.length;a++){for(var n=L.rows[a].getElementsByTagName("td"),l=0,r=0;r<n.length;r++)l+=n[r].colSpan;e.push(l)}h=Math.max.apply(null,e);var o=L.rows.length;for(a=0;a<o;a++)for(t[a]=[],r=0;r<h;r++)t[a].push(0);return B(t),t}(),E(),B(array),S.appendChild(L),L.recalculateIndexes(!0),L.reconstraction(),L.tdDefaultWidth(),S.onresize=function(){L.tdDefaultWidth()},WPTB_LeftPanel()},WPTB_TableStateSaveManager=(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},function(){this.tableStateSet=function(e){if(!(e&&window.wptbTableStateSaving&&Array.isArray(window.wptbTableStateSaving))){var t=document.getElementsByClassName("wptb-preview-table");t=0<t.length?t[0]:"",window.wptbTableStateSaving||Array.isArray(window.wptbTableStateSaving)||(window.wptbTableStateSaving=[]),window.wptbTableStateSaving.length>window.wptbTableStateNumberShow&&(window.wptbTableStateSaving=window.wptbTableStateSaving.slice(0,window.wptbTableStateNumberShow+1));var a="";if(t){for(var n=(a=t.cloneNode(!0)).getElementsByClassName("wptb-highlighted"),l=0;l<n.length;l++)n[l].classList.remove("wptb-highlighted");for(var r=a.getElementsByClassName("wptb-directlyhovered"),o=0;o<r.length;o++)r[o].classList.remove("wptb-directlyhovered");var i=a.querySelectorAll(".mce-content-body");if(0<i.length)for(var s=0;s<i.length;s++)i[s].classList.remove("mce-content-body");var d=a.querySelectorAll("[data-mce-style]");if(0<d.length)for(var p=0;p<d.length;p++)d[p].removeAttribute("data-mce-style");var c=a.querySelectorAll("[id^=mce_]");if(0<c.length)for(var m=0;m<c.length;m++)c[m].removeAttribute("id")}var b="",u=document.head;if(u){var w=u.querySelector('style[data-wptb-td-auto-width="true"]');w&&(b=w.innerHTML)}if(window.wptbTableStateSaving.push([a,b]),window.wptbTableStateNumberShow=window.wptbTableStateSaving.length-1,0<window.wptbTableStateSaving.length-1){var g=document.getElementsByClassName("wptb-undo");0<g.length&&(g=g[0]).classList.remove("wptb-undoredo-disabled")}var h=document.getElementsByClassName("wptb-redo");0<h.length&&(h=h[0]).classList.add("wptb-undoredo-disabled");var v=document.getElementsByClassName("wptb-save-btn");0<v.length&&(!(v=v[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==v.dataset.wptbTableStateNumberSave||!t?v.classList.add("wptb-save-disabled"):v.classList.remove("wptb-save-disabled"))}},this.tableStateGet=function(e){if(e&&window.wptbTableStateSaving&&0<window.wptbTableStateSaving.length){if("undo"==e){if(!(0<window.wptbTableStateNumberShow))return!1;window.wptbTableStateNumberShow--}else if("redo"==e){if(!(window.wptbTableStateNumberShow<window.wptbTableStateSaving.length))return!1;window.wptbTableStateNumberShow++}var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0],0==window.wptbTableStateNumberShow?t&&t.classList.add("wptb-undoredo-disabled"):0<window.wptbTableStateNumberShow&&t&&t.classList.remove("wptb-undoredo-disabled"));var a=document.getElementsByClassName("wptb-redo");0<a.length&&(a=a[0],window.wptbTableStateNumberShow==window.wptbTableStateSaving.length-1?a&&a.classList.add("wptb-undoredo-disabled"):window.wptbTableStateNumberShow<window.wptbTableStateSaving.length-1&&a&&a.classList.remove("wptb-undoredo-disabled"));var n=document.getElementsByClassName("wptb-save-btn");0<n.length&&(!(n=n[0]).dataset.wptbTableStateNumberSave&&0==window.wptbTableStateNumberShow||window.wptbTableStateNumberShow==n.dataset.wptbTableStateNumberSave?n.classList.add("wptb-save-disabled"):n.classList.remove("wptb-save-disabled"));var l=document.getElementsByClassName("wptb-table-setup");if(0<l.length){if((l=l[0]).innerHTML="",window.wptbTableStateSaving[window.wptbTableStateNumberShow]&&(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&"object"===_typeof(window.wptbTableStateSaving[window.wptbTableStateNumberShow][0])&&"outerHTML"in window.wptbTableStateSaving[window.wptbTableStateNumberShow][0]&&(l.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][0].outerHTML),l.innerHTML?document.getElementsByClassName("wptb-table-generator")[0].style.display="none":(document.getElementsByClassName("wptb-table-generator")[0].style.display="table",n.classList.add("wptb-save-disabled"))),window.wptbTableStateSaving[window.wptbTableStateNumberShow]){var r=document.head;if(r){var o=r.querySelector('style[data-wptb-td-auto-width="true"]');if(o&&r.removeChild(o),window.wptbTableStateSaving[window.wptbTableStateNumberShow][1]){var i=document.createElement("style");i.setAttribute("data-wptb-td-auto-width",!0),i.innerHTML=window.wptbTableStateSaving[window.wptbTableStateNumberShow][1],r.appendChild(i)}}}var s=document.getElementsByTagName("body");0<s.length&&(s=s[0]),WPTB_Helper.elementOptionsPanelClear(),WPTB_LeftPanel();var d=document.getElementById("wptb-left-scroll-panel-cell-settings");d&&d.classList.remove("visible")}}},this.tableStateClear=function(){delete window.wptbTableStateSaving,delete window.wptbTableStateNumberShow;var e=document.getElementsByClassName("wptb-save-btn");0<e.length&&(e=e[0]).removeAttribute("data-wptb-table-state-number-save");var t=document.getElementsByClassName("wptb-undo");0<t.length&&(t=t[0]).classList.add("wptb-undoredo-disabled");var a=document.getElementsByClassName("wptb-redo");0<a.length&&(a=a[0]).classList.add("wptb-undoredo-disabled")}}),WPTB_innerElementSet=function p(t){t.ondragenter=function(e){-1==e.dataTransfer.types.indexOf("wptbelement")&&-1==e.dataTransfer.types.indexOf("wptb-moving-mode")||(WPTB_DropHandle(this,e),t.classList.add("wptb-ondragenter"))},t.ondragover=function(e){e.preventDefault(),WPTB_DropHandle(this,e)},t.ondragleave=function(){},t.ondrop=function(e){this.classList.remove("wptb-ondragenter");var t=void 0,a=void 0;if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.getData("wptbElement")||e.dataTransfer.getData("node")){var n=void 0,l=void 0;if(0<document.getElementsByClassName("wptb-drop-handle").length&&(n=document.getElementsByClassName("wptb-drop-handle")[0]),0<document.getElementsByClassName("wptb-drop-border-marker").length&&(l=document.getElementsByClassName("wptb-drop-border-marker")[0]),t=e.dataTransfer.getData("wptbElement")?(t=WPTB_Helper.newElementProxy(e.dataTransfer.getData("wptbElement"))).getDOMElement():(a=e.dataTransfer.getData("node"),document.getElementsByClassName(a)[0]),"block"==n.style.display){var r=void 0;if("Drop Here"==n.dataset.text)(r=n.getDOMParentElement()).appendChild(t);else{var o=n.getDOMParentElement();if(r=o.parentNode,"Above Element"==n.dataset.text)r.insertBefore(t,o);else if("Below Element"==n.dataset.text){var i=o.nextSibling;r.insertBefore(t,i)}}var s=r.parentNode;if(WPTB_Helper.rowIsTop(s)){var d=WPTB_Helper.findAncestor(s,"wptb-preview-table");d.classList.contains("wptb-table-preview-head")&&WPTB_Helper.dataTitleColumnSet(d)}t.className.match(/wptb-element-(.+)-(\d+)/i)[1];if(e.dataTransfer.getData("wptbElement"),n.style.display="none",l.style.display="none",p(t),!t.classList.contains("wptb-image-container")||t.classList.contains("wptb-moving-mode"))t.classList.remove("wptb-moving-mode"),(new WPTB_TableStateSaveManager).tableStateSet();return!0}}},t.onmouseover=function(e){t.classList.remove("wptb-ondragenter")}};_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var applyGenericItemSettings=function(e,t){var a,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],l=e.getDOMElement();if(l.classList.contains("wptb-ph-element")){if(null==t||1==n){a=document.counter.nextIndex(e.kind);for(var r=document.getElementsByClassName("wptb-ph-element"),o=[],i=0;i<r.length;i++){var s=new RegExp("wptb-element-"+e.kind+"-(\\d+)","i"),d=r[i].className.match(s);d&&o.push(d[1])}if(0<o.length)a=Math.max.apply(Math,o)+1;else a=1;if(n)for(var p=[].concat(_toConsumableArray(l.attributes)),c=0;c<p.length;c++)if(p[c]&&"object"===_typeof(p[c])&&p[c].nodeName){var m=new RegExp("data-wptb-el-"+e.kind+"-(\\d+)-([a-zA-Z0-9_-]+)","i"),b=p[c].nodeName.match(m);if(b&&Array.isArray(b)){var u=p[c].nodeName.replace(e.kind+"-"+b[1],e.kind+"-"+a),w=p[c].nodeValue;l.removeAttribute(p[c].nodeName),l.setAttribute(u,w)}}}else if(t&&!n){var g=t.split("-");a=g[g.length-1]}var h=l.className.match(/wptb-element-(.+)-(\d+)/i);h&&l.classList.remove(h[0]),l.classList.contains("wptb-ph-element")||l.classList.add("wptb-ph-element"),l.classList.contains("wptb-element-"+e.kind+"-"+a)||l.classList.add("wptb-element-"+e.kind+"-"+a),new WPTB_ElementOptions(e,a,t),WPTB_Helper.elementStartScript(e.getDOMElement()),document.counter.increment(e.kind)}l.onmouseenter=function(e){if(!e.target.classList.contains("wptb-moving-mode")){var t=new WPTB_ActionsField;t.addActionField(1,l),t.setParameters(l),l.classList.remove("wptb-ondragenter")}},l.onmouseleave=function(e){(new WPTB_ActionsField).leaveFromField(e,l)}};